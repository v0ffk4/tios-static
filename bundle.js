(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))e(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const a of f.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function r(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerpolicy&&(f.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?f.credentials="include":d.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function e(d){if(d.ep)return;d.ep=!0;const f=r(d);fetch(d.href,f)}})();function rr(){}function Gd(w,t){for(const r in t)w[r]=t[r];return w}function Aa(w){return w()}function Pl(){return Object.create(null)}function zi(w){w.forEach(Aa)}function po(w){return typeof w=="function"}function Ar(w,t){return w!=w?t==t:w!==t||w&&typeof w=="object"||typeof w=="function"}let Is;function Dl(w,t){return Is||(Is=document.createElement("a")),Is.href=t,w===Is.href}function Lu(w){return Object.keys(w).length===0}function Ru(w,t,r,e){if(w){const d=Pu(w,t,r,e);return w[0](d)}}function Pu(w,t,r,e){return w[1]&&e?Gd(r.ctx.slice(),w[1](e(t))):r.ctx}function Du(w,t,r,e){if(w[2]&&e){const d=w[2](e(r));if(t.dirty===void 0)return d;if(typeof d=="object"){const f=[],a=Math.max(t.dirty.length,d.length);for(let s=0;s<a;s+=1)f[s]=t.dirty[s]|d[s];return f}return t.dirty|d}return t.dirty}function Iu(w,t,r,e,d,f){if(d){const a=Pu(t,r,e,f);w.p(a,d)}}function Ou(w){if(w.ctx.length>32){const t=[],r=w.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function gt(w,t){w.appendChild(t)}function Vt(w,t,r){w.insertBefore(t,r||null)}function tr(w){w.parentNode&&w.parentNode.removeChild(w)}function ku(w,t){for(let r=0;r<w.length;r+=1)w[r]&&w[r].d(t)}function Dt(w){return document.createElement(w)}function ar(w){return document.createElementNS("http://www.w3.org/2000/svg",w)}function si(w){return document.createTextNode(w)}function vr(){return si(" ")}function Ca(){return si("")}function zd(w,t,r,e){return w.addEventListener(t,r,e),()=>w.removeEventListener(t,r,e)}function st(w,t,r){r==null?w.removeAttribute(t):w.getAttribute(t)!==r&&w.setAttribute(t,r)}function mo(w,t,r){t in w?w[t]=typeof w[t]=="boolean"&&r===""?!0:r:st(w,t,r)}function Vd(w){return Array.from(w.childNodes)}function La(w,t){t=""+t,w.wholeText!==t&&(w.data=t)}function Hd(w,t,r,e){r===null?w.style.removeProperty(t):w.style.setProperty(t,r,e?"important":"")}function Wd(w,t,{bubbles:r=!1,cancelable:e=!1}={}){const d=document.createEvent("CustomEvent");return d.initCustomEvent(w,r,e,t),d}function Vi(w){const t={};for(const r of w)t[r.name]=r.value;return t}let vs;function ms(w){vs=w}function Ts(){if(!vs)throw new Error("Function called outside component initialization");return vs}function Hi(w){Ts().$$.on_mount.push(w)}function Ra(w){Ts().$$.on_destroy.push(w)}function qd(){const w=Ts();return(t,r,{cancelable:e=!1}={})=>{const d=w.$$.callbacks[t];if(d){const f=Wd(t,r,{cancelable:e});return d.slice().forEach(a=>{a.call(w,f)}),!f.defaultPrevented}return!0}}function Nu(w,t){return Ts().$$.context.set(w,t),t}function Il(w){return Ts().$$.context.get(w)}const Ci=[],go=[],lo=[],Ol=[],Xd=Promise.resolve();let ma=!1;function Yd(){ma||(ma=!0,Xd.then(cn))}function ga(w){lo.push(w)}const Ro=new Set;let pi=0;function cn(){if(pi!==0)return;const w=vs;do{try{for(;pi<Ci.length;){const t=Ci[pi];pi++,ms(t),Zd(t.$$)}}catch(t){throw Ci.length=0,pi=0,t}for(ms(null),Ci.length=0,pi=0;go.length;)go.pop()();for(let t=0;t<lo.length;t+=1){const r=lo[t];Ro.has(r)||(Ro.add(r),r())}lo.length=0}while(Ci.length);for(;Ol.length;)Ol.pop()();ma=!1,Ro.clear(),ms(w)}function Zd(w){if(w.fragment!==null){w.update(),zi(w.before_update);const t=w.dirty;w.dirty=[-1],w.fragment&&w.fragment.p(w.ctx,t),w.after_update.forEach(ga)}}const co=new Set;let Yn;function Pa(){Yn={r:0,c:[],p:Yn}}function Da(){Yn.r||zi(Yn.c),Yn=Yn.p}function er(w,t){w&&w.i&&(co.delete(w),w.i(t))}function yr(w,t,r,e){if(w&&w.o){if(co.has(w))return;co.add(w),Yn.c.push(()=>{co.delete(w),e&&(r&&w.d(1),e())}),w.o(t)}else e&&e()}function an(w){w&&w.c()}function Kr(w,t,r,e){const{fragment:d,after_update:f}=w.$$;d&&d.m(t,r),e||ga(()=>{const a=w.$$.on_mount.map(Aa).filter(po);w.$$.on_destroy?w.$$.on_destroy.push(...a):zi(a),w.$$.on_mount=[]}),f.forEach(ga)}function zr(w,t){const r=w.$$;r.fragment!==null&&(zi(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Kd(w,t){w.$$.dirty[0]===-1&&(Ci.push(w),Yd(),w.$$.dirty.fill(0)),w.$$.dirty[t/31|0]|=1<<t%31}function Cr(w,t,r,e,d,f,a,s=[-1]){const n=vs;ms(w);const l=w.$$={fragment:null,ctx:[],props:f,update:rr,not_equal:d,bound:Pl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(n?n.$$.context:[])),callbacks:Pl(),dirty:s,skip_bound:!1,root:t.target||n.$$.root};a&&a(l.root);let h=!1;if(l.ctx=r?r(w,t.props||{},(m,i,...o)=>{const c=o.length?o[0]:i;return l.ctx&&d(l.ctx[m],l.ctx[m]=c)&&(!l.skip_bound&&l.bound[m]&&l.bound[m](c),h&&Kd(w,m)),i}):[],l.update(),h=!0,zi(l.before_update),l.fragment=e?e(l.ctx):!1,t.target){if(t.hydrate){const m=Vd(t.target);l.fragment&&l.fragment.l(m),m.forEach(tr)}else l.fragment&&l.fragment.c();t.intro&&er(w.$$.fragment),Kr(w,t.target,t.anchor,t.customElement),cn()}ms(n)}let oi;typeof HTMLElement=="function"&&(oi=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:w}=this.$$;this.$$.on_disconnect=w.map(Aa).filter(po);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(w,t,r){this[w]=r}disconnectedCallback(){zi(this.$$.on_disconnect)}$destroy(){zr(this,1),this.$destroy=rr}$on(w,t){if(!po(t))return rr;const r=this.$$.callbacks[w]||(this.$$.callbacks[w]=[]);return r.push(t),()=>{const e=r.indexOf(t);e!==-1&&r.splice(e,1)}}$set(w){this.$$set&&!Lu(w)&&(this.$$.skip_bound=!0,this.$$set(w),this.$$.skip_bound=!1)}});class dn{$destroy(){zr(this,1),this.$destroy=rr}$on(t,r){if(!po(r))return rr;const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(r),()=>{const d=e.indexOf(r);d!==-1&&e.splice(d,1)}}$set(t){this.$$set&&!Lu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function ks(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ya={},Qd={get exports(){return ya},set exports(w){ya=w}};/*! p5.js v1.5.0 October 18, 2022 */(function(w,t){(function(r){w.exports=r()})(function(){var r;return function e(d,f,a){function s(h,m){if(!f[h]){if(!d[h]){var i=typeof ks=="function"&&ks;if(!m&&i)return i(h,!0);if(n)return n(h,!0);throw(m=new Error("Cannot find module '"+h+"'")).code="MODULE_NOT_FOUND",m}i=f[h]={exports:{}},d[h][0].call(i.exports,function(o){return s(d[h][1][o]||o)},i,i.exports,e,d,f,a)}return f[h].exports}for(var n=typeof ks=="function"&&ks,l=0;l<a.length;l++)s(a[l]);return s}({1:[function(e,d,f){f.byteLength=function(u){var u=i(u),c=u[0],u=u[1];return 3*(c+u)/4-u},f.toByteArray=function(o){var c,u,g=i(o),p=g[0],g=g[1],v=new n(function(x,A){return 3*(x+A)/4-A}(p,g)),b=0,_=0<g?p-4:p;for(u=0;u<_;u+=4)c=s[o.charCodeAt(u)]<<18|s[o.charCodeAt(u+1)]<<12|s[o.charCodeAt(u+2)]<<6|s[o.charCodeAt(u+3)],v[b++]=c>>16&255,v[b++]=c>>8&255,v[b++]=255&c;return g===2&&(c=s[o.charCodeAt(u)]<<2|s[o.charCodeAt(u+1)]>>4,v[b++]=255&c),g===1&&(c=s[o.charCodeAt(u)]<<10|s[o.charCodeAt(u+1)]<<4|s[o.charCodeAt(u+2)]>>2,v[b++]=c>>8&255,v[b++]=255&c),v},f.fromByteArray=function(o){for(var c,u=o.length,p=u%3,g=[],v=0,b=u-p;v<b;v+=16383)g.push(function(_,x,A){for(var E,T=[],C=x;C<A;C+=3)E=(_[C]<<16&16711680)+(_[C+1]<<8&65280)+(255&_[C+2]),T.push(function(R){return a[R>>18&63]+a[R>>12&63]+a[R>>6&63]+a[63&R]}(E));return T.join("")}(o,v,b<v+16383?b:v+16383));return p==1?(c=o[u-1],g.push(a[c>>2]+a[c<<4&63]+"==")):p==2&&(c=(o[u-2]<<8)+o[u-1],g.push(a[c>>10]+a[c>>4&63]+a[c<<2&63]+"=")),g.join("")};for(var a=[],s=[],n=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,m=l.length;h<m;++h)a[h]=l[h],s[l.charCodeAt(h)]=h;function i(o){var c=o.length;if(0<c%4)throw new Error("Invalid string. Length must be a multiple of 4");return o=o.indexOf("="),c=(o=o===-1?c:o)===c?0:4-o%4,[o,c]}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],2:[function(e,d,f){},{}],3:[function(e,d,f){arguments[4][2][0].apply(f,arguments)},{dup:2}],4:[function(e,d,f){(function(i){var s=e("base64-js"),n=e("ieee754"),l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,h=(f.Buffer=i,f.SlowBuffer=function(L){return+L!=L&&(L=0),i.alloc(+L)},f.INSPECT_MAX_BYTES=50,2147483647);function m(L){if(h<L)throw new RangeError('The value "'+L+'" is invalid for option "size"');return L=new Uint8Array(L),Object.setPrototypeOf(L,i.prototype),L}function i(L,O,U){if(typeof L!="number")return o(L,O,U);if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(L)}function o(L,O,U){if(typeof L=="string"){var V=L,J=O;if(i.isEncoding(J=typeof J=="string"&&J!==""?J:"utf8"))return le=0|v(V,J),ce=m(le),ce=(V=ce.write(V,J))!==le?ce.slice(0,V):ce;throw new TypeError("Unknown encoding: "+J)}if(ArrayBuffer.isView(L))return p(L);if(L!=null){if(Z(L,ArrayBuffer)||L&&Z(L.buffer,ArrayBuffer)){var le=L,V=O,ce=U;if(V<0||le.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<V+(ce||0))throw new RangeError('"length" is outside of buffer bounds');return le=V===void 0&&ce===void 0?new Uint8Array(le):ce===void 0?new Uint8Array(le,V):new Uint8Array(le,V,ce),Object.setPrototypeOf(le,i.prototype),le}if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(J=L.valueOf&&L.valueOf(),J!=null&&J!==L)return i.from(J,O,U);var ue=function(re){{var de,ve;if(i.isBuffer(re))return de=0|g(re.length),(ve=m(de)).length!==0&&re.copy(ve,0,0,de),ve}if(re.length!==void 0)return typeof re.length!="number"||q(re.length)?m(0):p(re);if(re.type==="Buffer"&&Array.isArray(re.data))return p(re.data)}(L);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return i.from(L[Symbol.toPrimitive]("string"),O,U)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function c(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function u(L){return c(L),m(L<0?0:0|g(L))}function p(L){for(var O=L.length<0?0:0|g(L.length),U=m(O),V=0;V<O;V+=1)U[V]=255&L[V];return U}function g(L){if(h<=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|L}function v(L,O){if(i.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Z(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var U=L.length,V=2<arguments.length&&arguments[2]===!0;if(!V&&U===0)return 0;for(var J=!1;;)switch(O){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return W(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return H(L).length;default:if(J)return V?-1:W(L).length;O=(""+O).toLowerCase(),J=!0}}function b(L,O,U){var V,J=!1;if((O=O===void 0||O<0?0:O)>this.length||(U=U===void 0||U>this.length?this.length:U)<=0||(U>>>=0)<=(O>>>=0))return"";for(L=L||"utf8";;)switch(L){case"hex":var le=this,we=O,ce=U,ve=le.length;(!ce||ce<0||ve<ce)&&(ce=ve);for(var ue="",re=we=!we||we<0?0:we;re<ce;++re)ue+=ee[le[re]];return ue;case"utf8":case"utf-8":return C(this,O,U);case"ascii":var de=this,ve=O,ie=U,_e="";ie=Math.min(de.length,ie);for(var Se=ve;Se<ie;++Se)_e+=String.fromCharCode(127&de[Se]);return _e;case"latin1":case"binary":var Te=this,we=O,De=U,Ie="";De=Math.min(Te.length,De);for(var We=we;We<De;++We)Ie+=String.fromCharCode(Te[We]);return Ie;case"base64":return $=this,V=U,(se=O)===0&&V===$.length?s.fromByteArray($):s.fromByteArray($.slice(se,V));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var $=O,se=U,Ae=this.slice($,se),Ne="",ze=0;ze<Ae.length;ze+=2)Ne+=String.fromCharCode(Ae[ze]+256*Ae[ze+1]);return Ne;default:if(J)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),J=!0}}function _(L,O,U){var V=L[O];L[O]=L[U],L[U]=V}function x(L,O,U,V,J){if(L.length===0)return-1;if(typeof U=="string"?(V=U,U=0):2147483647<U?U=2147483647:U<-2147483648&&(U=-2147483648),(U=(U=q(U=+U)?J?0:L.length-1:U)<0?L.length+U:U)>=L.length){if(J)return-1;U=L.length-1}else if(U<0){if(!J)return-1;U=0}if(typeof O=="string"&&(O=i.from(O,V)),i.isBuffer(O))return O.length===0?-1:A(L,O,U,V,J);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?(J?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(L,O,U):A(L,[O],U,V,J);throw new TypeError("val must be string, number or Buffer")}function A(L,O,U,V,J){var le=1,ce=L.length,ue=O.length;if(V!==void 0&&((V=String(V).toLowerCase())==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(L.length<2||O.length<2)return-1;ce/=le=2,ue/=2,U/=2}function re(Se,Te){return le===1?Se[Te]:Se.readUInt16BE(Te*le)}if(J)for(var de=-1,ve=U;ve<ce;ve++)if(re(L,ve)===re(O,de===-1?0:ve-de)){if(ve-(de=de===-1?ve:de)+1===ue)return de*le}else de!==-1&&(ve-=ve-de),de=-1;else for(ve=U=ce<U+ue?ce-ue:U;0<=ve;ve--){for(var ie=!0,_e=0;_e<ue;_e++)if(re(L,ve+_e)!==re(O,_e)){ie=!1;break}if(ie)return ve}return-1}function E(L,O,U,V){return X(function(J){for(var le=[],ce=0;ce<J.length;++ce)le.push(255&J.charCodeAt(ce));return le}(O),L,U,V)}function T(L,O,U,V){return X(function(J,le){for(var ce,ue,re=[],de=0;de<J.length&&!((le-=2)<0);++de)ue=J.charCodeAt(de),ce=ue>>8,ue=ue%256,re.push(ue),re.push(ce);return re}(O,L.length-U),L,U,V)}function C(L,O,U){U=Math.min(L.length,U);for(var V=[],J=O;J<U;){var le,ce,ue,re,de=L[J],ve=null,ie=239<de?4:223<de?3:191<de?2:1;if(J+ie<=U)switch(ie){case 1:de<128&&(ve=de);break;case 2:(192&(le=L[J+1]))==128&&127<(re=(31&de)<<6|63&le)&&(ve=re);break;case 3:le=L[J+1],ce=L[J+2],(192&le)==128&&(192&ce)==128&&2047<(re=(15&de)<<12|(63&le)<<6|63&ce)&&(re<55296||57343<re)&&(ve=re);break;case 4:le=L[J+1],ce=L[J+2],ue=L[J+3],(192&le)==128&&(192&ce)==128&&(192&ue)==128&&65535<(re=(15&de)<<18|(63&le)<<12|(63&ce)<<6|63&ue)&&re<1114112&&(ve=re)}ve===null?(ve=65533,ie=1):65535<ve&&(ve-=65536,V.push(ve>>>10&1023|55296),ve=56320|1023&ve),V.push(ve),J+=ie}var _e=V,Se=_e.length;if(Se<=R)return String.fromCharCode.apply(String,_e);for(var Te="",we=0;we<Se;)Te+=String.fromCharCode.apply(String,_e.slice(we,we+=R));return Te}f.kMaxLength=h,(i.TYPED_ARRAY_SUPPORT=function(){try{var L=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(L,O),L.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=o,Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(L,O,U){return O=O,U=U,c(L=L),!(L<=0)&&O!==void 0?typeof U=="string"?m(L).fill(O,U):m(L).fill(O):m(L)},i.allocUnsafe=u,i.allocUnsafeSlow=u,i.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==i.prototype},i.compare=function(L,O){if(Z(L,Uint8Array)&&(L=i.from(L,L.offset,L.byteLength)),Z(O,Uint8Array)&&(O=i.from(O,O.offset,O.byteLength)),!i.isBuffer(L)||!i.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===O)return 0;for(var U=L.length,V=O.length,J=0,le=Math.min(U,V);J<le;++J)if(L[J]!==O[J]){U=L[J],V=O[J];break}return U<V?-1:V<U?1:0},i.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(L,O){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return i.alloc(0);if(O===void 0)for(J=O=0;J<L.length;++J)O+=L[J].length;for(var U=i.allocUnsafe(O),V=0,J=0;J<L.length;++J){var le=L[J];if(Z(le,Uint8Array)&&(le=i.from(le)),!i.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(U,V),V+=le.length}return U},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<L;O+=2)_(this,O,O+1);return this},i.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<L;O+=4)_(this,O,O+3),_(this,O+1,O+2);return this},i.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<L;O+=8)_(this,O,O+7),_(this,O+1,O+6),_(this,O+2,O+5),_(this,O+3,O+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?C(this,0,L):b.apply(this,arguments)},i.prototype.equals=function(L){if(i.isBuffer(L))return this===L||i.compare(this,L)===0;throw new TypeError("Argument must be a Buffer")},i.prototype.inspect=function(){var O="",L=f.INSPECT_MAX_BYTES,O=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim();return this.length>L&&(O+=" ... "),"<Buffer "+O+">"},l&&(i.prototype[l]=i.prototype.inspect),i.prototype.compare=function(L,O,U,V,J){if(Z(L,Uint8Array)&&(L=i.from(L,L.offset,L.byteLength)),!i.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(U===void 0&&(U=L?L.length:0),V===void 0&&(V=0),J===void 0&&(J=this.length),(O=O===void 0?0:O)<0||U>L.length||V<0||J>this.length)throw new RangeError("out of range index");if(J<=V&&U<=O)return 0;if(J<=V)return-1;if(U<=O)return 1;if(this===L)return 0;for(var le=(J>>>=0)-(V>>>=0),ce=(U>>>=0)-(O>>>=0),ue=Math.min(le,ce),re=this.slice(V,J),de=L.slice(O,U),ve=0;ve<ue;++ve)if(re[ve]!==de[ve]){le=re[ve],ce=de[ve];break}return le<ce?-1:ce<le?1:0},i.prototype.includes=function(L,O,U){return this.indexOf(L,O,U)!==-1},i.prototype.indexOf=function(L,O,U){return x(this,L,O,U,!0)},i.prototype.lastIndexOf=function(L,O,U){return x(this,L,O,U,!1)},i.prototype.write=function(L,O,U,V){if(O===void 0)V="utf8",U=this.length,O=0;else if(U===void 0&&typeof O=="string")V=O,U=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(U)?(U>>>=0,V===void 0&&(V="utf8")):(V=U,U=void 0)}var J=this.length-O;if((U===void 0||J<U)&&(U=J),0<L.length&&(U<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");V=V||"utf8";for(var le,ce,ue,re=!1;;)switch(V){case"hex":var de=this,ve=L,ie=O,_e=U,Se=(ie=Number(ie)||0,de.length-ie);(!_e||Se<(_e=Number(_e)))&&(_e=Se),(Se=ve.length)/2<_e&&(_e=Se/2);for(var Te=0;Te<_e;++Te){var we=parseInt(ve.substr(2*Te,2),16);if(q(we))return Te;de[ie+Te]=we}return Te;case"utf8":case"utf-8":return Se=O,ue=U,X(W(L,(ce=this).length-Se),ce,Se,ue);case"ascii":return E(this,L,O,U);case"latin1":case"binary":return E(this,L,O,U);case"base64":return ce=this,ue=O,le=U,X(H(L),ce,ue,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,L,O,U);default:if(re)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),re=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function P(L,O,U){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(U<L+O)throw new RangeError("Trying to access beyond buffer length")}function N(L,O,U,V,J,le){if(!i.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(J<O||O<le)throw new RangeError('"value" argument is out of bounds');if(U+V>L.length)throw new RangeError("Index out of range")}function k(L,O,U,V){if(U+V>L.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function I(L,O,U,V,J){return O=+O,U>>>=0,J||k(L,0,U,4),n.write(L,O,U,V,23,4),U+4}function B(L,O,U,V,J){return O=+O,U>>>=0,J||k(L,0,U,8),n.write(L,O,U,V,52,8),U+8}i.prototype.slice=function(L,O){var U=this.length,U=((L=~~L)<0?(L+=U)<0&&(L=0):U<L&&(L=U),(O=O===void 0?U:~~O)<0?(O+=U)<0&&(O=0):U<O&&(O=U),O<L&&(O=L),this.subarray(L,O));return Object.setPrototypeOf(U,i.prototype),U},i.prototype.readUIntLE=function(L,O,U){L>>>=0,O>>>=0,U||P(L,O,this.length);for(var V=this[L],J=1,le=0;++le<O&&(J*=256);)V+=this[L+le]*J;return V},i.prototype.readUIntBE=function(L,O,U){L>>>=0,O>>>=0,U||P(L,O,this.length);for(var V=this[L+--O],J=1;0<O&&(J*=256);)V+=this[L+--O]*J;return V},i.prototype.readUInt8=function(L,O){return L>>>=0,O||P(L,1,this.length),this[L]},i.prototype.readUInt16LE=function(L,O){return L>>>=0,O||P(L,2,this.length),this[L]|this[L+1]<<8},i.prototype.readUInt16BE=function(L,O){return L>>>=0,O||P(L,2,this.length),this[L]<<8|this[L+1]},i.prototype.readUInt32LE=function(L,O){return L>>>=0,O||P(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},i.prototype.readUInt32BE=function(L,O){return L>>>=0,O||P(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},i.prototype.readIntLE=function(L,O,U){L>>>=0,O>>>=0,U||P(L,O,this.length);for(var V=this[L],J=1,le=0;++le<O&&(J*=256);)V+=this[L+le]*J;return(J*=128)<=V&&(V-=Math.pow(2,8*O)),V},i.prototype.readIntBE=function(L,O,U){L>>>=0,O>>>=0,U||P(L,O,this.length);for(var V=O,J=1,le=this[L+--V];0<V&&(J*=256);)le+=this[L+--V]*J;return(J*=128)<=le&&(le-=Math.pow(2,8*O)),le},i.prototype.readInt8=function(L,O){return L>>>=0,O||P(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},i.prototype.readInt16LE=function(L,O){return L>>>=0,O||P(L,2,this.length),O=this[L]|this[L+1]<<8,32768&O?4294901760|O:O},i.prototype.readInt16BE=function(L,O){return L>>>=0,O||P(L,2,this.length),O=this[L+1]|this[L]<<8,32768&O?4294901760|O:O},i.prototype.readInt32LE=function(L,O){return L>>>=0,O||P(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},i.prototype.readInt32BE=function(L,O){return L>>>=0,O||P(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},i.prototype.readFloatLE=function(L,O){return L>>>=0,O||P(L,4,this.length),n.read(this,L,!0,23,4)},i.prototype.readFloatBE=function(L,O){return L>>>=0,O||P(L,4,this.length),n.read(this,L,!1,23,4)},i.prototype.readDoubleLE=function(L,O){return L>>>=0,O||P(L,8,this.length),n.read(this,L,!0,52,8)},i.prototype.readDoubleBE=function(L,O){return L>>>=0,O||P(L,8,this.length),n.read(this,L,!1,52,8)},i.prototype.writeUIntLE=function(L,O,U,V){L=+L,O>>>=0,U>>>=0,V||N(this,L,O,U,Math.pow(2,8*U)-1,0);var J=1,le=0;for(this[O]=255&L;++le<U&&(J*=256);)this[O+le]=L/J&255;return O+U},i.prototype.writeUIntBE=function(L,O,U,V){L=+L,O>>>=0,U>>>=0,V||N(this,L,O,U,Math.pow(2,8*U)-1,0);var J=U-1,le=1;for(this[O+J]=255&L;0<=--J&&(le*=256);)this[O+J]=L/le&255;return O+U},i.prototype.writeUInt8=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,1,255,0),this[O]=255&L,O+1},i.prototype.writeUInt16LE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,2,65535,0),this[O]=255&L,this[O+1]=L>>>8,O+2},i.prototype.writeUInt16BE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,2,65535,0),this[O]=L>>>8,this[O+1]=255&L,O+2},i.prototype.writeUInt32LE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,4,4294967295,0),this[O+3]=L>>>24,this[O+2]=L>>>16,this[O+1]=L>>>8,this[O]=255&L,O+4},i.prototype.writeUInt32BE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,4,4294967295,0),this[O]=L>>>24,this[O+1]=L>>>16,this[O+2]=L>>>8,this[O+3]=255&L,O+4},i.prototype.writeIntLE=function(L,O,U,V){L=+L,O>>>=0,V||N(this,L,O,U,(V=Math.pow(2,8*U-1))-1,-V);var J=0,le=1,ce=0;for(this[O]=255&L;++J<U&&(le*=256);)L<0&&ce===0&&this[O+J-1]!==0&&(ce=1),this[O+J]=(L/le>>0)-ce&255;return O+U},i.prototype.writeIntBE=function(L,O,U,V){L=+L,O>>>=0,V||N(this,L,O,U,(V=Math.pow(2,8*U-1))-1,-V);var J=U-1,le=1,ce=0;for(this[O+J]=255&L;0<=--J&&(le*=256);)L<0&&ce===0&&this[O+J+1]!==0&&(ce=1),this[O+J]=(L/le>>0)-ce&255;return O+U},i.prototype.writeInt8=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,1,127,-128),this[O]=255&(L=L<0?255+L+1:L),O+1},i.prototype.writeInt16LE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,2,32767,-32768),this[O]=255&L,this[O+1]=L>>>8,O+2},i.prototype.writeInt16BE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,2,32767,-32768),this[O]=L>>>8,this[O+1]=255&L,O+2},i.prototype.writeInt32LE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,4,2147483647,-2147483648),this[O]=255&L,this[O+1]=L>>>8,this[O+2]=L>>>16,this[O+3]=L>>>24,O+4},i.prototype.writeInt32BE=function(L,O,U){return L=+L,O>>>=0,U||N(this,L,O,4,2147483647,-2147483648),this[O]=(L=L<0?4294967295+L+1:L)>>>24,this[O+1]=L>>>16,this[O+2]=L>>>8,this[O+3]=255&L,O+4},i.prototype.writeFloatLE=function(L,O,U){return I(this,L,O,!0,U)},i.prototype.writeFloatBE=function(L,O,U){return I(this,L,O,!1,U)},i.prototype.writeDoubleLE=function(L,O,U){return B(this,L,O,!0,U)},i.prototype.writeDoubleBE=function(L,O,U){return B(this,L,O,!1,U)},i.prototype.copy=function(L,O,U,V){if(!i.isBuffer(L))throw new TypeError("argument should be a Buffer");if(U=U||0,V||V===0||(V=this.length),O>=L.length&&(O=L.length),(V=0<V&&V<U?U:V)===U||L.length===0||this.length===0)return 0;if((O=O||0)<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length);var J=(V=L.length-O<V-U?L.length-O+U:V)-U;if(this===L&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,U,V);else if(this===L&&U<O&&O<V)for(var le=J-1;0<=le;--le)L[le+O]=this[le+U];else Uint8Array.prototype.set.call(L,this.subarray(U,V),O);return J},i.prototype.fill=function(L,O,U,V){if(typeof L=="string"){if(typeof O=="string"?(V=O,O=0,U=this.length):typeof U=="string"&&(V=U,U=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!i.isEncoding(V))throw new TypeError("Unknown encoding: "+V);var J;L.length===1&&(J=L.charCodeAt(0),(V==="utf8"&&J<128||V==="latin1")&&(L=J))}else typeof L=="number"?L&=255:typeof L=="boolean"&&(L=Number(L));if(O<0||this.length<O||this.length<U)throw new RangeError("Out of range index");var le;if(!(U<=O))if(O>>>=0,U=U===void 0?this.length:U>>>0,typeof(L=L||0)=="number")for(le=O;le<U;++le)this[le]=L;else{var ce=i.isBuffer(L)?L:i.from(L,V),ue=ce.length;if(ue===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(le=0;le<U-O;++le)this[le+O]=ce[le%ue]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function W(L,O){O=O||1/0;for(var U,V=L.length,J=null,le=[],ce=0;ce<V;++ce){if(55295<(U=L.charCodeAt(ce))&&U<57344){if(!J){if(56319<U){-1<(O-=3)&&le.push(239,191,189);continue}if(ce+1===V){-1<(O-=3)&&le.push(239,191,189);continue}J=U;continue}if(U<56320){-1<(O-=3)&&le.push(239,191,189),J=U;continue}U=65536+(J-55296<<10|U-56320)}else J&&-1<(O-=3)&&le.push(239,191,189);if(J=null,U<128){if(--O<0)break;le.push(U)}else if(U<2048){if((O-=2)<0)break;le.push(U>>6|192,63&U|128)}else if(U<65536){if((O-=3)<0)break;le.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;le.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return le}function H(L){return s.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(L))}function X(L,O,U,V){for(var J=0;J<V&&!(J+U>=O.length||J>=L.length);++J)O[J+U]=L[J];return J}function Z(L,O){return L instanceof O||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===O.name}function q(L){return L!=L}var ee=function(){for(var L="0123456789abcdef",O=new Array(256),U=0;U<16;++U)for(var V=16*U,J=0;J<16;++J)O[V+J]=L[U]+L[J];return O}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(e,d,f){d.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},{}],6:[function(e,d,f){var a=e("../internals/is-object");d.exports=function(s){if(a(s)||s===null)return s;throw TypeError("Can't set "+String(s)+" as a prototype")}},{"../internals/is-object":74}],7:[function(n,d,f){var a=n("../internals/well-known-symbol"),s=n("../internals/object-create"),n=n("../internals/object-define-property"),l=a("unscopables"),h=Array.prototype;h[l]==null&&n.f(h,l,{configurable:!0,value:s(null)}),d.exports=function(m){h[l][m]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(e,d,f){var a=e("../internals/string-multibyte").charAt;d.exports=function(s,n,l){return n+(l?a(s,n).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,d,f){d.exports=function(a,s,n){if(a instanceof s)return a;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},{}],10:[function(e,d,f){var a=e("../internals/is-object");d.exports=function(s){if(a(s))return s;throw TypeError(String(s)+" is not an object")}},{"../internals/is-object":74}],11:[function(e,d,f){d.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(k,d,f){function a(B){return m(B)&&i(I,o(B))}var s,n=k("../internals/array-buffer-native"),l=k("../internals/descriptors"),h=k("../internals/global"),m=k("../internals/is-object"),i=k("../internals/has"),o=k("../internals/classof"),c=k("../internals/create-non-enumerable-property"),u=k("../internals/redefine"),p=k("../internals/object-define-property").f,g=k("../internals/object-get-prototype-of"),v=k("../internals/object-set-prototype-of"),R=k("../internals/well-known-symbol"),k=k("../internals/uid"),b=h.Int8Array,_=b&&b.prototype,x=h.Uint8ClampedArray,x=x&&x.prototype,A=b&&g(b),E=_&&g(_),T=Object.prototype,C=T.isPrototypeOf,R=R("toStringTag"),P=k("TYPED_ARRAY_TAG"),N=n&&!!v&&o(h.opera)!=="Opera",k=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(s in I)h[s]||(N=!1);if((!N||typeof A!="function"||A===Function.prototype)&&(A=function(){throw TypeError("Incorrect invocation")},N))for(s in I)h[s]&&v(h[s],A);if((!N||!E||E===T)&&(E=A.prototype,N))for(s in I)h[s]&&v(h[s].prototype,E);if(N&&g(x)!==E&&v(x,E),l&&!i(E,R))for(s in k=!0,p(E,R,{get:function(){return m(this)?this[P]:void 0}}),I)h[s]&&c(h[s],P,s);d.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:k&&P,aTypedArray:function(B){if(a(B))return B;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(B){if(v){if(C.call(A,B))return B}else for(var Y in I)if(i(I,s)&&(Y=h[Y],Y&&(B===Y||C.call(Y,B))))return B;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(B,Y,W){if(l){if(W)for(var H in I)H=h[H],H&&i(H.prototype,B)&&delete H.prototype[B];E[B]&&!W||u(E,B,!W&&N&&_[B]||Y)}},exportTypedArrayStaticMethod:function(B,Y,W){var H,X;if(l){if(v){if(W)for(H in I)(X=h[H])&&i(X,B)&&delete X[B];if(A[B]&&!W)return;try{return u(A,B,!W&&N&&b[B]||Y)}catch{}}for(H in I)!(X=h[H])||X[B]&&!W||u(X,B,Y)}},isView:function(B){return B=o(B),B==="DataView"||i(I,B)},isTypedArray:a,TypedArray:A,TypedArrayPrototype:E}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(U,d,f){function a(ie){return[255&ie]}function s(ie){return[255&ie,ie>>8&255]}function n(ie){return[255&ie,ie>>8&255,ie>>16&255,ie>>24&255]}function l(ie){return ie[3]<<24|ie[2]<<16|ie[1]<<8|ie[0]}function h(ie){return le(ie,23,4)}function m(ie){return le(ie,52,8)}function i(ie,_e){k(ie[Z],_e,{get:function(){return Y(this)[_e]}})}function o(Ie,_e,De,Te){if(De=T(De),Ie=Y(Ie),De+_e>Ie.byteLength)throw J(q);var we=Y(Ie.buffer).bytes,De=De+Ie.byteOffset,Ie=we.slice(De,De+_e);return Te?Ie:Ie.reverse()}function c(ie,_e,Se,Te,we,De){if(Se=T(Se),ie=Y(ie),Se+_e>ie.byteLength)throw J(q);for(var Ie=Y(ie.buffer).bytes,We=Se+ie.byteOffset,$=Te(+we),se=0;se<_e;se++)Ie[We+se]=$[De?se:_e-se-1]}var u=U("../internals/global"),p=U("../internals/descriptors"),g=U("../internals/array-buffer-native"),v=U("../internals/create-non-enumerable-property"),b=U("../internals/redefine-all"),_=U("../internals/fails"),x=U("../internals/an-instance"),A=U("../internals/to-integer"),E=U("../internals/to-length"),T=U("../internals/to-index"),C=U("../internals/ieee754"),R=U("../internals/object-get-prototype-of"),P=U("../internals/object-set-prototype-of"),N=U("../internals/object-get-own-property-names").f,k=U("../internals/object-define-property").f,I=U("../internals/array-fill"),B=U("../internals/set-to-string-tag"),U=U("../internals/internal-state"),Y=U.get,W=U.set,H="ArrayBuffer",X="DataView",Z="prototype",q="Wrong index",ee=u[H],L=ee,O=u[X],U=O&&O[Z],V=Object.prototype,J=u.RangeError,le=C.pack,ce=C.unpack;if(g){if(!_(function(){ee(1)})||!_(function(){new ee(-1)})||_(function(){return new ee,new ee(1.5),new ee(NaN),ee.name!=H})){for(var ue,u=(L=function(Se){return x(this,L),new ee(T(Se))})[Z]=ee[Z],re=N(ee),de=0;re.length>de;)(ue=re[de++])in L||v(L,ue,ee[ue]);u.constructor=L}P&&R(U)!==V&&P(U,V);var C=new O(new L(2)),ve=U.setInt8;C.setInt8(0,2147483648),C.setInt8(1,2147483649),!C.getInt8(0)&&C.getInt8(1)||b(U,{setInt8:function(_e,Se){ve.call(this,_e,Se<<24>>24)},setUint8:function(_e,Se){ve.call(this,_e,Se<<24>>24)}},{unsafe:!0})}else L=function(ie){x(this,L,H),ie=T(ie),W(this,{bytes:I.call(new Array(ie),0),byteLength:ie}),p||(this.byteLength=ie)},O=function(ie,we,Se){x(this,O,X),x(ie,L,X);var Te=Y(ie).byteLength,we=A(we);if(we<0||Te<we)throw J("Wrong offset");if(Te<we+(Se=Se===void 0?Te-we:E(Se)))throw J("Wrong length");W(this,{buffer:ie,byteLength:Se,byteOffset:we}),p||(this.buffer=ie,this.byteLength=Se,this.byteOffset=we)},p&&(i(L,"byteLength"),i(O,"buffer"),i(O,"byteLength"),i(O,"byteOffset")),b(O[Z],{getInt8:function(ie){return o(this,1,ie)[0]<<24>>24},getUint8:function(ie){return o(this,1,ie)[0]},getInt16:function(ie){return ie=o(this,2,ie,1<arguments.length?arguments[1]:void 0),(ie[1]<<8|ie[0])<<16>>16},getUint16:function(ie){return ie=o(this,2,ie,1<arguments.length?arguments[1]:void 0),ie[1]<<8|ie[0]},getInt32:function(ie){return l(o(this,4,ie,1<arguments.length?arguments[1]:void 0))},getUint32:function(ie){return l(o(this,4,ie,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ie){return ce(o(this,4,ie,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ie){return ce(o(this,8,ie,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ie,_e){c(this,1,ie,a,_e)},setUint8:function(ie,_e){c(this,1,ie,a,_e)},setInt16:function(ie,_e){c(this,2,ie,s,_e,2<arguments.length?arguments[2]:void 0)},setUint16:function(ie,_e){c(this,2,ie,s,_e,2<arguments.length?arguments[2]:void 0)},setInt32:function(ie,_e){c(this,4,ie,n,_e,2<arguments.length?arguments[2]:void 0)},setUint32:function(ie,_e){c(this,4,ie,n,_e,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ie,_e){c(this,4,ie,h,_e,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ie,_e){c(this,8,ie,m,_e,2<arguments.length?arguments[2]:void 0)}});B(L,H),B(O,X),d.exports={ArrayBuffer:L,DataView:O}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(e,d,f){var a=e("../internals/to-object"),s=e("../internals/to-absolute-index"),n=e("../internals/to-length"),l=Math.min;d.exports=[].copyWithin||function(p,m){var i=a(this),o=n(i.length),c=s(p,o),u=s(m,o),p=2<arguments.length?arguments[2]:void 0,g=l((p===void 0?o:s(p,o))-u,o-c),v=1;for(u<c&&c<u+g&&(v=-1,u+=g-1,c+=g-1);0<g--;)u in i?i[c]=i[u]:delete i[c],c+=v,u+=v;return i}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(e,d,f){var a=e("../internals/to-object"),s=e("../internals/to-absolute-index"),n=e("../internals/to-length");d.exports=function(l){for(var h=a(this),m=n(h.length),o=arguments.length,i=s(1<o?arguments[1]:void 0,m),o=2<o?arguments[2]:void 0,c=o===void 0?m:s(o,m);i<c;)h[i++]=l;return h}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(n,d,f){var a=n("../internals/array-iteration").forEach,s=n("../internals/array-method-is-strict"),n=n("../internals/array-method-uses-to-length"),s=s("forEach"),n=n("forEach");d.exports=s&&n?[].forEach:function(l){return a(this,l,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,d,f){var a=e("../internals/function-bind-context"),s=e("../internals/to-object"),n=e("../internals/call-with-safe-iteration-closing"),l=e("../internals/is-array-iterator-method"),h=e("../internals/to-length"),m=e("../internals/create-property"),i=e("../internals/get-iterator-method");d.exports=function(x){var c,u,p,g,v,b,_=s(x),x=typeof this=="function"?this:Array,A=arguments.length,E=1<A?arguments[1]:void 0,T=E!==void 0,C=i(_),R=0;if(T&&(E=a(E,2<A?arguments[2]:void 0,2)),C==null||x==Array&&l(C))for(u=new x(c=h(_.length));R<c;R++)b=T?E(_[R],R):_[R],m(u,R,b);else for(v=(g=C.call(_)).next,u=new x;!(p=v.call(g)).done;R++)b=T?n(g,E,[p.value,R],!0):p.value,m(u,R,b);return u.length=R,u}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(e,d,f){function a(h){return function(m,i,o){var c,u=s(m),p=n(u.length),g=l(o,p);if(h&&i!=i){for(;g<p;)if((c=u[g++])!=c)return!0}else for(;g<p;g++)if((h||g in u)&&u[g]===i)return h||g||0;return!h&&-1}}var s=e("../internals/to-indexed-object"),n=e("../internals/to-length"),l=e("../internals/to-absolute-index");d.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(e,d,f){function a(o){var c=o==1,u=o==2,p=o==3,g=o==4,v=o==6,b=o==5||v;return function(_,x,A,E){for(var T,C,R=l(_),P=n(R),N=s(x,A,3),k=h(P.length),I=0,x=E||m,B=c?x(_,k):u?x(_,0):void 0;I<k;I++)if((b||I in P)&&(C=N(T=P[I],I,R),o)){if(c)B[I]=C;else if(C)switch(o){case 3:return!0;case 5:return T;case 6:return I;case 2:i.call(B,T)}else if(g)return!1}return v?-1:p||g?g:B}}var s=e("../internals/function-bind-context"),n=e("../internals/indexed-object"),l=e("../internals/to-object"),h=e("../internals/to-length"),m=e("../internals/array-species-create"),i=[].push;d.exports={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(o,d,f){var a=o("../internals/to-indexed-object"),s=o("../internals/to-integer"),n=o("../internals/to-length"),i=o("../internals/array-method-is-strict"),o=o("../internals/array-method-uses-to-length"),l=Math.min,h=[].lastIndexOf,m=!!h&&1/[1].lastIndexOf(1,-0)<0,i=i("lastIndexOf"),o=o("indexOf",{ACCESSORS:!0,1:0});d.exports=m||!i||!o?function(c){if(m)return h.apply(this,arguments)||0;var u=a(this),p=n(u.length),g=p-1;for((g=1<arguments.length?l(g,s(arguments[1])):g)<0&&(g=p+g);0<=g;g--)if(g in u&&u[g]===c)return g||0;return-1}:h},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(e,d,f){var a=e("../internals/fails"),s=e("../internals/well-known-symbol"),n=e("../internals/engine-v8-version"),l=s("species");d.exports=function(h){return 51<=n||!a(function(){var m=[];return(m.constructor={})[l]=function(){return{foo:1}},m[h](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(e,d,f){var a=e("../internals/fails");d.exports=function(s,n){var l=[][s];return!!l&&a(function(){l.call(null,n||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(e,d,f){function a(i){throw i}var s=e("../internals/descriptors"),n=e("../internals/fails"),l=e("../internals/has"),h=Object.defineProperty,m={};d.exports=function(i,o){var c,u,p,g;return l(m,i)?m[i]:(c=[][i],u=!!l(o=o||{},"ACCESSORS")&&o.ACCESSORS,p=l(o,0)?o[0]:a,g=l(o,1)?o[1]:void 0,m[i]=!!c&&!n(function(){if(u&&!s)return!0;var v={length:-1};u?h(v,1,{enumerable:!0,get:a}):v[1]=1,c.call(v,p,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(e,d,f){function a(m){return function(i,o,c,u){s(o);var p=n(i),g=l(p),v=h(p.length),b=m?v-1:0,_=m?-1:1;if(c<2)for(;;){if(b in g){u=g[b],b+=_;break}if(b+=_,m?b<0:v<=b)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=b:b<v;b+=_)b in g&&(u=o(u,g[b],b,p));return u}}var s=e("../internals/a-function"),n=e("../internals/to-object"),l=e("../internals/indexed-object"),h=e("../internals/to-length");d.exports={left:a(!1),right:a(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(e,d,f){var a=e("../internals/is-object"),s=e("../internals/is-array"),n=e("../internals/well-known-symbol")("species");d.exports=function(l,h){var m;return new((m=s(l)&&(typeof(m=l.constructor)=="function"&&(m===Array||s(m.prototype))||a(m)&&(m=m[n])===null)?void 0:m)===void 0?Array:m)(h===0?0:h)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(e,d,f){var a=e("../internals/an-object");d.exports=function(s,n,l,h){try{return h?n(a(l)[0],l[1]):n(l)}catch(m){throw h=s.return,h!==void 0&&a(h.call(s)),m}}},{"../internals/an-object":10}],27:[function(e,d,f){var a=e("../internals/well-known-symbol")("iterator"),s=!1;try{var n=0,l={next:function(){return{done:!!n++}},return:function(){s=!0}};l[a]=function(){return this},Array.from(l,function(){throw 2})}catch{}d.exports=function(h,m){if(!m&&!s)return!1;var i=!1;try{var o={};o[a]=function(){return{next:function(){return{done:i=!0}}}},h(o)}catch{}return i}},{"../internals/well-known-symbol":146}],28:[function(e,d,f){var a={}.toString;d.exports=function(s){return a.call(s).slice(8,-1)}},{}],29:[function(e,d,f){var a=e("../internals/to-string-tag-support"),s=e("../internals/classof-raw"),n=e("../internals/well-known-symbol")("toStringTag"),l=s(function(){return arguments}())=="Arguments";d.exports=a?s:function(h){var m;return h===void 0?"Undefined":h===null?"Null":typeof(m=function(i,o){try{return i[o]}catch{}}(h=Object(h),n))=="string"?m:l?s(h):(m=s(h))=="Object"&&typeof h.callee=="function"?"Arguments":m}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(p,d,f){var a=p("../internals/object-define-property").f,s=p("../internals/object-create"),n=p("../internals/redefine-all"),l=p("../internals/function-bind-context"),h=p("../internals/an-instance"),m=p("../internals/iterate"),i=p("../internals/define-iterator"),o=p("../internals/set-species"),c=p("../internals/descriptors"),u=p("../internals/internal-metadata").fastKey,p=p("../internals/internal-state"),g=p.set,v=p.getterFor;d.exports={getConstructor:function(b,_,x,A){function E(P,N,k){var I,B=R(P),Y=T(P,N);return Y?Y.value=k:(B.last=Y={index:I=u(N,!0),key:N,value:k,previous:N=B.last,next:void 0,removed:!1},B.first||(B.first=Y),N&&(N.next=Y),c?B.size++:P.size++,I!=="F"&&(B.index[I]=Y)),P}function T(I,N){var k,I=R(I),B=u(N);if(B!=="F")return I.index[B];for(k=I.first;k;k=k.next)if(k.key==N)return k}var C=b(function(P,N){h(P,C,_),g(P,{type:_,index:s(null),first:void 0,last:void 0,size:0}),c||(P.size=0),N!=null&&m(N,P[A],P,x)}),R=v(_);return n(C.prototype,{clear:function(){for(var P=R(this),N=P.index,k=P.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=void 0),delete N[k.index],k=k.next;P.first=P.last=void 0,c?P.size=0:this.size=0},delete:function(B){var N,k,I=R(this),B=T(this,B);return B&&(N=B.next,k=B.previous,delete I.index[B.index],B.removed=!0,k&&(k.next=N),N&&(N.previous=k),I.first==B&&(I.first=N),I.last==B&&(I.last=k),c?I.size--:this.size--),!!B},forEach:function(P){for(var N,k=R(this),I=l(P,1<arguments.length?arguments[1]:void 0,3);N=N?N.next:k.first;)for(I(N.value,N.key,this);N&&N.removed;)N=N.previous},has:function(P){return!!T(this,P)}}),n(C.prototype,x?{get:function(P){return P=T(this,P),P&&P.value},set:function(P,N){return E(this,P===0?0:P,N)}}:{add:function(P){return E(this,P=P===0?0:P,P)}}),c&&a(C.prototype,"size",{get:function(){return R(this).size}}),C},setStrong:function(b,_,x){var A=_+" Iterator",E=v(_),T=v(A);i(b,_,function(C,R){g(this,{type:A,target:C,state:E(C),kind:R,last:void 0})},function(){for(var C=T(this),R=C.kind,P=C.last;P&&P.removed;)P=P.previous;return C.target&&(C.last=P=P?P.next:C.state.first)?R=="keys"?{value:P.key,done:!1}:R=="values"?{value:P.value,done:!1}:{value:[P.key,P.value],done:!1}:{value:C.target=void 0,done:!0}},x?"entries":"values",!x,!0),o(_)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(g,d,f){function a(E){return E.frozen||(E.frozen=new s)}function s(){this.entries=[]}function n(E,T){return _(E.entries,function(C){return C[0]===T})}var l=g("../internals/redefine-all"),h=g("../internals/internal-metadata").getWeakData,m=g("../internals/an-object"),i=g("../internals/is-object"),o=g("../internals/an-instance"),c=g("../internals/iterate"),u=g("../internals/array-iteration"),p=g("../internals/has"),g=g("../internals/internal-state"),v=g.set,b=g.getterFor,_=u.find,x=u.findIndex,A=0;s.prototype={get:function(E){if(E=n(this,E),E)return E[1]},has:function(E){return!!n(this,E)},set:function(E,T){var C=n(this,E);C?C[1]=T:this.entries.push([E,T])},delete:function(E){var T=x(this.entries,function(C){return C[0]===E});return~T&&this.entries.splice(T,1),!!~T}},d.exports={getConstructor:function(E,T,C,R){function P(I,B,Y){var W=k(I),H=h(m(B),!0);return H===!0?a(W).set(B,Y):H[W.id]=Y,I}var N=E(function(I,B){o(I,N,T),v(I,{type:T,id:A++,frozen:void 0}),B!=null&&c(B,I[R],I,C)}),k=b(T);return l(N.prototype,{delete:function(I){var B,Y=k(this);return!!i(I)&&((B=h(I))===!0?a(Y).delete(I):B&&p(B,Y.id)&&delete B[Y.id])},has:function(I){var B,Y=k(this);return!!i(I)&&((B=h(I))===!0?a(Y).has(I):B&&p(B,Y.id))}}),l(N.prototype,C?{get:function(I){var B,Y=k(this);if(i(I))return(B=h(I))===!0?a(Y).get(I):B?B[Y.id]:void 0},set:function(I,B){return P(this,I,B)}}:{add:function(I){return P(this,I,!0)}}),N}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/global"),n=e("../internals/is-forced"),l=e("../internals/redefine"),h=e("../internals/internal-metadata"),m=e("../internals/iterate"),i=e("../internals/an-instance"),o=e("../internals/is-object"),c=e("../internals/fails"),u=e("../internals/check-correctness-of-iteration"),p=e("../internals/set-to-string-tag"),g=e("../internals/inherit-if-required");d.exports=function(v,b,_){function x(H){var X=B[H];l(B,H,H=="add"?function(Z){return X.call(this,Z===0?0:Z),this}:H=="delete"?function(Z){return!(N&&!o(Z))&&X.call(this,Z===0?0:Z)}:H=="get"?function(Z){return N&&!o(Z)?void 0:X.call(this,Z===0?0:Z)}:H=="has"?function(Z){return!(N&&!o(Z))&&X.call(this,Z===0?0:Z)}:function(Z,q){return X.call(this,Z===0?0:Z,q),this})}var A,E,T,C,R,P=v.indexOf("Map")!==-1,N=v.indexOf("Weak")!==-1,k=P?"set":"add",I=s[v],B=I&&I.prototype,Y=I,W={};return n(v,typeof I!="function"||!(N||B.forEach&&!c(function(){new I().entries().next()})))?(Y=_.getConstructor(b,v,P,k),h.REQUIRED=!0):n(v,!0)&&(E=(A=new Y)[k](N?{}:-0,1)!=A,T=c(function(){A.has(1)}),C=u(function(H){new I(H)}),R=!N&&c(function(){for(var H=new I,X=5;X--;)H[k](X,X);return!H.has(-0)}),C||(((Y=b(function(H,X){return i(H,Y,v),H=g(new I,H,Y),X!=null&&m(X,H[k],H,P),H})).prototype=B).constructor=Y),(T||R)&&(x("delete"),x("has"),P&&x("get")),(R||E)&&x(k),N&&B.clear&&delete B.clear),W[v]=Y,a({global:!0,forced:Y!=I},W),p(Y,v),N||_.setStrong(Y,v,P),Y}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(e,d,f){var a=e("../internals/has"),s=e("../internals/own-keys"),n=e("../internals/object-get-own-property-descriptor"),l=e("../internals/object-define-property");d.exports=function(h,m){for(var i=s(m),o=l.f,c=n.f,u=0;u<i.length;u++){var p=i[u];a(h,p)||o(h,p,c(m,p))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(e,d,f){var a=e("../internals/well-known-symbol")("match");d.exports=function(s){var n=/./;try{"/./"[s](n)}catch{try{return n[a]=!1,"/./"[s](n)}catch{}}return!1}},{"../internals/well-known-symbol":146}],35:[function(e,d,f){e=e("../internals/fails"),d.exports=!e(function(){function a(){}return a.prototype.constructor=null,Object.getPrototypeOf(new a)!==a.prototype})},{"../internals/fails":51}],36:[function(e,d,f){var a=e("../internals/require-object-coercible"),s=/"/g;d.exports=function(i,l,h,m){var i=String(a(i)),o="<"+l;return h!==""&&(o+=" "+h+'="'+String(m).replace(s,"&quot;")+'"'),o+">"+i+"</"+l+">"}},{"../internals/require-object-coercible":113}],37:[function(e,d,f){function a(){return this}var s=e("../internals/iterators-core").IteratorPrototype,n=e("../internals/object-create"),l=e("../internals/create-property-descriptor"),h=e("../internals/set-to-string-tag"),m=e("../internals/iterators");d.exports=function(i,o,c){return o+=" Iterator",i.prototype=n(s,{next:l(1,c)}),h(i,o,!1,!0),m[o]=a,i}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/object-define-property"),n=e("../internals/create-property-descriptor");d.exports=a?function(l,h,m){return s.f(l,h,n(1,m))}:function(l,h,m){return l[h]=m,l}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(e,d,f){d.exports=function(a,s){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:s}}},{}],40:[function(e,d,f){var a=e("../internals/to-primitive"),s=e("../internals/object-define-property"),n=e("../internals/create-property-descriptor");d.exports=function(l,h,m){h=a(h),h in l?s.f(l,h,n(0,m)):l[h]=m}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(g,d,f){function a(){return this}var s=g("../internals/export"),n=g("../internals/create-iterator-constructor"),l=g("../internals/object-get-prototype-of"),h=g("../internals/object-set-prototype-of"),m=g("../internals/set-to-string-tag"),i=g("../internals/create-non-enumerable-property"),o=g("../internals/redefine"),c=g("../internals/well-known-symbol"),u=g("../internals/is-pure"),p=g("../internals/iterators"),g=g("../internals/iterators-core"),v=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,_=c("iterator"),x="values",A="entries";d.exports=function(E,T,C,W,P,N,k){n(C,T,W);function I(L){if(L===P&&q)return q;if(!b&&L in X)return X[L];switch(L){case"keys":case x:case A:return function(){return new C(this,L)}}return function(){return new C(this)}}var B,Y,W=T+" Iterator",H=!1,X=E.prototype,Z=X[_]||X["@@iterator"]||P&&X[P],q=!b&&Z||I(P),ee=T=="Array"&&X.entries||Z;if(ee&&(ee=l(ee.call(new E)),v!==Object.prototype&&ee.next&&(u||l(ee)===v||(h?h(ee,v):typeof ee[_]!="function"&&i(ee,_,a)),m(ee,W,!0,!0),u&&(p[W]=a))),P==x&&Z&&Z.name!==x&&(H=!0,q=function(){return Z.call(this)}),u&&!k||X[_]===q||i(X,_,q),p[T]=q,P)if(B={values:I(x),keys:N?q:I("keys"),entries:I(A)},k)for(Y in B)!b&&!H&&Y in X||o(X,Y,B[Y]);else s({target:T,proto:!0,forced:b||H},B);return B}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(e,d,f){var a=e("../internals/path"),s=e("../internals/has"),n=e("../internals/well-known-symbol-wrapped"),l=e("../internals/object-define-property").f;d.exports=function(h){var m=a.Symbol||(a.Symbol={});s(m,h)||l(m,h,{value:n.f(h)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(e,d,f){e=e("../internals/fails"),d.exports=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(s,d,f){var a=s("../internals/global"),s=s("../internals/is-object"),n=a.document,l=s(n)&&s(n.createElement);d.exports=function(h){return l?n.createElement(h):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(e,d,f){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(e,d,f){e=e("../internals/engine-user-agent"),d.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e)},{"../internals/engine-user-agent":47}],47:[function(e,d,f){e=e("../internals/get-built-in"),d.exports=e("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(n,d,f){var a,s,l=n("../internals/global"),n=n("../internals/engine-user-agent"),l=l.process,l=l&&l.versions,l=l&&l.v8;l?s=(a=l.split("."))[0]+a[1]:n&&(!(a=n.match(/Edge\/(\d+)/))||74<=a[1])&&(a=n.match(/Chrome\/(\d+)/))&&(s=a[1]),d.exports=s&&+s},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(e,d,f){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(e,d,f){var a=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,n=e("../internals/create-non-enumerable-property"),l=e("../internals/redefine"),h=e("../internals/set-global"),m=e("../internals/copy-constructor-properties"),i=e("../internals/is-forced");d.exports=function(o,c){var u,p,g,v=o.target,b=o.global,_=o.stat,x=b?a:_?a[v]||h(v,{}):(a[v]||{}).prototype;if(x)for(u in c){if(p=c[u],g=o.noTargetGet?(g=s(x,u))&&g.value:x[u],!i(b?u:v+(_?".":"#")+u,o.forced)&&g!==void 0){if(typeof p==typeof g)continue;m(p,g)}(o.sham||g&&g.sham)&&n(p,"sham",!0),l(x,u,p,o)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(e,d,f){d.exports=function(a){try{return!!a()}catch{return!0}}},{}],52:[function(c,d,f){c("../modules/es.regexp.exec");var a=c("../internals/redefine"),s=c("../internals/fails"),n=c("../internals/well-known-symbol"),l=c("../internals/regexp-exec"),h=c("../internals/create-non-enumerable-property"),m=n("species"),i=!s(function(){var g=/./;return g.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(g,"$<a>")!=="7"}),o="a".replace(/./,"$0")==="$0",c=n("replace"),u=!!/./[c]&&/./[c]("a","$0")==="",p=!s(function(){var v=/(?:)/,g=v.exec,v=(v.exec=function(){return g.apply(this,arguments)},"ab".split(v));return v.length!==2||v[0]!=="a"||v[1]!=="b"});d.exports=function(g,v,b,_){var x,A,E=n(g),T=!s(function(){var R={};return R[E]=function(){return 7},""[g](R)!=7}),C=T&&!s(function(){var R=!1,P=/a/;return g==="split"&&((P={constructor:{}}).constructor[m]=function(){return P},P.flags="",P[E]=/./[E]),P.exec=function(){return R=!0,null},P[E](""),!R});T&&C&&(g!=="replace"||i&&o&&!u)&&(g!=="split"||p)||(x=/./[E],b=(C=b(E,""[g],function(R,P,N,k,I){return P.exec===l?T&&!I?{done:!0,value:x.call(P,N,k)}:{done:!0,value:R.call(N,P,k)}:{done:!1}},{REPLACE_KEEPS_$0:o,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:u}))[0],A=C[1],a(String.prototype,g,b),a(RegExp.prototype,E,v==2?function(R,P){return A.call(R,this,P)}:function(R){return A.call(R,this)})),_&&h(RegExp.prototype[E],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(e,d,f){e=e("../internals/fails"),d.exports=!e(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(e,d,f){var a=e("../internals/a-function");d.exports=function(s,n,l){if(a(s),n===void 0)return s;switch(l){case 0:return function(){return s.call(n)};case 1:return function(h){return s.call(n,h)};case 2:return function(h,m){return s.call(n,h,m)};case 3:return function(h,m,i){return s.call(n,h,m,i)}}return function(){return s.apply(n,arguments)}}},{"../internals/a-function":5}],55:[function(e,d,f){var a=e("../internals/a-function"),s=e("../internals/is-object"),n=[].slice,l={};d.exports=Function.bind||function(h){var m=a(this),i=n.call(arguments,1),o=function(){var c=i.concat(n.call(arguments));if(this instanceof o){var u=m,p=c.length,g=c;if(!(p in l)){for(var v=[],b=0;b<p;b++)v[b]="a["+b+"]";l[p]=Function("C,a","return new C("+v.join(",")+")")}return l[p](u,g)}return m.apply(h,c)};return s(m.prototype)&&(o.prototype=m.prototype),o}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,d,f){function a(l){return typeof l=="function"?l:void 0}var s=e("../internals/path"),n=e("../internals/global");d.exports=function(l,h){return arguments.length<2?a(s[l])||a(n[l]):s[l]&&s[l][h]||n[l]&&n[l][h]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,d,f){var a=e("../internals/classof"),s=e("../internals/iterators"),n=e("../internals/well-known-symbol")("iterator");d.exports=function(l){if(l!=null)return l[n]||l["@@iterator"]||s[a(l)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(e,d,f){var a=e("../internals/an-object"),s=e("../internals/get-iterator-method");d.exports=function(n){var l=s(n);if(typeof l!="function")throw TypeError(String(n)+" is not iterable");return a(l.call(n))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,d,f){(function(a){function s(n){return n&&n.Math==Math&&n}d.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof a=="object"&&a)||Function("return this")()}).call(this,typeof Os<"u"?Os:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(e,d,f){var a={}.hasOwnProperty;d.exports=function(s,n){return a.call(s,n)}},{}],61:[function(e,d,f){d.exports={}},{}],62:[function(e,d,f){var a=e("../internals/global");d.exports=function(s,n){var l=a.console;l&&l.error&&(arguments.length===1?l.error(s):l.error(s,n))}},{"../internals/global":59}],63:[function(e,d,f){e=e("../internals/get-built-in"),d.exports=e("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/fails"),n=e("../internals/document-create-element");d.exports=!a&&!s(function(){return Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(e,d,f){var a=Math.abs,s=Math.pow,n=Math.floor,l=Math.log,h=Math.LN2;d.exports={pack:function(m,i,b){var c,u,p,g=new Array(b),v=8*b-i-1,b=(1<<v)-1,_=b>>1,x=i===23?s(2,-24)-s(2,-77):0,A=m<0||m===0&&1/m<0?1:0,E=0;for((m=a(m))!=m||m===1/0?(u=m!=m?1:0,c=b):(c=n(l(m)/h),m*(p=s(2,-c))<1&&(c--,p*=2),2<=(m+=1<=c+_?x/p:x*s(2,1-_))*p&&(c++,p/=2),b<=c+_?(u=0,c=b):1<=c+_?(u=(m*p-1)*s(2,i),c+=_):(u=m*s(2,_-1)*s(2,i),c=0));8<=i;g[E++]=255&u,u/=256,i-=8);for(c=c<<i|u,v+=i;0<v;g[E++]=255&c,c/=256,v-=8);return g[--E]|=128*A,g},unpack:function(m,i){var o,c=m.length,b=8*c-i-1,u=(1<<b)-1,p=u>>1,g=b-7,v=c-1,b=m[v--],_=127&b;for(b>>=7;0<g;_=256*_+m[v],v--,g-=8);for(o=_&(1<<-g)-1,_>>=-g,g+=i;0<g;o=256*o+m[v],v--,g-=8);if(_===0)_=1-p;else{if(_===u)return o?NaN:b?-1/0:1/0;o+=s(2,i),_-=p}return(b?-1:1)*o*s(2,_-i)}}},{}],66:[function(e,d,f){var a=e("../internals/fails"),s=e("../internals/classof-raw"),n="".split;d.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return s(l)=="String"?n.call(l,""):Object(l)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(e,d,f){var a=e("../internals/is-object"),s=e("../internals/object-set-prototype-of");d.exports=function(n,l,h){return s&&typeof(l=l.constructor)=="function"&&l!==h&&a(l=l.prototype)&&l!==h.prototype&&s(n,l),n}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(a,d,f){var a=a("../internals/shared-store"),s=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(n){return s.call(n)}),d.exports=a.inspectSource},{"../internals/shared-store":119}],69:[function(e,d,f){function a(g){h(g,o,{value:{objectID:"O"+ ++c,weakData:{}}})}var s=e("../internals/hidden-keys"),n=e("../internals/is-object"),l=e("../internals/has"),h=e("../internals/object-define-property").f,m=e("../internals/uid"),i=e("../internals/freezing"),o=m("meta"),c=0,u=Object.isExtensible||function(){return!0},p=d.exports={REQUIRED:!1,fastKey:function(g,v){if(!n(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!l(g,o)){if(!u(g))return"F";if(!v)return"E";a(g)}return g[o].objectID},getWeakData:function(g,v){if(!l(g,o)){if(!u(g))return!0;if(!v)return!1;a(g)}return g[o].weakData},onFreeze:function(g){return i&&p.REQUIRED&&u(g)&&!l(g,o)&&a(g),g}};s[o]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(b,d,f){var a,s,n,l,h,m,i,o,c=b("../internals/native-weak-map"),_=b("../internals/global"),u=b("../internals/is-object"),p=b("../internals/create-non-enumerable-property"),g=b("../internals/has"),v=b("../internals/shared-key"),b=b("../internals/hidden-keys"),_=_.WeakMap;i=c?(a=new _,s=a.get,n=a.has,l=a.set,h=function(x,A){return l.call(a,x,A),A},m=function(x){return s.call(a,x)||{}},function(x){return n.call(a,x)}):(b[o=v("state")]=!0,h=function(x,A){return p(x,o,A),A},m=function(x){return g(x,o)?x[o]:{}},function(x){return g(x,o)}),d.exports={set:h,get:m,has:i,enforce:function(x){return i(x)?m(x):h(x,{})},getterFor:function(x){return function(A){if(u(A)&&(A=m(A)).type===x)return A;throw TypeError("Incompatible receiver, "+x+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,d,f){var a=e("../internals/well-known-symbol"),s=e("../internals/iterators"),n=a("iterator"),l=Array.prototype;d.exports=function(h){return h!==void 0&&(s.Array===h||l[n]===h)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(e,d,f){var a=e("../internals/classof-raw");d.exports=Array.isArray||function(s){return a(s)=="Array"}},{"../internals/classof-raw":28}],73:[function(e,d,f){function a(o,c){return(o=h[l(o)])==i||o!=m&&(typeof c=="function"?s(c):!!c)}var s=e("../internals/fails"),n=/#|\.prototype\./,l=a.normalize=function(o){return String(o).replace(n,".").toLowerCase()},h=a.data={},m=a.NATIVE="N",i=a.POLYFILL="P";d.exports=a},{"../internals/fails":51}],74:[function(e,d,f){d.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},{}],75:[function(e,d,f){d.exports=!1},{}],76:[function(e,d,f){var a=e("../internals/is-object"),s=e("../internals/classof-raw"),n=e("../internals/well-known-symbol")("match");d.exports=function(l){var h;return a(l)&&((h=l[n])!==void 0?!!h:s(l)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(e,d,f){function a(o,c){this.stopped=o,this.result=c}var s=e("../internals/an-object"),n=e("../internals/is-array-iterator-method"),l=e("../internals/to-length"),h=e("../internals/function-bind-context"),m=e("../internals/get-iterator-method"),i=e("../internals/call-with-safe-iteration-closing");(d.exports=function(o,c,u,p,g){var v,b,_,x,A,E,T=h(c,u,p?2:1);if(g)v=o;else{if(typeof(c=m(o))!="function")throw TypeError("Target is not iterable");if(n(c)){for(b=0,_=l(o.length);b<_;b++)if((x=p?T(s(E=o[b])[0],E[1]):T(o[b]))&&x instanceof a)return x;return new a(!1)}v=c.call(o)}for(A=v.next;!(E=A.call(v)).done;)if(typeof(x=i(v,T,E.value,p))=="object"&&x&&x instanceof a)return x;return new a(!1)}).stop=function(o){return new a(!0,o)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(m,d,f){var a,s,n=m("../internals/object-get-prototype-of"),l=m("../internals/create-non-enumerable-property"),h=m("../internals/has"),i=m("../internals/well-known-symbol"),m=m("../internals/is-pure"),i=i("iterator"),o=!1;[].keys&&("next"in(s=[].keys())?(n=n(n(s)))!==Object.prototype&&(a=n):o=!0),a==null&&(a={}),m||h(a,i)||l(a,i,function(){return this}),d.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:o}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(e,d,f){d.exports={}},{}],80:[function(e,d,f){d.exports=Math.sign||function(a){return(a=+a)==0||a!=a?a:a<0?-1:1}},{}],81:[function(p,d,f){var a,s,n,l,h,m,i,o,c=p("../internals/global"),A=p("../internals/object-get-own-property-descriptor").f,x=p("../internals/classof-raw"),u=p("../internals/task").set,p=p("../internals/engine-is-ios"),g=c.MutationObserver||c.WebKitMutationObserver,v=c.process,b=c.Promise,_=x(v)=="process",x=A(c,"queueMicrotask"),A=x&&x.value;A||(a=function(){var E,T;for(_&&(E=v.domain)&&E.exit();s;){T=s.fn,s=s.next;try{T()}catch(C){throw s?l():n=void 0,C}}n=void 0,E&&E.enter()},l=_?function(){v.nextTick(a)}:g&&!p?(h=!0,m=document.createTextNode(""),new g(a).observe(m,{characterData:!0}),function(){m.data=h=!h}):b&&b.resolve?(i=b.resolve(void 0),o=i.then,function(){o.call(i,a)}):function(){u.call(c,a)}),d.exports=A||function(E){E={fn:E,next:void 0},n&&(n.next=E),s||(s=E,l()),n=E}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(e,d,f){e=e("../internals/global"),d.exports=e.Promise},{"../internals/global":59}],83:[function(e,d,f){e=e("../internals/fails"),d.exports=!!Object.getOwnPropertySymbols&&!e(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(e,d,f){var a=e("../internals/fails"),s=e("../internals/well-known-symbol"),n=e("../internals/is-pure"),l=s("iterator");d.exports=!a(function(){var h=new URL("b?a=1&b=2&c=3","http://a"),m=h.searchParams,i="";return h.pathname="c%20d",m.forEach(function(o,c){m.delete("b"),i+=c+o}),n&&!h.toJSON||!m.sort||h.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[l]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||i!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(a,d,f){var s=a("../internals/global"),a=a("../internals/inspect-source"),s=s.WeakMap;d.exports=typeof s=="function"&&/native code/.test(a(s))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,d,f){function a(n){var l,h;this.promise=new n(function(m,i){if(l!==void 0||h!==void 0)throw TypeError("Bad Promise constructor");l=m,h=i}),this.resolve=s(l),this.reject=s(h)}var s=e("../internals/a-function");d.exports.f=function(n){return new a(n)}},{"../internals/a-function":5}],87:[function(e,d,f){var a=e("../internals/is-regexp");d.exports=function(s){if(a(s))throw TypeError("The method doesn't accept regular expressions");return s}},{"../internals/is-regexp":76}],88:[function(e,d,f){var a=e("../internals/global").isFinite;d.exports=Number.isFinite||function(s){return typeof s=="number"&&a(s)}},{"../internals/global":59}],89:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/fails"),n=e("../internals/object-keys"),l=e("../internals/object-get-own-property-symbols"),h=e("../internals/object-property-is-enumerable"),m=e("../internals/to-object"),i=e("../internals/indexed-object"),o=Object.assign,c=Object.defineProperty;d.exports=!o||s(function(){var u,p,g,v;return!(!a||o({b:1},o(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(p={},v="abcdefghijklmnopqrst",(u={})[g=Symbol()]=7,v.split("").forEach(function(b){p[b]=b}),o({},u)[g]!=7||n(o({},p)).join("")!=v)})?function(u,p){for(var g=m(u),v=arguments.length,b=1,_=l.f,x=h.f;b<v;)for(var A,E=i(arguments[b++]),T=_?n(E).concat(_(E)):n(E),C=T.length,R=0;R<C;)A=T[R++],a&&!x.call(E,A)||(g[A]=E[A]);return g}:o},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(c,d,f){function a(){}var s,n=c("../internals/an-object"),l=c("../internals/object-define-properties"),h=c("../internals/enum-bug-keys"),m=c("../internals/hidden-keys"),i=c("../internals/html"),o=c("../internals/document-create-element"),c=c("../internals/shared-key"),u="prototype",p="script",g=c("IE_PROTO"),v=function(_){return"<"+p+">"+_+"</"+p+">"},b=function(){try{s=document.domain&&new ActiveXObject("htmlfile")}catch{}b=s?((_=s).write(v("")),_.close(),x=_.parentWindow.Object,_=null,x):(_=o("iframe"),x="java"+p+":",_.style.display="none",i.appendChild(_),_.src=String(x),(x=_.contentWindow.document).open(),x.write(v("document.F=Object")),x.close(),x.F);for(var _,x,A=h.length;A--;)delete b[u][h[A]];return b()};m[g]=!0,d.exports=Object.create||function(_,x){var A;return _!==null?(a[u]=n(_),A=new a,a[u]=null,A[g]=_):A=b(),x===void 0?A:l(A,x)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/object-define-property"),n=e("../internals/an-object"),l=e("../internals/object-keys");d.exports=a?Object.defineProperties:function(h,m){n(h);for(var i,o=l(m),c=o.length,u=0;u<c;)s.f(h,i=o[u++],m[i]);return h}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/ie8-dom-define"),n=e("../internals/an-object"),l=e("../internals/to-primitive"),h=Object.defineProperty;f.f=a?h:function(m,i,o){if(n(m),i=l(i,!0),n(o),s)try{return h(m,i,o)}catch{}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(m[i]=o.value),m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/object-property-is-enumerable"),n=e("../internals/create-property-descriptor"),l=e("../internals/to-indexed-object"),h=e("../internals/to-primitive"),m=e("../internals/has"),i=e("../internals/ie8-dom-define"),o=Object.getOwnPropertyDescriptor;f.f=a?o:function(c,u){if(c=l(c),u=h(u,!0),i)try{return o(c,u)}catch{}if(m(c,u))return n(!s.f.call(c,u),c[u])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(e,d,f){var a=e("../internals/to-indexed-object"),s=e("../internals/object-get-own-property-names").f,n={}.toString,l=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];d.exports.f=function(h){if(!l||n.call(h)!="[object Window]")return s(a(h));try{return s(h)}catch{return l.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(e,d,f){var a=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys").concat("length","prototype");f.f=Object.getOwnPropertyNames||function(n){return a(n,s)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(e,d,f){f.f=Object.getOwnPropertySymbols},{}],97:[function(l,d,f){var a=l("../internals/has"),s=l("../internals/to-object"),n=l("../internals/shared-key"),l=l("../internals/correct-prototype-getter"),h=n("IE_PROTO"),m=Object.prototype;d.exports=l?Object.getPrototypeOf:function(i){return i=s(i),a(i,h)?i[h]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?m:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(e,d,f){var a=e("../internals/has"),s=e("../internals/to-indexed-object"),n=e("../internals/array-includes").indexOf,l=e("../internals/hidden-keys");d.exports=function(h,m){var i,o=s(h),c=0,u=[];for(i in o)!a(l,i)&&a(o,i)&&u.push(i);for(;m.length>c;)!a(o,i=m[c++])||~n(u,i)||u.push(i);return u}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(e,d,f){var a=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys");d.exports=Object.keys||function(n){return a(n,s)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(e,d,f){var a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,n=s&&!a.call({1:2},1);f.f=n?function(l){return l=s(this,l),!!l&&l.enumerable}:a},{}],101:[function(e,d,f){var a=e("../internals/an-object"),s=e("../internals/a-possible-prototype");d.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,l=!1,h={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(h,[]),l=h instanceof Array}catch{}return function(m,i){return a(m),s(i),l?n.call(m,i):m.__proto__=i,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,d,f){var a=e("../internals/to-string-tag-support"),s=e("../internals/classof");d.exports=a?{}.toString:function(){return"[object "+s(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(e,d,f){var a=e("../internals/get-built-in"),s=e("../internals/object-get-own-property-names"),n=e("../internals/object-get-own-property-symbols"),l=e("../internals/an-object");d.exports=a("Reflect","ownKeys")||function(h){var m=s.f(l(h)),i=n.f;return i?m.concat(i(h)):m}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,d,f){e=e("../internals/global"),d.exports=e},{"../internals/global":59}],105:[function(e,d,f){d.exports=function(a){try{return{error:!1,value:a()}}catch(s){return{error:!0,value:s}}}},{}],106:[function(e,d,f){var a=e("../internals/an-object"),s=e("../internals/is-object"),n=e("../internals/new-promise-capability");d.exports=function(l,h){return a(l),s(h)&&h.constructor===l?h:((0,(l=n.f(l)).resolve)(h),l.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,d,f){var a=e("../internals/redefine");d.exports=function(s,n,l){for(var h in n)a(s,h,n[h],l);return s}},{"../internals/redefine":108}],108:[function(m,d,f){var a=m("../internals/global"),s=m("../internals/create-non-enumerable-property"),n=m("../internals/has"),l=m("../internals/set-global"),h=m("../internals/inspect-source"),m=m("../internals/internal-state"),i=m.get,o=m.enforce,c=String(String).split("String");(d.exports=function(u,p,g,x){var b=!!x&&!!x.unsafe,_=!!x&&!!x.enumerable,x=!!x&&!!x.noTargetGet;typeof g=="function"&&(typeof p!="string"||n(g,"name")||s(g,"name",p),o(g).source=c.join(typeof p=="string"?p:"")),u===a?_?u[p]=g:l(p,g):(b?!x&&u[p]&&(_=!0):delete u[p],_?u[p]=g:s(u,p,g))})(Function.prototype,"toString",function(){return typeof this=="function"&&i(this).source||h(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,d,f){var a=e("./classof-raw"),s=e("./regexp-exec");d.exports=function(n,l){var h=n.exec;if(typeof h=="function"){if(h=h.call(n,l),typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(a(n)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return s.call(n,l)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(l,d,f){var a,s,n=l("./regexp-flags"),l=l("./regexp-sticky-helpers"),h=RegExp.prototype.exec,m=String.prototype.replace,i=h,o=(a=/a/,s=/b*/g,h.call(a,"a"),h.call(s,"a"),a.lastIndex!==0||s.lastIndex!==0),c=l.UNSUPPORTED_Y||l.BROKEN_CARET,u=/()??/.exec("")[1]!==void 0;d.exports=i=o||u||c?function(p){var g,v,b,_,x=this,A=c&&x.sticky,E=n.call(x),T=x.source,C=0,R=p;return A&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),R=String(p).slice(x.lastIndex),0<x.lastIndex&&(!x.multiline||x.multiline&&p[x.lastIndex-1]!==`
`)&&(T="(?: "+T+")",R=" "+R,C++),v=new RegExp("^(?:"+T+")",E)),u&&(v=new RegExp("^"+T+"$(?!\\s)",E)),o&&(g=x.lastIndex),b=h.call(A?v:x,R),A?b?(b.input=b.input.slice(C),b[0]=b[0].slice(C),b.index=x.lastIndex,x.lastIndex+=b[0].length):x.lastIndex=0:o&&b&&(x.lastIndex=x.global?b.index+b[0].length:g),u&&b&&1<b.length&&m.call(b[0],v,function(){for(_=1;_<arguments.length-2;_++)arguments[_]===void 0&&(b[_]=void 0)}),b}:i},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,d,f){var a=e("../internals/an-object");d.exports=function(){var s=a(this),n="";return s.global&&(n+="g"),s.ignoreCase&&(n+="i"),s.multiline&&(n+="m"),s.dotAll&&(n+="s"),s.unicode&&(n+="u"),s.sticky&&(n+="y"),n}},{"../internals/an-object":10}],112:[function(e,d,f){e=e("./fails");function a(s,n){return RegExp(s,n)}f.UNSUPPORTED_Y=e(function(){var s=a("a","y");return s.lastIndex=2,s.exec("abcd")!=null}),f.BROKEN_CARET=e(function(){var s=a("^r","gy");return s.lastIndex=2,s.exec("str")!=null})},{"./fails":51}],113:[function(e,d,f){d.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},{}],114:[function(e,d,f){d.exports=Object.is||function(a,s){return a===s?a!==0||1/a==1/s:a!=a&&s!=s}},{}],115:[function(e,d,f){var a=e("../internals/global"),s=e("../internals/create-non-enumerable-property");d.exports=function(n,l){try{s(a,n,l)}catch{a[n]=l}return l}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(e,d,f){var a=e("../internals/get-built-in"),s=e("../internals/object-define-property"),n=e("../internals/well-known-symbol"),l=e("../internals/descriptors"),h=n("species");d.exports=function(i){var i=a(i),o=s.f;l&&i&&!i[h]&&o(i,h,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(e,d,f){var a=e("../internals/object-define-property").f,s=e("../internals/has"),n=e("../internals/well-known-symbol")("toStringTag");d.exports=function(l,h,m){l&&!s(l=m?l:l.prototype,n)&&a(l,n,{configurable:!0,value:h})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(e,d,f){var a=e("../internals/shared"),s=e("../internals/uid"),n=a("keys");d.exports=function(l){return n[l]||(n[l]=s(l))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(a,d,f){var n=a("../internals/global"),a=a("../internals/set-global"),s="__core-js_shared__",n=n[s]||a(s,{});d.exports=n},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,d,f){var a=e("../internals/is-pure"),s=e("../internals/shared-store");(d.exports=function(n,l){return s[n]||(s[n]=l!==void 0?l:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,d,f){var a=e("../internals/an-object"),s=e("../internals/a-function"),n=e("../internals/well-known-symbol")("species");d.exports=function(m,h){var m=a(m).constructor;return m===void 0||(m=a(m)[n])==null?h:s(m)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(e,d,f){var a=e("../internals/fails");d.exports=function(s){return a(function(){var n=""[s]('"');return n!==n.toLowerCase()||3<n.split('"').length})}},{"../internals/fails":51}],123:[function(e,d,f){function a(l){return function(o,c){var i,o=String(n(o)),c=s(c),u=o.length;return c<0||u<=c?l?"":void 0:(i=o.charCodeAt(c))<55296||56319<i||c+1===u||(u=o.charCodeAt(c+1))<56320||57343<u?l?o.charAt(c):i:l?o.slice(c,c+2):u-56320+(i-55296<<10)+65536}}var s=e("../internals/to-integer"),n=e("../internals/require-object-coercible");d.exports={codeAt:a(!1),charAt:a(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(e,d,f){function a(b){return b+22+75*(b<26)}function s(b){var _,x=[],A=(b=function(Z){for(var q=[],ee=0,L=Z.length;ee<L;){var O,U=Z.charCodeAt(ee++);55296<=U&&U<=56319&&ee<L?(64512&(O=Z.charCodeAt(ee++)))==56320?q.push(((1023&U)<<10)+(1023&O)+65536):(q.push(U),ee--):q.push(U)}return q}(b)).length,E=128,T=0,C=72;for(k=0;k<b.length;k++)(_=b[k])<128&&x.push(v(_));var R=x.length,P=R;for(R&&x.push("-");P<A;){for(var N=n,k=0;k<b.length;k++)E<=(_=b[k])&&_<N&&(N=_);var I=P+1;if(N-E>g((n-T)/I))throw RangeError(u);for(T+=(N-E)*I,E=N,k=0;k<b.length;k++){if((_=b[k])<E&&++T>n)throw RangeError(u);if(_==E){for(var B=T,Y=l;;Y+=l){var W=Y<=C?1:C+h<=Y?h:Y-C;if(B<W)break;var H=B-W,X=l-W;x.push(v(a(W+H%X))),B=g(H/X)}x.push(v(a(B))),C=function(Z,q,ee){var L=0;for(Z=ee?g(Z/i):Z>>1,Z+=g(Z/q);p*h>>1<Z;L+=l)Z=g(Z/p);return g(L+(p+1)*Z/(Z+m))}(T,I,P==R),T=0,++P}}++T,++E}return x.join("")}var n=2147483647,l=36,h=26,m=38,i=700,o=/[^\0-\u007E]/,c=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",p=l-1,g=Math.floor,v=String.fromCharCode;d.exports=function(b){for(var _,x=[],A=b.toLowerCase().replace(c,".").split("."),E=0;E<A.length;E++)_=A[E],x.push(o.test(_)?"xn--"+s(_):_);return x.join(".")}},{}],125:[function(e,d,f){var a=e("../internals/to-integer"),s=e("../internals/require-object-coercible");d.exports="".repeat||function(n){var l=String(s(this)),h="",m=a(n);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(l+=l))1&m&&(h+=l);return h}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(e,d,f){var a=e("../internals/fails"),s=e("../internals/whitespaces");d.exports=function(n){return a(function(){return!!s[n]()||"​᠎"[n]()!="​᠎"||s[n].name!==n})}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(n,d,f){function a(m){return function(i){return i=String(s(i)),1&m&&(i=i.replace(l,"")),i=2&m?i.replace(h,""):i}}var s=n("../internals/require-object-coercible"),n="["+n("../internals/whitespaces")+"]",l=RegExp("^"+n+n+"*"),h=RegExp(n+n+"*$");d.exports={start:a(1),end:a(2),trim:a(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(p,d,f){function a(P){return function(){R(P)}}function s(P){R(P.data)}function n(P){h.postMessage(P+"",g.protocol+"//"+g.host)}var l,h=p("../internals/global"),m=p("../internals/fails"),i=p("../internals/classof-raw"),o=p("../internals/function-bind-context"),c=p("../internals/html"),u=p("../internals/document-create-element"),p=p("../internals/engine-is-ios"),g=h.location,v=h.setImmediate,b=h.clearImmediate,_=h.process,x=h.MessageChannel,A=h.Dispatch,E=0,T={},C="onreadystatechange",R=function(P){var N;T.hasOwnProperty(P)&&(N=T[P],delete T[P],N())};v&&b||(v=function(P){for(var N=[],k=1;k<arguments.length;)N.push(arguments[k++]);return T[++E]=function(){(typeof P=="function"?P:Function(P)).apply(void 0,N)},l(E),E},b=function(P){delete T[P]},i(_)=="process"?l=function(P){_.nextTick(a(P))}:A&&A.now?l=function(P){A.now(a(P))}:x&&!p?(p=(i=new x).port2,i.port1.onmessage=s,l=o(p.postMessage,p,1)):!h.addEventListener||typeof postMessage!="function"||h.importScripts||m(n)||g.protocol==="file:"?l=C in u("script")?function(P){c.appendChild(u("script"))[C]=function(){c.removeChild(this),R(P)}}:function(P){setTimeout(a(P),0)}:(l=n,h.addEventListener("message",s,!1))),d.exports={set:v,clear:b}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(e,d,f){var a=e("../internals/classof-raw");d.exports=function(s){if(typeof s!="number"&&a(s)!="Number")throw TypeError("Incorrect invocation");return+s}},{"../internals/classof-raw":28}],130:[function(e,d,f){var a=e("../internals/to-integer"),s=Math.max,n=Math.min;d.exports=function(l,h){return l=a(l),l<0?s(l+h,0):n(l,h)}},{"../internals/to-integer":133}],131:[function(e,d,f){var a=e("../internals/to-integer"),s=e("../internals/to-length");d.exports=function(l){if(l===void 0)return 0;var l=a(l),h=s(l);if(l!==h)throw RangeError("Wrong length or index");return h}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(e,d,f){var a=e("../internals/indexed-object"),s=e("../internals/require-object-coercible");d.exports=function(n){return a(s(n))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(e,d,f){var a=Math.ceil,s=Math.floor;d.exports=function(n){return isNaN(n=+n)?0:(0<n?s:a)(n)}},{}],134:[function(e,d,f){var a=e("../internals/to-integer"),s=Math.min;d.exports=function(n){return 0<n?s(a(n),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(e,d,f){var a=e("../internals/require-object-coercible");d.exports=function(s){return Object(a(s))}},{"../internals/require-object-coercible":113}],136:[function(e,d,f){var a=e("../internals/to-positive-integer");d.exports=function(s,n){if(s=a(s),s%n)throw RangeError("Wrong offset");return s}},{"../internals/to-positive-integer":137}],137:[function(e,d,f){var a=e("../internals/to-integer");d.exports=function(s){if(s=a(s),s<0)throw RangeError("The argument can't be less than 0");return s}},{"../internals/to-integer":133}],138:[function(e,d,f){var a=e("../internals/is-object");d.exports=function(s,n){if(!a(s))return s;var l,h;if(n&&typeof(l=s.toString)=="function"&&!a(h=l.call(s))||typeof(l=s.valueOf)=="function"&&!a(h=l.call(s))||!n&&typeof(l=s.toString)=="function"&&!a(h=l.call(s)))return h;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(e,d,f){var a={};a[e("../internals/well-known-symbol")("toStringTag")]="z",d.exports=String(a)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(e,d,f){function a(we,De){for(var Ie=0,We=De.length,$=new(ie(we))(We);Ie<We;)$[Ie]=De[Ie++];return $}function s(we,De){O(we,De,{get:function(){return ee(this)[De]}})}function n(we){return we instanceof le||(we=R(we))=="ArrayBuffer"||we=="SharedArrayBuffer"}function l(we,De){return _e(we)&&typeof De!="symbol"&&De in we&&String(+De)==String(De)}function h(we,De){return l(we,De=T(De,!0))?b(2,we[De]):U(we,De)}function m(we,De,Ie){return!(l(we,De=T(De,!0))&&P(Ie)&&C(Ie,"value"))||C(Ie,"get")||C(Ie,"set")||Ie.configurable||C(Ie,"writable")&&!Ie.writable||C(Ie,"enumerable")&&!Ie.enumerable?O(we,De,Ie):(we[De]=Ie.value,we)}var i=e("../internals/export"),o=e("../internals/global"),c=e("../internals/descriptors"),u=e("../internals/typed-array-constructors-require-wrappers"),p=e("../internals/array-buffer-view-core"),g=e("../internals/array-buffer"),v=e("../internals/an-instance"),b=e("../internals/create-property-descriptor"),_=e("../internals/create-non-enumerable-property"),x=e("../internals/to-length"),A=e("../internals/to-index"),E=e("../internals/to-offset"),T=e("../internals/to-primitive"),C=e("../internals/has"),R=e("../internals/classof"),P=e("../internals/is-object"),N=e("../internals/object-create"),k=e("../internals/object-set-prototype-of"),I=e("../internals/object-get-own-property-names").f,B=e("../internals/typed-array-from"),Y=e("../internals/array-iteration").forEach,W=e("../internals/set-species"),H=e("../internals/object-define-property"),X=e("../internals/object-get-own-property-descriptor"),Z=e("../internals/internal-state"),q=e("../internals/inherit-if-required"),ee=Z.get,L=Z.set,O=H.f,U=X.f,V=Math.round,J=o.RangeError,le=g.ArrayBuffer,ce=g.DataView,ue=p.NATIVE_ARRAY_BUFFER_VIEWS,re=p.TYPED_ARRAY_TAG,de=p.TypedArray,ve=p.TypedArrayPrototype,ie=p.aTypedArrayConstructor,_e=p.isTypedArray,Se="BYTES_PER_ELEMENT",Te="Wrong length";c?(ue||(X.f=h,H.f=m,s(ve,"buffer"),s(ve,"byteOffset"),s(ve,"byteLength"),s(ve,"length")),i({target:"Object",stat:!0,forced:!ue},{getOwnPropertyDescriptor:h,defineProperty:m}),d.exports=function(xe,De,Ie){function We(ae,K){O(ae,K,{get:function(){var Q=this,G=K;return(Q=ee(Q)).view[Ae](G*$+Q.byteOffset,!0)},set:function(Q){var G=this,te=K;G=ee(G),Ie&&(Q=(Q=V(Q))<0?0:255<Q?255:255&Q),G.view[Ne](te*$+G.byteOffset,Q,!0)},enumerable:!0})}var $=xe.match(/\d+$/)[0]/8,se=xe+(Ie?"Clamped":"")+"Array",Ae="get"+xe,Ne="set"+xe,ze=o[se],Ve=ze,xe=Ve&&Ve.prototype,oe={};ue?u&&(Ve=De(function(ae,K,Q,G){return v(ae,Ve,se),q(P(K)?n(K)?G!==void 0?new ze(K,E(Q,$),G):Q!==void 0?new ze(K,E(Q,$)):new ze(K):_e(K)?a(Ve,K):B.call(Ve,K):new ze(A(K)),ae,Ve)}),k&&k(Ve,de),Y(I(ze),function(ae){ae in Ve||_(Ve,ae,ze[ae])}),Ve.prototype=xe):(Ve=De(function(ae,K,Q,G){v(ae,Ve,se);var te,ge,Ee=0,Le=0;if(P(K)){if(!n(K))return _e(K)?a(Ve,K):B.call(Ve,K);var Ye=K,Le=E(Q,$),Q=K.byteLength;if(G===void 0){if(Q%$||(te=Q-Le)<0)throw J(Te)}else if(Q<(te=x(G)*$)+Le)throw J(Te);ge=te/$}else ge=A(K),Ye=new le(te=ge*$);for(L(ae,{buffer:Ye,byteOffset:Le,byteLength:te,length:ge,view:new ce(Ye)});Ee<ge;)We(ae,Ee++)}),k&&k(Ve,de),xe=Ve.prototype=N(ve)),xe.constructor!==Ve&&_(xe,"constructor",Ve),re&&_(xe,re,se),oe[se]=Ve,i({global:!0,forced:Ve!=ze,sham:!ue},oe),Se in Ve||_(Ve,Se,$),Se in xe||_(xe,Se,$),W(se)}):d.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(l,d,f){var a=l("../internals/global"),s=l("../internals/fails"),n=l("../internals/check-correctness-of-iteration"),l=l("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,h=a.ArrayBuffer,m=a.Int8Array;d.exports=!l||!s(function(){m(1)})||!s(function(){new m(-1)})||!n(function(i){new m,new m(null),new m(1.5),new m(i)},!0)||s(function(){return new m(new h(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(e,d,f){var a=e("../internals/to-object"),s=e("../internals/to-length"),n=e("../internals/get-iterator-method"),l=e("../internals/is-array-iterator-method"),h=e("../internals/function-bind-context"),m=e("../internals/array-buffer-view-core").aTypedArrayConstructor;d.exports=function(i){var o,c,u,p,g,v,b=a(i),_=arguments.length,x=1<_?arguments[1]:void 0,A=x!==void 0,E=n(b);if(E!=null&&!l(E))for(v=(g=E.call(b)).next,b=[];!(p=v.call(g)).done;)b.push(p.value);for(A&&2<_&&(x=h(x,arguments[2],2)),c=s(b.length),u=new(m(this))(c),o=0;o<c;o++)u[o]=A?x(b[o],o):b[o];return u}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(e,d,f){var a=0,s=Math.random();d.exports=function(n){return"Symbol("+String(n===void 0?"":n)+")_"+(++a+s).toString(36)}},{}],144:[function(e,d,f){e=e("../internals/native-symbol"),d.exports=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(e,d,f){e=e("../internals/well-known-symbol"),f.f=e},{"../internals/well-known-symbol":146}],146:[function(m,d,f){var a=m("../internals/global"),s=m("../internals/shared"),n=m("../internals/has"),l=m("../internals/uid"),h=m("../internals/native-symbol"),m=m("../internals/use-symbol-as-uid"),i=s("wks"),o=a.Symbol,c=m?o:o&&o.withoutSetter||l;d.exports=function(u){return n(i,u)||(h&&n(o,u)?i[u]=o[u]:i[u]=c("Symbol."+u)),i[u]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(e,d,f){d.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],148:[function(n,d,f){var a=n("../internals/export"),s=n("../internals/global"),h=n("../internals/array-buffer"),n=n("../internals/set-species"),l="ArrayBuffer",h=h[l];a({global:!0,forced:s[l]!==h},{ArrayBuffer:h}),n(l)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(b,d,f){var a=b("../internals/export"),s=b("../internals/fails"),n=b("../internals/is-array"),l=b("../internals/is-object"),h=b("../internals/to-object"),m=b("../internals/to-length"),i=b("../internals/create-property"),o=b("../internals/array-species-create"),c=b("../internals/array-method-has-species-support"),v=b("../internals/well-known-symbol"),b=b("../internals/engine-v8-version"),u=v("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",v=51<=b||!s(function(){var _=[];return _[u]=!1,_.concat()[0]!==_}),b=c("concat");a({target:"Array",proto:!0,forced:!v||!b},{concat:function(_){for(var x,A,E,T,C,R=h(this),P=o(R,0),N=0,k=-1,I=arguments.length;k<I;k++)if(C=void 0,!l(T=E=k===-1?R:arguments[k])||((C=T[u])!==void 0?!C:!n(T))){if(p<=N)throw TypeError(g);i(P,N++,E)}else{if(A=m(E.length),p<N+A)throw TypeError(g);for(x=0;x<A;x++,N++)x in E&&i(P,N,E[x])}return P.length=N,P}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(n,d,f){var a=n("../internals/export"),s=n("../internals/array-copy-within"),n=n("../internals/add-to-unscopables");a({target:"Array",proto:!0},{copyWithin:s}),n("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(l,d,f){var a=l("../internals/export"),s=l("../internals/array-iteration").every,n=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),n=n("every"),l=l("every");a({target:"Array",proto:!0,forced:!n||!l},{every:function(h){return s(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(n,d,f){var a=n("../internals/export"),s=n("../internals/array-fill"),n=n("../internals/add-to-unscopables");a({target:"Array",proto:!0},{fill:s}),n("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(l,d,f){var a=l("../internals/export"),s=l("../internals/array-iteration").filter,n=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),n=n("filter"),l=l("filter");a({target:"Array",proto:!0,forced:!n||!l},{filter:function(h){return s(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(s,d,f){var a=s("../internals/export"),s=s("../internals/array-for-each");a({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/array-from");a({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(n){Array.from(n)})},{from:s})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/array-includes").includes,n=e("../internals/add-to-unscopables");a({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(l){return s(this,l,1<arguments.length?arguments[1]:void 0)}}),n("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(m,d,f){var a=m("../internals/export"),s=m("../internals/array-includes").indexOf,h=m("../internals/array-method-is-strict"),m=m("../internals/array-method-uses-to-length"),n=[].indexOf,l=!!n&&1/[1].indexOf(1,-0)<0,h=h("indexOf"),m=m("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:l||!h||!m},{indexOf:function(i){return l?n.apply(this,arguments)||0:s(this,i,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(h,d,f){var a=h("../internals/to-indexed-object"),s=h("../internals/add-to-unscopables"),n=h("../internals/iterators"),l=h("../internals/internal-state"),h=h("../internals/define-iterator"),m="Array Iterator",i=l.set,o=l.getterFor(m);d.exports=h(Array,"Array",function(c,u){i(this,{type:m,target:a(c),index:0,kind:u})},function(){var c=o(this),u=c.target,p=c.kind,g=c.index++;return!u||g>=u.length?{value:c.target=void 0,done:!0}:p=="keys"?{value:g,done:!1}:p=="values"?{value:u[g],done:!1}:{value:[g,u[g]],done:!1}},"values"),n.Arguments=n.Array,s("keys"),s("values"),s("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(h,d,f){var a=h("../internals/export"),l=h("../internals/indexed-object"),s=h("../internals/to-indexed-object"),h=h("../internals/array-method-is-strict"),n=[].join,l=l!=Object,h=h("join",",");a({target:"Array",proto:!0,forced:l||!h},{join:function(m){return n.call(s(this),m===void 0?",":m)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(s,d,f){var a=s("../internals/export"),s=s("../internals/array-last-index-of");a({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(l,d,f){var a=l("../internals/export"),s=l("../internals/array-iteration").map,n=l("../internals/array-method-has-species-support"),l=l("../internals/array-method-uses-to-length"),n=n("map"),l=l("map");a({target:"Array",proto:!0,forced:!n||!l},{map:function(h){return s(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(u,d,f){var a=u("../internals/export"),s=u("../internals/is-object"),n=u("../internals/is-array"),l=u("../internals/to-absolute-index"),h=u("../internals/to-length"),m=u("../internals/to-indexed-object"),i=u("../internals/create-property"),o=u("../internals/well-known-symbol"),c=u("../internals/array-method-has-species-support"),u=u("../internals/array-method-uses-to-length"),c=c("slice"),u=u("slice",{ACCESSORS:!0,0:0,1:2}),p=o("species"),g=[].slice,v=Math.max;a({target:"Array",proto:!0,forced:!c||!u},{slice:function(b,_){var x,A,E,T=m(this),C=h(T.length),R=l(b,C),P=l(_===void 0?C:_,C);if(n(T)&&((x=typeof(x=T.constructor)=="function"&&(x===Array||n(x.prototype))||s(x)&&(x=x[p])===null?void 0:x)===Array||x===void 0))return g.call(T,R,P);for(A=new(x===void 0?Array:x)(v(P-R,0)),E=0;R<P;R++,E++)R in T&&i(A,E,T[R]);return A.length=E,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(l,d,f){var a=l("../internals/export"),s=l("../internals/array-iteration").some,n=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),n=n("some"),l=l("some");a({target:"Array",proto:!0,forced:!n||!l},{some:function(h){return s(this,h,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(c,d,f){var a=c("../internals/export"),s=c("../internals/to-absolute-index"),n=c("../internals/to-integer"),l=c("../internals/to-length"),h=c("../internals/to-object"),m=c("../internals/array-species-create"),i=c("../internals/create-property"),o=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),o=o("splice"),c=c("splice",{ACCESSORS:!0,0:0,1:2}),u=Math.max,p=Math.min;a({target:"Array",proto:!0,forced:!o||!c},{splice:function(N,v){var b,_,x,A,E,T,C=h(this),R=l(C.length),P=s(N,R),N=arguments.length;if(N===0?b=_=0:_=N===1?(b=0,R-P):(b=N-2,p(u(n(v),0),R-P)),9007199254740991<R+b-_)throw TypeError("Maximum allowed length exceeded");for(x=m(C,_),A=0;A<_;A++)(E=P+A)in C&&i(x,A,C[E]);if(b<(x.length=_)){for(A=P;A<R-_;A++)T=A+b,(E=A+_)in C?C[T]=C[E]:delete C[T];for(A=R;R-_+b<A;A--)delete C[A-1]}else if(_<b)for(A=R-_;P<A;A--)T=A+b-1,(E=A+_-1)in C?C[T]=C[E]:delete C[T];for(A=0;A<b;A++)C[A+P]=arguments[A+2];return C.length=R-_+b,x}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(s,d,f){var a=s("../internals/descriptors"),s=s("../internals/object-define-property").f,n=Function.prototype,l=n.toString,h=/^\s*function ([^ (]*)/;!a||"name"in n||s(n,"name",{configurable:!0,get:function(){try{return l.call(this).match(h)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(s,d,f){var a=s("../internals/collection"),s=s("../internals/collection-strong");d.exports=a("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},s)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(a,d,f){var a=a("../internals/export"),s=Math.hypot,n=Math.abs,l=Math.sqrt;a({target:"Math",stat:!0,forced:!!s&&s(1/0,NaN)!==1/0},{hypot:function(h,m){for(var i,o,c=0,u=0,p=arguments.length,g=0;u<p;)g<(i=n(arguments[u++]))?(c=c*(o=g/i)*o+1,g=i):c+=0<i?(o=i/g)*o:i;return g===1/0?1/0:g*l(c)}})},{"../internals/export":50}],168:[function(e,d,f){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(e,d,f){function a(k){var I,B,Y,W,H,X,Z,q=c(k,!1);if(typeof q=="string"&&2<q.length){if((k=(q=_(q)).charCodeAt(0))===43||k===45){if((I=q.charCodeAt(2))===88||I===120)return NaN}else if(k===48){switch(q.charCodeAt(1)){case 66:case 98:B=2,Y=49;break;case 79:case 111:B=8,Y=55;break;default:return+q}for(H=(W=q.slice(2)).length,X=0;X<H;X++)if((Z=W.charCodeAt(X))<48||Y<Z)return NaN;return parseInt(W,B)}}return+q}var s=e("../internals/descriptors"),n=e("../internals/global"),l=e("../internals/is-forced"),h=e("../internals/redefine"),m=e("../internals/has"),i=e("../internals/classof-raw"),o=e("../internals/inherit-if-required"),c=e("../internals/to-primitive"),u=e("../internals/fails"),p=e("../internals/object-create"),g=e("../internals/object-get-own-property-names").f,v=e("../internals/object-get-own-property-descriptor").f,b=e("../internals/object-define-property").f,_=e("../internals/string-trim").trim,x="Number",A=n[x],E=A.prototype,T=i(p(E))==x;if(l(x,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var C,R=function(I){var I=arguments.length<1?0:I,B=this;return B instanceof R&&(T?u(function(){E.valueOf.call(B)}):i(B)!=x)?o(new A(a(I)),B,R):a(I)},P=s?g(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;P.length>N;N++)m(A,C=P[N])&&!m(R,C)&&b(R,C,v(A,C));(R.prototype=E).constructor=R,h(n,x,R)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(e,d,f){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(m,d,f){function a(c,u,p){return u===0?p:u%2==1?a(c,u-1,p*c):a(c*c,u/2,p)}var s=m("../internals/export"),n=m("../internals/to-integer"),l=m("../internals/this-number-value"),h=m("../internals/string-repeat"),m=m("../internals/fails"),i=1 .toFixed,o=Math.floor;s({target:"Number",proto:!0,forced:i&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!m(function(){i.call({})})},{toFixed:function(x){function u(C,R){for(var P=-1,N=R;++P<6;)N+=C*A[P],A[P]=N%1e7,N=o(N/1e7)}function p(C){for(var R=6,P=0;0<=--R;)P+=A[R],A[R]=o(P/C),P=P%C*1e7}function g(){for(var C,R=6,P="";0<=--R;)P===""&&R!==0&&A[R]===0||(C=String(A[R]),P=P===""?C:P+h.call("0",7-C.length)+C);return P}var v,b,_=l(this),x=n(x),A=[0,0,0,0,0,0],E="",T="0";if(x<0||20<x)throw RangeError("Incorrect fraction digits");if(_!=_)return"NaN";if(_<=-1e21||1e21<=_)return String(_);if(_<0&&(E="-",_=-_),1e-21<_)if(_=(v=function(C){for(var R=0,P=C;4096<=P;)R+=12,P/=4096;for(;2<=P;)R+=1,P/=2;return R}(_*a(2,69,1))-69)<0?_*a(2,-v,1):_/a(2,v,1),_*=4503599627370496,0<(v=52-v)){for(u(0,_),b=x;7<=b;)u(1e7,0),b-=7;for(u(a(10,b,1),0),b=v-1;23<=b;)p(1<<23),b-=23;p(1<<b),u(1,1),p(2),T=g()}else u(0,_),u(1<<-v,0),T=g()+h.call("0",x);return T=0<x?E+((_=T.length)<=x?"0."+h.call("0",x-_)+T:T.slice(0,_-x)+"."+T.slice(_-x)):E+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(s,d,f){var a=s("../internals/export"),s=s("../internals/object-assign");a({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(l,d,f){var a=l("../internals/export"),h=l("../internals/fails"),s=l("../internals/to-indexed-object"),n=l("../internals/object-get-own-property-descriptor").f,l=l("../internals/descriptors"),h=h(function(){n(1)});a({target:"Object",stat:!0,forced:!l||h,sham:!l},{getOwnPropertyDescriptor:function(m,i){return n(s(m),i)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(n,d,f){var a=n("../internals/export"),s=n("../internals/fails"),n=n("../internals/object-get-own-property-names-external").f;a({target:"Object",stat:!0,forced:s(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:n})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(h,d,f){var a=h("../internals/export"),s=h("../internals/fails"),n=h("../internals/to-object"),l=h("../internals/object-get-prototype-of"),h=h("../internals/correct-prototype-getter");a({target:"Object",stat:!0,forced:s(function(){l(1)}),sham:!h},{getPrototypeOf:function(m){return l(n(m))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/to-object"),n=e("../internals/object-keys");a({target:"Object",stat:!0,forced:e("../internals/fails")(function(){n(1)})},{keys:function(l){return n(s(l))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(n,d,f){var a=n("../internals/to-string-tag-support"),s=n("../internals/redefine"),n=n("../internals/object-to-string");a||s(Object.prototype,"toString",n,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(Ie,d,f){var a,s,n,l,h=Ie("../internals/export"),m=Ie("../internals/is-pure"),i=Ie("../internals/global"),o=Ie("../internals/get-built-in"),c=Ie("../internals/native-promise-constructor"),u=Ie("../internals/redefine"),p=Ie("../internals/redefine-all"),g=Ie("../internals/set-to-string-tag"),v=Ie("../internals/set-species"),b=Ie("../internals/is-object"),_=Ie("../internals/a-function"),x=Ie("../internals/an-instance"),A=Ie("../internals/classof-raw"),E=Ie("../internals/inspect-source"),T=Ie("../internals/iterate"),C=Ie("../internals/check-correctness-of-iteration"),R=Ie("../internals/species-constructor"),P=Ie("../internals/task").set,N=Ie("../internals/microtask"),k=Ie("../internals/promise-resolve"),I=Ie("../internals/host-report-errors"),B=Ie("../internals/new-promise-capability"),Y=Ie("../internals/perform"),W=Ie("../internals/internal-state"),H=Ie("../internals/is-forced"),We=Ie("../internals/well-known-symbol"),X=Ie("../internals/engine-v8-version"),Z=We("species"),q="Promise",ee=W.get,L=W.set,O=W.getterFor(q),U=c,V=i.TypeError,J=i.document,le=i.process,ce=o("fetch"),ue=B.f,re=ue,de=A(le)=="process",ve=!!(J&&J.createEvent&&i.dispatchEvent),ie="unhandledrejection",_e="rejectionhandled",Se=1,Te=2,we=1,De=2,Ie=H(q,function(){var oe,ae;return E(U)===String(U)&&(X===66||!de&&typeof PromiseRejectionEvent!="function")?!0:!(!m||U.prototype.finally)||!(51<=X&&/native code/.test(U))&&(ae=function(K){K(function(){},function(){})},((oe=U.resolve(1)).constructor={})[Z]=ae,!(oe.then(function(){})instanceof ae))}),We=Ie||!C(function(oe){U.all(oe).catch(function(){})}),$=function(oe){var ae;return!(!b(oe)||typeof(ae=oe.then)!="function")&&ae},se=function(oe,ae,K){var Q;ae.notified||(ae.notified=!0,Q=ae.reactions,N(function(){for(var G,te,ge=ae.value,Ee=ae.state==Se,Le=0;Q.length>Le;){var Ye,ye,je,Ue=Q[Le++],$e=Ee?Ue.ok:Ue.fail,rt=Ue.resolve,nt=Ue.reject,lt=Ue.domain;try{$e?(Ee||(ae.rejection===De&&function(at,Lt){P.call(i,function(){de?le.emit("rejectionHandled",at):Ae(_e,at,Lt.value)})}(oe,ae),ae.rejection=we),$e===!0?Ye=ge:(lt&&lt.enter(),Ye=$e(ge),lt&&(lt.exit(),je=!0)),Ye===Ue.promise?nt(V("Promise-chain cycle")):(ye=$(Ye))?ye.call(Ye,rt,nt):rt(Ye)):nt(ge)}catch(at){lt&&!je&&lt.exit(),nt(at)}}ae.reactions=[],ae.notified=!1,K&&!ae.rejection&&(G=oe,te=ae,P.call(i,function(){var at=te.value,Lt=Ne(te);if(Lt&&(Lt=Y(function(){de?le.emit("unhandledRejection",at,G):Ae(ie,G,at)}),te.rejection=de||Ne(te)?De:we,Lt.error))throw Lt.value}))}))},Ae=function(oe,ae,K){var Q;ve?((Q=J.createEvent("Event")).promise=ae,Q.reason=K,Q.initEvent(oe,!1,!0),i.dispatchEvent(Q)):Q={promise:ae,reason:K},(ae=i["on"+oe])?ae(Q):oe===ie&&I("Unhandled promise rejection",K)},Ne=function(oe){return oe.rejection!==we&&!oe.parent},ze=function(oe,ae,K,Q){return function(G){oe(ae,K,G,Q)}},Ve=function(oe,ae,K,Q){ae.done||(ae.done=!0,(ae=Q||ae).value=K,ae.state=Te,se(oe,ae,!0))},xe=function(oe,ae,K,Q){if(!ae.done){ae.done=!0,Q&&(ae=Q);try{if(oe===K)throw V("Promise can't be resolved itself");var G=$(K);G?N(function(){var te={done:!1};try{G.call(K,ze(xe,oe,te,ae),ze(Ve,oe,te,ae))}catch(ge){Ve(oe,te,ge,ae)}}):(ae.value=K,ae.state=Se,se(oe,ae,!1))}catch(te){Ve(oe,{done:!1},te,ae)}}};Ie&&(U=function(oe){x(this,U,q),_(oe),a.call(this);var ae=ee(this);try{oe(ze(xe,this,ae),ze(Ve,this,ae))}catch(K){Ve(this,ae,K)}},(a=function(oe){L(this,{type:q,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(U.prototype,{then:function(oe,ae){var K=O(this),Q=ue(R(this,U));return Q.ok=typeof oe!="function"||oe,Q.fail=typeof ae=="function"&&ae,Q.domain=de?le.domain:void 0,K.parent=!0,K.reactions.push(Q),K.state!=0&&se(this,K,!1),Q.promise},catch:function(oe){return this.then(void 0,oe)}}),s=function(){var oe=new a,ae=ee(oe);this.promise=oe,this.resolve=ze(xe,oe,ae),this.reject=ze(Ve,oe,ae)},B.f=ue=function(oe){return oe===U||oe===n?new s:re(oe)},m||typeof c!="function"||(l=c.prototype.then,u(c.prototype,"then",function(oe,ae){var K=this;return new U(function(Q,G){l.call(K,Q,G)}).then(oe,ae)},{unsafe:!0}),typeof ce=="function"&&h({global:!0,enumerable:!0,forced:!0},{fetch:function(oe){return k(U,ce.apply(i,arguments))}}))),h({global:!0,wrap:!0,forced:Ie},{Promise:U}),g(U,q,!1,!0),v(q),n=o(q),h({target:q,stat:!0,forced:Ie},{reject:function(oe){var ae=ue(this);return ae.reject.call(void 0,oe),ae.promise}}),h({target:q,stat:!0,forced:m||Ie},{resolve:function(oe){return k(m&&this===n?U:this,oe)}}),h({target:q,stat:!0,forced:We},{all:function(oe){var ae=this,K=ue(ae),Q=K.resolve,G=K.reject,te=Y(function(){var ge=_(ae.resolve),Ee=[],Le=0,Ye=1;T(oe,function(ye){var je=Le++,Ue=!1;Ee.push(void 0),Ye++,ge.call(ae,ye).then(function($e){Ue||(Ue=!0,Ee[je]=$e,--Ye||Q(Ee))},G)}),--Ye||Q(Ee)});return te.error&&G(te.value),K.promise},race:function(oe){var ae=this,K=ue(ae),Q=K.reject,G=Y(function(){var te=_(ae.resolve);T(oe,function(ge){te.call(ae,ge).then(K.resolve,Q)})});return G.error&&Q(G.value),K.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(i,d,f){var a=i("../internals/export"),p=i("../internals/get-built-in"),s=i("../internals/a-function"),n=i("../internals/an-object"),l=i("../internals/is-object"),h=i("../internals/object-create"),m=i("../internals/function-bind"),i=i("../internals/fails"),o=p("Reflect","construct"),c=i(function(){function g(){}return!(o(function(){},[],g)instanceof g)}),u=!i(function(){o(function(){})}),p=c||u;a({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(g,v){s(g),n(v);var b=arguments.length<3?g:s(arguments[2]);if(u&&!c)return o(g,v,b);if(g==b){switch(v.length){case 0:return new g;case 1:return new g(v[0]);case 2:return new g(v[0],v[1]);case 3:return new g(v[0],v[1],v[2]);case 4:return new g(v[0],v[1],v[2],v[3])}var _=[null];return _.push.apply(_,v),new(m.apply(g,_))}return _=b.prototype,b=h(l(_)?_:Object.prototype),_=Function.apply.call(g,b,v),l(_)?_:b}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(e,d,f){var a=e("../internals/descriptors"),s=e("../internals/global"),n=e("../internals/is-forced"),l=e("../internals/inherit-if-required"),h=e("../internals/object-define-property").f,m=e("../internals/object-get-own-property-names").f,i=e("../internals/is-regexp"),o=e("../internals/regexp-flags"),c=e("../internals/regexp-sticky-helpers"),u=e("../internals/redefine"),p=e("../internals/fails"),g=e("../internals/internal-state").set,v=e("../internals/set-species"),b=e("../internals/well-known-symbol")("match"),_=s.RegExp,x=_.prototype,A=/a/g,E=/a/g,T=new _(A)!==A,C=c.UNSUPPORTED_Y;if(a&&n("RegExp",!T||C||p(function(){return E[b]=!1,_(A)!=A||_(E)==E||_(A,"i")!="/a/i"}))){for(var R=function(k,I){var B,Y=this instanceof R,W=i(k),H=I===void 0;return!Y&&W&&k.constructor===R&&H?k:(T?W&&!H&&(k=k.source):k instanceof R&&(H&&(I=o.call(k)),k=k.source),C&&(B=!!I&&-1<I.indexOf("y"))&&(I=I.replace(/y/g,"")),W=l(T?new _(k,I):_(k,I),Y?this:x,R),C&&B&&g(W,{sticky:B}),W)},P=m(_),N=0;P.length>N;)(function(k){k in R||h(R,k,{configurable:!0,get:function(){return _[k]},set:function(I){_[k]=I}})})(P[N++]);(x.constructor=R).prototype=x,u(s,"RegExp",R)}v("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(s,d,f){var a=s("../internals/export"),s=s("../internals/regexp-exec");a({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(l,d,f){var a=l("../internals/redefine"),s=l("../internals/an-object"),i=l("../internals/fails"),n=l("../internals/regexp-flags"),l="toString",h=RegExp.prototype,m=h[l],i=i(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),o=m.name!=l;(i||o)&&a(RegExp.prototype,l,function(){var c=s(this),u=String(c.source),p=c.flags;return"/"+u+"/"+String(p===void 0&&c instanceof RegExp&&!("flags"in h)?n.call(c):p)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(s,d,f){var a=s("../internals/collection"),s=s("../internals/collection-strong");d.exports=a("Set",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},s)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(m,d,f){var a=m("../internals/export"),s=m("../internals/object-get-own-property-descriptor").f,n=m("../internals/to-length"),l=m("../internals/not-a-regexp"),h=m("../internals/require-object-coercible"),c=m("../internals/correct-is-regexp-logic"),m=m("../internals/is-pure"),i="".endsWith,o=Math.min,c=c("endsWith");a({target:"String",proto:!0,forced:!!(m||c||!(a=s(String.prototype,"endsWith"))||a.writable)&&!c},{endsWith:function(u){var p=String(h(this)),g=(l(u),1<arguments.length?arguments[1]:void 0),v=n(p.length),g=g===void 0?v:o(n(g),v),v=String(u);return i?i.call(p,v,g):p.slice(g-v.length,g)===v}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/not-a-regexp"),n=e("../internals/require-object-coercible");a({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(l){return!!~String(n(this)).indexOf(s(l),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(n,d,f){var a=n("../internals/string-multibyte").charAt,s=n("../internals/internal-state"),n=n("../internals/define-iterator"),l="String Iterator",h=s.set,m=s.getterFor(l);n(String,"String",function(i){h(this,{type:l,string:String(i),index:0})},function(){var i=m(this),o=i.string,c=i.index;return c>=o.length?{value:void 0,done:!0}:(o=a(o,c),i.index+=o.length,{value:o,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(e,d,f){var a=e("../internals/fix-regexp-well-known-symbol-logic"),s=e("../internals/an-object"),n=e("../internals/to-length"),l=e("../internals/require-object-coercible"),h=e("../internals/advance-string-index"),m=e("../internals/regexp-exec-abstract");a("match",1,function(i,o,c){return[function(u){var p=l(this),g=u==null?void 0:u[i];return g!==void 0?g.call(u,p):new RegExp(u)[i](String(p))},function(u){var p=c(o,u,this);if(p.done)return p.value;var g=s(u),v=String(this);if(!g.global)return m(g,v);for(var b=g.unicode,_=[],x=g.lastIndex=0;(A=m(g,v))!==null;){var A=String(A[0]);(_[x]=A)===""&&(g.lastIndex=h(v,n(g.lastIndex),b)),x++}return x===0?null:_}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(e,d,f){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(e,d,f){var a=e("../internals/fix-regexp-well-known-symbol-logic"),s=e("../internals/an-object"),n=e("../internals/to-object"),l=e("../internals/to-length"),h=e("../internals/to-integer"),m=e("../internals/require-object-coercible"),i=e("../internals/advance-string-index"),o=e("../internals/regexp-exec-abstract"),c=Math.max,u=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;a("replace",2,function(b,_,x,A){var E=A.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=A.REPLACE_KEEPS_$0,C=E?"$":"$0";return[function(R,P){var N=m(this),k=R==null?void 0:R[b];return k!==void 0?k.call(R,N,P):_.call(String(N),R,P)},function(R,P){if(!E&&T||typeof P=="string"&&P.indexOf(C)===-1){var N=x(_,R,this,P);if(N.done)return N.value}for(var k,I=s(R),B=String(this),Y=typeof P=="function",W=(Y||(P=String(P)),I.global),H=(W&&(k=I.unicode,I.lastIndex=0),[]);(L=o(I,B))!==null&&(H.push(L),W);)String(L[0])===""&&(I.lastIndex=i(B,l(I.lastIndex),k));for(var X,Z="",q=0,ee=0;ee<H.length;ee++){for(var L=H[ee],O=String(L[0]),U=c(u(h(L.index),B.length),0),V=[],J=1;J<L.length;J++)V.push((X=L[J])===void 0?X:String(X));var le=L.groups,ce=Y?(ce=[O].concat(V,U,B),le!==void 0&&ce.push(le),String(P.apply(void 0,ce))):function(ue,re,de,ve,ie,_e){var Se=de+ue.length,Te=ve.length,we=v;return ie!==void 0&&(ie=n(ie),we=g),_.call(_e,we,function(De,Ie){var We;switch(Ie.charAt(0)){case"$":return"$";case"&":return ue;case"`":return re.slice(0,de);case"'":return re.slice(Se);case"<":We=ie[Ie.slice(1,-1)];break;default:var $,se=+Ie;if(se==0)return De;if(Te<se)return($=p(se/10))!==0&&$<=Te?ve[$-1]===void 0?Ie.charAt(1):ve[$-1]+Ie.charAt(1):De;We=ve[se-1]}return We===void 0?"":We})}(O,B,U,V,le,P);q<=U&&(Z+=B.slice(q,U)+ce,q=U+O.length)}return Z+B.slice(q)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(e,d,f){var a=e("../internals/fix-regexp-well-known-symbol-logic"),s=e("../internals/an-object"),n=e("../internals/require-object-coercible"),l=e("../internals/same-value"),h=e("../internals/regexp-exec-abstract");a("search",1,function(m,i,o){return[function(c){var u=n(this),p=c==null?void 0:c[m];return p!==void 0?p.call(c,u):new RegExp(c)[m](String(u))},function(c){var u,p=o(i,c,this);return p.done?p.value:(p=s(c),c=String(this),u=p.lastIndex,l(u,0)||(p.lastIndex=0),c=h(p,c),l(p.lastIndex,u)||(p.lastIndex=u),c===null?-1:c.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(u,d,f){var a=u("../internals/fix-regexp-well-known-symbol-logic"),s=u("../internals/is-regexp"),n=u("../internals/an-object"),l=u("../internals/require-object-coercible"),h=u("../internals/species-constructor"),m=u("../internals/advance-string-index"),i=u("../internals/to-length"),o=u("../internals/regexp-exec-abstract"),c=u("../internals/regexp-exec"),u=u("../internals/fails"),p=[].push,g=Math.min,v=4294967295,b=!u(function(){return!RegExp(v,"y")});a("split",2,function(_,x,A){var E="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,C){var R=String(l(this)),P=C===void 0?v:C>>>0;if(P==0)return[];if(T===void 0)return[R];if(!s(T))return x.call(R,T,P);for(var N,k,I,B=[],C=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),Y=0,W=new RegExp(T.source,C+"g");(N=c.call(W,R))&&!(Y<(k=W.lastIndex)&&(B.push(R.slice(Y,N.index)),1<N.length&&N.index<R.length&&p.apply(B,N.slice(1)),I=N[0].length,Y=k,B.length>=P));)W.lastIndex===N.index&&W.lastIndex++;return Y===R.length?!I&&W.test("")||B.push(""):B.push(R.slice(Y)),B.length>P?B.slice(0,P):B}:"0".split(void 0,0).length?function(T,C){return T===void 0&&C===0?[]:x.call(this,T,C)}:x;return[function(T,C){var R=l(this),P=T==null?void 0:T[_];return P!==void 0?P.call(T,R,C):E.call(String(R),T,C)},function(N,C){var R=A(E,N,this,C,E!==x);if(R.done)return R.value;var R=n(N),P=String(this),N=h(R,RegExp),k=R.unicode,I=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(b?"y":"g"),B=new N(b?R:"^(?:"+R.source+")",I),Y=C===void 0?v:C>>>0;if(Y==0)return[];if(P.length===0)return o(B,P)===null?[P]:[];for(var W=0,H=0,X=[];H<P.length;){B.lastIndex=b?H:0;var Z,q=o(B,b?P:P.slice(H));if(q===null||(Z=g(i(B.lastIndex+(b?0:H)),P.length))===W)H=m(P,H,k);else{if(X.push(P.slice(W,H)),X.length===Y)return X;for(var ee=1;ee<=q.length-1;ee++)if(X.push(q[ee]),X.length===Y)return X;H=W=Z}}return X.push(P.slice(W)),X}]},!b)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/create-html");a({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return s(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(e,d,f){var a=e("../internals/export"),s=e("../internals/string-trim").trim;a({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return s(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(g,d,f){var a,s,n,l,h,m=g("../internals/export"),i=g("../internals/descriptors"),o=g("../internals/global"),c=g("../internals/has"),u=g("../internals/is-object"),p=g("../internals/object-define-property").f,g=g("../internals/copy-constructor-properties"),v=o.Symbol;!i||typeof v!="function"||"description"in v.prototype&&v().description===void 0||(a={},g(s=function(){var b=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),_=this instanceof s?new v(b):b===void 0?v():v(b);return b===""&&(a[_]=!0),_},v),(o=s.prototype=v.prototype).constructor=s,n=o.toString,l=String(v("test"))=="Symbol(test)",h=/^Symbol\((.*)\)[^)]+$/,p(o,"description",{configurable:!0,get:function(){var b=u(this)?this.valueOf():this,_=n.call(b);return c(a,b)?"":(b=l?_.slice(7,-1):_.replace(h,"$1"))===""?void 0:b}}),m({global:!0,forced:!0},{Symbol:s}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(e,d,f){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(re,d,f){function a(G,te){var ge=We[G]=R(_e[ue]);return de(ge,{type:ce,tag:G,description:te}),c||(ge.description=te),ge}function s(G,Ee){x(G);var ge=E(Ee),Ee=P(ge).concat(Q(ge));return J(Ee,function(Le){c&&!K.call(ge,Le)||ae(G,Le,ge[Le])}),G}function n(Ee,Le){var ge,Ee=E(Ee),Le=T(Le,!0);if(Ee!==ie||!v(We,Le)||v($,Le))return!(ge=Te(Ee,Le))||!v(We,Le)||v(Ee,le)&&Ee[le][Le]||(ge.enumerable=!0),ge}function l(te){var te=De(E(te)),ge=[];return J(te,function(Ee){v(We,Ee)||v(q,Ee)||ge.push(Ee)}),ge}var h=re("../internals/export"),m=re("../internals/global"),i=re("../internals/get-built-in"),o=re("../internals/is-pure"),c=re("../internals/descriptors"),u=re("../internals/native-symbol"),p=re("../internals/use-symbol-as-uid"),g=re("../internals/fails"),v=re("../internals/has"),b=re("../internals/is-array"),_=re("../internals/is-object"),x=re("../internals/an-object"),A=re("../internals/to-object"),E=re("../internals/to-indexed-object"),T=re("../internals/to-primitive"),C=re("../internals/create-property-descriptor"),R=re("../internals/object-create"),P=re("../internals/object-keys"),N=re("../internals/object-get-own-property-names"),k=re("../internals/object-get-own-property-names-external"),I=re("../internals/object-get-own-property-symbols"),B=re("../internals/object-get-own-property-descriptor"),Y=re("../internals/object-define-property"),W=re("../internals/object-property-is-enumerable"),H=re("../internals/create-non-enumerable-property"),X=re("../internals/redefine"),Z=re("../internals/shared"),Ne=re("../internals/shared-key"),q=re("../internals/hidden-keys"),ee=re("../internals/uid"),L=re("../internals/well-known-symbol"),O=re("../internals/well-known-symbol-wrapped"),U=re("../internals/define-well-known-symbol"),V=re("../internals/set-to-string-tag"),ze=re("../internals/internal-state"),J=re("../internals/array-iteration").forEach,le=Ne("hidden"),ce="Symbol",ue="prototype",re=L("toPrimitive"),de=ze.set,ve=ze.getterFor(ce),ie=Object[ue],_e=m.Symbol,Se=i("JSON","stringify"),Te=B.f,we=Y.f,De=k.f,Ie=W.f,We=Z("symbols"),$=Z("op-symbols"),se=Z("string-to-symbol-registry"),Ae=Z("symbol-to-string-registry"),Ne=Z("wks"),ze=m.QObject,Ve=!ze||!ze[ue]||!ze[ue].findChild,xe=c&&g(function(){return R(we({},"a",{get:function(){return we(this,"a",{value:7}).a}})).a!=7})?function(G,te,ge){var Ee=Te(ie,te);Ee&&delete ie[te],we(G,te,ge),Ee&&G!==ie&&we(ie,te,Ee)}:we,oe=p?function(G){return typeof G=="symbol"}:function(G){return Object(G)instanceof _e},ae=function(G,te,ge){return G===ie&&ae($,te,ge),x(G),te=T(te,!0),x(ge),(v(We,te)?(ge.enumerable?(v(G,le)&&G[le][te]&&(G[le][te]=!1),ge=R(ge,{enumerable:C(0,!1)})):(v(G,le)||we(G,le,C(1,{})),G[le][te]=!0),xe):we)(G,te,ge)},K=function(te){var te=T(te,!0),ge=Ie.call(this,te);return!(this===ie&&v(We,te)&&!v($,te))&&(!(ge||!v(this,te)||!v(We,te)||v(this,le)&&this[le][te])||ge)},Q=function(ge){var te=ge===ie,ge=De(te?$:E(ge)),Ee=[];return J(ge,function(Le){!v(We,Le)||te&&!v(ie,Le)||Ee.push(We[Le])}),Ee};u||(X((_e=function(){if(this instanceof _e)throw TypeError("Symbol is not a constructor");var G=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,te=ee(G),ge=function(Ee){this===ie&&ge.call($,Ee),v(this,le)&&v(this[le],te)&&(this[le][te]=!1),xe(this,te,C(1,Ee))};return c&&Ve&&xe(ie,te,{configurable:!0,set:ge}),a(te,G)})[ue],"toString",function(){return ve(this).tag}),X(_e,"withoutSetter",function(G){return a(ee(G),G)}),W.f=K,Y.f=ae,B.f=n,N.f=k.f=l,I.f=Q,O.f=function(G){return a(L(G),G)},c&&(we(_e[ue],"description",{configurable:!0,get:function(){return ve(this).description}}),o||X(ie,"propertyIsEnumerable",K,{unsafe:!0}))),h({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:_e}),J(P(Ne),function(G){U(G)}),h({target:ce,stat:!0,forced:!u},{for:function(ge){var te,ge=String(ge);return v(se,ge)?se[ge]:(te=_e(ge),se[ge]=te,Ae[te]=ge,te)},keyFor:function(G){if(!oe(G))throw TypeError(G+" is not a symbol");if(v(Ae,G))return Ae[G]},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),h({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(G,te){return te===void 0?R(G):s(R(G),te)},defineProperty:ae,defineProperties:s,getOwnPropertyDescriptor:n}),h({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:l,getOwnPropertySymbols:Q}),h({target:"Object",stat:!0,forced:g(function(){I.f(1)})},{getOwnPropertySymbols:function(G){return I.f(A(G))}}),Se&&h({target:"JSON",stat:!0,forced:!u||g(function(){var G=_e();return Se([G])!="[null]"||Se({a:G})!="{}"||Se(Object(G))!="{}"})},{stringify:function(G,te,ge){for(var Ee,Le=[G],Ye=1;Ye<arguments.length;)Le.push(arguments[Ye++]);if((_(Ee=te)||G!==void 0)&&!oe(G))return b(te)||(te=function(ye,je){if(typeof Ee=="function"&&(je=Ee.call(this,ye,je)),!oe(je))return je}),Le[1]=te,Se.apply(null,Le)}}),_e[ue][re]||H(_e[ue],re,_e[ue].valueOf),V(_e,ce),q[le]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-copy-within"),n=a.aTypedArray;(0,a.exportTypedArrayMethod)("copyWithin",function(l,h){return s.call(n(this),l,h,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").every,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("every",function(l){return s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-fill"),n=a.aTypedArray;(0,a.exportTypedArrayMethod)("fill",function(l){return s.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").filter,n=e("../internals/species-constructor"),l=a.aTypedArray,h=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("filter",function(m){for(var i=s(l(this),m,1<arguments.length?arguments[1]:void 0),m=n(this,this.constructor),o=0,c=i.length,u=new(h(m))(c);o<c;)u[o]=i[o++];return u})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").findIndex,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("findIndex",function(l){return s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").find,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("find",function(l){return s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,d,f){e("../internals/typed-array-constructor")("Float32",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],204:[function(e,d,f){e("../internals/typed-array-constructor")("Float64",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],205:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").forEach,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("forEach",function(l){s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-includes").includes,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("includes",function(l){return s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-includes").indexOf,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("indexOf",function(l){return s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(e,d,f){e("../internals/typed-array-constructor")("Int16",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],209:[function(e,d,f){e("../internals/typed-array-constructor")("Int32",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],210:[function(s,d,f){function a(){return n.call(m(this))}var c=s("../internals/global"),o=s("../internals/array-buffer-view-core"),i=s("../modules/es.array.iterator"),s=s("../internals/well-known-symbol")("iterator"),c=c.Uint8Array,n=i.values,l=i.keys,h=i.entries,m=o.aTypedArray,i=o.exportTypedArrayMethod,o=c&&c.prototype[s],c=!!o&&(o.name=="values"||o.name==null);i("entries",function(){return h.call(m(this))}),i("keys",function(){return l.call(m(this))}),i("values",a,!c),i(s,a,!c)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(s,d,f){var s=s("../internals/array-buffer-view-core"),a=s.aTypedArray,s=s.exportTypedArrayMethod,n=[].join;s("join",function(l){return n.apply(a(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-last-index-of"),n=a.aTypedArray;(0,a.exportTypedArrayMethod)("lastIndexOf",function(l){return s.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").map,n=e("../internals/species-constructor"),l=a.aTypedArray,h=a.aTypedArrayConstructor;(0,a.exportTypedArrayMethod)("map",function(m){return s(l(this),m,1<arguments.length?arguments[1]:void 0,function(i,o){return new(h(n(i,i.constructor)))(o)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-reduce").right,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduceRight",function(l){return s(n(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-reduce").left,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("reduce",function(l){return s(n(this),l,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(s,d,f){var s=s("../internals/array-buffer-view-core"),a=s.aTypedArray,s=s.exportTypedArrayMethod,n=Math.floor;s("reverse",function(){for(var l,h=a(this).length,m=n(h/2),i=0;i<m;)l=this[i],this[i++]=this[--h],this[h]=l;return this})},{"../internals/array-buffer-view-core":12}],217:[function(h,d,f){var a=h("../internals/array-buffer-view-core"),s=h("../internals/to-length"),n=h("../internals/to-offset"),l=h("../internals/to-object"),h=h("../internals/fails"),m=a.aTypedArray;(0,a.exportTypedArrayMethod)("set",function(i){m(this);var o=n(1<arguments.length?arguments[1]:void 0,1),c=this.length,u=l(i),p=s(u.length),g=0;if(c<p+o)throw RangeError("Wrong length");for(;g<p;)this[o+g]=u[g++]},h(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(s,d,f){var h=s("../internals/array-buffer-view-core"),a=s("../internals/species-constructor"),s=s("../internals/fails"),n=h.aTypedArray,l=h.aTypedArrayConstructor,h=h.exportTypedArrayMethod,m=[].slice;h("slice",function(i,o){for(var c=m.call(n(this),i,o),i=a(this,this.constructor),u=0,p=c.length,g=new(l(i))(p);u<p;)g[u]=c[u++];return g},s(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/array-iteration").some,n=a.aTypedArray;(0,a.exportTypedArrayMethod)("some",function(l){return s(n(this),l,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(s,d,f){var s=s("../internals/array-buffer-view-core"),a=s.aTypedArray,s=s.exportTypedArrayMethod,n=[].sort;s("sort",function(l){return n.call(a(this),l)})},{"../internals/array-buffer-view-core":12}],221:[function(e,d,f){var a=e("../internals/array-buffer-view-core"),s=e("../internals/to-length"),n=e("../internals/to-absolute-index"),l=e("../internals/species-constructor"),h=a.aTypedArray;(0,a.exportTypedArrayMethod)("subarray",function(u,i){var o=h(this),c=o.length,u=n(u,c);return new(l(o,o.constructor))(o.buffer,o.byteOffset+u*o.BYTES_PER_ELEMENT,s((i===void 0?c:n(i,c))-u))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(s,d,f){var h=s("../internals/global"),a=s("../internals/array-buffer-view-core"),s=s("../internals/fails"),n=h.Int8Array,l=a.aTypedArray,h=a.exportTypedArrayMethod,m=[].toLocaleString,i=[].slice,o=!!n&&s(function(){m.call(new n(1))});h("toLocaleString",function(){return m.apply(o?i.call(l(this)):l(this),arguments)},s(function(){return[1,2].toLocaleString()!=new n([1,2]).toLocaleString()})||!s(function(){n.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(s,d,f){var a=s("../internals/array-buffer-view-core").exportTypedArrayMethod,h=s("../internals/fails"),s=s("../internals/global").Uint8Array,s=s&&s.prototype||{},n=[].toString,l=[].join,h=(h(function(){n.call({})})&&(n=function(){return l.call(this)}),s.toString!=n);a("toString",n,h)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(e,d,f){e("../internals/typed-array-constructor")("Uint16",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],225:[function(e,d,f){e("../internals/typed-array-constructor")("Uint32",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],226:[function(e,d,f){e("../internals/typed-array-constructor")("Uint8",function(a){return function(s,n,l){return a(this,s,n,l)}})},{"../internals/typed-array-constructor":140}],227:[function(e,d,f){e("../internals/typed-array-constructor")("Uint8",function(a){return function(s,n,l){return a(this,s,n,l)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(v,x,f){function a(A){return function(){return A(this,arguments.length?arguments[0]:void 0)}}var s,n,l,h,m,b=v("../internals/global"),i=v("../internals/redefine-all"),o=v("../internals/internal-metadata"),c=v("../internals/collection"),u=v("../internals/collection-weak"),p=v("../internals/is-object"),g=v("../internals/internal-state").enforce,v=v("../internals/native-weak-map"),b=!b.ActiveXObject&&"ActiveXObject"in b,_=Object.isExtensible,x=x.exports=c("WeakMap",a,u);v&&b&&(s=u.getConstructor(a,"WeakMap",!0),o.REQUIRED=!0,c=x.prototype,n=c.delete,l=c.has,h=c.get,m=c.set,i(c,{delete:function(A){var E;return p(A)&&!_(A)?((E=g(this)).frozen||(E.frozen=new s),n.call(this,A)||E.frozen.delete(A)):n.call(this,A)},has:function(A){var E;return p(A)&&!_(A)?((E=g(this)).frozen||(E.frozen=new s),l.call(this,A)||E.frozen.has(A)):l.call(this,A)},get:function(A){var E;return!p(A)||_(A)||((E=g(this)).frozen||(E.frozen=new s),l.call(this,A))?h.call(this,A):E.frozen.get(A)},set:function(A,E){var T;return!p(A)||_(A)||((T=g(this)).frozen||(T.frozen=new s),l.call(this,A))?m.call(this,A,E):T.frozen.set(A,E),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(e,d,f){var a,s=e("../internals/global"),n=e("../internals/dom-iterables"),l=e("../internals/array-for-each"),h=e("../internals/create-non-enumerable-property");for(a in n){var m=s[a],m=m&&m.prototype;if(m&&m.forEach!==l)try{h(m,"forEach",l)}catch{m.forEach=l}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(m,d,f){var a,s=m("../internals/global"),n=m("../internals/dom-iterables"),l=m("../modules/es.array.iterator"),h=m("../internals/create-non-enumerable-property"),m=m("../internals/well-known-symbol"),i=m("iterator"),o=m("toStringTag"),c=l.values;for(a in n){var u=s[a],p=u&&u.prototype;if(p){if(p[i]!==c)try{h(p,i,c)}catch{p[i]=c}if(p[o]||h(p,o,a),n[a]){for(var g in l)if(p[g]!==l[g])try{h(p,g,l[g])}catch{p[g]=l[g]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(le,d,f){le("../modules/es.array.iterator");function a(ce){try{return decodeURIComponent(ce)}catch{return ce}}function s(ce){return U[ce]}function n(ce){return encodeURIComponent(ce).replace(O,s)}function l(ce){this.entries.length=0,V(this.entries,ce)}function h(ce,ue){if(ce<ue)throw TypeError("Not enough arguments")}function m(){b(this,m,Y);var ce,ue,re,de,ve,ie,_e,Se,Te=0<arguments.length?arguments[0]:void 0,we=[];if(H(this,{type:Y,entries:we,updateURL:function(){},updateSearchParams:l}),Te!==void 0)if(T(Te))if(typeof(ce=N(Te))=="function")for(re=(ue=ce.call(Te)).next;!(de=re.call(ue)).done;){if((ie=(ve=(de=P(E(de.value))).next).call(de)).done||(_e=ve.call(de)).done||!ve.call(de).done)throw TypeError("Expected sequence with length 2");we.push({key:ie.value+"",value:_e.value+""})}else for(Se in Te)_(Te,Se)&&we.push({key:Se,value:Te[Se]+""});else V(we,typeof Te=="string"?Te.charAt(0)==="?"?Te.slice(1):Te:Te+"")}var i=le("../internals/export"),B=le("../internals/get-built-in"),o=le("../internals/native-url"),c=le("../internals/redefine"),u=le("../internals/redefine-all"),p=le("../internals/set-to-string-tag"),g=le("../internals/create-iterator-constructor"),v=le("../internals/internal-state"),b=le("../internals/an-instance"),_=le("../internals/has"),x=le("../internals/function-bind-context"),A=le("../internals/classof"),E=le("../internals/an-object"),T=le("../internals/is-object"),C=le("../internals/object-create"),R=le("../internals/create-property-descriptor"),P=le("../internals/get-iterator"),N=le("../internals/get-iterator-method"),le=le("../internals/well-known-symbol"),k=B("fetch"),I=B("Headers"),B=le("iterator"),Y="URLSearchParams",W=Y+"Iterator",H=v.set,X=v.getterFor(Y),Z=v.getterFor(W),q=/\+/g,ee=Array(4),L=function(ce){var ue,re=ce.replace(q," "),de=4;try{return decodeURIComponent(re)}catch{for(;de;)re=re.replace((ue=de--,ee[ue-1]||(ee[ue-1]=RegExp("((?:%[\\da-f]{2}){"+ue+"})","gi"))),a);return re}},O=/[!'()~]|%20/g,U={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},V=function(ce,ue){if(ue)for(var re,de=ue.split("&"),ve=0;ve<de.length;)(re=de[ve++]).length&&(re=re.split("="),ce.push({key:L(re.shift()),value:L(re.join("="))}))},J=g(function(ce,ue){H(this,{type:W,iterator:P(X(ce).entries),kind:ue})},"Iterator",function(){var ue=Z(this),ce=ue.kind,ue=ue.iterator.next(),re=ue.value;return ue.done||(ue.value=ce==="keys"?re.key:ce==="values"?re.value:[re.key,re.value]),ue}),le=m.prototype;u(le,{append:function(ce,ue){h(arguments.length,2);var re=X(this);re.entries.push({key:ce+"",value:ue+""}),re.updateURL()},delete:function(ce){h(arguments.length,1);for(var ue=X(this),re=ue.entries,de=ce+"",ve=0;ve<re.length;)re[ve].key===de?re.splice(ve,1):ve++;ue.updateURL()},get:function(ce){h(arguments.length,1);for(var ue=X(this).entries,re=ce+"",de=0;de<ue.length;de++)if(ue[de].key===re)return ue[de].value;return null},getAll:function(ce){h(arguments.length,1);for(var ue=X(this).entries,re=ce+"",de=[],ve=0;ve<ue.length;ve++)ue[ve].key===re&&de.push(ue[ve].value);return de},has:function(ce){h(arguments.length,1);for(var ue=X(this).entries,re=ce+"",de=0;de<ue.length;)if(ue[de++].key===re)return!0;return!1},set:function(ce,ue){h(arguments.length,1);for(var re,de=X(this),ve=de.entries,ie=!1,_e=ce+"",Se=ue+"",Te=0;Te<ve.length;Te++)(re=ve[Te]).key===_e&&(ie?ve.splice(Te--,1):(ie=!0,re.value=Se));ie||ve.push({key:_e,value:Se}),de.updateURL()},sort:function(){for(var ce,ue,re=X(this),de=re.entries,ve=de.slice(),ie=de.length=0;ie<ve.length;ie++){for(ce=ve[ie],ue=0;ue<ie;ue++)if(de[ue].key>ce.key){de.splice(ue,0,ce);break}ue===ie&&de.push(ce)}re.updateURL()},forEach:function(ce){for(var ue,re=X(this).entries,de=x(ce,1<arguments.length?arguments[1]:void 0,3),ve=0;ve<re.length;)de((ue=re[ve++]).value,ue.key,this)},keys:function(){return new J(this,"keys")},values:function(){return new J(this,"values")},entries:function(){return new J(this,"entries")}},{enumerable:!0}),c(le,B,le.entries),c(le,"toString",function(){for(var ce,ue=X(this).entries,re=[],de=0;de<ue.length;)ce=ue[de++],re.push(n(ce.key)+"="+n(ce.value));return re.join("&")},{enumerable:!0}),p(m,Y),i({global:!0,forced:!o},{URLSearchParams:m}),o||typeof k!="function"||typeof I!="function"||i({global:!0,enumerable:!0,forced:!0},{fetch:function(ve){var ue,re,de,ve=[ve];return 1<arguments.length&&(T(ue=arguments[1])&&(re=ue.body,A(re)===Y&&((de=ue.headers?new I(ue.headers):new I).has("content-type")||de.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ue=C(ue,{body:R(0,String(re)),headers:R(0,de)}))),ve.push(ue)),k.apply(this,ve)}}),d.exports={URLSearchParams:m,getState:X}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(P,d,f){P("../modules/es.string.iterator");function a(me){var Xe,tt,He,ft;if(typeof me=="number"){for(Xe=[],tt=0;tt<4;tt++)Xe.unshift(me%256),me=W(me/256);return Xe.join(".")}if(typeof me!="object")return me;for(Xe="",He=_e(me),tt=0;tt<8;tt++)ft&&me[tt]===0||(ft=ft&&!1,He===tt?(Xe+=tt?":":"::",ft=!0):(Xe+=me[tt].toString(16),tt<7&&(Xe+=":")));return"["+Xe+"]"}function s(me){return!me.host||me.cannotBeABaseURL||me.scheme=="file"}function n(me,Xe,tt,He){var ft,Ze,wt,it=tt||oe,mt=0,et="",Xt=!1,Et=!1,Ot=!1;for(tt||(me.scheme="",me.username="",me.password="",me.host=null,me.port=null,me.path=[],me.query=null,me.fragment=null,me.cannotBeABaseURL=!1,Xe=Xe.replace(de,"")),Xe=Xe.replace(ve,""),ft=A(Xe);mt<=ft.length;){switch(Ze=ft[mt],it){case oe:if(!Ze||!L.test(Ze)){if(tt)return Z;it=K;continue}et+=Ze.toLowerCase(),it=ae;break;case ae:if(Ze&&(O.test(Ze)||Ze=="+"||Ze=="-"||Ze=="."))et+=Ze.toLowerCase();else{if(Ze!=":"){if(tt)return Z;et="",it=K,mt=0;continue}if(tt&&($(me)!=_(We,et)||et=="file"&&(se(me)||me.port!==null)||me.scheme=="file"&&!me.host))return;if(me.scheme=et,tt)return void($(me)&&We[me.scheme]==me.port&&(me.port=null));et="",me.scheme=="file"?it=$e:$(me)&&He&&He.scheme==me.scheme?it=Q:$(me)?it=Ee:ft[mt+1]=="/"?(it=G,mt++):(me.cannotBeABaseURL=!0,me.path.push(""),it=Lt)}break;case K:if(!He||He.cannotBeABaseURL&&Ze!="#")return Z;if(He.cannotBeABaseURL&&Ze=="#"){me.scheme=He.scheme,me.path=He.path.slice(),me.query=He.query,me.fragment="",me.cannotBeABaseURL=!0,it=It;break}it=He.scheme=="file"?$e:te;continue;case Q:if(Ze!="/"||ft[mt+1]!="/"){it=te;continue}it=Le,mt++;break;case G:if(Ze=="/"){it=Ye;break}it=at;continue;case te:if(me.scheme=He.scheme,Ze==m)me.username=He.username,me.password=He.password,me.host=He.host,me.port=He.port,me.path=He.path.slice(),me.query=He.query;else if(Ze=="/"||Ze=="\\"&&$(me))it=ge;else if(Ze=="?")me.username=He.username,me.password=He.password,me.host=He.host,me.port=He.port,me.path=He.path.slice(),me.query="",it=St;else{if(Ze!="#"){me.username=He.username,me.password=He.password,me.host=He.host,me.port=He.port,me.path=He.path.slice(),me.path.pop(),it=at;continue}me.username=He.username,me.password=He.password,me.host=He.host,me.port=He.port,me.path=He.path.slice(),me.query=He.query,me.fragment="",it=It}break;case ge:if(!$(me)||Ze!="/"&&Ze!="\\"){if(Ze!="/"){me.username=He.username,me.password=He.password,me.host=He.host,me.port=He.port,it=at;continue}it=Ye}else it=Le;break;case Ee:if(it=Le,Ze!="/"||et.charAt(mt+1)!="/")continue;mt++;break;case Le:if(Ze=="/"||Ze=="\\")break;it=Ye;continue;case Ye:if(Ze=="@"){Xt&&(et="%40"+et);for(var Xt=!0,nr=A(et),Sr=0;Sr<nr.length;Sr++){var br=nr[Sr];br!=":"||Ot?(br=Ie(br,De),Ot?me.password+=br:me.username+=br):Ot=!0}et=""}else if(Ze==m||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&$(me)){if(Xt&&et=="")return X;mt-=A(et).length+1,et="",it=ye}else et+=Ze;break;case ye:case je:if(tt&&me.scheme=="file"){it=nt;continue}if(Ze!=":"||Et){if(Ze==m||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&$(me)){if($(me)&&et=="")return q;if(tt&&et==""&&(se(me)||me.port!==null))return;if(wt=ie(me,et))return wt;if(et="",it=lt,tt)return;continue}Ze=="["?Et=!0:Ze=="]"&&(Et=!1),et+=Ze}else{if(et=="")return q;if(wt=ie(me,et))return wt;if(et="",it=Ue,tt==je)return}break;case Ue:if(!U.test(Ze)){if(Ze==m||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&$(me)||tt){if(et!=""){var Ht=parseInt(et,10);if(65535<Ht)return ee;me.port=$(me)&&Ht===We[me.scheme]?null:Ht,et=""}if(tt)return;it=lt;continue}return ee}et+=Ze;break;case $e:if(me.scheme="file",Ze=="/"||Ze=="\\")it=rt;else{if(!He||He.scheme!="file"){it=at;continue}if(Ze==m)me.host=He.host,me.path=He.path.slice(),me.query=He.query;else if(Ze=="?")me.host=He.host,me.path=He.path.slice(),me.query="",it=St;else{if(Ze!="#"){Ne(ft.slice(mt).join(""))||(me.host=He.host,me.path=He.path.slice(),ze(me)),it=at;continue}me.host=He.host,me.path=He.path.slice(),me.query=He.query,me.fragment="",it=It}}break;case rt:if(Ze=="/"||Ze=="\\"){it=nt;break}He&&He.scheme=="file"&&!Ne(ft.slice(mt).join(""))&&(Ae(He.path[0],!0)?me.path.push(He.path[0]):me.host=He.host),it=at;continue;case nt:if(Ze==m||Ze=="/"||Ze=="\\"||Ze=="?"||Ze=="#"){if(!tt&&Ae(et))it=at;else{if(et==""){if(me.host="",tt)return}else{if(wt=ie(me,et))return wt;if(me.host=="localhost"&&(me.host=""),tt)return;et=""}it=lt}continue}et+=Ze;break;case lt:if($(me)){if(it=at,Ze!="/"&&Ze!="\\")continue}else if(tt||Ze!="?")if(tt||Ze!="#"){if(Ze!=m&&(it=at,Ze!="/"))continue}else me.fragment="",it=It;else me.query="",it=St;break;case at:if(Ze==m||Ze=="/"||Ze=="\\"&&$(me)||!tt&&(Ze=="?"||Ze=="#")){if(xe(et)?(ze(me),Ze=="/"||Ze=="\\"&&$(me)||me.path.push("")):Ve(et)?Ze=="/"||Ze=="\\"&&$(me)||me.path.push(""):(me.scheme=="file"&&!me.path.length&&Ae(et)&&(me.host&&(me.host=""),et=et.charAt(0)+":"),me.path.push(et)),et="",me.scheme=="file"&&(Ze==m||Ze=="?"||Ze=="#"))for(;1<me.path.length&&me.path[0]==="";)me.path.shift();Ze=="?"?(me.query="",it=St):Ze=="#"&&(me.fragment="",it=It)}else et+=Ie(Ze,we);break;case Lt:Ze=="?"?(me.query="",it=St):Ze=="#"?(me.fragment="",it=It):Ze!=m&&(me.path[0]+=Ie(Ze,Se));break;case St:tt||Ze!="#"?Ze!=m&&(Ze=="'"&&$(me)?me.query+="%27":me.query+=Ze=="#"?"%23":Ie(Ze,Se)):(me.fragment="",it=It);break;case It:Ze!=m&&(me.fragment+=Ie(Ze,Te))}mt++}}function l(Ze){var Xe,tt,He=b(this,l,"URL"),ft=1<arguments.length?arguments[1]:void 0,Ze=String(Ze),wt=B(He,{type:"URL"});if(ft!==void 0){if(ft instanceof l)Xe=Y(ft);else if(tt=n(Xe={},String(ft)))throw TypeError(tt)}if(tt=n(wt,Ze,null,Xe))throw TypeError(tt);var it=wt.searchParams=new k;(ft=I(it)).updateSearchParams(wt.query),ft.updateURL=function(){wt.query=String(it)||null},u||(He.href=Ut.call(He),He.origin=Ct.call(He),He.protocol=cr.call(He),He.username=ir.call(He),He.password=pe.call(He),He.host=Fe.call(He),He.hostname=Ke.call(He),He.port=Be.call(He),He.pathname=Je.call(He),He.search=pt.call(He),He.searchParams=yt.call(He),He.hash=bt.call(He))}function h(me,Xe){return{get:me,set:Xe,configurable:!0,enumerable:!0}}var m,i,o,c=P("../internals/export"),u=P("../internals/descriptors"),p=P("../internals/native-url"),xt=P("../internals/global"),g=P("../internals/object-define-properties"),v=P("../internals/redefine"),b=P("../internals/an-instance"),_=P("../internals/has"),x=P("../internals/object-assign"),A=P("../internals/array-from"),E=P("../internals/string-multibyte").codeAt,T=P("../internals/string-punycode-to-ascii"),C=P("../internals/set-to-string-tag"),R=P("../modules/web.url-search-params"),P=P("../internals/internal-state"),N=xt.URL,k=R.URLSearchParams,I=R.getState,B=P.set,Y=P.getterFor("URL"),W=Math.floor,H=Math.pow,X="Invalid authority",Z="Invalid scheme",q="Invalid host",ee="Invalid port",L=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,U=/\d/,V=/^(0x|0X)/,J=/^[0-7]+$/,le=/^\d+$/,ce=/^[\dA-Fa-f]+$/,ue=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,re=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,de=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ve=/[\u0009\u000A\u000D]/g,ie=function(me,Xe){var tt,He,ft;if(Xe.charAt(0)=="[")return Xe.charAt(Xe.length-1)=="]"&&(tt=function(Ze){var wt=[0,0,0,0,0,0,0,0],it=0,mt=null,et=0,Xt,Et,Ot,nr,Sr,br,Ht,Wt=function(){return Ze.charAt(et)};if(Wt()==":"){if(Ze.charAt(1)!=":")return;et+=2,it++,mt=it}for(;Wt();){if(it==8)return;if(Wt()==":"){if(mt!==null)return;et++,it++,mt=it;continue}for(Xt=Et=0;Et<4&&ce.test(Wt());)Xt=Xt*16+parseInt(Wt(),16),et++,Et++;if(Wt()=="."){if(Et==0||(et-=Et,it>6))return;for(Ot=0;Wt();){if(nr=null,Ot>0)if(Wt()=="."&&Ot<4)et++;else return;if(!U.test(Wt()))return;for(;U.test(Wt());){if(Sr=parseInt(Wt(),10),nr===null)nr=Sr;else{if(nr==0)return;nr=nr*10+Sr}if(nr>255)return;et++}wt[it]=wt[it]*256+nr,Ot++,(Ot==2||Ot==4)&&it++}if(Ot!=4)return;break}else if(Wt()==":"){if(et++,!Wt())return}else if(Wt())return;wt[it++]=Xt}if(mt!==null)for(br=it-mt,it=7;it!=0&&br>0;)Ht=wt[it],wt[it--]=wt[mt+br-1],wt[mt+--br]=Ht;else if(it!=8)return;return wt}(Xe.slice(1,-1)))?void(me.host=tt):q;if($(me))return Xe=T(Xe),ue.test(Xe)||(tt=function(Ze){var wt=Ze.split("."),it,mt,et,Xt,Et,Ot,nr;if(wt.length&&wt[wt.length-1]==""&&wt.pop(),(it=wt.length)>4)return Ze;for(mt=[],et=0;et<it;et++){if(Xt=wt[et],Xt=="")return Ze;if(Et=10,Xt.length>1&&Xt.charAt(0)=="0"&&(Et=V.test(Xt)?16:8,Xt=Xt.slice(Et==8?1:2)),Xt==="")Ot=0;else{if(!(Et==10?le:Et==8?J:ce).test(Xt))return Ze;Ot=parseInt(Xt,Et)}mt.push(Ot)}for(et=0;et<it;et++)if(Ot=mt[et],et==it-1){if(Ot>=H(256,5-it))return null}else if(Ot>255)return null;for(nr=mt.pop(),et=0;et<mt.length;et++)nr+=mt[et]*H(256,3-et);return nr}(Xe))===null?q:void(me.host=tt);if(re.test(Xe))return q;for(tt="",He=A(Xe),ft=0;ft<He.length;ft++)tt+=Ie(He[ft],Se);me.host=tt},_e=function(me){for(var Xe=null,tt=1,He=null,ft=0,Ze=0;Ze<8;Ze++)me[Ze]!==0?(tt<ft&&(Xe=He,tt=ft),He=null,ft=0):(He===null&&(He=Ze),++ft);return tt<ft&&(Xe=He,tt=ft),Xe},Se={},Te=x({},Se,{" ":1,'"':1,"<":1,">":1,"`":1}),we=x({},Te,{"#":1,"?":1,"{":1,"}":1}),De=x({},we,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ie=function(me,Xe){var tt=E(me,0);return 32<tt&&tt<127&&!_(Xe,me)?me:encodeURIComponent(me)},We={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(me){return _(We,me.scheme)},se=function(me){return me.username!=""||me.password!=""},Ae=function(me,Xe){return me.length==2&&L.test(me.charAt(0))&&((me=me.charAt(1))==":"||!Xe&&me=="|")},Ne=function(me){return 1<me.length&&Ae(me.slice(0,2))&&(me.length==2||(me=me.charAt(2))==="/"||me==="\\"||me==="?"||me==="#")},ze=function(me){var Xe=me.path,tt=Xe.length;!tt||me.scheme=="file"&&tt==1&&Ae(Xe[0],!0)||Xe.pop()},Ve=function(me){return me==="."||me.toLowerCase()==="%2e"},xe=function(me){return(me=me.toLowerCase())===".."||me==="%2e."||me===".%2e"||me==="%2e%2e"},oe={},ae={},K={},Q={},G={},te={},ge={},Ee={},Le={},Ye={},ye={},je={},Ue={},$e={},rt={},nt={},lt={},at={},Lt={},St={},It={},xt=l.prototype,Ut=function(){var me=Y(this),Xe=me.scheme,tt=me.username,He=me.password,ft=me.host,Ze=me.port,wt=me.path,it=me.query,mt=me.fragment,et=Xe+":";return ft!==null?(et+="//",se(me)&&(et+=tt+(He?":"+He:"")+"@"),et+=a(ft),Ze!==null&&(et+=":"+Ze)):Xe=="file"&&(et+="//"),et+=me.cannotBeABaseURL?wt[0]:wt.length?"/"+wt.join("/"):"",it!==null&&(et+="?"+it),mt!==null&&(et+="#"+mt),et},Ct=function(){var me=Y(this),Xe=me.scheme,tt=me.port;if(Xe=="blob")try{return new URL(Xe.path[0]).origin}catch{return"null"}return Xe!="file"&&$(me)?Xe+"://"+a(me.host)+(tt!==null?":"+tt:""):"null"},cr=function(){return Y(this).scheme+":"},ir=function(){return Y(this).username},pe=function(){return Y(this).password},Fe=function(){var Xe=Y(this),me=Xe.host,Xe=Xe.port;return me===null?"":Xe===null?a(me):a(me)+":"+Xe},Ke=function(){var me=Y(this).host;return me===null?"":a(me)},Be=function(){var me=Y(this).port;return me===null?"":String(me)},Je=function(){var me=Y(this),Xe=me.path;return me.cannotBeABaseURL?Xe[0]:Xe.length?"/"+Xe.join("/"):""},pt=function(){var me=Y(this).query;return me?"?"+me:""},yt=function(){return Y(this).searchParams},bt=function(){var me=Y(this).fragment;return me?"#"+me:""};u&&g(xt,{href:h(Ut,function(tt){var Xe=Y(this),tt=String(tt),tt=n(Xe,tt);if(tt)throw TypeError(tt);I(Xe.searchParams).updateSearchParams(Xe.query)}),origin:h(Ct),protocol:h(cr,function(me){var Xe=Y(this);n(Xe,String(me)+":",oe)}),username:h(ir,function(me){var Xe=Y(this),tt=A(String(me));if(!s(Xe)){Xe.username="";for(var He=0;He<tt.length;He++)Xe.username+=Ie(tt[He],De)}}),password:h(pe,function(me){var Xe=Y(this),tt=A(String(me));if(!s(Xe)){Xe.password="";for(var He=0;He<tt.length;He++)Xe.password+=Ie(tt[He],De)}}),host:h(Fe,function(me){var Xe=Y(this);Xe.cannotBeABaseURL||n(Xe,String(me),ye)}),hostname:h(Ke,function(me){var Xe=Y(this);Xe.cannotBeABaseURL||n(Xe,String(me),je)}),port:h(Be,function(me){var Xe=Y(this);s(Xe)||((me=String(me))==""?Xe.port=null:n(Xe,me,Ue))}),pathname:h(Je,function(me){var Xe=Y(this);Xe.cannotBeABaseURL||(Xe.path=[],n(Xe,me+"",lt))}),search:h(pt,function(me){var Xe=Y(this);(me=String(me))==""?Xe.query=null:(me.charAt(0)=="?"&&(me=me.slice(1)),Xe.query="",n(Xe,me,St)),I(Xe.searchParams).updateSearchParams(Xe.query)}),searchParams:h(yt),hash:h(bt,function(me){var Xe=Y(this);(me=String(me))==""?Xe.fragment=null:(me.charAt(0)=="#"&&(me=me.slice(1)),Xe.fragment="",n(Xe,me,It))})}),v(xt,"toJSON",function(){return Ut.call(this)},{enumerable:!0}),v(xt,"toString",function(){return Ut.call(this)},{enumerable:!0}),N&&(i=N.createObjectURL,o=N.revokeObjectURL,i&&v(l,"createObjectURL",function(me){return i.apply(N,arguments)}),o&&v(l,"revokeObjectURL",function(me){return o.apply(N,arguments)})),C(l,"URL"),c({global:!0,forced:!p,sham:!u},{URL:l})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(e,d,f){d.exports=e("./").polyfill()},{"./":234}],234:[function(e,d,f){(function(a,s){var n,l;n=this,l=function(){function h(ie){return typeof ie=="function"}var m=Array.isArray||function(ie){return Object.prototype.toString.call(ie)==="[object Array]"},i=0,o=void 0,c=void 0,u=function(ie,_e){x[i]=ie,x[i+1]=_e,(i+=2)===2&&(c?c(A):k())},p=typeof window<"u"?window:void 0,g=p||{},g=g.MutationObserver||g.WebKitMutationObserver,v=typeof self>"u"&&a!==void 0&&{}.toString.call(a)==="[object process]",b=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function _(){var ie=setTimeout;return function(){return ie(A,1)}}var x=new Array(1e3);function A(){for(var ie=0;ie<i;ie+=2)(0,x[ie])(x[ie+1]),x[ie]=void 0,x[ie+1]=void 0;i=0}function E(){try{var ie=Function("return this")().require("vertx");return(o=ie.runOnLoop||ie.runOnContext)!==void 0?function(){o(A)}:_()}catch{return _()}}var T,C,R,k=void 0;function P(ie,_e){var Se,Te=this,we=new this.constructor(B),De=(we[I]===void 0&&ce(we),Te._state);return De?(Se=arguments[De-1],u(function(){return J(De,we,Se,Te._result)})):U(Te,we,ie,_e),we}function N(ie){var _e;return ie&&typeof ie=="object"&&ie.constructor===this?ie:(q(_e=new this(B),ie),_e)}var k=v?function(){return a.nextTick(A)}:g?(C=0,v=new g(A),R=document.createTextNode(""),v.observe(R,{characterData:!0}),function(){R.data=C=++C%2}):b?((T=new MessageChannel).port1.onmessage=A,function(){return T.port2.postMessage(0)}):(p===void 0&&typeof e=="function"?E:_)(),I=Math.random().toString(36).substring(2);function B(){}var Y=void 0,W=1,H=2;function X(ie,_e,Se){u(function(Te){var we=!1,De=function(Ie,We,$,se){try{Ie.call(We,$,se)}catch(Ae){return Ae}}(Se,_e,function(Ie){we||(we=!0,(_e!==Ie?q:L)(Te,Ie))},function(Ie){we||(we=!0,O(Te,Ie))},Te._label);!we&&De&&(we=!0,O(Te,De))},ie)}function Z(ie,_e,Se){var Te,we;_e.constructor===ie.constructor&&Se===P&&_e.constructor.resolve===N?(Te=ie,(we=_e)._state===W?L(Te,we._result):we._state===H?O(Te,we._result):U(we,void 0,function(De){return q(Te,De)},function(De){return O(Te,De)})):Se!==void 0&&h(Se)?X(ie,_e,Se):L(ie,_e)}function q(ie,_e){if(ie===_e)O(ie,new TypeError("You cannot resolve a promise with itself"));else if(Se=typeof _e,_e===null||Se!="object"&&Se!="function")L(ie,_e);else{Se=void 0;try{Se=_e.then}catch(Te){return void O(ie,Te)}Z(ie,_e,Se)}var Se}function ee(ie){ie._onerror&&ie._onerror(ie._result),V(ie)}function L(ie,_e){ie._state===Y&&(ie._result=_e,ie._state=W,ie._subscribers.length!==0&&u(V,ie))}function O(ie,_e){ie._state===Y&&(ie._state=H,ie._result=_e,u(ee,ie))}function U(ie,_e,Se,Te){var we=ie._subscribers,De=we.length;ie._onerror=null,we[De]=_e,we[De+W]=Se,we[De+H]=Te,De===0&&ie._state&&u(V,ie)}function V(ie){var _e=ie._subscribers,Se=ie._state;if(_e.length!==0){for(var Te,we=void 0,De=ie._result,Ie=0;Ie<_e.length;Ie+=3)Te=_e[Ie],we=_e[Ie+Se],Te?J(Se,Te,we,De):we(De);ie._subscribers.length=0}}function J(ie,_e,Se,Te){var we=h(Se),De=void 0,Ie=void 0,We=!0;if(we){try{De=Se(Te)}catch($){We=!1,Ie=$}if(_e===De)return void O(_e,new TypeError("A promises callback cannot return that same promise."))}else De=Te;_e._state===Y&&(we&&We?q(_e,De):We===!1?O(_e,Ie):ie===W?L(_e,De):ie===H&&O(_e,De))}var le=0;function ce(ie){ie[I]=le++,ie._state=void 0,ie._result=void 0,ie._subscribers=[]}re.prototype._enumerate=function(ie){for(var _e=0;this._state===Y&&_e<ie.length;_e++)this._eachEntry(ie[_e],_e)},re.prototype._eachEntry=function(ie,_e){var Se=this._instanceConstructor,Te=Se.resolve;if(Te===N){var we,De=void 0,Ie=void 0,We=!1;try{De=ie.then}catch($){We=!0,Ie=$}De===P&&ie._state!==Y?this._settledAt(ie._state,_e,ie._result):typeof De!="function"?(this._remaining--,this._result[_e]=ie):Se===de?(we=new Se(B),We?O(we,Ie):Z(we,ie,De),this._willSettleAt(we,_e)):this._willSettleAt(new Se(function($){return $(ie)}),_e)}else this._willSettleAt(Te(ie),_e)},re.prototype._settledAt=function(ie,_e,Se){var Te=this.promise;Te._state===Y&&(this._remaining--,ie===H?O(Te,Se):this._result[_e]=Se),this._remaining===0&&L(Te,this._result)},re.prototype._willSettleAt=function(ie,_e){var Se=this;U(ie,void 0,function(Te){return Se._settledAt(W,_e,Te)},function(Te){return Se._settledAt(H,_e,Te)})};var ue=re;function re(ie,_e){this._instanceConstructor=ie,this.promise=new ie(B),this.promise[I]||ce(this.promise),m(_e)?(this.length=_e.length,this._remaining=_e.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(_e),this._remaining!==0)||L(this.promise,this._result)):O(this.promise,new Error("Array Methods must be provided an Array"))}ve.prototype.catch=function(ie){return this.then(null,ie)},ve.prototype.finally=function(ie){var _e=this.constructor;return h(ie)?this.then(function(Se){return _e.resolve(ie()).then(function(){return Se})},function(Se){return _e.resolve(ie()).then(function(){throw Se})}):this.then(ie,ie)};var de=ve;function ve(ie){if(this[I]=le++,this._result=this._state=void 0,this._subscribers=[],B!==ie){if(typeof ie!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof ve))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var _e=this;try{ie(function(Se){q(_e,Se)},function(Se){O(_e,Se)})}catch(Se){O(_e,Se)}}}return de.prototype.then=P,de.all=function(ie){return new ue(this,ie).promise},de.race=function(ie){var _e=this;return m(ie)?new _e(function(Se,Te){for(var we=ie.length,De=0;De<we;De++)_e.resolve(ie[De]).then(Se,Te)}):new _e(function(Se,Te){return Te(new TypeError("You must pass an array to race."))})},de.resolve=N,de.reject=function(ie){var _e=new this(B);return O(_e,ie),_e},de._setScheduler=function(ie){c=ie},de._setAsap=function(ie){u=ie},de._asap=u,de.polyfill=function(){var ie=void 0;if(s!==void 0)ie=s;else if(typeof self<"u")ie=self;else try{ie=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var _e=ie.Promise;if(_e){var Se=null;try{Se=Object.prototype.toString.call(_e.resolve())}catch{}if(Se==="[object Promise]"&&!_e.cast)return}ie.Promise=de},de.Promise=de},typeof f=="object"&&d!==void 0?d.exports=l():n.ES6Promise=l()}).call(this,e("_process"),typeof Os<"u"?Os:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:243}],235:[function(e,d,f){var a,s;a=this,s=function(n,l){var h=5e3,m="callback";function i(c){try{delete window[c]}catch{window[c]=void 0}}function o(c){c=document.getElementById(c),c&&document.getElementsByTagName("head")[0].removeChild(c)}l.exports=function(c){var u=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],p=c,g=u.timeout||h,v=u.jsonpCallback||m,b=void 0;return new Promise(function(_,x){var A=u.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),E=v+"_"+A,T=(window[A]=function(C){_({ok:!0,json:function(){return Promise.resolve(C)}}),b&&clearTimeout(b),o(E),i(A)},p+=p.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+p+v+"="+A),u.charset&&T.setAttribute("charset",u.charset),T.id=E,document.getElementsByTagName("head")[0].appendChild(T),b=setTimeout(function(){x(new Error("JSONP request to "+c+" timed out")),i(A),o(E),window[A]=function(){i(A)}},g),T.onerror=function(){x(new Error("JSONP request to "+c+" failed")),i(A),o(E),b&&clearTimeout(b)}})}},f!==void 0&&d!==void 0?s(0,d):(s(s={exports:{}},s),a.fetchJsonp=s.exports)},{}],236:[function(e,d,f){var a=function(s){var n,l,h,m,i,o,c,u,p,g,v;if(!(s===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return v=s.document,n=function(){return s.URL||s.webkitURL||s},l=v.createElementNS("http://www.w3.org/1999/xhtml","a"),h="download"in l,m=/constructor/i.test(s.HTMLElement)||s.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(b){(s.setImmediate||s.setTimeout)(function(){throw b},0)},c=4e4,u=function(b){setTimeout(function(){typeof b=="string"?n().revokeObjectURL(b):b.remove()},c)},p=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob([String.fromCharCode(65279),b],{type:b.type}):b},v=(g=function(b,_,C){C||(b=p(b));var A,E,T=this,C=b.type==="application/octet-stream",R=function(){for(var P=T,N="writestart progress write writeend".split(" "),k=void 0,I=(N=[].concat(N)).length;I--;){var B=P["on"+N[I]];if(typeof B=="function")try{B.call(P,k||P)}catch(Y){o(Y)}}};T.readyState=T.INIT,h?(A=n().createObjectURL(b),setTimeout(function(){var P,N;l.href=A,l.download=_,P=l,N=new MouseEvent("click"),P.dispatchEvent(N),R(),u(A),T.readyState=T.DONE})):(i||C&&m)&&s.FileReader?((E=new FileReader).onloadend=function(){var P=i?E.result:E.result.replace(/^data:[^;]*;/,"data:attachment/file;");s.open(P,"_blank")||(s.location.href=P),P=void 0,T.readyState=T.DONE,R()},E.readAsDataURL(b),T.readyState=T.INIT):(A=A||n().createObjectURL(b),!C&&s.open(A,"_blank")||(s.location.href=A),T.readyState=T.DONE,R(),u(A))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(b,_,x){return _=_||b.name||"download",x||(b=p(b)),navigator.msSaveOrOpenBlob(b,_)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,function(b,_,x){return new g(b,_||b.name||"download",x)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);d!==void 0&&d.exports?d.exports.saveAs=a:r!=null},{}],237:[function(e,d,f){var a,s=Object.defineProperty,n=(s(f,"__esModule",{value:!0}),f),l={GIFEncoder:()=>R,applyPalette:()=>function(Y,W,H="rgb565"){if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<W.length)throw new Error("applyPalette() only works with 256 colors or less");const X=new Uint32Array(Y.buffer),Z=X.length,q=H==="rgb444"?4096:65536,ee=new Uint8Array(Z),L=new Array(q);if(H==="rgba4444")for(let ve=0;ve<Z;ve++){var J=X[ve],O=J>>24&255,U=J>>16&255,V=J>>8&255,J=255&J,le=u(J,V,U,O),le=le in L?L[le]:L[le]=function(ie,_e,Se,Te,we){let De=0,Ie=1e100;for(let Ae=0;Ae<we.length;Ae++){var We,$=we[Ae],se=E($[3]-Te);se>Ie||(We=$[0],(se+=E(We-ie))>Ie||(We=$[1],(se+=E(We-_e))>Ie||(We=$[2],(se+=E(We-Se))>Ie||(Ie=se,De=Ae))))}return De}(J,V,U,O,W);ee[ve]=le}else{const ve=H==="rgb444"?p:c;for(let ie=0;ie<Z;ie++){var re=X[ie],ce=re>>16&255,ue=re>>8&255,re=255&re,de=ve(re,ue,ce),de=de in L?L[de]:L[de]=function(_e,Se,Te,we){let De=0,Ie=1e100;for(let Ae=0;Ae<we.length;Ae++){var We,$=we[Ae],se=E($[0]-_e);se>Ie||(We=$[1],(se+=E(We-Se))>Ie||(We=$[2],(se+=E(We-Te))>Ie||(Ie=se,De=Ae)))}return De}(re,ue,ce,W);ee[ie]=de}}return ee},default:()=>B,nearestColor:()=>function(Y,W,H=x){return Y[T(Y,W,H)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>C,prequantize:()=>function(Y,{roundRGB:W=5,roundAlpha:H=10,oneBitAlpha:X=null}={}){const Z=new Uint32Array(Y.buffer);for(let U=0;U<Z.length;U++){var O=Z[U];let V=O>>24&255;var q,ee=O>>16&255,L=O>>8&255,O=255&O;V=A(V,H),X&&(q=typeof X=="number"?X:127,V=V<=q?0:255),O=A(O,W),L=A(L,W),ee=A(ee,W),Z[U]=V<<24|ee<<16|L<<8|O<<0}},quantize:()=>function(Y,W,H={}){var{format:X="rgb565",clearAlpha:Z=!0,clearAlphaColor:q=0,clearAlphaThreshold:ee=0,oneBitAlpha:L=!1}=H;if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Y=new Uint32Array(Y.buffer);let O=H.useSqrt!==!1;const U=X==="rgba4444",V=function(Ne,ze){const Ve=ze==="rgb444"?4096:65536,xe=new Array(Ve),oe=Ne.length;if(ze==="rgba4444")for(let rt=0;rt<oe;++rt){var G=Ne[rt],ae=G>>24&255,K=G>>16&255,Q=G>>8&255,G=255&G,te=u(G,Q,K,ae);let nt=te in xe?xe[te]:xe[te]=_();nt.rc+=G,nt.gc+=Q,nt.bc+=K,nt.ac+=ae,nt.cnt++}else if(ze==="rgb444")for(let rt=0;rt<oe;++rt){var Le=Ne[rt],ge=Le>>16&255,Ee=Le>>8&255,Le=255&Le,Ye=p(Le,Ee,ge);let nt=Ye in xe?xe[Ye]:xe[Ye]=_();nt.rc+=Le,nt.gc+=Ee,nt.bc+=ge,nt.cnt++}else for(let rt=0;rt<oe;++rt){var Ue=Ne[rt],ye=Ue>>16&255,je=Ue>>8&255,Ue=255&Ue,$e=c(Ue,je,ye);let nt=$e in xe?xe[$e]:xe[$e]=_();nt.rc+=Ue,nt.gc+=je,nt.bc+=ye,nt.cnt++}return xe}(Y,X),J=V.length,le=J-1,ce=new Uint32Array(J+1);for(var ue=0,re=0;re<J;++re){const Ne=V[re];Ne!=null&&($=1/Ne.cnt,U&&(Ne.ac*=$),Ne.rc*=$,Ne.gc*=$,Ne.bc*=$,V[ue++]=Ne)}v(W)/ue<.022&&(O=!1);for(var de,ve,ie,re=0;re<ue-1;++re)V[re].fw=re+1,V[re+1].bk=re,O&&(V[re].cnt=Math.sqrt(V[re].cnt));for(O&&(V[re].cnt=Math.sqrt(V[re].cnt)),re=0;re<ue;++re){b(V,re,!1);var _e=V[re].err;for(ve=++ce[0];1<ve&&(ie=ve>>1,!(V[de=ce[ie]].err<=_e));ve=ie)ce[ve]=de;ce[ve]=re}var Se,Te=ue-W;for(re=0;re<Te;){for(;;){var we=ce[1];if((Se=V[we]).tm>=Se.mtm&&V[Se.nn].mtm<=Se.tm)break;for(Se.mtm==le?we=ce[1]=ce[ce[0]--]:(b(V,we,!1),Se.tm=re),_e=V[we].err,ve=1;(ie=ve+ve)<=ce[0]&&(ie<ce[0]&&V[ce[ie]].err>V[ce[ie+1]].err&&ie++,!(_e<=V[de=ce[ie]].err));ve=ie)ce[ve]=de;ce[ve]=we}var De=V[Se.nn],Ie=Se.cnt,We=De.cnt,$=1/(Ie+We);U&&(Se.ac=$*(Ie*Se.ac+We*De.ac)),Se.rc=$*(Ie*Se.rc+We*De.rc),Se.gc=$*(Ie*Se.gc+We*De.gc),Se.bc=$*(Ie*Se.bc+We*De.bc),Se.cnt+=De.cnt,Se.mtm=++re,V[De.bk].fw=De.fw,V[De.fw].bk=De.bk,De.mtm=le}let se=[];for(re=0;;0){let Ne=g(Math.round(V[re].rc),0,255),ze=g(Math.round(V[re].gc),0,255),Ve=g(Math.round(V[re].bc),0,255),xe=255;U&&(xe=g(Math.round(V[re].ac),0,255),L&&(Ae=typeof L=="number"?L:127,xe=xe<=Ae?0:255),Z&&xe<=ee&&(Ne=ze=Ve=q,xe=0));var Ae=U?[Ne,ze,Ve,xe]:[Ne,ze,Ve];if(function(oe,ae){for(let G=0;G<oe.length;G++){var Q=oe[G],K=Q[0]===ae[0]&&Q[1]===ae[1]&&Q[2]===ae[2],Q=!(4<=Q.length&&4<=ae.length)||Q[3]===ae[3];if(K&&Q)return!0}return!1}(se,Ae)||se.push(Ae),(re=V[re].fw)==0)break}return se},snapColorsToPalette:()=>function(Y,W,H=5){if(Y.length&&W.length){var X=Y.map(O=>O.slice(0,3)),Z=H*H,q=Y[0].length;for(let O=0;O<W.length;O++){let U=W[O];U=U.length<q?[U[0],U[1],U[2],255]:U.length>q?U.slice(0,3):U.slice();var L=C(X,U.slice(0,3),x),ee=L[0],L=L[1];0<L&&L<=Z&&(Y[ee]=U)}}}};for(a in l)s(n,a,{get:l[a],enumerable:!0});var h={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function m(Y=256){let W=0,H=new Uint8Array(Y);return{get buffer(){return H.buffer},reset(){W=0},bytesView(){return H.subarray(0,W)},bytes(){return H.slice(0,W)},writeByte(Z){X(W+1),H[W]=Z,W++},writeBytes(Z,q=0,ee=Z.length){X(W+ee);for(let L=0;L<ee;L++)H[W++]=Z[L+q]},writeBytesView(Z,q=0,ee=Z.byteLength){X(W+ee),H.set(Z.subarray(q,q+ee),W),W+=ee}};function X(Z){var q=H.length;if(!(Z<=q)){Z=Math.max(Z,q*(q<1048576?2:1.125)>>>0),q!=0&&(Z=Math.max(Z,256));const ee=H;H=new Uint8Array(Z),0<W&&H.set(ee.subarray(0,W),0)}}}var i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],o=function(Y,W,H,U,Z=m(512),q=new Uint8Array(256),ee=new Int32Array(5003),L=new Int32Array(5003)){var O=ee.length,U=Math.max(2,U);q.fill(0),L.fill(0),ee.fill(-1);let V=0,J=0;var le=U+1;const ce=le;let ue=!1,re=ce,de=(1<<re)-1;var ve=1<<le-1;const ie=1+ve;let _e=2+ve,Se=0,Te=H[0],we=0;for(let Ae=O;Ae<65536;Ae*=2)++we;we=8-we,Z.writeByte(U),se(ve);var De=H.length;for(let Ae=1;Ae<De;Ae++)e:{var Ie=H[Ae],We=(Ie<<12)+Te;let Ne=Ie<<we^Te;if(ee[Ne]===We)Te=L[Ne];else{for(var $=Ne===0?1:O-Ne;0<=ee[Ne];)if((Ne-=$)<0&&(Ne+=O),ee[Ne]===We){Te=L[Ne];break e}se(Te),Te=Ie,_e<4096?(L[Ne]=_e++,ee[Ne]=We):(ee.fill(-1),_e=2+ve,ue=!0,se(ve))}}return se(Te),se(ie),Z.writeByte(0),Z.bytesView();function se(Ae){for(V&=i[J],0<J?V|=Ae<<J:V=Ae,J+=re;8<=J;)q[Se++]=255&V,254<=Se&&(Z.writeByte(Se),Z.writeBytesView(q,0,Se),Se=0),V>>=8,J-=8;if((_e>de||ue)&&(ue?(re=ce,de=(1<<re)-1,ue=!1):(++re,de=re===12?1<<re:(1<<re)-1)),Ae==ie){for(;0<J;)q[Se++]=255&V,254<=Se&&(Z.writeByte(Se),Z.writeBytesView(q,0,Se),Se=0),V>>=8,J-=8;0<Se&&(Z.writeByte(Se),Z.writeBytesView(q,0,Se),Se=0)}}};function c(Y,W,H){return Y<<8&63488|W<<2&992|H>>3}function u(Y,W,H,X){return Y>>4|240&W|(240&H)<<4|(240&X)<<8}function p(Y,W,H){return Y>>4<<8|240&W|H>>4}function g(Y,W,H){return Y<W?W:H<Y?H:Y}function v(Y){return Y*Y}function b(Y,W,H){var X=0,Z=1e100;const q=Y[W];for(var ee=q.cnt,L=q.ac,O=q.rc,U=q.gc,V=q.bc,J=q.fw;J!=0;J=Y[J].fw){var le,ce=Y[J],ue=ce.cnt,ue=ee*ue/(ee+ue);Z<=ue||(le=0,H&&Z<=(le+=ue*v(ce.ac-L))||Z<=(le+=ue*v(ce.rc-O))||Z<=(le+=ue*v(ce.gc-U))||Z<=(le+=ue*v(ce.bc-V))||(Z=le,X=J))}q.err=Z,q.nn=X}function _(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function x(Y,W){for(var H=0,X=0;X<Y.length;X++){var Z=Y[X]-W[X];H+=Z*Z}return H}function A(Y,W){return 1<W?Math.round(Y/W)*W:Y}function E(Y){return Y*Y}function T(Y,W,H=x){let X=1/0,Z=-1;for(let ee=0;ee<Y.length;ee++){var q=H(W,Y[ee]);q<X&&(X=q,Z=ee)}return Z}function C(Y,W,H=x){let X=1/0,Z=-1;for(let ee=0;ee<Y.length;ee++){var q=H(W,Y[ee]);q<X&&(X=q,Z=ee)}return[Z,X]}function R(Y={}){const{initialCapacity:W=4096,auto:H=!0}=Y,X=m(W),Z=new Uint8Array(256),q=new Int32Array(5003),ee=new Int32Array(5003);let L=!1;return{reset(){X.reset(),L=!1},finish(){X.writeByte(h.trailer)},bytes(){return X.bytes()},bytesView(){return X.bytesView()},get buffer(){return X.buffer},get stream(){return X},writeHeader:O,writeFrame(U,V,J,Te={}){var{transparent:ce=!1,transparentIndex:ue=0,delay:$=0,palette:re=null,repeat:De=0,colorDepth:de=8,dispose:ve=-1}=Te;let ie=!1;if(H?L||(ie=!0,O(),L=!0):ie=Boolean(Te.first),V=Math.max(0,Math.floor(V)),J=Math.max(0,Math.floor(J)),ie){if(!re)throw new Error("First frame must include a { palette } option");var[Te,Ie,Se,We,we=8]=[X,V,J,re,de];We=I(We.length)-1,we=128|we-1<<4|We,N(Te,Ie),N(Te,Se),Te.writeBytes([we,0,0]),P(X,re),0<=De&&(We=X,Ie=De,We.writeByte(33),We.writeByte(255),We.writeByte(11),k(We,"NETSCAPE2.0"),We.writeByte(3),We.writeByte(1),N(We,Ie),We.writeByte(0))}var _e,Se=Math.round($/10),Te=X,we=ve,De=Se,Ie=ce,We=ue,$=(Te.writeByte(33),Te.writeByte(249),Te.writeByte(4),We<0&&(We=0,Ie=!1),Ie=Ie?(_e=1,2):_e=0,0<=we&&(Ie=7&we),Ie<<=2,Te.writeByte(0|Ie|_e),N(Te,De),Te.writeByte(We||0),Te.writeByte(0),Boolean(re)&&!ie);ve=X,ce=V,ue=J,_e=$?re:null,ve.writeByte(44),N(ve,0),N(ve,0),N(ve,ce),N(ve,ue),_e?(ce=I(_e.length)-1,ve.writeByte(128|ce)):ve.writeByte(0),$&&P(X,re),[De,Te,ue,ce,ve=8,$,re,U]=[X,U,V,J,de,Z,q,ee],o(ue,ce,Te,ve,De,$,re,U)}};function O(){k(X,"GIF89a")}}function P(Y,W){var H=1<<I(W.length);for(let X=0;X<H;X++){let Z=[0,0,0];X<W.length&&(Z=W[X]),Y.writeByte(Z[0]),Y.writeByte(Z[1]),Y.writeByte(Z[2])}}function N(Y,W){Y.writeByte(255&W),Y.writeByte(W>>8&255)}function k(Y,W){for(var H=0;H<W.length;H++)Y.writeByte(W.charCodeAt(H))}function I(Y){return Math.max(Math.ceil(Math.log2(Y)),1)}var B=R},{}],238:[function(e,d,f){f.read=function(a,s,n,l,b){var m,i,o=8*b-l-1,c=(1<<o)-1,u=c>>1,p=-7,g=n?b-1:0,v=n?-1:1,b=a[s+g];for(g+=v,m=b&(1<<-p)-1,b>>=-p,p+=o;0<p;m=256*m+a[s+g],g+=v,p-=8);for(i=m&(1<<-p)-1,m>>=-p,p+=l;0<p;i=256*i+a[s+g],g+=v,p-=8);if(m===0)m=1-u;else{if(m===c)return i?NaN:1/0*(b?-1:1);i+=Math.pow(2,l),m-=u}return(b?-1:1)*i*Math.pow(2,m-l)},f.write=function(a,s,n,l,h,_){var i,o,c=8*_-h-1,u=(1<<c)-1,p=u>>1,g=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=l?0:_-1,b=l?1:-1,_=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(o=isNaN(s)?1:0,i=u):(i=Math.floor(Math.log(s)/Math.LN2),s*(l=Math.pow(2,-i))<1&&(i--,l*=2),2<=(s+=1<=i+p?g/l:g*Math.pow(2,1-p))*l&&(i++,l/=2),u<=i+p?(o=0,i=u):1<=i+p?(o=(s*l-1)*Math.pow(2,h),i+=p):(o=s*Math.pow(2,p-1)*Math.pow(2,h),i=0));8<=h;a[n+v]=255&o,v+=b,o/=256,h-=8);for(i=i<<h|o,c+=h;0<c;a[n+v]=255&i,v+=b,i/=256,c-=8);a[n+v-b]|=128*_}},{}],239:[function(e,d,f){var a;function s(K,Q){return K.b===Q.b&&K.a===Q.a}function n(K,Q){return K.b<Q.b||K.b===Q.b&&K.a<=Q.a}function l(K,Q,G){var te=Q.b-K.b,ge=G.b-Q.b;return 0<te+ge?te<ge?Q.a-K.a+te/(te+ge)*(K.a-G.a):Q.a-G.a+ge/(te+ge)*(G.a-K.a):0}function h(K,Q,G){var te=Q.b-K.b,ge=G.b-Q.b;return 0<te+ge?(Q.a-G.a)*te+(Q.a-K.a)*ge:0}function m(K,Q){return K.a<Q.a||K.a===Q.a&&K.b<=Q.b}function i(K,Q,G){var te=Q.a-K.a,ge=G.a-Q.a;return 0<te+ge?te<ge?Q.b-K.b+te/(te+ge)*(K.b-G.b):Q.b-G.b+ge/(te+ge)*(G.b-K.b):0}function o(K,Q,G){var te=Q.a-K.a,ge=G.a-Q.a;return 0<te+ge?(Q.b-G.b)*te+(Q.b-K.b)*ge:0}function c(K,Q,G,te){return(K=K<0?0:K)<=(G=G<0?0:G)?G===0?(Q+te)/2:Q+K/(K+G)*(te-Q):te+G/(K+G)*(Q-te)}function u(K){var Q=_(K.b);return A(Q,K.c),A(Q.b,K.c),E(Q,K.a),Q}function p(K,Q){var G=!1,te=!1;K!==Q&&(Q.a!==K.a&&(te=!0,C(Q.a,K.a)),Q.d!==K.d&&(G=!0,R(Q.d,K.d)),x(Q,K),te||(A(Q,K.a),K.a.c=K),G||(E(Q,K.d),K.d.a=K))}function g(K){var Q=K.b,G=!1;K.d!==K.b.d&&(G=!0,R(K.d,K.b.d)),K.c===K?C(K.a,null):(K.b.d.a=K.b.e,K.a.c=K.c,x(K,K.b.e),G||E(K,K.d)),Q.c===Q?(C(Q.a,null),R(Q.d,null)):(K.d.a=Q.b.e,Q.a.c=Q.c,x(Q,Q.b.e)),T(K)}function v(K){var Q=_(K),G=Q.b;return x(Q,K.e),Q.a=K.b.a,A(G,Q.a),Q.d=G.d=K.d,Q=Q.b,x(K.b,K.b.b.e),x(K.b,Q),K.b.a=Q.a,Q.b.a.c=Q.b,Q.b.d=K.b.d,Q.f=K.f,Q.b.f=K.b.f,Q}function b(K,Q){var G=!1,te=_(K),ge=te.b;return Q.d!==K.d&&(G=!0,R(Q.d,K.d)),x(te,K.e),x(ge,Q),te.a=K.b.a,ge.a=Q.a,te.d=ge.d=K.d,K.d.a=ge,G||E(te,K.d),te}function _(K){var Q=new Se,G=new Se,te=K.b.h;return(((G.h=te).b.h=Q).h=K).b.h=G,Q.b=G,((Q.c=Q).e=G).b=Q,(G.c=G).e=Q}function x(K,Q){var G=K.c,te=Q.c;G.b.e=Q,(te.b.e=K).c=te,Q.c=G}function A(K,Q){var G=Q.f,te=new we(Q,G);for(G.e=te,G=(Q.f=te).c=K;G.a=te,(G=G.c)!==K;);}function E(K,Q){var G=Q.d,te=new _e(Q,G);for(G.b=te,(Q.d=te).a=K,te.c=Q.c,G=K;G.d=te,(G=G.e)!==K;);}function T(K){var Q=K.h;K=K.b.h,(Q.b.h=K).b.h=Q}function C(K,Q){for(var G=K.c,te=G;te.a=Q,(te=te.c)!==G;);G=K.f,((te=K.e).f=G).e=te}function R(K,Q){for(var G=K.a,te=G;te.d=Q,(te=te.e)!==G;);G=K.d,((te=K.b).d=G).b=te}function P(K){var Q=0;return Math.abs(K[1])>Math.abs(K[0])&&(Q=1),Q=Math.abs(K[2])>Math.abs(K[Q])?2:Q}function N(K,Q){K.f+=Q.f,K.b.f+=Q.b.f}function k(K,Q,G){return K=K.a,Q=Q.a,G=G.a,Q.b.a===K?G.b.a===K?n(Q.a,G.a)?h(G.b.a,Q.a,G.a)<=0:0<=h(Q.b.a,G.a,Q.a):h(G.b.a,K,G.a)<=0:G.b.a===K?0<=h(Q.b.a,K,Q.a):(Q=l(Q.b.a,K,Q.a),(K=l(G.b.a,K,G.a))<=Q)}function I(K){K.a.i=null;var Q=K.e;Q.a.c=Q.c,Q.c.a=Q.a,K.e=null}function B(K,Q){g(K.a),K.c=!1,(K.a=Q).i=K}function Y(K){for(var Q=K.a.a;(K=ae(K)).a.a===Q;);return K.c&&(B(K,Q=b(oe(K).a.b,K.a.e)),K=ae(K)),K}function W(K,Q,G){var te=new xe;return te.a=G,te.e=ue(K.f,Q.e,te),G.i=te}function H(K,Q){switch(K.s){case 100130:return(1&Q)!=0;case 100131:return Q!==0;case 100132:return 0<Q;case 100133:return Q<0;case 100134:return 2<=Q||Q<=-2}return!1}function X(K){var Q=K.a,G=Q.d;G.c=K.d,G.a=Q,I(K)}function Z(K,Q,G){for(Q=(K=Q).a;K!==G;){K.c=!1;var te=oe(K),ge=te.a;if(ge.a!==Q.a){if(!te.c){X(K);break}B(te,ge=b(Q.c.b,ge.b))}Q.c!==ge&&(p(ge.b.e,ge),p(Q,ge)),X(K),Q=te.a,K=te}return Q}function q(K,Q,G,te,ge,Ee){for(var Le=!0;W(K,Q,G.b),(G=G.c)!==te;);for(ge===null&&(ge=oe(Q).a.b.c);(G=(te=oe(Q)).a.b).a===ge.a;)G.c!==ge&&(p(G.b.e,G),p(ge.b.e,G)),te.f=Q.f-G.f,te.d=H(K,te.f),Q.b=!0,!Le&&U(K,Q)&&(N(G,ge),I(Q),g(ge)),Le=!1,Q=te,ge=G;Q.b=!0,Ee&&J(K,Q)}function ee(K,Q,G,te,ge){var Ee=[Q.g[0],Q.g[1],Q.g[2]];Q.d=null,Q.d=K.o&&K.o(Ee,G,te,K.c)||null,Q.d===null&&(ge?K.n||(ie(K,100156),K.n=!0):Q.d=G[0])}function L(K,Q,G){var te=[null,null,null,null];te[0]=Q.a.d,te[1]=G.a.d,ee(K,Q.a,te,[.5,.5,0,0],!1),p(Q,G)}function O(K,Q,G,te,ge){var Ee=Math.abs(Q.b-K.b)+Math.abs(Q.a-K.a),Le=Math.abs(G.b-K.b)+Math.abs(G.a-K.a),Ye=ge+1;te[ge]=.5*Le/(Ee+Le),te[Ye]=.5*Ee/(Ee+Le),K.g[0]+=te[ge]*Q.g[0]+te[Ye]*G.g[0],K.g[1]+=te[ge]*Q.g[1]+te[Ye]*G.g[1],K.g[2]+=te[ge]*Q.g[2]+te[Ye]*G.g[2]}function U(K,Q){var G=oe(Q),te=Q.a,ge=G.a;if(n(te.a,ge.a)){if(0<h(ge.b.a,te.a,ge.a))return;if(s(te.a,ge.a)){if(te.a!==ge.a){var G=K.e,Ee=te.a.h;if(0<=Ee){var Le=(G=G.b).d,Ye=G.e,ye=G.c,je=ye[Ee];Le[je]=Le[G.a],(ye[Le[je]]=je)<=--G.a&&(je<=1||n(Ye[Le[je>>1]],Ye[Le[je]])?ze:Ve)(G,je),Ye[Ee]=null,ye[Ee]=G.b,G.b=Ee}else for(G.c[-(Ee+1)]=null;0<G.a&&G.c[G.d[G.a-1]]===null;)--G.a;L(K,ge.b.e,te)}}else v(ge.b),p(te,ge.b.e),Q.b=G.b=!0}else{if(h(te.b.a,ge.a,te.a)<0)return;ae(Q).b=Q.b=!0,v(te.b),p(ge.b.e,te)}return 1}function V(K,Q){var G=oe(Q),te=Q.a,ge=G.a,Ee=te.a,Le=ge.a,Ye=te.b.a,ye=ge.b.a,je=new we;if(h(Ye,K.a,Ee),h(ye,K.a,Le),!(Ee===Le||Math.min(Ee.a,Ye.a)>Math.max(Le.a,ye.a))){if(n(Ee,Le)){if(0<h(ye,Ee,Le))return}else if(h(Ye,Le,Ee)<0)return;var Ue,$e,rt=Ye,nt=Ee,lt=ye,at=Le;if(n(rt,nt)||(Ue=rt,rt=nt,nt=Ue),n(lt,at)||(Ue=lt,lt=at,at=Ue),n(rt,lt)||(Ue=rt,rt=lt,lt=Ue,Ue=nt,nt=at,at=Ue),n(lt,nt)?n(nt,at)?((Ue=l(rt,lt,nt))+($e=l(lt,nt,at))<0&&(Ue=-Ue,$e=-$e),je.b=c(Ue,lt.b,$e,nt.b)):((Ue=h(rt,lt,nt))+($e=-h(rt,at,nt))<0&&(Ue=-Ue,$e=-$e),je.b=c(Ue,lt.b,$e,at.b)):je.b=(lt.b+nt.b)/2,m(rt,nt)||(Ue=rt,rt=nt,nt=Ue),m(lt,at)||(Ue=lt,lt=at,at=Ue),m(rt,lt)||(Ue=rt,rt=lt,lt=Ue,Ue=nt,nt=at,at=Ue),m(lt,nt)?m(nt,at)?((Ue=i(rt,lt,nt))+($e=i(lt,nt,at))<0&&(Ue=-Ue,$e=-$e),je.a=c(Ue,lt.a,$e,nt.a)):((Ue=o(rt,lt,nt))+($e=-o(rt,at,nt))<0&&(Ue=-Ue,$e=-$e),je.a=c(Ue,lt.a,$e,at.a)):je.a=(lt.a+nt.a)/2,n(je,K.a)&&(je.b=K.a.b,je.a=K.a.a),rt=n(Ee,Le)?Ee:Le,n(rt,je)&&(je.b=rt.b,je.a=rt.a),s(je,Ee)||s(je,Le))return U(K,Q),0;if(!s(Ye,K.a)&&0<=h(Ye,K.a,je)||!s(ye,K.a)&&h(ye,K.a,je)<=0){if(ye===K.a)v(te.b),p(ge.b,te),te=oe(Q=Y(Q)).a,Z(K,oe(Q),G),q(K,Q,te.b.e,te,te,!0);else{if(Ye!==K.a)return 0<=h(Ye,K.a,je)&&(ae(Q).b=Q.b=!0,v(te.b),te.a.b=K.a.b,te.a.a=K.a.a),void(h(ye,K.a,je)<=0&&(Q.b=G.b=!0,v(ge.b),ge.a.b=K.a.b,ge.a.a=K.a.a));for(v(ge.b),p(te.e,ge.b.e),Le=(Ee=G=Q).a.b.a;(Ee=ae(Ee)).a.b.a===Le;);Ee=oe(Q=Ee).a.b.c,G.a=ge.b.e,q(K,Q,(ge=Z(K,G,null)).c,te.b.c,Ee,!0)}return 1}v(te.b),v(ge.b),p(ge.b.e,te),te.a.b=je.b,te.a.a=je.a,te.a.h=Ie(K.e,te.a),te=te.a,ge=[0,0,0,0],je=[Ee.d,Ye.d,Le.d,ye.d],te.g[0]=te.g[1]=te.g[2]=0,O(te,Ee,Ye,ge,0),O(te,Le,ye,ge,2),ee(K,te,je,ge,!0),ae(Q).b=Q.b=G.b=!0}}function J(K,Q){for(var G=oe(Q);;){for(;G.b;)G=oe(Q=G);if(!Q.b&&((Q=ae(G=Q))===null||!Q.b))break;Q.b=!1;var te=Q.a,ge=G.a;if(Ee=te.b.a!==ge.b.a)e:{var Ee,Le=oe(Ee=Q),Ye=Ee.a,ye=Le.a,je=void 0;if(n(Ye.b.a,ye.b.a)){if(h(Ye.b.a,ye.b.a,Ye.a)<0){Ee=!1;break e}ae(Ee).b=Ee.b=!0,je=v(Ye),p(ye.b,je),je.d.c=Ee.d}else{if(0<h(ye.b.a,Ye.b.a,ye.a)){Ee=!1;break e}Ee.b=Le.b=!0,je=v(ye),p(Ye.e,ye.b),je.b.d.c=Ee.d}Ee=!0}if(Ee&&(G.c?(I(G),g(ge),ge=(G=oe(Q)).a):Q.c&&(I(Q),g(te),te=(Q=ae(G)).a)),te.a!==ge.a){if(te.b.a===ge.b.a||Q.c||G.c||te.b.a!==K.a&&ge.b.a!==K.a)U(K,Q);else if(V(K,Q))break}te.a===ge.a&&te.b.a===ge.b.a&&(N(ge,te),I(Q),g(te),Q=ae(G))}}function le(K,Q){var G=new xe,te=u(K.b);te.a.b=4e150,te.a.a=Q,te.b.a.b=-4e150,te.b.a.a=Q,K.a=te.b.a,G.a=te,G.f=0,G.d=!1,G.c=!1,G.h=!0,G.b=!1,te=ue(te=K.f,te.a,G),G.e=te}function ce(K){this.a=new re,this.b=K,this.c=k}function ue(K,Q,G){for(;(Q=Q.c).b!==null&&!K.c(K.b,Q.b,G););return K=new re(G,Q.a,Q),Q.a.c=K,Q.a=K}function re(K,Q,G){this.b=K||null,this.a=Q||this,this.c=G||this}function de(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ve(K,Q){if(K.d!==Q)for(;K.d!==Q;)if(K.d<Q)switch(K.d){case 0:ie(K,100151),K.u(null);break;case 1:ie(K,100152),K.t()}else switch(K.d){case 2:ie(K,100154),K.v();break;case 1:ie(K,100153),K.w()}}function ie(K,Q){K.p&&K.p(Q,K.c)}function _e(K,Q){this.b=K||this,this.d=Q||this,this.a=null,this.c=!1}function Se(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Te(){this.c=new we,this.a=new _e,this.b=new Se,this.d=new Se,this.b.b=this.d,this.d.b=this.b}function we(K,Q){this.e=K||this,this.f=Q||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function De(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new $}function Ie(K,Q){var G,te,ge;return K.e?(2*(te=++(G=K.b).a)>G.f&&(G.f*=2,G.c=se(G.c,G.f+1)),G.b===0?ge=te:(ge=G.b,G.b=G.c[G.b]),G.e[ge]=Q,G.c[ge]=te,G.d[te]=ge,G.h&&Ve(G,te),ge):(G=K.a++,K.c[G]=Q,-(G+1))}function We(K){if(K.a===0)return Ne(K.b);var Q=K.c[K.d[K.a-1]];if(K.b.a!==0&&n(Ae(K.b),Q))return Ne(K.b);for(;--K.a,0<K.a&&K.c[K.d[K.a-1]]===null;);return Q}function $(){this.d=se([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function se(K,Q){for(var G=Array(Q),te=0;te<K.length;te++)G[te]=K[te];for(;te<Q;te++)G[te]=0;return G}function Ae(K){return K.e[K.d[1]]}function Ne(K){var Q=K.d,G=K.e,te=K.c,ge=Q[1],Ee=G[ge];return 0<K.a&&(Q[1]=Q[K.a],te[Q[1]]=1,G[ge]=null,te[ge]=K.b,K.b=ge,0<--K.a&&ze(K,1)),Ee}function ze(K,Q){for(var G=K.d,te=K.e,ge=K.c,Ee=Q,Le=G[Ee];;){var Ye=Ee<<1,ye=(Ye<K.a&&n(te[G[Ye+1]],te[G[Ye]])&&(Ye+=1),G[Ye]);if(Ye>K.a||n(te[Le],te[ye])){ge[G[Ee]=Le]=Ee;break}ge[G[Ee]=ye]=Ee,Ee=Ye}}function Ve(K,Q){for(var G=K.d,te=K.e,ge=K.c,Ee=Q,Le=G[Ee];;){var Ye=Ee>>1,ye=G[Ye];if(Ye==0||n(te[ye],te[Le])){ge[G[Ee]=Le]=Ee;break}ge[G[Ee]=ye]=Ee,Ee=Ye}}function xe(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function oe(K){return K.e.c.b}function ae(K){return K.e.a.b}(a=de.prototype).x=function(){ve(this,0)},a.B=function(K,Q){switch(K){case 100142:return;case 100140:switch(Q){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=Q)}break;case 100141:return void(this.m=!!Q);default:return void ie(this,100900)}ie(this,100901)},a.y=function(K){switch(K){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ie(this,100900)}return!1},a.A=function(K,Q,G){this.j[0]=K,this.j[1]=Q,this.j[2]=G},a.z=function(K,Q){var G=Q||null;switch(K){case 100100:case 100106:this.h=G;break;case 100104:case 100110:this.l=G;break;case 100101:case 100107:this.k=G;break;case 100102:case 100108:this.i=G;break;case 100103:case 100109:this.p=G;break;case 100105:case 100111:this.o=G;break;case 100112:this.r=G;break;default:ie(this,100900)}},a.C=function(K,Q){var G=!1,te=[0,0,0];ve(this,2);for(var ge=0;ge<3;++ge){var Ee=K[ge];Ee<-1e150&&(Ee=-1e150,G=!0),1e150<Ee&&(Ee=1e150,G=!0),te[ge]=Ee}G&&ie(this,100155),(G=this.q)===null?p(G=u(this.b),G.b):(v(G),G=G.e),G.a.d=Q,G.a.g[0]=te[0],G.a.g[1]=te[1],G.a.g[2]=te[2],G.f=1,G.b.f=-1,this.q=G},a.u=function(K){ve(this,0),this.d=1,this.b=new Te,this.c=K},a.t=function(){ve(this,1),this.d=2,this.q=null},a.v=function(){ve(this,2),this.d=1},a.w=function(){ve(this,1),this.d=0;var K,Q,G=this.j[0],te=this.j[1],ge=this.j[2],Ee=!1,Le=[G,te,ge];if(G===0&&te===0&&ge===0){for(var te=[-2e150,-2e150,-2e150],Ye=[2e150,2e150,2e150],ge=[],ye=[],G=(Ee=this.b.c).e;G!==Ee;G=G.e)for(var je=0;je<3;++je){var Ue=G.g[je];Ue<Ye[je]&&(Ye[je]=Ue,ye[je]=G),Ue>te[je]&&(te[je]=Ue,ge[je]=G)}if(te[1]-Ye[1]>te[G=0]-Ye[0]&&(G=1),Ye[G=te[2]-Ye[2]>te[G]-Ye[G]?2:G]>=te[G])Le[0]=0,Le[1]=0,Le[2]=1;else{for(Ye=ye[G],ge=ge[G],ye=[te=0,0,0],Ye=[Ye.g[0]-ge.g[0],Ye.g[1]-ge.g[1],Ye.g[2]-ge.g[2]],je=[0,0,0],G=Ee.e;G!==Ee;G=G.e)je[0]=G.g[0]-ge.g[0],je[1]=G.g[1]-ge.g[1],je[2]=G.g[2]-ge.g[2],ye[0]=Ye[1]*je[2]-Ye[2]*je[1],ye[1]=Ye[2]*je[0]-Ye[0]*je[2],ye[2]=Ye[0]*je[1]-Ye[1]*je[0],te<(Ue=ye[0]*ye[0]+ye[1]*ye[1]+ye[2]*ye[2])&&(te=Ue,Le[0]=ye[0],Le[1]=ye[1],Le[2]=ye[2]);te<=0&&(Le[0]=Le[1]=Le[2]=0,Le[P(Ye)]=1)}Ee=!0}for(ye=P(Le),G=this.b.c,te=(ye+1)%3,ge=(ye+2)%3,ye=0<Le[ye]?1:-1,Le=G.e;Le!==G;Le=Le.e)Le.b=Le.g[te],Le.a=ye*Le.g[ge];if(Ee){for(Le=0,G=(Ee=this.b.a).b;G!==Ee;G=G.b)if(!((te=G.a).f<=0))for(;Le+=(te.a.b-te.b.a.b)*(te.a.a+te.b.a.a),(te=te.e)!==G.a;);if(Le<0)for(Ee=(Le=this.b.c).e;Ee!==Le;Ee=Ee.e)Ee.a=-Ee.a}for(this.n=!1,Le=this.b.b,G=Le.h;G!==Le;G=Ee)Ee=G.h,te=G.e,s(G.a,G.b.a)&&G.e.e!==G&&(L(this,te,G),g(G),te=(G=te).e),te.e===G&&(te!==G&&(te!==Ee&&te!==Ee.b||(Ee=Ee.h),g(te)),G!==Ee&&G!==Ee.b||(Ee=Ee.h),g(G));for(this.e=Le=new De,Ee=this.b.c,G=Ee.e;G!==Ee;G=G.e)G.h=Ie(Le,G);var $e=Le;$e.d=[];for(var rt=0;rt<$e.a;rt++)$e.d[rt]=rt;$e.d.sort(function(at){return function(Lt,St){return n(at[Lt],at[St])?1:-1}}($e.c)),$e.e=!0;for(var nt=$e.b,lt=nt.a;1<=lt;--lt)ze(nt,lt);for(nt.h=!0,this.f=new ce(this),le(this,-4e150),le(this,4e150);(Le=We(this.e))!==null;){for(;;){e:if((G=this.e).a===0)Ee=Ae(G.b);else if(Ee=G.c[G.d[G.a-1]],G.b.a!==0&&n(G=Ae(G.b),Ee)){Ee=G;break e}if(Ee===null||!s(Ee,Le))break;Ee=We(this.e),L(this,Le.c,Ee.c)}(function at(Lt,St){for(var It,xt=(Lt.a=St).c;xt.i===null;)if((xt=xt.c)===St.c){var xt=Lt,Ut=St;(pe=new xe).a=Ut.c.b;for(var Fe=(Ct=xt.f).a;(Fe=Fe.a).b!==null&&!Ct.c(Ct.b,pe,Fe.b););var Ct,cr,ir=oe(Ct=Fe.b),pe=Ct.a,Fe=ir.a;return void(h(pe.b.a,Ut,pe.a)===0?s((pe=Ct.a).a,Ut)||s(pe.b.a,Ut)||(v(pe.b),Ct.c&&(g(pe.c),Ct.c=!1),p(Ut.c,pe),at(xt,Ut)):(cr=n(Fe.b.a,pe.b.a)?Ct:ir,ir=void 0,Ct.d||cr.c?(ir=cr===Ct?b(Ut.c.b,pe.e):b(Fe.b.c.b,Ut.c).b,cr.c?B(cr,ir):((Ct=W(pe=xt,Ct,ir)).f=ae(Ct).f+Ct.a.f,Ct.d=H(pe,Ct.f)),at(xt,Ut)):q(xt,Ct,Ut.c,Ut.c,null,!0)))}Ct=(pe=oe(xt=Y(xt.i))).a,(pe=Z(Lt,pe,null)).c===Ct?(pe=(Ct=pe).c,Fe=oe(xt),ir=xt.a,cr=Fe.a,It=!1,ir.b.a!==cr.b.a&&V(Lt,xt),s(ir.a,Lt.a)&&(p(pe.b.e,ir),pe=oe(xt=Y(xt)).a,Z(Lt,oe(xt),Fe),It=!0),s(cr.a,Lt.a)&&(p(Ct,cr.b.e),Ct=Z(Lt,Fe,null),It=!0),It?q(Lt,xt,Ct.c,pe,pe,!0):(Ut=n(cr.a,ir.a)?cr.b.e:ir,q(Lt,xt,Ut=b(Ct.c.b,Ut),Ut.c,Ut.c,!1),Ut.b.i.c=!0,J(Lt,xt))):q(Lt,xt,pe.c,Ct,Ct,!0)})(this,Le)}for(this.a=this.f.a.a.b.a.a,Le=0;(Ee=this.f.a.a.b)!==null;)Ee.h||++Le,I(Ee);for(this.f=null,(Le=this.e).b=null,Le.d=null,this.e=Le.c=null,Le=this.b,G=Le.a.b;G!==Le.a;G=Ee)Ee=G.b,(G=G.a).e.e===G&&(N(G.c,G),g(G));if(!this.n){if(Le=this.b,this.m)for(G=Le.b.h;G!==Le.b;G=Ee)Ee=G.h,G.b.d.c!==G.d.c?G.f=G.d.c?1:-1:g(G);else for(G=Le.a.b;G!==Le.a;G=Ee)if(Ee=G.b,G.c){for(G=G.a;n(G.b.a,G.a);G=G.c.b);for(;n(G.a,G.b.a);G=G.e);for(te=G.c.b,ge=void 0;G.e!==te;)if(n(G.b.a,te.a)){for(;te.e!==G&&(n((Q=te.e).b.a,Q.a)||h(te.a,te.b.a,te.e.b.a)<=0);)te=(ge=b(te.e,te)).b;te=te.c.b}else{for(;te.e!==G&&(n((K=G.c.b).a,K.b.a)||0<=h(G.b.a,G.a,G.c.b.a));)G=(ge=b(G,G.c.b)).b;G=G.e}for(;te.e.e!==G;)ge=b(te.e,te),te=ge.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Ee=(Le=this.b).a.b;Ee!==Le.a;Ee=Ee.b)if(Ee.c){for(this.h&&this.h(2,this.c),G=Ee.a;this.k&&this.k(G.a.d,this.c),(G=G.e)!==Ee.a;);this.i&&this.i(this.c)}}else{for(Le=this.b,Ee=!!this.l,G=!1,te=-1,ge=Le.a.d;ge!==Le.a;ge=ge.d)if(ge.c)for(G||(this.h&&this.h(4,this.c),G=!0),ye=ge.a;Ee&&(Ye=ye.b.d.c?0:1,te!==Ye&&(te=Ye,this.l&&this.l(!!te,this.c))),this.k&&this.k(ye.a.d,this.c),(ye=ye.e)!==ge.a;);G&&this.i&&this.i(this.c)}if(this.r){for(Le=this.b,G=Le.a.b;G!==Le.a;G=Ee)if(Ee=G.b,!G.c){for(ge=(te=G.a).e,ye=void 0;ge=(ye=ge).e,(ye.d=null)===ye.b.d&&(ye.c===ye?C(ye.a,null):(ye.a.c=ye.c,x(ye,ye.b.e)),(Ye=ye.b).c===Ye?C(Ye.a,null):(Ye.a.c=Ye.c,x(Ye,Ye.b.e)),T(ye)),ye!==te;);te=G.d,((G=G.b).d=te).b=G}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:de,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},de.prototype.gluDeleteTess=de.prototype.x,de.prototype.gluTessProperty=de.prototype.B,de.prototype.gluGetTessProperty=de.prototype.y,de.prototype.gluTessNormal=de.prototype.A,de.prototype.gluTessCallback=de.prototype.z,de.prototype.gluTessVertex=de.prototype.C,de.prototype.gluTessBeginPolygon=de.prototype.u,de.prototype.gluTessBeginContour=de.prototype.t,de.prototype.gluTessEndContour=de.prototype.v,de.prototype.gluTessEndPolygon=de.prototype.w,d!==void 0&&(d.exports=this.libtess)},{}],240:[function(e,d,f){function a(n,l,h,m){var i=0,o=(m=m===void 0?{}:m).loop===void 0?null:m.loop,c=m.palette===void 0?null:m.palette;if(l<=0||h<=0||65535<l||65535<h)throw new Error("Width/Height invalid.");function u(E){if(E=E.length,E<2||256<E||E&E-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return E}n[i++]=71,n[i++]=73,n[i++]=70,n[i++]=56,n[i++]=57,n[i++]=97;var p=0,g=0;if(c!==null){for(var v=u(c);v>>=1;)++p;if(v=1<<p,--p,m.background!==void 0){if(v<=(g=m.background))throw new Error("Background index out of range.");if(g===0)throw new Error("Background index explicitly passed as 0.")}}if(n[i++]=255&l,n[i++]=l>>8&255,n[i++]=255&h,n[i++]=h>>8&255,n[i++]=(c!==null?128:0)|p,n[i++]=g,n[i++]=0,c!==null)for(var b=0,_=c.length;b<_;++b){var x=c[b];n[i++]=x>>16&255,n[i++]=x>>8&255,n[i++]=255&x}if(o!==null){if(o<0||65535<o)throw new Error("Loop count invalid.");n[i++]=33,n[i++]=255,n[i++]=11,n[i++]=78,n[i++]=69,n[i++]=84,n[i++]=83,n[i++]=67,n[i++]=65,n[i++]=80,n[i++]=69,n[i++]=50,n[i++]=46,n[i++]=48,n[i++]=3,n[i++]=1,n[i++]=255&o,n[i++]=o>>8&255,n[i++]=0}var A=!1;this.addFrame=function(E,T,C,R,P,N){if(A===!0&&(--i,A=!1),N=N===void 0?{}:N,E<0||T<0||65535<E||65535<T)throw new Error("x/y invalid.");if(C<=0||R<=0||65535<C||65535<R)throw new Error("Width/Height invalid.");if(P.length<C*R)throw new Error("Not enough pixels for the frame size.");var k=!0,I=N.palette;if(I==null&&(k=!1,I=c),I==null)throw new Error("Must supply either a local or global palette.");for(var Y=u(I),B=0;Y>>=1;)++B;var Y=1<<B,W=N.delay===void 0?0:N.delay,H=N.disposal===void 0?0:N.disposal;if(H<0||3<H)throw new Error("Disposal out of range.");var X=!1,Z=0;if(N.transparent!==void 0&&N.transparent!==null&&(X=!0,(Z=N.transparent)<0||Y<=Z))throw new Error("Transparent color index.");if(H===0&&!X&&W===0||(n[i++]=33,n[i++]=249,n[i++]=4,n[i++]=H<<2|(X===!0?1:0),n[i++]=255&W,n[i++]=W>>8&255,n[i++]=Z,n[i++]=0),n[i++]=44,n[i++]=255&E,n[i++]=E>>8&255,n[i++]=255&T,n[i++]=T>>8&255,n[i++]=255&C,n[i++]=C>>8&255,n[i++]=255&R,n[i++]=R>>8&255,n[i++]=k===!0?128|B-1:0,k===!0)for(var q=0,ee=I.length;q<ee;++q){var L=I[q];n[i++]=L>>16&255,n[i++]=L>>8&255,n[i++]=255&L}return i=function(O,U,V,J){O[U++]=V;var le=U++,ce=1<<V,ue=ce-1,re=1+ce,de=1+re,ve=V+1,ie=0,_e=0;function Se(Ne){for(;Ne<=ie;)O[U++]=255&_e,_e>>=8,ie-=8,U===le+256&&(O[le]=255,le=U++)}function Te(Ne){_e|=Ne<<ie,ie+=ve,Se(8)}var we=J[0]&ue,De={};Te(ce);for(var Ie=1,We=J.length;Ie<We;++Ie){var $=J[Ie]&ue,se=we<<8|$,Ae=De[se];if(Ae===void 0){for(_e|=we<<ie,ie+=ve;8<=ie;)O[U++]=255&_e,_e>>=8,ie-=8,U===le+256&&(O[le]=255,le=U++);de===4096?(Te(ce),de=1+re,ve=V+1,De={}):(1<<ve<=de&&++ve,De[se]=de++),we=$}else we=Ae}return Te(we),Te(re),Se(1),le+1===U?O[le]=0:(O[le]=U-le-1,O[U++]=0),U}(n,i,B<2?2:B,P)},this.end=function(){return A===!1&&(n[i++]=59,A=!0),i},this.getOutputBuffer=function(){return n},this.setOutputBuffer=function(E){n=E},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(E){i=E}}function s(n,l,h,m){for(var i=n[l++],o=1<<i,c=1+o,u=1+c,p=i+1,g=(1<<p)-1,v=0,b=0,_=0,x=n[l++],A=new Int32Array(4096),E=null;;){for(;v<16&&x!==0;)b|=n[l++]<<v,v+=8,x===1?x=n[l++]:--x;if(v<p)break;var T=b&g;if(b>>=p,v-=p,T==o)u=1+c,g=(1<<(p=i+1))-1,E=null;else{if(T==c)break;for(var C=T<u?T:E,R=0,P=C;o<P;)P=A[P]>>8,++R;var N=P;if(m<_+R+(C!==T?1:0))return void console.log("Warning, gif stream longer than expected.");h[_++]=N;var k=_+=R;for(C!==T&&(h[_++]=N),P=C;R--;)P=A[P],h[--k]=255&P,P>>=8;E!==null&&u<4096&&(A[u++]=E<<8|N,g+1<=u&&p<12&&(++p,g=g<<1|1)),E=T}}_!==m&&console.log("Warning, gif stream shorter than expected.")}try{f.GifWriter=a,f.GifReader=function(n){var l=0;if(n[l++]!==71||n[l++]!==73||n[l++]!==70||n[l++]!==56||(n[l++]+1&253)!=56||n[l++]!==97)throw new Error("Invalid GIF 87a/89a header.");var h=n[l++]|n[l++]<<8,m=n[l++]|n[l++]<<8,i=n[l++],o=1<<1+(7&i),c=(n[l++],n[l++],null),u=null,p=(i>>7&&(c=l,l+=3*(u=o)),!0),g=[],v=0,b=null,_=0,x=null;for(this.width=h,this.height=m;p&&l<n.length;)switch(n[l++]){case 33:switch(n[l++]){case 255:if(n[l]!==11||n[l+1]==78&&n[l+2]==69&&n[l+3]==84&&n[l+4]==83&&n[l+5]==67&&n[l+6]==65&&n[l+7]==80&&n[l+8]==69&&n[l+9]==50&&n[l+10]==46&&n[l+11]==48&&n[l+12]==3&&n[l+13]==1&&n[l+16]==0)l+=14,x=n[l++]|n[l++]<<8,l++;else for(l+=12;;){if(!(0<=(E=n[l++])))throw Error("Invalid block size");if(E===0)break;l+=E}break;case 249:if(n[l++]!==4||n[l+4]!==0)throw new Error("Invalid graphics extension block.");var A=n[l++],v=n[l++]|n[l++]<<8,b=n[l++];!(1&A)&&(b=null),_=A>>2&7,l++;break;case 254:for(;;){if(!(0<=(E=n[l++])))throw Error("Invalid block size");if(E===0)break;l+=E}break;default:throw new Error("Unknown graphic control label: 0x"+n[l-1].toString(16))}break;case 44:var E,T=n[l++]|n[l++]<<8,C=n[l++]|n[l++]<<8,R=n[l++]|n[l++]<<8,P=n[l++]|n[l++]<<8,W=n[l++],N=W>>6&1,k=1<<1+(7&W),I=c,B=u,Y=!1,W=(W>>7&&(Y=!0,I=l,l+=3*(B=k)),l);for(l++;;){if(!(0<=(E=n[l++])))throw Error("Invalid block size");if(E===0)break;l+=E}g.push({x:T,y:C,width:R,height:P,has_local_palette:Y,palette_offset:I,palette_size:B,data_offset:W,data_length:l-W,transparent_index:b,interlaced:!!N,delay:v,disposal:_});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+n[l-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return x},this.frameInfo=function(H){if(H<0||H>=g.length)throw new Error("Frame index out of range.");return g[H]},this.decodeAndBlitFrameBGRA=function(H,X){for(var H=this.frameInfo(H),Z=H.width*H.height,q=new Uint8Array(Z),ee=(s(n,H.data_offset,q,Z),H.palette_offset),L=H.transparent_index,O=(L===null&&(L=256),H.width),U=h-O,V=O,J=4*(H.y*h+H.x),le=4*((H.y+H.height)*h+H.x),ce=J,ue=4*U,re=(H.interlaced===!0&&(ue+=4*h*7),8),de=0,ve=q.length;de<ve;++de){var ie,_e,Se=q[de];V===0&&(V=O,le<=(ce+=ue)&&(ue=4*U+4*h*(re-1),ce=J+(O+U)*(re<<1),re>>=1)),Se===L?ce+=4:(ie=n[ee+3*Se],_e=n[ee+3*Se+1],Se=n[ee+3*Se+2],X[ce++]=Se,X[ce++]=_e,X[ce++]=ie,X[ce++]=255),--V}},this.decodeAndBlitFrameRGBA=function(H,X){for(var H=this.frameInfo(H),Z=H.width*H.height,q=new Uint8Array(Z),ee=(s(n,H.data_offset,q,Z),H.palette_offset),L=H.transparent_index,O=(L===null&&(L=256),H.width),U=h-O,V=O,J=4*(H.y*h+H.x),le=4*((H.y+H.height)*h+H.x),ce=J,ue=4*U,re=(H.interlaced===!0&&(ue+=4*h*7),8),de=0,ve=q.length;de<ve;++de){var ie,_e,Se=q[de];V===0&&(V=O,le<=(ce+=ue)&&(ue=4*U+4*h*(re-1),ce=J+(O+U)*(re<<1),re>>=1)),Se===L?ce+=4:(ie=n[ee+3*Se],_e=n[ee+3*Se+1],Se=n[ee+3*Se+2],X[ce++]=ie,X[ce++]=_e,X[ce++]=Se,X[ce++]=255),--V}}}}catch{}},{}],241:[function(e,d,f){(function(a){var s,n;s=this,n=function(l){function h(D){if(this==null)throw TypeError();var S,M=String(this),j=M.length,D=D?Number(D):0;if(!((D=D!=D?0:D)<0||j<=D))return 55296<=(S=M.charCodeAt(D))&&S<=56319&&D+1<j&&56320<=(j=M.charCodeAt(D+1))&&j<=57343?1024*(S-55296)+j-56320+65536:S}String.prototype.codePointAt||((m=function(){try{var y={},S=Object.defineProperty,M=S(y,y,y)&&S}catch{}return M}())?m(String.prototype,"codePointAt",{value:h,configurable:!0,writable:!0}):String.prototype.codePointAt=h);var m,i=0,o=-3;function c(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function u(y,S){this.source=y,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=S,this.destLen=0,this.ltree=new c,this.dtree=new c}var p=new c,g=new c,v=new Uint8Array(30),b=new Uint16Array(30),_=new Uint8Array(30),x=new Uint16Array(30),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new c,T=new Uint8Array(320);function C(y,S,M,j){for(var D,F=0;F<M;++F)y[F]=0;for(F=0;F<30-M;++F)y[F+M]=F/M|0;for(D=j,F=0;F<30;++F)S[F]=D,D+=1<<y[F]}var R=new Uint16Array(16);function P(y,S,M,j){for(var D,F=0;F<16;++F)y.table[F]=0;for(F=0;F<j;++F)y.table[S[M+F]]++;for(F=D=y.table[0]=0;F<16;++F)R[F]=D,D+=y.table[F];for(F=0;F<j;++F)S[M+F]&&(y.trans[R[S[M+F]]++]=F)}function N(y,S,M){if(!S)return M;for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;var j=y.tag&65535>>>16-S;return y.tag>>>=S,y.bitcount-=S,j+M}function k(y,S){for(;y.bitcount<24;)y.tag|=y.source[y.sourceIndex++]<<y.bitcount,y.bitcount+=8;for(var M=0,j=0,D=0,F=y.tag;j=2*j+(1&F),F>>>=1,M+=S.table[++D],0<=(j-=S.table[D]););return y.tag=F,y.bitcount-=D,S.trans[M+j]}function I(y,S,M){for(;;){var j=k(y,S);if(j===256)return i;if(j<256)y.dest[y.destLen++]=j;else for(var D,F=N(y,v[j-=257],b[j]),j=k(y,M),z=D=y.destLen-N(y,_[j],x[j]);z<D+F;++z)y.dest[y.destLen++]=y.dest[z]}}for(var B=p,Y=g,W=0;W<7;++W)B.table[W]=0;for(B.table[7]=24,B.table[8]=152,B.table[9]=112,W=0;W<24;++W)B.trans[W]=256+W;for(W=0;W<144;++W)B.trans[24+W]=W;for(W=0;W<8;++W)B.trans[168+W]=280+W;for(W=0;W<112;++W)B.trans[176+W]=144+W;for(W=0;W<5;++W)Y.table[W]=0;for(Y.table[5]=32,W=0;W<32;++W)Y.trans[W]=W;C(v,b,4,3),C(_,x,2,1),v[28]=0,b[28]=258;var H=function(y,S){var M,j,D,F=new u(y,S);do{switch(D=void 0,(j=F).bitcount--||(j.tag=j.source[j.sourceIndex++],j.bitcount=7),D=1&j.tag,j.tag>>>=1,j=D,N(F,2,0)){case 0:M=function(ke){for(var ut,vt;8<ke.bitcount;)ke.sourceIndex--,ke.bitcount-=8;if((ut=256*ke.source[ke.sourceIndex+1]+ke.source[ke.sourceIndex])!==(65535&~(256*ke.source[ke.sourceIndex+3]+ke.source[ke.sourceIndex+2])))return o;for(ke.sourceIndex+=4,vt=ut;vt;--vt)ke.dest[ke.destLen++]=ke.source[ke.sourceIndex++];return ke.bitcount=0,i}(F);break;case 1:M=I(F,p,g);break;case 2:qe=Ge=Qe=Oe=z=be=Ce=Pe=Me=he=fe=ne=void 0;for(var z,ne=F,fe=F.ltree,he=F.dtree,Me=N(ne,5,257),Pe=N(ne,5,1),Ce=N(ne,4,4),be=0;be<19;++be)T[be]=0;for(be=0;be<Ce;++be){var Qe=N(ne,3,0);T[A[be]]=Qe}for(P(E,T,0,19),z=0;z<Me+Pe;){var Ge=k(ne,E);switch(Ge){case 16:for(var qe=T[z-1],Oe=N(ne,2,3);Oe;--Oe)T[z++]=qe;break;case 17:for(Oe=N(ne,3,3);Oe;--Oe)T[z++]=0;break;case 18:for(Oe=N(ne,7,11);Oe;--Oe)T[z++]=0;break;default:T[z++]=Ge}}P(fe,T,0,Me),P(he,T,Me,Pe),M=I(F,F.ltree,F.dtree);break;default:M=o}if(M!==i)throw new Error("Data error")}while(!j);return F.destLen<F.dest.length?typeof F.dest.slice=="function"?F.dest.slice(0,F.destLen):F.dest.subarray(0,F.destLen):F.dest};function X(y,S,M,j,D){return Math.pow(1-D,3)*y+3*Math.pow(1-D,2)*D*S+3*(1-D)*Math.pow(D,2)*M+Math.pow(D,3)*j}function Z(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function q(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ee(y){throw new Error(y)}function L(y,S){y||ee(S)}Z.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Z.prototype.addPoint=function(y,S){typeof y=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=y,this.x2=y),y<this.x1&&(this.x1=y),y>this.x2&&(this.x2=y)),typeof S=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=S,this.y2=S),S<this.y1&&(this.y1=S),S>this.y2&&(this.y2=S))},Z.prototype.addX=function(y){this.addPoint(y,null)},Z.prototype.addY=function(y){this.addPoint(null,y)},Z.prototype.addBezier=function(y,S,M,j,D,F,z,ne){var fe=[y,S],he=[M,j],Me=[D,F],Pe=[z,ne];this.addPoint(y,S),this.addPoint(z,ne);for(var Ce=0;Ce<=1;Ce++){var be,Qe=6*fe[Ce]-12*he[Ce]+6*Me[Ce],Ge=-3*fe[Ce]+9*he[Ce]-9*Me[Ce]+3*Pe[Ce],qe=3*he[Ce]-3*fe[Ce];Ge==0?Qe==0||0<(be=-qe/Qe)&&be<1&&(Ce===0&&this.addX(X(fe[Ce],he[Ce],Me[Ce],Pe[Ce],be)),Ce===1&&this.addY(X(fe[Ce],he[Ce],Me[Ce],Pe[Ce],be))):(be=Math.pow(Qe,2)-4*qe*Ge)<0||(0<(qe=(-Qe+Math.sqrt(be))/(2*Ge))&&qe<1&&(Ce===0&&this.addX(X(fe[Ce],he[Ce],Me[Ce],Pe[Ce],qe)),Ce===1&&this.addY(X(fe[Ce],he[Ce],Me[Ce],Pe[Ce],qe))),0<(qe=(-Qe-Math.sqrt(be))/(2*Ge))&&qe<1&&(Ce===0&&this.addX(X(fe[Ce],he[Ce],Me[Ce],Pe[Ce],qe)),Ce===1&&this.addY(X(fe[Ce],he[Ce],Me[Ce],Pe[Ce],qe))))}},Z.prototype.addQuad=function(y,S,M,j,D,F){M=y+2/3*(M-y),j=S+2/3*(j-S),this.addBezier(y,S,M,j,M+1/3*(D-y),j+1/3*(F-S),D,F)},q.prototype.moveTo=function(y,S){this.commands.push({type:"M",x:y,y:S})},q.prototype.lineTo=function(y,S){this.commands.push({type:"L",x:y,y:S})},q.prototype.curveTo=q.prototype.bezierCurveTo=function(y,S,M,j,D,F){this.commands.push({type:"C",x1:y,y1:S,x2:M,y2:j,x:D,y:F})},q.prototype.quadTo=q.prototype.quadraticCurveTo=function(y,S,M,j){this.commands.push({type:"Q",x1:y,y1:S,x:M,y:j})},q.prototype.close=q.prototype.closePath=function(){this.commands.push({type:"Z"})},q.prototype.extend=function(y){var S;if(y.commands)y=y.commands;else if(y instanceof Z)return S=y,this.moveTo(S.x1,S.y1),this.lineTo(S.x2,S.y1),this.lineTo(S.x2,S.y2),this.lineTo(S.x1,S.y2),void this.close();Array.prototype.push.apply(this.commands,y)},q.prototype.getBoundingBox=function(){for(var y=new Z,S=0,M=0,j=0,D=0,F=0;F<this.commands.length;F++){var z=this.commands[F];switch(z.type){case"M":y.addPoint(z.x,z.y),S=j=z.x,M=D=z.y;break;case"L":y.addPoint(z.x,z.y),j=z.x,D=z.y;break;case"Q":y.addQuad(j,D,z.x1,z.y1,z.x,z.y),j=z.x,D=z.y;break;case"C":y.addBezier(j,D,z.x1,z.y1,z.x2,z.y2,z.x,z.y),j=z.x,D=z.y;break;case"Z":j=S,D=M;break;default:throw new Error("Unexpected path command "+z.type)}}return y.isEmpty()&&y.addPoint(0,0),y},q.prototype.draw=function(y){y.beginPath();for(var S=0;S<this.commands.length;S+=1){var M=this.commands[S];M.type==="M"?y.moveTo(M.x,M.y):M.type==="L"?y.lineTo(M.x,M.y):M.type==="C"?y.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?y.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&y.closePath()}this.fill&&(y.fillStyle=this.fill,y.fill()),this.stroke&&(y.strokeStyle=this.stroke,y.lineWidth=this.strokeWidth,y.stroke())},q.prototype.toPathData=function(y){function S(){for(var F=arguments,z="",ne=0;ne<arguments.length;ne+=1){var fe=F[ne];0<=fe&&0<ne&&(z+=" "),z+=(fe=fe,Math.round(fe)===fe?""+Math.round(fe):fe.toFixed(y))}return z}y=y!==void 0?y:2;for(var M="",j=0;j<this.commands.length;j+=1){var D=this.commands[j];D.type==="M"?M+="M"+S(D.x,D.y):D.type==="L"?M+="L"+S(D.x,D.y):D.type==="C"?M+="C"+S(D.x1,D.y1,D.x2,D.y2,D.x,D.y):D.type==="Q"?M+="Q"+S(D.x1,D.y1,D.x,D.y):D.type==="Z"&&(M+="Z")}return M},q.prototype.toSVG=function(y){var S=(S='<path d="')+this.toPathData(y)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?S+=' fill="none"':S+=' fill="'+this.fill+'"'),this.stroke&&(S+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),S+="/>"},q.prototype.toDOMElement=function(S){var S=this.toPathData(S),M=document.createElementNS("http://www.w3.org/2000/svg","path");return M.setAttribute("d",S),M};var O={fail:ee,argument:L,assert:L},U={},V={},J={};function le(y){return function(){return y}}V.BYTE=function(y){return O.argument(0<=y&&y<=255,"Byte value should be between 0 and 255."),[y]},J.BYTE=le(1),V.CHAR=function(y){return[y.charCodeAt(0)]},J.CHAR=le(1),V.CHARARRAY=function(y){for(var S=[],M=0;M<y.length;M+=1)S[M]=y.charCodeAt(M);return S},J.CHARARRAY=function(y){return y.length},V.USHORT=function(y){return[y>>8&255,255&y]},J.USHORT=le(2),V.SHORT=function(y){return[(y=32768<=y?-(65536-y):y)>>8&255,255&y]},J.SHORT=le(2),V.UINT24=function(y){return[y>>16&255,y>>8&255,255&y]},J.UINT24=le(3),V.ULONG=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]},J.ULONG=le(4),V.LONG=function(y){return[(y=2147483648<=y?-(4294967296-y):y)>>24&255,y>>16&255,y>>8&255,255&y]},J.LONG=le(4),V.FIXED=V.ULONG,J.FIXED=J.ULONG,V.FWORD=V.SHORT,J.FWORD=J.SHORT,V.UFWORD=V.USHORT,J.UFWORD=J.USHORT,V.LONGDATETIME=function(y){return[0,0,0,0,y>>24&255,y>>16&255,y>>8&255,255&y]},J.LONGDATETIME=le(8),V.TAG=function(y){return O.argument(y.length===4,"Tag should be exactly 4 ASCII characters."),[y.charCodeAt(0),y.charCodeAt(1),y.charCodeAt(2),y.charCodeAt(3)]},J.TAG=le(4),V.Card8=V.BYTE,J.Card8=J.BYTE,V.Card16=V.USHORT,J.Card16=J.USHORT,V.OffSize=V.BYTE,J.OffSize=J.BYTE,V.SID=V.USHORT,J.SID=J.USHORT,V.NUMBER=function(y){return-107<=y&&y<=107?[y+139]:108<=y&&y<=1131?[247+((y-=108)>>8),255&y]:-1131<=y&&y<=-108?[251+((y=-y-108)>>8),255&y]:-32768<=y&&y<=32767?V.NUMBER16(y):V.NUMBER32(y)},J.NUMBER=function(y){return V.NUMBER(y).length},V.NUMBER16=function(y){return[28,y>>8&255,255&y]},J.NUMBER16=le(3),V.NUMBER32=function(y){return[29,y>>24&255,y>>16&255,y>>8&255,255&y]},J.NUMBER32=le(5),V.REAL=function(y){for(var S=y.toString(),M=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(S),j=(M&&(M=parseFloat("1e"+((M[2]?+M[2]:0)+M[1].length)),S=(Math.round(y*M)/M).toString()),""),D=0,F=S.length;D<F;D+=1){var z=S[D];j+=z==="e"?S[++D]==="-"?"c":"b":z==="."?"a":z==="-"?"e":z}for(var ne=[30],fe=0,he=(j+=1&j.length?"f":"ff").length;fe<he;fe+=2)ne.push(parseInt(j.substr(fe,2),16));return ne},J.REAL=function(y){return V.REAL(y).length},V.NAME=V.CHARARRAY,J.NAME=J.CHARARRAY,V.STRING=V.CHARARRAY,J.STRING=J.CHARARRAY,U.UTF8=function(y,S,M){for(var j=[],D=M,F=0;F<D;F++,S+=1)j[F]=y.getUint8(S);return String.fromCharCode.apply(null,j)},U.UTF16=function(y,S,M){for(var j=[],D=M/2,F=0;F<D;F++,S+=2)j[F]=y.getUint16(S);return String.fromCharCode.apply(null,j)},V.UTF16=function(y){for(var S=[],M=0;M<y.length;M+=1){var j=y.charCodeAt(M);S[S.length]=j>>8&255,S[S.length]=255&j}return S},J.UTF16=function(y){return 2*y.length};var ce,ue={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},re=(U.MACSTRING=function(y,S,M,j){var D=ue[j];if(D!==void 0){for(var F="",z=0;z<M;z++){var ne=y.getUint8(S+z);F+=ne<=127?String.fromCharCode(ne):D[127&ne]}return F}},typeof WeakMap=="function"&&new WeakMap);function de(y){return-128<=y&&y<=127}V.MACSTRING=function(y,S){var M=function(z){if(!ce)for(var ne in ce={},ue)ce[ne]=new String(ne);var fe=ce[z];if(fe!==void 0){if(re){var he=re.get(fe);if(he!==void 0)return he}var Me=ue[z];if(Me!==void 0){for(var Pe={},Ce=0;Ce<Me.length;Ce++)Pe[Me.charCodeAt(Ce)]=Ce+128;return re&&re.set(fe,Pe),Pe}}}(S);if(M!==void 0){for(var j=[],D=0;D<y.length;D++){var F=y.charCodeAt(D);if(128<=F&&(F=M[F])===void 0)return;j[D]=F}return j}},J.MACSTRING=function(y,S){return y=V.MACSTRING(y,S),y!==void 0?y.length:0},V.VARDELTAS=function(y){for(var j=0,S=[];j<y.length;)var M=y[j],j=(M===0?function(D,F,z){for(var ne=0,fe=D.length;F<fe&&ne<64&&D[F]===0;)++F,++ne;return z.push(128|ne-1),F}:-128<=M&&M<=127?function(D,F,z){for(var ne=0,fe=D.length,he=F;he<fe&&ne<64;){var Me=D[he];if(!de(Me)||Me===0&&he+1<fe&&D[he+1]===0)break;++he,++ne}z.push(ne-1);for(var Pe=F;Pe<he;++Pe)z.push(D[Pe]+256&255);return he}:function(D,F,z){for(var ne=0,fe=D.length,he=F;he<fe&&ne<64;){var Me=D[he];if(Me===0||de(Me)&&he+1<fe&&de(D[he+1]))break;++he,++ne}z.push(64|ne-1);for(var Pe=F;Pe<he;++Pe){var Ce=D[Pe];z.push(Ce+65536>>8&255,Ce+256&255)}return he})(y,j,S);return S},V.INDEX=function(y){for(var S=1,M=[S],j=[],D=0;D<y.length;D+=1){var F=V.OBJECT(y[D]);Array.prototype.push.apply(j,F),S+=F.length,M.push(S)}if(j.length===0)return[0,0];for(var z=[],ne=1+Math.floor(Math.log(S)/Math.log(2))/8|0,fe=[void 0,V.BYTE,V.USHORT,V.UINT24,V.ULONG][ne],he=0;he<M.length;he+=1){var Me=fe(M[he]);Array.prototype.push.apply(z,Me)}return Array.prototype.concat(V.Card16(y.length),V.OffSize(ne),z,j)},J.INDEX=function(y){return V.INDEX(y).length},V.DICT=function(y){for(var S=[],M=Object.keys(y),j=M.length,D=0;D<j;D+=1){var F=parseInt(M[D],0),z=y[F];S=(S=S.concat(V.OPERAND(z.value,z.type))).concat(V.OPERATOR(F))}return S},J.DICT=function(y){return V.DICT(y).length},V.OPERATOR=function(y){return y<1200?[y]:[12,y-1200]},V.OPERAND=function(y,S){var M=[];if(Array.isArray(S))for(var j=0;j<S.length;j+=1)O.argument(y.length===S.length,"Not enough arguments given for type"+S),M=M.concat(V.OPERAND(y[j],S[j]));else if(S==="SID")M=M.concat(V.NUMBER(y));else if(S==="offset")M=M.concat(V.NUMBER32(y));else if(S==="number")M=M.concat(V.NUMBER(y));else{if(S!=="real")throw new Error("Unknown operand type "+S);M=M.concat(V.REAL(y))}return M},V.OP=V.BYTE,J.OP=J.BYTE;var ve=typeof WeakMap=="function"&&new WeakMap;function ie(y,S,M){for(var j=0;j<S.length;j+=1){var D=S[j];this[D.name]=D.value}if(this.tableName=y,this.fields=S,M)for(var F=Object.keys(M),z=0;z<F.length;z+=1){var ne=F[z],fe=M[ne];this[ne]!==void 0&&(this[ne]=fe)}}function _e(y,S,M){M===void 0&&(M=S.length);var j=new Array(S.length+1);j[0]={name:y+"Count",type:"USHORT",value:M};for(var D=0;D<S.length;D++)j[D+1]={name:y+D,type:"USHORT",value:S[D]};return j}function Se(y,S,M){var j=S.length,D=new Array(j+1);D[0]={name:y+"Count",type:"USHORT",value:j};for(var F=0;F<j;F++)D[F+1]={name:y+F,type:"TABLE",value:M(S[F],F)};return D}function Te(y,S,M){var j=S.length,D=[];D[0]={name:y+"Count",type:"USHORT",value:j};for(var F=0;F<j;F++)D=D.concat(M(S[F],F));return D}function we(y){y.format===1?ie.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(_e("glyph",y.glyphs))):O.assert(!1,"Can't create coverage table format 2 yet.")}function De(y){ie.call(this,"scriptListTable",Te("scriptRecord",y,function(S,M){var j=S.script,D=j.defaultLangSys;return O.assert(!!D,"Unable to write GSUB: script "+S.tag+" has no default language system."),[{name:"scriptTag"+M,type:"TAG",value:S.tag},{name:"script"+M,type:"TABLE",value:new ie("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ie("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:D.reqFeatureIndex}].concat(_e("featureIndex",D.featureIndexes)))}].concat(Te("langSys",j.langSysRecords,function(F,z){var ne=F.langSys;return[{name:"langSysTag"+z,type:"TAG",value:F.tag},{name:"langSys"+z,type:"TABLE",value:new ie("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ne.reqFeatureIndex}].concat(_e("featureIndex",ne.featureIndexes)))}]})))}]}))}function Ie(y){ie.call(this,"featureListTable",Te("featureRecord",y,function(S,M){var j=S.feature;return[{name:"featureTag"+M,type:"TAG",value:S.tag},{name:"feature"+M,type:"TABLE",value:new ie("featureTable",[{name:"featureParams",type:"USHORT",value:j.featureParams}].concat(_e("lookupListIndex",j.lookupListIndexes)))}]}))}function We(y,S){ie.call(this,"lookupListTable",Se("lookup",y,function(M){var j=S[M.lookupType];return O.assert(!!j,"Unable to write GSUB lookup type "+M.lookupType+" tables."),new ie("lookupTable",[{name:"lookupType",type:"USHORT",value:M.lookupType},{name:"lookupFlag",type:"USHORT",value:M.lookupFlag}].concat(Se("subtable",M.subtables,j)))}))}V.CHARSTRING=function(y){if(ve){var S=ve.get(y);if(S!==void 0)return S}for(var F=[],M=y.length,j=0;j<M;j+=1)var D=y[j],F=F.concat(V[D.type](D.value));return ve&&ve.set(y,F),F},J.CHARSTRING=function(y){return V.CHARSTRING(y).length},V.OBJECT=function(y){var S=V[y.type];return O.argument(S!==void 0,"No encoding function for type "+y.type),S(y.value)},J.OBJECT=function(y){var S=J[y.type];return O.argument(S!==void 0,"No sizeOf function for type "+y.type),S(y.value)},V.TABLE=function(y){for(var S=[],M=y.fields.length,j=[],D=[],F=0;F<M;F+=1){var z=y.fields[F],fe=V[z.type],ne=(O.argument(fe!==void 0,"No encoding function for field type "+z.type+" ("+z.name+")"),y[z.name]),fe=fe(ne=ne===void 0?z.value:ne);z.type==="TABLE"?(D.push(S.length),S=S.concat([0,0]),j.push(fe)):S=S.concat(fe)}for(var he=0;he<j.length;he+=1){var Me=D[he],Pe=S.length;O.argument(Pe<65536,"Table "+y.tableName+" too big."),S[Me]=Pe>>8,S[Me+1]=255&Pe,S=S.concat(j[he])}return S},J.TABLE=function(y){for(var S=0,M=y.fields.length,j=0;j<M;j+=1){var D=y.fields[j],F=J[D.type],z=(O.argument(F!==void 0,"No sizeOf function for field type "+D.type+" ("+D.name+")"),y[D.name]);S+=F(z=z===void 0?D.value:z),D.type==="TABLE"&&(S+=2)}return S},V.RECORD=V.TABLE,J.RECORD=J.TABLE,V.LITERAL=function(y){return y},J.LITERAL=function(y){return y.length},ie.prototype.encode=function(){return V.TABLE(this)},ie.prototype.sizeOf=function(){return J.TABLE(this)};var $={Table:ie,Record:ie,Coverage:(we.prototype=Object.create(ie.prototype)).constructor=we,ScriptList:(De.prototype=Object.create(ie.prototype)).constructor=De,FeatureList:(Ie.prototype=Object.create(ie.prototype)).constructor=Ie,LookupList:(We.prototype=Object.create(ie.prototype)).constructor=We,ushortList:_e,tableList:Se,recordList:Te};function se(y,S){return y.getUint8(S)}function Ae(y,S){return y.getUint16(S,!1)}function Ne(y,S){return y.getUint32(S,!1)}function ze(y,S){return y.getInt16(S,!1)+y.getUint16(S+2,!1)/65535}var Ve={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function xe(y,S){this.data=y,this.offset=S,this.relativeOffset=0}xe.prototype.parseByte=function(){var y=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},xe.prototype.parseChar=function(){var y=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,y},xe.prototype.parseCard8=xe.prototype.parseByte,xe.prototype.parseCard16=xe.prototype.parseUShort=function(){var y=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},xe.prototype.parseSID=xe.prototype.parseUShort,xe.prototype.parseOffset16=xe.prototype.parseUShort,xe.prototype.parseShort=function(){var y=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,y},xe.prototype.parseF2Dot14=function(){var y=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,y},xe.prototype.parseOffset32=xe.prototype.parseULong=function(){var y=Ne(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},xe.prototype.parseFixed=function(){var y=ze(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,y},xe.prototype.parseString=function(y){var S=this.data,M=this.offset+this.relativeOffset,j="";this.relativeOffset+=y;for(var D=0;D<y;D++)j+=String.fromCharCode(S.getUint8(M+D));return j},xe.prototype.parseTag=function(){return this.parseString(4)},xe.prototype.parseLongDateTime=function(){var y=Ne(this.data,this.offset+this.relativeOffset+4);return y-=2082844800,this.relativeOffset+=8,y},xe.prototype.parseVersion=function(y){var S=Ae(this.data,this.offset+this.relativeOffset),M=Ae(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,S+M/(y=y===void 0?4096:y)/10},xe.prototype.skip=function(y,S){this.relativeOffset+=Ve[y]*(S=S===void 0?1:S)},xe.prototype.parseULongList=function(y){y===void 0&&(y=this.parseULong());for(var S=new Array(y),M=this.data,j=this.offset+this.relativeOffset,D=0;D<y;D++)S[D]=M.getUint32(j),j+=4;return this.relativeOffset+=4*y,S},xe.prototype.parseOffset16List=xe.prototype.parseUShortList=function(y){y===void 0&&(y=this.parseUShort());for(var S=new Array(y),M=this.data,j=this.offset+this.relativeOffset,D=0;D<y;D++)S[D]=M.getUint16(j),j+=2;return this.relativeOffset+=2*y,S},xe.prototype.parseShortList=function(y){for(var S=new Array(y),M=this.data,j=this.offset+this.relativeOffset,D=0;D<y;D++)S[D]=M.getInt16(j),j+=2;return this.relativeOffset+=2*y,S},xe.prototype.parseByteList=function(y){for(var S=new Array(y),M=this.data,j=this.offset+this.relativeOffset,D=0;D<y;D++)S[D]=M.getUint8(j++);return this.relativeOffset+=y,S},xe.prototype.parseList=function(y,S){S||(S=y,y=this.parseUShort());for(var M=new Array(y),j=0;j<y;j++)M[j]=S.call(this);return M},xe.prototype.parseList32=function(y,S){S||(S=y,y=this.parseULong());for(var M=new Array(y),j=0;j<y;j++)M[j]=S.call(this);return M},xe.prototype.parseRecordList=function(y,S){S||(S=y,y=this.parseUShort());for(var M=new Array(y),j=Object.keys(S),D=0;D<y;D++){for(var F={},z=0;z<j.length;z++){var ne=j[z],fe=S[ne];F[ne]=fe.call(this)}M[D]=F}return M},xe.prototype.parseRecordList32=function(y,S){S||(S=y,y=this.parseULong());for(var M=new Array(y),j=Object.keys(S),D=0;D<y;D++){for(var F={},z=0;z<j.length;z++){var ne=j[z],fe=S[ne];F[ne]=fe.call(this)}M[D]=F}return M},xe.prototype.parseStruct=function(y){if(typeof y=="function")return y.call(this);for(var S=Object.keys(y),M={},j=0;j<S.length;j++){var D=S[j],F=y[D];M[D]=F.call(this)}return M},xe.prototype.parseValueRecord=function(y){var S;if((y=y===void 0?this.parseUShort():y)!==0)return S={},1&y&&(S.xPlacement=this.parseShort()),2&y&&(S.yPlacement=this.parseShort()),4&y&&(S.xAdvance=this.parseShort()),8&y&&(S.yAdvance=this.parseShort()),16&y&&(S.xPlaDevice=void 0,this.parseShort()),32&y&&(S.yPlaDevice=void 0,this.parseShort()),64&y&&(S.xAdvDevice=void 0,this.parseShort()),128&y&&(S.yAdvDevice=void 0,this.parseShort()),S},xe.prototype.parseValueRecordList=function(){for(var y=this.parseUShort(),S=this.parseUShort(),M=new Array(S),j=0;j<S;j++)M[j]=this.parseValueRecord(y);return M},xe.prototype.parsePointer=function(y){var S=this.parseOffset16();if(0<S)return new xe(this.data,this.offset+S).parseStruct(y)},xe.prototype.parsePointer32=function(y){var S=this.parseOffset32();if(0<S)return new xe(this.data,this.offset+S).parseStruct(y)},xe.prototype.parseListOfLists=function(y){for(var S=this.parseOffset16List(),M=S.length,j=this.relativeOffset,D=new Array(M),F=0;F<M;F++){var z=S[F];if(z===0)D[F]=void 0;else if(this.relativeOffset=z,y){for(var ne=this.parseOffset16List(),fe=new Array(ne.length),he=0;he<ne.length;he++)this.relativeOffset=z+ne[he],fe[he]=y.call(this);D[F]=fe}else D[F]=this.parseUShortList()}return this.relativeOffset=j,D},xe.prototype.parseCoverage=function(){var y=this.offset+this.relativeOffset,S=this.parseUShort(),M=this.parseUShort();if(S===1)return{format:1,glyphs:this.parseUShortList(M)};if(S!==2)throw new Error("0x"+y.toString(16)+": Coverage format must be 1 or 2.");for(var j=new Array(M),D=0;D<M;D++)j[D]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:j}},xe.prototype.parseClassDef=function(){var y=this.offset+this.relativeOffset,S=this.parseUShort();if(S===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(S===2)return{format:2,ranges:this.parseRecordList({start:xe.uShort,end:xe.uShort,classId:xe.uShort})};throw new Error("0x"+y.toString(16)+": ClassDef format must be 1 or 2.")},xe.list=function(y,S){return function(){return this.parseList(y,S)}},xe.list32=function(y,S){return function(){return this.parseList32(y,S)}},xe.recordList=function(y,S){return function(){return this.parseRecordList(y,S)}},xe.recordList32=function(y,S){return function(){return this.parseRecordList32(y,S)}},xe.pointer=function(y){return function(){return this.parsePointer(y)}},xe.pointer32=function(y){return function(){return this.parsePointer32(y)}},xe.tag=xe.prototype.parseTag,xe.byte=xe.prototype.parseByte,xe.uShort=xe.offset16=xe.prototype.parseUShort,xe.uShortList=xe.prototype.parseUShortList,xe.uLong=xe.offset32=xe.prototype.parseULong,xe.uLongList=xe.prototype.parseULongList,xe.struct=xe.prototype.parseStruct,xe.coverage=xe.prototype.parseCoverage,xe.classDef=xe.prototype.parseClassDef;var oe={reserved:xe.uShort,reqFeatureIndex:xe.uShort,featureIndexes:xe.uShortList},ae=(xe.prototype.parseScriptList=function(){return this.parsePointer(xe.recordList({tag:xe.tag,script:xe.pointer({defaultLangSys:xe.pointer(oe),langSysRecords:xe.recordList({tag:xe.tag,langSys:xe.pointer(oe)})})}))||[]},xe.prototype.parseFeatureList=function(){return this.parsePointer(xe.recordList({tag:xe.tag,feature:xe.pointer({featureParams:xe.offset16,lookupListIndexes:xe.uShortList})}))||[]},xe.prototype.parseLookupList=function(y){return this.parsePointer(xe.list(xe.pointer(function(){var S=this.parseUShort(),M=(O.argument(1<=S&&S<=9,"GPOS/GSUB lookup type "+S+" unknown."),this.parseUShort()),j=16&M;return{lookupType:S,lookupFlag:M,subtables:this.parseList(xe.pointer(y[S])),markFilteringSet:j?this.parseUShort():void 0}})))||[]},xe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var y=this.parseUShort(),S=this.parseUShort();return O.argument(y===1&&S<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:xe.offset32,featureTableSubstitutionOffset:xe.offset32})})||[]},{getByte:se,getCard8:se,getUShort:Ae,getCard16:Ae,getShort:function(y,S){return y.getInt16(S,!1)},getULong:Ne,getFixed:ze,getTag:function(y,S){for(var M="",j=S;j<S+4;j+=1)M+=String.fromCharCode(y.getInt8(j));return M},getOffset:function(y,S,M){for(var j=0,D=0;D<M;D+=1)j=(j<<=8)+y.getUint8(S+D);return j},getBytes:function(y,S,M){for(var j=[],D=S;D<M;D+=1)j.push(y.getUint8(D));return j},bytesToString:function(y){for(var S="",M=0;M<y.length;M+=1)S+=String.fromCharCode(y[M]);return S},Parser:xe}),K={parse:function(y,S){for(var M={},j=(M.version=ae.getUShort(y,S),O.argument(M.version===0,"cmap table version should be 0."),M.numTables=ae.getUShort(y,S+2),-1),D=M.numTables-1;0<=D;--D){var F=ae.getUShort(y,S+4+8*D),z=ae.getUShort(y,S+4+8*D+2);if(F===3&&(z===0||z===1||z===10)||F===0&&(z===0||z===1||z===2||z===3||z===4)){j=ae.getULong(y,S+4+8*D+4);break}}if(j===-1)throw new Error("No valid cmap sub-tables found.");var ne=new ae.Parser(y,S+j);if(M.format=ne.parseUShort(),M.format===12){var fe,he=M,Me=ne;Me.parseUShort(),he.length=Me.parseULong(),he.language=Me.parseULong(),he.groupCount=fe=Me.parseULong(),he.glyphIndexMap={};for(var Pe=0;Pe<fe;Pe+=1)for(var Ce=Me.parseULong(),be=Me.parseULong(),Qe=Me.parseULong(),Ge=Ce;Ge<=be;Ge+=1)he.glyphIndexMap[Ge]=Qe,Qe++}else{if(M.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+M.format+").");var qe=M,Oe=y,ke=S,ut=j;qe.length=ne.parseUShort(),qe.language=ne.parseUShort(),qe.segCount=vt=ne.parseUShort()>>1,ne.skip("uShort",3),qe.glyphIndexMap={};for(var vt,dt=new ae.Parser(Oe,ke+ut+14),ht=new ae.Parser(Oe,ke+ut+16+2*vt),Mt=new ae.Parser(Oe,ke+ut+16+4*vt),qt=new ae.Parser(Oe,ke+ut+16+6*vt),$t=ke+ut+16+8*vt,or=0;or<vt-1;or+=1)for(var Mr=void 0,Tr=dt.parseUShort(),qr=ht.parseUShort(),Bt=Mt.parseShort(),Zt=qt.parseUShort(),kt=qr;kt<=Tr;kt+=1)Zt!==0?($t=($t=qt.offset+qt.relativeOffset-2)+Zt+2*(kt-qr),(Mr=ae.getUShort(Oe,$t))!==0&&(Mr=Mr+Bt&65535)):Mr=kt+Bt&65535,qe.glyphIndexMap[kt]=Mr}return M},make:function(y){for(var S=!0,M=y.length-1;0<M;--M)if(65535<y.get(M).unicode){console.log("Adding CMAP format 12 (needed!)"),S=!1;break}var j,D,F=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:S?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:S?12:20}],z=(F=(F=S?F:F.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new $.Table("cmap",F));for(z.segments=[],M=0;M<y.length;M+=1){for(var ne=y.get(M),fe=0;fe<ne.unicodes.length;fe+=1)j=ne.unicodes[fe],D=M,z.segments.push({end:j,start:j,delta:-(j-D),offset:0,glyphIndex:D});z.segments=z.segments.sort(function(ke,ut){return ke.start-ut.start})}z.segments.push({end:65535,start:65535,delta:1,offset:0});var he=z.segments.length,Me=0,Pe=[],Ce=[],be=[],Qe=[],Ge=[],qe=[];for(M=0;M<he;M+=1){var Oe=z.segments[M];Oe.end<=65535&&Oe.start<=65535?(Pe=Pe.concat({name:"end_"+M,type:"USHORT",value:Oe.end}),Ce=Ce.concat({name:"start_"+M,type:"USHORT",value:Oe.start}),be=be.concat({name:"idDelta_"+M,type:"SHORT",value:Oe.delta}),Qe=Qe.concat({name:"idRangeOffset_"+M,type:"USHORT",value:Oe.offset}),Oe.glyphId!==void 0&&(Ge=Ge.concat({name:"glyph_"+M,type:"USHORT",value:Oe.glyphId}))):Me+=1,S||Oe.glyphIndex===void 0||(qe=(qe=(qe=qe.concat({name:"cmap12Start_"+M,type:"ULONG",value:Oe.start})).concat({name:"cmap12End_"+M,type:"ULONG",value:Oe.end})).concat({name:"cmap12Glyph_"+M,type:"ULONG",value:Oe.glyphIndex}))}return z.segCountX2=2*(he-Me),z.searchRange=2*Math.pow(2,Math.floor(Math.log(he-Me)/Math.log(2))),z.entrySelector=Math.log(z.searchRange/2)/Math.log(2),z.rangeShift=z.segCountX2-z.searchRange,z.fields=z.fields.concat(Pe),z.fields.push({name:"reservedPad",type:"USHORT",value:0}),z.fields=z.fields.concat(Ce),z.fields=z.fields.concat(be),z.fields=z.fields.concat(Qe),z.fields=z.fields.concat(Ge),z.cmap4Length=14+2*Pe.length+2+2*Ce.length+2*be.length+2*Qe.length+2*Ge.length,S||(F=16+4*qe.length,z.cmap12Offset=20+z.cmap4Length,z.fields=z.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:F},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:qe.length/3}]),z.fields=z.fields.concat(qe)),z}},Q=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],G=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],te=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ge=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Ee(y){this.font=y}function Le(y){this.cmap=y}function Ye(y,S){this.encoding=y,this.charset=S}function ye(y){switch(y.version){case 1:this.names=ge.slice();break;case 2:this.names=new Array(y.numberOfGlyphs);for(var S=0;S<y.numberOfGlyphs;S++)y.glyphNameIndex[S]<ge.length?this.names[S]=ge[y.glyphNameIndex[S]]:this.names[S]=y.names[y.glyphNameIndex[S]-ge.length];break;case 2.5:this.names=new Array(y.numberOfGlyphs);for(var M=0;M<y.numberOfGlyphs;M++)this.names[M]=ge[M+y.glyphNameIndex[M]];break;default:this.names=[]}}Ee.prototype.charToGlyphIndex=function(y){var S=y.codePointAt(0),M=this.font.glyphs;if(M){for(var j=0;j<M.length;j+=1)for(var D=M.get(j),F=0;F<D.unicodes.length;F+=1)if(D.unicodes[F]===S)return j}return null},Le.prototype.charToGlyphIndex=function(y){return this.cmap.glyphIndexMap[y.codePointAt(0)]||0},Ye.prototype.charToGlyphIndex=function(y){return y=y.codePointAt(0),y=this.encoding[y],this.charset.indexOf(y)},ye.prototype.nameToGlyphIndex=function(y){return this.names.indexOf(y)},ye.prototype.glyphIndexToName=function(y){return this.names[y]};var je={line:function(y,S,M,j,D){y.beginPath(),y.moveTo(S,M),y.lineTo(j,D),y.stroke()}};function Ue(y){this.bindConstructorValues(y)}function $e(y,S,M){Object.defineProperty(y,S,{get:function(){return y.path,y[M]},set:function(j){y[M]=j},enumerable:!0,configurable:!0})}function rt(y,S){if(this.font=y,this.glyphs={},Array.isArray(S))for(var M=0;M<S.length;M++)this.glyphs[M]=S[M];this.length=S&&S.length||0}Ue.prototype.bindConstructorValues=function(y){var S;this.index=y.index||0,this.name=y.name||null,this.unicode=y.unicode||void 0,this.unicodes=y.unicodes||y.unicode!==void 0?[y.unicode]:[],y.xMin&&(this.xMin=y.xMin),y.yMin&&(this.yMin=y.yMin),y.xMax&&(this.xMax=y.xMax),y.yMax&&(this.yMax=y.yMax),y.advanceWidth&&(this.advanceWidth=y.advanceWidth),Object.defineProperty(this,"path",(y=y.path,S=y||new q,{configurable:!0,get:function(){return S=typeof S=="function"?S():S},set:function(M){S=M}}))},Ue.prototype.addUnicode=function(y){this.unicodes.length===0&&(this.unicode=y),this.unicodes.push(y)},Ue.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Ue.prototype.getPath=function(y,S,M,j,D){y=y!==void 0?y:0,S=S!==void 0?S:0,M=M!==void 0?M:72;for(var F,z,ne=(j=j||{}).xScale,fe=j.yScale,he=((F=j.hinting&&D&&D.hinting?this.path&&D.hinting.exec(this,M):F)?(z=D.hinting.getCommands(F),y=Math.round(y),S=Math.round(S),ne=fe=1):(z=this.path.commands,j=1/this.path.unitsPerEm*M,ne===void 0&&(ne=j),fe===void 0&&(fe=j)),new q),Me=0;Me<z.length;Me+=1){var Pe=z[Me];Pe.type==="M"?he.moveTo(y+Pe.x*ne,S+-Pe.y*fe):Pe.type==="L"?he.lineTo(y+Pe.x*ne,S+-Pe.y*fe):Pe.type==="Q"?he.quadraticCurveTo(y+Pe.x1*ne,S+-Pe.y1*fe,y+Pe.x*ne,S+-Pe.y*fe):Pe.type==="C"?he.curveTo(y+Pe.x1*ne,S+-Pe.y1*fe,y+Pe.x2*ne,S+-Pe.y2*fe,y+Pe.x*ne,S+-Pe.y*fe):Pe.type==="Z"&&he.closePath()}return he},Ue.prototype.getContours=function(){if(this.points===void 0)return[];for(var y=[],S=[],M=0;M<this.points.length;M+=1){var j=this.points[M];S.push(j),j.lastPointOfContour&&(y.push(S),S=[])}return O.argument(S.length===0,"There are still points left in the current contour."),y},Ue.prototype.getMetrics=function(){for(var y=this.path.commands,S=[],M=[],j=0;j<y.length;j+=1){var D=y[j];D.type!=="Z"&&(S.push(D.x),M.push(D.y)),D.type!=="Q"&&D.type!=="C"||(S.push(D.x1),M.push(D.y1)),D.type==="C"&&(S.push(D.x2),M.push(D.y2))}var F={xMin:Math.min.apply(null,S),yMin:Math.min.apply(null,M),xMax:Math.max.apply(null,S),yMax:Math.max.apply(null,M),leftSideBearing:this.leftSideBearing};return isFinite(F.xMin)||(F.xMin=0),isFinite(F.xMax)||(F.xMax=this.advanceWidth),isFinite(F.yMin)||(F.yMin=0),isFinite(F.yMax)||(F.yMax=0),F.rightSideBearing=this.advanceWidth-F.leftSideBearing-(F.xMax-F.xMin),F},Ue.prototype.draw=function(y,S,M,j,D){this.getPath(S,M,j,D).draw(y)},Ue.prototype.drawPoints=function(y,S,M,j){function D(Me,Pe,Ce,be){var Qe=2*Math.PI;y.beginPath();for(var Ge=0;Ge<Me.length;Ge+=1)y.moveTo(Pe+Me[Ge].x*be,Ce+Me[Ge].y*be),y.arc(Pe+Me[Ge].x*be,Ce+Me[Ge].y*be,2,0,Qe,!1);y.closePath(),y.fill()}S=S!==void 0?S:0,M=M!==void 0?M:0;for(var j=1/this.path.unitsPerEm*(j=j!==void 0?j:24),F=[],z=[],ne=this.path,fe=0;fe<ne.commands.length;fe+=1){var he=ne.commands[fe];he.x!==void 0&&F.push({x:he.x,y:-he.y}),he.x1!==void 0&&z.push({x:he.x1,y:-he.y1}),he.x2!==void 0&&z.push({x:he.x2,y:-he.y2})}y.fillStyle="blue",D(F,S,M,j),y.fillStyle="red",D(z,S,M,j)},Ue.prototype.drawMetrics=function(y,S,M,j){S=S!==void 0?S:0,M=M!==void 0?M:0,j=1/this.path.unitsPerEm*(j=j!==void 0?j:24),y.lineWidth=1,y.strokeStyle="black",je.line(y,S,-1e4,S,1e4),je.line(y,-1e4,M,1e4,M);var D=this.xMin||0,F=this.yMin||0,z=this.xMax||0,ne=this.yMax||0,fe=this.advanceWidth||0;y.strokeStyle="blue",je.line(y,S+D*j,-1e4,S+D*j,1e4),je.line(y,S+z*j,-1e4,S+z*j,1e4),je.line(y,-1e4,M+-F*j,1e4,M+-F*j),je.line(y,-1e4,M+-ne*j,1e4,M+-ne*j),y.strokeStyle="green",je.line(y,S+fe*j,-1e4,S+fe*j,1e4)},rt.prototype.get=function(y){return typeof this.glyphs[y]=="function"&&(this.glyphs[y]=this.glyphs[y]()),this.glyphs[y]},rt.prototype.push=function(y,S){this.glyphs[y]=S,this.length++};var nt={GlyphSet:rt,glyphLoader:function(y,S){return new Ue({index:S,font:y})},ttfGlyphLoader:function(y,S,M,j,D,F){return function(){var z=new Ue({index:S,font:y});return z.path=function(){M(z,j,D);var ne=F(y.glyphs,z);return ne.unitsPerEm=y.unitsPerEm,ne},$e(z,"xMin","_xMin"),$e(z,"xMax","_xMax"),$e(z,"yMin","_yMin"),$e(z,"yMax","_yMax"),z}},cffGlyphLoader:function(y,S,M,j){return function(){var D=new Ue({index:S,font:y});return D.path=function(){var F=M(y,D,j);return F.unitsPerEm=y.unitsPerEm,F},D}}};function lt(y){return y=y.length<1240?107:y.length<33900?1131:32768,y}function at(y,S,M){var j,D=[],F=[],z=ae.getCard16(y,S);if(z!==0){for(var ne=ae.getByte(y,S+2),fe=S+(z+1)*ne+2,he=S+3,Me=0;Me<z+1;Me+=1)D.push(ae.getOffset(y,he,ne)),he+=ne;j=fe+D[z]}else j=S+2;for(var Pe=0;Pe<D.length-1;Pe+=1){var Ce=ae.getBytes(y,fe+D[Pe],fe+D[Pe+1]);M&&(Ce=M(Ce)),F.push(Ce)}return{objects:F,startOffset:S,endOffset:j}}function Lt(y,S){if(S===28)return y.parseByte()<<8|y.parseByte();if(S===29)return y.parseByte()<<24|y.parseByte()<<16|y.parseByte()<<8|y.parseByte();if(S===30){for(var M=y,j="",D=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var z=M.parseByte(),F=z>>4,z=15&z;if(F==15||(j+=D[F],z==15))break;j+=D[z]}return parseFloat(j)}if(32<=S&&S<=246)return S-139;if(247<=S&&S<=250)return 256*(S-247)+y.parseByte()+108;if(251<=S&&S<=254)return 256*-(S-251)-y.parseByte()-108;throw new Error("Invalid b0 "+S)}function St(y,S,M){var j=new ae.Parser(y,S=S!==void 0?S:0),D=[],F=[];for(M=M!==void 0?M:y.length;j.relativeOffset<M;){var z=j.parseByte();z<=21?(z===12&&(z=1200+j.parseByte()),D.push([z,F]),F=[]):F.push(Lt(j,z))}for(var ne=D,fe={},he=0;he<ne.length;he+=1){var Me=ne[he][0],Pe=ne[he][1],Ce=void 0,Ce=Pe.length===1?Pe[0]:Pe;if(fe.hasOwnProperty(Me)&&!isNaN(fe[Me]))throw new Error("Object "+fe+" already has key "+Me);fe[Me]=Ce}return fe}function It(y,S){return S=S<=390?Q[S]:y[S-391]}function xt(y,S,M){for(var j,D={},F=0;F<S.length;F+=1){var z=S[F];if(Array.isArray(z.type)){var ne=[];ne.length=z.type.length;for(var fe=0;fe<z.type.length;fe++)(j=y[z.op]!==void 0?y[z.op][fe]:void 0)===void 0&&(j=z.value!==void 0&&z.value[fe]!==void 0?z.value[fe]:null),z.type[fe]==="SID"&&(j=It(M,j)),ne[fe]=j;D[z.name]=ne}else(j=y[z.op])===void 0&&(j=z.value!==void 0?z.value:null),z.type==="SID"&&(j=It(M,j)),D[z.name]=j}return D}var Ut=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ct=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function cr(y,S,M,j){return xt(St(y,S,M),Ct,j)}function ir(y,S,M,j){for(var D=[],F=0;F<M.length;F+=1){var z=new DataView(new Uint8Array(M[F]).buffer),z=(ne=j,xt(St(z,0,z.byteLength),Ut,ne)),ne=(z._subrs=[],z._subrsBias=0,z.private[0]),fe=z.private[1];ne!==0&&fe!==0&&(ne=cr(y,fe+S,ne,j),z._defaultWidthX=ne.defaultWidthX,z._nominalWidthX=ne.nominalWidthX,ne.subrs!==0&&(fe=at(y,fe+ne.subrs+S),z._subrs=fe.objects,z._subrsBias=lt(z._subrs)),z._privateDict=ne),D.push(z)}return D}function pe(y,S,M){var j,D,F,z,ne,fe,he,Me,Pe,Ce=new q,be=[],Qe=0,Ge=!1,qe=!1,Oe=0,ke=0,ut=(Pe=(y.isCIDFont?(ne=y.tables.cff.topDict._fdSelect[S.index],ne=y.tables.cff.topDict._fdArray[ne],fe=ne._subrs,he=ne._subrsBias,Me=ne._defaultWidthX,ne):(fe=y.tables.cff.topDict._subrs,he=y.tables.cff.topDict._subrsBias,Me=y.tables.cff.topDict._defaultWidthX,y.tables.cff.topDict))._nominalWidthX,Me);function vt(ht,Mt){qe&&Ce.closePath(),Ce.moveTo(ht,Mt),qe=!0}function dt(){be.length%2==0||Ge||(ut=be.shift()+Pe),Qe+=be.length>>1,be.length=0,Ge=!0}return function ht(Mt){for(var qt,$t,or,Mr,Tr,qr,Bt,Zt,kt,Er,Qt,_r,Kt=0;Kt<Mt.length;){var pr=Mt[Kt];switch(Kt+=1,pr){case 1:case 3:dt();break;case 4:1<be.length&&!Ge&&(ut=be.shift()+Pe,Ge=!0),ke+=be.pop(),vt(Oe,ke);break;case 5:for(;0<be.length;)Oe+=be.shift(),ke+=be.shift(),Ce.lineTo(Oe,ke);break;case 6:for(;0<be.length&&(Oe+=be.shift(),Ce.lineTo(Oe,ke),be.length!==0);)ke+=be.shift(),Ce.lineTo(Oe,ke);break;case 7:for(;0<be.length&&(ke+=be.shift(),Ce.lineTo(Oe,ke),be.length!==0);)Oe+=be.shift(),Ce.lineTo(Oe,ke);break;case 8:for(;0<be.length;)j=Oe+be.shift(),D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Oe=F+be.shift(),ke=z+be.shift(),Ce.curveTo(j,D,F,z,Oe,ke);break;case 10:Tr=be.pop()+he,(qr=fe[Tr])&&ht(qr);break;case 11:return;case 12:switch(pr=Mt[Kt],Kt+=1,pr){case 35:j=Oe+be.shift(),D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Bt=F+be.shift(),Zt=z+be.shift(),kt=Bt+be.shift(),Er=Zt+be.shift(),Qt=kt+be.shift(),_r=Er+be.shift(),Oe=Qt+be.shift(),ke=_r+be.shift(),be.shift(),Ce.curveTo(j,D,F,z,Bt,Zt),Ce.curveTo(kt,Er,Qt,_r,Oe,ke);break;case 34:j=Oe+be.shift(),D=ke,F=j+be.shift(),z=D+be.shift(),Bt=F+be.shift(),Zt=z,kt=Bt+be.shift(),Er=z,Qt=kt+be.shift(),_r=ke,Oe=Qt+be.shift(),Ce.curveTo(j,D,F,z,Bt,Zt),Ce.curveTo(kt,Er,Qt,_r,Oe,ke);break;case 36:j=Oe+be.shift(),D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Bt=F+be.shift(),Zt=z,kt=Bt+be.shift(),Er=z,Qt=kt+be.shift(),_r=Er+be.shift(),Oe=Qt+be.shift(),Ce.curveTo(j,D,F,z,Bt,Zt),Ce.curveTo(kt,Er,Qt,_r,Oe,ke);break;case 37:j=Oe+be.shift(),D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Bt=F+be.shift(),Zt=z+be.shift(),kt=Bt+be.shift(),Er=Zt+be.shift(),Qt=kt+be.shift(),_r=Er+be.shift(),Math.abs(Qt-Oe)>Math.abs(_r-ke)?Oe=Qt+be.shift():ke=_r+be.shift(),Ce.curveTo(j,D,F,z,Bt,Zt),Ce.curveTo(kt,Er,Qt,_r,Oe,ke);break;default:console.log("Glyph "+S.index+": unknown operator 1200"+pr),be.length=0}break;case 14:0<be.length&&!Ge&&(ut=be.shift()+Pe,Ge=!0),qe&&(Ce.closePath(),qe=!1);break;case 18:dt();break;case 19:case 20:dt(),Kt+=Qe+7>>3;break;case 21:2<be.length&&!Ge&&(ut=be.shift()+Pe,Ge=!0),ke+=be.pop(),vt(Oe+=be.pop(),ke);break;case 22:1<be.length&&!Ge&&(ut=be.shift()+Pe,Ge=!0),vt(Oe+=be.pop(),ke);break;case 23:dt();break;case 24:for(;2<be.length;)j=Oe+be.shift(),D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Oe=F+be.shift(),ke=z+be.shift(),Ce.curveTo(j,D,F,z,Oe,ke);Oe+=be.shift(),ke+=be.shift(),Ce.lineTo(Oe,ke);break;case 25:for(;6<be.length;)Oe+=be.shift(),ke+=be.shift(),Ce.lineTo(Oe,ke);j=Oe+be.shift(),D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Oe=F+be.shift(),ke=z+be.shift(),Ce.curveTo(j,D,F,z,Oe,ke);break;case 26:for(be.length%2&&(Oe+=be.shift());0<be.length;)j=Oe,D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Oe=F,ke=z+be.shift(),Ce.curveTo(j,D,F,z,Oe,ke);break;case 27:for(be.length%2&&(ke+=be.shift());0<be.length;)j=Oe+be.shift(),D=ke,F=j+be.shift(),z=D+be.shift(),Oe=F+be.shift(),ke=z,Ce.curveTo(j,D,F,z,Oe,ke);break;case 28:qt=Mt[Kt],$t=Mt[Kt+1],be.push((qt<<24|$t<<16)>>16),Kt+=2;break;case 29:Tr=be.pop()+y.gsubrsBias,(qr=y.gsubrs[Tr])&&ht(qr);break;case 30:for(;0<be.length&&(j=Oe,D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Oe=F+be.shift(),ke=z+(be.length===1?be.shift():0),Ce.curveTo(j,D,F,z,Oe,ke),be.length!==0);)j=Oe+be.shift(),D=ke,F=j+be.shift(),z=D+be.shift(),ke=z+be.shift(),Oe=F+(be.length===1?be.shift():0),Ce.curveTo(j,D,F,z,Oe,ke);break;case 31:for(;0<be.length&&(j=Oe+be.shift(),D=ke,F=j+be.shift(),z=D+be.shift(),ke=z+be.shift(),Oe=F+(be.length===1?be.shift():0),Ce.curveTo(j,D,F,z,Oe,ke),be.length!==0);)j=Oe,D=ke+be.shift(),F=j+be.shift(),z=D+be.shift(),Oe=F+be.shift(),ke=z+(be.length===1?be.shift():0),Ce.curveTo(j,D,F,z,Oe,ke);break;default:pr<32?console.log("Glyph "+S.index+": unknown operator "+pr):pr<247?be.push(pr-139):pr<251?(qt=Mt[Kt],Kt+=1,be.push(256*(pr-247)+qt+108)):pr<255?(qt=Mt[Kt],Kt+=1,be.push(256*-(pr-251)-qt-108)):(qt=Mt[Kt],$t=Mt[Kt+1],or=Mt[Kt+2],Mr=Mt[Kt+3],Kt+=4,be.push((qt<<24|$t<<16|or<<8|Mr)/65536))}}}(M),S.advanceWidth=ut,Ce}function Fe(y,S){var M,j=Q.indexOf(y);return 0<=j&&(M=j),0<=(j=S.indexOf(y))?M=j+Q.length:(M=Q.length+S.length,S.push(y)),M}function Ke(y,S,M){for(var j={},D=0;D<y.length;D+=1){var F=y[D],z=S[F.name];z===void 0||function ne(fe,he){if(fe===he)return 1;if(Array.isArray(fe)&&Array.isArray(he)&&fe.length===he.length){for(var Me=0;Me<fe.length;Me+=1)if(!ne(fe[Me],he[Me]))return;return 1}}(z,F.value)||(F.type==="SID"&&(z=Fe(z,M)),j[F.op]={name:F.name,type:F.type,value:z})}return j}function Be(y,S){var M=new $.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return M.dict=Ke(Ut,y,S),M}function Je(y){var S=new $.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return S.topDicts=[{name:"topDict_0",type:"TABLE",value:y}],S}function pt(y){for(var S=new $.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),M=0;M<y.length;M+=1){var j=y.get(M),D=function(F){for(var z=[],ne=F.path,fe=(z.push({name:"width",type:"NUMBER",value:F.advanceWidth}),0),he=0,Me=0;Me<ne.commands.length;Me+=1){var Pe,Ce,be,Qe,Ge=void 0,qe=void 0,Oe=ne.commands[Me];(Oe=Oe.type==="Q"?{type:"C",x:Oe.x,y:Oe.y,x1:1/3*fe+2/3*Oe.x1,y1:1/3*he+2/3*Oe.y1,x2:1/3*Oe.x+2/3*Oe.x1,y2:1/3*Oe.y+2/3*Oe.y1}:Oe).type==="M"?(Ge=Math.round(Oe.x-fe),qe=Math.round(Oe.y-he),z.push({name:"dx",type:"NUMBER",value:Ge}),z.push({name:"dy",type:"NUMBER",value:qe}),z.push({name:"rmoveto",type:"OP",value:21}),fe=Math.round(Oe.x),he=Math.round(Oe.y)):Oe.type==="L"?(Ge=Math.round(Oe.x-fe),qe=Math.round(Oe.y-he),z.push({name:"dx",type:"NUMBER",value:Ge}),z.push({name:"dy",type:"NUMBER",value:qe}),z.push({name:"rlineto",type:"OP",value:5}),fe=Math.round(Oe.x),he=Math.round(Oe.y)):Oe.type==="C"&&(Pe=Math.round(Oe.x1-fe),Ce=Math.round(Oe.y1-he),be=Math.round(Oe.x2-Oe.x1),Qe=Math.round(Oe.y2-Oe.y1),Ge=Math.round(Oe.x-Oe.x2),qe=Math.round(Oe.y-Oe.y2),z.push({name:"dx1",type:"NUMBER",value:Pe}),z.push({name:"dy1",type:"NUMBER",value:Ce}),z.push({name:"dx2",type:"NUMBER",value:be}),z.push({name:"dy2",type:"NUMBER",value:Qe}),z.push({name:"dx",type:"NUMBER",value:Ge}),z.push({name:"dy",type:"NUMBER",value:qe}),z.push({name:"rrcurveto",type:"OP",value:8}),fe=Math.round(Oe.x),he=Math.round(Oe.y))}return z.push({name:"endchar",type:"OP",value:14}),z}(j);S.charStrings.push({name:j.name,type:"CHARSTRING",value:D})}return S}var yt={parse:function(y,S,M){M.tables.cff={},ne=y,j=S,(D={}).formatMajor=ae.getCard8(ne,j),D.formatMinor=ae.getCard8(ne,j+1),D.size=ae.getCard8(ne,j+2),D.offsetSize=ae.getCard8(ne,j+3),D.startOffset=j,D.endOffset=j+4;var ne=at(y,D.endOffset,ae.bytesToString),j=at(y,ne.endOffset),D=at(y,j.endOffset,ae.bytesToString),ne=at(y,D.endOffset);if(M.gsubrs=ne.objects,M.gsubrsBias=lt(M.gsubrs),(ne=ir(y,S,j.objects,D.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+ne.length);if(j=ne[0],(M.tables.cff.topDict=j)._privateDict&&(M.defaultWidthX=j._privateDict.defaultWidthX,M.nominalWidthX=j._privateDict.nominalWidthX),j.ros[0]!==void 0&&j.ros[1]!==void 0&&(M.isCIDFont=!0),M.isCIDFont){var ne=j.fdArray,F=j.fdSelect;if(ne===0||F===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ne=ir(y,S,at(y,ne+=S).objects,D.objects),j._fdArray=ne,j._fdSelect=function(Ce,be,Qe,Ge){var qe,Oe=[],ke=new ae.Parser(Ce,be);if((Ce=ke.parseCard8())===0)for(var ut=0;ut<Qe;ut++){if(Ge<=(qe=ke.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+qe+" (FD count "+Ge+")");Oe.push(qe)}else{if(Ce!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Ce);var vt,dt=ke.parseCard16(),ht=ke.parseCard16();if(ht!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ht);for(var Mt=0;Mt<dt;Mt++){if(qe=ke.parseCard8(),vt=ke.parseCard16(),Ge<=qe)throw new Error("CFF table CID Font FDSelect has bad FD index value "+qe+" (FD count "+Ge+")");if(Qe<vt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+vt);for(;ht<vt;ht++)Oe.push(qe);ht=vt}if(vt!==Qe)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+vt)}return Oe}(y,F+=S,M.numGlyphs,ne.length)}var F=S+j.private[1],ne=cr(y,F,j.private[0],D.objects),z=(M.defaultWidthX=ne.defaultWidthX,M.nominalWidthX=ne.nominalWidthX,ne.subrs!==0?(F=at(y,F+ne.subrs),M.subrs=F.objects,M.subrsBias=lt(M.subrs)):(M.subrs=[],M.subrsBias=0),at(y,S+j.charStrings)),ne=(M.nGlyphs=z.objects.length,function(Me,Pe,Ce,be){var Qe=new ae.Parser(Me,Pe),Ge=(--Ce,[".notdef"]);if((Me=Qe.parseCard8())===0)for(var qe=0;qe<Ce;qe+=1)Oe=Qe.parseSID(),Ge.push(It(be,Oe));else if(Me===1)for(;Ge.length<=Ce;)for(var Oe=Qe.parseSID(),ke=Qe.parseCard8(),ut=0;ut<=ke;ut+=1)Ge.push(It(be,Oe)),Oe+=1;else{if(Me!==2)throw new Error("Unknown charset format "+Me);for(;Ge.length<=Ce;){Oe=Qe.parseSID(),ke=Qe.parseCard16();for(var vt=0;vt<=ke;vt+=1)Ge.push(It(be,Oe)),Oe+=1}}return Ge}(y,S+j.charset,M.nGlyphs,D.objects));j.encoding===0?M.cffEncoding=new Ye(G,ne):j.encoding===1?M.cffEncoding=new Ye(te,ne):M.cffEncoding=function(Me,Pe,Ce){var be={},Qe=new ae.Parser(Me,Pe);if((Me=Qe.parseCard8())===0)for(var Ge=Qe.parseCard8(),qe=0;qe<Ge;qe+=1)be[ke=Qe.parseCard8()]=qe;else{if(Me!==1)throw new Error("Unknown encoding format "+Me);for(var Oe=Qe.parseCard8(),ke=1,ut=0;ut<Oe;ut+=1)for(var vt=Qe.parseCard8(),dt=Qe.parseCard8(),ht=vt;ht<=vt+dt;ht+=1)be[ht]=ke,ke+=1}return new Ye(be,Ce)}(y,S+j.encoding,ne),M.encoding=M.encoding||M.cffEncoding,M.glyphs=new nt.GlyphSet(M);for(var fe=0;fe<M.nGlyphs;fe+=1){var he=z.objects[fe];M.glyphs.push(fe,nt.cffGlyphLoader(M,fe,pe,he))}},make:function(y,Me){for(var M,j=new $.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),D=1/Me.unitsPerEm,D={version:Me.version,fullName:Me.fullName,familyName:Me.familyName,weight:Me.weightName,fontBBox:Me.fontBBox||[0,0,0,0],fontMatrix:[D,0,0,D,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},F=[],z=1;z<y.length;z+=1)M=y.get(z),F.push(M.name);var ne,fe,he=[],Me=(j.header=new $.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),j.nameIndex=function(Ce){var be=new $.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);be.names=[];for(var Qe=0;Qe<Ce.length;Qe+=1)be.names.push({name:"name_"+Qe,type:"NAME",value:Ce[Qe]});return be}([Me.postScriptName]),Be(D,he)),Pe=(j.topDictIndex=Je(Me),j.globalSubrIndex=new $.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),j.charsets=function(Ce,be){for(var Qe=new $.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ge=0;Ge<Ce.length;Ge+=1){var qe=Fe(Ce[Ge],be);Qe.fields.push({name:"glyph_"+Ge,type:"SID",value:qe})}return Qe}(F,he),j.charStringsIndex=pt(y),j.privateDict=(Pe={},ne=he,(fe=new $.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Ke(Ct,Pe,ne),fe),j.stringIndex=function(Ce){var be=new $.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);be.strings=[];for(var Qe=0;Qe<Ce.length;Qe+=1)be.strings.push({name:"string_"+Qe,type:"STRING",value:Ce[Qe]});return be}(he),j.header.sizeOf()+j.nameIndex.sizeOf()+j.topDictIndex.sizeOf()+j.stringIndex.sizeOf()+j.globalSubrIndex.sizeOf());return D.charset=Pe,D.encoding=0,D.charStrings=D.charset+j.charsets.sizeOf(),D.private[1]=D.charStrings+j.charStringsIndex.sizeOf(),Me=Be(D,he),j.topDictIndex=Je(Me),j}},bt={parse:function(j,S){var M={},j=new ae.Parser(j,S);return M.version=j.parseVersion(),M.fontRevision=Math.round(1e3*j.parseFixed())/1e3,M.checkSumAdjustment=j.parseULong(),M.magicNumber=j.parseULong(),O.argument(M.magicNumber===1594834165,"Font header has wrong magic number."),M.flags=j.parseUShort(),M.unitsPerEm=j.parseUShort(),M.created=j.parseLongDateTime(),M.modified=j.parseLongDateTime(),M.xMin=j.parseShort(),M.yMin=j.parseShort(),M.xMax=j.parseShort(),M.yMax=j.parseShort(),M.macStyle=j.parseUShort(),M.lowestRecPPEM=j.parseUShort(),M.fontDirectionHint=j.parseShort(),M.indexToLocFormat=j.parseShort(),M.glyphDataFormat=j.parseShort(),M},make:function(y){var S=Math.round(new Date().getTime()/1e3)+2082844800,M=S;return y.createdTimestamp&&(M=y.createdTimestamp+2082844800),new $.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:M},{name:"modified",type:"LONGDATETIME",value:S},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],y)}},me={parse:function(j,S){var M={},j=new ae.Parser(j,S);return M.version=j.parseVersion(),M.ascender=j.parseShort(),M.descender=j.parseShort(),M.lineGap=j.parseShort(),M.advanceWidthMax=j.parseUShort(),M.minLeftSideBearing=j.parseShort(),M.minRightSideBearing=j.parseShort(),M.xMaxExtent=j.parseShort(),M.caretSlopeRise=j.parseShort(),M.caretSlopeRun=j.parseShort(),M.caretOffset=j.parseShort(),j.relativeOffset+=8,M.metricDataFormat=j.parseShort(),M.numberOfHMetrics=j.parseUShort(),M},make:function(y){return new $.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],y)}},Xe={parse:function(y,S,M,j,D){for(var F,z,ne=new ae.Parser(y,S),fe=0;fe<j;fe+=1){fe<M&&(F=ne.parseUShort(),z=ne.parseShort());var he=D.get(fe);he.advanceWidth=F,he.leftSideBearing=z}},make:function(y){for(var S=new $.Table("hmtx",[]),M=0;M<y.length;M+=1){var D=y.get(M),j=D.advanceWidth||0,D=D.leftSideBearing||0;S.fields.push({name:"advanceWidth_"+M,type:"USHORT",value:j}),S.fields.push({name:"leftSideBearing_"+M,type:"SHORT",value:D})}return S}},tt={make:function(y){for(var S=new $.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:y.length}]),M="",j=12+4*y.length,D=0;D<y.length;++D){var F=M.indexOf(y[D]);F<0&&(F=M.length,M+=y[D]),S.fields.push({name:"offset "+D,type:"USHORT",value:j+F}),S.fields.push({name:"length "+D,type:"USHORT",value:y[D].length})}return S.fields.push({name:"stringPool",type:"CHARARRAY",value:M}),S},parse:function(y,S){for(var M=new ae.Parser(y,S),j=M.parseULong(),D=(O.argument(j===1,"Unsupported ltag table version."),M.skip("uLong",1),M.parseULong()),F=[],z=0;z<D;z++){for(var ne="",fe=S+M.parseUShort(),he=M.parseUShort(),Me=fe;Me<fe+he;++Me)ne+=String.fromCharCode(y.getInt8(Me));F.push(ne)}return F}},He={parse:function(j,S){var M={},j=new ae.Parser(j,S);return M.version=j.parseVersion(),M.numGlyphs=j.parseUShort(),M.version===1&&(M.maxPoints=j.parseUShort(),M.maxContours=j.parseUShort(),M.maxCompositePoints=j.parseUShort(),M.maxCompositeContours=j.parseUShort(),M.maxZones=j.parseUShort(),M.maxTwilightPoints=j.parseUShort(),M.maxStorage=j.parseUShort(),M.maxFunctionDefs=j.parseUShort(),M.maxInstructionDefs=j.parseUShort(),M.maxStackElements=j.parseUShort(),M.maxSizeOfInstructions=j.parseUShort(),M.maxComponentElements=j.parseUShort(),M.maxComponentDepth=j.parseUShort()),M},make:function(y){return new $.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:y}])}},ft=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ze={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},wt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},it={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},mt="utf-16",et={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Xt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Et(y,S,M){switch(y){case 0:return mt;case 1:return Xt[M]||et[S];case 3:if(S===1||S===10)return mt}}function Ot(y){var S,M={};for(S in y)M[y[S]]=parseInt(S);return M}function nr(y,S,M,j,D,F){return new $.Record("NameRecord",[{name:"platformID",type:"USHORT",value:y},{name:"encodingID",type:"USHORT",value:S},{name:"languageID",type:"USHORT",value:M},{name:"nameID",type:"USHORT",value:j},{name:"length",type:"USHORT",value:D},{name:"offset",type:"USHORT",value:F}])}function Sr(y,S){if((M=function(F,z){var ne=F.length,fe=z.length-ne+1;e:for(var he=0;he<fe;he++)for(;he<fe;he++){for(var Me=0;Me<ne;Me++)if(z[he+Me]!==F[Me])continue e;return he}return-1}(y,S))<0)for(var M=S.length,j=0,D=y.length;j<D;++j)S.push(y[j]);return M}var br={parse:function(y,S,M){for(var j={},D=new ae.Parser(y,S),S=D.parseUShort(),F=D.parseUShort(),z=D.offset+D.parseUShort(),ne=0;ne<F;ne++){var Qe=D.parseUShort(),fe=D.parseUShort(),he=D.parseUShort(),Me=D.parseUShort(),Me=ft[Me]||Me,Pe=D.parseUShort(),Ce=D.parseUShort(),be=function(qe,Oe,ke){switch(qe){case 0:if(Oe===65535)return"und";if(ke)return ke[Oe];break;case 1:return Ze[Oe];case 3:return it[Oe]}}(Qe,he,M),Qe=Et(Qe,fe,he);Qe!==void 0&&be!==void 0&&(fe=void 0,(fe=Qe===mt?U.UTF16(y,z+Ce,Pe):U.MACSTRING(y,z+Ce,Pe,Qe))&&((he=(he=j[Me])===void 0?j[Me]={}:he)[be]=fe))}return S===1&&D.parseUShort(),j},make:function(y,S){var M,j=[],D={},F=Ot(ft);for(M in y){var z=F[M];if(z===void 0&&(z=M),Ce=parseInt(z),isNaN(Ce))throw new Error('Name table entry "'+M+'" does not exist, see nameTableNames for complete list.');D[Ce]=y[M],j.push(Ce)}for(var ne=Ot(Ze),fe=Ot(it),he=[],Me=[],Pe=0;Pe<j.length;Pe++){var Ce,be,Qe=D[Ce=j[Pe]];for(be in Qe){var Ge=Qe[be],vt=1,qe=ne[be],Oe=wt[qe],ke=Et(vt,Oe,qe),ke=V.MACSTRING(Ge,ke),ut=(ke===void 0&&(vt=0,(qe=S.indexOf(be))<0&&(qe=S.length,S.push(be)),Oe=4,ke=V.UTF16(Ge)),Sr(ke,Me)),vt=(he.push(nr(vt,Oe,qe,Ce,ke.length,ut)),fe[be]);vt!==void 0&&(qe=Sr(Oe=V.UTF16(Ge),Me),he.push(nr(3,1,vt,Ce,Oe.length,qe)))}}he.sort(function(Mt,qt){return Mt.platformID-qt.platformID||Mt.encodingID-qt.encodingID||Mt.languageID-qt.languageID||Mt.nameID-qt.nameID});for(var dt=new $.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:he.length},{name:"stringOffset",type:"USHORT",value:6+12*he.length}]),ht=0;ht<he.length;ht++)dt.fields.push({name:"record_"+ht,type:"RECORD",value:he[ht]});return dt.fields.push({name:"strings",type:"LITERAL",value:Me}),dt}},Ht=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Wt={parse:function(y,S){var M={},j=new ae.Parser(y,S);M.version=j.parseUShort(),M.xAvgCharWidth=j.parseShort(),M.usWeightClass=j.parseUShort(),M.usWidthClass=j.parseUShort(),M.fsType=j.parseUShort(),M.ySubscriptXSize=j.parseShort(),M.ySubscriptYSize=j.parseShort(),M.ySubscriptXOffset=j.parseShort(),M.ySubscriptYOffset=j.parseShort(),M.ySuperscriptXSize=j.parseShort(),M.ySuperscriptYSize=j.parseShort(),M.ySuperscriptXOffset=j.parseShort(),M.ySuperscriptYOffset=j.parseShort(),M.yStrikeoutSize=j.parseShort(),M.yStrikeoutPosition=j.parseShort(),M.sFamilyClass=j.parseShort(),M.panose=[];for(var D=0;D<10;D++)M.panose[D]=j.parseByte();return M.ulUnicodeRange1=j.parseULong(),M.ulUnicodeRange2=j.parseULong(),M.ulUnicodeRange3=j.parseULong(),M.ulUnicodeRange4=j.parseULong(),M.achVendID=String.fromCharCode(j.parseByte(),j.parseByte(),j.parseByte(),j.parseByte()),M.fsSelection=j.parseUShort(),M.usFirstCharIndex=j.parseUShort(),M.usLastCharIndex=j.parseUShort(),M.sTypoAscender=j.parseShort(),M.sTypoDescender=j.parseShort(),M.sTypoLineGap=j.parseShort(),M.usWinAscent=j.parseUShort(),M.usWinDescent=j.parseUShort(),1<=M.version&&(M.ulCodePageRange1=j.parseULong(),M.ulCodePageRange2=j.parseULong()),2<=M.version&&(M.sxHeight=j.parseShort(),M.sCapHeight=j.parseShort(),M.usDefaultChar=j.parseUShort(),M.usBreakChar=j.parseUShort(),M.usMaxContent=j.parseUShort()),M},make:function(y){return new $.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],y)},unicodeRanges:Ht,getUnicodeRange:function(y){for(var S=0;S<Ht.length;S+=1){var M=Ht[S];if(y>=M.begin&&y<M.end)return S}return-1}},ci={parse:function(y,S){var M={},j=new ae.Parser(y,S);switch(M.version=j.parseVersion(),M.italicAngle=j.parseFixed(),M.underlinePosition=j.parseShort(),M.underlineThickness=j.parseShort(),M.isFixedPitch=j.parseULong(),M.minMemType42=j.parseULong(),M.maxMemType42=j.parseULong(),M.minMemType1=j.parseULong(),M.maxMemType1=j.parseULong(),M.version){case 1:M.names=ge.slice();break;case 2:M.numberOfGlyphs=j.parseUShort(),M.glyphNameIndex=new Array(M.numberOfGlyphs);for(var D=0;D<M.numberOfGlyphs;D++)M.glyphNameIndex[D]=j.parseUShort();M.names=[];for(var F,z=0;z<M.numberOfGlyphs;z++)M.glyphNameIndex[z]>=ge.length&&(F=j.parseChar(),M.names.push(j.parseString(F)));break;case 2.5:M.numberOfGlyphs=j.parseUShort(),M.offset=new Array(M.numberOfGlyphs);for(var ne=0;ne<M.numberOfGlyphs;ne++)M.offset[ne]=j.parseChar()}return M},make:function(){return new $.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},Yt=new Array(9),tn=(Yt[1]=function(){var y=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{substFormat:1,coverage:this.parsePointer(xe.coverage),deltaGlyphId:this.parseUShort()}:S===2?{substFormat:2,coverage:this.parsePointer(xe.coverage),substitute:this.parseOffset16List()}:void O.assert(!1,"0x"+y.toString(16)+": lookup type 1 format must be 1 or 2.")},Yt[2]=function(){var y=this.parseUShort();return O.argument(y===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(xe.coverage),sequences:this.parseListOfLists()}},Yt[3]=function(){var y=this.parseUShort();return O.argument(y===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(xe.coverage),alternateSets:this.parseListOfLists()}},Yt[4]=function(){var y=this.parseUShort();return O.argument(y===1,"GSUB ligature table identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(xe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:xe.uShort,lookupListIndex:xe.uShort});Yt[5]=function(){var y,S,M=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:j,coverage:this.parsePointer(xe.coverage),ruleSets:this.parseListOfLists(function(){var D=this.parseUShort(),F=this.parseUShort();return{input:this.parseUShortList(D-1),lookupRecords:this.parseRecordList(F,tn)}})}:j===2?{substFormat:j,coverage:this.parsePointer(xe.coverage),classDef:this.parsePointer(xe.classDef),classSets:this.parseListOfLists(function(){var D=this.parseUShort(),F=this.parseUShort();return{classes:this.parseUShortList(D-1),lookupRecords:this.parseRecordList(F,tn)}})}:j===3?(y=this.parseUShort(),S=this.parseUShort(),{substFormat:j,coverages:this.parseList(y,xe.pointer(xe.coverage)),lookupRecords:this.parseRecordList(S,tn)}):void O.assert(!1,"0x"+M.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Yt[6]=function(){var y=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{substFormat:1,coverage:this.parsePointer(xe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(tn)}})}:S===2?{substFormat:2,coverage:this.parsePointer(xe.coverage),backtrackClassDef:this.parsePointer(xe.classDef),inputClassDef:this.parsePointer(xe.classDef),lookaheadClassDef:this.parsePointer(xe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(tn)}})}:S===3?{substFormat:3,backtrackCoverage:this.parseList(xe.pointer(xe.coverage)),inputCoverage:this.parseList(xe.pointer(xe.coverage)),lookaheadCoverage:this.parseList(xe.pointer(xe.coverage)),lookupRecords:this.parseRecordList(tn)}:void O.assert(!1,"0x"+y.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Yt[7]=function(){var y=this.parseUShort(),y=(O.argument(y===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),S=new xe(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:y,extension:Yt[y].call(S)}},Yt[8]=function(){var y=this.parseUShort();return O.argument(y===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:y,coverage:this.parsePointer(xe.coverage),backtrackCoverage:this.parseList(xe.pointer(xe.coverage)),lookaheadCoverage:this.parseList(xe.pointer(xe.coverage)),substitutes:this.parseUShortList()}};var ui=new Array(9);ui[1]=function(y){return y.substFormat===1?new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new $.Coverage(y.coverage)},{name:"deltaGlyphID",type:"USHORT",value:y.deltaGlyphId}]):new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new $.Coverage(y.coverage)}].concat($.ushortList("substitute",y.substitute)))},ui[3]=function(y){return O.assert(y.substFormat===1,"Lookup type 3 substFormat must be 1."),new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new $.Coverage(y.coverage)}].concat($.tableList("altSet",y.alternateSets,function(S){return new $.Table("alternateSetTable",$.ushortList("alternate",S))})))},ui[4]=function(y){return O.assert(y.substFormat===1,"Lookup type 4 substFormat must be 1."),new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new $.Coverage(y.coverage)}].concat($.tableList("ligSet",y.ligatureSets,function(S){return new $.Table("ligatureSetTable",$.tableList("ligature",S,function(M){return new $.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:M.ligGlyph}].concat($.ushortList("component",M.components,M.components.length+1)))}))})))};var Ji={parse:function(y,S){return S=(y=new xe(y,S=S||0)).parseVersion(1),O.argument(S===1||S===1.1,"Unsupported GSUB table version."),S===1?{version:S,scripts:y.parseScriptList(),features:y.parseFeatureList(),lookups:y.parseLookupList(Yt)}:{version:S,scripts:y.parseScriptList(),features:y.parseFeatureList(),lookups:y.parseLookupList(Yt),variations:y.parseFeatureVariationsList()}},make:function(y){return new $.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new $.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new $.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new $.LookupList(y.lookups,ui)}])}},Ja={parse:function(y,S){for(var M=new ae.Parser(y,S),j=M.parseULong(),D=(O.argument(j===1,"Unsupported META table version."),M.parseULong(),M.parseULong(),M.parseULong()),F={},z=0;z<D;z++){var ne=M.parseTag(),he=M.parseULong(),fe=M.parseULong(),he=U.UTF8(y,S+he,fe);F[ne]=he}return F},make:function(y){var S,M=Object.keys(y).length,j="",D=16+12*M,F=new $.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:D},{name:"numTags",type:"ULONG",value:M}]);for(S in y){var z=j.length;j+=y[S],F.fields.push({name:"tag "+S,type:"TAG",value:S}),F.fields.push({name:"offset "+S,type:"ULONG",value:D+z}),F.fields.push({name:"length "+S,type:"ULONG",value:y[S].length})}return F.fields.push({name:"stringPool",type:"CHARARRAY",value:j}),F}};function Qa(y){return Math.log(y)/Math.log(2)|0}function Mo(y){for(;y.length%4!=0;)y.push(0);for(var S=0,M=0;M<y.length;M+=4)S+=(y[M]<<24)+(y[M+1]<<16)+(y[M+2]<<8)+y[M+3];return S%=Math.pow(2,32)}function $a(y,S,M,j){return new $.Record("Table Record",[{name:"tag",type:"TAG",value:y!==void 0?y:""},{name:"checkSum",type:"ULONG",value:S!==void 0?S:0},{name:"offset",type:"ULONG",value:M!==void 0?M:0},{name:"length",type:"ULONG",value:j!==void 0?j:0}])}function el(y){for(var S=new $.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),M=(S.tables=y,S.numTables=y.length,Math.pow(2,Qa(S.numTables))),j=(S.searchRange=16*M,S.entrySelector=Qa(M),S.rangeShift=16*S.numTables-S.searchRange,[]),D=[],F=S.sizeOf()+$a().sizeOf()*S.numTables;F%4!=0;)F+=1,D.push({name:"padding",type:"BYTE",value:0});for(var z=0;z<y.length;z+=1){var ne=y[z],fe=(O.argument(ne.tableName.length===4,"Table name"+ne.tableName+" is invalid."),ne.sizeOf()),he=$a(ne.tableName,Mo(ne.encode()),F,fe);for(j.push({name:he.tag+" Table Record",type:"RECORD",value:he}),D.push({name:ne.tableName+" table",type:"RECORD",value:ne}),F+=fe,O.argument(!isNaN(F),"Something went wrong calculating the offset.");F%4!=0;)F+=1,D.push({name:"padding",type:"BYTE",value:0})}return j.sort(function(Me,Pe){return Me.value.tag>Pe.value.tag?1:-1}),S.fields=S.fields.concat(j),S.fields=S.fields.concat(D),S}function tl(y,S,M){for(var j=0;j<S.length;j+=1){var D=y.charToGlyphIndex(S[j]);if(0<D)return y.glyphs.get(D).getMetrics()}return M}var wd={make:el,fontToTable:function(y){for(var S,M=[],j=[],D=[],F=[],z=[],ne=[],fe=[],he=0,Me=0,Pe=0,Ce=0,be=0,Qe=0;Qe<y.glyphs.length;Qe+=1){var Ge=y.glyphs.get(Qe),qe=0|Ge.unicode;if(isNaN(Ge.advanceWidth))throw new Error("Glyph "+Ge.name+" ("+Qe+"): advanceWidth is not a number.");(qe<S||S===void 0)&&0<qe&&(S=qe),he<qe&&(he=qe);var qe=Wt.getUnicodeRange(qe);if(qe<32)Me|=1<<qe;else if(qe<64)Pe|=1<<qe-32;else if(qe<96)Ce|=1<<qe-64;else{if(!(qe<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");be|=1<<qe-96}Ge.name!==".notdef"&&(qe=Ge.getMetrics(),M.push(qe.xMin),j.push(qe.yMin),D.push(qe.xMax),F.push(qe.yMax),ne.push(qe.leftSideBearing),fe.push(qe.rightSideBearing),z.push(Ge.advanceWidth))}var Oe,ke={xMin:Math.min.apply(null,M),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,D),yMax:Math.max.apply(null,F),advanceWidthMax:Math.max.apply(null,z),advanceWidthAvg:function(pr){for(var ts=0,fi=0;fi<pr.length;fi+=1)ts+=pr[fi];return ts/pr.length}(z),minLeftSideBearing:Math.min.apply(null,ne),maxLeftSideBearing:Math.max.apply(null,ne),minRightSideBearing:Math.min.apply(null,fe)},ut=(ke.ascender=y.ascender,ke.descender=y.descender,bt.make({flags:3,unitsPerEm:y.unitsPerEm,xMin:ke.xMin,yMin:ke.yMin,xMax:ke.xMax,yMax:ke.yMax,lowestRecPPEM:3,createdTimestamp:y.createdTimestamp})),vt=me.make({ascender:ke.ascender,descender:ke.descender,advanceWidthMax:ke.advanceWidthMax,minLeftSideBearing:ke.minLeftSideBearing,minRightSideBearing:ke.minRightSideBearing,xMaxExtent:ke.maxLeftSideBearing+(ke.xMax-ke.xMin),numberOfHMetrics:y.glyphs.length}),dt=He.make(y.glyphs.length),ht=Wt.make({xAvgCharWidth:Math.round(ke.advanceWidthAvg),usWeightClass:y.tables.os2.usWeightClass,usWidthClass:y.tables.os2.usWidthClass,usFirstCharIndex:S,usLastCharIndex:he,ulUnicodeRange1:Me,ulUnicodeRange2:Pe,ulUnicodeRange3:Ce,ulUnicodeRange4:be,fsSelection:y.tables.os2.fsSelection,sTypoAscender:ke.ascender,sTypoDescender:ke.descender,sTypoLineGap:0,usWinAscent:ke.yMax,usWinDescent:Math.abs(ke.yMin),ulCodePageRange1:1,sxHeight:tl(y,"xyvw",{yMax:Math.round(ke.ascender/2)}).yMax,sCapHeight:tl(y,"HIKLEFJMNTZBDPRAGOQSUVWXY",ke).yMax,usDefaultChar:y.hasChar(" ")?32:0,usBreakChar:y.hasChar(" ")?32:0}),Mt=Xe.make(y.glyphs),qt=K.make(y.glyphs),Zt=y.getEnglishName("fontFamily"),kt=y.getEnglishName("fontSubfamily"),Bt=Zt+" "+kt,$t=($t=y.getEnglishName("postScriptName"))||Zt.replace(/\s/g,"")+"-"+kt,or={};for(Oe in y.names)or[Oe]=y.names[Oe];or.uniqueID||(or.uniqueID={en:y.getEnglishName("manufacturer")+":"+Bt}),or.postScriptName||(or.postScriptName={en:$t}),or.preferredFamily||(or.preferredFamily=y.names.fontFamily),or.preferredSubfamily||(or.preferredSubfamily=y.names.fontSubfamily);var Tr=[],Mr=br.make(or,Tr),Tr=0<Tr.length?tt.make(Tr):void 0,qr=ci.make(),Bt=yt.make(y.glyphs,{version:y.getEnglishName("version"),fullName:Bt,familyName:Zt,weightName:kt,postScriptName:$t,unitsPerEm:y.unitsPerEm,fontBBox:[0,ke.yMin,ke.ascender,ke.advanceWidthMax]}),Zt=y.metas&&0<Object.keys(y.metas).length?Ja.make(y.metas):void 0,kt=[ut,vt,dt,ht,Mr,qt,qr,Bt,Mt];Tr&&kt.push(Tr),y.tables.gsub&&kt.push(Ji.make(y.tables.gsub)),Zt&&kt.push(Zt);for(var Er=Mo(($t=el(kt)).encode()),Qt=$t.fields,_r=!1,Kt=0;Kt<Qt.length;Kt+=1)if(Qt[Kt].name==="head table"){Qt[Kt].value.checkSumAdjustment=2981146554-Er,_r=!0;break}if(_r)return $t;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Mo};function To(y,S){for(var M=0,j=y.length-1;M<=j;){var D=M+j>>>1,F=y[D].tag;if(F===S)return D;F<S?M=1+D:j=D-1}return-M-1}function rl(y,S){for(var M=0,j=y.length-1;M<=j;){var D=M+j>>>1,F=y[D];if(F===S)return D;F<S?M=1+D:j=D-1}return-M-1}function nl(y,S){for(var M=0,j=y.length-1;M<=j;){var D,F=M+j>>>1,z=(D=y[F]).start;if(z===S)return D;z<S?M=1+F:j=F-1}if(0<M)return S>(D=y[M-1]).end?0:D}function Ls(y,S){this.font=y,this.tableName=S}function Rs(y){Ls.call(this,y,"gpos")}function rn(y){Ls.call(this,y,"gsub")}function il(y,S,M){for(var j=y.subtables,D=0;D<j.length;D++){var F=j[D];if(F.substFormat===S)return F}if(M)return j.push(M),M}function sl(y){for(var S=new ArrayBuffer(y.length),M=new Uint8Array(S),j=0;j<y.length;++j)M[j]=y[j];return S}function di(y,S){if(!y)throw S}function ol(y,S,M,j,D){var F=0<(S&j)?(F=y.parseByte(),M+(F=S&D?F:-F)):0<(S&D)?M:M+y.parseShort();return F}function Sd(y,S,M){var j,D=new ae.Parser(S,M);if(y.numberOfContours=D.parseShort(),y._xMin=D.parseShort(),y._yMin=D.parseShort(),y._xMax=D.parseShort(),y._yMax=D.parseShort(),0<y.numberOfContours){for(var F=y.endPointIndices=[],z=0;z<y.numberOfContours;z+=1)F.push(D.parseUShort());y.instructionLength=D.parseUShort(),y.instructions=[];for(var ne=0;ne<y.instructionLength;ne+=1)y.instructions.push(D.parseByte());for(var fe=F[F.length-1]+1,he=[],Me=0;Me<fe;Me+=1)if(j=D.parseByte(),he.push(j),0<(8&j))for(var Pe=D.parseByte(),Ce=0;Ce<Pe;Ce+=1)he.push(j),Me+=1;if(O.argument(he.length===fe,"Bad flags."),0<F.length){var be,Qe=[];if(0<fe){for(var Ge=0;Ge<fe;Ge+=1)j=he[Ge],(be={}).onCurve=!!(1&j),be.lastPointOfContour=0<=F.indexOf(Ge),Qe.push(be);for(var qe=0,Oe=0;Oe<fe;Oe+=1)j=he[Oe],(be=Qe[Oe]).x=ol(D,j,qe,2,16),qe=be.x;for(var ke=0,ut=0;ut<fe;ut+=1)j=he[ut],(be=Qe[ut]).y=ol(D,j,ke,4,32),ke=be.y}y.points=Qe}else y.points=[]}else if(y.numberOfContours===0)y.points=[];else{y.isComposite=!0,y.points=[],y.components=[];for(var vt=!0;vt;){he=D.parseUShort();var dt={glyphIndex:D.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&he)?0<(2&he)?(dt.dx=D.parseShort(),dt.dy=D.parseShort()):dt.matchedPoints=[D.parseUShort(),D.parseUShort()]:0<(2&he)?(dt.dx=D.parseChar(),dt.dy=D.parseChar()):dt.matchedPoints=[D.parseByte(),D.parseByte()],0<(8&he)?dt.xScale=dt.yScale=D.parseF2Dot14():0<(64&he)?(dt.xScale=D.parseF2Dot14(),dt.yScale=D.parseF2Dot14()):0<(128&he)&&(dt.xScale=D.parseF2Dot14(),dt.scale01=D.parseF2Dot14(),dt.scale10=D.parseF2Dot14(),dt.yScale=D.parseF2Dot14()),y.components.push(dt),vt=!!(32&he)}if(256&he){y.instructionLength=D.parseUShort(),y.instructions=[];for(var ht=0;ht<y.instructionLength;ht+=1)y.instructions.push(D.parseByte())}}}function Eo(y,S){for(var M=[],j=0;j<y.length;j+=1){var D=y[j],D={x:S.xScale*D.x+S.scale01*D.y+S.dx,y:S.scale10*D.x+S.yScale*D.y+S.dy,onCurve:D.onCurve,lastPointOfContour:D.lastPointOfContour};M.push(D)}return M}function al(y){var S=new q;if(y)for(var M=function(Pe){for(var Ce=[],be=[],Qe=0;Qe<Pe.length;Qe+=1){var Ge=Pe[Qe];be.push(Ge),Ge.lastPointOfContour&&(Ce.push(be),be=[])}return O.argument(be.length===0,"There are still points left in the current contour."),Ce}(y),j=0;j<M.length;++j){var D,F=M[j],z=F[F.length-1],ne=F[0];z.onCurve?S.moveTo(z.x,z.y):ne.onCurve?S.moveTo(ne.x,ne.y):(D={x:.5*(z.x+ne.x),y:.5*(z.y+ne.y)},S.moveTo(D.x,D.y));for(var fe=0;fe<F.length;++fe){var he,Me=z,z=ne,ne=F[(fe+1)%F.length];z.onCurve?S.lineTo(z.x,z.y):(he=ne,Me.onCurve||(z.x,Me.x,z.y,Me.y),ne.onCurve||(he={x:.5*(z.x+ne.x),y:.5*(z.y+ne.y)}),S.quadraticCurveTo(z.x,z.y,he.x,he.y))}S.closePath()}return S}function Md(y,S){if(S.isComposite)for(var M=0;M<S.components.length;M+=1){var j=S.components[M],D=y.get(j.glyphIndex);if(D.getPath(),D.points){var F=void 0;if(j.matchedPoints===void 0)F=Eo(D.points,j);else{if(j.matchedPoints[0]>S.points.length-1||j.matchedPoints[1]>D.points.length-1)throw Error("Matched points out of range in "+S.name);var z=S.points[j.matchedPoints[0]],ne=D.points[j.matchedPoints[1]],j={xScale:j.xScale,scale01:j.scale01,scale10:j.scale10,yScale:j.yScale,dx:0,dy:0},ne=Eo([ne],j)[0];j.dx=z.x-ne.x,j.dy=z.y-ne.y,F=Eo(D.points,j)}S.points=S.points.concat(F)}}return al(S.points)}(Rs.prototype=Ls.prototype={searchTag:To,binSearch:rl,getTable:function(y){var S=this.font.tables[this.tableName];return S=!S&&y?this.font.tables[this.tableName]=this.createDefaultTable():S},getScriptNames:function(){var y=this.getTable();return y?y.scripts.map(function(S){return S.tag}):[]},getDefaultScriptName:function(){var y=this.getTable();if(y){for(var S=!1,M=0;M<y.scripts.length;M++){var j=y.scripts[M].tag;if(j==="DFLT")return j;j==="latn"&&(S=!0)}return S?"latn":void 0}},getScriptTable:function(y,S){var M,j=this.getTable(S);if(j)return M=j.scripts,0<=(j=To(j.scripts,y=y||"DFLT"))?M[j].script:S?(M.splice(-1-j,0,S={tag:y,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),S.script):void 0},getLangSysTable:function(D,S,M){var j,D=this.getScriptTable(D,M);if(D)return S&&S!=="dflt"&&S!=="DFLT"?0<=(j=To(D.langSysRecords,S))?D.langSysRecords[j].langSys:M?(D.langSysRecords.splice(-1-j,0,M={tag:S,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),M.langSys):void 0:D.defaultLangSys},getFeatureTable:function(y,S,M,j){if(y=this.getLangSysTable(y,S,j),y){for(var D,F=y.featureIndexes,z=this.font.tables[this.tableName].features,ne=0;ne<F.length;ne++)if((D=z[F[ne]]).tag===M)return D.feature;if(j)return S=z.length,O.assert(S===0||M>=z[S-1].tag,"Features must be added in alphabetical order."),z.push(D={tag:M,feature:{params:0,lookupListIndexes:[]}}),F.push(S),D.feature}},getLookupTables:function(F,S,M,j,D){var F=this.getFeatureTable(F,S,M,D),z=[];if(F){for(var ne,fe=F.lookupListIndexes,he=this.font.tables[this.tableName].lookups,Me=0;Me<fe.length;Me++)(ne=he[fe[Me]]).lookupType===j&&z.push(ne);if(z.length===0&&D)return S=he.length,he.push(ne={lookupType:j,lookupFlag:0,subtables:[],markFilteringSet:void 0}),fe.push(S),[ne]}return z},getGlyphClass:function(y,S){switch(y.format){case 1:return y.startGlyph<=S&&S<y.startGlyph+y.classes.length?y.classes[S-y.startGlyph]:0;case 2:var M=nl(y.ranges,S);return M?M.classId:0}},getCoverageIndex:function(y,S){switch(y.format){case 1:var M=rl(y.glyphs,S);return 0<=M?M:-1;case 2:return M=nl(y.ranges,S),M?M.index+S-M.start:-1}},expandCoverage:function(y){if(y.format===1)return y.glyphs;for(var S=[],M=y.ranges,j=0;j<M.length;j++)for(var D=M[j],F=D.start,z=D.end,ne=F;ne<=z;ne++)S.push(ne);return S}}).init=function(){var y=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(y)},Rs.prototype.getKerningValue=function(y,S,M){for(var j=0;j<y.length;j++)for(var D=y[j].subtables,F=0;F<D.length;F++){var z=D[F],ne=this.getCoverageIndex(z.coverage,S);if(!(ne<0))switch(z.posFormat){case 1:for(var fe=z.pairSets[ne],he=0;he<fe.length;he++){var Me=fe[he];if(Me.secondGlyph===M)return Me.value1&&Me.value1.xAdvance||0}break;case 2:var Ce=this.getGlyphClass(z.classDef1,S),Pe=this.getGlyphClass(z.classDef2,M),Ce=z.classRecords[Ce][Pe];return Ce.value1&&Ce.value1.xAdvance||0}}return 0},Rs.prototype.getKerningTables=function(y,S){if(this.font.tables.gpos)return this.getLookupTables(y,S,"kern",2)},(rn.prototype=Ls.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},rn.prototype.getSingle=function(y,S,M){for(var j=[],D=this.getLookupTables(S,M,y,1),F=0;F<D.length;F++)for(var z=D[F].subtables,ne=0;ne<z.length;ne++){var fe=z[ne],he=this.expandCoverage(fe.coverage),Me=void 0;if(fe.substFormat===1)for(var Pe=fe.deltaGlyphId,Me=0;Me<he.length;Me++){var Ce=he[Me];j.push({sub:Ce,by:Ce+Pe})}else{var be=fe.substitute;for(Me=0;Me<he.length;Me++)j.push({sub:he[Me],by:be[Me]})}}return j},rn.prototype.getAlternates=function(y,S,M){for(var j=[],D=this.getLookupTables(S,M,y,3),F=0;F<D.length;F++)for(var z=D[F].subtables,ne=0;ne<z.length;ne++)for(var fe=z[ne],he=this.expandCoverage(fe.coverage),Me=fe.alternateSets,Pe=0;Pe<he.length;Pe++)j.push({sub:he[Pe],by:Me[Pe]});return j},rn.prototype.getLigatures=function(y,S,M){for(var j=[],D=this.getLookupTables(S,M,y,4),F=0;F<D.length;F++)for(var z=D[F].subtables,ne=0;ne<z.length;ne++)for(var fe=z[ne],he=this.expandCoverage(fe.coverage),Me=fe.ligatureSets,Pe=0;Pe<he.length;Pe++)for(var Ce=he[Pe],be=Me[Pe],Qe=0;Qe<be.length;Qe++){var Ge=be[Qe];j.push({sub:[Ce].concat(Ge.components),by:Ge.ligGlyph})}return j},rn.prototype.addSingle=function(y,S,M,j){M=il(this.getLookupTables(M,j,y,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),O.assert(M.coverage.format===1,"Ligature: unable to modify coverage table format "+M.coverage.format),j=S.sub,y=this.binSearch(M.coverage.glyphs,j),y<0&&(M.coverage.glyphs.splice(y=-1-y,0,j),M.substitute.splice(y,0,0)),M.substitute[y]=S.by},rn.prototype.addAlternate=function(y,S,M,j){M=il(this.getLookupTables(M,j,y,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),O.assert(M.coverage.format===1,"Ligature: unable to modify coverage table format "+M.coverage.format),j=S.sub,y=this.binSearch(M.coverage.glyphs,j),y<0&&(M.coverage.glyphs.splice(y=-1-y,0,j),M.alternateSets.splice(y,0,0)),M.alternateSets[y]=S.by},rn.prototype.addLigature=function(F,fe,ne,D){var ne=this.getLookupTables(ne,D,F,4,!0)[0],D=ne.subtables[0],F=(D||(ne.subtables[0]=D={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),O.assert(D.coverage.format===1,"Ligature: unable to modify coverage table format "+D.coverage.format),fe.sub[0]),z=fe.sub.slice(1),ne={ligGlyph:fe.by,components:z},fe=this.binSearch(D.coverage.glyphs,F);if(0<=fe){for(var he=D.ligatureSets[fe],Me=0;Me<he.length;Me++)if(function(Pe,Ce){var be=Pe.length;if(be===Ce.length){for(var Qe=0;Qe<be;Qe++)if(Pe[Qe]!==Ce[Qe])return;return 1}}(he[Me].components,z))return;he.push(ne)}else D.coverage.glyphs.splice(fe=-1-fe,0,F),D.ligatureSets.splice(fe,0,[ne])},rn.prototype.getFeature=function(y,S,M){if(/ss\d\d/.test(y))return this.getSingle(y,S,M);switch(y){case"aalt":case"salt":return this.getSingle(y,S,M).concat(this.getAlternates(y,S,M));case"dlig":case"liga":case"rlig":return this.getLigatures(y,S,M)}},rn.prototype.add=function(y,S,M,j){if(/ss\d\d/.test(y))return this.addSingle(y,S,M,j);switch(y){case"aalt":case"salt":return typeof S.by=="number"?this.addSingle(y,S,M,j):this.addAlternate(y,S,M,j);case"dlig":case"liga":case"rlig":return this.addLigature(y,S,M,j)}};var ll={getPath:al,parse:function(y,S,M,j){for(var D=new nt.GlyphSet(j),F=0;F<M.length-1;F+=1){var z=M[F];z!==M[F+1]?D.push(F,nt.ttfGlyphLoader(j,F,Sd,y,S+z,Md)):D.push(F,nt.glyphLoader(j,F))}return D}};function cl(y){this.font=y,this.getCommands=function(S){return ll.getPath(S).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Td(y){return y}function ul(y){return Math.sign(y)*Math.round(Math.abs(y))}function Ed(y){return Math.sign(y)*Math.round(Math.abs(2*y))/2}function jd(y){return Math.sign(y)*(Math.round(Math.abs(y)+.5)-.5)}function Ad(y){return Math.sign(y)*Math.ceil(Math.abs(y))}function Cd(y){return Math.sign(y)*Math.floor(Math.abs(y))}function dl(y){var S=this.srPeriod,M=this.srPhase,j=1;return y<0&&(y=-y,j=-1),y+=this.srThreshold-M,y=Math.trunc(y/S)*S,(y+=M)<0?M*j:y*j}var nn={x:1,y:0,axis:"x",distance:function(y,S,M,j){return(M?y.xo:y.x)-(j?S.xo:S.x)},interpolate:function(y,S,M,j){var D,F,z,ne,fe,he,Me;if(!j||j===this)return D=y.xo-S.xo,F=y.xo-M.xo,fe=S.x-S.xo,he=M.x-M.xo,(Me=(z=Math.abs(D))+(ne=Math.abs(F)))===0?void(y.x=y.xo+(fe+he)/2):void(y.x=y.xo+(fe*ne+he*z)/Me);D=j.distance(y,S,!0,!0),F=j.distance(y,M,!0,!0),fe=j.distance(S,S,!1,!0),he=j.distance(M,M,!1,!0),(Me=(z=Math.abs(D))+(ne=Math.abs(F)))===0?nn.setRelative(y,y,(fe+he)/2,j,!0):nn.setRelative(y,y,(fe*ne+he*z)/Me,j,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(y,S,M,j,D){var F,z;j&&j!==this?(F=D?S.xo:S.x,z=D?S.yo:S.y,F+=M*j.x,z+=M*j.y,y.x=F+(y.y-z)/j.normalSlope):y.x=(D?S.xo:S.x)+M},slope:0,touch:function(y){y.xTouched=!0},touched:function(y){return y.xTouched},untouch:function(y){y.xTouched=!1}},fn={x:0,y:1,axis:"y",distance:function(y,S,M,j){return(M?y.yo:y.y)-(j?S.yo:S.y)},interpolate:function(y,S,M,j){var D,F,z,ne,fe,he,Me;if(!j||j===this)return D=y.yo-S.yo,F=y.yo-M.yo,fe=S.y-S.yo,he=M.y-M.yo,(Me=(z=Math.abs(D))+(ne=Math.abs(F)))===0?void(y.y=y.yo+(fe+he)/2):void(y.y=y.yo+(fe*ne+he*z)/Me);D=j.distance(y,S,!0,!0),F=j.distance(y,M,!0,!0),fe=j.distance(S,S,!1,!0),he=j.distance(M,M,!1,!0),(Me=(z=Math.abs(D))+(ne=Math.abs(F)))===0?fn.setRelative(y,y,(fe+he)/2,j,!0):fn.setRelative(y,y,(fe*ne+he*z)/Me,j,!0)},normalSlope:0,setRelative:function(y,S,M,j,D){var F,z;j&&j!==this?(F=D?S.xo:S.x,z=D?S.yo:S.y,F+=M*j.x,z+=M*j.y,y.y=z+j.normalSlope*(y.x-F)):y.y=(D?S.yo:S.y)+M},slope:Number.POSITIVE_INFINITY,touch:function(y){y.yTouched=!0},touched:function(y){return y.yTouched},untouch:function(y){y.yTouched=!1}};function Qi(y,S){this.x=y,this.y=S,this.axis=void 0,this.slope=S/y,this.normalSlope=-y/S,Object.freeze(this)}function $i(y,S){var M=Math.sqrt(y*y+S*S);return S/=M,(y/=M)===1&&S===0?nn:y===0&&S===1?fn:new Qi(y,S)}function pn(y,S,M,j){this.x=this.xo=Math.round(64*y)/64,this.y=this.yo=Math.round(64*S)/64,this.lastPointOfContour=M,this.onCurve=j,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(nn),Object.freeze(fn),Qi.prototype.distance=function(y,S,M,j){return this.x*nn.distance(y,S,M,j)+this.y*fn.distance(y,S,M,j)},Qi.prototype.interpolate=function(y,D,F,j){var z=j.distance(y,D,!0,!0),ne=j.distance(y,F,!0,!0),D=j.distance(D,D,!1,!0),F=j.distance(F,F,!1,!0),z=Math.abs(z),ne=Math.abs(ne),fe=z+ne;fe===0?this.setRelative(y,y,(D+F)/2,j,!0):this.setRelative(y,y,(D*ne+F*z)/fe,j,!0)},Qi.prototype.setRelative=function(y,F,fe,he,ne){var z=ne?F.xo:F.x,ne=ne?F.yo:F.y,F=z+fe*(he=he||this).x,z=ne+fe*he.y,ne=he.normalSlope,fe=this.slope,he=y.x,Me=y.y;y.x=(fe*he-ne*F+z-Me)/(fe-ne),y.y=fe*(y.x-he)+Me},Qi.prototype.touch=function(y){y.xTouched=!0,y.yTouched=!0},pn.prototype.nextTouched=function(y){for(var S=this.nextPointOnContour;!y.touched(S)&&S!==this;)S=S.nextPointOnContour;return S},pn.prototype.prevTouched=function(y){for(var S=this.prevPointOnContour;!y.touched(S)&&S!==this;)S=S.prevPointOnContour;return S};var es=Object.freeze(new pn(0,0)),Ld={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function jn(y,S){switch(this.env=y,this.stack=[],this.prog=S,y){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=nn,this.round=ul}}function Ps(y){for(var S=y.tZone=new Array(y.gZone.length),M=0;M<S.length;M++)S[M]=new pn(0,0)}function hl(y,S){var M,j=y.prog,D=y.ip,F=1;do if((M=j[++D])===88)F++;else if(M===89)F--;else if(M===64)D+=j[D+1]+1;else if(M===65)D+=2*j[D+1]+1;else if(176<=M&&M<=183)D+=M-176+1;else if(184<=M&&M<=191)D+=2*(M-184+1);else if(S&&F===1&&M===27)break;while(0<F);y.ip=D}function fl(y,S){l.DEBUG&&console.log(S.step,"SVTCA["+y.axis+"]"),S.fv=S.pv=S.dpv=y}function pl(y,S){l.DEBUG&&console.log(S.step,"SPVTCA["+y.axis+"]"),S.pv=S.dpv=y}function ml(y,S){l.DEBUG&&console.log(S.step,"SFVTCA["+y.axis+"]"),S.fv=y}function gl(y,S){var M,D=S.stack,j=D.pop(),D=D.pop(),F=S.z2[j],z=S.z1[D];l.DEBUG&&console.log("SPVTL["+y+"]",j,D),j=y?(M=F.y-z.y,z.x-F.x):(M=z.x-F.x,z.y-F.y),S.pv=S.dpv=$i(M,j)}function yl(y,S){var M,D=S.stack,j=D.pop(),D=D.pop(),F=S.z2[j],z=S.z1[D];l.DEBUG&&console.log("SFVTL["+y+"]",j,D),j=y?(M=F.y-z.y,z.x-F.x):(M=z.x-F.x,z.y-F.y),S.fv=$i(M,j)}function jo(y){l.DEBUG&&console.log(y.step,"POP[]"),y.stack.pop()}function vl(y,S){var M=S.stack.pop(),j=S.z0[M],D=S.fv,F=S.pv,z=(l.DEBUG&&console.log(S.step,"MDAP["+y+"]",M),F.distance(j,es));y&&(z=S.round(z)),D.setRelative(j,es,z,F),D.touch(j),S.rp0=S.rp1=M}function bl(y,S){var M,j,D,F=S.z2,z=F.length-2;l.DEBUG&&console.log(S.step,"IUP["+y.axis+"]");for(var ne=0;ne<z;ne++)M=F[ne],y.touched(M)||(j=M.prevTouched(y))!==M&&(j===(D=M.nextTouched(y))&&y.setRelative(M,M,y.distance(j,j,!1,!0),y,!0),y.interpolate(M,j,D,y))}function _l(y,S){for(var M=S.stack,j=y?S.rp1:S.rp2,D=(y?S.z0:S.z1)[j],F=S.fv,z=S.pv,ne=S.loop,fe=S.z2;ne--;){var he=M.pop(),Me=fe[he],Pe=z.distance(D,D,!1,!0);F.setRelative(Me,Me,Pe,z),F.touch(Me),l.DEBUG&&console.log(S.step,(1<S.loop?"loop "+(S.loop-ne)+": ":"")+"SHP["+(y?"rp1":"rp2")+"]",he)}S.loop=1}function xl(y,S){for(var M=S.stack,z=y?S.rp1:S.rp2,j=(y?S.z0:S.z1)[z],D=S.fv,F=S.pv,z=M.pop(),ne=S.z2[S.contours[z]],fe=ne,he=(l.DEBUG&&console.log(S.step,"SHC["+y+"]",z),F.distance(j,j,!1,!0));fe!==j&&D.setRelative(fe,fe,he,F),(fe=fe.nextPointOnContour)!==ne;);}function wl(y,S){var M,j,ne=S.stack,D=y?S.rp1:S.rp2,D=(y?S.z0:S.z1)[D],F=S.fv,z=S.pv,ne=ne.pop();switch(l.DEBUG&&console.log(S.step,"SHZ["+y+"]",ne),ne){case 0:M=S.tZone;break;case 1:M=S.gZone;break;default:throw new Error("Invalid zone")}for(var fe=z.distance(D,D,!1,!0),he=M.length-2,Me=0;Me<he;Me++)j=M[Me],F.setRelative(j,j,fe,z)}function Sl(y,S){var j=S.stack,M=j.pop()/64,j=j.pop(),D=S.z1[j],F=S.z0[S.rp0],z=S.fv,ne=S.pv;z.setRelative(D,F,M,ne),z.touch(D),l.DEBUG&&console.log(S.step,"MSIRP["+y+"]",M,j),S.rp1=S.rp0,S.rp2=j,y&&(S.rp0=j)}function Ml(y,S){var M=S.stack,ne=M.pop(),M=M.pop(),j=S.z0[M],D=S.fv,F=S.pv,z=S.cvt[ne],ne=(l.DEBUG&&console.log(S.step,"MIAP["+y+"]",ne,"(",z,")",M),F.distance(j,es));y&&(Math.abs(ne-z)<S.cvCutIn&&(ne=z),ne=S.round(ne)),D.setRelative(j,es,ne,F),S.zp0===0&&(j.xo=j.x,j.yo=j.y),D.touch(j),S.rp0=S.rp1=M}function Tl(y,S){var M=S.stack,j=M.pop(),D=S.z2[j];l.DEBUG&&console.log(S.step,"GC["+y+"]",j),M.push(64*S.dpv.distance(D,es,y,!1))}function El(y,S){var j=S.stack,M=j.pop(),j=j.pop(),D=S.z1[M],F=S.z0[j],F=S.dpv.distance(F,D,y,y);l.DEBUG&&console.log(S.step,"MD["+y+"]",M,j,"->",F),S.stack.push(Math.round(64*F))}function Ao(y,S){var M=S.stack,j=M.pop(),D=S.fv,F=S.pv,z=S.ppem,ne=S.deltaBase+16*(y-1),fe=S.deltaShift,he=S.z0;l.DEBUG&&console.log(S.step,"DELTAP["+y+"]",j,M);for(var Me=0;Me<j;Me++){var Pe=M.pop(),Ce=M.pop();ne+((240&Ce)>>4)===z&&(0<=(Ce=(15&Ce)-8)&&Ce++,l.DEBUG&&console.log(S.step,"DELTAPFIX",Pe,"by",Ce*fe),Pe=he[Pe],D.setRelative(Pe,Pe,Ce*fe,F))}}function Ds(y,S){var M=S.stack,j=M.pop();l.DEBUG&&console.log(S.step,"ROUND[]"),M.push(64*S.round(j/64))}function Co(y,S){var M=S.stack,j=M.pop(),D=S.ppem,F=S.deltaBase+16*(y-1),z=S.deltaShift;l.DEBUG&&console.log(S.step,"DELTAC["+y+"]",j,M);for(var ne=0;ne<j;ne++){var fe=M.pop(),he=M.pop();F+((240&he)>>4)===D&&(0<=(he=(15&he)-8)&&he++,he=he*z,l.DEBUG&&console.log(S.step,"DELTACFIX",fe,"by",he),S.cvt[fe]+=he)}}function jl(y,S){var M,D=S.stack,j=D.pop(),D=D.pop(),F=S.z2[j],z=S.z1[D];l.DEBUG&&console.log(S.step,"SDPVTL["+y+"]",j,D),j=y?(M=F.y-z.y,z.x-F.x):(M=z.x-F.x,z.y-F.y),S.dpv=$i(M,j)}function An(y,S){var M=S.stack,j=S.prog,D=S.ip;l.DEBUG&&console.log(S.step,"PUSHB["+y+"]");for(var F=0;F<y;F++)M.push(j[++D]);S.ip=D}function Cn(y,S){var M=S.ip,j=S.prog,D=S.stack;l.DEBUG&&console.log(S.ip,"PUSHW["+y+"]");for(var F=0;F<y;F++){var z=j[++M]<<8|j[++M];32768&z&&(z=-(1+(65535^z))),D.push(z)}S.ip=M}function ct(y,S,M,j,D,F){var z,ne,he=F.stack,fe=y&&he.pop(),he=he.pop(),Me=F.rp0,Me=F.z0[Me],Pe=F.z1[he],Ce=F.minDis,be=F.fv,Qe=F.dpv,Ge=z=Qe.distance(Pe,Me,!0,!0),qe=0<=Ge?1:-1;Ge=Math.abs(Ge),y&&(ne=F.cvt[fe],j&&Math.abs(Ge-ne)<F.cvCutIn&&(Ge=ne)),M&&Ge<Ce&&(Ge=Ce),j&&(Ge=F.round(Ge)),be.setRelative(Pe,Me,qe*Ge,Qe),be.touch(Pe),l.DEBUG&&console.log(F.step,(y?"MIRP[":"MDRP[")+(S?"M":"m")+(M?">":"_")+(j?"R":"_")+(D===0?"Gr":D===1?"Bl":D===2?"Wh":"")+"]",y?fe+"("+F.cvt[fe]+","+ne+")":"",he,"(d =",z,"->",qe*Ge,")"),F.rp1=F.rp0,F.rp2=he,S&&(F.rp0=he)}cl.prototype.exec=function(y,S){if(typeof S!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var M=this.font,j=this._prepState;if(!j||j.ppem!==S){var D=this._fpgmState;if(!D){jn.prototype=Ld,(D=this._fpgmState=new jn("fpgm",M.tables.fpgm)).funcs=[],D.font=M,l.DEBUG&&(console.log("---EXEC FPGM---"),D.step=-1);try{hi(D)}catch(he){return console.log("Hinting error in FPGM:"+he),void(this._errorState=3)}}jn.prototype=D,(j=this._prepState=new jn("prep",M.tables.prep)).ppem=S;var F=M.tables.cvt;if(F)for(var z=j.cvt=new Array(F.length),ne=S/M.unitsPerEm,fe=0;fe<F.length;fe++)z[fe]=F[fe]*ne;else j.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),j.step=-1);try{hi(j)}catch(he){this._errorState<2&&console.log("Hinting error in PREP:"+he),this._errorState=2}}if(!(1<this._errorState))try{return Rd(y,j)}catch(he){this._errorState<1&&(console.log("Hinting error:"+he),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Rd=function(y,S){var M=S.ppem/S.font.unitsPerEm,j=M,D=y.components;if(jn.prototype=S,D){for(var F=S.font,z=[],ne=[],fe=0;fe<D.length;fe++){var he=D[fe],Me=F.glyphs.get(he.glyphIndex),Pe=new jn("glyf",Me.instructions);l.DEBUG&&(console.log("---EXEC COMP "+fe+"---"),Pe.step=-1),Al(Me,Pe,M,j);for(var Ce=Math.round(he.dx*M),be=Math.round(he.dy*j),Qe=Pe.gZone,Ge=Pe.contours,qe=0;qe<Qe.length;qe++){var Oe=Qe[qe];Oe.xTouched=Oe.yTouched=!1,Oe.xo=Oe.x=Oe.x+Ce,Oe.yo=Oe.y=Oe.y+be}var ke=z.length;z.push.apply(z,Qe);for(var ut=0;ut<Ge.length;ut++)ne.push(Ge[ut]+ke)}y.instructions&&!Pe.inhibitGridFit&&((Pe=new jn("glyf",y.instructions)).gZone=Pe.z0=Pe.z1=Pe.z2=z,Pe.contours=ne,z.push(new pn(0,0),new pn(Math.round(y.advanceWidth*M),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),Pe.step=-1),hi(Pe),z.length-=2)}else Pe=new jn("glyf",y.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),Pe.step=-1),Al(y,Pe,M,j),z=Pe.gZone;return z},Al=function(y,S,M,j){for(var D,F,z,ne=y.points||[],fe=ne.length,he=S.gZone=S.z0=S.z1=S.z2=[],Me=S.contours=[],Pe=0;Pe<fe;Pe++)D=ne[Pe],he[Pe]=new pn(D.x*M,D.y*j,D.lastPointOfContour,D.onCurve);for(var Ce=0;Ce<fe;Ce++)D=he[Ce],F||(F=D,Me.push(Ce)),D.lastPointOfContour?((D.nextPointOnContour=F).prevPointOnContour=D,F=void 0):(z=he[Ce+1],(D.nextPointOnContour=z).prevPointOnContour=D);if(!S.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",S.stack);for(var be=0;be<fe;be++)console.log(be,he[be].x,he[be].y)}if(he.push(new pn(0,0),new pn(Math.round(y.advanceWidth*M),0)),hi(S),he.length-=2,l.DEBUG){console.log("FINISHED GLYPH",S.stack);for(var Qe=0;Qe<fe;Qe++)console.log(Qe,he[Qe].x,he[Qe].y)}}},hi=function(y){var S=y.prog;if(S){var M,j=S.length;for(y.ip=0;y.ip<j;y.ip++){if(l.DEBUG&&y.step++,!(M=Pd[S[y.ip]]))throw new Error("unknown instruction: 0x"+Number(S[y.ip]).toString(16));M(y)}}},Pd=[fl.bind(void 0,fn),fl.bind(void 0,nn),pl.bind(void 0,fn),pl.bind(void 0,nn),ml.bind(void 0,fn),ml.bind(void 0,nn),gl.bind(void 0,0),gl.bind(void 0,1),yl.bind(void 0,0),yl.bind(void 0,1),function(y){var S=(M=y.stack).pop(),M=M.pop();l.DEBUG&&console.log(y.step,"SPVFS[]",S,M),y.pv=y.dpv=$i(M,S)},function(y){var S=(M=y.stack).pop(),M=M.pop();l.DEBUG&&console.log(y.step,"SPVFS[]",S,M),y.fv=$i(M,S)},function(y){var S=y.stack,M=y.pv;l.DEBUG&&console.log(y.step,"GPV[]"),S.push(16384*M.x),S.push(16384*M.y)},function(y){var S=y.stack,M=y.fv;l.DEBUG&&console.log(y.step,"GFV[]"),S.push(16384*M.x),S.push(16384*M.y)},function(y){y.fv=y.pv,l.DEBUG&&console.log(y.step,"SFVTPV[]")},function(S){var M=(z=S.stack).pop(),j=z.pop(),D=z.pop(),F=z.pop(),z=z.pop(),fe=S.z0,Me=S.z1,ne=fe[M],fe=fe[j],he=Me[D],Me=Me[F],S=S.z2[z],M=(l.DEBUG&&console.log("ISECT[], ",M,j,D,F,z),ne.x),j=ne.y,D=fe.x,F=fe.y,z=he.x,ne=he.y,fe=Me.x,he=Me.y,Me=(M-D)*(ne-he)-(j-F)*(z-fe),Pe=M*F-j*D,Ce=z*he-ne*fe;S.x=(Pe*(z-fe)-Ce*(M-D))/Me,S.y=(Pe*(ne-he)-Ce*(j-F))/Me},function(y){y.rp0=y.stack.pop(),l.DEBUG&&console.log(y.step,"SRP0[]",y.rp0)},function(y){y.rp1=y.stack.pop(),l.DEBUG&&console.log(y.step,"SRP1[]",y.rp1)},function(y){y.rp2=y.stack.pop(),l.DEBUG&&console.log(y.step,"SRP2[]",y.rp2)},function(y){var S=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"SZP0[]",S),y.zp0=S){case 0:y.tZone||Ps(y),y.z0=y.tZone;break;case 1:y.z0=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var S=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"SZP1[]",S),y.zp1=S){case 0:y.tZone||Ps(y),y.z1=y.tZone;break;case 1:y.z1=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var S=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"SZP2[]",S),y.zp2=S){case 0:y.tZone||Ps(y),y.z2=y.tZone;break;case 1:y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){var S=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"SZPS[]",S),y.zp0=y.zp1=y.zp2=S){case 0:y.tZone||Ps(y),y.z0=y.z1=y.z2=y.tZone;break;case 1:y.z0=y.z1=y.z2=y.gZone;break;default:throw new Error("Invalid zone pointer")}},function(y){y.loop=y.stack.pop(),l.DEBUG&&console.log(y.step,"SLOOP[]",y.loop)},function(y){l.DEBUG&&console.log(y.step,"RTG[]"),y.round=ul},function(y){l.DEBUG&&console.log(y.step,"RTHG[]"),y.round=jd},function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"SMD[]",S),y.minDis=S/64},function(y){l.DEBUG&&console.log(y.step,"ELSE[]"),hl(y,!1)},function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"JMPR[]",S),y.ip+=S-1},function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"SCVTCI[]",S),y.cvCutIn=S/64},void 0,void 0,function(y){var S=y.stack;l.DEBUG&&console.log(y.step,"DUP[]"),S.push(S[S.length-1])},jo,function(y){l.DEBUG&&console.log(y.step,"CLEAR[]"),y.stack.length=0},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"SWAP[]"),S.push(M),S.push(j)},function(y){var S=y.stack;l.DEBUG&&console.log(y.step,"DEPTH[]"),S.push(S.length)},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"CINDEX[]",M),S.push(S[S.length-M])},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"MINDEX[]",M),S.push(S.splice(S.length-M,1)[0])},void 0,void 0,void 0,function(y){var S=(j=y.stack).pop(),M=j.pop(),j=(l.DEBUG&&console.log(y.step,"LOOPCALL[]",S,M),y.ip),D=y.prog;y.prog=y.funcs[S];for(var F=0;F<M;F++)hi(y),l.DEBUG&&console.log(++y.step,F+1<M?"next loopcall":"done loopcall",F);y.ip=j,y.prog=D},function(y){var S=y.stack.pop(),M=(l.DEBUG&&console.log(y.step,"CALL[]",S),y.ip),j=y.prog;y.prog=y.funcs[S],hi(y),y.ip=M,y.prog=j,l.DEBUG&&console.log(++y.step,"returning from",S)},function(y){if(y.env!=="fpgm")throw new Error("FDEF not allowed here");var j=y.stack,S=y.prog,M=y.ip,j=j.pop(),D=M;for(l.DEBUG&&console.log(y.step,"FDEF[]",j);S[++M]!==45;);y.ip=M,y.funcs[j]=S.slice(D+1,M)},void 0,vl.bind(void 0,0),vl.bind(void 0,1),bl.bind(void 0,fn),bl.bind(void 0,nn),_l.bind(void 0,0),_l.bind(void 0,1),xl.bind(void 0,0),xl.bind(void 0,1),wl.bind(void 0,0),wl.bind(void 0,1),function(y){for(var S=y.stack,M=y.loop,j=y.fv,D=S.pop()/64,F=y.z2;M--;){var z=S.pop(),ne=F[z];l.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-M)+": ":"")+"SHPIX[]",z,D),j.setRelative(ne,ne,D),j.touch(ne)}y.loop=1},function(y){for(var S=y.stack,M=y.rp1,j=y.rp2,D=y.loop,F=y.z0[M],z=y.z1[j],ne=y.fv,fe=y.dpv,he=y.z2;D--;){var Me=S.pop(),Pe=he[Me];l.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-D)+": ":"")+"IP[]",Me,M,"<->",j),ne.interpolate(Pe,F,z,fe),ne.touch(Pe)}y.loop=1},Sl.bind(void 0,0),Sl.bind(void 0,1),function(y){for(var S=y.stack,M=y.rp0,j=y.z0[M],D=y.loop,F=y.fv,z=y.pv,ne=y.z1;D--;){var fe=S.pop(),he=ne[fe];l.DEBUG&&console.log(y.step,(1<y.loop?"loop "+(y.loop-D)+": ":"")+"ALIGNRP[]",fe),F.setRelative(he,j,0,z),F.touch(he)}y.loop=1},function(y){l.DEBUG&&console.log(y.step,"RTDG[]"),y.round=Ed},Ml.bind(void 0,0),Ml.bind(void 0,1),function(y){var S=y.prog,M=y.ip,j=y.stack,D=S[++M];l.DEBUG&&console.log(y.step,"NPUSHB[]",D);for(var F=0;F<D;F++)j.push(S[++M]);y.ip=M},function(y){var S=y.ip,M=y.prog,j=y.stack,D=M[++S];l.DEBUG&&console.log(y.step,"NPUSHW[]",D);for(var F=0;F<D;F++){var z=M[++S]<<8|M[++S];32768&z&&(z=-(1+(65535^z))),j.push(z)}y.ip=S},function(y){var j=y.stack,S=(S=y.store)||(y.store=[]),M=j.pop(),j=j.pop();l.DEBUG&&console.log(y.step,"WS",M,j),S[j]=M},function(D){var S=D.stack,M=D.store,j=S.pop(),D=(l.DEBUG&&console.log(D.step,"RS",j),M&&M[j]||0);S.push(D)},function(y){var S=(M=y.stack).pop(),M=M.pop();l.DEBUG&&console.log(y.step,"WCVTP",S,M),y.cvt[M]=S/64},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"RCVT",M),S.push(64*y.cvt[M])},Tl.bind(void 0,0),Tl.bind(void 0,1),void 0,El.bind(void 0,0),El.bind(void 0,1),function(y){l.DEBUG&&console.log(y.step,"MPPEM[]"),y.stack.push(y.ppem)},void 0,function(y){l.DEBUG&&console.log(y.step,"FLIPON[]"),y.autoFlip=!0},void 0,void 0,function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"LT[]",M,j),S.push(j<M?1:0)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"LTEQ[]",M,j),S.push(j<=M?1:0)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"GT[]",M,j),S.push(M<j?1:0)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"GTEQ[]",M,j),S.push(M<=j?1:0)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"EQ[]",M,j),S.push(M===j?1:0)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"NEQ[]",M,j),S.push(M!==j?1:0)},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"ODD[]",M),S.push(Math.trunc(M)%2?1:0)},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"EVEN[]",M),S.push(Math.trunc(M)%2?0:1)},function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"IF[]",S),S||(hl(y,!0),l.DEBUG&&console.log(y.step,"EIF[]"))},function(y){l.DEBUG&&console.log(y.step,"EIF[]")},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"AND[]",M,j),S.push(M&&j?1:0)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"OR[]",M,j),S.push(M||j?1:0)},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"NOT[]",M),S.push(M?0:1)},Ao.bind(void 0,1),function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"SDB[]",S),y.deltaBase=S},function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"SDS[]",S),y.deltaShift=Math.pow(.5,S)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"ADD[]",M,j),S.push(j+M)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"SUB[]",M,j),S.push(j-M)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"DIV[]",M,j),S.push(64*j/M)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"MUL[]",M,j),S.push(j*M/64)},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"ABS[]",M),S.push(Math.abs(M))},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"NEG[]",M),S.push(-M)},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"FLOOR[]",M),S.push(64*Math.floor(M/64))},function(y){var S=y.stack,M=S.pop();l.DEBUG&&console.log(y.step,"CEILING[]",M),S.push(64*Math.ceil(M/64))},Ds.bind(void 0,0),Ds.bind(void 0,1),Ds.bind(void 0,2),Ds.bind(void 0,3),void 0,void 0,void 0,void 0,function(y){var S=(M=y.stack).pop(),M=M.pop();l.DEBUG&&console.log(y.step,"WCVTF[]",S,M),y.cvt[M]=S*y.ppem/y.font.unitsPerEm},Ao.bind(void 0,2),Ao.bind(void 0,3),Co.bind(void 0,1),Co.bind(void 0,2),Co.bind(void 0,3),function(y){var S,M=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"SROUND[]",M),y.round=dl,192&M){case 0:S=.5;break;case 64:S=1;break;case 128:S=2;break;default:throw new Error("invalid SROUND value")}switch(y.srPeriod=S,48&M){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*S;break;case 32:y.srPhase=.5*S;break;case 48:y.srPhase=.75*S;break;default:throw new Error("invalid SROUND value")}y.srThreshold=(M&=15)===0?0:(M/8-.5)*S},function(y){var S,M=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"S45ROUND[]",M),y.round=dl,192&M){case 0:S=Math.sqrt(2)/2;break;case 64:S=Math.sqrt(2);break;case 128:S=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(y.srPeriod=S,48&M){case 0:y.srPhase=0;break;case 16:y.srPhase=.25*S;break;case 32:y.srPhase=.5*S;break;case 48:y.srPhase=.75*S;break;default:throw new Error("invalid S45ROUND value")}y.srThreshold=(M&=15)===0?0:(M/8-.5)*S},void 0,void 0,function(y){l.DEBUG&&console.log(y.step,"ROFF[]"),y.round=Td},void 0,function(y){l.DEBUG&&console.log(y.step,"RUTG[]"),y.round=Ad},function(y){l.DEBUG&&console.log(y.step,"RDTG[]"),y.round=Cd},jo,jo,void 0,void 0,void 0,void 0,void 0,function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"SCANCTRL[]",S)},jl.bind(void 0,0),jl.bind(void 0,1),function(y){var S=y.stack,M=S.pop(),j=0;l.DEBUG&&console.log(y.step,"GETINFO[]",M),1&M&&(j=35),32&M&&(j|=4096),S.push(j)},void 0,function(y){var S=y.stack,M=S.pop(),j=S.pop(),D=S.pop();l.DEBUG&&console.log(y.step,"ROLL[]"),S.push(j),S.push(M),S.push(D)},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"MAX[]",M,j),S.push(Math.max(j,M))},function(y){var S=y.stack,M=S.pop(),j=S.pop();l.DEBUG&&console.log(y.step,"MIN[]",M,j),S.push(Math.min(j,M))},function(y){var S=y.stack.pop();l.DEBUG&&console.log(y.step,"SCANTYPE[]",S)},function(y){var S=y.stack.pop(),M=y.stack.pop();switch(l.DEBUG&&console.log(y.step,"INSTCTRL[]",S,M),S){case 1:return void(y.inhibitGridFit=!!M);case 2:return void(y.ignoreCvt=!!M);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,An.bind(void 0,1),An.bind(void 0,2),An.bind(void 0,3),An.bind(void 0,4),An.bind(void 0,5),An.bind(void 0,6),An.bind(void 0,7),An.bind(void 0,8),Cn.bind(void 0,1),Cn.bind(void 0,2),Cn.bind(void 0,3),Cn.bind(void 0,4),Cn.bind(void 0,5),Cn.bind(void 0,6),Cn.bind(void 0,7),Cn.bind(void 0,8),ct.bind(void 0,0,0,0,0,0),ct.bind(void 0,0,0,0,0,1),ct.bind(void 0,0,0,0,0,2),ct.bind(void 0,0,0,0,0,3),ct.bind(void 0,0,0,0,1,0),ct.bind(void 0,0,0,0,1,1),ct.bind(void 0,0,0,0,1,2),ct.bind(void 0,0,0,0,1,3),ct.bind(void 0,0,0,1,0,0),ct.bind(void 0,0,0,1,0,1),ct.bind(void 0,0,0,1,0,2),ct.bind(void 0,0,0,1,0,3),ct.bind(void 0,0,0,1,1,0),ct.bind(void 0,0,0,1,1,1),ct.bind(void 0,0,0,1,1,2),ct.bind(void 0,0,0,1,1,3),ct.bind(void 0,0,1,0,0,0),ct.bind(void 0,0,1,0,0,1),ct.bind(void 0,0,1,0,0,2),ct.bind(void 0,0,1,0,0,3),ct.bind(void 0,0,1,0,1,0),ct.bind(void 0,0,1,0,1,1),ct.bind(void 0,0,1,0,1,2),ct.bind(void 0,0,1,0,1,3),ct.bind(void 0,0,1,1,0,0),ct.bind(void 0,0,1,1,0,1),ct.bind(void 0,0,1,1,0,2),ct.bind(void 0,0,1,1,0,3),ct.bind(void 0,0,1,1,1,0),ct.bind(void 0,0,1,1,1,1),ct.bind(void 0,0,1,1,1,2),ct.bind(void 0,0,1,1,1,3),ct.bind(void 0,1,0,0,0,0),ct.bind(void 0,1,0,0,0,1),ct.bind(void 0,1,0,0,0,2),ct.bind(void 0,1,0,0,0,3),ct.bind(void 0,1,0,0,1,0),ct.bind(void 0,1,0,0,1,1),ct.bind(void 0,1,0,0,1,2),ct.bind(void 0,1,0,0,1,3),ct.bind(void 0,1,0,1,0,0),ct.bind(void 0,1,0,1,0,1),ct.bind(void 0,1,0,1,0,2),ct.bind(void 0,1,0,1,0,3),ct.bind(void 0,1,0,1,1,0),ct.bind(void 0,1,0,1,1,1),ct.bind(void 0,1,0,1,1,2),ct.bind(void 0,1,0,1,1,3),ct.bind(void 0,1,1,0,0,0),ct.bind(void 0,1,1,0,0,1),ct.bind(void 0,1,1,0,0,2),ct.bind(void 0,1,1,0,0,3),ct.bind(void 0,1,1,0,1,0),ct.bind(void 0,1,1,0,1,1),ct.bind(void 0,1,1,0,1,2),ct.bind(void 0,1,1,0,1,3),ct.bind(void 0,1,1,1,0,0),ct.bind(void 0,1,1,1,0,1),ct.bind(void 0,1,1,1,0,2),ct.bind(void 0,1,1,1,0,3),ct.bind(void 0,1,1,1,1,0),ct.bind(void 0,1,1,1,1,1),ct.bind(void 0,1,1,1,1,2),ct.bind(void 0,1,1,1,1,3)],Dd=Array.from||function(y){return y.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Ft(y){(y=y||{}).empty||(di(y.familyName,"When creating a new Font object, familyName is required."),di(y.styleName,"When creating a new Font object, styleName is required."),di(y.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),di(y.ascender,"When creating a new Font object, ascender is required."),di(y.descender,"When creating a new Font object, descender is required."),di(y.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:y.familyName||" "},fontSubfamily:{en:y.styleName||" "},fullName:{en:y.fullName||y.familyName+" "+y.styleName},postScriptName:{en:y.postScriptName||(y.familyName+y.styleName).replace(/\s/g,"")},designer:{en:y.designer||" "},designerURL:{en:y.designerURL||" "},manufacturer:{en:y.manufacturer||" "},manufacturerURL:{en:y.manufacturerURL||" "},license:{en:y.license||" "},licenseURL:{en:y.licenseURL||" "},version:{en:y.version||"Version 0.1"},description:{en:y.description||" "},copyright:{en:y.copyright||" "},trademark:{en:y.trademark||" "}},this.unitsPerEm=y.unitsPerEm||1e3,this.ascender=y.ascender,this.descender=y.descender,this.createdTimestamp=y.createdTimestamp,this.tables={os2:{usWeightClass:y.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:y.widthClass||this.usWidthClasses.MEDIUM,fsSelection:y.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new nt.GlyphSet(this,y.glyphs||[]),this.encoding=new Ee(this),this.position=new Rs(this),this.substitution=new rn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new cl(this):void 0)}})}function Cl(y,S){var M,j=JSON.stringify(y),D=256;for(M in S){var F=parseInt(M);if(F&&!(F<256)){if(JSON.stringify(S[M])===j)return F;D<=F&&(D=F+1)}}return S[D]=y,D}Ft.prototype.hasChar=function(y){return this.encoding.charToGlyphIndex(y)!==null},Ft.prototype.charToGlyphIndex=function(y){return this.encoding.charToGlyphIndex(y)},Ft.prototype.charToGlyph=function(y){return y=this.charToGlyphIndex(y),this.glyphs.get(y)||this.glyphs.get(0)},Ft.prototype.stringToGlyphs=function(y,S){S=S||this.defaultRenderOptions;for(var M=Dd(y),j=[],D=0;D<M.length;D+=1){var F=M[D];j.push(this.charToGlyphIndex(F))}var z=j.length;if(S.features){var y=S.script||this.substitution.getDefaultScriptName(),ne=[];S.features.liga&&(ne=ne.concat(this.substitution.getFeature("liga",y,S.language))),S.features.rlig&&(ne=ne.concat(this.substitution.getFeature("rlig",y,S.language)));for(var fe=0;fe<z;fe+=1)for(var he=0;he<ne.length;he++){for(var Me=ne[he],Pe=Me.sub,Ce=Pe.length,be=0;be<Ce&&Pe[be]===j[fe+be];)be++;be===Ce&&(j.splice(fe,Ce,Me.by),z=z-Ce+1)}}for(var Qe=new Array(z),Ge=this.glyphs.get(0),qe=0;qe<z;qe+=1)Qe[qe]=this.glyphs.get(j[qe])||Ge;return Qe},Ft.prototype.nameToGlyphIndex=function(y){return this.glyphNames.nameToGlyphIndex(y)},Ft.prototype.nameToGlyph=function(y){return y=this.nameToGlyphIndex(y),this.glyphs.get(y)||this.glyphs.get(0)},Ft.prototype.glyphIndexToName=function(y){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(y):""},Ft.prototype.getKerningValue=function(y,S){y=y.index||y,S=S.index||S;var M=this.position.defaultKerningTables;return M?this.position.getKerningValue(M,y,S):this.kerningPairs[y+","+S]||0},Ft.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Ft.prototype.forEachGlyph=function(y,S,M,j,D,F){S=S!==void 0?S:0,M=M!==void 0?M:0,D=D||this.defaultRenderOptions;var z,ne=1/this.unitsPerEm*(j=j!==void 0?j:72),fe=this.stringToGlyphs(y,D);D.kerning&&(y=D.script||this.position.getDefaultScriptName(),z=this.position.getKerningTables(y,D.language));for(var he=0;he<fe.length;he+=1){var Me=fe[he];F.call(this,Me,S,M,j,D),Me.advanceWidth&&(S+=Me.advanceWidth*ne),D.kerning&&he<fe.length-1&&(S+=(z?this.position.getKerningValue(z,Me.index,fe[he+1].index):this.getKerningValue(Me,fe[he+1]))*ne),D.letterSpacing?S+=D.letterSpacing*j:D.tracking&&(S+=D.tracking/1e3*j)}return S},Ft.prototype.getPath=function(y,S,M,j,D){var F=new q;return this.forEachGlyph(y,S,M,j,D,function(z,ne,fe,he){z=z.getPath(ne,fe,he,D,this),F.extend(z)}),F},Ft.prototype.getPaths=function(y,S,M,j,D){var F=[];return this.forEachGlyph(y,S,M,j,D,function(z,ne,fe,he){z=z.getPath(ne,fe,he,D,this),F.push(z)}),F},Ft.prototype.getAdvanceWidth=function(y,S,M){return this.forEachGlyph(y,0,0,S,M,function(){})},Ft.prototype.draw=function(y,S,M,j,D,F){this.getPath(S,M,j,D,F).draw(y)},Ft.prototype.drawPoints=function(y,S,M,j,D,F){this.forEachGlyph(S,M,j,D,F,function(z,ne,fe,he){z.drawPoints(y,ne,fe,he)})},Ft.prototype.drawMetrics=function(y,S,M,j,D,F){this.forEachGlyph(S,M,j,D,F,function(z,ne,fe,he){z.drawMetrics(y,ne,fe,he)})},Ft.prototype.getEnglishName=function(y){if(y=this.names[y],y)return y.en},Ft.prototype.validate=function(){var y=this;function S(M){M=y.getEnglishName(M),M&&M.trim().length}S("fontFamily"),S("weightName"),S("manufacturer"),S("copyright"),S("version"),this.unitsPerEm},Ft.prototype.toTables=function(){return wd.fontToTable(this)},Ft.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Ft.prototype.toArrayBuffer=function(){for(var y=this.toTables().encode(),S=new ArrayBuffer(y.length),M=new Uint8Array(S),j=0;j<y.length;j++)M[j]=y[j];return S},Ft.prototype.download=function(y){var S=this.getEnglishName("fontFamily"),M=this.getEnglishName("fontSubfamily"),j=(y=y||S.replace(/\s/g,"")+"-"+M+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,j.byteLength,function(D){D.root.getFile(y,{create:!0},function(F){F.createWriter(function(z){var ne=new DataView(j),ne=new Blob([ne],{type:"font/opentype"});z.write(ne),z.addEventListener("writeend",function(){location.href=F.toURL()},!1)})})},function(D){throw new Error(D.name+": "+D.message)})):(S=e("fs"),M=function(D){for(var F=new a(D.byteLength),z=new Uint8Array(D),ne=0;ne<F.length;++ne)F[ne]=z[ne];return F}(j),S.writeFileSync(y,M))},Ft.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Ft.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Ft.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Id={make:function(y,S){var M=new $.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:y.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:y.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*y.axes.length}]);M.offsetToData=M.sizeOf();for(var j,D,F,z=0;z<y.axes.length;z++)M.fields=M.fields.concat((j=z,D=y.axes[z],F=S,F=Cl(D.name,S),[{name:"tag_"+j,type:"TAG",value:D.tag},{name:"minValue_"+j,type:"FIXED",value:D.minValue<<16},{name:"defaultValue_"+j,type:"FIXED",value:D.defaultValue<<16},{name:"maxValue_"+j,type:"FIXED",value:D.maxValue<<16},{name:"flags_"+j,type:"USHORT",value:0},{name:"nameID_"+j,type:"USHORT",value:F}]));for(var ne=0;ne<y.instances.length;ne++)M.fields=M.fields.concat(function(fe,he,Me,Pe){for(var Ce=[{name:"nameID_"+fe,type:"USHORT",value:Cl(he.name,Pe)},{name:"flags_"+fe,type:"USHORT",value:0}],be=0;be<Me.length;++be){var Qe=Me[be].tag;Ce.push({name:"axis_"+fe+" "+Qe,type:"FIXED",value:he.coordinates[Qe]<<16})}return Ce}(ne,y.instances[ne],y.axes,S));return M},parse:function(y,S,M){for(var j,D,F,z,ne=new ae.Parser(y,S),fe=ne.parseULong(),he=(O.argument(fe===65536,"Unsupported fvar table version."),ne.parseOffset16()),Me=(ne.skip("uShort",1),ne.parseUShort()),Pe=ne.parseUShort(),Ce=ne.parseUShort(),be=ne.parseUShort(),Qe=[],Ge=0;Ge<Me;Ge++)Qe.push((j=y,D=S+he+Ge*Pe,F=M,z={},j=new ae.Parser(j,D),z.tag=j.parseTag(),z.minValue=j.parseFixed(),z.defaultValue=j.parseFixed(),z.maxValue=j.parseFixed(),j.skip("uShort",1),z.name=F[j.parseUShort()]||{},z));for(var qe=[],Oe=S+he+Me*Pe,ke=0;ke<Ce;ke++)qe.push(function(ut,vt,dt,ht){var Mt={},qt=new ae.Parser(ut,vt);Mt.name=ht[qt.parseUShort()]||{},qt.skip("uShort",1),Mt.coordinates={};for(var $t=0;$t<dt.length;++$t)Mt.coordinates[dt[$t].tag]=qt.parseFixed();return Mt}(y,Oe+ke*be,Qe,M));return{axes:Qe,instances:qe}}},Wr=new Array(10);Wr[1]=function(){var y=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{posFormat:1,coverage:this.parsePointer(xe.coverage),value:this.parseValueRecord()}:S===2?{posFormat:2,coverage:this.parsePointer(xe.coverage),values:this.parseValueRecordList()}:void O.assert(!1,"0x"+y.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Wr[2]=function(){var y,S,M,j,F=this.offset+this.relativeOffset,D=this.parseUShort(),F=(O.assert(D===1||D===2,"0x"+F.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(xe.coverage)),z=this.parseUShort(),ne=this.parseUShort();return D===1?{posFormat:D,coverage:F,valueFormat1:z,valueFormat2:ne,pairSets:this.parseList(xe.pointer(xe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(z),value2:this.parseValueRecord(ne)}})))}:D===2?(y=this.parsePointer(xe.classDef),S=this.parsePointer(xe.classDef),M=this.parseUShort(),j=this.parseUShort(),{posFormat:D,coverage:F,valueFormat1:z,valueFormat2:ne,classDef1:y,classDef2:S,class1Count:M,class2Count:j,classRecords:this.parseList(M,xe.list(j,function(){return{value1:this.parseValueRecord(z),value2:this.parseValueRecord(ne)}}))}):void 0},Wr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Wr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Wr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Wr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Wr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Wr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Wr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Od=new Array(10),kd={parse:function(y,S){return S=(y=new xe(y,S=S||0)).parseVersion(1),O.argument(S===1||S===1.1,"Unsupported GPOS table version "+S),S===1?{version:S,scripts:y.parseScriptList(),features:y.parseFeatureList(),lookups:y.parseLookupList(Wr)}:{version:S,scripts:y.parseScriptList(),features:y.parseFeatureList(),lookups:y.parseLookupList(Wr),variations:y.parseFeatureVariationsList()}},make:function(y){return new $.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new $.ScriptList(y.scripts)},{name:"features",type:"TABLE",value:new $.FeatureList(y.features)},{name:"lookups",type:"TABLE",value:new $.LookupList(y.lookups,Od)}])}},Nd={parse:function(y,S){if(y=new ae.Parser(y,S),(S=y.parseUShort())===0){var M=y,j={},Pe=(M.skip("uShort"),M.parseUShort()),D=(O.argument(Pe===0,"Unsupported kern sub-table version."),M.skip("uShort",2),M.parseUShort());M.skip("uShort",3);for(var F=0;F<D;F+=1){var z=M.parseUShort(),ne=M.parseUShort(),fe=M.parseShort();j[z+","+ne]=fe}return j}if(S!==1)throw new Error("Unsupported kern table version ("+S+").");var he=y,Me={},Pe=(he.skip("uShort"),1<he.parseULong()&&console.warn("Only the first kern subtable is supported."),he.skip("uLong"),255&he.parseUShort());if(he.skip("uShort"),Pe==0){var Ce=he.parseUShort();he.skip("uShort",3);for(var be=0;be<Ce;be+=1){var Qe=he.parseUShort(),Ge=he.parseUShort(),qe=he.parseShort();Me[Qe+","+Ge]=qe}}return Me}},Ud={parse:function(y,S,M,j){for(var D=new ae.Parser(y,S),F=j?D.parseUShort:D.parseULong,z=[],ne=0;ne<M+1;ne+=1){var fe=F.call(D);j&&(fe*=2),z.push(fe)}return z}};function Fd(y,S){e("fs").readFile(y,function(M,j){if(M)return S(M.message);S(null,sl(j))})}function Bd(y,S){var M=new XMLHttpRequest;M.open("get",y,!0),M.responseType="arraybuffer",M.onload=function(){return M.response?S(null,M.response):S("Font could not be loaded: "+M.statusText)},M.onerror=function(){S("Font could not be loaded")},M.send()}function Ll(y,S){for(var M=[],j=12,D=0;D<S;D+=1){var F=ae.getTag(y,j),z=ae.getULong(y,j+4),ne=ae.getULong(y,j+8),fe=ae.getULong(y,j+12);M.push({tag:F,checksum:z,offset:ne,length:fe,compression:!1}),j+=16}return M}function sr(M,S){if(S.compression!=="WOFF")return{data:M,offset:S.offset};var M=new Uint8Array(M.buffer,S.offset+2,S.compressedLength-2),j=new Uint8Array(S.length);if(H(M,j),j.byteLength!==S.length)throw new Error("Decompression error: "+S.tag+" decompressed length doesn't match recorded length");return{data:new DataView(j.buffer,0),offset:0}}function Lo(ke){var S,M,j,D,F,z,ne,fe,he,Me,Pe,Ce,be,Qe,Ge=new Ft({empty:!0}),qe=new DataView(ke,0),Oe=[],ke=ae.getTag(qe,0);if(ke===String.fromCharCode(0,1,0,0)||ke==="true"||ke==="typ1")Ge.outlinesFormat="truetype",Oe=Ll(qe,j=ae.getUShort(qe,4));else if(ke==="OTTO")Ge.outlinesFormat="cff",Oe=Ll(qe,j=ae.getUShort(qe,4));else{if(ke!=="wOFF")throw new Error("Unsupported OpenType signature "+ke);var ut=ae.getTag(qe,4);if(ut===String.fromCharCode(0,1,0,0))Ge.outlinesFormat="truetype";else{if(ut!=="OTTO")throw new Error("Unsupported OpenType flavor "+ke);Ge.outlinesFormat="cff"}Oe=function(Zt,kt){for(var Er=[],Qt=44,_r=0;_r<kt;_r+=1){var Kt=ae.getTag(Zt,Qt),pr=ae.getULong(Zt,Qt+4),ts=ae.getULong(Zt,Qt+8),fi=ae.getULong(Zt,Qt+12),Rl=void 0,Rl=ts<fi&&"WOFF";Er.push({tag:Kt,offset:pr,compression:Rl,compressedLength:ts,length:fi}),Qt+=20}return Er}(qe,j=ae.getUShort(qe,12))}for(var vt=0;vt<j;vt+=1){var dt=Oe[vt],ht=void 0;switch(dt.tag){case"cmap":ht=sr(qe,dt),Ge.tables.cmap=K.parse(ht.data,ht.offset),Ge.encoding=new Le(Ge.tables.cmap);break;case"cvt ":ht=sr(qe,dt),Qe=new ae.Parser(ht.data,ht.offset),Ge.tables.cvt=Qe.parseShortList(dt.length/2);break;case"fvar":F=dt;break;case"fpgm":ht=sr(qe,dt),Qe=new ae.Parser(ht.data,ht.offset),Ge.tables.fpgm=Qe.parseByteList(dt.length);break;case"head":ht=sr(qe,dt),Ge.tables.head=bt.parse(ht.data,ht.offset),Ge.unitsPerEm=Ge.tables.head.unitsPerEm,S=Ge.tables.head.indexToLocFormat;break;case"hhea":ht=sr(qe,dt),Ge.tables.hhea=me.parse(ht.data,ht.offset),Ge.ascender=Ge.tables.hhea.ascender,Ge.descender=Ge.tables.hhea.descender,Ge.numberOfHMetrics=Ge.tables.hhea.numberOfHMetrics;break;case"hmtx":he=dt;break;case"ltag":ht=sr(qe,dt),M=tt.parse(ht.data,ht.offset);break;case"maxp":ht=sr(qe,dt),Ge.tables.maxp=He.parse(ht.data,ht.offset),Ge.numGlyphs=Ge.tables.maxp.numGlyphs;break;case"name":Ce=dt;break;case"OS/2":ht=sr(qe,dt),Ge.tables.os2=Wt.parse(ht.data,ht.offset);break;case"post":ht=sr(qe,dt),Ge.tables.post=ci.parse(ht.data,ht.offset),Ge.glyphNames=new ye(Ge.tables.post);break;case"prep":ht=sr(qe,dt),Qe=new ae.Parser(ht.data,ht.offset),Ge.tables.prep=Qe.parseByteList(dt.length);break;case"glyf":z=dt;break;case"loca":Pe=dt;break;case"CFF ":D=dt;break;case"kern":Me=dt;break;case"GPOS":ne=dt;break;case"GSUB":fe=dt;break;case"meta":be=dt}}if(ut=sr(qe,Ce),Ge.tables.name=br.parse(ut.data,ut.offset,M),Ge.names=Ge.tables.name,z&&Pe)ke=S===0,ut=sr(qe,Pe),ut=Ud.parse(ut.data,ut.offset,Ge.numGlyphs,ke),ke=sr(qe,z),Ge.glyphs=ll.parse(ke.data,ke.offset,ut,Ge);else{if(!D)throw new Error("Font doesn't contain TrueType or CFF outlines.");ke=sr(qe,D),yt.parse(ke.data,ke.offset,Ge)}for(var ut=sr(qe,he),Mt=(Xe.parse(ut.data,ut.offset,Ge.numberOfHMetrics,Ge.numGlyphs,Ge.glyphs),Ge),qt=Mt.tables.cmap.glyphIndexMap,$t=Object.keys(qt),or=0;or<$t.length;or+=1){var Mr,Tr=$t[or],qr=qt[Tr];(Mr=Mt.glyphs.get(qr)).addUnicode(parseInt(Tr))}for(var Bt=0;Bt<Mt.glyphs.length;Bt+=1)Mr=Mt.glyphs.get(Bt),Mt.cffEncoding?Mt.isCIDFont?Mr.name="gid"+Bt:Mr.name=Mt.cffEncoding.charset[Bt]:Mt.glyphNames.names&&(Mr.name=Mt.glyphNames.glyphIndexToName(Bt));return Me?(ke=sr(qe,Me),Ge.kerningPairs=Nd.parse(ke.data,ke.offset)):Ge.kerningPairs={},ne&&(ut=sr(qe,ne),Ge.tables.gpos=kd.parse(ut.data,ut.offset),Ge.position.init()),fe&&(ke=sr(qe,fe),Ge.tables.gsub=Ji.parse(ke.data,ke.offset)),F&&(ut=sr(qe,F),Ge.tables.fvar=Id.parse(ut.data,ut.offset,Ge.names)),be&&(ke=sr(qe,be),Ge.tables.meta=Ja.parse(ke.data,ke.offset),Ge.metas=Ge.tables.meta),Ge}l.Font=Ft,l.Glyph=Ue,l.Path=q,l.BoundingBox=Z,l._parse=ae,l.parse=Lo,l.load=function(y,S){(typeof window>"u"?Fd:Bd)(y,function(M,j){if(M)return S(M);var D;try{D=Lo(j)}catch(F){return S(F,null)}return S(null,D)})},l.loadSync=function(y){return Lo(sl(e("fs").readFileSync(y)))},Object.defineProperty(l,"__esModule",{value:!0})},n(typeof f=="object"&&d!==void 0?f:s.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],242:[function(e,d,f){(function(a){function s(h,m){for(var i=0,o=h.length-1;0<=o;o--){var c=h[o];c==="."?h.splice(o,1):c===".."?(h.splice(o,1),i++):i&&(h.splice(o,1),i--)}if(m)for(;i--;)h.unshift("..");return h}function n(h,m){if(h.filter)return h.filter(m);for(var i=[],o=0;o<h.length;o++)m(h[o],o,h)&&i.push(h[o]);return i}f.resolve=function(){for(var h="",m=!1,i=arguments.length-1;-1<=i&&!m;i--){var o=0<=i?arguments[i]:a.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");o&&(h=o+"/"+h,m=o.charAt(0)==="/")}return(m?"/":"")+(h=s(n(h.split("/"),function(c){return!!c}),!m).join("/"))||"."},f.normalize=function(h){var m=f.isAbsolute(h),i=l(h,-1)==="/";return(h=(h=s(n(h.split("/"),function(o){return!!o}),!m).join("/"))||m?h:".")&&i&&(h+="/"),(m?"/":"")+h},f.isAbsolute=function(h){return h.charAt(0)==="/"},f.join=function(){var h=Array.prototype.slice.call(arguments,0);return f.normalize(n(h,function(m,i){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},f.relative=function(h,m){function i(b){for(var _=0;_<b.length&&b[_]==="";_++);for(var x=b.length-1;0<=x&&b[x]==="";x--);return x<_?[]:b.slice(_,x-_+1)}h=f.resolve(h).substr(1),m=f.resolve(m).substr(1);for(var o=i(h.split("/")),c=i(m.split("/")),u=Math.min(o.length,c.length),p=u,g=0;g<u;g++)if(o[g]!==c[g]){p=g;break}for(var v=[],g=p;g<o.length;g++)v.push("..");return(v=v.concat(c.slice(p))).join("/")},f.sep="/",f.delimiter=":",f.dirname=function(h){if(typeof h!="string"&&(h+=""),h.length===0)return".";for(var m=h.charCodeAt(0)===47,i=-1,o=!0,c=h.length-1;1<=c;--c)if(h.charCodeAt(c)===47){if(!o){i=c;break}}else o=!1;return i===-1?m?"/":".":m&&i===1?"/":h.slice(0,i)},f.basename=function(h,m){return h=function(i){typeof i!="string"&&(i+="");for(var o=0,c=-1,u=!0,p=i.length-1;0<=p;--p)if(i.charCodeAt(p)===47){if(!u){o=p+1;break}}else c===-1&&(u=!1,c=p+1);return c===-1?"":i.slice(o,c)}(h),h=m&&h.substr(-1*m.length)===m?h.substr(0,h.length-m.length):h},f.extname=function(h){typeof h!="string"&&(h+="");for(var m=-1,i=0,o=-1,c=!0,u=0,p=h.length-1;0<=p;--p){var g=h.charCodeAt(p);if(g===47){if(c)continue;i=p+1;break}o===-1&&(c=!1,o=p+1),g===46?m===-1?m=p:u!==1&&(u=1):m!==-1&&(u=-1)}return m===-1||o===-1||u===0||u===1&&m===o-1&&m===i+1?"":h.slice(m,o)};var l="ab".substr(-1)==="b"?function(h,m,i){return h.substr(m,i)}:function(h,m,i){return m<0&&(m=h.length+m),h.substr(m,i)}}).call(this,e("_process"))},{_process:243}],243:[function(e,n,f){var a,s,n=n.exports={};function l(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}try{a=typeof setTimeout=="function"?setTimeout:l}catch{a=l}try{s=typeof clearTimeout=="function"?clearTimeout:h}catch{s=h}function m(_){if(a===setTimeout)return setTimeout(_,0);if((a===l||!a)&&setTimeout)return(a=setTimeout)(_,0);try{return a(_,0)}catch{try{return a.call(null,_,0)}catch{return a.call(this,_,0)}}}var i,o=[],c=!1,u=-1;function p(){c&&i&&(c=!1,i.length?o=i.concat(o):u=-1,o.length&&g())}function g(){if(!c){for(var _=m(p),x=(c=!0,o.length);x;){for(i=o,o=[];++u<x;)i&&i[u].run();u=-1,x=o.length}i=null,c=!1,function(A){if(s===clearTimeout)return clearTimeout(A);if((s===h||!s)&&clearTimeout)return(s=clearTimeout)(A);try{s(A)}catch{try{return s.call(null,A)}catch{return s.call(this,A)}}}(_)}}function v(_,x){this.fun=_,this.array=x}function b(){}n.nextTick=function(_){var x=new Array(arguments.length-1);if(1<arguments.length)for(var A=1;A<arguments.length;A++)x[A-1]=arguments[A];o.push(new v(_,x)),o.length!==1||c||m(g)},v.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(_){return[]},n.binding=function(_){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(_){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],244:[function(e,d,f){d=function(a){var s,n=Object.prototype,l=n.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},h=E.iterator||"@@iterator",m=E.asyncIterator||"@@asyncIterator",i=E.toStringTag||"@@toStringTag";function o(W,U,X,V){var q,ee,L,O,U=U&&U.prototype instanceof _?U:_,U=Object.create(U.prototype),V=new I(V||[]);return U._invoke=(q=W,ee=X,L=V,O=u,function(J,le){if(O===g)throw new Error("Generator is already running");if(O===v){if(J==="throw")throw le;return Y()}for(L.method=J,L.arg=le;;){var ce=L.delegate;if(ce&&(ce=function ue(re,de){var ve=re.iterator[de.method];if(ve===s){if(de.delegate=null,de.method==="throw"){if(re.iterator.return&&(de.method="return",de.arg=s,ue(re,de),de.method==="throw"))return b;de.method="throw",de.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}if(ve=c(ve,re.iterator,de.arg),ve.type==="throw")return de.method="throw",de.arg=ve.arg,de.delegate=null,b;if(ve=ve.arg,!ve)return de.method="throw",de.arg=new TypeError("iterator result is not an object"),de.delegate=null,b;{if(!ve.done)return ve;de[re.resultName]=ve.value,de.next=re.nextLoc,de.method!=="return"&&(de.method="next",de.arg=s)}return de.delegate=null,b}(ce,L),ce)){if(ce===b)continue;return ce}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(O===u)throw O=v,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);if(O=g,ce=c(q,ee,L),ce.type==="normal"){if(O=L.done?v:p,ce.arg!==b)return{value:ce.arg,done:L.done}}else ce.type==="throw"&&(O=v,L.method="throw",L.arg=ce.arg)}}),U}function c(W,H,X){try{return{type:"normal",arg:W.call(H,X)}}catch(Z){return{type:"throw",arg:Z}}}a.wrap=o;var u="suspendedStart",p="suspendedYield",g="executing",v="completed",b={};function _(){}function x(){}function A(){}var E={},T=(E[h]=function(){return this},Object.getPrototypeOf),T=T&&T(T(B([]))),C=(T&&T!==n&&l.call(T,h)&&(E=T),A.prototype=_.prototype=Object.create(E));function R(W){["next","throw","return"].forEach(function(H){W[H]=function(X){return this._invoke(H,X)}})}function P(W){var H;this._invoke=function(X,Z){function q(){return new Promise(function(ee,L){(function O(ue,V,J,le){var ce,ue=c(W[ue],W,V);if(ue.type!=="throw")return(V=(ce=ue.arg).value)&&typeof V=="object"&&l.call(V,"__await")?Promise.resolve(V.__await).then(function(re){O("next",re,J,le)},function(re){O("throw",re,J,le)}):Promise.resolve(V).then(function(re){ce.value=re,J(ce)},function(re){return O("throw",re,J,le)});le(ue.arg)})(X,Z,ee,L)})}return H=H?H.then(q,q):q()}}function N(W){var H={tryLoc:W[0]};1 in W&&(H.catchLoc=W[1]),2 in W&&(H.finallyLoc=W[2],H.afterLoc=W[3]),this.tryEntries.push(H)}function k(W){var H=W.completion||{};H.type="normal",delete H.arg,W.completion=H}function I(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(N,this),this.reset(!0)}function B(W){if(W){var H,X=W[h];if(X)return X.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length))return H=-1,(X=function Z(){for(;++H<W.length;)if(l.call(W,H))return Z.value=W[H],Z.done=!1,Z;return Z.value=s,Z.done=!0,Z}).next=X}return{next:Y}}function Y(){return{value:s,done:!0}}return(x.prototype=C.constructor=A).constructor=x,A[i]=x.displayName="GeneratorFunction",a.isGeneratorFunction=function(W){return W=typeof W=="function"&&W.constructor,!!W&&(W===x||(W.displayName||W.name)==="GeneratorFunction")},a.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,A):(W.__proto__=A,i in W||(W[i]="GeneratorFunction")),W.prototype=Object.create(C),W},a.awrap=function(W){return{__await:W}},R(P.prototype),P.prototype[m]=function(){return this},a.AsyncIterator=P,a.async=function(W,H,X,Z){var q=new P(o(W,H,X,Z));return a.isGeneratorFunction(H)?q:q.next().then(function(ee){return ee.done?ee.value:q.next()})},R(C),C[i]="Generator",C[h]=function(){return this},C.toString=function(){return"[object Generator]"},a.keys=function(W){var H,X=[];for(H in W)X.push(H);return X.reverse(),function Z(){for(;X.length;){var q=X.pop();if(q in W)return Z.value=q,Z.done=!1,Z}return Z.done=!0,Z}},a.values=B,I.prototype={constructor:I,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(k),!W)for(var H in this)H.charAt(0)==="t"&&l.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=s)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var H=this;function X(U,V){return ee.type="throw",ee.arg=W,H.next=U,V&&(H.method="next",H.arg=s),!!V}for(var Z=this.tryEntries.length-1;0<=Z;--Z){var q=this.tryEntries[Z],ee=q.completion;if(q.tryLoc==="root")return X("end");if(q.tryLoc<=this.prev){var L=l.call(q,"catchLoc"),O=l.call(q,"finallyLoc");if(L&&O){if(this.prev<q.catchLoc)return X(q.catchLoc,!0);if(this.prev<q.finallyLoc)return X(q.finallyLoc)}else if(L){if(this.prev<q.catchLoc)return X(q.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<q.finallyLoc)return X(q.finallyLoc)}}}},abrupt:function(W,H){for(var X=this.tryEntries.length-1;0<=X;--X){var Z=this.tryEntries[X];if(Z.tryLoc<=this.prev&&l.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var q=Z;break}}var ee=(q=q&&(W==="break"||W==="continue")&&q.tryLoc<=H&&H<=q.finallyLoc?null:q)?q.completion:{};return ee.type=W,ee.arg=H,q?(this.method="next",this.next=q.finallyLoc,b):this.complete(ee)},complete:function(W,H){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&H&&(this.next=H),b},finish:function(W){for(var H=this.tryEntries.length-1;0<=H;--H){var X=this.tryEntries[H];if(X.finallyLoc===W)return this.complete(X.completion,X.afterLoc),k(X),b}},catch:function(W){for(var H=this.tryEntries.length-1;0<=H;--H){var X,Z,q=this.tryEntries[H];if(q.tryLoc===W)return(X=q.completion).type==="throw"&&(Z=X.arg,k(q)),Z}throw new Error("illegal catch attempt")},delegateYield:function(W,H,X){return this.delegate={iterator:B(W),resultName:H,nextLoc:X},this.method==="next"&&(this.arg=s),b}},a}(typeof d=="object"?d.exports:{});try{regeneratorRuntime=d}catch{Function("r","regeneratorRuntime = r")(d)}},{}],245:[function(e,d,f){(function(a){var s,n,l,h,m,i,o,c,u,p;function g(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(k))throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function v(k){return k=typeof k!="string"?String(k):k}function b(k){var I={next:function(){var B=k.shift();return{done:B===void 0,value:B}}};return n&&(I[Symbol.iterator]=function(){return I}),I}function _(k){this.map={},k instanceof _?k.forEach(function(I,B){this.append(B,I)},this):Array.isArray(k)?k.forEach(function(I){this.append(I[0],I[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(I){this.append(I,k[I])},this)}function x(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function A(k){return new Promise(function(I,B){k.onload=function(){I(k.result)},k.onerror=function(){B(k.error)}})}function E(k){var I=new FileReader,B=A(I);return I.readAsArrayBuffer(k),B}function T(k){var I;return k.slice?k.slice(0):((I=new Uint8Array(k.byteLength)).set(new Uint8Array(k)),I.buffer)}function C(){return this.bodyUsed=!1,this._initBody=function(k){if(this._bodyInit=k)if(typeof k=="string")this._bodyText=k;else if(l&&Blob.prototype.isPrototypeOf(k))this._bodyBlob=k;else if(h&&FormData.prototype.isPrototypeOf(k))this._bodyFormData=k;else if(s&&URLSearchParams.prototype.isPrototypeOf(k))this._bodyText=k.toString();else if(m&&l&&o(k))this._bodyArrayBuffer=T(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(k)&&!c(k))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(k)}else this._bodyText="";this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l&&(this.blob=function(){var k=x(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var k,I,B=x(this);if(B)return B;if(this._bodyBlob)return B=this._bodyBlob,k=new FileReader,I=A(k),k.readAsText(B),I;if(this._bodyArrayBuffer)return Promise.resolve(function(Y){for(var W=new Uint8Array(Y),H=new Array(W.length),X=0;X<W.length;X++)H[X]=String.fromCharCode(W[X]);return H.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(k,I){var B,Y=(I=I||{}).body;if(k instanceof R){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,I.headers||(this.headers=new _(k.headers)),this.method=k.method,this.mode=k.mode,Y||k._bodyInit==null||(Y=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=I.credentials||this.credentials||"omit",!I.headers&&this.headers||(this.headers=new _(I.headers)),this.method=(k=I.method||this.method||"GET",B=k.toUpperCase(),-1<u.indexOf(B)?B:k),this.mode=I.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Y)}function P(k){var I=new FormData;return k.trim().split("&").forEach(function(B){var Y;B&&(Y=(B=B.split("=")).shift().replace(/\+/g," "),B=B.join("=").replace(/\+/g," "),I.append(decodeURIComponent(Y),decodeURIComponent(B)))}),I}function N(k,I){I=I||{},this.type="default",this.status=I.status===void 0?200:I.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in I?I.statusText:"OK",this.headers=new _(I.headers),this.url=I.url||"",this._initBody(k)}a.fetch||(s="URLSearchParams"in a,n="Symbol"in a&&"iterator"in Symbol,l="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),h="FormData"in a,(m="ArrayBuffer"in a)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=function(k){return k&&DataView.prototype.isPrototypeOf(k)},c=ArrayBuffer.isView||function(k){return k&&-1<i.indexOf(Object.prototype.toString.call(k))}),_.prototype.append=function(k,I){k=g(k),I=v(I);var B=this.map[k];this.map[k]=B?B+","+I:I},_.prototype.delete=function(k){delete this.map[g(k)]},_.prototype.get=function(k){return k=g(k),this.has(k)?this.map[k]:null},_.prototype.has=function(k){return this.map.hasOwnProperty(g(k))},_.prototype.set=function(k,I){this.map[g(k)]=v(I)},_.prototype.forEach=function(k,I){for(var B in this.map)this.map.hasOwnProperty(B)&&k.call(I,this.map[B],B,this)},_.prototype.keys=function(){var k=[];return this.forEach(function(I,B){k.push(B)}),b(k)},_.prototype.values=function(){var k=[];return this.forEach(function(I){k.push(I)}),b(k)},_.prototype.entries=function(){var k=[];return this.forEach(function(I,B){k.push([B,I])}),b(k)},n&&(_.prototype[Symbol.iterator]=_.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},C.call(R.prototype),C.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},N.error=function(){var k=new N(null,{status:0,statusText:""});return k.type="error",k},p=[301,302,303,307,308],N.redirect=function(k,I){if(p.indexOf(I)===-1)throw new RangeError("Invalid status code");return new N(null,{status:I,headers:{location:k}})},a.Headers=_,a.Request=R,a.Response=N,a.fetch=function(k,I){return new Promise(function(B,Y){var W=new R(k,I),H=new XMLHttpRequest;H.onload=function(){var X,Z={status:H.status,statusText:H.statusText,headers:(Z=H.getAllResponseHeaders()||"",X=new _,Z.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(L){var L=L.split(":"),O=L.shift().trim();O&&(L=L.join(":").trim(),X.append(O,L))}),X)},q=(Z.url="responseURL"in H?H.responseURL:Z.headers.get("X-Request-URL"),"response"in H?H.response:H.responseText);B(new N(q,Z))},H.onerror=function(){Y(new TypeError("Network request failed"))},H.ontimeout=function(){Y(new TypeError("Network request failed"))},H.open(W.method,W.url,!0),W.credentials==="include"?H.withCredentials=!0:W.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&l&&(H.responseType="blob"),W.headers.forEach(function(X,Z){H.setRequestHeader(Z,X)}),H.send(W._bodyInit===void 0?null:W._bodyInit)})},a.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],246:[function(e,d,f){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a,s=l(e("../core/main")),n=l(e("../color/color_conversion"));function l(i){return i&&i.__esModule?i:{default:i}}var h=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];s.default.prototype._rgbColorName=function(u){var o,c,u=n.default._rgbaToHSBA(u),p=[(a=u)[0],u[1],u[2]];p[0]!==0&&(p[0]=Math.round(100*p[0]),(u=p[0].toString().split(""))[c=u.length-1]=parseInt(u[c]),u[c]<2.5?u[c]=0:2.5<=u[c]&&u[c]<7.5&&(u[c]=5),u.length===2?(u[0]=parseInt(u[0]),7.5<=u[c]&&(u[c]=0,u[0]=u[0]+1),p[0]=10*u[0]+u[1]):7.5<=u[c]?p[0]=10:p[0]=u[c]),p[2]=p[2]/255;for(var g=p.length-1;1<=g;g--)p[g]<=.25?p[g]=0:.25<p[g]&&p[g]<.75?p[g]=.5:p[g]=1;if(p[0]===0&&p[1]===0&&p[2]===1){for(var v=2;0<=v;v--)a[v]=Math.round(1e4*a[v])/1e4;for(var b=0;b<h.length;b++){if(h[b].h===a[0]&&h[b].s===a[1]&&h[b].b===a[2]){o=h[b].name;break}o="white"}}else for(var _=0;_<m.length;_++)if(m[_].h===p[0]&&m[_].s===p[1]&&m[_].b===p[2]){o=m[_].name;break}return o},e=s.default,f.default=e},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e},s="_Description",n="_fallbackDesc",l="_fallbackTable",h="_Label",m="_labelDesc",i="_labelTable";function o(c){if(c==="label"||c==="fallback")throw new Error("description should not be LABEL or FALLBACK");return c.endsWith(".")||c.endsWith(";")||c.endsWith(",")||c.endsWith("?")||c.endsWith("!")||(c+="."),c}a.default.prototype.describe=function(c,u){var p;a.default._validateParameters("describe",arguments),typeof c=="string"&&(p=this.canvas.id,c=o(c),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==c&&(this.descriptions.fallback.innerHTML=c):this._describeHTML("fallback",c),u===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==c&&(this.descriptions.label.innerHTML=c):this._describeHTML("label",c)))},a.default.prototype.describeElement=function(c,u,p){var g,v;a.default._validateParameters("describeElement",arguments),typeof u=="string"&&typeof c=="string"&&(g=this.canvas.id,u=o(u),v=function(b){if(b==="label"||b==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return b.endsWith(".")||b.endsWith(";")||b.endsWith(",")?b=b.replace(/.$/,":"):b.endsWith(":")||(b+=":"),b}(c),c=c.replace(/[^a-zA-Z0-9]/g,""),v='<th scope="row">'.concat(v,"</th><td>").concat(u,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[c]?this.descriptions.fallbackElements[c].innerHTML!==v&&(this.descriptions.fallbackElements[c].innerHTML=v):this._describeElementHTML("fallback",c,v),p===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[c]?this.descriptions.labelElements[c].innerHTML!==v&&(this.descriptions.labelElements[c].innerHTML=v):this._describeElementHTML("label",c,v)))},a.default.prototype._describeHTML=function(c,u){var p,g=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(g+s))?this.dummyDOM.querySelector("#"+g+l).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+n,'"></p>')):(p='<div id="'.concat(g).concat(s,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(n,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#".concat(g)).innerHTML=p),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(n)),this.descriptions.fallback.innerHTML=u):c==="label"&&(this.dummyDOM.querySelector("#".concat(g+h))?this.dummyDOM.querySelector("#".concat(g+i))&&this.dummyDOM.querySelector("#".concat(g+i)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(m,'"></p>')):(p='<div id="'.concat(g).concat(h,'" class="p5Label"><p id="').concat(g).concat(m,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",p)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+m),this.descriptions.label.innerHTML=u)},a.default.prototype._describeElementHTML=function(c,u,p){var g,v=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(v+s))?this.dummyDOM.querySelector("#"+v+l)||this.dummyDOM.querySelector("#"+v+n).insertAdjacentHTML("afterend",'<table id="'.concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(v).concat(s,'" role="region" aria-label="Canvas Description"><table id="').concat(v).concat(l,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+v).innerHTML=g),(g=document.createElement("tr")).id=v+"_fte_"+u,this.dummyDOM.querySelector("#"+v+l).appendChild(g),this.descriptions.fallbackElements[u]=this.dummyDOM.querySelector("#".concat(v).concat("_fte_").concat(u)),this.descriptions.fallbackElements[u].innerHTML=p):c==="label"&&(this.dummyDOM.querySelector("#".concat(v+h))?this.dummyDOM.querySelector("#".concat(v+i))||this.dummyDOM.querySelector("#"+v+m).insertAdjacentHTML("afterend",'<table id="'.concat(v+i,'"></table>')):(g='<div id="'.concat(v).concat(h,'" class="p5Label"><table id="').concat(v).concat(i,'"></table></div>'),this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(v,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+v).insertAdjacentHTML("afterend",g)),(c=document.createElement("tr")).id=v+"_lte_"+u,this.dummyDOM.querySelector("#"+v+i).appendChild(c),this.descriptions.labelElements[u]=this.dummyDOM.querySelector("#".concat(v).concat("_lte_").concat(u)),this.descriptions.labelElements[u].innerHTML=p)},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype._updateGridOutput=function(a){var s,n,l,h;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(s=this._accessibleOutputs[a],l=function(m,i,o,c){return i="".concat(i," canvas, ").concat(o," by ").concat(c," pixels, contains ").concat(m[0]),i=(m[0]===1?"".concat(i," shape: "):"".concat(i," shapes: ")).concat(m[1]),i}((n=function(m,i){var o,c="",u="",p=0;for(o in i){var g,v=0;for(g in i[o]){var b='<li id="'.concat(m,"shape").concat(p,'">').concat(i[o][g].color," ").concat(o,",");o==="line"?b+=" location = ".concat(i[o][g].pos,", length = ").concat(i[o][g].length," pixels"):(b+=" location = ".concat(i[o][g].pos),o!=="point"&&(b+=", area = ".concat(i[o][g].area," %")),b+="</li>"),c+=b,v++,p++}u=1<v?"".concat(u," ").concat(v," ").concat(o,"s"):"".concat(u," ").concat(v," ").concat(o)}return{numShapes:[p,u],details:c}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),h=function(m,i){var o,c,u,p=0,g="",v=Array.apply(null,Array(10)).map(function(){});for(o in v)v[o]=Array.apply(null,Array(10)).map(function(){});for(c in i)for(var b in i[c]){var _=void 0;_=c!=="line"?'<a href="#'.concat(m,"shape").concat(p,'">').concat(i[c][b].color," ").concat(c,"</a>"):'<a href="#'.concat(m,"shape").concat(p,'">').concat(i[c][b].color," ").concat(c," midpoint</a>"),v[i[c][b].loc.locY][i[c][b].loc.locX]?v[i[c][b].loc.locY][i[c][b].loc.locX]=v[i[c][b].loc.locY][i[c][b].loc.locX]+"  "+_:v[i[c][b].loc.locY][i[c][b].loc.locX]=_,p++}for(u in v){var x,A="<tr>";for(x in v[u])A+="<td>",v[u][x]!==void 0&&(A+=v[u][x]),A+="</td>";g=g+A+"</tr>"}return g}(a,this.ingredients.shapes),l!==s.summary.innerHTML&&(s.summary.innerHTML=l),h!==s.map.innerHTML&&(s.map.innerHTML=h),n.details!==s.shapeDetails.innerHTML&&(s.shapeDetails.innerHTML=n.details),this._accessibleOutputs[a]=s)},e=e.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(l,h,m){return l[0]<.4*h?l[1]<.4*m?"top left":l[1]>.6*m?"bottom left":"mid left":l[0]>.6*h?l[1]<.4*m?"top right":l[1]>.6*m?"bottom right":"mid right":l[1]<.4*m?"top middle":l[1]>.6*m?"bottom middle":"middle"}function n(l,h,m){return h=Math.floor(l[0]/h*10),l=Math.floor(l[1]/m*10),h===10&&(h-=1),l===10&&(l-=1),{locX:h,locY:l}}a.default.prototype.textOutput=function(l){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(l){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),l===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(l,h){var m,i,o,c=this.canvas.id,u=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(c).parentNode),"");h==="Fallback"?(m=c+l,this.dummyDOM.querySelector("#".concat(i=c+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(c,"_Description"))?this.dummyDOM.querySelector("#".concat(c,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(i,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(c)).innerHTML='<div id="'.concat(i,'" role="region" aria-label="Canvas Outputs"></div>'))):h==="Label"&&(m=c+l+(u=h),this.dummyDOM.querySelector("#".concat(i=c+"accessibleOutput"+h))||(this.dummyDOM.querySelector("#".concat(c,"_Label"))?this.dummyDOM.querySelector("#".concat(c,"_Label")):this.dummyDOM.querySelector("#".concat(c))).insertAdjacentHTML("afterend",'<div id="'.concat(i,'"></div>'))),this._accessibleOutputs[m]={},l==="textOutput"?(u="#".concat(c,"gridOutput").concat(u),o='<div id="'.concat(m,'">Text Output<div id="').concat(m,'Summary" aria-label="text output summary"><p id="').concat(m,'_summary"></p><ul id="').concat(m,'_list"></ul></div><table id="').concat(m,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(u)?this.dummyDOM.querySelector(u).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#".concat(i)).innerHTML=o,this._accessibleOutputs[m].list=this.dummyDOM.querySelector("#".concat(m,"_list"))):l==="gridOutput"&&(u="#".concat(c,"textOutput").concat(u),o='<div id="'.concat(m,'">Grid Output<p id="').concat(m,'_summary" aria-label="grid output summary"><table id="').concat(m,'_map" summary="grid output content"></table><ul id="').concat(m,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(u)?this.dummyDOM.querySelector(u).insertAdjacentHTML("afterend",o):this.dummyDOM.querySelector("#".concat(i)).innerHTML=o,this._accessibleOutputs[m].map=this.dummyDOM.querySelector("#".concat(m,"_map"))),this._accessibleOutputs[m].shapeDetails=this.dummyDOM.querySelector("#".concat(m,"_shapeDetails")),this._accessibleOutputs[m].summary=this.dummyDOM.querySelector("#".concat(m,"_summary"))},a.default.prototype._updateAccsOutput=function(){var l=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(l+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(l+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(l+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(l+"gridOutputLabel"))},a.default.prototype._accsBackground=function(l){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==l&&(this.ingredients.colors.backgroundRGBA=l,this.ingredients.colors.background=this._rgbColorName(l))},a.default.prototype._accsCanvasColors=function(l,h){l==="fill"?this.ingredients.colors.fillRGBA!==h&&(this.ingredients.colors.fillRGBA=h,this.ingredients.colors.fill=this._rgbColorName(h)):l==="stroke"&&this.ingredients.colors.strokeRGBA!==h&&(this.ingredients.colors.strokeRGBA=h,this.ingredients.colors.stroke=this._rgbColorName(h))},a.default.prototype._accsOutput=function(l,h){l==="ellipse"&&h[2]===h[3]?l="circle":l==="rectangle"&&h[2]===h[3]&&(l="square");var m,i,o={},c=!0,u=function(g,v){var b;return g=g==="rectangle"||g==="ellipse"||g==="arc"||g==="circle"||g==="square"?(b=Math.round(v[0]+v[2]/2),Math.round(v[1]+v[3]/2)):g==="triangle"?(b=(v[0]+v[2]+v[4])/3,(v[1]+v[3]+v[5])/3):g==="quadrilateral"?(b=(v[0]+v[2]+v[4]+v[6])/4,(v[1]+v[3]+v[5]+v[7])/4):g==="line"?(b=(v[0]+v[2])/2,(v[1]+v[3])/2):(b=v[0],v[1]),[b,g]}(l,h);if(l==="line"?(o.color=this.ingredients.colors.stroke,o.length=Math.round(this.dist(h[0],h[1],h[2],h[3])),m=s([h[0],[1]],this.width,this.height),i=s([h[2],[3]],this.width,this.height),o.loc=n(u,this.width,this.height),o.pos=m===i?"at ".concat(m):"from ".concat(m," to ").concat(i)):(l==="point"?o.color=this.ingredients.colors.stroke:(o.color=this.ingredients.colors.fill,o.area=function(g,v,b,_){var x=0;{var A,E,T,C,R,P,N;g==="arc"?(A=((v[5]-v[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI),x=A*v[2]*v[3]/8,v[6]!=="open"&&v[6]!=="chord"||(N=v[0],E=v[1],T=v[0]+v[2]/2*Math.cos(v[4]).toFixed(2),C=v[1]+v[3]/2*Math.sin(v[4]).toFixed(2),R=v[0]+v[2]/2*Math.cos(v[5]).toFixed(2),P=v[1]+v[3]/2*Math.sin(v[5]).toFixed(2),N=Math.abs(N*(C-P)+T*(P-E)+R*(E-C))/2,A>Math.PI?x+=N:x-=N)):g==="ellipse"||g==="circle"?x=3.14*v[2]/2*v[3]/2:g==="line"||g==="point"?x=0:g==="quadrilateral"?x=Math.abs((v[6]+v[0])*(v[7]-v[1])+(v[0]+v[2])*(v[1]-v[3])+(v[2]+v[4])*(v[3]-v[5])+(v[4]+v[6])*(v[5]-v[7]))/2:g==="rectangle"||g==="square"?x=v[2]*v[3]:g==="triangle"&&(x=Math.abs(v[0]*(v[3]-v[5])+v[2]*(v[5]-v[1])+v[4]*(v[1]-v[3]))/2)}return Math.round(100*x/(b*_))}(l,h,this.width,this.height)),o.pos=s(u,this.width,this.height),o.loc=n(u,this.width,this.height)),this.ingredients.shapes[l]){if(this.ingredients.shapes[l]!==[o]){for(var p in this.ingredients.shapes[l])JSON.stringify(this.ingredients.shapes[l][p])===JSON.stringify(o)&&(c=!1);c===!0&&this.ingredients.shapes[l].push(o)}}else this.ingredients.shapes[l]=[o]},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype._updateTextOutput=function(a){var s,n,l,h;this.dummyDOM.querySelector("#".concat(a,"_summary"))&&(s=this._accessibleOutputs[a],l=function(m,i,o,c){return o="Your output is a, ".concat(o," by ").concat(c," pixels, ").concat(i," canvas containing the following"),o=m===1?"".concat(o," shape:"):"".concat(o," ").concat(m," shapes:"),o}((n=function(m,i){var o,c="",u=0;for(o in i)for(var p in i[o]){var g='<li><a href="#'.concat(m,"shape").concat(u,'">').concat(i[o][p].color," ").concat(o,"</a>");o==="line"?g+=", ".concat(i[o][p].pos,", ").concat(i[o][p].length," pixels long.</li>"):(g+=", at ".concat(i[o][p].pos),o!=="point"&&(g+=", covering ".concat(i[o][p].area,"% of the canvas")),g+=".</li>"),c+=g,u++}return{numShapes:u,listShapes:c}}(a,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),h=function(m,i){var o,c="",u=0;for(o in i)for(var p in i[o]){var g='<tr id="'.concat(m,"shape").concat(u,'"><th>').concat(i[o][p].color," ").concat(o,"</th>");o==="line"?g+="<td>location = ".concat(i[o][p].pos,"</td><td>length = ").concat(i[o][p].length," pixels</td></tr>"):(g+="<td>location = ".concat(i[o][p].pos,"</td>"),o!=="point"&&(g+="<td> area = ".concat(i[o][p].area,"%</td>")),g+="</tr>"),c+=g,u++}return c}(a,this.ingredients.shapes),l!==s.summary.innerHTML&&(s.summary.innerHTML=l),n.listShapes!==s.list.innerHTML&&(s.list.innerHTML=n.listShapes),h!==s.shapeDetails.innerHTML&&(s.shapeDetails.innerHTML=h),this._accessibleOutputs[a]=s)},e=e.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(e,d,f){var a=(a=e("./core/main"))&&a.__esModule?a:{default:a};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),d.exports=a.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.ColorConversion={},e.default.ColorConversion._hsbaToHSLA=function(a){var s=a[0],n=a[1],l=a[2],h=(2-n)*l/2;return h!=0&&(h==1?n=0:h<.5?n/=2-n:n=n*l/(2-2*h)),[s,n,h,a[3]]},e.default.ColorConversion._hsbaToRGBA=function(a){var s,n,l,h,m,i=6*a[0],o=a[1],c=a[2];return o===0?[c,c,c,a[3]]:(n=c*(1-o),l=c*(1-o*(i-(s=Math.floor(i)))),o=c*(1-o*(1+s-i)),i=s===1?(h=l,m=c,n):s===2?(h=n,m=c,o):s===3?(h=n,m=l,c):s===4?(h=o,m=n,c):s===5?(h=c,m=n,l):(h=c,m=o,n),[h,m,i,a[3]])},e.default.ColorConversion._hslaToHSBA=function(a){var s=a[0],n=a[1],l=a[2],h=l<.5?(1+n)*l:l+n-l*n;return[s,n=2*(h-l)/h,h,a[3]]},e.default.ColorConversion._hslaToRGBA=function(a){var s,n=6*a[0],l=a[1],h=a[2];return l===0?[h,h,h,a[3]]:[(s=function(m,i,o){return m<0?m+=6:6<=m&&(m-=6),m<1?i+(o-i)*m:m<3?o:m<4?i+(o-i)*(4-m):i})(2+n,l=2*h-(h=h<.5?(1+l)*h:h+l-h*l),h),s(n,l,h),s(n-2,l,h),a[3]]},e.default.ColorConversion._rgbaToHSBA=function(a){var s,n,l=a[0],h=a[1],m=a[2],i=Math.max(l,h,m),o=i-Math.min(l,h,m);return o==0?n=s=0:(n=o/i,l===i?s=(h-m)/o:h===i?s=2+(m-l)/o:m===i&&(s=4+(l-h)/o),s<0?s+=6:6<=s&&(s-=6)),[s/6,n,i,a[3]]},e.default.ColorConversion._rgbaToHSLA=function(a){var s,n,l=a[0],h=a[1],m=a[2],i=Math.max(l,h,m),c=Math.min(l,h,m),o=i+c,c=i-c;return c==0?n=s=0:(n=o<1?c/o:c/(2-o),l===i?s=(h-m)/c:h===i?s=2+(m-l)/c:m===i&&(s=4+(l-h)/c),s<0?s+=6:6<=s&&(s-=6)),[s/6,n,o/2,a[3]]},e=e.default.ColorConversion,f.default=e},{"../core/main":267}],253:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.alpha=function(i){return n.default._validateParameters("alpha",arguments),this.color(i)._getAlpha()},n.default.prototype.blue=function(i){return n.default._validateParameters("blue",arguments),this.color(i)._getBlue()},n.default.prototype.brightness=function(i){return n.default._validateParameters("brightness",arguments),this.color(i)._getBrightness()},n.default.prototype.color=function(){var i;return n.default._validateParameters("color",arguments),arguments[0]instanceof n.default.Color?arguments[0]:(i=arguments[0]instanceof Array?arguments[0]:arguments,new n.default.Color(this,i))},n.default.prototype.green=function(i){return n.default._validateParameters("green",arguments),this.color(i)._getGreen()},n.default.prototype.hue=function(i){return n.default._validateParameters("hue",arguments),this.color(i)._getHue()},n.default.prototype.lerpColor=function(i,o,c){n.default._validateParameters("lerpColor",arguments);var u,p,g,v=this._colorMode,b=this._colorMaxes;if(v===l.RGB)p=i.levels.map(function(_){return _/255}),g=o.levels.map(function(_){return _/255});else if(v===l.HSB)i._getBrightness(),o._getBrightness(),p=i.hsba,g=o.hsba;else{if(v!==l.HSL)throw new Error("".concat(v,"cannot be used for interpolation."));i._getLightness(),o._getLightness(),p=i.hsla,g=o.hsla}return c=Math.max(Math.min(c,1),0),this.lerp===void 0&&(this.lerp=function(_,x,A){return A*(x-_)+_}),i=this.lerp(p[0],g[0],c),o=this.lerp(p[1],g[1],c),u=this.lerp(p[2],g[2],c),p=this.lerp(p[3],g[3],c),i*=b[v][0],o*=b[v][1],u*=b[v][2],p*=b[v][3],this.color(i,o,u,p)},n.default.prototype.lightness=function(i){return n.default._validateParameters("lightness",arguments),this.color(i)._getLightness()},n.default.prototype.red=function(i){return n.default._validateParameters("red",arguments),this.color(i)._getRed()},n.default.prototype.saturation=function(i){return n.default._validateParameters("saturation",arguments),this.color(i)._getSaturation()};var m=n.default;f.default=m},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(c,d,f){function a(b){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(b)}function s(b){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(_){return a(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":a(_)})(b)}c("core-js/modules/es.symbol"),c("core-js/modules/es.symbol.description"),c("core-js/modules/es.symbol.iterator"),c("core-js/modules/es.array.iterator"),c("core-js/modules/es.array.join"),c("core-js/modules/es.array.map"),c("core-js/modules/es.array.slice"),c("core-js/modules/es.object.get-own-property-descriptor"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.regexp.constructor"),c("core-js/modules/es.regexp.exec"),c("core-js/modules/es.regexp.to-string"),c("core-js/modules/es.string.iterator"),c("core-js/modules/es.string.trim"),c("core-js/modules/es.weak-map"),c("core-js/modules/web.dom-collections.iterator"),c("core-js/modules/es.array.join"),c("core-js/modules/es.array.map"),c("core-js/modules/es.array.slice"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.regexp.constructor"),c("core-js/modules/es.regexp.exec"),c("core-js/modules/es.regexp.to-string"),c("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=i(c("../core/main")),l=function(b){if(b&&b.__esModule)return b;if(b===null||s(b)!=="object"&&typeof b!="function")return{default:b};var _=m();if(_&&_.has(b))return _.get(b);var x,A={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in b){var T;Object.prototype.hasOwnProperty.call(b,x)&&((T=E?Object.getOwnPropertyDescriptor(b,x):null)&&(T.get||T.set)?Object.defineProperty(A,x,T):A[x]=b[x])}return A.default=b,_&&_.set(b,A),A}(c("../core/constants")),h=i(c("./color_conversion"));function m(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,m=function(){return b},b)}function i(b){return b&&b.__esModule?b:{default:b}}n.default.Color=function(b,_){if(this._storeModeAndMaxes(b._colorMode,b._colorMaxes),this.mode!==l.RGB&&this.mode!==l.HSL&&this.mode!==l.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=n.default.Color._parseInputs.apply(this,_),this._calculateLevels(),this},n.default.Color.prototype.toString=function(b){var _=this.levels,x=this._array,A=x[3];switch(b){case"#rrggbb":return"#".concat(_[0]<16?"0".concat(_[0].toString(16)):_[0].toString(16),_[1]<16?"0".concat(_[1].toString(16)):_[1].toString(16),_[2]<16?"0".concat(_[2].toString(16)):_[2].toString(16));case"#rrggbbaa":return"#".concat(_[0]<16?"0".concat(_[0].toString(16)):_[0].toString(16),_[1]<16?"0".concat(_[1].toString(16)):_[1].toString(16),_[2]<16?"0".concat(_[2].toString(16)):_[2].toString(16),_[3]<16?"0".concat(_[3].toString(16)):_[3].toString(16));case"#rgb":return"#".concat(Math.round(15*x[0]).toString(16),Math.round(15*x[1]).toString(16),Math.round(15*x[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*x[0]).toString(16),Math.round(15*x[1]).toString(16),Math.round(15*x[2]).toString(16),Math.round(15*x[3]).toString(16));case"rgb":return"rgb(".concat(_[0],", ",_[1],", ",_[2],")");case"rgb%":return"rgb(".concat((100*x[0]).toPrecision(3),"%, ",(100*x[1]).toPrecision(3),"%, ",(100*x[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*x[0]).toPrecision(3),"%, ",(100*x[1]).toPrecision(3),"%, ",(100*x[2]).toPrecision(3),"%, ",(100*x[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[l.HSB][0],", ",this.hsba[1]*this.maxes[l.HSB][1],", ",this.hsba[2]*this.maxes[l.HSB][2],", ",A,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*A).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[l.HSL][0],", ",this.hsla[1]*this.maxes[l.HSL][1],", ",this.hsla[2]*this.maxes[l.HSL][2],", ",A,")");case"hsla%":return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*A).toPrecision(3),"%)");default:return"rgba(".concat(_[0],",",_[1],",",_[2],",",A,")")}},n.default.Color.prototype.setRed=function(b){this._array[0]=b/this.maxes[l.RGB][0],this._calculateLevels()},n.default.Color.prototype.setGreen=function(b){this._array[1]=b/this.maxes[l.RGB][1],this._calculateLevels()},n.default.Color.prototype.setBlue=function(b){this._array[2]=b/this.maxes[l.RGB][2],this._calculateLevels()},n.default.Color.prototype.setAlpha=function(b){this._array[3]=b/this.maxes[this.mode][3],this._calculateLevels()},n.default.Color.prototype._calculateLevels=function(){for(var b=this._array,_=this.levels=new Array(b.length),x=b.length-1;0<=x;--x)_[x]=Math.round(255*b[x]);this.hsla=null,this.hsba=null},n.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.default.Color.prototype._storeModeAndMaxes=function(b,_){this.mode=b,this.maxes=_},n.default.Color.prototype._getMode=function(){return this.mode},n.default.Color.prototype._getMaxes=function(){return this.maxes},n.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[l.RGB][2]},n.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[l.HSB][2]},n.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[l.RGB][1]},n.default.Color.prototype._getHue=function(){return this.mode===l.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[l.HSB][0]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[l.HSL][0])},n.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[l.HSL][2]},n.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[l.RGB][0]},n.default.Color.prototype._getSaturation=function(){return this.mode===l.HSB?(this.hsba||(this.hsba=h.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[l.HSB][1]):(this.hsla||(this.hsla=h.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[l.HSL][1])};var o={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},c=/\s*/,v=/(\d{1,3})/,u=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(u.source,"%")),g={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",v.source,",",v.source,",",v.source,"\\)$"].join(c.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(c.source),"i"),RGBA:new RegExp(["^rgba\\(",v.source,",",v.source,",",v.source,",",u.source,"\\)$"].join(c.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",u.source,"\\)$"].join(c.source),"i"),HSL:new RegExp(["^hsl\\(",v.source,",",p.source,",",p.source,"\\)$"].join(c.source),"i"),HSLA:new RegExp(["^hsla\\(",v.source,",",p.source,",",p.source,",",u.source,"\\)$"].join(c.source),"i"),HSB:new RegExp(["^hsb\\(",v.source,",",p.source,",",p.source,"\\)$"].join(c.source),"i"),HSBA:new RegExp(["^hsba\\(",v.source,",",p.source,",",p.source,",",u.source,"\\)$"].join(c.source),"i")},v=(n.default.Color._parseInputs=function(b,_,x,A){var E,T=arguments.length,C=this.mode,R=this.maxes[C],P=[];if(3<=T){for(P[0]=b/R[0],P[1]=_/R[1],P[2]=x/R[2],P[3]=typeof A=="number"?A/R[3]:1,E=P.length-1;0<=E;--E){var N=P[E];N<0?P[E]=0:1<N&&(P[E]=1)}return C===l.HSL?h.default._hslaToRGBA(P):C===l.HSB?h.default._hsbaToRGBA(P):P}if(T===1&&typeof b=="string"){if(x=b.trim().toLowerCase(),o[x])return n.default.Color._parseInputs.call(this,o[x]);if(g.HEX3.test(x))return(P=g.HEX3.exec(x).slice(1).map(function(k){return parseInt(k+k,16)/255}))[3]=1,P;if(g.HEX6.test(x))return(P=g.HEX6.exec(x).slice(1).map(function(k){return parseInt(k,16)/255}))[3]=1,P;if(g.HEX4.test(x))return P=g.HEX4.exec(x).slice(1).map(function(k){return parseInt(k+k,16)/255});if(g.HEX8.test(x))return P=g.HEX8.exec(x).slice(1).map(function(k){return parseInt(k,16)/255});if(g.RGB.test(x))return(P=g.RGB.exec(x).slice(1).map(function(k){return k/255}))[3]=1,P;if(g.RGB_PERCENT.test(x))return(P=g.RGB_PERCENT.exec(x).slice(1).map(function(k){return parseFloat(k)/100}))[3]=1,P;if(g.RGBA.test(x))return P=g.RGBA.exec(x).slice(1).map(function(k,I){return I===3?parseFloat(k):k/255});if(g.RGBA_PERCENT.test(x))return P=g.RGBA_PERCENT.exec(x).slice(1).map(function(k,I){return I===3?parseFloat(k):parseFloat(k)/100});if(g.HSL.test(x)?(P=g.HSL.exec(x).slice(1).map(function(k,I){return I===0?parseInt(k,10)/360:parseInt(k,10)/100}))[3]=1:g.HSLA.test(x)&&(P=g.HSLA.exec(x).slice(1).map(function(k,I){return I===0?parseInt(k,10)/360:I===3?parseFloat(k):parseInt(k,10)/100})),(P=P.map(function(k){return Math.max(Math.min(k,1),0)})).length)return h.default._hslaToRGBA(P);if(g.HSB.test(x)?(P=g.HSB.exec(x).slice(1).map(function(k,I){return I===0?parseInt(k,10)/360:parseInt(k,10)/100}))[3]=1:g.HSBA.test(x)&&(P=g.HSBA.exec(x).slice(1).map(function(k,I){return I===0?parseInt(k,10)/360:I===3?parseFloat(k):parseInt(k,10)/100})),P.length){for(E=P.length-1;0<=E;--E)P[E]=Math.max(Math.min(P[E],1),0);return h.default._hsbaToRGBA(P)}P=[1,1,1,1]}else{if(T!==1&&T!==2||typeof b!="number")throw new Error("".concat(arguments,"is not a valid color representation."));P[0]=b/R[2],P[1]=b/R[2],P[2]=b/R[2],P[3]=typeof _=="number"?_/R[3]:1,P=P.map(function(k){return Math.max(Math.min(k,1),0)})}return P},n.default.Color);f.default=v},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}e("./p5.Color"),n.default.prototype.background=function(){var i;return(i=this._renderer).background.apply(i,arguments),this},n.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},n.default.prototype.colorMode=function(i,o,c,u,p){return n.default._validateParameters("colorMode",arguments),i!==l.RGB&&i!==l.HSB&&i!==l.HSL||(this._colorMode=i,i=this._colorMaxes[i],arguments.length===2?(i[0]=o,i[1]=o,i[2]=o,i[3]=o):arguments.length===4?(i[0]=o,i[1]=c,i[2]=u):arguments.length===5&&(i[0]=o,i[1]=c,i[2]=u,i[3]=p)),this},n.default.prototype.fill=function(){var i;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(i=this._renderer).fill.apply(i,arguments),this},n.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},n.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},n.default.prototype.stroke=function(){var i;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(i=this._renderer).stroke.apply(i,arguments),this},n.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},n.default.prototype.noErase=function(){return this._renderer.noErase(),this};var m=n.default;f.default=m},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.BEZIER=f.QUADRATIC=f.LINEAR=f._CTX_MIDDLE=f._DEFAULT_LEADMULT=f._DEFAULT_TEXT_FILL=f.WORD=f.CHAR=f.BOLDITALIC=f.BOLD=f.ITALIC=f.NORMAL=f.BLUR=f.ERODE=f.DILATE=f.POSTERIZE=f.INVERT=f.OPAQUE=f.GRAY=f.THRESHOLD=f.BURN=f.DODGE=f.SOFT_LIGHT=f.HARD_LIGHT=f.OVERLAY=f.REPLACE=f.SCREEN=f.MULTIPLY=f.EXCLUSION=f.SUBTRACT=f.DIFFERENCE=f.LIGHTEST=f.DARKEST=f.ADD=f.REMOVE=f.BLEND=f.UP_ARROW=f.TAB=f.SHIFT=f.RIGHT_ARROW=f.RETURN=f.OPTION=f.LEFT_ARROW=f.ESCAPE=f.ENTER=f.DOWN_ARROW=f.DELETE=f.CONTROL=f.BACKSPACE=f.ALT=f.AUTO=f.HSL=f.HSB=f.RGB=f.MITER=f.BEVEL=f.ROUND=f.SQUARE=f.PROJECT=f.PIE=f.CHORD=f.OPEN=f.CLOSE=f.TESS=f.QUAD_STRIP=f.QUADS=f.TRIANGLE_STRIP=f.TRIANGLE_FAN=f.TRIANGLES=f.LINE_LOOP=f.LINE_STRIP=f.LINES=f.POINTS=f.BASELINE=f.BOTTOM=f.TOP=f.CENTER=f.LEFT=f.RIGHT=f.RADIUS=f.CORNERS=f.CORNER=f.RAD_TO_DEG=f.DEG_TO_RAD=f.RADIANS=f.DEGREES=f.TWO_PI=f.TAU=f.QUARTER_PI=f.PI=f.HALF_PI=f.WAIT=f.TEXT=f.MOVE=f.HAND=f.CROSS=f.ARROW=f.WEBGL=f.P2D=f.VERSION=void 0,f.COVER=f.CONTAIN=f.FALLBACK=f.LABEL=f.AXES=f.GRID=f._DEFAULT_FILL=f._DEFAULT_STROKE=f.PORTRAIT=f.LANDSCAPE=f.MIRROR=f.CLAMP=f.REPEAT=f.NEAREST=f.IMAGE=f.IMMEDIATE=f.TEXTURE=f.FILL=f.STROKE=f.CURVE=void 0;var a=Math.PI,s=(f.VERSION="1.5.0",f.P2D="p2d",f.WEBGL="webgl",f.ARROW="default",f.CROSS="crosshair",f.HAND="pointer",f.MOVE="move",f.TEXT="text",f.WAIT="wait",a/2),s=(f.HALF_PI=s,a),s=(f.PI=s,a/4),s=(f.QUARTER_PI=s,2*a),s=(f.TAU=s,2*a),s=(f.TWO_PI=s,f.DEGREES="degrees",f.RADIANS="radians",a/180),s=(f.DEG_TO_RAD=s,180/a);f.RAD_TO_DEG=s,f.CORNER="corner",f.CORNERS="corners",f.RADIUS="radius",f.RIGHT="right",f.LEFT="left",f.CENTER="center",f.TOP="top",f.BOTTOM="bottom",f.BASELINE="alphabetic",f.POINTS=0,f.LINES=1,f.LINE_STRIP=3,f.LINE_LOOP=2,f.TRIANGLES=4,f.TRIANGLE_FAN=6,f.TRIANGLE_STRIP=5,f.QUADS="quads",f.QUAD_STRIP="quad_strip",f.TESS="tess",f.CLOSE="close",f.OPEN="open",f.CHORD="chord",f.PIE="pie",f.PROJECT="square",f.SQUARE="butt",f.ROUND="round",f.BEVEL="bevel",f.MITER="miter",f.RGB="rgb",f.HSB="hsb",f.HSL="hsl",f.AUTO="auto",f.ALT=18,f.BACKSPACE=8,f.CONTROL=17,f.DELETE=46,f.DOWN_ARROW=40,f.ENTER=13,f.ESCAPE=27,f.LEFT_ARROW=37,f.OPTION=18,f.RETURN=13,f.RIGHT_ARROW=39,f.SHIFT=16,f.TAB=9,f.UP_ARROW=38,f.BLEND="source-over",f.REMOVE="destination-out",f.ADD="lighter",f.DARKEST="darken",f.LIGHTEST="lighten",f.DIFFERENCE="difference",f.SUBTRACT="subtract",f.EXCLUSION="exclusion",f.MULTIPLY="multiply",f.SCREEN="screen",f.REPLACE="copy",f.OVERLAY="overlay",f.HARD_LIGHT="hard-light",f.SOFT_LIGHT="soft-light",f.DODGE="color-dodge",f.BURN="color-burn",f.THRESHOLD="threshold",f.GRAY="gray",f.OPAQUE="opaque",f.INVERT="invert",f.POSTERIZE="posterize",f.DILATE="dilate",f.ERODE="erode",f.BLUR="blur",f.NORMAL="normal",f.ITALIC="italic",f.BOLD="bold",f.BOLDITALIC="bold italic",f.CHAR="CHAR",f.WORD="WORD",f._DEFAULT_TEXT_FILL="#000000",f._DEFAULT_LEADMULT=1.25,f._CTX_MIDDLE="middle",f.LINEAR="linear",f.QUADRATIC="quadratic",f.BEZIER="bezier",f.CURVE="curve",f.STROKE="stroke",f.FILL="fill",f.TEXTURE="texture",f.IMMEDIATE="immediate",f.IMAGE="image",f.NEAREST="nearest",f.REPEAT="repeat",f.CLAMP="clamp",f.MIRROR="mirror",f.LANDSCAPE="landscape",f.PORTRAIT="portrait",f._DEFAULT_STROKE="#000000",f._DEFAULT_FILL="#FFFFFF",f.GRID="grid",f.AXES="axes",f.LABEL="label",f.FALLBACK="fallback",f.CONTAIN="contain",f.COVER="cover"},{}],257:[function(e,d,f){function a(u){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function s(u){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(p){return a(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":a(p)})(u)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(l=e("./main"))&&l.__esModule?l:{default:l},l=function(u){if(u&&u.__esModule)return u;if(u===null||s(u)!=="object"&&typeof u!="function")return{default:u};var p=h();if(p&&p.has(u))return p.get(u);var g,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in u){var _;Object.prototype.hasOwnProperty.call(u,g)&&((_=b?Object.getOwnPropertyDescriptor(u,g):null)&&(_.get||_.set)?Object.defineProperty(v,g,_):v[g]=u[g])}return v.default=u,p&&p.set(u,v),v}(e("./constants"));function h(){var u;return typeof WeakMap!="function"?null:(u=new WeakMap,h=function(){return u},u)}var m=[l.ARROW,l.CROSS,l.HAND,l.MOVE,l.TEXT,l.WAIT],i=(n.default.prototype._frameRate=0,n.default.prototype._lastFrameTime=window.performance.now(),n.default.prototype._targetFrameRate=60,window.print);function o(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function c(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}n.default.prototype.print=function(){var u;arguments.length?(u=console).log.apply(u,arguments):i()},n.default.prototype.frameCount=0,n.default.prototype.deltaTime=0,n.default.prototype.focused=document.hasFocus(),n.default.prototype.cursor=function(u,p,g){var v,b="auto",_=this._curElement.elt;m.includes(u)?b=u:typeof u=="string"&&(v="",p&&g&&typeof p=="number"&&typeof g=="number"&&(v="".concat(p," ").concat(g)),b=u.substring(0,7)==="http://"||u.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(u)?"url(".concat(u,") ").concat(v,", auto"):u),_.style.cursor=b},n.default.prototype.frameRate=function(u){return n.default._validateParameters("frameRate",arguments),typeof u!="number"||u<0?this._frameRate:(this._setProperty("_targetFrameRate",u),u===0&&this._setProperty("_frameRate",u),this)},n.default.prototype.getFrameRate=function(){return this.frameRate()},n.default.prototype.setFrameRate=function(u){return this.frameRate(u)},n.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},n.default.prototype.displayWidth=screen.width,n.default.prototype.displayHeight=screen.height,n.default.prototype.windowWidth=o(),n.default.prototype.windowHeight=c(),n.default.prototype._onresize=function(u){this._setProperty("windowWidth",o()),this._setProperty("windowHeight",c());var p=this._isGlobal?window:this;typeof p.windowResized!="function"||(p=p.windowResized(u))===void 0||p||u.preventDefault()},n.default.prototype.width=0,n.default.prototype.height=0,n.default.prototype.fullscreen=function(u){if(n.default._validateParameters("fullscreen",arguments),u===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(u){if(u=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");u.requestFullscreen?u.requestFullscreen():u.mozRequestFullScreen?u.mozRequestFullScreen():u.webkitRequestFullscreen?u.webkitRequestFullscreen():u.msRequestFullscreen&&u.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},n.default.prototype.pixelDensity=function(u){var p;return n.default._validateParameters("pixelDensity",arguments),typeof u=="number"?(u!==this._pixelDensity&&(this._pixelDensity=u),(p=this).resizeCanvas(this.width,this.height,!0)):p=this._pixelDensity,p},n.default.prototype.displayDensity=function(){return window.devicePixelRatio},n.default.prototype.getURL=function(){return location.href},n.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(u){return u!==""})},n.default.prototype.getURLParams=function(){for(var u,p=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(u=p.exec(location.search))!=null;)u.index===p.lastIndex&&p.lastIndex++,g[u[1]]=u[2];return g},e=n.default,f.default=e},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(m=e("../main"))&&m.__esModule?m:{default:m};e("../internationalization");function s(i,o){o=o||console.log.bind(console),n||h(),n.some(function(c){var u;if(i.message&&i.message.match("\\W?".concat(c.name,"\\W"))!==null)return u=c.type==="function"?"".concat(c.name,"()"):c.name,o("Did you just try to use p5.js's ".concat(u," ").concat(c.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(l)),!0})}var n=null,h=null,l=(a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},n=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),h=function(){function i(c){return Object.getOwnPropertyNames(c).filter(function(u){return u[0]!=="_"&&!(u in o)&&(o[u]=!0)}).map(function(u){var p=typeof c[u]=="function"?"function":u===u.toUpperCase()?"constant":"variable";return{name:u,type:p}})}var o={};(n=[].concat(i(a.default.prototype),i(e("../constants")))).sort(function(c,u){return u.name.length-c.name.length})},m=(a.default.prototype._helpForMisusedAtTopLevelCode=s,document.readyState!=="complete"&&(window.addEventListener("error",s,!1),window.addEventListener("load",function(){window.removeEventListener("error",s,!1)})),a.default);f.default=m},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(a=e("../main"))&&a.__esModule?a:{default:a};e("../internationalization"),a.default._friendlyFileLoadError=function(){},e=a.default,f.default=e},{"../internationalization":265,"../main":267}],260:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}function s(o){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=m(e("../main"));e("../internationalization"),h(e("../constants"));function l(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,l=function(){return o},o)}function h(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var c=l();if(c&&c.has(o))return c.get(o);var u,p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o)Object.prototype.hasOwnProperty.call(o,u)&&((p=v?Object.getOwnPropertyDescriptor(o,u):null)&&(p.get||p.set)?Object.defineProperty(g,u,p):g[u]=o[u]);return g.default=o,c&&c.set(o,g),g}function m(o){return o&&o.__esModule?o:{default:o}}n.default._fesCodeReader=function(){};var i=n.default;f.default=i},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(e,d,f){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../main"))&&e.__esModule?e:{default:e};function a(){var s=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,l=/^(eval@)?(\[native code])?$/;return{parse:function(h){return h.stacktrace!==void 0||h["opera#sourceloc"]!==void 0?this.parseOpera(h):h.stack&&h.stack.match(n)?this.parseV8OrIE(h):h.stack?this.parseFFOrSafari(h):void 0},extractLocation:function(h){return h.indexOf(":")===-1?[h]:[(h=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(h.replace(/[()]/g,"")))[1],h[2]||void 0,h[3]||void 0]},parseV8OrIE:function(h){return h.stack.split(`
`).filter(function(m){return!!m.match(n)},this).map(function(m){var i=(m=-1<m.indexOf("(eval ")?m.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):m).replace(/^\s+/,"").replace(/\(eval code/g,"("),o=i.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(i=o?i.replace(o[0],""):i).split(/\s+/).slice(1),o=this.extractLocation(o?o[1]:i.pop());return{functionName:i.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(o[0])?void 0:o[0],lineNumber:o[1],columnNumber:o[2],source:m}},this)},parseFFOrSafari:function(h){return h.stack.split(`
`).filter(function(m){return!m.match(l)},this).map(function(m){var i,o;return(m=-1<m.indexOf(" > eval")?m.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):m).indexOf("@")===-1&&m.indexOf(":")===-1?{functionName:m}:{functionName:(o=m.match(i=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&o[1]?o[1]:void 0,fileName:(o=this.extractLocation(m.replace(i,"")))[0],lineNumber:o[1],columnNumber:o[2],source:m}},this)},parseOpera:function(h){return!h.stacktrace||-1<h.message.indexOf(`
`)&&h.message.split(`
`).length>h.stacktrace.split(`
`).length?this.parseOpera9(h):h.stack?this.parseOpera11(h):this.parseOpera10(h)},parseOpera9:function(h){for(var m=/Line (\d+).*script (?:in )?(\S+)/i,i=h.message.split(`
`),o=[],c=2,u=i.length;c<u;c+=2){var p=m.exec(i[c]);p&&o.push({fileName:p[2],lineNumber:p[1],source:i[c]})}return o},parseOpera10:function(h){for(var m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=h.stacktrace.split(`
`),o=[],c=0,u=i.length;c<u;c+=2){var p=m.exec(i[c]);p&&o.push({functionName:p[3]||void 0,fileName:p[2],lineNumber:p[1],source:i[c]})}return o},parseOpera11:function(h){return h.stack.split(`
`).filter(function(m){return!!m.match(s)&&!m.match(/^Error created at/)},this).map(function(m){var i,c=m.split("@"),o=this.extractLocation(c.pop()),c=c.shift()||"";return{functionName:c.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(i=c.match(/\(([^)]*)\)/)?c.replace(/^[^(]+\(([^)]*)\)$/,"$1"):i)===void 0||i==="[arguments not available]"?void 0:i.split(","),fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:m}},this)}}}e.default._getErrorStackParser=function(){return new a},e=e.default,f.default=e},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(e,d,f){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(s=e("../main"))&&s.__esModule?s:{default:s};(function(h){if(!(h&&h.__esModule)&&!(h===null||l(h)!=="object"&&typeof h!="function")){var m=n();if(m&&m.has(h))return m.get(h);var i,o={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in h){var u;Object.prototype.hasOwnProperty.call(h,i)&&((u=c?Object.getOwnPropertyDescriptor(h,i):null)&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=h[i])}o.default=h,m&&m.set(h,o)}})(e("../constants")),e("../internationalization");function n(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,n=function(){return h},h)}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}s.default._validateParameters=s.default._clearValidateParamsCache=function(){},e=s.default,f.default=e},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(e,d,f){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function s(h){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=function(h){if(h&&h.__esModule)return h;if(h===null||s(h)!=="object"&&typeof h!="function")return{default:h};var m=l();if(m&&m.has(h))return m.get(h);var i,o={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in h){var u;Object.prototype.hasOwnProperty.call(h,i)&&((u=c?Object.getOwnPropertyDescriptor(h,i):null)&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=h[i])}return o.default=h,m&&m.set(h,o),o}(e("./constants"));function l(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,l=function(){return h},h)}f.default={modeAdjust:function(h,m,i,o,c){return c===n.CORNER?{x:h,y:m,w:i,h:o}:c===n.CORNERS?{x:h,y:m,w:i-h,h:o-m}:c===n.RADIUS?{x:h-i,y:m-o,w:2*i,h:2*o}:c===n.CENTER?{x:h-.5*i,y:m-.5*o,w:i,h:o}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(e,d,f){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var a=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./internationalization");var s=Promise.resolve();Promise.all([new Promise(function(n,l){document.readyState==="complete"?n():window.addEventListener("load",n,!1)}),s]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!a.default.instance&&new a.default})},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(e,d,f){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.setTranslatorLanguage=f.currentTranslatorLanguage=f.availableTranslatorLanguages=f.initialize=f.translator=void 0;var a,s,n=h(e("i18next")),l=h(e("i18next-browser-languagedetector"));function h(o){return o&&o.__esModule?o:{default:o}}function m(o,c){for(var u=0;u<c.length;u++){var p=c[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}var i=function(){function o(p,g){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.init(p,g)}var c,u;return c=o,(u=[{key:"fetchWithTimeout",value:function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(p,g),new Promise(function(b,_){return setTimeout(function(){return _(new Error("timeout"))},v)})])}},{key:"init",value:function(p){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=p,this.options=g}},{key:"read",value:function(p,g,v){var b=this.options.loadPath;p===this.options.fallback?v(null,a[p][g]):s.includes(p)?(b=this.services.interpolator.interpolate(b,{lng:p,ns:g}),this.loadUrl(b,v)):v("Not found",!1)}},{key:"loadUrl",value:function(p,g){this.fetchWithTimeout(p).then(function(v){if(v.ok)return v.json();throw new Error("failed loading ".concat(p))},function(){throw new Error("failed loading ".concat(p))}).then(function(v){return g(null,v)}).catch(g)}}])&&m(c.prototype,u),o}();i.type="backend",f.translator=function(o,c){console.debug("p5.js translator called before translations were loaded"),n.default.t(o,c)},f.initialize=function(){return n.default.use(l.default).use(i).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:a}).then(function(o){f.translator=o},function(o){return console.debug("Translations failed to load (".concat(o,")"))})},f.availableTranslatorLanguages=function(){return n.default.languages},f.currentTranslatorLanguage=function(o){return n.default.language},f.setTranslatorLanguage=function(o){return n.default.changeLanguage(o||void 0,function(c){return console.debug("Translations failed to load (".concat(c,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("./main"))&&e.__esModule?e:{default:e},e.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},e=e.default,f.default=e},{"./main":267}],267:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}function s(o){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e("./shim");var n=function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var c=l();if(c&&c.has(o))return c.get(o);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o){var v;Object.prototype.hasOwnProperty.call(o,u)&&((v=g?Object.getOwnPropertyDescriptor(o,u):null)&&(v.get||v.set)?Object.defineProperty(p,u,v):p[u]=o[u])}return p.default=o,c&&c.set(o,p),p}(e("./constants"));function l(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,l=function(){return o},o)}function h(o,c){for(var u=0;u<c.length;u++){var p=c[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}var m,i=function(){function o(p,_,v){var b=this;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=_,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var _=Object.getOwnPropertyNames(o.prototype._registeredMethods),x=!0,A=!1,E=void 0;try{for(var T,C=_[Symbol.iterator]();!(x=(T=C.next()).done);x=!0){var R=T.value;this._registeredMethods[R]=o.prototype._registeredMethods[R].slice()}}catch(X){A=!0,E=X}finally{try{x||C.return==null||C.return()}finally{if(A)throw E}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){b._userNode&&typeof b._userNode=="string"&&(b._userNode=document.getElementById(b._userNode));var X=b._isGlobal?window:b;if(X.preload){var Z,q=document.getElementById(b._loadingScreenId),ee=(q||((q=document.createElement("div")).innerHTML="Loading...",q.style.position="absolute",q.id=b._loadingScreenId,(b._userNode||document.body).appendChild(q)),b._preloadMethods);for(Z in ee){ee[Z]=ee[Z]||o;var L=ee[Z];L!==o.prototype&&L!==o||(b._isGlobal&&(window[Z]=b._wrapPreload(b,Z)),L=b),b._registeredPreloadMethods[Z]=L[Z],L[Z]=b._wrapPreload(L,Z)}X.preload(),b._runIfPreloadsAreDone()}else b._setup(),b._draw()},this._runIfPreloadsAreDone=function(){var X,Z=this._isGlobal?window:this;Z._preloadCount===0&&((X=document.getElementById(Z._loadingScreenId))&&X.parentNode.removeChild(X),this._setupDone||(this._lastFrameTime=window.performance.now(),Z._setup(),Z._draw()))},this._decrementPreload=function(){var X=this._isGlobal?window:this;X._preloadDone||typeof X.preload!="function"||(X._setProperty("_preloadCount",X._preloadCount-1),X._runIfPreloadsAreDone())},this._wrapPreload=function(X,Z){var q=this;return function(){q._incrementPreload();for(var ee=arguments.length,L=new Array(ee),O=0;O<ee;O++)L[O]=arguments[O];return q._registeredPreloadMethods[Z].apply(X,L)}},this._incrementPreload=function(){var X=this._isGlobal?window:this;X._preloadDone||X._setProperty("_preloadCount",X._preloadCount+1)},this._setup=function(){b.createCanvas(b._defaultCanvasSize.width,b._defaultCanvasSize.height,"p2d");var X=b._isGlobal?window:b;if(typeof X.preload=="function")for(var Z in b._preloadMethods)X[Z]=b._preloadMethods[Z][Z],X[Z]&&b&&(X[Z]=X[Z].bind(b));b._millisStart=window.performance.now(),X._preloadDone=!0,typeof X.setup=="function"&&X.setup();var q=document.getElementsByTagName("canvas"),ee=!0,L=!1,O=void 0;try{for(var U,V=q[Symbol.iterator]();!(ee=(U=V.next()).done);ee=!0){var J=U.value;J.dataset.hidden==="true"&&(J.style.visibility="",delete J.dataset.hidden)}}catch(le){L=!0,O=le}finally{try{ee||V.return==null||V.return()}finally{if(L)throw O}}b._lastFrameTime=window.performance.now(),b._setupDone=!0,(b._accessibleOutputs.grid||b._accessibleOutputs.text)&&b._updateAccsOutput()},this._draw=function(){var X=window.performance.now(),Z=X-b._lastFrameTime,q=1e3/b._targetFrameRate;(!b._loop||q-5<=Z)&&(b.redraw(),b._frameRate=1e3/(X-b._lastFrameTime),b.deltaTime=X-b._lastFrameTime,b._setProperty("deltaTime",b.deltaTime),b._lastFrameTime=X,b._updateMouseCoords!==void 0&&(b._updateMouseCoords(),b._setProperty("movedX",0),b._setProperty("movedY",0))),b._loop&&(b._requestAnimId=window.requestAnimationFrame(b._draw))},this._setProperty=function(X,Z){b[X]=Z,b._isGlobal&&(window[X]=Z)},this.remove=function(){var X=document.getElementById(b._loadingScreenId);if(X&&(X.parentNode.removeChild(X),b._incrementPreload()),b._curElement){for(var Z in b._loop=!1,b._requestAnimId&&window.cancelAnimationFrame(b._requestAnimId),b._events)window.removeEventListener(Z,b._events[Z]);var q=!0,X=!1,ee=void 0;try{for(var L,O=b._elements[Symbol.iterator]();!(q=(L=O.next()).done);q=!0){var U,V=L.value;for(U in V.elt&&V.elt.parentNode&&V.elt.parentNode.removeChild(V.elt),V._events)V.elt.removeEventListener(U,V._events[U])}}catch(re){X=!0,ee=re}finally{try{q||O.return==null||O.return()}finally{if(X)throw ee}}var J=b;b._registeredMethods.remove.forEach(function(re){re!==void 0&&re.call(J)})}if(b._isGlobal){for(var le in o.prototype)try{delete window[le]}catch{window[le]=void 0}for(var ce in b)if(b.hasOwnProperty(ce))try{delete window[ce]}catch{window[ce]=void 0}o.instance=null}},this._registeredMethods.init.forEach(function(X){X!==void 0&&X.call(this)},this),this._setupPromisePreloads();var P,N,k=this._createFriendlyGlobalFunctionBinder();if(p)p(this),o._checkForUserDefinedFunctions(this);else{for(var I in this._isGlobal=!0,o.instance=this,o.prototype)typeof o.prototype[I]=="function"?(P=I.substring(2),this._events.hasOwnProperty(P)||(Math.hasOwnProperty(I)&&Math[I]===o.prototype[I]?k(I,o.prototype[I]):k(I,o.prototype[I].bind(this)))):k(I,o.prototype[I]);for(var B in this)this.hasOwnProperty(B)&&k(B,this[B])}for(N in this._events){var Y=this["_on".concat(N)];Y&&(Y=Y.bind(this),window.addEventListener(N,Y,{passive:!1}),this._events[N]=Y)}function W(){b._setProperty("focused",!0)}function H(){b._setProperty("focused",!1)}window.addEventListener("focus",W),window.addEventListener("blur",H),this.registerMethod("remove",function(){window.removeEventListener("focus",W),window.removeEventListener("blur",H)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var c,u;return c=o,(u=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=n.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(p,g){o.prototype._preloadMethods.hasOwnProperty(p)||(o.prototype._preloadMethods[p]=g)}},{key:"registerMethod",value:function(p,g){var v=this||o.prototype;v._registeredMethods.hasOwnProperty(p)||(v._registeredMethods[p]=[]),v._registeredMethods[p].push(g)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=p.globalObject||window;return p.log||console.log.bind(console),function(v,b){o.disableFriendlyErrors,g[v]=b}}}])&&h(c.prototype,u),o}();for(m in i.instance=null,i.disableFriendlyErrors=!1,n)i.prototype[m]=n[m];i.VERSION=n.VERSION,i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadBytes:i.prototype,loadTable:i.prototype,loadFont:i.prototype,loadModel:i.prototype,loadShader:i.prototype},i.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},i.prototype._registeredPreloadMethods={},f.default=i},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("./main"))&&e.__esModule?e:{default:e};a.default.Element=function(s,n){this.elt=s,this._pInst=this._pixelsState=n,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},a.default.Element.prototype.parent=function(s){return s===void 0?this.elt.parentNode:(typeof s=="string"?(s[0]==="#"&&(s=s.substring(1)),s=document.getElementById(s)):s instanceof a.default.Element&&(s=s.elt),s.appendChild(this.elt),this)},a.default.Element.prototype.id=function(s){return s===void 0?this.elt.id:(this.elt.id=s,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},a.default.Element.prototype.class=function(s){return s===void 0?this.elt.className:(this.elt.className=s,this)},a.default.Element.prototype.mousePressed=function(s){return a.default.Element._adjustListener("mousedown",function(n){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(n),s.call(this,n)},this),this},a.default.Element.prototype.doubleClicked=function(s){return a.default.Element._adjustListener("dblclick",s,this),this},a.default.Element.prototype.mouseWheel=function(s){return a.default.Element._adjustListener("wheel",s,this),this},a.default.Element.prototype.mouseReleased=function(s){return a.default.Element._adjustListener("mouseup",s,this),this},a.default.Element.prototype.mouseClicked=function(s){return a.default.Element._adjustListener("click",s,this),this},a.default.Element.prototype.mouseMoved=function(s){return a.default.Element._adjustListener("mousemove",s,this),this},a.default.Element.prototype.mouseOver=function(s){return a.default.Element._adjustListener("mouseover",s,this),this},a.default.Element.prototype.mouseOut=function(s){return a.default.Element._adjustListener("mouseout",s,this),this},a.default.Element.prototype.touchStarted=function(s){return a.default.Element._adjustListener("touchstart",s,this),this},a.default.Element.prototype.touchMoved=function(s){return a.default.Element._adjustListener("touchmove",s,this),this},a.default.Element.prototype.touchEnded=function(s){return a.default.Element._adjustListener("touchend",s,this),this},a.default.Element.prototype.dragOver=function(s){return a.default.Element._adjustListener("dragover",s,this),this},a.default.Element.prototype.dragLeave=function(s){return a.default.Element._adjustListener("dragleave",s,this),this},a.default.Element._adjustListener=function(s,n,l){return n===!1?a.default.Element._detachListener(s,l):a.default.Element._attachListener(s,n,l),this},a.default.Element._attachListener=function(s,n,l){l._events[s]&&a.default.Element._detachListener(s,l),n=n.bind(l),l.elt.addEventListener(s,n,!1),l._events[s]=n},a.default.Element._detachListener=function(s,n){var l=n._events[s];n.elt.removeEventListener(s,l,!1),n._events[s]=null},a.default.Element.prototype._setProperty=function(s,n){this[s]=n},e=a.default.Element,f.default=e},{"./main":267}],269:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("./main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("./constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}n.default.Graphics=function(i,o,g,u){var p,g=g||l.P2D;for(p in this.canvas=document.createElement("canvas"),(u._userNode||document.body).appendChild(this.canvas),n.default.Element.call(this,this.canvas,u),n.default.prototype)this[p]||(typeof n.default.prototype[p]=="function"?this[p]=n.default.prototype[p].bind(this):this[p]=n.default.prototype[p]);return n.default.prototype._initializeInstanceVariables.apply(this),this.width=i,this.height=o,this._pixelDensity=u._pixelDensity,g===l.WEBGL?this._renderer=new n.default.RendererGL(this.canvas,this,!1):this._renderer=new n.default.Renderer2D(this.canvas,this,!1),u._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(i,o),this._renderer._applyDefaults(),this},n.default.Graphics.prototype=Object.create(n.default.Element.prototype),n.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},n.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var i,o=this._pInst._elements.indexOf(this);for(i in o!==-1&&this._pInst._elements.splice(o,1),this._events)this.elt.removeEventListener(i,this._events[i])};var m=n.default.Graphics;f.default=m},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(i=e("./main"))&&i.__esModule?i:{default:i},n=function(o){if(o&&o.__esModule)return o;if(o===null||h(o)!=="object"&&typeof o!="function")return{default:o};var c=l();if(c&&c.has(o))return c.get(o);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o){var v;Object.prototype.hasOwnProperty.call(o,u)&&((v=g?Object.getOwnPropertyDescriptor(o,u):null)&&(v.get||v.set)?Object.defineProperty(p,u,v):p[u]=o[u])}return p.default=o,c&&c.set(o,p),p}(e("../core/constants"));function l(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,l=function(){return o},o)}function h(o){return(h=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}function m(o){var c=0,u=0;if(o.offsetParent)for(;c+=o.offsetLeft,u+=o.offsetTop,o=o.offsetParent;);else c+=o.offsetLeft,u+=o.offsetTop;return[c,u]}s.default.Renderer=function(o,c,u){s.default.Element.call(this,o,c),this.canvas=o,this._pixelsState=c,u?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=n.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=n.LEFT,this._textBaseline=n.BASELINE,this._textWrap=n.WORD,this._rectMode=n.CORNER,this._ellipseMode=n.CENTER,this._curveTightness=0,this._imageMode=n.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},s.default.Renderer.prototype=Object.create(s.default.Element.prototype),s.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},s.default.Renderer.prototype.pop=function(o){o.properties&&Object.assign(this,o.properties)},s.default.Renderer.prototype.resize=function(o,c){this.width=o,this.height=c,this.elt.width=o*this._pInst._pixelDensity,this.elt.height=c*this._pInst._pixelDensity,this.elt.style.width="".concat(o,"px"),this.elt.style.height="".concat(c,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},s.default.Renderer.prototype.get=function(o,c,u,p){var g=this._pixelsState,v=g._pixelDensity,b=this.canvas;if(o===void 0&&c===void 0)o=c=0,u=g.width,p=g.height;else if(o*=v,c*=v,u===void 0&&p===void 0)return o<0||c<0||o>=b.width||c>=b.height?[0,0,0,0]:this._getPixel(o,c);return g=new s.default.Image(u,p),g.canvas.getContext("2d").drawImage(b,o,c,u*v,p*v,0,0,u,p),g},s.default.Renderer.prototype.textLeading=function(o){return typeof o=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",o),this._pInst):this._textLeading},s.default.Renderer.prototype.textSize=function(o){return typeof o=="number"?(this._setProperty("_textSize",o),this._leadingSet||this._setProperty("_textLeading",o*n._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},s.default.Renderer.prototype.textStyle=function(o){return o?(o!==n.NORMAL&&o!==n.ITALIC&&o!==n.BOLD&&o!==n.BOLDITALIC||this._setProperty("_textStyle",o),this._applyTextProperties()):this._textStyle},s.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},s.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},s.default.Renderer.prototype.textAlign=function(o,c){return o!==void 0?(this._setProperty("_textAlign",o),c!==void 0&&this._setProperty("_textBaseline",c),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},s.default.Renderer.prototype.textWrap=function(o){return this._setProperty("_textWrap",o),this._textWrap},s.default.Renderer.prototype.text=function(o,c,u,p,g){var v,b,_,x,A=this._pInst,E=this._textWrap,T=Number.MAX_VALUE,C=u;if((this._doFill||this._doStroke)&&o!==void 0){if(v=(o=(o=typeof o!="string"?o.toString():o).replace(/(\t)/g,"  ")).split(`
`),p!==void 0){switch(this._rectMode===n.CENTER&&(c-=p/2),this._textAlign){case n.CENTER:c+=p/2;break;case n.RIGHT:c+=p}if(g!==void 0){this._rectMode===n.CENTER&&(u-=g/2);var o=u,R=A.textAscent();switch(this._textBaseline){case n.BOTTOM:x=u+g,u=Math.max(x,u),C+=R;break;case n.CENTER:x=u+g/2,u=Math.max(x,u),C+=R/2}T=u+g-R,this._textBaseline===n.CENTER&&(T=o+g-R/2)}else{if(this._textBaseline===n.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===n.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(E===n.WORD){for(var P=[],N=0;N<v.length;N++){for(var k="",I=v[N].split(" "),B=0;B<I.length;B++)b="".concat(k+I[B])+" ",k=p<(_=this.textWidth(b))&&0<k.length?(P.push(k),"".concat(I[B])+" "):b;P.push(k)}var Y=0;this._textBaseline===n.CENTER?Y=(P.length-1)*A.textLeading()/2:this._textBaseline===n.BOTTOM&&(Y=(P.length-1)*A.textLeading());for(var W=0;W<v.length;W++){k="",I=v[W].split(" ");for(var H=0;H<I.length;H++)b="".concat(k+I[H])+" ",p<(_=this.textWidth(b))&&0<k.length?(this._renderText(A,k.trim(),c,u-Y,T,C),k="".concat(I[H])+" ",u+=A.textLeading()):k=b;this._renderText(A,k.trim(),c,u-Y,T,C),u+=A.textLeading()}}else{for(var X=[],Z=0;Z<v.length;Z++)for(var q=v[Z].split(k=""),ee=0;ee<q.length;ee++)b="".concat(k+q[ee]),(_=this.textWidth(b))<=p?k+=q[ee]:p<_&&0<k.length&&(X.push(k),k="".concat(q[ee]));X.push(k);var L=0;this._textBaseline===n.CENTER?L=(X.length-1)*A.textLeading()/2:this._textBaseline===n.BOTTOM&&(L=(X.length-1)*A.textLeading());for(var O=0;O<v.length;O++){q=v[O].split(k="");for(var U=0;U<q.length;U++)b="".concat(k+q[U]),(_=this.textWidth(b))<=p?k+=q[U]:p<_&&0<k.length&&(this._renderText(A,k.trim(),c,u-L,T,C),u+=A.textLeading(),k="".concat(q[U]))}this._renderText(A,k.trim(),c,u-L,T,C),u+=A.textLeading()}}else{var V=0;this._textBaseline===n.CENTER?V=(v.length-1)*A.textLeading()/2:this._textBaseline===n.BOTTOM&&(V=(v.length-1)*A.textLeading());for(var J=0;J<v.length;J++)this._renderText(A,v[J],c,u-V,T,C),u+=A.textLeading()}return A}},s.default.Renderer.prototype._applyDefaults=function(){return this},s.default.Renderer.prototype._isOpenType=function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return h(o)==="object"&&o.font&&o.font.supported},s.default.Renderer.prototype._updateTextMetrics=function(){var o,c,u,p,g,v;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((o=document.createElement("span")).style.fontFamily=this._textFont,o.style.fontSize="".concat(this._textSize,"px"),o.innerHTML="ABCjgq|",(v=document.createElement("div")).style.display="inline-block",v.style.width="1px",v.style.height="0px",p=((c=document.createElement("div")).appendChild(o),c.appendChild(v),c.style.height="0px",c.style.overflow="hidden",document.body.appendChild(c),v.style.verticalAlign="baseline",m(v)),g=m(o),u=p[1]-g[1],p=(v.style.verticalAlign="bottom",m(v)),g=m(o),v=p[1]-g[1]-u,document.body.removeChild(c),this._setProperty("_textAscent",u),this._setProperty("_textDescent",v)),this};var i=s.default.Renderer;f.default=i},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}function s(o){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(i=e("./main"))&&i.__esModule?i:{default:i},l=function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var c=h();if(c&&c.has(o))return c.get(o);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o){var v;Object.prototype.hasOwnProperty.call(o,u)&&((v=g?Object.getOwnPropertyDescriptor(o,u):null)&&(v.get||v.set)?Object.defineProperty(p,u,v):p[u]=o[u])}return p.default=o,c&&c.set(o,p),p}(e("./constants"));function h(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,h=function(){return o},o)}e("./p5.Renderer");var m="rgba(0,0,0,0)",i=(n.default.Renderer2D=function(o,c,u){return n.default.Renderer.call(this,o,c,u),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.default.Renderer2D.prototype=Object.create(n.default.Renderer.prototype),n.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=l.BLEND,this._setFill(l._DEFAULT_FILL),this._setStroke(l._DEFAULT_STROKE),this.drawingContext.lineCap=l.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.default.Renderer2D.prototype.resize=function(o,c){n.default.Renderer.prototype.resize.call(this,o,c),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.default.Renderer2D.prototype.background=function(){var o,c;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof n.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(o=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(o,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(o=this._getFill(),c=(c=this._pInst).color.apply(c,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(c.levels),c=c.toString(),this._setFill(c),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(o),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},n.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},n.default.Renderer2D.prototype.fill=function(){var o=(o=this._pInst).color.apply(o,arguments);this._setFill(o.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",o.levels)},n.default.Renderer2D.prototype.stroke=function(){var o=(o=this._pInst).color.apply(o,arguments);this._setStroke(o.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",o.levels)},n.default.Renderer2D.prototype.erase=function(o,c){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,o=this._pInst.color(255,o).toString(),this.drawingContext.fillStyle=o,this._cachedStrokeStyle=this.drawingContext.strokeStyle,o=this._pInst.color(255,c).toString(),this.drawingContext.strokeStyle=o,c=this._cachedBlendMode,this.blendMode(l.REMOVE),this._cachedBlendMode=c,this._isErasing=!0)},n.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},n.default.Renderer2D.prototype.image=function(o,c,u,p,g,v,b,_,x){o.gifProperties&&o._animateGif(this._pInst);try{var A=(A=this._tint&&o.canvas?this._getTintedImageCanvas(o):A)||o.canvas||o.elt,E=1;o.width&&0<o.width&&(E=A.width/o.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(A,E*c,E*u,E*p,E*g,v,b,_,x),this._isErasing&&this._pInst.erase()}catch(T){if(T.name!=="NS_ERROR_NOT_AVAILABLE")throw T}},n.default.Renderer2D.prototype._getTintedImageCanvas=function(o){if(!o.canvas)return o;o.tintCanvas||(o.tintCanvas=document.createElement("canvas")),o.tintCanvas.width!==o.canvas.width&&(o.tintCanvas.width=o.canvas.width),o.tintCanvas.height!==o.canvas.height&&(o.tintCanvas.height=o.canvas.height);var c=o.tintCanvas.getContext("2d");return c.save(),c.clearRect(0,0,o.canvas.width,o.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(c.drawImage(o.canvas,0,0),c.globalCompositeOperation="luminosity",c.drawImage(o.canvas,0,0),c.globalCompositeOperation="color",c.drawImage(o.canvas,0,0),c.globalCompositeOperation="multiply",c.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),c.fillRect(0,0,o.canvas.width,o.canvas.height),c.globalCompositeOperation="destination-in"),c.globalAlpha=this._tint[3]/255,c.drawImage(o.canvas,0,0),c.restore(),o.tintCanvas},n.default.Renderer2D.prototype.blendMode=function(o){if(o===l.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(o!==l.BLEND&&o!==l.REMOVE&&o!==l.DARKEST&&o!==l.LIGHTEST&&o!==l.DIFFERENCE&&o!==l.MULTIPLY&&o!==l.EXCLUSION&&o!==l.SCREEN&&o!==l.REPLACE&&o!==l.OVERLAY&&o!==l.HARD_LIGHT&&o!==l.SOFT_LIGHT&&o!==l.DODGE&&o!==l.BURN&&o!==l.ADD)throw new Error("Mode ".concat(o," not recognized."));this._cachedBlendMode=o,this.drawingContext.globalCompositeOperation=o}},n.default.Renderer2D.prototype.blend=function(){for(var o=this.drawingContext.globalCompositeOperation,c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];var g=u[u.length-1],v=Array.prototype.slice.call(u,0,u.length-1);this.drawingContext.globalCompositeOperation=g,n.default.prototype.copy.apply(this,v),this.drawingContext.globalCompositeOperation=o},n.default.Renderer2D.prototype._getPixel=function(o,c){return o=this.drawingContext.getImageData(o,c,1,1).data,[o[0],o[1],o[2],o[3]]},n.default.Renderer2D.prototype.loadPixels=function(){var o=this._pixelsState,c=o._pixelDensity,u=this.width*c,c=this.height*c,u=this.drawingContext.getImageData(0,0,u,c);o._setProperty("imageData",u),o._setProperty("pixels",u.data)},n.default.Renderer2D.prototype.set=function(o,c,u){o=Math.floor(o),c=Math.floor(c);var p=this._pixelsState;if(u instanceof n.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(p._pixelDensity,p._pixelDensity),this.drawingContext.clearRect(o,c,u.width,u.height),this.drawingContext.drawImage(u.canvas,o,c),this.drawingContext.restore();else{var g=0,v=0,b=0,_=0,x=4*(c*p._pixelDensity*(this.width*p._pixelDensity)+o*p._pixelDensity);if(p.imageData||p.loadPixels.call(p),typeof u=="number")x<p.pixels.length&&(b=v=g=u,_=255);else if(u instanceof Array){if(u.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");x<p.pixels.length&&(g=u[0],v=u[1],b=u[2],_=u[3])}else u instanceof n.default.Color&&x<p.pixels.length&&(g=u.levels[0],v=u.levels[1],b=u.levels[2],_=u.levels[3]);for(var A=0;A<p._pixelDensity;A++)for(var E=0;E<p._pixelDensity;E++)x=4*((c*p._pixelDensity+E)*this.width*p._pixelDensity+(o*p._pixelDensity+A)),p.pixels[x]=g,p.pixels[x+1]=v,p.pixels[x+2]=b,p.pixels[x+3]=_}},n.default.Renderer2D.prototype.updatePixels=function(o,c,u,p){var g=this._pixelsState,v=g._pixelDensity;o===void 0&&c===void 0&&u===void 0&&p===void 0&&(c=o=0,u=this.width,p=this.height),o*=v,c*=v,u*=v,p*=v,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=g.imageData),this.drawingContext.putImageData(g.imageData,o,c,0,0,u,p)},n.default.Renderer2D.prototype._acuteArcToBezier=function(o,c){var v=c/2,u=Math.cos(v),_=Math.sin(v),p=1/Math.tan(v),v=o+v,g=Math.cos(v),v=Math.sin(v),b=(4-u)/3,_=_+(u-b)*p;return{ax:Math.cos(o).toFixed(7),ay:Math.sin(o).toFixed(7),bx:(b*g+_*v).toFixed(7),by:(b*v-_*g).toFixed(7),cx:(b*g-_*v).toFixed(7),cy:(b*v+_*g).toFixed(7),dx:Math.cos(o+c).toFixed(7),dy:Math.sin(o+c).toFixed(7)}},n.default.Renderer2D.prototype.arc=function(o,c,u,p,g,v,b){var _,x=this.drawingContext,A=u/2,E=p/2,T=[];for(o+=A,c+=E;1e-5<=v-g;)_=Math.min(v-g,l.HALF_PI),T.push(this._acuteArcToBezier(g,_)),g+=_;return this._doFill&&(x.beginPath(),T.forEach(function(C,R){R===0&&x.moveTo(o+C.ax*A,c+C.ay*E),x.bezierCurveTo(o+C.bx*A,c+C.by*E,o+C.cx*A,c+C.cy*E,o+C.dx*A,c+C.dy*E)}),b!==l.PIE&&b!=null||x.lineTo(o,c),x.closePath(),x.fill()),this._doStroke&&(x.beginPath(),T.forEach(function(C,R){R===0&&x.moveTo(o+C.ax*A,c+C.ay*E),x.bezierCurveTo(o+C.bx*A,c+C.by*E,o+C.cx*A,c+C.cy*E,o+C.dx*A,c+C.dy*E)}),b===l.PIE?(x.lineTo(o,c),x.closePath()):b===l.CHORD&&x.closePath(),x.stroke()),this},n.default.Renderer2D.prototype.ellipse=function(T){var c=this.drawingContext,u=this._doFill,p=this._doStroke,g=parseFloat(T[0]),v=parseFloat(T[1]),E=parseFloat(T[2]),T=parseFloat(T[3]);if(u&&!p){if(this._getFill()===m)return this}else if(!u&&p&&this._getStroke()===m)return this;var b=E/2*.5522847498,_=T/2*.5522847498,x=g+E,A=v+T,E=g+E/2,T=v+T/2;c.beginPath(),c.moveTo(g,T),c.bezierCurveTo(g,T-_,E-b,v,E,v),c.bezierCurveTo(E+b,v,x,T-_,x,T),c.bezierCurveTo(x,T+_,E+b,A,E,A),c.bezierCurveTo(E-b,A,g,T+_,g,T),u&&c.fill(),p&&c.stroke()},n.default.Renderer2D.prototype.line=function(o,c,u,p){var g=this.drawingContext;return this._doStroke&&this._getStroke()!==m&&(g.beginPath(),g.moveTo(o,c),g.lineTo(u,p),g.stroke()),this},n.default.Renderer2D.prototype.point=function(o,c){var u,p,g=this.drawingContext;return!this._doStroke||this._getStroke()===m?this:(u=this._getStroke(),p=this._getFill(),this._setFill(u),g.beginPath(),g.arc(o,c,g.lineWidth/2,0,l.TWO_PI,!1),g.fill(),void this._setFill(p))},n.default.Renderer2D.prototype.quad=function(o,c,u,p,g,v,b,_){var x=this.drawingContext,A=this._doFill,E=this._doStroke;if(A&&!E){if(this._getFill()===m)return this}else if(!A&&E&&this._getStroke()===m)return this;return x.beginPath(),x.moveTo(o,c),x.lineTo(u,p),x.lineTo(g,v),x.lineTo(b,_),x.closePath(),A&&x.fill(),E&&x.stroke(),this},n.default.Renderer2D.prototype.rect=function(E){var c,u,p=E[0],g=E[1],v=E[2],b=E[3],_=E[4],x=E[5],A=E[6],E=E[7],T=this.drawingContext,C=this._doFill,R=this._doStroke;if(C&&!R){if(this._getFill()===m)return this}else if(!C&&R&&this._getStroke()===m)return this;return T.beginPath(),_===void 0?T.rect(p,g,v,b):(x===void 0&&(x=_),A===void 0&&(A=x),E===void 0&&(E=A),R=(C=Math.abs(v))/2,u=(c=Math.abs(b))/2,c<2*(_=C<2*_?R:_)&&(_=u),c<2*(x=C<2*x?R:x)&&(x=u),c<2*(A=C<2*A?R:A)&&(A=u),c<2*(E=C<2*E?R:E)&&(E=u),T.beginPath(),T.moveTo(p+_,g),T.arcTo(p+v,g,p+v,g+b,x),T.arcTo(p+v,g+b,p,g+b,A),T.arcTo(p,g+b,p,g,E),T.arcTo(p,g,p+v,g,_),T.closePath()),this._doFill&&T.fill(),this._doStroke&&T.stroke(),this},n.default.Renderer2D.prototype.triangle=function(A){var c=this.drawingContext,u=this._doFill,p=this._doStroke,g=A[0],v=A[1],b=A[2],_=A[3],x=A[4],A=A[5];if(u&&!p){if(this._getFill()===m)return this}else if(!u&&p&&this._getStroke()===m)return this;c.beginPath(),c.moveTo(g,v),c.lineTo(b,_),c.lineTo(x,A),c.closePath(),u&&c.fill(),p&&c.stroke()},n.default.Renderer2D.prototype.endShape=function(o,c,u,p,g,v,b){if(c.length!==0&&(this._doStroke||this._doFill)){var _,x,A,E=o===l.CLOSE,T=(E&&!v&&c.push(c[0]),c.length);if(!u||b!==l.POLYGON&&b!==null)if(!p||b!==l.POLYGON&&b!==null)if(!g||b!==l.POLYGON&&b!==null)if(b===l.POINTS)for(x=0;x<T;x++)_=c[x],this._doStroke&&this._pInst.stroke(_[6]),this._pInst.point(_[0],_[1]);else if(b===l.LINES)for(x=0;x+1<T;x+=2)_=c[x],this._doStroke&&this._pInst.stroke(c[x+1][6]),this._pInst.line(_[0],_[1],c[x+1][0],c[x+1][1]);else if(b===l.TRIANGLES)for(x=0;x+2<T;x+=3)_=c[x],this.drawingContext.beginPath(),this.drawingContext.moveTo(_[0],_[1]),this.drawingContext.lineTo(c[x+1][0],c[x+1][1]),this.drawingContext.lineTo(c[x+2][0],c[x+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(c[x+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(c[x+2][6]),this.drawingContext.stroke());else if(b===l.TRIANGLE_STRIP)for(x=0;x+1<T;x++)_=c[x],this.drawingContext.beginPath(),this.drawingContext.moveTo(c[x+1][0],c[x+1][1]),this.drawingContext.lineTo(_[0],_[1]),this._doStroke&&this._pInst.stroke(c[x+1][6]),this._doFill&&this._pInst.fill(c[x+1][5]),x+2<T&&(this.drawingContext.lineTo(c[x+2][0],c[x+2][1]),this._doStroke&&this._pInst.stroke(c[x+2][6]),this._doFill&&this._pInst.fill(c[x+2][5])),this._doFillStrokeClose(E);else if(b===l.TRIANGLE_FAN){if(2<T){for(this.drawingContext.beginPath(),x=2;x<T;x++)_=c[x],this.drawingContext.moveTo(c[0][0],c[0][1]),this.drawingContext.lineTo(c[x-1][0],c[x-1][1]),this.drawingContext.lineTo(_[0],_[1]),this.drawingContext.lineTo(c[0][0],c[0][1]),x<T-1&&(this._doFill&&_[5]!==c[x+1][5]||this._doStroke&&_[6]!==c[x+1][6])&&(this._doFill&&(this._pInst.fill(_[5]),this.drawingContext.fill(),this._pInst.fill(c[x+1][5])),this._doStroke&&(this._pInst.stroke(_[6]),this.drawingContext.stroke(),this._pInst.stroke(c[x+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(E)}}else if(b===l.QUADS)for(x=0;x+3<T;x+=4){for(_=c[x],this.drawingContext.beginPath(),this.drawingContext.moveTo(_[0],_[1]),A=1;A<4;A++)this.drawingContext.lineTo(c[x+A][0],c[x+A][1]);this.drawingContext.lineTo(_[0],_[1]),this._doFill&&this._pInst.fill(c[x+3][5]),this._doStroke&&this._pInst.stroke(c[x+3][6]),this._doFillStrokeClose(E)}else if(b===l.QUAD_STRIP){if(3<T)for(x=0;x+1<T;x+=2)_=c[x],this.drawingContext.beginPath(),x+3<T?(this.drawingContext.moveTo(c[x+2][0],c[x+2][1]),this.drawingContext.lineTo(_[0],_[1]),this.drawingContext.lineTo(c[x+1][0],c[x+1][1]),this.drawingContext.lineTo(c[x+3][0],c[x+3][1]),this._doFill&&this._pInst.fill(c[x+3][5]),this._doStroke&&this._pInst.stroke(c[x+3][6])):(this.drawingContext.moveTo(_[0],_[1]),this.drawingContext.lineTo(c[x+1][0],c[x+1][1])),this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(c[0][0],c[0][1]),x=1;x<T;x++)(_=c[x]).isVert&&(_.moveTo?this.drawingContext.moveTo(_[0],_[1]):this.drawingContext.lineTo(_[0],_[1]));this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),x=0;x<T;x++)c[x].isVert?c[x].moveTo?this.drawingContext.moveTo(c[x][0],c[x][1]):this.drawingContext.lineTo(c[x][0],c[x][1]):this.drawingContext.quadraticCurveTo(c[x][0],c[x][1],c[x][2],c[x][3]);this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),x=0;x<T;x++)c[x].isVert?c[x].moveTo?this.drawingContext.moveTo(c[x][0],c[x][1]):this.drawingContext.lineTo(c[x][0],c[x][1]):this.drawingContext.bezierCurveTo(c[x][0],c[x][1],c[x][2],c[x][3],c[x][4],c[x][5]);this._doFillStrokeClose(E)}else if(3<T){var C=[],R=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(c[1][0],c[1][1]),x=1;x+2<T;x++)_=c[x],C[0]=[_[0],_[1]],C[1]=[_[0]+(R*c[x+1][0]-R*c[x-1][0])/6,_[1]+(R*c[x+1][1]-R*c[x-1][1])/6],C[2]=[c[x+1][0]+(R*c[x][0]-R*c[x+2][0])/6,c[x+1][1]+(R*c[x][1]-R*c[x+2][1])/6],C[3]=[c[x+1][0],c[x+1][1]],this.drawingContext.bezierCurveTo(C[1][0],C[1][1],C[2][0],C[2][1],C[3][0],C[3][1]);E&&this.drawingContext.lineTo(c[x+1][0],c[x+1][1]),this._doFillStrokeClose(E)}v=g=p=u=!1,E&&c.pop()}return this},n.default.Renderer2D.prototype.strokeCap=function(o){return o!==l.ROUND&&o!==l.SQUARE&&o!==l.PROJECT||(this.drawingContext.lineCap=o),this},n.default.Renderer2D.prototype.strokeJoin=function(o){return o!==l.ROUND&&o!==l.BEVEL&&o!==l.MITER||(this.drawingContext.lineJoin=o),this},n.default.Renderer2D.prototype.strokeWeight=function(o){return this.drawingContext.lineWidth=o===void 0||o===0?1e-4:o,this},n.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},n.default.Renderer2D.prototype._setFill=function(o){o!==this._cachedFillStyle&&(this.drawingContext.fillStyle=o,this._cachedFillStyle=o)},n.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},n.default.Renderer2D.prototype._setStroke=function(o){o!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=o,this._cachedStrokeStyle=o)},n.default.Renderer2D.prototype.bezier=function(o,c,u,p,g,v,b,_){return this._pInst.beginShape(),this._pInst.vertex(o,c),this._pInst.bezierVertex(u,p,g,v,b,_),this._pInst.endShape(),this},n.default.Renderer2D.prototype.curve=function(o,c,u,p,g,v,b,_){return this._pInst.beginShape(),this._pInst.curveVertex(o,c),this._pInst.curveVertex(u,p),this._pInst.curveVertex(g,v),this._pInst.curveVertex(b,_),this._pInst.endShape(),this},n.default.Renderer2D.prototype._doFillStrokeClose=function(o){o&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},n.default.Renderer2D.prototype.applyMatrix=function(o,c,u,p,g,v){this.drawingContext.transform(o,c,u,p,g,v)},n.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.default.Renderer2D.prototype.rotate=function(o){this.drawingContext.rotate(o)},n.default.Renderer2D.prototype.scale=function(o,c){return this.drawingContext.scale(o,c),this},n.default.Renderer2D.prototype.translate=function(o,c){return o instanceof n.default.Vector&&(c=o.y,o=o.x),this.drawingContext.translate(o,c),this},n.default.Renderer2D.prototype.text=function(o,c,u,b,g){b!==void 0&&this.drawingContext.textBaseline===l.BASELINE&&(v=!0,this.drawingContext.textBaseline=l.TOP);var v,b=n.default.Renderer.prototype.text.apply(this,arguments);return v&&(this.drawingContext.textBaseline=l.BASELINE),b},n.default.Renderer2D.prototype._renderText=function(o,c,u,p,g,v){if(!(p<v||g<=p))return o.push(),this._isOpenType()?this._textFont._renderPath(c,u,p,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(c,u,p),this._doFill&&(this._fillSet||this._setFill(l._DEFAULT_TEXT_FILL),this.drawingContext.fillText(c,u,p))),o.pop(),o},n.default.Renderer2D.prototype.textWidth=function(o){return this._isOpenType()?this._textFont._textWidth(o,this._textSize):this.drawingContext.measureText(o).width},n.default.Renderer2D.prototype._applyTextProperties=function(){var o,c=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),o=this._textFont,this._isOpenType()&&(o=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(o||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===l.CENTER?this.drawingContext.textBaseline=l._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,c},n.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),n.default.Renderer.prototype.push.apply(this)},n.default.Renderer2D.prototype.pop=function(o){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,n.default.Renderer.prototype.pop.call(this,o)},n.default.Renderer2D);f.default=i},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var a=(e=e("./main"))&&e.__esModule?e:{default:e};a.default.prototype._promisePreloads=[];function s(){return{}}var n=!(a.default.prototype.registerPromisePreload=function(l){a.default.prototype._promisePreloads.push(l)});a.default.prototype._setupPromisePreloads=function(){var l=!0,h=!1,m=void 0;try{for(var i,o=this._promisePreloads[Symbol.iterator]();!(l=(i=o.next()).done);l=!0){var c=i.value,u=this,p=c.method,g=c.addCallbacks,v=c.legacyPreloadSetup,b=c.target||this,_=b[p].bind(b);if(b===a.default.prototype){if(n)continue;u=null,_=b[p]}b[p]=this._wrapPromisePreload(u,_,g),v&&(b[v.method]=this._legacyPreloadGenerator(u,v,b[p]))}}catch(x){h=!0,m=x}finally{try{l||o.return==null||o.return()}finally{if(h)throw m}}n=!0},a.default.prototype._wrapPromisePreload=function(l,h,m){var i=function(){for(var o=this,c=(this._incrementPreload(),null),u=null,p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];if(m)for(var b=g.length-1;0<=b&&!u&&typeof g[b]=="function";b--)u=c,c=g.pop();var _=Promise.resolve(h.apply(this,g));return c&&_.then(c),u&&_.catch(u),_.then(function(){return o._decrementPreload()}),_};return i=l?i.bind(l):i},a.default.prototype._legacyPreloadGenerator=function(l,o,m){var i=o.createBaseObject||s,o=function(){var c=this,u=(this._incrementPreload(),i.apply(this,arguments));return m.apply(this,arguments).then(function(p){Object.assign(u,p),c._decrementPreload()}),u};return o=l?o.bind(l):o}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(i=e("./main"))&&i.__esModule?i:{default:i},n=function(o){if(o&&o.__esModule)return o;if(o===null||h(o)!=="object"&&typeof o!="function")return{default:o};var c=l();if(c&&c.has(o))return c.get(o);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o){var v;Object.prototype.hasOwnProperty.call(o,u)&&((v=g?Object.getOwnPropertyDescriptor(o,u):null)&&(v.get||v.set)?Object.defineProperty(p,u,v):p[u]=o[u])}return p.default=o,c&&c.set(o,p),p}(e("./constants"));function l(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,l=function(){return o},o)}function h(o){return(h=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var m="defaultCanvas0",i=(s.default.prototype.createCanvas=function(o,c,b){s.default._validateParameters("createCanvas",arguments);var p,g,v,b=b||n.P2D;if(b===n.WEBGL)(g=document.getElementById(m))&&(g.parentNode.removeChild(g),p=this._renderer,this._elements=this._elements.filter(function(x){return x!==p})),(g=document.createElement("canvas")).id=m,g.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)g=this.canvas;else{g=document.createElement("canvas");for(var _=0;document.getElementById("defaultCanvas".concat(_));)_++;m="defaultCanvas".concat(_),g.id=m,g.classList.add("p5Canvas")}return this._setupDone||(g.dataset.hidden=!0,g.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(v=document.createElement("main"),document.body.appendChild(v)),document.getElementsByTagName("main")[0])).appendChild(g),b===n.WEBGL?(this._setProperty("_renderer",new s.default.RendererGL(g,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new s.default.Renderer2D(g,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(o,c),this._renderer._applyDefaults(),this._renderer},s.default.prototype.resizeCanvas=function(o,c,u){if(s.default._validateParameters("resizeCanvas",arguments),this._renderer){var p,g,v={};for(p in this.drawingContext){var b=this.drawingContext[p];h(b)!=="object"&&typeof b!="function"&&(v[p]=b)}for(g in this._renderer.resize(o,c),this.width=o,this.height=c,v)try{this.drawingContext[g]=v[g]}catch{}u||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},s.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},s.default.prototype.createGraphics=function(o,c,u){return s.default._validateParameters("createGraphics",arguments),new s.default.Graphics(o,c,u,this)},s.default.prototype.blendMode=function(o){s.default._validateParameters("blendMode",arguments),o===n.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),o=n.BLEND),this._renderer.blendMode(o)},s.default);f.default=i},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}function s(o){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=i(e("../main")),l=function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var c=m();if(c&&c.has(o))return c.get(o);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o){var v;Object.prototype.hasOwnProperty.call(o,u)&&((v=g?Object.getOwnPropertyDescriptor(o,u):null)&&(v.get||v.set)?Object.defineProperty(p,u,v):p[u]=o[u])}return p.default=o,c&&c.set(o,p),p}(e("../constants")),h=i(e("../helpers"));function m(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,m=function(){return o},o)}function i(o){return o&&o.__esModule?o:{default:o}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),n.default.prototype._normalizeArcAngles=function(o,c,u,p,g){var v;return o-=l.TWO_PI*Math.floor(o/l.TWO_PI),c-=l.TWO_PI*Math.floor(c/l.TWO_PI),v=Math.min(Math.abs(o-c),l.TWO_PI-Math.abs(o-c)),g&&(o=o<=l.HALF_PI?Math.atan(u/p*Math.tan(o)):o>l.HALF_PI&&o<=3*l.HALF_PI?Math.atan(u/p*Math.tan(o))+l.PI:Math.atan(u/p*Math.tan(o))+l.TWO_PI,c=c<=l.HALF_PI?Math.atan(u/p*Math.tan(c)):c>l.HALF_PI&&c<=3*l.HALF_PI?Math.atan(u/p*Math.tan(c))+l.PI:Math.atan(u/p*Math.tan(c))+l.TWO_PI),c<o&&(c+=l.TWO_PI),{start:o,stop:c,correspondToSamePoint:v<1e-5}},n.default.prototype.arc=function(o,c,u,p,g,v,b,_){return n.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&g!==v&&(g=this._toRadians(g),v=this._toRadians(v),u=Math.abs(u),p=Math.abs(p),o=h.default.modeAdjust(o,c,u,p,this._renderer._ellipseMode),(c=this._normalizeArcAngles(g,v,o.w,o.h,!0)).correspondToSamePoint?this._renderer.ellipse([o.x,o.y,o.w,o.h,_]):(this._renderer.arc(o.x,o.y,o.w,o.h,c.start,c.stop,b,_),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[o.x,o.y,o.w,o.h,c.start,c.stop,b]))),this},n.default.prototype.ellipse=function(o,c,u,p,g){return n.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},n.default.prototype.circle=function(){n.default._validateParameters("circle",arguments);var o=Array.prototype.slice.call(arguments,0,2);return o.push(arguments[2]),o.push(arguments[2]),this._renderEllipse.apply(this,o)},n.default.prototype._renderEllipse=function(o,c,u,p,g){return(this._renderer._doStroke||this._renderer._doFill)&&(u<0&&(u=Math.abs(u)),p===void 0?p=u:p<0&&(p=Math.abs(p)),o=h.default.modeAdjust(o,c,u,p,this._renderer._ellipseMode),this._renderer.ellipse([o.x,o.y,o.w,o.h,g]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[o.x,o.y,o.w,o.h])),this},n.default.prototype.line=function(){for(var o,c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return n.default._validateParameters("line",u),this._renderer._doStroke&&(o=this._renderer).line.apply(o,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",u),this},n.default.prototype.point=function(){for(var o,c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return n.default._validateParameters("point",u),this._renderer._doStroke&&(u.length===1&&u[0]instanceof n.default.Vector?this._renderer.point.call(this._renderer,u[0].x,u[0].y,u[0].z):((o=this._renderer).point.apply(o,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",u))),this},n.default.prototype.quad=function(){for(var o,c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return n.default._validateParameters("quad",u),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&u.length<=12?this._renderer.quad.call(this._renderer,u[0],u[1],0,u[2],u[3],0,u[4],u[5],0,u[6],u[7],0,u[8],u[9]):((o=this._renderer).quad.apply(o,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",u))),this},n.default.prototype.rect=function(){return n.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},n.default.prototype.square=function(o,c,u,p,g,v,b){return n.default._validateParameters("square",arguments),this._renderRect.call(this,o,c,u,u,p,g,v,b)},n.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var o=h.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),c=[o.x,o.y,o.w,o.h],u=4;u<arguments.length;u++)c[u]=arguments[u];this._renderer.rect(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[o.x,o.y,o.w,o.h])}return this},n.default.prototype.triangle=function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return n.default._validateParameters("triangle",c),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",c),this},e=n.default,f.default=e},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}n.default.prototype.ellipseMode=function(i){return n.default._validateParameters("ellipseMode",arguments),i!==l.CORNER&&i!==l.CORNERS&&i!==l.RADIUS&&i!==l.CENTER||(this._renderer._ellipseMode=i),this},n.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},n.default.prototype.rectMode=function(i){return n.default._validateParameters("rectMode",arguments),i!==l.CORNER&&i!==l.CORNERS&&i!==l.RADIUS&&i!==l.CENTER||(this._renderer._rectMode=i),this},n.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},n.default.prototype.strokeCap=function(i){return n.default._validateParameters("strokeCap",arguments),i!==l.ROUND&&i!==l.SQUARE&&i!==l.PROJECT||this._renderer.strokeCap(i),this},n.default.prototype.strokeJoin=function(i){return n.default._validateParameters("strokeJoin",arguments),i!==l.ROUND&&i!==l.BEVEL&&i!==l.MITER||this._renderer.strokeJoin(i),this},n.default.prototype.strokeWeight=function(i){return n.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(i),this};var m=n.default;f.default=m},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(s=e("../main"))&&s.__esModule?s:{default:s};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var n,l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];return a.default._validateParameters("bezier",h),(this._renderer._doStroke||this._renderer._doFill)&&(n=this._renderer).bezier.apply(n,h),this},a.default.prototype.bezierDetail=function(n){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=n,this},a.default.prototype.bezierPoint=function(n,l,h,m,i){a.default._validateParameters("bezierPoint",arguments);var o=1-i;return Math.pow(o,3)*n+3*Math.pow(o,2)*i*l+3*o*Math.pow(i,2)*h+Math.pow(i,3)*m},a.default.prototype.bezierTangent=function(n,l,h,m,i){a.default._validateParameters("bezierTangent",arguments);var o=1-i;return 3*m*Math.pow(i,2)-3*h*Math.pow(i,2)+6*h*o*i-6*l*o*i+3*l*Math.pow(o,2)-3*n*Math.pow(o,2)},a.default.prototype.curve=function(){for(var n,l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];return a.default._validateParameters("curve",h),this._renderer._doStroke&&(n=this._renderer).curve.apply(n,h),this},a.default.prototype.curveDetail=function(n){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=n<3?3:n,this},a.default.prototype.curveTightness=function(n){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=n,this},a.default.prototype.curvePoint=function(n,l,h,m,i){a.default._validateParameters("curvePoint",arguments);var o=i*i*i,c=i*i;return n*(-.5*o+c-.5*i)+l*(1.5*o-2.5*c+1)+h*(-1.5*o+2*c+.5*i)+m*(.5*o-.5*c)},a.default.prototype.curveTangent=function(n,l,h,m,i){a.default._validateParameters("curveTangent",arguments);var o=i*i;return n*(-3*o/2+2*i-.5)+l*(9*o/2-5*i)+h*(-9*o/2+4*i+.5)+m*(3*o/2-i)};var s=a.default;f.default=s},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(e,d,f){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function s(_){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(_)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(b=e("../main"))&&b.__esModule?b:{default:b},l=function(_){if(_&&_.__esModule)return _;if(_===null||s(_)!=="object"&&typeof _!="function")return{default:_};var x=h();if(x&&x.has(_))return x.get(_);var A,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in _){var C;Object.prototype.hasOwnProperty.call(_,A)&&((C=T?Object.getOwnPropertyDescriptor(_,A):null)&&(C.get||C.set)?Object.defineProperty(E,A,C):E[A]=_[A])}return E.default=_,x&&x.set(_,E),E}(e("../constants"));function h(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,h=function(){return _},_)}var m=null,i=[],o=[],c=!1,u=!1,p=!1,g=!1,v=!0,b=(n.default.prototype.beginContour=function(){return o=[],g=!0,this},n.default.prototype.beginShape=function(_){var x;return n.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(x=this._renderer).beginShape.apply(x,arguments):(m=_===l.POINTS||_===l.LINES||_===l.TRIANGLES||_===l.TRIANGLE_FAN||_===l.TRIANGLE_STRIP||_===l.QUADS||_===l.QUAD_STRIP?_:null,i=[],o=[]),this},n.default.prototype.bezierVertex=function(){for(var _,x=arguments.length,A=new Array(x),E=0;E<x;E++)A[E]=arguments[E];if(n.default._validateParameters("bezierVertex",A),this._renderer.isP3D)(_=this._renderer).bezierVertex.apply(_,A);else if(i.length===0)n.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{c=!0;for(var T=[],C=0;C<A.length;C++)T[C]=A[C];T.isVert=!1,(g?o:i).push(T)}return this},n.default.prototype.curveVertex=function(){for(var _,x=arguments.length,A=new Array(x),E=0;E<x;E++)A[E]=arguments[E];return n.default._validateParameters("curveVertex",A),this._renderer.isP3D?(_=this._renderer).curveVertex.apply(_,A):(u=!0,this.vertex(A[0],A[1])),this},n.default.prototype.endContour=function(){var _=o[0].slice();_.isVert=o[0].isVert,_.moveTo=!1,o.push(_),v&&(i.push(i[0]),v=!1);for(var x=0;x<o.length;x++)i.push(o[x]);return this},n.default.prototype.endShape=function(_){if(n.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(_,u,c,p,g,m);else{if(i.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var x=_===l.CLOSE;x&&!g&&i.push(i[0]),this._renderer.endShape(_,i,u,c,p,g,m),v=!(g=p=c=u=!1),x&&i.pop()}return this},n.default.prototype.quadraticVertex=function(){for(var _,x=arguments.length,A=new Array(x),E=0;E<x;E++)A[E]=arguments[E];if(n.default._validateParameters("quadraticVertex",A),this._renderer.isP3D)(_=this._renderer).quadraticVertex.apply(_,A);else{if(this._contourInited)return(_={}).x=A[0],_.y=A[1],_.x3=A[2],_.y3=A[3],_.type=l.QUADRATIC,this._contourVertices.push(_),this;if(0<i.length){p=!0;for(var T=[],C=0;C<A.length;C++)T[C]=A[C];T.isVert=!1,(g?o:i).push(T)}else n.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},n.default.prototype.vertex=function(_,x,A,E,T){var C;return this._renderer.isP3D?(C=this._renderer).vertex.apply(C,arguments):((C=[]).isVert=!0,C[0]=_,C[1]=x,C[2]=0,C[3]=0,C[4]=0,C[5]=this._renderer._getFill(),C[6]=this._renderer._getStroke(),A&&(C.moveTo=A),(g?(o.length===0&&(C.moveTo=!0),o):i).push(C)),this},n.default.prototype.normal=function(_,x,A){var E;return this._assert3d("normal"),n.default._validateParameters("normal",arguments),(E=this._renderer).normal.apply(E,arguments),this},n.default);f.default=b},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(e,d,f){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(m)}function s(m){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(i){return a(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":a(i)})(m)}var n,l,h;e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m,i){window.setTimeout(m,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(n=Object.keys,e=Object.defineProperty,l=typeof Symbol=="function"&&s(Symbol())==="symbol",h=Object.prototype.propertyIsEnumerable,e(Object,"assign",{value:function(m,i){if(m==null)throw new TypeError("target must be an object");for(var o,c,u,p=Object(m),g=1;g<arguments.length;++g)for(o=Object(arguments[g]),u=n(o),l&&Object.getOwnPropertySymbols&&u.push.apply(u,Object.getOwnPropertySymbols(o).filter(function(v){return function(b){return h.call(v,b)}}(o))),c=0;c<u.length;++c)p[u[c]]=o[u[c]];return p},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(e,d,f){e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("./main"))&&e.__esModule?e:{default:e},e.default.prototype.noLoop=function(){this._loop=!1},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},e.default.prototype.pop=function(){var a=this._styles.pop();a?(this._renderer.pop(a.renderer),Object.assign(this,a.props)):console.warn("pop() was called without matching push()")},e.default.prototype.redraw=function(a){if(!this._inUserDraw&&this._setupDone){var s=parseInt(a),n=((isNaN(s)||s<1)&&(s=1),this._isGlobal?window:this);if(typeof n.draw=="function"){n.setup===void 0&&n.scale(n._pixelDensity,n._pixelDensity);for(var l=function(m){m.call(n)},h=0;h<s;h++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(l),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(l)}}}},e=e.default,f.default=e},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("./main"))&&e.__esModule?e:{default:e};function s(n){return function(l){if(Array.isArray(l)){for(var h=0,m=new Array(l.length);h<l.length;h++)m[h]=l[h];return m}}(n)||function(l){if(Symbol.iterator in Object(l)||Object.prototype.toString.call(l)==="[object Arguments]")return Array.from(l)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var n=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||n?(n=this._renderer).applyMatrix.apply(n,s(arguments[0])):(n=this._renderer).applyMatrix.apply(n,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(n,l){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(n),l),this},a.default.prototype.rotateX=function(n){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(n)),this},a.default.prototype.rotateY=function(n){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(n)),this},a.default.prototype.rotateZ=function(n){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(n)),this},a.default.prototype.scale=function(n,l,h){var m;return a.default._validateParameters("scale",arguments),n instanceof a.default.Vector?(n=(m=n).x,l=m.y,h=m.z):n instanceof Array&&(n=(m=n)[0],l=m[1],h=m[2]||1),isNaN(l)?l=h=n:isNaN(h)&&(h=1),this._renderer.scale.call(this._renderer,n,l,h),this},a.default.prototype.shearX=function(n){return a.default._validateParameters("shearX",arguments),n=this._toRadians(n),this._renderer.applyMatrix(1,0,Math.tan(n),1,0,0),this},a.default.prototype.shearY=function(n){return a.default._validateParameters("shearY",arguments),n=this._toRadians(n),this._renderer.applyMatrix(1,Math.tan(n),0,1,0,0),this},a.default.prototype.translate=function(n,l,h){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(n,l,h):this._renderer.translate(n,l),this},e=a.default,f.default=e},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(e,d,f){function a(h){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var s=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(h){return function(m){if(Array.isArray(m)){for(var i=0,o=new Array(m.length);i<m.length;i++)o[i]=m[i];return o}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(h){return(l=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(m){return a(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":a(m)})(h)}s.default.prototype.storeItem=function(h,m){typeof h!="string"&&console.log("The argument that you passed to storeItem() - ".concat(h," is not a string.")),h.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(h," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var i=l(m);switch(i){case"number":case"boolean":m=m.toString();break;case"object":m instanceof s.default.Color?i="p5.Color":m instanceof s.default.Vector&&(i="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(h,m),h="".concat(h,"p5TypeID"),localStorage.setItem(h,i)},s.default.prototype.getItem=function(h){var m=localStorage.getItem(h),i=localStorage.getItem("".concat(h,"p5TypeID"));if(i===void 0)console.log("Unable to determine type of item stored under ".concat(h,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(i){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,n(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,n(m))}return m},s.default.prototype.clearStorage=function(){localStorage.clear()},s.default.prototype.removeItem=function(h){typeof h!="string"&&console.log("The argument that you passed to removeItem() - ".concat(h," is not a string.")),localStorage.removeItem(h),localStorage.removeItem("".concat(h,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.prototype.createStringDict=function(s,n){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(s,n)},a.default.prototype.createNumberDict=function(s,n){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(s,n)},a.default.TypedDict=function(s,n){return s instanceof Object?this.data=s:(this.data={},this.data[s]=n),this},a.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},a.default.TypedDict.prototype.hasKey=function(s){return this.data.hasOwnProperty(s)},a.default.TypedDict.prototype.get=function(s){if(this.data.hasOwnProperty(s))return this.data[s];console.log("".concat(s," does not exist in this Dictionary"))},a.default.TypedDict.prototype.set=function(s,n){this._validate(n)?this.data[s]=n:console.log("Those values dont work for this dictionary type.")},a.default.TypedDict.prototype._addObj=function(s){for(var n in s)this.set(n,s[n])},a.default.TypedDict.prototype.create=function(s,n){s instanceof Object&&n===void 0?this._addObj(s):s!==void 0?this.set(s,n):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},a.default.TypedDict.prototype.clear=function(){this.data={}},a.default.TypedDict.prototype.remove=function(s){if(!this.data.hasOwnProperty(s))throw new Error("".concat(s," does not exist in this Dictionary"));delete this.data[s]},a.default.TypedDict.prototype.print=function(){for(var s in this.data)console.log("key:".concat(s," value:").concat(this.data[s]))},a.default.TypedDict.prototype.saveTable=function(s){var n,l="";for(n in this.data)l+="".concat(n,",").concat(this.data[n],`
`);var h=new Blob([l],{type:"text/csv"});a.default.prototype.downloadFile(h,s||"mycsv","csv")},a.default.TypedDict.prototype.saveJSON=function(s,n){a.default.prototype.saveJSON(this.data,s,n)},a.default.TypedDict.prototype._validate=function(s){return!0},a.default.StringDict=function(){for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];a.default.TypedDict.apply(this,n)},a.default.StringDict.prototype=Object.create(a.default.TypedDict.prototype),a.default.StringDict.prototype._validate=function(s){return typeof s=="string"},a.default.NumberDict=function(){for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];a.default.TypedDict.apply(this,n)},a.default.NumberDict.prototype=Object.create(a.default.TypedDict.prototype),a.default.NumberDict.prototype._validate=function(s){return typeof s=="number"},a.default.NumberDict.prototype.add=function(s,n){this.data.hasOwnProperty(s)?this.data[s]+=n:console.log("The key - ".concat(s," does not exist in this dictionary."))},a.default.NumberDict.prototype.sub=function(s,n){this.add(s,-n)},a.default.NumberDict.prototype.mult=function(s,n){this.data.hasOwnProperty(s)?this.data[s]*=n:console.log("The key - ".concat(s," does not exist in this dictionary."))},a.default.NumberDict.prototype.div=function(s,n){this.data.hasOwnProperty(s)?this.data[s]/=n:console.log("The key - ".concat(s," does not exist in this dictionary."))},a.default.NumberDict.prototype._valueTest=function(s){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var n,l=this.data[Object.keys(this.data)[0]];for(n in this.data)this.data[n]*s<l*s&&(l=this.data[n]);return l},a.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},a.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},a.default.NumberDict.prototype._keyTest=function(s){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var n=Object.keys(this.data)[0],l=1;l<Object.keys(this.data).length;l++)Object.keys(this.data)[l]*s<n*s&&(n=Object.keys(this.data)[l]);return n},a.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},a.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},e=a.default.TypedDict,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(i){return(n=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}function l(i,o,c){return(o._userNode||document.body).appendChild(i),c=new(c?s.default.MediaElement:s.default.Element)(i,o),o._elements.push(c),c}function h(i,v,c,u){var p=document.createElement(v),g=(typeof(c=c||"")=="string"&&(c=[c]),!0),v=!1,b=void 0;try{for(var _,x=c[Symbol.iterator]();!(g=(_=x.next()).done);g=!0){var A=_.value,E=document.createElement("source");E.setAttribute("src",A),p.appendChild(E)}}catch(C){v=!0,b=C}finally{try{g||x.return==null||x.return()}finally{if(v)throw b}}typeof u=="function"&&p.addEventListener("canplaythrough",function C(){u(),p.removeEventListener("canplaythrough",C)});var T=l(p,i,!0);return T.loadedmetadata=!1,p.addEventListener("loadedmetadata",function(){T.width=p.videoWidth,T.height=p.videoHeight,T.elt.width===0&&(T.elt.width=p.videoWidth),T.elt.height===0&&(T.elt.height=p.videoHeight),T.presetPlaybackRate&&(T.elt.playbackRate=T.presetPlaybackRate,delete T.presetPlaybackRate),T.loadedmetadata=!0}),T}s.default.prototype.select=function(i,o){return s.default._validateParameters("select",arguments),o=this._getContainer(o).querySelector(i),o?this._wrapElement(o):null},s.default.prototype.selectAll=function(i,o){s.default._validateParameters("selectAll",arguments);var c=[],u=this._getContainer(o).querySelectorAll(i);if(u)for(var p=0;p<u.length;p++){var g=this._wrapElement(u[p]);c.push(g)}return c},s.default.prototype._getContainer=function(i){var o=document;return typeof i=="string"?o=document.querySelector(i)||document:i instanceof s.default.Element?o=i.elt:i instanceof HTMLElement&&(o=i),o},s.default.prototype._wrapElement=function(i){var o,c=Array.prototype.slice.call(i.children);return i.tagName==="INPUT"&&i.type==="checkbox"?((o=new s.default.Element(i,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},o):i.tagName==="VIDEO"||i.tagName==="AUDIO"?new s.default.MediaElement(i,this):i.tagName==="SELECT"?this.createSelect(new s.default.Element(i,this)):0<c.length&&c.every(function(u){return u.tagName==="INPUT"||u.tagName==="LABEL"})?this.createRadio(new s.default.Element(i,this)):new s.default.Element(i,this)},s.default.prototype.removeElements=function(i){s.default._validateParameters("removeElements",arguments),this._elements.filter(function(o){return!(o.elt instanceof HTMLCanvasElement)}).map(function(o){return o.remove()})},s.default.Element.prototype.changed=function(i){return s.default.Element._adjustListener("change",i,this),this},s.default.Element.prototype.input=function(i){return s.default.Element._adjustListener("input",i,this),this},s.default.prototype.createDiv=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("div");return o.innerHTML=i,l(o,this)},s.default.prototype.createP=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("p");return o.innerHTML=i,l(o,this)},s.default.prototype.createSpan=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=document.createElement("span");return o.innerHTML=i,l(o,this)},s.default.prototype.createImg=function(){s.default._validateParameters("createImg",arguments);var i,o=document.createElement("img"),c=arguments;return 1<c.length&&typeof c[1]=="string"&&(o.alt=c[1]),2<c.length&&typeof c[2]=="string"&&(o.crossOrigin=c[2]),o.src=c[0],i=l(o,this),o.addEventListener("load",function(){i.width=o.offsetWidth||o.width,i.height=o.offsetHeight||o.height;var u=c[c.length-1];typeof u=="function"&&u(i)}),i},s.default.prototype.createA=function(i,o,c){s.default._validateParameters("createA",arguments);var u=document.createElement("a");return u.href=i,u.innerHTML=o,c&&(u.target=c),l(u,this)},s.default.prototype.createSlider=function(i,o,c,u){s.default._validateParameters("createSlider",arguments);var p=document.createElement("input");return p.type="range",p.min=i,p.max=o,u===0?p.step=1e-18:u&&(p.step=u),typeof c=="number"&&(p.value=c),l(p,this)},s.default.prototype.createButton=function(i,o){s.default._validateParameters("createButton",arguments);var c=document.createElement("button");return c.innerHTML=i,o&&(c.value=o),l(c,this)},s.default.prototype.createCheckbox=function(){s.default._validateParameters("createCheckbox",arguments);var i=document.createElement("div"),o=document.createElement("input"),c=(o.type="checkbox",document.createElement("label")),u=(c.appendChild(o),i.appendChild(c),l(i,this));return u.checked=function(){var p=u.elt.firstElementChild.getElementsByTagName("input")[0];if(p){if(arguments.length===0)return p.checked;p.checked=!!arguments[0]}return u},this.value=function(p){return u.value=p,this},arguments[0]&&(u.value(arguments[0]),(i=document.createElement("span")).innerHTML=arguments[0],c.appendChild(i)),arguments[1]&&(o.checked=!0),u},s.default.prototype.createSelect=function(){s.default._validateParameters("createSelect",arguments);var i,o,c=arguments[0];return c instanceof s.default.Element&&c.elt instanceof HTMLSelectElement?this.elt=(i=c).elt:c instanceof HTMLSelectElement?(i=l(c,this),this.elt=c):(o=document.createElement("select"),c&&typeof c=="boolean"&&o.setAttribute("multiple","true"),i=l(o,this),this.elt=o),i.option=function(u,p){var g;if(u!==void 0){for(var v,b=0;b<this.elt.length;b+=1)if(this.elt[b].textContent===u){g=b;break}g!==void 0?p===!1?this.elt.remove(g):this.elt[g].value=p:((v=document.createElement("option")).textContent=u,v.value=p===void 0?u:p,this.elt.appendChild(v),this._pInst._elements.push(v))}},i.selected=function(u){if(u!==void 0){for(var p=0;p<this.elt.length;p+=1)this.elt[p].value.toString()===u.toString()&&(this.elt.selectedIndex=p);return this}if(this.elt.getAttribute("multiple")){var g=[],v=!0,b=!1,_=void 0;try{for(var x,A=this.elt.selectedOptions[Symbol.iterator]();!(v=(x=A.next()).done);v=!0){var E=x.value;g.push(E.value)}}catch(T){b=!0,_=T}finally{try{v||A.return==null||A.return()}finally{if(b)throw _}}return g}return this.elt.value},i.disable=function(u){if(typeof u=="string")for(var p=0;p<this.elt.length;p++)this.elt[p].value.toString()===u&&(this.elt[p].disabled=!0,this.elt[p].selected=!1);else this.elt.disabled=!0;return this},i},s.default.prototype.createRadio=function(){function i(v){return v instanceof HTMLInputElement&&v.type==="radio"}function o(v){return v instanceof HTMLLabelElement}var c,u,p,g=arguments[0];return g instanceof s.default.Element&&(g.elt instanceof HTMLDivElement||g.elt instanceof HTMLSpanElement)?(c=g,this.elt=g.elt):g instanceof HTMLDivElement||g instanceof HTMLSpanElement?(c=l(g,this),u=this.elt=g,typeof arguments[1]=="string"&&(p=arguments[1])):(typeof g=="string"&&(p=g),u=document.createElement("div"),c=l(u,this),this.elt=u),c._name=p||"radioOption",c._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(v){return i(v)||o(v)&&i(v.firstElementChild)}).map(function(v){return i(v)?v:v.firstElementChild})},c.option=function(v,b){var _,x,A,E=!0,T=!1,C=void 0;try{for(var R,P=c._getOptionsArray()[Symbol.iterator]();!(E=(R=P.next()).done);E=!0){var N=R.value;if(N.value===v){_=N;break}}}catch(k){T=!0,C=k}finally{try{E||P.return==null||P.return()}finally{if(T)throw C}}return _===void 0&&((_=document.createElement("input")).setAttribute("type","radio"),_.setAttribute("value",v)),_.setAttribute("name",c._name),o(_.parentElement)?x=_.parentElement:(x=document.createElement("label")).insertAdjacentElement("afterbegin",_),x.lastElementChild instanceof HTMLSpanElement?A=x.lastElementChild:(A=document.createElement("span"),_.insertAdjacentElement("afterend",A)),A.innerHTML=b===void 0?v:b,this.elt.appendChild(x),_},c.remove=function(v){var b=!0,_=!1,x=void 0;try{for(var A,E=c._getOptionsArray()[Symbol.iterator]();!(b=(A=E.next()).done);b=!0){var T=A.value;if(T.value===v)return void(o(T.parentElement)?T.parentElement:T).remove()}}catch(C){_=!0,x=C}finally{try{b||E.return==null||E.return()}finally{if(_)throw x}}},c.value=function(){var v="",b=!0,_=!1,x=void 0;try{for(var A,E=c._getOptionsArray()[Symbol.iterator]();!(b=(A=E.next()).done);b=!0){var T=A.value;if(T.checked){v=T.value;break}}}catch(C){_=!0,x=C}finally{try{b||E.return==null||E.return()}finally{if(_)throw x}}return v},c.selected=function(v){var b=null;if(v===void 0){var _=!0,x=!1,A=void 0;try{for(var E,T=c._getOptionsArray()[Symbol.iterator]();!(_=(E=T.next()).done);_=!0){var C=E.value;if(C.checked){b=C;break}}}catch(I){x=!0,A=I}finally{try{_||T.return==null||T.return()}finally{if(x)throw A}}}else{c._getOptionsArray().forEach(function(Y){Y.checked=!1,Y.removeAttribute("checked")});var R=!0,x=!1,A=void 0;try{for(var P,N=c._getOptionsArray()[Symbol.iterator]();!(R=(P=N.next()).done);R=!0){var k=P.value;k.value===v&&(k.setAttribute("checked",!0),k.checked=!0,b=k)}}catch(Y){x=!0,A=Y}finally{try{R||N.return==null||N.return()}finally{if(x)throw A}}}return b},c.disable=function(){var v=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],b=!0,_=!1,x=void 0;try{for(var A,E=c._getOptionsArray()[Symbol.iterator]();!(b=(A=E.next()).done);b=!0)A.value.setAttribute("disabled",v)}catch(T){_=!0,x=T}finally{try{b||E.return==null||E.return()}finally{if(_)throw x}}},c},s.default.prototype.createColorPicker=function(i){s.default._validateParameters("createColorPicker",arguments);var o=document.createElement("input");return o.type="color",i?i instanceof s.default.Color?o.value=i.toString("#rrggbb"):(s.default.prototype._colorMode="rgb",s.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},o.value=s.default.prototype.color(i).toString("#rrggbb")):o.value="#000000",(o=l(o,this)).color=function(){return i&&(i.mode&&(s.default.prototype._colorMode=i.mode),i.maxes&&(s.default.prototype._colorMaxes=i.maxes)),s.default.prototype.color(this.elt.value)},o},s.default.prototype.createInput=function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",c=(s.default._validateParameters("createInput",arguments),document.createElement("input"));return c.setAttribute("value",i),c.setAttribute("type",o),l(c,this)},s.default.prototype.createFileInput=function(i){var o,c=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(s.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(o=document.createElement("input")).setAttribute("type","file"),c&&o.setAttribute("multiple",!0),o.addEventListener("change",function(u){var p=!0,g=!1,v=void 0;try{for(var b,_=u.target.files[Symbol.iterator]();!(p=(b=_.next()).done);p=!0){var x=b.value;s.default.File._load(x,i)}}catch(A){g=!0,v=A}finally{try{p||_.return==null||_.return()}finally{if(g)throw v}}},!1),l(o,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},s.default.prototype.createVideo=function(i,o){return s.default._validateParameters("createVideo",arguments),h(this,"video",i,o)},s.default.prototype.createAudio=function(i,o){return s.default._validateParameters("createAudio",arguments),h(this,"audio",i,o)},s.default.prototype.VIDEO="video",s.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(i){var o=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return o?new Promise(function(c,u){o.call(navigator,i,c,u)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),s.default.prototype.createCapture=function(){if(s.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var i,o=!0,c=!0,u=!0,p=!1,g=void 0;try{for(var v,b=arguments[Symbol.iterator]();!(u=(v=b.next()).done);u=!0){var _=v.value;_===s.default.prototype.VIDEO?c=!1:_===s.default.prototype.AUDIO?o=!1:n(_)==="object"?x=_:typeof _=="function"&&(i=_)}}catch(T){p=!0,g=T}finally{try{u||b.return==null||b.return()}finally{if(p)throw g}}var x=x||{video:o,audio:c},A=document.createElement("video"),E=(A.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(x).then(function(T){try{"srcObject"in A?A.srcObject=T:A.src=window.URL.createObjectURL(T)}catch{A.src=T}},console.log),l(A,this,!0));return E.loadedmetadata=!1,A.addEventListener("loadedmetadata",function(){A.play(),A.width?(E.width=A.width,E.height=A.height):(E.width=E.elt.width=A.videoWidth,E.height=E.elt.height=A.videoHeight),E.loadedmetadata=!0,i&&i(A.srcObject)}),E},s.default.prototype.createElement=function(i,o){return s.default._validateParameters("createElement",arguments),i=document.createElement(i),o!==void 0&&(i.innerHTML=o),l(i,this)},s.default.Element.prototype.addClass=function(i){return this.elt.className?this.hasClass(i)||(this.elt.className=this.elt.className+" "+i):this.elt.className=i,this},s.default.Element.prototype.removeClass=function(i){return this.elt.classList.remove(i),this},s.default.Element.prototype.hasClass=function(i){return this.elt.classList.contains(i)},s.default.Element.prototype.toggleClass=function(i){return this.elt.classList.contains(i)?this.elt.classList.remove(i):this.elt.classList.add(i),this},s.default.Element.prototype.child=function(i){return i===void 0?this.elt.childNodes:(typeof i=="string"?(i[0]==="#"&&(i=i.substring(1)),i=document.getElementById(i)):i instanceof s.default.Element&&(i=i.elt),i instanceof HTMLElement&&this.elt.appendChild(i),this)},s.default.Element.prototype.center=function(i){var o=this.elt.style.display,c=this.elt.style.display==="none",u=this.parent().style.display==="none",p={x:this.elt.offsetLeft,y:this.elt.offsetTop},g=(c&&this.show(),u&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),v=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return i==="both"||i===void 0?this.position(g/2+this.parent().offsetLeft,v/2+this.parent().offsetTop):i==="horizontal"?this.position(g/2+this.parent().offsetLeft,p.y):i==="vertical"&&this.position(p.x,v/2+this.parent().offsetTop),this.style("display",o),c&&this.hide(),u&&this.parent().hide(),this},s.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},s.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},s.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var i="";return this.elt.style.transform&&(i=(i=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=i,this},s.default.Element.prototype._rotate=function(){var i="";return this.elt.style.transform&&(i=(i=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=i,this},s.default.Element.prototype.style=function(i,o){if((o=o instanceof s.default.Color?"rgba("+o.levels[0]+","+o.levels[1]+","+o.levels[2]+","+o.levels[3]/255+")":o)===void 0){if(i.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(i);for(var c=i.split(";"),u=0;u<c.length;u++){var p=c[u].split(":");p[0]&&p[1]&&(this.elt.style[p[0].trim()]=p[1].trim())}}else this.elt.style[i]=o,i!=="width"&&i!=="height"&&i!=="left"&&i!=="top"||(o=window.getComputedStyle(this.elt).getPropertyValue(i).replace(/[^\d.]/g,""),this[i]=Math.round(parseFloat(o,10)));return this},s.default.Element.prototype.attribute=function(i,o){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return o===void 0?this.elt.getAttribute(i):(this.elt.setAttribute(i,o),this);if(o===void 0)return this.elt.firstChild.getAttribute(i);for(var c=0;c<this.elt.childNodes.length;c++)this.elt.childNodes[c].setAttribute(i,o)},s.default.Element.prototype.removeAttribute=function(i){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var o=0;o<this.elt.childNodes.length;o++)this.elt.childNodes[o].removeAttribute(i);return this.elt.removeAttribute(i),this},s.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},s.default.Element.prototype.show=function(){return this.elt.style.display="block",this},s.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},s.default.Element.prototype.size=function(i,o){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var c=i,u=o,p=s.default.prototype.AUTO;if(c!==p||u!==p){if(c===p?c=o*this.width/this.height:u===p&&(u=i*this.height/this.width),this.elt instanceof HTMLCanvasElement){var g,v={},b=this.elt.getContext("2d");for(g in b)v[g]=b[g];for(g in this.elt.setAttribute("width",c*this._pInst._pixelDensity),this.elt.setAttribute("height",u*this._pInst._pixelDensity),this.elt.style.width=c+"px",this.elt.style.height=u+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),v)this.elt.getContext("2d")[g]=v[g]}else this.elt.style.width=c+"px",this.elt.style.height=u+"px",this.elt.width=c,this.elt.height=u;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},s.default.Element.prototype.remove=function(){this instanceof s.default.MediaElement&&(this.stop(),(o=this.elt.srcObject)!==null&&o.getTracks().forEach(function(c){c.stop()}));var i,o=this._pInst._elements.indexOf(this);for(i in o!==-1&&this._pInst._elements.splice(o,1),this._events)this.elt.removeEventListener(i,this._events[i]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},s.default.Element.prototype.drop=function(i,o){var c;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",c=function(u){u.preventDefault()}),this.elt.addEventListener("dragleave",c)),s.default.Element._attachListener("drop",function(u){u.preventDefault(),typeof o=="function"&&o.call(this,u);for(var p=u.dataTransfer.files,g=0;g<p.length;g++){var v=p[g];s.default.File._load(v,i)}},this)):console.log("The File APIs are not fully supported in this browser."),this},s.default.MediaElement=function(i,o){s.default.Element.call(this,i,o);var c=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(c,"src",{get:function(){var u=c.elt.children[0].src,p=c.elt.src===window.location.href?"":c.elt.src;return u===window.location.href?p:u},set:function(u){for(var p=0;p<c.elt.children.length;p++)c.elt.removeChild(c.elt.children[p]);var g=document.createElement("source");g.src=u,i.appendChild(g),c.elt.src=u,c.modified=!0}}),c._onended=function(){},c.elt.onended=function(){c._onended(c)}},s.default.MediaElement.prototype=Object.create(s.default.Element.prototype),s.default.MediaElement.prototype.play=function(){var i,o=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(i=this.elt.play())&&i.catch&&i.catch(function(c){c.name==="NotAllowedError"?s.default._friendlyAutoplayError(o.src):console.error("Media play method encountered an unexpected error",c)}),this},s.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},s.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},s.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},s.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},s.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var i=this,o=setTimeout(function(){return s.default._friendlyAutoplayError(i.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(o)},{passive:!0,once:!0})},s.default.MediaElement.prototype.autoplay=function(i){var o=this,c=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",i),i&&!c&&(i=function(){return o._setupAutoplayFailDetection()},this.elt.readyState===4?i():this.elt.addEventListener("canplay",i,{passive:!0,once:!0})),this},s.default.MediaElement.prototype.volume=function(i){if(i===void 0)return this.elt.volume;this.elt.volume=i},s.default.MediaElement.prototype.speed=function(i){if(i===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=i:this.presetPlaybackRate=i},s.default.MediaElement.prototype.time=function(i){return i===void 0?this.elt.currentTime:(this.elt.currentTime=i,this)},s.default.MediaElement.prototype.duration=function(){return this.elt.duration},s.default.MediaElement.prototype.pixels=[],s.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},s.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),s.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},s.default.MediaElement.prototype.updatePixels=function(i,o,c,u){return this.loadedmetadata&&(this._ensureCanvas(),s.default.Renderer2D.prototype.updatePixels.call(this,i,o,c,u)),this.setModified(!0),this},s.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),s.default.Renderer2D.prototype.get.apply(this,arguments)},s.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),s.default.Renderer2D.prototype._getPixel.apply(this,arguments)},s.default.MediaElement.prototype.set=function(i,o,c){this.loadedmetadata&&(this._ensureCanvas(),s.default.Renderer2D.prototype.set.call(this,i,o,c),this.setModified(!0))},s.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),s.default.prototype.copy.apply(this,arguments)},s.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),s.default.Image.prototype.mask.apply(this,arguments)},s.default.MediaElement.prototype.isModified=function(){return this._modified},s.default.MediaElement.prototype.setModified=function(i){this._modified=i},s.default.MediaElement.prototype.onended=function(i){return this._onended=i,this},s.default.MediaElement.prototype.connect=function(i){var o,c;if(typeof s.default.prototype.getAudioContext=="function")o=s.default.prototype.getAudioContext(),c=s.default.soundOut.input;else try{c=(o=i.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=o.createMediaElementSource(this.elt),this.audioSourceNode.connect(c)),i?i.input?this.audioSourceNode.connect(i.input):this.audioSourceNode.connect(i):this.audioSourceNode.connect(c)},s.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},s.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},s.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function m(i,o,c,u){this.callback=i,this.time=o,this.id=c,this.val=u}s.default.MediaElement.prototype.addCue=function(i,p,c){var u=this._cueIDCounter++,p=new m(p,i,u,c);return this._cues.push(p),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),u},s.default.MediaElement.prototype.removeCue=function(i){for(var o=0;o<this._cues.length;o++)this._cues[o].id===i&&(console.log(i),this._cues.splice(o,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},s.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},s.default.MediaElement.prototype._onTimeUpdate=function(){for(var i=this.time(),o=0;o<this._cues.length;o++){var c=this._cues[o].time,u=this._cues[o].val;this._prevTime<c&&c<=i&&this._cues[o].callback(u)}this._prevTime=i},s.default.File=function(i,o){this.file=i,this._pInst=o,o=i.type.split("/"),this.type=o[0],this.subtype=o[1],this.name=i.name,this.size=i.size,this.data=void 0},s.default.File._createLoader=function(i,o){var c=new FileReader;return c.onload=function(u){var p,g=new s.default.File(i);g.file.type==="application/json"?g.data=JSON.parse(u.target.result):g.file.type==="text/xml"?(p=new DOMParser().parseFromString(u.target.result,"text/xml"),g.data=new s.default.XML(p.documentElement)):g.data=u.target.result,o(g)},c},s.default.File._load=function(i,o){var c;/^text\//.test(i.type)||i.type==="application/json"?s.default.File._createLoader(i,o).readAsText(i):/^(video|audio)\//.test(i.type)?((c=new s.default.File(i)).data=URL.createObjectURL(i),o(c)):s.default.File._createLoader(i,o).readAsDataURL(i)},e=s.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(e,d,f){function a(_){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function s(_){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(x){return a(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":a(x)})(_)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(b=e("../core/main"))&&b.__esModule?b:{default:b},l=function(_){if(_&&_.__esModule)return _;if(_===null||s(_)!=="object"&&typeof _!="function")return{default:_};var x=h();if(x&&x.has(_))return x.get(_);var A,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in _){var C;Object.prototype.hasOwnProperty.call(_,A)&&((C=T?Object.getOwnPropertyDescriptor(_,A):null)&&(C.get||C.set)?Object.defineProperty(E,A,C):E[A]=_[A])}return E.default=_,x&&x.set(_,E),E}(e("../core/constants"));function h(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,h=function(){return _},_)}n.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",n.default.prototype.accelerationX=0,n.default.prototype.accelerationY=0,n.default.prototype.accelerationZ=0,n.default.prototype.pAccelerationX=0,n.default.prototype.pAccelerationY=0,n.default.prototype.pAccelerationZ=0,n.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},n.default.prototype.rotationX=0,n.default.prototype.rotationY=0,n.default.prototype.rotationZ=0,n.default.prototype.pRotationX=0,n.default.prototype.pRotationY=0;var m=n.default.prototype.pRotationZ=0,i=0,o=0,c="clockwise",u="clockwise",p="clockwise",g=(n.default.prototype.pRotateDirectionX=void 0,n.default.prototype.pRotateDirectionY=void 0,n.default.prototype.pRotateDirectionZ=void 0,n.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},n.default.prototype.turnAxis=void 0,.5),v=30,b=(n.default.prototype.setMoveThreshold=function(_){n.default._validateParameters("setMoveThreshold",arguments),g=_},n.default.prototype.setShakeThreshold=function(_){n.default._validateParameters("setShakeThreshold",arguments),v=_},n.default.prototype._ondeviceorientation=function(_){this._updatePRotations(),this._angleMode===l.radians&&(_.beta=_.beta*(_PI/180),_.gamma=_.gamma*(_PI/180),_.alpha=_.alpha*(_PI/180)),this._setProperty("rotationX",_.beta),this._setProperty("rotationY",_.gamma),this._setProperty("rotationZ",_.alpha),this._handleMotion()},n.default.prototype._ondevicemotion=function(_){this._updatePAccelerations(),this._setProperty("accelerationX",2*_.acceleration.x),this._setProperty("accelerationY",2*_.acceleration.y),this._setProperty("accelerationZ",2*_.acceleration.z),this._handleMotion()},n.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var _,x,A,E,T,C=this._isGlobal?window:this;typeof C.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&C.deviceMoved(),typeof C.deviceTurned=="function"&&(x=this.rotationX+180,_=this.pRotationX+180,A=m+180,0<x-_&&x-_<270||x-_<-270?c="clockwise":(x-_<0||270<x-_)&&(c="counter-clockwise"),c!==this.pRotateDirectionX&&(A=x),90<Math.abs(x-A)&&Math.abs(x-A)<270&&(A=x,this._setProperty("turnAxis","X"),C.deviceTurned()),this.pRotateDirectionX=c,m=A-180,_=this.rotationY+180,x=this.pRotationY+180,A=i+180,0<_-x&&_-x<270||_-x<-270?u="clockwise":(_-x<0||270<_-this.pRotationY)&&(u="counter-clockwise"),u!==this.pRotateDirectionY&&(A=_),90<Math.abs(_-A)&&Math.abs(_-A)<270&&(A=_,this._setProperty("turnAxis","Y"),C.deviceTurned()),this.pRotateDirectionY=u,i=A-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?p="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(p="counter-clockwise"),p!==this.pRotateDirectionZ&&(o=this.rotationZ),90<Math.abs(this.rotationZ-o)&&Math.abs(this.rotationZ-o)<270&&(o=this.rotationZ,this._setProperty("turnAxis","Z"),C.deviceTurned()),this.pRotateDirectionZ=p,this._setProperty("turnAxis",void 0)),typeof C.deviceShaken=="function"&&(this.pAccelerationX!==null&&(E=Math.abs(this.accelerationX-this.pAccelerationX),T=Math.abs(this.accelerationY-this.pAccelerationY)),v<E+T&&C.deviceShaken())},n.default);f.default=b},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(s){var n;this._downKeys[s.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",s.which),this._downKeys[s.which]=!0,this._setProperty("key",s.key||String.fromCharCode(s.which)||s.which),typeof(n=this._isGlobal?window:this).keyPressed!="function"||s.charCode||n.keyPressed(s)===!1&&s.preventDefault())},a.default.prototype._onkeyup=function(s){this._downKeys[s.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",s.key||String.fromCharCode(s.which)||s.which),this._setProperty("keyCode",s.which);var n=this._isGlobal?window:this;typeof n.keyReleased=="function"&&n.keyReleased(s)===!1&&s.preventDefault()},a.default.prototype._onkeypress=function(s){var n;s.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",s.which),this._setProperty("key",s.key||String.fromCharCode(s.which)||s.which),typeof(n=this._isGlobal?window:this).keyTyped=="function"&&n.keyTyped(s)===!1&&s.preventDefault())},a.default.prototype._onblur=function(s){this._downKeys={}},a.default.prototype.keyIsDown=function(s){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[s]||!1},a.default.prototype._areDownKeys=function(){for(var s in this._downKeys)if(this._downKeys.hasOwnProperty(s)&&this._downKeys[s]===!0)return!0;return!1},e=a.default,f.default=e},{"../core/main":267}],286:[function(e,d,f){function a(m){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(m)}function s(m){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(i){return a(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":a(i)})(m)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(n=e("../core/main"))&&n.__esModule?n:{default:n},l=function(m){if(m&&m.__esModule)return m;if(m===null||s(m)!=="object"&&typeof m!="function")return{default:m};var i=h();if(i&&i.has(m))return i.get(m);var o,c={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in m){var p;Object.prototype.hasOwnProperty.call(m,o)&&((p=u?Object.getOwnPropertyDescriptor(m,o):null)&&(p.get||p.set)?Object.defineProperty(c,o,p):c[o]=m[o])}return c.default=m,i&&i.set(m,c),c}(e("../core/constants"));function h(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,h=function(){return m},m)}n.default.prototype.movedX=0,n.default.prototype.movedY=0,n.default.prototype._hasMouseInteracted=!1,n.default.prototype.mouseX=0,n.default.prototype.mouseY=0,n.default.prototype.pmouseX=0,n.default.prototype.pmouseY=0,n.default.prototype.winMouseX=0,n.default.prototype.winMouseY=0,n.default.prototype.pwinMouseX=0,n.default.prototype.pwinMouseY=0,n.default.prototype.mouseButton=0,n.default.prototype.mouseIsPressed=!1,n.default.prototype._updateNextMouseCoords=function(m){var i,o,c,u,p;this._curElement!==null&&(!m.touches||0<m.touches.length)&&(i=this._curElement.elt,o=this.width,c=this.height,(u=m)&&!u.clientX&&(u.touches?u=u.touches[0]:u.changedTouches&&(u=u.changedTouches[0])),p=i.getBoundingClientRect(),o=i.scrollWidth/o||1,i=i.scrollHeight/c||1,c={x:(u.clientX-p.left)/o,y:(u.clientY-p.top)/i,winX:u.clientX,winY:u.clientY,id:u.identifier},this._setProperty("movedX",m.movementX),this._setProperty("movedY",m.movementY),this._setProperty("mouseX",c.x),this._setProperty("mouseY",c.y),this._setProperty("winMouseX",c.winX),this._setProperty("winMouseY",c.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},n.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},n.default.prototype._setMouseButton=function(m){m.button===1?this._setProperty("mouseButton",l.CENTER):m.button===2?this._setProperty("mouseButton",l.RIGHT):this._setProperty("mouseButton",l.LEFT)},n.default.prototype._onmousemove=function(m){var i=this._isGlobal?window:this;this._updateNextMouseCoords(m),this.mouseIsPressed?typeof i.mouseDragged=="function"?i.mouseDragged(m)===!1&&m.preventDefault():typeof i.touchMoved=="function"&&i.touchMoved(m)===!1&&m.preventDefault():typeof i.mouseMoved=="function"&&i.mouseMoved(m)===!1&&m.preventDefault()},n.default.prototype._onmousedown=function(m){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(m),this._updateNextMouseCoords(m),typeof i.mousePressed=="function"?i.mousePressed(m)===!1&&m.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof i.touchStarted=="function"&&i.touchStarted(m)===!1&&m.preventDefault()},n.default.prototype._onmouseup=function(m){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof i.mouseReleased=="function"?i.mouseReleased(m)===!1&&m.preventDefault():typeof i.touchEnded=="function"&&i.touchEnded(m)===!1&&m.preventDefault()},n.default.prototype._ondragend=n.default.prototype._onmouseup,n.default.prototype._ondragover=n.default.prototype._onmousemove,n.default.prototype._onclick=function(m){var i=this._isGlobal?window:this;typeof i.mouseClicked=="function"&&i.mouseClicked(m)===!1&&m.preventDefault()},n.default.prototype._ondblclick=function(m){var i=this._isGlobal?window:this;typeof i.doubleClicked=="function"&&i.doubleClicked(m)===!1&&m.preventDefault()},n.default.prototype._mouseWheelDeltaY=0,n.default.prototype._pmouseWheelDeltaY=0,n.default.prototype._onwheel=function(m){var i=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",m.deltaY),typeof i.mouseWheel=="function"&&(m.delta=m.deltaY,i.mouseWheel(m)===!1&&m.preventDefault())},n.default.prototype.requestPointerLock=function(){var m=this._curElement.elt;return m.requestPointerLock=m.requestPointerLock||m.mozRequestPointerLock,m.requestPointerLock?(m.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},n.default.prototype.exitPointerLock=function(){document.exitPointerLock()},e=n.default,f.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(e,d,f){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(a){if(this._curElement!==null){for(var s=[],n=0;n<a.touches.length;n++)s[n]=function(p,u,g,i){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,c=p.getBoundingClientRect(),u=p.scrollWidth/u||1,p=p.scrollHeight/g||1,g=i.touches[o]||i.changedTouches[o];return{x:(g.clientX-c.left)/u,y:(g.clientY-c.top)/p,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,a,n);this._setProperty("touches",s)}},e.default.prototype._ontouchstart=function(a){var s=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(a),this._updateNextMouseCoords(a),this._updateMouseCoords(),typeof s.touchStarted=="function"?s.touchStarted(a)===!1&&a.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof s.mousePressed=="function"&&s.mousePressed(a)===!1&&a.preventDefault()},e.default.prototype._ontouchmove=function(a){var s=this._isGlobal?window:this;this._updateTouchCoords(a),this._updateNextMouseCoords(a),typeof s.touchMoved=="function"?s.touchMoved(a)===!1&&a.preventDefault():typeof s.mouseDragged=="function"&&s.mouseDragged(a)===!1&&a.preventDefault()},e.default.prototype._ontouchend=function(a){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(a),this._updateNextMouseCoords(a);var s=this._isGlobal?window:this;typeof s.touchEnded=="function"?s.touchEnded(a)===!1&&a.preventDefault():typeof s.mouseReleased=="function"&&s.mouseReleased(a)===!1&&a.preventDefault()},e=e.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(e,d,f){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a,s,n,l,h={};function m(i,o){for(var c,u,p,g,v,b,_,x,A,E,T=h._toPixels(i),C=i.width,R=i.height,P=C*R,N=new Int32Array(P),k=0;k<P;k++)N[k]=h._getARGB(T,k);var I,B,Y,W=new Int32Array(P),H=new Int32Array(P),X=new Int32Array(P),Z=new Int32Array(P),q=0,ee=3.5*o|0;if(a!==(ee=ee<1?1:ee<248?ee:248)){s=1+(a=ee)<<1,n=new Int32Array(s),l=new Array(s);for(var L,O,U=0;U<s;U++)l[U]=new Int32Array(256);for(var V=1,J=ee-1;V<ee;V++){n[ee+V]=n[J]=O=J*J;for(var le=l[ee+V],ce=l[J--],ue=0;ue<256;ue++)le[ue]=ce[ue]=O*ue}L=n[ee]=ee*ee,le=l[ee];for(var re=0;re<256;re++)le[re]=L*re}for(B=0;B<R;B++){for(I=0;I<C;I++){if(g=p=u=v=c=0,(b=I-a)<0)E=-b,b=0;else{if(C<=b)break;E=0}for(Y=E;Y<s&&!(C<=b);Y++){var de,ve=N[b+q];v+=(de=l[Y])[(-16777216&ve)>>>24],u+=de[(16711680&ve)>>16],p+=de[(65280&ve)>>8],g+=de[255&ve],c+=n[Y],b++}W[_=q+I]=v/c,H[_]=u/c,X[_]=p/c,Z[_]=g/c}q+=C}for(A=(x=-a)*C,B=q=0;B<R;B++){for(I=0;I<C;I++){if(x<(g=p=u=v=c=0))E=_=-x,b=I;else{if(R<=x)break;E=0,_=x,b=I+A}for(Y=E;Y<s&&!(R<=_);Y++)v+=(de=l[Y])[W[b]],u+=de[H[b]],p+=de[X[b]],g+=de[Z[b]],c+=n[Y],_++,b+=C;N[I+q]=v/c<<24|u/c<<16|p/c<<8|g/c}q+=C,A+=C,x++}h._setPixels(T,N)}h._toPixels=function(i){var o,c;return i instanceof ImageData?i.data:i.getContext("2d")?i.getContext("2d").getImageData(0,0,i.width,i.height).data:i.getContext("webgl")?(c=(o=i.getContext("webgl")).drawingBufferWidth*o.drawingBufferHeight*4,c=new Uint8Array(c),o.readPixels(0,0,i.width,i.height,o.RGBA,o.UNSIGNED_BYTE,c),c):void 0},h._getARGB=function(i,o){return o*=4,i[3+o]<<24&4278190080|i[o]<<16&16711680|i[1+o]<<8&65280|255&i[2+o]},h._setPixels=function(i,o){for(var c,u=0,p=i.length;u<p;u++)i[0+(c=4*u)]=(16711680&o[u])>>>16,i[1+c]=(65280&o[u])>>>8,i[2+c]=255&o[u],i[3+c]=(4278190080&o[u])>>>24},h._toImageData=function(i){return i instanceof ImageData?i:i.getContext("2d").getImageData(0,0,i.width,i.height)},h._createImageData=function(i,o){return h._tmpCanvas=document.createElement("canvas"),h._tmpCtx=h._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(i,o)},h.apply=function(i,g,c){var u=i.getContext("2d"),p=u.getImageData(0,0,i.width,i.height),g=g(p,c);g instanceof ImageData?u.putImageData(g,0,0,0,0,i.width,i.height):u.putImageData(p,0,0,0,0,i.width,i.height)},h.threshold=function(i,o){for(var c=h._toPixels(i),u=(o===void 0&&(o=.5),Math.floor(255*o)),p=0;p<c.length;p+=4){var g=void 0,g=u<=.2126*c[p]+.7152*c[p+1]+.0722*c[p+2]?255:0;c[p]=c[p+1]=c[p+2]=g}},h.gray=function(i){for(var o=h._toPixels(i),c=0;c<o.length;c+=4){var u=o[c],p=o[c+1],g=o[c+2];o[c]=o[c+1]=o[c+2]=.2126*u+.7152*p+.0722*g}},h.opaque=function(i){for(var o=h._toPixels(i),c=0;c<o.length;c+=4)o[c+3]=255;return o},h.invert=function(i){for(var o=h._toPixels(i),c=0;c<o.length;c+=4)o[c]=255-o[c],o[c+1]=255-o[c+1],o[c+2]=255-o[c+2]},h.posterize=function(i,o){var c=h._toPixels(i);if(o<2||255<o)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var u=o-1,p=0;p<c.length;p+=4){var g=c[p],v=c[p+1],b=c[p+2];c[p]=255*(g*o>>8)/u,c[p+1]=255*(v*o>>8)/u,c[p+2]=255*(b*o>>8)/u}},h.dilate=function(i){for(var o,c,u,p,g,v,b,_,x,A=h._toPixels(i),E=0,T=A.length?A.length/4:0,C=new Int32Array(T);E<T;)for(c=(o=E)+i.width;E<c;)p=u=h._getARGB(A,E),(x=E-1)<o&&(x=E),c<=(_=E+1)&&(_=E),(g=E-i.width)<0&&(g=0),T<=(v=E+i.width)&&(v=E),g=h._getARGB(A,g),x=h._getARGB(A,x),v=h._getARGB(A,v),(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(b=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))&&(u=x,p=b),p<(b=77*((x=h._getARGB(A,_))>>16&255)+151*(x>>8&255)+28*(255&x))&&(u=x,p=b),p<(_=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(u=g,p=_),p<(x=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))&&(u=v,p=x),C[E++]=u;h._setPixels(A,C)},h.erode=function(i){for(var o,c,u,p,g,v,b,_,x,A=h._toPixels(i),E=0,T=A.length?A.length/4:0,C=new Int32Array(T);E<T;)for(c=(o=E)+i.width;E<c;)p=u=h._getARGB(A,E),(x=E-1)<o&&(x=E),c<=(_=E+1)&&(_=E),(g=E-i.width)<0&&(g=0),T<=(v=E+i.width)&&(v=E),g=h._getARGB(A,g),x=h._getARGB(A,x),v=h._getARGB(A,v),(b=77*(x>>16&255)+151*(x>>8&255)+28*(255&x))<(p=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(u=x,p=b),(b=77*((x=h._getARGB(A,_))>>16&255)+151*(x>>8&255)+28*(255&x))<p&&(u=x,p=b),(_=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<p&&(u=g,p=_),(x=77*(v>>16&255)+151*(v>>8&255)+28*(255&v))<p&&(u=v,p=x),C[E++]=u;h._setPixels(A,C)},h.blur=function(i,o){m(i,o)},f.default=h},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=n(e("../core/main")),s=n(e("omggif"));function n(h){return h&&h.__esModule?h:{default:h}}function l(h){return function(m){if(Array.isArray(m)){for(var i=0,o=new Array(m.length);i<m.length;i++)o[i]=m[i];return o}}(h)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.createImage=function(h,m){return a.default._validateParameters("createImage",arguments),new a.default.Image(h,m)},a.default.prototype.saveCanvas=function(){a.default._validateParameters("saveCanvas",arguments);var h,m,i,o,c=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(h=arguments[0],c.shift()):arguments[0]instanceof a.default.Element?(h=arguments[0].elt,c.shift()):h=this._curElement&&this._curElement.elt,1<=c.length&&(m=c[0]),i=(i=2<=c.length?c[1]:i)||a.default.prototype._checkFileExtension(m,i)[1]||"png"){default:o="image/png";break;case"jpeg":case"jpg":o="image/jpeg"}h.toBlob(function(u){a.default.prototype.downloadFile(u,m,i)},o)},a.default.prototype.encodeAndDownloadGif=function(h,m){for(var i=h.gifProperties,o=i.loopLimit,c=(o===1?o=null:o===null&&(o=0),new Uint8Array(h.width*h.height*i.numFrames)),u=[],p={},g=0;g<i.numFrames;g++){for(var v=new Set,b=i.frames[g].image.data,_=b.length,x=new Uint32Array(h.width*h.height),A=0,E=0;A<_;A+=4,E++){var T=b[A+0]<<16|b[A+1]<<8|b[A+2]<<0;v.add(T),x[E]=T}var C=l(v).sort().toString();p[C]===void 0?p[C]={freq:1,frames:[g]}:(p[C].freq+=1,p[C].frames.push(g)),u.push(x)}for(var N=[],R=Object.keys(p).sort(function(L,O){return p[O].freq-p[L].freq}),P=R[0].split(",").map(function(L){return parseInt(L)}),N=N.concat(p[P].frames),k=new Set(P),I=1;I<R.length;I++){var B=R[I].split(",").map(function(L){return parseInt(L)}).filter(function(L){return!k.has(L)});if(P.length+B.length<=256){for(var Y=0;Y<B.length;Y++)P.push(B[Y]),k.add(B[Y]);N=N.concat(p[R[I]].frames)}}N=new Set(N);for(var W={},H=0;H<P.length;H++)W[P[H]]||(W[P[H]]=H);for(var X=1;X<P.length;)X<<=1;P.length=X;for(var o={loop:o,palette:new Uint32Array(P)},Z=new s.default.GifWriter(c,h.width,h.height,o),q={},ee=0;ee<i.numFrames;ee++)(function(O){for(var U=!N.has(O),V=U?[]:P,J=new Uint8Array(h.width*h.height),le={},ce=new Set,ue=0;ue<u[O].length;ue++){var re=u[O][ue];U?(le[re]===void 0&&(le[re]=V.length,V.push(re)),J[ue]=le[re]):J[ue]=W[re],0<O&&u[O-1][ue]!==re&&ce.add(re)}var de={},ve=V.filter(function(Te){return!ce.has(Te)});if(0<ve.length){var ve=ve[0],ie=(U?le:W)[ve];if(0<O){for(var _e=0;_e<u[O].length;_e++)u[O-1][_e]===u[O][_e]&&(J[_e]=ie);de.transparent=ie,q.frameOpts.disposal=1}}if(de.delay=i.frames[O].delay/10,U){for(var Se=1;Se<V.length;)Se<<=1;V.length=Se,de.palette=new Uint32Array(V)}0<O&&Z.addFrame(0,0,h.width,h.height,q.pixelPaletteIndex,q.frameOpts),q={pixelPaletteIndex:J,frameOpts:de}})(ee);q.frameOpts.disposal=1,Z.addFrame(0,0,h.width,h.height,q.pixelPaletteIndex,q.frameOpts),o=new Blob([c.slice(0,Z.end())],{type:"image/gif"}),a.default.prototype.downloadFile(o,m,"gif")},a.default.prototype.saveFrames=function(h,m,i,u,c){a.default._validateParameters("saveFrames",arguments),i=a.default.prototype.constrain(i=i||3,0,15),i*=1e3;var u=a.default.prototype.constrain(u||15,0,22),p=0,g=a.default.prototype._makeFrame,v=this._curElement.elt,b=[],_=setInterval(function(){b.push(g(h+p,m,v)),p++},1e3/u);setTimeout(function(){if(clearInterval(_),c)c(b);else{var x=!0,A=!1,E=void 0;try{for(var T,C=b[Symbol.iterator]();!(x=(T=C.next()).done);x=!0){var R=T.value;a.default.prototype.downloadFile(R.imageData,R.filename,R.ext)}}catch(P){A=!0,E=P}finally{try{x||C.return==null||C.return()}finally{if(A)throw E}}}b=[]},.01+i)},a.default.prototype._makeFrame=function(h,m,c){var o,c=this?this._curElement.elt:c;if(m)switch(m.toLowerCase()){case"png":o="image/png";break;case"jpeg":case"jpg":o="image/jpeg";break;default:o="image/png"}else m="png",o="image/png";var c=(c=c.toDataURL(o)).replace(o,"image/octet-stream"),u={};return u.imageData=c,u.filename=h,u.ext=m,u},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(e,d,f){function a(v){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(v)}function s(v){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(b){return a(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":a(b)})(v)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e("regenerator-runtime/runtime");var n=c(e("../core/main")),l=c(e("../core/helpers")),h=function(v){if(v&&v.__esModule)return v;if(v===null||s(v)!=="object"&&typeof v!="function")return{default:v};var b=o();if(b&&b.has(v))return b.get(v);var _,x={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in v){var E;Object.prototype.hasOwnProperty.call(v,_)&&((E=A?Object.getOwnPropertyDescriptor(v,_):null)&&(E.get||E.set)?Object.defineProperty(x,_,E):x[_]=v[_])}return x.default=v,b&&b.set(v,x),x}(e("../core/constants")),m=c(e("omggif")),i=e("gifenc");function o(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,o=function(){return v},v)}function c(v){return v&&v.__esModule?v:{default:v}}function u(v,b,_,x,A,E,T){try{var C=v[E](T),R=C.value}catch(P){return void _(P)}C.done?b(R):Promise.resolve(R).then(x,A)}function p(v,b,_,x,A,E,T,C,R,P,N){var k,I,B,Y,W,H,X,Z,q;return v===h.COVER&&(k=b,B=_,X=E,Z=T,H=C,q=R,I=P,Y=N,W=Math.max(X/I,Z/Y),X/=W,Z/=W,W=H,H=q,k===h.CENTER?W+=(I-X)/2:k===h.RIGHT&&(W+=I-X),B===h.CENTER?H+=(Y-Z)/2:B===h.BOTTOM&&(H+=Y-Z),C=(q={x:W,y:H,w:X,h:Z}).x,R=q.y,P=q.w,N=q.h),v===h.CONTAIN&&(k=b,I=_,B=x,Y=A,W=E,H=T,X=P,Z=N,q=Math.max(X/W,Z/H),X/=q,Z/=q,q=B,B=Y,k===h.CENTER?q+=(W-X)/2:k===h.RIGHT&&(q+=W-X),I===h.CENTER?B+=(H-Z)/2:I===h.BOTTOM&&(B+=H-Z),x=(v={x:q,y:B,w:X,h:Z}).x,A=v.y,E=v.w,T=v.h),{sx:C,sy:R,sw:P,sh:N,dx:x,dy:A,dw:E,dh:T}}function g(v,b){return 0<v&&v<b?v:b}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.loadImage=function(v,b,_){n.default._validateParameters("loadImage",arguments);var x=new n.default.Image(1,1,this),A=this,E=new Request(v,{method:"GET",mode:"cors"});return fetch(v,E).then(function(T){var C,R=T.headers.get("content-type");R===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),R&&R.includes("image/gif")?T.arrayBuffer().then(function(P){if(P){var P=new Uint8Array(P),N=x,k=b,I=_,B=function(U){A._decrementPreload()}.bind(A),Y=new m.default.GifReader(P),W=(N.width=N.canvas.width=Y.width,N.height=N.canvas.height=Y.height,[]),H=Y.numFrames(),X=new Uint8ClampedArray(N.width*N.height*4);if(1<H){for(var Z=0;Z<H;Z++){var q=Y.frameInfo(Z),ee=N.drawingContext.getImageData(0,0,N.width,N.height),L=(X=ee.data.slice(),function(U,V){try{V.decodeAndBlitFrameRGBA(U,X)}catch(J){n.default._friendlyFileLoadError(8,N.src),typeof I=="function"?I(J):console.error(J)}}(Z,Y),new ImageData(X,N.width,N.height)),L=(N.drawingContext.putImageData(L,0,0),q.delay);L===0&&(L=10),W.push({image:N.drawingContext.getImageData(0,0,N.width,N.height),delay:10*L}),q.disposal===2?N.drawingContext.clearRect(q.x,q.y,q.width,q.height):q.disposal===3&&N.drawingContext.putImageData(ee,0,0,q.x,q.y,q.width,q.height)}P=Y.loopCount(),P===null?P=1:P===0&&(P=null),N.drawingContext.putImageData(W[0].image,0,0),N.gifProperties={displayIndex:0,loopLimit:P,loopCount:0,frames:W,numFrames:H,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof k=="function"&&k(N),B()}},function(P){typeof _=="function"?_(P):console.error(P)}):((C=new Image).onload=function(){x.width=x.canvas.width=C.width,x.height=x.canvas.height=C.height,x.drawingContext.drawImage(C,0,0),x.modified=!0,typeof b=="function"&&b(x),A._decrementPreload()},C.onerror=function(P){n.default._friendlyFileLoadError(0,C.src),typeof _=="function"?_(P):console.error(P)},v.indexOf("data:image/")!==0&&(C.crossOrigin="Anonymous"),C.src=v),x.modified=!0}).catch(function(T){n.default._friendlyFileLoadError(0,v),typeof _=="function"?_(T):console.error(T)}),x},n.default.prototype.saveGif=function(){v=regeneratorRuntime.mark(function _(x,A){var E,T,C,R,P,N,k,I,B,Y,W,H,X,Z,q,ee,L,O,U,V,J,le,ce,ue,re,de=arguments;return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(E=2<de.length&&de[2]!==void 0?de[2]:{delay:0,units:"seconds"},typeof x!="string")throw TypeError("fileName parameter must be a string");ve.next=3;break;case 3:if(typeof A!="number")throw TypeError("Duration parameter must be a number");ve.next=5;break;case 5:if(typeof E.delay!="number")throw TypeError("Delay parameter must be a number");ve.next=7;break;case 7:if(E.units!=="seconds"&&E.units!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ve.next=9;break;case 9:N=E.units,P=E.delay,R=this._targetFrameRate,T=(T=1/(R=R!==1/0&&R!==void 0&&R!==0?R:60)*1e3)<20?20:T,R=(C=N==="seconds"?A*R:A)+(N=N==="seconds"?P*R:P),P=N,this.frameCount=P,N=this._pixelDensity,this.pixelDensity(1),k=[],I="p5.gif.progressBar",document.getElementById(I)!==null&&document.getElementById(I).remove(),(I=this.createP("")).id("progressBar"),I.style("font-size","16px"),I.style("font-family","Montserrat"),I.style("background-color","#ffffffa0"),I.style("padding","8px"),I.style("border-radius","10px"),I.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(Y=document.getElementById("defaultCanvas0").getContext("webgl"),B=new Uint8Array(Y.drawingBufferWidth*Y.drawingBufferHeight*4)),this.noLoop();case 35:if(P<R)return this.redraw(),q=void 0,q=this.drawingContext instanceof WebGLRenderingContext?(B=new Uint8Array(Y.drawingBufferWidth*Y.drawingBufferHeight*4),Y.readPixels(0,0,Y.drawingBufferWidth,Y.drawingBufferHeight,Y.RGBA,Y.UNSIGNED_BYTE,B),function(ie){for(var _e=parseInt(height/2),Se=4*width,Te=new Uint8Array(4*width),we=0;we<_e;++we){var De=we*Se,Ie=(height-we-1)*Se;Te.set(ie.subarray(De,De+Se)),ie.copyWithin(De,Ie,Ie+Se),ie.set(Te,Ie)}return ie}(B)):this.drawingContext.getImageData(0,0,this.width,this.height).data,k.push(q),P++,I.html("Saved frame <b>"+k.length.toString()+"</b> out of "+C.toString()),ve.next=44,new Promise(function(ie){return setTimeout(ie,0)});ve.next=46;break;case 44:ve.next=35;break;case 46:I.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(N),W=(0,i.GIFEncoder)(),H=function(ie){for(var _e=new Uint8Array(ie.length*ie[0].length),Se=0;Se<ie.length;Se++)_e.set(ie[0],Se*ie[0].length);var Te=(0,i.quantize)(_e,256,{format:"rgba444",oneBitAlpha:!0});return Te.length===256?Te[Te.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Te.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Te}(k),X=H.length-1,Z=0;case 53:if(Z<k.length){if(Z===0)return q=(0,i.applyPalette)(k[Z],H,{format:"rgba4444"}),W.writeFrame(q,this.width,this.height,{palette:H,delay:T,dispose:1}),ve.abrupt("continue",68);ve.next=58}else ve.next=71;break;case 58:for(ee=k[Z],L=k[Z-1],O=[],U=0;U<ee.length;U+=4)V=[ee[U],ee[U+1],ee[U+2],ee[U+3]],J=[L[U],L[U+1],L[U+2],L[U+3]],!function(ie,_e){return Array.isArray(ie)&&Array.isArray(_e)&&ie.length===_e.length&&ie.every(function(Se,Te){return Se===_e[Te]})}(V,J)||O.push(U/4);for(le=(0,i.applyPalette)(ee,H,{format:"rgba4444"}),ce=0;ce<O.length;ce++)ue=O[ce],le[ue]=X;return W.writeFrame(le,this.width,this.height,{delay:T,transparent:!0,transparentIndex:X,dispose:1}),I.html("Rendered frame <b>"+Z.toString()+"</b> out of "+C.toString()),ve.next=68,new Promise(function(ie){return setTimeout(ie,0)});case 68:Z++,ve.next=53;break;case 71:W.finish(),re=W.bytesView(),re=new Blob([re],{type:"image/gif"}),k=[],this.loop(),I.html("Done. Downloading your gif!🌸"),n.default.prototype.downloadFile(re,x,"gif");case 79:case"end":return ve.stop()}},_,this)});var v,b=function(){var _=this,x=arguments;return new Promise(function(A,E){var T=v.apply(_,x);function C(P){u(T,A,E,C,R,"next",P)}function R(P){u(T,A,E,C,R,"throw",P)}C(void 0)})};return function(_,x){return b.apply(this,arguments)}}(),n.default.prototype.image=function(v,b,_,x,Y,W,H,X,q,P,N,k){n.default._validateParameters("image",arguments);var Z=v.width,I=v.height,B=(k=k||h.CENTER,N=N||h.CENTER,v.elt&&v.elt.videoWidth&&!v.canvas&&(Z=v.elt.videoWidth,I=v.elt.videoHeight),x||Z),Y=Y||I,W=W||0,H=H||0,X=g(X||Z,Z),Z=g(q||I,I),q=1;v.elt&&!v.canvas&&v.elt.style.width&&(q=v.elt.videoWidth&&!x?v.elt.videoWidth:v.elt.width,q/=parseInt(v.elt.style.width,10)),W*=q,H*=q,Z*=q,X*=q,I=p(P,N,k,(I=l.default.modeAdjust(b,_,B,Y,this._renderer._imageMode)).x,I.y,I.w,I.h,W,H,X,Z),this._renderer.image(v,I.sx,I.sy,I.sw,I.sh,I.dx,I.dy,I.dw,I.dh)},n.default.prototype.tint=function(){for(var v=arguments.length,b=new Array(v),_=0;_<v;_++)b[_]=arguments[_];n.default._validateParameters("tint",b);var x=this.color.apply(this,b);this._renderer._tint=x.levels},n.default.prototype.noTint=function(){this._renderer._tint=null},n.default.prototype._getTintedImageCanvas=n.default.Renderer2D.prototype._getTintedImageCanvas,n.default.prototype.imageMode=function(v){n.default._validateParameters("imageMode",arguments),v!==h.CORNER&&v!==h.CORNERS&&v!==h.CENTER||(this._renderer._imageMode=v)},e=n.default,f.default=e},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.every":151,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=n(e("../core/main")),s=n(e("./filters"));function n(l){return l&&l.__esModule?l:{default:l}}a.default.Image=function(l,h){this.width=l,this.height=h,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},a.default.Image.prototype._animateGif=function(i){var h,m=this.gifProperties,i=i._lastFrameTime;m.lastChangeTime===0&&(m.lastChangeTime=i),m.playing&&(m.timeDisplayed=i-m.lastChangeTime,h=m.frames[m.displayIndex].delay,m.timeDisplayed>=h&&(h=Math.floor(m.timeDisplayed/h),m.timeDisplayed=0,m.lastChangeTime=i,m.displayIndex+=h,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(i=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[i].image,0,0),m.displayIndex=i,this.setModified(!0))))},a.default.Image.prototype._setProperty=function(l,h){this[l]=h,this.setModified(!0)},a.default.Image.prototype.loadPixels=function(){a.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},a.default.Image.prototype.updatePixels=function(l,h,m,i){a.default.Renderer2D.prototype.updatePixels.call(this,l,h,m,i),this.setModified(!0)},a.default.Image.prototype.get=function(l,h,m,i){return a.default._validateParameters("p5.Image.get",arguments),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.Image.prototype._getPixel=a.default.Renderer2D.prototype._getPixel,a.default.Image.prototype.set=function(l,h,m){a.default.Renderer2D.prototype.set.call(this,l,h,m),this.setModified(!0)},a.default.Image.prototype.resize=function(l,h){l===0&&h===0?(l=this.canvas.width,h=this.canvas.height):l===0?l=this.canvas.width*h/this.canvas.height:h===0&&(h=this.canvas.height*l/this.canvas.width),l=Math.floor(l),h=Math.floor(h);var m=document.createElement("canvas");if(m.width=l,m.height=h,this.gifProperties)for(var i=this.gifProperties,o=0;o<i.numFrames;o++){for(var c=this.drawingContext.createImageData(l,h),u=(_=_=b=v=g=void 0,i.frames[o].image),p=c,g=0,v=0;v<p.height;v++)for(var b=0;b<p.width;b++){var _=Math.floor(b*u.width/p.width),_=4*(Math.floor(v*u.height/p.height)*u.width+_);p.data[g++]=u.data[_++],p.data[g++]=u.data[_++],p.data[g++]=u.data[_++],p.data[g++]=u.data[+_]}i.frames[o].image=c}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=l,this.canvas.height=this.height=h,this.drawingContext.drawImage(m,0,0,l,h,0,0,l,h),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},a.default.Image.prototype.copy=function(){for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];a.default.prototype.copy.apply(this,h)},a.default.Image.prototype.mask=function(l){var h=this.drawingContext.globalCompositeOperation,m=1,i=[l=l===void 0?this:l,0,0,(m=l instanceof a.default.Renderer?l._pInst._pixelDensity:m)*l.width,m*l.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var o=0;o<this.gifProperties.frames.length;o++)this.drawingContext.putImageData(this.gifProperties.frames[o].image,0,0),a.default.Image.prototype.copy.apply(this,i),this.gifProperties.frames[o].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else a.default.Image.prototype.copy.apply(this,i);this.drawingContext.globalCompositeOperation=h,this.setModified(!0)},a.default.Image.prototype.filter=function(l,h){s.default.apply(this.canvas,s.default[l],h),this.setModified(!0)},a.default.Image.prototype.blend=function(){for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];a.default._validateParameters("p5.Image.blend",arguments),a.default.prototype.blend.apply(this,h),this.setModified(!0)},a.default.Image.prototype.setModified=function(l){this._modified=l},a.default.Image.prototype.isModified=function(){return this._modified},a.default.Image.prototype.save=function(l,h){this.gifProperties?a.default.prototype.encodeAndDownloadGif(this,l):a.default.prototype.saveCanvas(this.canvas,l,h)},a.default.Image.prototype.reset=function(){var l;this.gifProperties&&((l=this.gifProperties).playing=!0,l.timeSinceStart=0,l.timeDisplayed=0,l.lastChangeTime=0,l.loopCount=0,l.displayIndex=0,this.drawingContext.putImageData(l.frames[0].image,0,0))},a.default.Image.prototype.getCurrentFrame=function(){var l;if(this.gifProperties)return(l=this.gifProperties).displayIndex%l.numFrames},a.default.Image.prototype.setFrame=function(l){var h;this.gifProperties&&(l<(h=this.gifProperties).numFrames&&0<=l?(h.timeDisplayed=0,h.lastChangeTime=0,h.displayIndex=l,this.drawingContext.putImageData(h.frames[l].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},a.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},a.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},a.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},a.default.Image.prototype.delay=function(l,h){if(this.gifProperties){var m=this.gifProperties;if(h<m.numFrames&&0<=h)m.frames[h].delay=l;else{var i=!0,h=!1,o=void 0;try{for(var c,u=m.frames[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)c.value.delay=l}catch(g){h=!0,o=g}finally{try{i||u.return==null||u.return()}finally{if(h)throw o}}}}},e=a.default.Image,f.default=e},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(e,d,f){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=n(e("../core/main")),s=n(e("./filters"));function n(l){return l&&l.__esModule?l:{default:l}}e("../color/p5.Color"),a.default.prototype.pixels=[],a.default.prototype.blend=function(){for(var l,h=arguments.length,m=new Array(h),i=0;i<h;i++)m[i]=arguments[i];a.default._validateParameters("blend",m),this._renderer?(l=this._renderer).blend.apply(l,m):a.default.Renderer2D.prototype.blend.apply(this,m)},a.default.prototype.copy=function(){for(var l,h,m,i,o,c,u,p,g,v=arguments.length,b=new Array(v),_=0;_<v;_++)b[_]=arguments[_];if(a.default._validateParameters("copy",b),b.length===9)l=b[0],h=b[1],m=b[2],i=b[3],o=b[4],c=b[5],u=b[6],p=b[7],g=b[8];else{if(b.length!==8)throw new Error("Signature not supported");l=this,h=b[0],m=b[1],i=b[2],o=b[3],c=b[4],u=b[5],p=b[6],g=b[7]}a.default.prototype._copyHelper(this,l,h,m,i,o,c,u,p,g)},a.default.prototype._copyHelper=function(l,h,m,i,o,c,u,p,g,v){h.loadPixels();var b=h.canvas.width/h.width,_=0,x=0;h._renderer&&h._renderer.isP3D&&(_=h.width/2,x=h.height/2),l._renderer&&l._renderer.isP3D?a.default.RendererGL.prototype.image.call(l._renderer,h,m+_,i+x,o,c,u,p,g,v):l.drawingContext.drawImage(h.canvas,b*(m+_),b*(i+x),b*o,b*c,u,p,g,v)},a.default.prototype.filter=function(l,h){a.default._validateParameters("filter",arguments),this.canvas!==void 0?s.default.apply(this.canvas,s.default[l],h):s.default.apply(this.elt,s.default[l],h)},a.default.prototype.get=function(l,h,m,i){var o;return a.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},a.default.prototype.loadPixels=function(){for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];a.default._validateParameters("loadPixels",h),this._renderer.loadPixels()},a.default.prototype.set=function(l,h,m){this._renderer.set(l,h,m)},a.default.prototype.updatePixels=function(l,h,m,i){a.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(l,h,m,i)},e=a.default,f.default=e},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(e,d,f){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=h(e("../core/main")),n=(e("whatwg-fetch"),e("es6-promise/auto"),h(e("fetch-jsonp"))),l=h(e("file-saver"));function h(c){return c&&c.__esModule?c:{default:c}}function m(c){return(m=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(u){return a(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":a(u)})(c)}function i(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(c,u){u&&u!==!0&&u!=="true"||(u="");var p="";return(c=c||"untitled")&&c.includes(".")&&(p=c.split(".").pop()),u&&p!==u&&(p=u,c="".concat(c,".").concat(p)),[c,p]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),s.default.prototype.loadJSON=function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];s.default._validateParameters("loadJSON",u);for(var g,v,b,_=u[0],x={},A="json",E=1;E<u.length;E++){var T=u[E];typeof T=="string"?T!=="jsonp"&&T!=="json"||(A=T):typeof T=="function"?g?v=T:g=T:m(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(A="jsonp",b=T)}var C=this;return this.httpDo(_,"GET",b,A,function(R){for(var P in R)x[P]=R[P];g!==void 0&&g(R),C._decrementPreload()},function(R){if(s.default._friendlyFileLoadError(5,_),!v)throw R;v(R)}),x},s.default.prototype.loadStrings=function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];s.default._validateParameters("loadStrings",u);for(var g,v,b=[],_=1;_<u.length;_++){var x=u[_];typeof x=="function"&&(g===void 0?g=x:v===void 0&&(v=x))}var A=this;return s.default.prototype.httpDo.call(this,u[0],"GET","text",function(E){for(var T=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),C=0,R=T.length;C<R;C+=32768)Array.prototype.push.apply(b,T.slice(C,Math.min(C+32768,R)));g!==void 0&&g(b),A._decrementPreload()},function(E){if(s.default._friendlyFileLoadError(3,E),!v)throw E;v(E)}),b},s.default.prototype.loadTable=function(c){var u,p,g,v=!1,b=c.substring(c.lastIndexOf(".")+1,c.length);b==="csv"?g=",":b==="ssv"?g=";":b==="tsv"&&(g="	");for(var _=1;_<arguments.length;_++)typeof arguments[_]=="function"?u===void 0?u=arguments[_]:p===void 0&&(p=arguments[_]):typeof arguments[_]=="string"&&(arguments[_]==="header"&&(v=!0),arguments[_]==="csv"?g=",":arguments[_]==="ssv"?g=";":arguments[_]==="tsv"&&(g="	"));var x=new s.default.Table,A=this;return this.httpDo(c,"GET","table",function(E){for(var T,C,R={},P=0,N=[],k=0,I=null,B=function(){R.currentState=P,R.token=""},Y=function(){I.push(R.token),B()},W=function(){R.currentState=4,N.push(I),I=null};;){if((T=E[k++])==null){if(R.escaped)throw new Error("Unclosed quote in file.");if(I){Y(),W();break}}if(I===null&&(R.escaped=!1,I=[],B()),R.currentState===P){if(T==='"'){R.escaped=!0,R.currentState=1;continue}R.currentState=1}if(R.currentState===1&&R.escaped)if(T==='"')E[k]==='"'?(R.token+='"',k++):(R.escaped=!1,R.currentState=2);else{if(T==="\r")continue;R.token+=T}else T==="\r"?(E[k]===`
`&&k++,Y(),W()):T===`
`?(Y(),W()):T===g?Y():R.currentState===1&&(R.token+=T)}if(v)x.columns=N.shift();else for(var H=0;H<N[0].length;H++)x.columns[H]="null";for(var X=0;X<N.length;X++)(N[X].length!==1||N[X][0]!=="undefined"&&N[X][0]!=="")&&((C=new s.default.TableRow).arr=N[X],C.obj=function(Z,q){var ee={};if((q=q||[])===void 0)for(var L=0;L<Z.length;L++)q[L.toString()]=L;for(var O=0;O<q.length;O++){var U=q[O],V=Z[O];ee[U]=V}return ee}(N[X],x.columns),x.addRow(C));typeof u=="function"&&u(x),A._decrementPreload()},function(E){s.default._friendlyFileLoadError(2,c),p?p(E):console.error(E)}),x},s.default.prototype.loadXML=function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];for(var g,v,b=new s.default.XML,_=1;_<u.length;_++){var x=u[_];typeof x=="function"&&(g===void 0?g=x:v===void 0&&(v=x))}var A=this;return this.httpDo(u[0],"GET","xml",function(E){for(var T in E)b[T]=E[T];g!==void 0&&g(b),A._decrementPreload()},function(E){if(s.default._friendlyFileLoadError(1,E),!v)throw E;v(E)}),b},s.default.prototype.loadBytes=function(c,u,p){var g={},v=this;return this.httpDo(c,"GET","arrayBuffer",function(b){g.bytes=new Uint8Array(b),typeof u=="function"&&u(g),v._decrementPreload()},function(b){if(s.default._friendlyFileLoadError(6,c),!p)throw b;p(b)}),g},s.default.prototype.httpGet=function(){s.default._validateParameters("httpGet",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"GET"),s.default.prototype.httpDo.apply(this,c)},s.default.prototype.httpPost=function(){s.default._validateParameters("httpPost",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"POST"),s.default.prototype.httpDo.apply(this,c)},s.default.prototype.httpDo=function(){for(var c,u,p,g={},v=0,b="text/plain",_=arguments.length-1;0<_&&typeof(_<0||arguments.length<=_?void 0:arguments[_])=="function";_--)v++;var x=arguments.length-v,A=arguments.length<=0?void 0:arguments[0];if(x==2&&typeof A=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")N=new Request(A,arguments.length<=1?void 0:arguments[1]),u=arguments.length<=2?void 0:arguments[2],p=arguments.length<=3?void 0:arguments[3];else{for(var E,T="GET",C=1;C<arguments.length;C++){var R=C<0||arguments.length<=C?void 0:arguments[C];if(typeof R=="string")R==="GET"||R==="POST"||R==="PUT"||R==="DELETE"?T=R:R==="json"||R==="jsonp"||R==="binary"||R==="arrayBuffer"||R==="xml"||R==="text"||R==="table"?c=R:E=R;else if(typeof R=="number")E=R.toString();else if(m(R)==="object")if(R.hasOwnProperty("jsonpCallback")||R.hasOwnProperty("jsonpCallbackFunction"))for(var P in R)g[P]=R[P];else b=R instanceof s.default.XML?(E=R.serialize(),"application/xml"):(E=JSON.stringify(R),"application/json");else typeof R=="function"&&(u?p=R:u=R)}var x=T==="GET"?new Headers:new Headers({"Content-Type":b}),N=new Request(A,{method:T,mode:"cors",body:E,headers:x})}return(x=(x=(c=c||(A.includes("json")?"json":A.includes("xml")?"xml":"text"))==="jsonp"?(0,n.default)(A,g):fetch(N)).then(function(k){if(!k.ok)throw(I=new Error(k.body)).status=k.status,I.ok=!1,I;var I=0;switch((I=c!=="jsonp"?k.headers.get("content-length"):I)&&64e6<I&&s.default._friendlyFileLoadError(7,A),c){case"json":case"jsonp":return k.json();case"binary":return k.blob();case"arrayBuffer":return k.arrayBuffer();case"xml":return k.text().then(function(B){return B=new DOMParser().parseFromString(B,"text/xml"),new s.default.XML(B.documentElement)});default:return k.text()}})).then(u||function(){}),x.catch(p||console.error),x},window.URL=window.URL||window.webkitURL,s.default.prototype._pWriters=[],s.default.prototype.createWriter=function(c,u){var p,g;for(g in s.default.prototype._pWriters)if(s.default.prototype._pWriters[g].name===c)return p=new s.default.PrintWriter(c+this.millis(),u),s.default.prototype._pWriters.push(p),p;return p=new s.default.PrintWriter(c,u),s.default.prototype._pWriters.push(p),p},s.default.PrintWriter=function(c,u){var p=this;this.name=c,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g,v=[];for(g in v.push(this.content),s.default.prototype.writeFile(v,c,u),s.default.prototype._pWriters)s.default.prototype._pWriters[g].name===this.name&&s.default.prototype._pWriters.splice(g,1);p.clear(),p={}}},s.default.prototype.save=function(c,u,p){var g=arguments,v=(this._curElement||this).elt;if(g.length===0)s.default.prototype.saveCanvas(v);else if(g[0]instanceof s.default.Renderer||g[0]instanceof s.default.Graphics)s.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")s.default.prototype.saveCanvas(v,g[0]);else switch(o(g[1],g[2])[1]){case"json":return void s.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void s.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?s.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof s.default.Table?s.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof s.default.Image?s.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof s.default.SoundFile&&s.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},s.default.prototype.saveJSON=function(c,u,p){s.default._validateParameters("saveJSON",arguments),p=p?JSON.stringify(c):JSON.stringify(c,void 0,2),this.saveStrings(p.split(`
`),u,"json")},s.default.prototype.saveJSONObject=s.default.prototype.saveJSON,s.default.prototype.saveJSONArray=s.default.prototype.saveJSON,s.default.prototype.saveStrings=function(c,u,p,g){s.default._validateParameters("saveStrings",arguments);for(var v=this.createWriter(u,p||"txt"),b=0;b<c.length;b++)g?v.write(c[b]+`\r
`):v.write(c[b]+`
`);v.close(),v.clear()},s.default.prototype.saveTable=function(c,u,p){s.default._validateParameters("saveTable",arguments),g=p===void 0?u.substring(u.lastIndexOf(".")+1,u.length):p;var g,v=this.createWriter(u,g),b=c.columns,_=g==="tsv"?"	":",";if(g!=="html"){if(b[0]!=="0"){for(var x=0;x<b.length;x++)x<b.length-1?v.write(b[x]+_):v.write(b[x]);v.write(`
`)}for(var A=0;A<c.rows.length;A++){for(var E=void 0,E=0;E<c.rows[A].arr.length;E++)E<c.rows[A].arr.length-1?g==="csv"&&String(c.rows[A].arr[E]).includes(",")?v.write('"'+c.rows[A].arr[E]+'"'+_):v.write(c.rows[A].arr[E]+_):g==="csv"&&String(c.rows[A].arr[E]).includes(",")?v.write('"'+c.rows[A].arr[E]+'"'):v.write(c.rows[A].arr[E]);v.write(`
`)}}else{if(v.print("<html>"),v.print("<head>"),v.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),v.print("</head>"),v.print("<body>"),v.print("  <table>"),b[0]!=="0"){v.print("    <tr>");for(var T=0;T<b.length;T++){var C=i(b[T]);v.print("      <td>".concat(C)),v.print("      </td>")}v.print("    </tr>")}for(var R=0;R<c.rows.length;R++){v.print("    <tr>");for(var P=0;P<c.columns.length;P++){var N=i(c.rows[R].getString(P));v.print("      <td>".concat(N)),v.print("      </td>")}v.print("    </tr>")}v.print("  </table>"),v.print("</body>"),v.print("</html>")}v.close(),v.clear()},s.default.prototype.writeFile=function(v,u,p){var g="application/octet-stream",v=(s.default.prototype._isSafari()&&(g="text/plain"),new Blob(v,{type:g}));s.default.prototype.downloadFile(v,u,p)},s.default.prototype.downloadFile=function(c,v,b){var g,v=o(v,b),b=v[0];c instanceof Blob?l.default.saveAs(c,b):((g=document.createElement("a")).href=c,g.download=b,g.onclick=function(_){document.body.removeChild(_.target),_.stopPropagation()},g.style.display="none",document.body.appendChild(g),s.default.prototype._isSafari()&&(c=(c=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(v[1],'"'),alert(c)),g.click())},s.default.prototype._checkFileExtension=o,s.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},e=s.default,f.default=e},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.Table=function(s){this.columns=[],this.rows=[]},a.default.Table.prototype.addRow=function(s){if(s=s||new a.default.TableRow,s.arr===void 0||s.obj===void 0)throw new Error("invalid TableRow: ".concat(s));return(s.table=this).rows.push(s),s},a.default.Table.prototype.removeRow=function(s){this.rows[s].table=null,s=this.rows.splice(s+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(s)},a.default.Table.prototype.getRow=function(s){return this.rows[s]},a.default.Table.prototype.getRows=function(){return this.rows},a.default.Table.prototype.findRow=function(s,n){if(typeof n=="string"){for(var l=0;l<this.rows.length;l++)if(this.rows[l].obj[n]===s)return this.rows[l]}else for(var h=0;h<this.rows.length;h++)if(this.rows[h].arr[n]===s)return this.rows[h];return null},a.default.Table.prototype.findRows=function(s,n){var l=[];if(typeof n=="string")for(var h=0;h<this.rows.length;h++)this.rows[h].obj[n]===s&&l.push(this.rows[h]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[n]===s&&l.push(this.rows[m]);return l},a.default.Table.prototype.matchRow=function(s,n){if(typeof n=="number"){for(var l=0;l<this.rows.length;l++)if(this.rows[l].arr[n].match(s))return this.rows[l]}else for(var h=0;h<this.rows.length;h++)if(this.rows[h].obj[n].match(s))return this.rows[h];return null},a.default.Table.prototype.matchRows=function(s,n){var l=[];if(typeof n=="number")for(var h=0;h<this.rows.length;h++)this.rows[h].arr[n].match(s)&&l.push(this.rows[h]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[n].match(s)&&l.push(this.rows[m]);return l},a.default.Table.prototype.getColumn=function(s){var n=[];if(typeof s=="string")for(var l=0;l<this.rows.length;l++)n.push(this.rows[l].obj[s]);else for(var h=0;h<this.rows.length;h++)n.push(this.rows[h].arr[s]);return n},a.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},a.default.Table.prototype.addColumn=function(s){this.columns.push(s||null)},a.default.Table.prototype.getColumnCount=function(){return this.columns.length},a.default.Table.prototype.getRowCount=function(){return this.rows.length},a.default.Table.prototype.removeTokens=function(s,n){for(var l=[],h=0;h<s.length;h++)l.push(s.charAt(h).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(l.join("|"),"g");if(n===void 0)for(var i=0;i<this.columns.length;i++)for(var o=0;o<this.rows.length;o++){var c=(c=this.rows[o].arr[i]).replace(m,"");this.rows[o].arr[i]=c,this.rows[o].obj[this.columns[i]]=c}else if(typeof n=="string")for(var u=0;u<this.rows.length;u++){var p=(p=this.rows[u].obj[n]).replace(m,""),g=(this.rows[u].obj[n]=p,this.columns.indexOf(n));this.rows[u].arr[g]=p}else for(var v=0;v<this.rows.length;v++){var b=(b=this.rows[v].arr[n]).replace(m,"");this.rows[v].arr[n]=b,this.rows[v].obj[this.columns[n]]=b}},a.default.Table.prototype.trim=function(s){var n=new RegExp(" ","g");if(s===void 0)for(var l=0;l<this.columns.length;l++)for(var h=0;h<this.rows.length;h++){var m=(m=this.rows[h].arr[l]).replace(n,"");this.rows[h].arr[l]=m,this.rows[h].obj[this.columns[l]]=m}else if(typeof s=="string")for(var i=0;i<this.rows.length;i++){var o=(o=this.rows[i].obj[s]).replace(n,""),c=(this.rows[i].obj[s]=o,this.columns.indexOf(s));this.rows[i].arr[c]=o}else for(var u=0;u<this.rows.length;u++){var p=(p=this.rows[u].arr[s]).replace(n,"");this.rows[u].arr[s]=p,this.rows[u].obj[this.columns[s]]=p}},a.default.Table.prototype.removeColumn=function(h){typeof h=="string"?l=this.columns.indexOf(n=h):n=this.columns[l=h];var n,l,h=this.columns.splice(l+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(h);for(var m=0;m<this.rows.length;m++){var i=this.rows[m].arr,o=i.splice(l+1,i.length);i.pop(),this.rows[m].arr=i.concat(o),delete this.rows[m].obj[n]}},a.default.Table.prototype.set=function(s,n,l){this.rows[s].set(n,l)},a.default.Table.prototype.setNum=function(s,n,l){this.rows[s].setNum(n,l)},a.default.Table.prototype.setString=function(s,n,l){this.rows[s].setString(n,l)},a.default.Table.prototype.get=function(s,n){return this.rows[s].get(n)},a.default.Table.prototype.getNum=function(s,n){return this.rows[s].getNum(n)},a.default.Table.prototype.getString=function(s,n){return this.rows[s].getString(n)},a.default.Table.prototype.getObject=function(s){for(var n,l={},h=0;h<this.rows.length;h++)if(n=this.rows[h].obj,typeof s=="string"){if(!(0<=this.columns.indexOf(s)))throw new Error('This table has no column named "'.concat(s,'"'));l[n[s]]=n}else l[h]=this.rows[h].obj;return l},a.default.Table.prototype.getArray=function(){for(var s=[],n=0;n<this.rows.length;n++)s.push(this.rows[n].arr);return s},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(e,d,f){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.TableRow=function(a,s){var n=[],l={};a&&(n=a.split(s=s||","));for(var h=0;h<n.length;h++){var m=h,i=n[h];l[m]=i}this.arr=n,this.obj=l,this.table=null},e.default.TableRow.prototype.set=function(a,s){if(typeof a=="string"){var n=this.table.columns.indexOf(a);if(!(0<=n))throw new Error('This table has no column named "'.concat(a,'"'));this.obj[a]=s,this.arr[n]=s}else{if(!(a<this.table.columns.length))throw new Error("Column #".concat(a," is out of the range of this table"));this.arr[a]=s,n=this.table.columns[a],this.obj[n]=s}},e.default.TableRow.prototype.setNum=function(a,s){s=parseFloat(s),this.set(a,s)},e.default.TableRow.prototype.setString=function(a,s){s=s.toString(),this.set(a,s)},e.default.TableRow.prototype.get=function(a){return(typeof a=="string"?this.obj:this.arr)[a]},e.default.TableRow.prototype.getNum=function(a){var s=parseFloat(typeof a=="string"?this.obj[a]:this.arr[a]);if(s.toString()==="NaN")throw"Error: ".concat(this.obj[a]," is NaN (Not a Number)");return s},e.default.TableRow.prototype.getString=function(a){return(typeof a=="string"?this.obj:this.arr)[a].toString()},e=e.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(n){for(var l=[],h=0;h<n.length;h++)l.push(new a.default.XML(n[h]));return l}a.default.XML=function(n){n?this.DOM=n:(n=document.implementation.createDocument(null,"doc"),this.DOM=n.createElement("root"))},a.default.XML.prototype.getParent=function(){return new a.default.XML(this.DOM.parentElement)},a.default.XML.prototype.getName=function(){return this.DOM.tagName},a.default.XML.prototype.setName=function(n){var l=this.DOM.innerHTML,h=this.DOM.attributes,m=document.implementation.createDocument(null,"default").createElement(n);m.innerHTML=l;for(var i=0;i<h.length;i++)m.setAttribute(h[i].nodeName,h.nodeValue);this.DOM=m},a.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},a.default.XML.prototype.listChildren=function(){for(var n=[],l=0;l<this.DOM.childNodes.length;l++)n.push(this.DOM.childNodes[l].nodeName);return n},a.default.XML.prototype.getChildren=function(n){return s(n?this.DOM.getElementsByTagName(n):this.DOM.children)},a.default.XML.prototype.getChild=function(n){if(typeof n!="string")return new a.default.XML(this.DOM.children[n]);var l=!0,h=!1,m=void 0;try{for(var i,o=this.DOM.children[Symbol.iterator]();!(l=(i=o.next()).done);l=!0){var c=i.value;if(c.tagName===n)return new a.default.XML(c)}}catch(u){h=!0,m=u}finally{try{l||o.return==null||o.return()}finally{if(h)throw m}}},a.default.XML.prototype.addChild=function(n){n instanceof a.default.XML&&this.DOM.appendChild(n.DOM)},a.default.XML.prototype.removeChild=function(n){var l=-1;if(typeof n=="string"){for(var h=0;h<this.DOM.children.length;h++)if(this.DOM.children[h].tagName===n){l=h;break}}else l=n;l!==-1&&this.DOM.removeChild(this.DOM.children[l])},a.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},a.default.XML.prototype.listAttributes=function(){var n=[],l=!0,h=!1,m=void 0;try{for(var i,o=this.DOM.attributes[Symbol.iterator]();!(l=(i=o.next()).done);l=!0){var c=i.value;n.push(c.nodeName)}}catch(u){h=!0,m=u}finally{try{l||o.return==null||o.return()}finally{if(h)throw m}}return n},a.default.XML.prototype.hasAttribute=function(n){var l={},h=!0,m=!1,i=void 0;try{for(var o,c=this.DOM.attributes[Symbol.iterator]();!(h=(o=c.next()).done);h=!0){var u=o.value;l[u.nodeName]=u.nodeValue}}catch(p){m=!0,i=p}finally{try{h||c.return==null||c.return()}finally{if(m)throw i}}return!!l[n]},a.default.XML.prototype.getNum=function(n,l){var h={},m=!0,i=!1,o=void 0;try{for(var c,u=this.DOM.attributes[Symbol.iterator]();!(m=(c=u.next()).done);m=!0){var p=c.value;h[p.nodeName]=p.nodeValue}}catch(g){i=!0,o=g}finally{try{m||u.return==null||u.return()}finally{if(i)throw o}}return Number(h[n])||l||0},a.default.XML.prototype.getString=function(n,l){var h={},m=!0,i=!1,o=void 0;try{for(var c,u=this.DOM.attributes[Symbol.iterator]();!(m=(c=u.next()).done);m=!0){var p=c.value;h[p.nodeName]=p.nodeValue}}catch(g){i=!0,o=g}finally{try{m||u.return==null||u.return()}finally{if(i)throw o}}return h[n]?String(h[n]):l||null},a.default.XML.prototype.setAttribute=function(n,l){this.DOM.setAttribute(n,l)},a.default.XML.prototype.getContent=function(n){var l=this.DOM.textContent;return(l=l.replace(/\s\s+/g,","))||n||null},a.default.XML.prototype.setContent=function(n){this.DOM.children.length||(this.DOM.textContent=n)},a.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(e,d,f){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var n=arguments.length,l=[],h=0,m=0;m<n;m++){var i=arguments[m];if((i=+i)===1/0||i===-1/0)return 1/0;h<(i=Math.abs(i))&&(h=i),l[m]=i}h===0&&(h=1);for(var g=0,p=0,o=0;o<n;o++)var c=l[o]/h,c=c*c-p,u=g+c,p=u-g-c,g=u;return Math.sqrt(g)*h}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(n,l,h){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(n,h),l)},a.default.prototype.dist=function(){for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return a.default._validateParameters("dist",l),l.length===4?s(l[2]-l[0],l[3]-l[1]):l.length===6?s(l[3]-l[0],l[4]-l[1],l[5]-l[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(n,l,h){return a.default._validateParameters("lerp",arguments),h*(l-n)+n},a.default.prototype.log=Math.log,a.default.prototype.mag=function(n,l){return a.default._validateParameters("mag",arguments),s(n,l)},a.default.prototype.map=function(n,l,h,m,i,o){return a.default._validateParameters("map",arguments),n=(n-l)/(h-l)*(i-m)+m,o?m<i?this.constrain(n,m,i):this.constrain(n,i,m):n},a.default.prototype.max=function(){for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return l[0]instanceof Array?Math.max.apply(null,l[0]):Math.max.apply(null,l)},a.default.prototype.min=function(){for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return l[0]instanceof Array?Math.min.apply(null,l[0]):Math.min.apply(null,l)},a.default.prototype.norm=function(n,l,h){return a.default._validateParameters("norm",arguments),this.map(n,l,h,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(n,l){return l?(l=Math.pow(10,l),Math.round(n*l)/l):Math.round(n)},a.default.prototype.sq=function(n){return n*n},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(m){a.default._validateParameters("fract",arguments);var l,h=0,m=Number(m);return isNaN(m)||Math.abs(m)===1/0?m:(m<0&&(m=-m,h=1),String(m).includes(".")&&!String(m).includes("e")?(l=String(m),l=Number("0"+l.slice(l.indexOf("."))),Math.abs(h-l)):m<1?Math.abs(h-m):0)},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};function s(l,h,m){return(s=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(i,o,c){var u=[null];return u.push.apply(u,o),o=new(Function.bind.apply(i,u)),c&&n(o,c.prototype),o}).apply(null,arguments)}function n(l,h){return(n=Object.setPrototypeOf||function(m,i){return m.__proto__=i,m})(l,h)}a.default.prototype.createVector=function(l,h,m){return this instanceof a.default?s(a.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new a.default.Vector(l,h,m)},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(m,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,m=(m=m("../core/main"))&&m.__esModule?m:{default:m};function a(i){return .5*(1-Math.cos(i*Math.PI))}var s,n=4095,l=4,h=.5,m=(m.default.prototype.noise=function(i){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(s==null){s=new Array(4096);for(var u=0;u<4096;u++)s[u]=Math.random()}i<0&&(i=-i),o<0&&(o=-o),c<0&&(c=-c);for(var p,g,v=Math.floor(i),b=Math.floor(o),_=Math.floor(c),x=i-v,A=o-b,E=c-_,T=0,C=.5,R=0;R<l;R++){var P=v+(b<<4)+(_<<8),N=a(x),k=a(A),I=s[P&n];I+=N*(s[P+1&n]-I),p=s[P+16&n],I+=k*((p+=N*(s[P+16+1&n]-p))-I),p=s[(P+=256)&n],p+=N*(s[P+1&n]-p),g=s[P+16&n],p+=k*((g+=N*(s[P+16+1&n]-g))-p),T+=(I+=a(E)*(p-I))*C,C*=h,v<<=1,b<<=1,_<<=1,1<=(x*=2)&&(v++,x--),1<=(A*=2)&&(b++,A--),1<=(E*=2)&&(_++,E--)}return T},m.default.prototype.noiseDetail=function(i,o){0<i&&(l=i),0<o&&(h=o)},m.default.prototype.noiseSeed=function(i){u=4294967296;var o,c,u,p={setSeed:function(v){c=o=(v??Math.random()*u)>>>0},getSeed:function(){return o},rand:function(){return(c=(1664525*c+1013904223)%u)/u}};p.setSeed(i),s=new Array(4096);for(var g=0;g<4096;g++)s[g]=p.rand()},m.default);f.default=m},{"../core/main":267}],300:[function(e,d,f){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function s(c){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(u){return a(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":a(u)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(o=e("../core/main"))&&o.__esModule?o:{default:o},l=function(c){if(c&&c.__esModule)return c;if(c===null||s(c)!=="object"&&typeof c!="function")return{default:c};var u=h();if(u&&u.has(c))return u.get(c);var p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in c){var b;Object.prototype.hasOwnProperty.call(c,p)&&((b=v?Object.getOwnPropertyDescriptor(c,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=c[p])}return g.default=c,u&&u.set(c,g),g}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}n.default.Vector=function(){var c,u,p={}.toString.call(arguments[0])==="[object Function]"?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],c=arguments[2]||0,u=arguments[3]||0,arguments[4]||0):(c=arguments[0]||0,u=arguments[1]||0,arguments[2]||0);this.x=c,this.y=u,this.z=p},n.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},n.default.Vector.prototype.set=function(c,u,p){return c instanceof n.default.Vector?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):c instanceof Array?(this.x=c[0]||0,this.y=c[1]||0,this.z=c[2]||0):(this.x=c||0,this.y=u||0,this.z=p||0),this},n.default.Vector.prototype.copy=function(){return this.isPInst?new n.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new n.default.Vector(this.x,this.y,this.z)},n.default.Vector.prototype.add=function(c,u,p){return c instanceof n.default.Vector?(this.x+=c.x||0,this.y+=c.y||0,this.z+=c.z||0):c instanceof Array?(this.x+=c[0]||0,this.y+=c[1]||0,this.z+=c[2]||0):(this.x+=c||0,this.y+=u||0,this.z+=p||0),this};function m(c,u){return c!==0&&(this.x=this.x%c),u!==0&&(this.y=this.y%u),this}function i(c,u,p){return c!==0&&(this.x=this.x%c),u!==0&&(this.y=this.y%u),p!==0&&(this.z=this.z%p),this}n.default.Vector.prototype.rem=function(c,u,p){var g;if(c instanceof n.default.Vector){if(Number.isFinite(c.x)&&Number.isFinite(c.y)&&Number.isFinite(c.z))return v=parseFloat(c.x),b=parseFloat(c.y),g=parseFloat(c.z),i.call(this,v,b,g)}else if(c instanceof Array){if(c.every(function(_){return Number.isFinite(_)}))return c.length===2?m.call(this,c[0],c[1]):c.length===3?i.call(this,c[0],c[1],c[2]):void 0}else if(arguments.length===1){if(Number.isFinite(c)&&c!==0)return this.x=this.x%c,this.y=this.y%c,this.z=this.z%c,this}else if(arguments.length===2){var v=Array.prototype.slice.call(arguments);if(v.every(function(_){return Number.isFinite(_)})&&v.length===2)return m.call(this,v[0],v[1])}else if(arguments.length===3){var b=Array.prototype.slice.call(arguments);if(b.every(function(_){return Number.isFinite(_)})&&b.length===3)return i.call(this,b[0],b[1],b[2])}},n.default.Vector.prototype.sub=function(c,u,p){return c instanceof n.default.Vector?(this.x-=c.x||0,this.y-=c.y||0,this.z-=c.z||0):c instanceof Array?(this.x-=c[0]||0,this.y-=c[1]||0,this.z-=c[2]||0):(this.x-=c||0,this.y-=u||0,this.z-=p||0),this},n.default.Vector.prototype.mult=function(c,u,p){var g;return c instanceof n.default.Vector?Number.isFinite(c.x)&&Number.isFinite(c.y)&&Number.isFinite(c.z)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.z=="number"?(this.x*=c.x,this.y*=c.y,this.z*=c.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):c instanceof Array?c.every(function(v){return Number.isFinite(v)})&&c.every(function(v){return typeof v=="number"})?c.length===1?(this.x*=c[0],this.y*=c[0],this.z*=c[0]):c.length===2?(this.x*=c[0],this.y*=c[1]):c.length===3&&(this.x*=c[0],this.y*=c[1],this.z*=c[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(g=Array.prototype.slice.call(arguments)).every(function(v){return Number.isFinite(v)})&&g.every(function(v){return typeof v=="number"})?(arguments.length===1&&(this.x*=c,this.y*=c,this.z*=c),arguments.length===2&&(this.x*=c,this.y*=u),arguments.length===3&&(this.x*=c,this.y*=u,this.z*=p)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},n.default.Vector.prototype.div=function(c,u,p){if(c instanceof n.default.Vector)if(Number.isFinite(c.x)&&Number.isFinite(c.y)&&Number.isFinite(c.z)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.z=="number"){if(c.x===0||c.y===0||c.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=c.x,this.y/=c.y,this.z/=c.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(c instanceof Array)if(c.every(function(v){return Number.isFinite(v)})&&c.every(function(v){return typeof v=="number"})){if(c.some(function(v){return v===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;c.length===1?(this.x/=c[0],this.y/=c[0],this.z/=c[0]):c.length===2?(this.x/=c[0],this.y/=c[1]):c.length===3&&(this.x/=c[0],this.y/=c[1],this.z/=c[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else{var g=Array.prototype.slice.call(arguments);if(g.every(function(v){return Number.isFinite(v)})&&g.every(function(v){return typeof v=="number"})){if(g.some(function(v){return v===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=c,this.y/=c,this.z/=c),arguments.length===2&&(this.x/=c,this.y/=u),arguments.length===3&&(this.x/=c,this.y/=u,this.z/=p)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number")}return this},n.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},n.default.Vector.prototype.magSq=function(){var c=this.x,u=this.y,p=this.z;return c*c+u*u+p*p},n.default.Vector.prototype.dot=function(c,u,p){return c instanceof n.default.Vector?this.dot(c.x,c.y,c.z):this.x*(c||0)+this.y*(u||0)+this.z*(p||0)},n.default.Vector.prototype.cross=function(g){var u=this.y*g.z-this.z*g.y,p=this.z*g.x-this.x*g.z,g=this.x*g.y-this.y*g.x;return this.isPInst?new n.default.Vector(this._fromRadians,this._toRadians,u,p,g):new n.default.Vector(u,p,g)},n.default.Vector.prototype.dist=function(c){return c.copy().sub(this).mag()},n.default.Vector.prototype.normalize=function(){var c=this.mag();return c!==0&&this.mult(1/c),this},n.default.Vector.prototype.limit=function(c){var u=this.magSq();return c*c<u&&this.div(Math.sqrt(u)).mult(c),this},n.default.Vector.prototype.setMag=function(c){return this.normalize().mult(c)},n.default.Vector.prototype.heading=function(){var c=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(c):c},n.default.Vector.prototype.setHeading=function(c){this.isPInst&&(c=this._toRadians(c));var u=this.mag();return this.x=u*Math.cos(c),this.y=u*Math.sin(c),this},n.default.Vector.prototype.rotate=function(u){var u=this.heading()+u,p=(this.isPInst&&(u=this._toRadians(u)),this.mag());return this.x=Math.cos(u)*p,this.y=Math.sin(u)*p,this},n.default.Vector.prototype.angleBetween=function(c){var u=this.dot(c)/(this.mag()*c.mag()),u=Math.acos(Math.min(1,Math.max(-1,u)));return u*=Math.sign(this.cross(c).z||1),u=this.isPInst?this._fromRadians(u):u},n.default.Vector.prototype.lerp=function(c,u,p,g){return c instanceof n.default.Vector?this.lerp(c.x,c.y,c.z,u):(this.x+=(c-this.x)*g||0,this.y+=(u-this.y)*g||0,this.z+=(p-this.z)*g||0,this)},n.default.Vector.prototype.reflect=function(c){return c.normalize(),this.sub(c.mult(2*this.dot(c)))},n.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},n.default.Vector.prototype.equals=function(b,u,p){var g,v,b=b instanceof n.default.Vector?(g=b.x||0,v=b.y||0,b.z||0):b instanceof Array?(g=b[0]||0,v=b[1]||0,b[2]||0):(g=b||0,v=u||0,p||0);return this.x===g&&this.y===v&&this.z===b},n.default.Vector.fromAngle=function(c,u){return new n.default.Vector((u=u===void 0?1:u)*Math.cos(c),u*Math.sin(c),0)},n.default.Vector.fromAngles=function(_,v,p){p===void 0&&(p=1);var g=Math.cos(v),v=Math.sin(v),b=Math.cos(_),_=Math.sin(_);return new n.default.Vector(p*_*v,-p*b,p*_*g)},n.default.Vector.random2D=function(){return this.fromAngle(Math.random()*l.TWO_PI)},n.default.Vector.random3D=function(){var c=Math.random()*l.TWO_PI,u=2*Math.random()-1,g=Math.sqrt(1-u*u),p=g*Math.cos(c),g=g*Math.sin(c);return new n.default.Vector(p,g,u)},n.default.Vector.add=function(c,u,p){return p?p.set(c):(p=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),p.add(u),p},n.default.Vector.rem=function(c,u){if(c instanceof n.default.Vector&&u instanceof n.default.Vector)return(c=c.copy()).rem(u),c},n.default.Vector.sub=function(c,u,p){return p?p.set(c):(p=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),p.sub(u),p},n.default.Vector.mult=function(c,u,p){return p?p.set(c):(p=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),p.mult(u),p},n.default.Vector.rotate=function(c,u,p){return arguments.length===2?p=c.copy():(p instanceof n.default.Vector||n.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),p.set(c)),p.rotate(u),p},n.default.Vector.div=function(c,u,p){return p?p.set(c):(p=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),p.div(u),p},n.default.Vector.dot=function(c,u){return c.dot(u)},n.default.Vector.cross=function(c,u){return c.cross(u)},n.default.Vector.dist=function(c,u){return c.dist(u)},n.default.Vector.lerp=function(c,u,p,g){return g?g.set(c):(g=c.copy(),arguments.length===4&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),g.lerp(u,p),g},n.default.Vector.mag=function(g){var u=g.x,p=g.y,g=g.z;return Math.sqrt(u*u+p*p+g*g)},n.default.Vector.normalize=function(c,u){return arguments.length<2?u=c.copy():(u instanceof n.default.Vector||n.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),u.set(c)),u.normalize()};var o=n.default.Vector;f.default=o},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(h,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(h=h("../core/main"))&&h.__esModule?h:{default:h},s="_lcg_random_state",n=4294967296,l=0,h=(a.default.prototype._lcg=function(m){return this[m]=(1664525*this[m]+1013904223)%n,this[m]/n},a.default.prototype._lcgSetSeed=function(m,i){this[m]=(i??Math.random()*n)>>>0},a.default.prototype.randomSeed=function(m){this._lcgSetSeed(s,m),this._gaussian_previous=!1},a.default.prototype.random=function(m,i){var o,c;return a.default._validateParameters("random",arguments),o=this[s]!=null?this._lcg(s):Math.random(),m===void 0?o:i===void 0?m instanceof Array?m[Math.floor(o*m.length)]:o*m:(i<m&&(c=m,m=i,i=c),o*(i-m)+m)},a.default.prototype.randomGaussian=function(m){var i,o,c,u,p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)i=l,this._gaussian_previous=!1;else{for(;1<=(u=(o=this.random(2)-1)*o+(c=this.random(2)-1)*c););i=o*(u=Math.sqrt(-2*Math.log(u)/u)),l=c*u,this._gaussian_previous=!0}return i*p+(m||0)},a.default);f.default=h},{"../core/main":267}],302:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}n.default.prototype._angleMode=l.RADIANS,n.default.prototype.acos=function(i){return this._fromRadians(Math.acos(i))},n.default.prototype.asin=function(i){return this._fromRadians(Math.asin(i))},n.default.prototype.atan=function(i){return this._fromRadians(Math.atan(i))},n.default.prototype.atan2=function(i,o){return this._fromRadians(Math.atan2(i,o))},n.default.prototype.cos=function(i){return Math.cos(this._toRadians(i))},n.default.prototype.sin=function(i){return Math.sin(this._toRadians(i))},n.default.prototype.tan=function(i){return Math.tan(this._toRadians(i))},n.default.prototype.degrees=function(i){return i*l.RAD_TO_DEG},n.default.prototype.radians=function(i){return i*l.DEG_TO_RAD},n.default.prototype.angleMode=function(i){if(n.default._validateParameters("angleMode",arguments),i===void 0)return this._angleMode;i!==l.DEGREES&&i!==l.RADIANS||(this._angleMode=i)},n.default.prototype._toRadians=function(i){return this._angleMode===l.DEGREES?i*l.DEG_TO_RAD:i},n.default.prototype._toDegrees=function(i){return this._angleMode===l.RADIANS?i*l.RAD_TO_DEG:i},n.default.prototype._fromRadians=function(i){return this._angleMode===l.DEGREES?i*l.RAD_TO_DEG:i};var m=n.default;f.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.prototype.textAlign=function(s,n){var l;return a.default._validateParameters("textAlign",arguments),(l=this._renderer).textAlign.apply(l,arguments)},a.default.prototype.textLeading=function(s){var n;return a.default._validateParameters("textLeading",arguments),(n=this._renderer).textLeading.apply(n,arguments)},a.default.prototype.textSize=function(s){var n;return a.default._validateParameters("textSize",arguments),(n=this._renderer).textSize.apply(n,arguments)},a.default.prototype.textStyle=function(s){var n;return a.default._validateParameters("textStyle",arguments),(n=this._renderer).textStyle.apply(n,arguments)},a.default.prototype.textWidth=function(){for(var s,n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return l[0]+="",a.default._validateParameters("textWidth",l),l[0].length===0?0:(s=this._renderer).textWidth.apply(s,l)},a.default.prototype.textAscent=function(){for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return a.default._validateParameters("textAscent",n),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return a.default._validateParameters("textDescent",n),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},a.default.prototype.textWrap=function(s){if(s!=="WORD"&&s!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(s)},e=a.default,f.default=e},{"../core/main":267}],304:[function(e,d,f){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function s(c){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(u){return a(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":a(u)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(o=e("../core/main"))&&o.__esModule?o:{default:o},l=i(e("../core/constants")),h=i(e("opentype.js"));function m(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,m=function(){return c},c)}function i(c){if(c&&c.__esModule)return c;if(c===null||s(c)!=="object"&&typeof c!="function")return{default:c};var u=m();if(u&&u.has(c))return u.get(c);var p,g,v={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&((g=b?Object.getOwnPropertyDescriptor(c,p):null)&&(g.get||g.set)?Object.defineProperty(v,p,g):v[p]=c[p]);return v.default=c,u&&u.set(c,v),v}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.loadFont=function(c,u,p){n.default._validateParameters("loadFont",arguments);var g=new n.default.Font(this),v=this;return h.load(c,function(x,A){if(x)return n.default._friendlyFileLoadError(4,c),p!==void 0?p(x):void console.error(x,c);g.font=A,u!==void 0&&u(g),v._decrementPreload();var x=c.split("\\").pop().split("/").pop(),A=x.lastIndexOf("."),E=A<1?null:x.slice(A+1);["ttf","otf","woff","woff2"].includes(E)&&(E=x.slice(0,A!==-1?A:0),(x=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(E,`;
src: url(`).concat(c,`);
}
`))),document.head.appendChild(x))}),g},n.default.prototype.text=function(c,u,p,g,v){var b;return n.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(b=this._renderer).text.apply(b,arguments):this},n.default.prototype.textFont=function(c,u){if(n.default._validateParameters("textFont",arguments),arguments.length){if(c)return this._renderer._setProperty("_textFont",c),u&&(this._renderer._setProperty("_textSize",u),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",u*l._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var o=n.default;f.default=o},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(e,d,f){function a(E){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(E)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(s=e("../core/main"))&&s.__esModule?s:{default:s},n=function(E){if(E&&E.__esModule)return E;if(E===null||h(E)!=="object"&&typeof E!="function")return{default:E};var T=l();if(T&&T.has(E))return T.get(E);var C,R={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(C in E){var N;Object.prototype.hasOwnProperty.call(E,C)&&((N=P?Object.getOwnPropertyDescriptor(E,C):null)&&(N.get||N.set)?Object.defineProperty(R,C,N):R[C]=E[C])}return R.default=E,T&&T.set(E,R),R}(e("../core/constants"));function l(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,l=function(){return E},E)}function h(E){return(h=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(T){return a(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":a(T)})(E)}function m(E,T){var C=E.length;return E[T<0?T%C+C:T%C]}function i(E,T,C,R){var P,N,k;return R?(i.tmpPoint1===void 0&&(i.tmpPoint1=[],i.tmpPoint2=[]),N=i.tmpPoint1,k=i.tmpPoint2,N.x=T.x-E.x,N.y=T.y-E.y,k.x=C.x-T.x,k.y=C.y-T.y,P=N.x*k.x+N.y*k.y,N=Math.sqrt(N.x*N.x+N.y*N.y),k=Math.sqrt(k.x*k.x+k.y*k.y),Math.acos(P/(N*k))<R):(T[0]-E[0])*(C[1]-E[1])-(C[0]-E[0])*(T[1]-E[1])==0}function o(L,U,O,V,J,N,k,I,B){var Y=1-B,H=Math.pow(Y,3),X=Math.pow(Y,2),ee=B*B,Z=ee*B,W=H*L+3*X*B*O+3*Y*B*B*J+Z*k,H=H*U+3*X*B*V+3*Y*B*B*N+Z*I,X=L+2*B*(O-L)+ee*(J-2*O+L),Z=U+2*B*(V-U)+ee*(N-2*V+U),q=O+2*B*(J-O)+ee*(k-2*J+O),ee=V+2*B*(N-V)+ee*(I-2*N+V),L=Y*L+B*O,O=Y*U+B*V,U=Y*J+B*k,V=Y*N+B*I,J=90-180*Math.atan2(X-q,Z-ee)/Math.PI;return(q<X||Z<ee)&&(J+=180),{x:W,y:H,m:{x:X,y:Z},n:{x:q,y:ee},start:{x:L,y:O},end:{x:U,y:V},alpha:J}}function c(E,T,C,R,P,N,k,I,B){return B==null?x(E,T,C,R,P,N,k,I):o(E,T,C,R,P,N,k,I,function(Y,W,H,X,Z,q,ee,L,O){if(!(O<0||x(Y,W,H,X,Z,q,ee,L)<O)){var U,V=.5,J=1-V;for(U=x(Y,W,H,X,Z,q,ee,L,J);.01<Math.abs(U-O);)U=x(Y,W,H,X,Z,q,ee,L,J+=(U<O?1:-1)*(V/=2));return J}}(E,T,C,R,P,N,k,I,B))}function u(E,T,C){for(var R,P,N,k,I,B=0,Y=0,W=(E=function(H,X){function Z(Te,we,De){var Ie,We;if(!Te)return["C",we.x,we.y,we.x,we.y,we.x,we.y];switch(Te[0]in{T:1,Q:1}||(we.qx=we.qy=null),Te[0]){case"M":we.X=Te[1],we.Y=Te[2];break;case"A":Te=["C"].concat(g.apply(0,[we.x,we.y].concat(Te.slice(1))));break;case"S":We=De==="C"||De==="S"?(Ie=2*we.x-we.bx,2*we.y-we.by):(Ie=we.x,we.y),Te=["C",Ie,We].concat(Te.slice(1));break;case"T":De==="Q"||De==="T"?(we.qx=2*we.x-we.qx,we.qy=2*we.y-we.qy):(we.qx=we.x,we.qy=we.y),Te=["C"].concat(_(we.x,we.y,we.qx,we.qy,Te[1],Te[2]));break;case"Q":we.qx=Te[1],we.qy=Te[2],Te=["C"].concat(_(we.x,we.y,Te[1],Te[2],Te[3],Te[4]));break;case"L":Te=["C"].concat(b(we.x,we.y,Te[1],Te[2]));break;case"H":Te=["C"].concat(b(we.x,we.y,Te[1],we.y));break;case"V":Te=["C"].concat(b(we.x,we.y,we.x,Te[1]));break;case"Z":Te=["C"].concat(b(we.x,we.y,we.X,we.Y))}return Te}function q(Te,we){if(7<Te[we].length){Te[we].shift();for(var De=Te[we];De.length;)le[we]="A",U&&(ce[we]="A"),Te.splice(we++,0,["C"].concat(De.splice(0,6)));Te.splice(we,1),L=Math.max(O.length,U&&U.length||0)}}function ee(Te,we,De,Ie,We){Te&&we&&Te[We][0]==="M"&&we[We][0]!=="M"&&(we.splice(We,0,["M",Ie.x,Ie.y]),De.bx=0,De.by=0,De.x=Te[We][1],De.y=Te[We][2],L=Math.max(O.length,U&&U.length||0))}var L,O=p(H),U=X&&p(X),V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},J={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},le=[],ce=[],ue="",re="";L=Math.max(O.length,U&&U.length||0);for(var de=0;de<L;de++){(ue=O[de]?O[de][0]:ue)!=="C"&&(le[de]=ue,de&&(re=le[de-1])),O[de]=Z(O[de],V,re),le[de]!=="A"&&ue==="C"&&(le[de]="C"),q(O,de),U&&((ue=U[de]?U[de][0]:ue)!=="C"&&(ce[de]=ue,de&&(re=ce[de-1])),U[de]=Z(U[de],J,re),ce[de]!=="A"&&ue==="C"&&(ce[de]="C"),q(U,de)),ee(O,U,V,J,de),ee(U,O,J,V,de);var ve=O[de],ie=U&&U[de],_e=ve.length,Se=U&&ie.length;V.x=ve[_e-2],V.y=ve[_e-1],V.bx=parseFloat(ve[_e-4])||V.x,V.by=parseFloat(ve[_e-3])||V.y,J.bx=U&&(parseFloat(ie[Se-4])||J.x),J.by=U&&(parseFloat(ie[Se-3])||J.y),J.x=U&&ie[Se-2],J.y=U&&ie[Se-1]}return U?[O,U]:O}(E)).length;Y<W;Y++){if((N=E[Y])[0]==="M")R=+N[1],P=+N[2];else{if(T<B+(k=c(R,P,N[1],N[2],N[3],N[4],N[5],N[6]))&&!C)return{x:(I=c(R,P,N[1],N[2],N[3],N[4],N[5],N[6],T-B)).x,y:I.y,alpha:I.alpha};B+=k,R=+N[5],P=+N[6]}N.shift()}return I=(I=C?B:o(R,P,N[0],N[1],N[2],N[3],N[4],N[5],1)).alpha?{x:I.x,y:I.y,alpha:I.alpha}:I}function p(E){var T=[],C=0,R=0,P=0,N=0,k=0;if(E){E[0][0]==="M"&&(P=C=+E[0][1],N=R=+E[0][2],k++,T[0]=["M",C,R]);for(var I,B,Y=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",W=k,H=E.length;W<H;W++){if(T.push(I=[]),(B=E[W])[0]!==String.prototype.toUpperCase.call(B[0]))switch(I[0]=String.prototype.toUpperCase.call(B[0]),I[0]){case"A":I[1]=B[1],I[2]=B[2],I[3]=B[3],I[4]=B[4],I[5]=B[5],I[6]=+(B[6]+C),I[7]=+(B[7]+R);break;case"V":I[1]=+B[1]+R;break;case"H":I[1]=+B[1]+C;break;case"R":for(var X,Z=2,q=(X=[C,R].concat(B.slice(1))).length;Z<q;Z++)X[Z]=+X[Z]+C,X[++Z]=+X[Z]+R;T.pop(),T=T.concat(v(X,Y));break;case"M":P=+B[1]+C,N=+B[2]+R;break;default:for(var ee=1,L=B.length;ee<L;ee++)I[ee]=+B[ee]+(ee%2?C:R)}else if(B[0]==="R")X=[C,R].concat(B.slice(1)),T.pop(),T=T.concat(v(X,Y)),I=["R"].concat(B.slice(-2));else for(var O=0,U=B.length;O<U;O++)I[O]=B[O];switch(I[0]){case"Z":C=P,R=N;break;case"H":C=I[1];break;case"V":R=I[1];break;case"M":P=I[I.length-2],N=I[I.length-1];break;default:C=I[I.length-2],R=I[I.length-1]}}}return T}function g(E,T,C,R,U,le,V,I,B,Y){function W(Se,Te,we){return{x:Se*Math.cos(we)-Te*Math.sin(we),y:Se*Math.sin(we)+Te*Math.cos(we)}}var H,L=Math.PI,O=120*L/180,X=L/180*(+U||0),Z=[],q=(Y?(de=Y[0],H=Y[1],ue=Y[2],re=Y[3]):(E=(J=W(E,T,-X)).x,T=J.y,1<(q=(ee=(E-(I=(J=W(I,B,-X)).x))/2)*ee/(C*C)+(J=(T-(B=J.y))/2)*J/(R*R))&&(C*=q=Math.sqrt(q),R*=q),q=C*C,ce=R*R,ue=(le=(le===V?-1:1)*Math.sqrt(Math.abs((q*ce-q*J*J-ce*ee*ee)/(q*J*J+ce*ee*ee))))*C*J/R+(E+I)/2,re=le*-R*ee/C+(T+B)/2,de=Math.asin(((T-re)/R).toFixed(9)),H=Math.asin(((B-re)/R).toFixed(9)),(de=E<ue?L-de:de)<0&&(de=2*L+de),(H=I<ue?L-H:H)<0&&(H=2*L+H),V&&H<de&&(de-=2*L),!V&&de<H&&(H-=2*L)),H-de),ee=(Math.abs(q)>O&&(ce=H,J=I,le=B,H=de+O*(V&&de<H?1:-1),Z=g(I=ue+C*Math.cos(H),B=re+R*Math.sin(H),C,R,U,0,V,J,le,[H,ce,ue,re])),q=H-de,Math.cos(de)),L=Math.sin(de),O=Math.cos(H),U=Math.sin(H),V=Math.tan(q/4),J=4/3*C*V,le=4/3*R*V,ce=[E,T],ue=[E+J*L,T-le*ee],re=[I+J*U,B-le*O],de=[I,B];if(ue[0]=2*ce[0]-ue[0],ue[1]=2*ce[1]-ue[1],Y)return[ue,re,de].concat(Z);for(var ve=[],ie=0,_e=(Z=[ue,re,de].concat(Z).join().split(",")).length;ie<_e;ie++)ve[ie]=ie%2?W(Z[ie-1],Z[ie],X).y:W(Z[ie],Z[ie+1],X).x;return ve}function v(E,T){for(var C=[],R=0,P=E.length;R<P-2*!T;R+=2){var N=[{x:+E[R-2],y:+E[R-1]},{x:+E[R],y:+E[R+1]},{x:+E[R+2],y:+E[R+3]},{x:+E[R+4],y:+E[R+5]}];T?R?P-4===R?N[3]={x:+E[0],y:+E[1]}:P-2===R&&(N[2]={x:+E[0],y:+E[1]},N[3]={x:+E[2],y:+E[3]}):N[0]={x:+E[P-2],y:+E[P-1]}:P-4===R?N[3]=N[2]:R||(N[0]={x:+E[R],y:+E[R+1]}),C.push(["C",(-N[0].x+6*N[1].x+N[2].x)/6,(-N[0].y+6*N[1].y+N[2].y)/6,(N[1].x+6*N[2].x-N[3].x)/6,(N[1].y+6*N[2].y-N[3].y)/6,N[2].x,N[2].y])}return C}function b(E,T,C,R){return[E,T,C,R,C,R]}function _(E,T,C,R,P,N){return[1/3*E+2/3*C,1/3*T+2/3*R,1/3*P+2/3*C,1/3*N+2/3*R,P,N]}function x(E,T,C,R,P,N,k,I,B){for(var Y=(B=1<(B=B??1)?1:B<0?0:B)/2,W=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],H=0,X=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0;Z<12;Z++){var ee=Y*W[Z]+Y,q=A(ee,E,C,P,k),ee=A(ee,T,R,N,I);H+=X[Z]*Math.sqrt(q*q+ee*ee)}return Y*H}function A(E,T,C,R,P){return E*(E*(-3*T+9*C-9*R+3*P)+6*T-12*C+6*R)-3*T+3*C}s.default.Font=function(E){this.parent=E,this.cache={},this.font=void 0},s.default.Font.prototype.textBounds=function(E){var T=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,k=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,P=R&&R.renderer&&R.renderer._pInst||this.parent,N=P._renderer.drawingContext,k=(N.textAlign||n.LEFT,N.textBaseline||n.BASELINE,k||P._renderer._textSize);if(!O){for(var I=[],B=[],Y=[],W=(Y[0]=[],[]),H=this._scale(k),X=P._renderer.textLeading(),Z=0,q=(this.font.forEachGlyph(E,T,C,k,R,function(J,le,ce,ue){var re=J.getMetrics();J.index===0||J.index===10?Y[Z+=1]=[]:(Y[Z].push(le+re.xMin*H),Y[Z].push(le+re.xMax*H),W.push(ce+Z*X+-re.yMin*H),W.push(ce+Z*X+-re.yMax*H))}),0<Y[Z].length&&(I[Z]=Math.min.apply(null,Y[Z]),B[Z]=Math.max.apply(null,Y[Z])),0),ee=0;ee<=Z;ee++){I[ee]=Math.min.apply(null,Y[ee]),B[ee]=Math.max.apply(null,Y[ee]);var L=B[ee]-I[ee];q<L&&(q=L)}var N=Math.min.apply(null,I),O={x:N,y:C=Math.min.apply(null,W),h:Math.max.apply(null,W)-C,w:q,advance:N-T},k=this._handleAlignment(P._renderer,E,O.x,O.y,O.w+O.advance);O.x=k.x,O.y=k.y}return O},s.default.Font.prototype.textToPoints=function(E,T,C,R,P){var N=0,k=[],I=this._getGlyphs(E);R=R||this.parent._renderer._textSize;for(var B,Y=0;Y<I.length;Y++){if(!(I[B=Y].name&&I[B].name==="space"||E.length===I.length&&E[B]===" "))for(var W=function(q){for(var ee,L=[],O=0;O<q.length;O++)q[O].type==="M"&&(ee&&L.push(ee),ee=[]),ee.push(function(U){var V=[U.type];return U.type==="M"||U.type==="L"?V.push(U.x,U.y):U.type==="C"?V.push(U.x1,U.y1,U.x2,U.y2,U.x,U.y):U.type==="Q"&&V.push(U.x1,U.y1,U.x,U.y),V}(q[O]));return L.push(ee),L}(I[Y].getPath(T,C,R).commands),H=0;H<W.length;H++)for(var X=function(q,ee){for(var ee=function(le,ce){if(h(le)!=="object")le=ce;else for(var ue in ce)le[ue]===void 0&&(le[ue]=ce[ue]);return le}(ee,{sampleFactor:.1,simplifyThreshold:0}),L=u(q,0,1),O=L/(L*ee.sampleFactor),U=[],V=0;V<L;V+=O)U.push(u(q,V));return ee.simplifyThreshold&&function(J){for(var le=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ce=0,ue=J.length-1;3<J.length&&0<=ue;--ue)i(m(J,ue-1),m(J,ue),m(J,ue+1),le)&&(J.splice(ue%J.length,1),ce++)}(U,ee.simplifyThreshold),U}(W[H],P),Z=0;Z<X.length;Z++)X[Z].x+=N,k.push(X[Z]);N+=I[Y].advanceWidth*this._scale(R)}return k},s.default.Font.prototype._getGlyphs=function(E){return this.font.stringToGlyphs(E)},s.default.Font.prototype._getPath=function(E,N,C,R){var P=(R&&R.renderer&&R.renderer._pInst||this.parent)._renderer,N=this._handleAlignment(P,E,N,C);return this.font.getPath(E,N.x,N.y,P._textSize,R)},s.default.Font.prototype._getPathData=function(E,T,C,R){var P=3;return typeof E=="string"&&2<arguments.length?E=this._getPath(E,T,C,R):h(T)==="object"&&(R=T),R&&typeof R.decimals=="number"&&(P=R.decimals),E.toPathData(P)},s.default.Font.prototype._getSVG=function(E,T,C,R){var P=3;return typeof E=="string"&&2<arguments.length?E=this._getPath(E,T,C,R):h(T)==="object"&&(R=T),R&&(typeof R.decimals=="number"&&(P=R.decimals),typeof R.strokeWidth=="number"&&(E.strokeWidth=R.strokeWidth),R.fill!==void 0&&(E.fill=R.fill),R.stroke!==void 0&&(E.stroke=R.stroke)),E.toSVG(P)},s.default.Font.prototype._renderPath=function(k,B,Y,R){var P=R&&R.renderer||this.parent._renderer,N=P.drawingContext,k=(h(k)==="object"&&k.commands?k:this._getPath(k,B,Y,R)).commands,I=(N.beginPath(),!0),B=!1,Y=void 0;try{for(var W,H=k[Symbol.iterator]();!(I=(W=H.next()).done);I=!0){var X=W.value;X.type==="M"?N.moveTo(X.x,X.y):X.type==="L"?N.lineTo(X.x,X.y):X.type==="C"?N.bezierCurveTo(X.x1,X.y1,X.x2,X.y2,X.x,X.y):X.type==="Q"?N.quadraticCurveTo(X.x1,X.y1,X.x,X.y):X.type==="Z"&&N.closePath()}}catch(Z){B=!0,Y=Z}finally{try{I||H.return==null||H.return()}finally{if(B)throw Y}}return P._doStroke&&P._strokeSet&&N.stroke(),P._doFill&&(P._fillSet||P._setFill(n._DEFAULT_TEXT_FILL),N.fill()),this},s.default.Font.prototype._textWidth=function(E,T){return this.font.getAdvanceWidth(E,T)},s.default.Font.prototype._textAscent=function(E){return this.font.ascender*this._scale(E)},s.default.Font.prototype._textDescent=function(E){return-this.font.descender*this._scale(E)},s.default.Font.prototype._scale=function(E){return 1/this.font.unitsPerEm*(E||this.parent._renderer._textSize)},s.default.Font.prototype._handleAlignment=function(E,T,C,R,P){var N=E._textSize;switch(P===void 0&&(P=this._textWidth(T,N)),E._textAlign){case n.CENTER:C-=P/2;break;case n.RIGHT:C-=P}switch(E._textBaseline){case n.TOP:R+=this._textAscent(N);break;case n.CENTER:R+=this._textAscent(N)/2;break;case n.BOTTOM:R-=this._textDescent(N)}return{x:C,y:R}},e=s.default,f.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.append=function(a,s){return a.push(s),a},e.default.prototype.arrayCopy=function(a,s,n,l,h){var m,i;a=h!==void 0?(i=Math.min(h,a.length),m=l,a.slice(s,i+s)):(i=n!==void 0?(i=n,Math.min(i,a.length)):a.length,n=s,a.slice(m=0,i)),Array.prototype.splice.apply(n,[m,i].concat(a))},e.default.prototype.concat=function(a,s){return a.concat(s)},e.default.prototype.reverse=function(a){return a.reverse()},e.default.prototype.shorten=function(a){return a.pop(),a},e.default.prototype.shuffle=function(a,s){for(var n,l,h=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a),m=(a=s||h?a:a.slice()).length;1<m;)n=this.random(0,1)*m|0,l=a[--m],a[m]=a[n],a[n]=l;return a},e.default.prototype.sort=function(a,l){var n=l?a.slice(0,Math.min(l,a.length)):a,l=l?a.slice(Math.min(l,a.length)):[];return(n=typeof n[0]=="string"?n.sort():n.sort(function(h,m){return h-m})).concat(l)},e.default.prototype.splice=function(a,s,n){return Array.prototype.splice.apply(a,[n,0].concat(s)),a},e.default.prototype.subset=function(a,s,n){return n!==void 0?a.slice(s,s+n):a.slice(s,a.length)},e=e.default,f.default=e},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(e,d,f){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.prototype.float=function(s){return s instanceof Array?s.map(parseFloat):parseFloat(s)},a.default.prototype.int=function(s){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return s===1/0||s==="Infinity"?1/0:s===-1/0||s==="-Infinity"?-1/0:typeof s=="string"?parseInt(s,n):typeof s=="number"?0|s:typeof s=="boolean"?s?1:0:s instanceof Array?s.map(function(l){return a.default.prototype.int(l,n)}):void 0},a.default.prototype.str=function(s){return s instanceof Array?s.map(a.default.prototype.str):String(s)},a.default.prototype.boolean=function(s){return typeof s=="number"?s!==0:typeof s=="string"?s.toLowerCase()==="true":typeof s=="boolean"?s:s instanceof Array?s.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(s){return s=a.default.prototype.int(s,10),typeof s=="number"?(s+128)%256-128:s instanceof Array?s.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(s){return typeof s!="number"||isNaN(s)?s instanceof Array?s.map(a.default.prototype.char):typeof s=="string"?a.default.prototype.char(parseInt(s,10)):void 0:String.fromCharCode(s)},a.default.prototype.unchar=function(s){return typeof s=="string"&&s.length===1?s.charCodeAt(0):s instanceof Array?s.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(s,n){if(n=n??8,s instanceof Array)return s.map(function(h){return a.default.prototype.hex(h,n)});if(s===1/0||s===-1/0)return(s===1/0?"F":"0").repeat(n);if(typeof s=="number"){s<0&&(s=4294967295+s+1);for(var l=Number(s).toString(16).toUpperCase();l.length<n;)l="0".concat(l);return l=l.length>=n?l.substring(l.length-n,l.length):l}},a.default.prototype.unhex=function(s){return s instanceof Array?s.map(a.default.prototype.unhex):parseInt("0x".concat(s),16)},e=a.default,f.default=e},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(e,d,f){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(m=e("../core/main"))&&m.__esModule?m:{default:m};function s(p,o,c){var u=p<0,p=u?p.toString().substring(1):p.toString(),g=p.indexOf("."),v=g!==-1?p.substring(0,g):p,b=g!==-1?p.substring(g+1):"",_=u?"-":"";if(c!==void 0){u="",(g!==-1||0<c-b.length)&&(u="."),b.length>c&&(b=b.substring(0,c));for(var x=0;x<o-v.length;x++)_+="0";for(var _=(_+=v)+u+b,A=0;A<c-b.length;A++)_+="0";return _}for(var E=0;E<Math.max(o-v.length,0);E++)_+="0";return _+=p}function n(p,o){var c=(p=p.toString()).indexOf("."),u=c!==-1?p.substring(c):"",p=(p=c!==-1?p.substring(0,c):p).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(o===0)u="";else if(o!==void 0)if(o>u.length)for(var g=o-(u+=c===-1?".":"").length+1,v=0;v<g;v++)u+="0";else u=u.substring(0,o+1);return p+u}function l(i){return 0<parseFloat(i)?"+".concat(i.toString()):i.toString()}function h(i){return 0<=parseFloat(i)?" ".concat(i.toString()):i.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.join=function(i,o){return a.default._validateParameters("join",arguments),i.join(o)},a.default.prototype.match=function(i,o){return a.default._validateParameters("match",arguments),i.match(o)},a.default.prototype.matchAll=function(i,o){a.default._validateParameters("matchAll",arguments);for(var c=new RegExp(o,"g"),u=c.exec(i),p=[];u!==null;)p.push(u),u=c.exec(i);return p},a.default.prototype.nf=function(i,o,c){return a.default._validateParameters("nf",arguments),i instanceof Array?i.map(function(u){return s(u,o,c)}):Object.prototype.toString.call(i)==="[object Arguments]"?i.length===3?this.nf(i[0],i[1],i[2]):i.length===2?this.nf(i[0],i[1]):this.nf(i[0]):s(i,o,c)},a.default.prototype.nfc=function(i,o){return a.default._validateParameters("nfc",arguments),i instanceof Array?i.map(function(c){return n(c,o)}):n(i,o)},a.default.prototype.nfp=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];a.default._validateParameters("nfp",o);var u=a.default.prototype.nf.apply(this,o);return u instanceof Array?u.map(l):l(u)},a.default.prototype.nfs=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];a.default._validateParameters("nfs",o);var u=a.default.prototype.nf.apply(this,o);return u instanceof Array?u.map(h):h(u)},a.default.prototype.split=function(i,o){return a.default._validateParameters("split",arguments),i.split(o)},a.default.prototype.splitTokens=function(i,o){var c,u;return a.default._validateParameters("splitTokens",arguments),u=o!==void 0?(u=/\]/g.exec(o=o),(c=/\[/g.exec(o))&&u?(o=o.slice(0,u.index)+o.slice(u.index+1),c=/\[/g.exec(o),o=o.slice(0,c.index)+o.slice(c.index+1),new RegExp("[\\[".concat(o,"\\]]"),"g")):u?(o=o.slice(0,u.index)+o.slice(u.index+1),new RegExp("[".concat(o,"\\]]"),"g")):c?(o=o.slice(0,c.index)+o.slice(c.index+1),new RegExp("[".concat(o,"\\[]"),"g")):new RegExp("[".concat(o,"]"),"g")):/\s/g,i.split(u).filter(function(p){return p})},a.default.prototype.trim=function(i){return a.default._validateParameters("trim",arguments),i instanceof Array?i.map(this.trim):i.trim()};var m=a.default;f.default=m},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.day=function(){return new Date().getDate()},e.default.prototype.hour=function(){return new Date().getHours()},e.default.prototype.minute=function(){return new Date().getMinutes()},e.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return new Date().getMonth()+1},e.default.prototype.second=function(){return new Date().getSeconds()},e.default.prototype.year=function(){return new Date().getFullYear()},e=e.default,f.default=e},{"../core/main":267}],310:[function(e,d,f){function a(o){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(o)}function s(o){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(c){return a(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":a(c)})(o)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(i=e("../core/main"))&&i.__esModule?i:{default:i},l=(e("./p5.Geometry"),function(o){if(o&&o.__esModule)return o;if(o===null||s(o)!=="object"&&typeof o!="function")return{default:o};var c=h();if(c&&c.has(o))return c.get(o);var u,p={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in o){var v;Object.prototype.hasOwnProperty.call(o,u)&&((v=g?Object.getOwnPropertyDescriptor(o,u):null)&&(v.get||v.set)?Object.defineProperty(p,u,v):p[u]=o[u])}return p.default=o,c&&c.set(o,p),p}(e("../core/constants")));function h(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,h=function(){return o},o)}n.default.prototype.plane=function(o,c,u,p){this._assert3d("plane"),n.default._validateParameters("plane",arguments),o===void 0&&(o=50),c===void 0&&(c=o),p===void 0&&(p=1);var g,v="plane|".concat(u=u===void 0?1:u,"|").concat(p);return this._renderer.geometryInHash(v)||((g=new n.default.Geometry(u,p,function(){for(var b,_,x=0;x<=this.detailY;x++)for(var A=x/this.detailY,E=0;E<=this.detailX;E++)b=E/this.detailX,_=new n.default.Vector(b-.5,A-.5,0),this.vertices.push(_),this.uvs.push(b,A)})).computeFaces().computeNormals(),u<=1&&p<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(v,g)),this._renderer.drawBuffersScaled(v,o,c,1),this},n.default.prototype.box=function(o,c,u,p,g){this._assert3d("box"),n.default._validateParameters("box",arguments),o===void 0&&(o=50),c===void 0&&(c=o),u===void 0&&(u=c);var v,b=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,b=(g===void 0&&(g=b?1:4),"box|".concat(p=p===void 0?b?1:4:p,"|").concat(g));return this._renderer.geometryInHash(b)||((v=new n.default.Geometry(p,g,function(){var _=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var x=0;x<_.length;x++){for(var A=_[x],E=4*x,T=0;T<4;T++){var C=A[T],C=new n.default.Vector((2*(1&C)-1)/2,((2&C)-1)/2,((4&C)/2-1)/2);this.vertices.push(C),this.uvs.push(1&T,(2&T)/2)}this.faces.push([E,1+E,2+E]),this.faces.push([2+E,1+E,3+E])}})).computeNormals(),p<=4&&g<=4?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(b,v)),this._renderer.drawBuffersScaled(b,o,c,u),this},n.default.prototype.sphere=function(o,c,u){return this._assert3d("sphere"),n.default._validateParameters("sphere",arguments),this.ellipsoid(o=o===void 0?50:o,o,o,c=c===void 0?24:c,u=u===void 0?16:u),this};function m(o,c,u,p,g,v,b){o=o<=0?1:o,c=c<0?0:c,u=u<=0?o:u,p=p<3?3:p;for(var _,x,A=(v=v===void 0||v)?-2:0,E=(g=g<1?1:g)+((b=b===void 0?c!==0:b)?2:0),T=Math.atan2(o-c,u),C=Math.sin(T),R=Math.cos(T),P=A;P<=E;++P){var N=P/g,k=u*N,I=void 0,I=P<0?(N=k=0,o):g<P?(k=u,N=1,c):o+(c-o)*N;for(P!==-2&&P!==g+2||(I=0),k-=u/2,_=0;_<p;++_){var B=_/(p-1),W=2*Math.PI*B,Y=Math.sin(W),W=Math.cos(W),H=(this.vertices.push(new n.default.Vector(Y*I,k,W*I)),void 0),H=P<0?new n.default.Vector(0,-1,0):g<P&&c?new n.default.Vector(0,1,0):new n.default.Vector(Y*R,C,W*R);this.vertexNormals.push(H),this.uvs.push(B,N)}}var X=0;if(v){for(x=0;x<p;++x)this.faces.push([X+x,X+p+(x+1)%p,X+p+x]);X+=2*p}for(P=0;P<g;++P){for(_=0;_<p;++_){var Z=(_+1)%p;this.faces.push([X+_,X+Z,X+p+Z]),this.faces.push([X+_,X+p+Z,X+p+_])}X+=p}if(b)for(X+=p,_=0;_<p;++_)this.faces.push([X+_,X+(_+1)%p,X+p])}n.default.prototype.cylinder=function(o,c,u,p,g,v){this._assert3d("cylinder"),n.default._validateParameters("cylinder",arguments),o===void 0&&(o=50),c===void 0&&(c=o),p===void 0&&(p=1),v===void 0&&(v=!0),g===void 0&&(g=!0);var b,_="cylinder|".concat(u=u===void 0?24:u,"|").concat(p,"|").concat(g,"|").concat(v);return this._renderer.geometryInHash(_)||(b=new n.default.Geometry(u,p),m.call(b,1,1,1,u,p,g,v),u<=24&&p<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,b)),this._renderer.drawBuffersScaled(_,o,c,o),this},n.default.prototype.cone=function(o,c,u,p,g){this._assert3d("cone"),n.default._validateParameters("cone",arguments),o===void 0&&(o=50),c===void 0&&(c=o),p===void 0&&(p=1),g===void 0&&(g=!0);var v,b="cone|".concat(u=u===void 0?24:u,"|").concat(p,"|").concat(g);return this._renderer.geometryInHash(b)||(v=new n.default.Geometry(u,p),m.call(v,1,0,1,u,p,g,!1),u<=24&&p<=16?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,v)),this._renderer.drawBuffersScaled(b,o,c,o),this},n.default.prototype.ellipsoid=function(o,c,u,p,g){this._assert3d("ellipsoid"),n.default._validateParameters("ellipsoid",arguments),o===void 0&&(o=50),c===void 0&&(c=o),u===void 0&&(u=o),g===void 0&&(g=16);var v,b="ellipsoid|".concat(p=p===void 0?24:p,"|").concat(g);return this._renderer.geometryInHash(b)||((v=new n.default.Geometry(p,g,function(){for(var _=0;_<=this.detailY;_++)for(var x=_/this.detailY,A=Math.PI*x-Math.PI/2,E=Math.cos(A),T=Math.sin(A),C=0;C<=this.detailX;C++){var R=C/this.detailX,N=2*Math.PI*R,P=Math.cos(N),N=Math.sin(N),N=new n.default.Vector(E*N,T,E*P);this.vertices.push(N),this.vertexNormals.push(N),this.uvs.push(R,x)}})).computeFaces(),p<=24&&g<=24?v._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(b,v)),this._renderer.drawBuffersScaled(b,o,c,u),this},n.default.prototype.torus=function(o,b,u,p){if(this._assert3d("torus"),n.default._validateParameters("torus",arguments),o===void 0)o=50;else if(!o)return;if(b===void 0)b=10;else if(!b)return;u===void 0&&(u=24),p===void 0&&(p=16);var g,v=(b/o).toPrecision(4),b="torus|".concat(v,"|").concat(u,"|").concat(p);return this._renderer.geometryInHash(b)||((g=new n.default.Geometry(u,p,function(){for(var _=0;_<=this.detailY;_++)for(var x=_/this.detailY,A=2*Math.PI*x,E=Math.cos(A),T=Math.sin(A),C=1+v*E,R=0;R<=this.detailX;R++){var P=R/this.detailX,N=2*Math.PI*P,I=Math.cos(N),N=Math.sin(N),k=new n.default.Vector(C*I,C*N,v*T),I=new n.default.Vector(E*I,E*N,T);this.vertices.push(k),this.vertexNormals.push(I),this.uvs.push(P,x)}})).computeFaces(),u<=24&&p<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,g)),this._renderer.drawBuffersScaled(b,o,o,o),this},n.default.RendererGL.prototype.point=function(o,c,u){var p=[];return p.push(new n.default.Vector(o,c,u=u===void 0?0:u)),this._drawPoints(p,this.immediateMode.buffers.point),this},n.default.RendererGL.prototype.triangle=function(b){var c=b[0],u=b[1],p=b[2],g=b[3],v=b[4],b=b[5],_=(this.geometryInHash("tri")||((_=new n.default.Geometry(1,1,function(){var A=[];A.push(new n.default.Vector(0,0,0)),A.push(new n.default.Vector(0,1,0)),A.push(new n.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}))._makeTriangleEdges()._edgesToVertices(),_.computeNormals(),this.createBuffers("tri",_)),this.uMVMatrix.copy());try{var x=new n.default.Matrix([p-c,g-u,0,0,v-c,b-u,0,0,0,0,1,0,c,u,0,1]).mult(this.uMVMatrix);this.uMVMatrix=x,this.drawBuffers("tri")}finally{this.uMVMatrix=_}return this},n.default.RendererGL.prototype.ellipse=function(o){this.arc(o[0],o[1],o[2],o[3],0,l.TWO_PI,l.OPEN,o[4])},n.default.RendererGL.prototype.arc=function(o){var c,u=arguments[1],p=arguments[2],g=arguments[3],v=arguments[4],b=arguments[5],_=arguments[6],x=arguments[7]||25,A=(Math.abs(b-v)>=l.TWO_PI?"".concat(E="ellipse","|"):"".concat(E="arc","|").concat(v,"|").concat(b,"|").concat(_,"|")).concat(x,"|"),E=(this.geometryInHash(A)||((c=new n.default.Geometry(x,1,function(){if(this.strokeIndices=[],v.toFixed(10)!==b.toFixed(10)){_!==l.PIE&&_!==void 0||(this.vertices.push(new n.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=x;T++){var R=(b-v)*(T/x)+v,C=.5+Math.cos(R)/2,R=.5+Math.sin(R)/2;this.vertices.push(new n.default.Vector(C,R,0)),this.uvs.push([C,R]),T<x-1&&(this.faces.push([0,T+1,T+2]),this.strokeIndices.push([T+1,T+2]))}switch(_){case l.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case l.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case l.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),x<=50?c._makeTriangleEdges()._edgesToVertices(c):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(E," with more than 50 detail")),this.createBuffers(A,c)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([o,u,0]),this.uMVMatrix.scale(p,g,1),this.drawBuffers(A)}finally{this.uMVMatrix=E}return this},n.default.RendererGL.prototype.rect=function(o){var c=o[0],u=o[1],p=o[2],g=o[3];if(o[4]===void 0){var _=this._pInst._glAttributes.perPixelLighting,v=o[4]||(_?1:24),b=o[5]||(_?1:16),_="rect|".concat(v,"|").concat(b),x=(this.geometryInHash(_)||((x=new n.default.Geometry(v,b,function(){for(var H=0;H<=this.detailY;H++)for(var X=H/this.detailY,Z=0;Z<=this.detailX;Z++){var q=Z/this.detailX,ee=new n.default.Vector(q,X,0);this.vertices.push(ee),this.uvs.push(q,X)}0<v&&0<b&&(this.strokeIndices=[[0,v],[v,(v+1)*(b+1)-1],[(v+1)*(b+1)-1,(v+1)*b],[(v+1)*b,0]])})).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(_,x)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([c,u,0]),this.uMVMatrix.scale(p,g,1),this.drawBuffers(_)}finally{this.uMVMatrix=x}}else{var _=o[4],x=o[5]===void 0?_:o[5],A=o[6]===void 0?x:o[6],o=o[7]===void 0?A:o[7],N=p,E=g,R=((N+=c)<c&&(R=c,c=N,N=R),(E+=u)<u&&(R=u,u=E,E=R),Math.min((N-c)/2,(E-u)/2)),T=(R<_&&(_=R),R<x&&(x=R),R<A&&(A=R),R<o&&(o=R),c),C=u,R=N,c=E,P=(this.beginShape(),x!==0?(this.vertex(R-x,C),this.quadraticVertex(R,C,R,C+x)):this.vertex(R,C),A!==0?(this.vertex(R,c-A),this.quadraticVertex(R,c,R-A,c)):this.vertex(R,c),o!==0?(this.vertex(T+o,c),this.quadraticVertex(T,c,T,c-o)):this.vertex(T,c),_!==0?(this.vertex(T,C+_),this.quadraticVertex(T,C,T+_,C)):this.vertex(T,C),!(this.immediateMode.geometry.uvs.length=0)),u=!1,N=void 0;try{for(var k,I=this.immediateMode.geometry.vertices[Symbol.iterator]();!(P=(k=I.next()).done);P=!0){var B=k.value,Y=(B.x-T)/p,W=(B.y-C)/g;this.immediateMode.geometry.uvs.push(Y,W)}}catch(L){u=!0,N=L}finally{try{P||I.return==null||I.return()}finally{if(u)throw N}}this.endShape(l.CLOSE)}return this},n.default.RendererGL.prototype.quad=function(o,c,u,p,g,v,b,_,x,A,E,T,C,R){C===void 0&&(C=2),R===void 0&&(R=2);var P="quad|".concat(o,"|").concat(c,"|").concat(u,"|").concat(p,"|").concat(g,"|").concat(v,"|").concat(b,"|").concat(_,"|").concat(x,"|").concat(A,"|").concat(E,"|").concat(T,"|").concat(C,"|").concat(R);if(!this.geometryInHash(P)){var N=new n.default.Geometry(C,R,function(){for(var H=1/(this.detailX-1),X=1/(this.detailY-1),Z=0;Z<this.detailY;Z++)for(var q=0;q<this.detailX;q++){var ee=q*H,L=Z*X;this.vertices.push(new n.default.Vector((1-ee)*((1-L)*o+L*A)+ee*((1-L)*p+L*b),(1-ee)*((1-L)*c+L*E)+ee*((1-L)*g+L*_),(1-ee)*((1-L)*u+L*T)+ee*((1-L)*v+L*x))),this.uvs.push([ee,L])}});N.faces=[];for(var k=0;k<R-1;k++)for(var I=0;I<C-1;I++){var B=I+k*C,Y=I+1+(k+1)*C,W=I+(k+1)*C;N.faces.push([B,I+1+k*C,Y]),N.faces.push([B,Y,W])}N.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(P,N)}return this.drawBuffers(P),this},n.default.RendererGL.prototype.bezier=function(o,c,u,p,g,v,b,_,x,A,E,T){arguments.length===8&&(E=_,A=b,_=v,b=g,g=p,p=u,u=v=x=T=0);var C=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=C;R++){var P=Math.pow(1-R/C,3),N=R/C*3*Math.pow(1-R/C,2),k=3*Math.pow(R/C,2)*(1-R/C),I=Math.pow(R/C,3);this.vertex(o*P+p*N+b*k+A*I,c*P+g*N+_*k+E*I,u*P+v*N+x*k+T*I)}return this.endShape(),this},n.default.RendererGL.prototype.curve=function(o,c,u,p,g,v,b,_,x,A,E,T){arguments.length===8&&(A=b,E=_,b=g,_=p,g=p=u,u=v=x=T=0);var C=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=C;R++){var P=.5*Math.pow(R/C,3),N=.5*Math.pow(R/C,2),k=R/C*.5;this.vertex(P*(3*p-o-3*b+A)+N*(2*o-5*p+4*b-A)+k*(-o+b)+2*p*.5,P*(3*g-c-3*_+E)+N*(2*c-5*g+4*_-E)+k*(-c+_)+2*g*.5,P*(3*v-u-3*x+T)+N*(2*u-5*v+4*x-T)+k*(-u+x)+2*v*.5)}return this.endShape(),this},n.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(l.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},n.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var o,c,u,p,g,v,b=[],_=[],x=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var A=1/this._lutBezierDetail,E=0,T=1,C=0;E<1;){if(v=parseFloat(E.toFixed(6)),this._lookUpTableBezier[C]=this._bezierCoefficients(v),T.toFixed(6)===A.toFixed(6)){v=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++C,this._lookUpTableBezier[C]=this._bezierCoefficients(v);break}E+=A,T-=A,++C}}var R=this._lookUpTableBezier.length;if(x===6){for(this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],_=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],g=0;g<R;g++)c=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],u=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],this.vertex(c,u);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(x===9){for(this.isBezier=!0,b=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],_=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],o=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],g=0;g<R;g++)c=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],u=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],p=o[0]*this._lookUpTableBezier[g][0]+o[1]*this._lookUpTableBezier[g][1]+o[2]*this._lookUpTableBezier[g][2]+o[3]*this._lookUpTableBezier[g][3],this.vertex(c,u,p);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},n.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var o,c,u,p,g,v,b=[],_=[],x=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var A=1/this._lutQuadraticDetail,E=0,T=1,C=0;E<1;){if(v=parseFloat(E.toFixed(6)),this._lookUpTableQuadratic[C]=this._quadraticCoefficients(v),T.toFixed(6)===A.toFixed(6)){v=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++C,this._lookUpTableQuadratic[C]=this._quadraticCoefficients(v);break}E+=A,T-=A,++C}}var R=this._lookUpTableQuadratic.length;if(x===4){for(this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],_=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],g=0;g<R;g++)c=b[0]*this._lookUpTableQuadratic[g][0]+b[1]*this._lookUpTableQuadratic[g][1]+b[2]*this._lookUpTableQuadratic[g][2],u=_[0]*this._lookUpTableQuadratic[g][0]+_[1]*this._lookUpTableQuadratic[g][1]+_[2]*this._lookUpTableQuadratic[g][2],this.vertex(c,u);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(x===6){for(this.isQuadratic=!0,b=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],_=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],o=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],g=0;g<R;g++)c=b[0]*this._lookUpTableQuadratic[g][0]+b[1]*this._lookUpTableQuadratic[g][1]+b[2]*this._lookUpTableQuadratic[g][2],u=_[0]*this._lookUpTableQuadratic[g][0]+_[1]*this._lookUpTableQuadratic[g][1]+_[2]*this._lookUpTableQuadratic[g][2],p=o[0]*this._lookUpTableQuadratic[g][0]+o[1]*this._lookUpTableQuadratic[g][1]+o[2]*this._lookUpTableQuadratic[g][2],this.vertex(c,u,p);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},n.default.RendererGL.prototype.curveVertex=function(){var o,c,u,p,g,v,b=[],_=[],x=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var A=1/this._lutBezierDetail,E=0,T=1,C=0;E<1;){if(v=parseFloat(E.toFixed(6)),this._lookUpTableBezier[C]=this._bezierCoefficients(v),T.toFixed(6)===A.toFixed(6)){v=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++C,this._lookUpTableBezier[C]=this._bezierCoefficients(v);break}E+=A,T-=A,++C}}var R=this._lookUpTableBezier.length;if(x===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<R;g++)c=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],u=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],this.vertex(c,u);for(g=0;g<x;g++)this.immediateMode._curveVertex.shift()}}else if(x===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,b=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),_=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),o=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<R;g++)c=b[0]*this._lookUpTableBezier[g][0]+b[1]*this._lookUpTableBezier[g][1]+b[2]*this._lookUpTableBezier[g][2]+b[3]*this._lookUpTableBezier[g][3],u=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],p=o[0]*this._lookUpTableBezier[g][0]+o[1]*this._lookUpTableBezier[g][1]+o[2]*this._lookUpTableBezier[g][2]+o[3]*this._lookUpTableBezier[g][3],this.vertex(c,u,p);for(g=0;g<x;g++)this.immediateMode._curveVertex.shift()}},n.default.RendererGL.prototype.image=function(o,T,u,C,g,v,b,_,x){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(o),this._pInst.textureMode(l.NORMAL);var A=0,E=(T<=o.width&&(A=T/o.width),1),T=(T+C<=o.width&&(E=(T+C)/o.width),0),C=(u<=o.height&&(T=u/o.height),1);u+g<=o.height&&(C=(u+g)/o.height),this.beginShape(),this.vertex(v,b,0,A,T),this.vertex(v+_,b,0,E,T),this.vertex(v+_,b+x,0,E,C),this.vertex(v,b+x,0,A,C),this.endShape(l.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(l.REMOVE)};var i=n.default;f.default=i},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}n.default.prototype.orbitControl=function(i,o,c){var u,p;if(this._assert3d("orbitControl"),n.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return u=this._renderer._curCamera,i===void 0&&(i=1),o===void 0&&(o=i),c===void 0&&(c=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),p=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,c*p):this._renderer._curCamera._orbit(0,0,-c*p)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(c=-i*(this.mouseX-this.pmouseX)/p,p=o*(this.mouseY-this.pmouseY)/p,this._renderer._curCamera._orbit(c,p,0)):this.mouseButton===this.RIGHT&&(c=u._getLocalAxes(),(p=Math.sqrt(c.x[0]*c.x[0]+c.x[2]*c.x[2]))!==0&&(c.x[0]/=p,c.x[2]/=p),(p=Math.sqrt(c.y[0]*c.y[0]+c.y[2]*c.y[2]))!==0&&(c.y[0]/=p,c.y[2]/=p),p=-1*i*(this.mouseX-this.pmouseX),i=-1*o*(this.mouseY-this.pmouseY),u.setPosition(u.eyeX+p*c.x[0]+i*c.z[0],u.eyeY,u.eyeZ+p*c.x[2]+i*c.z[2]))),this},n.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];n.default._validateParameters("debugMode",o);for(var u=this._registeredMethods.post.length-1;0<=u;u--)this._registeredMethods.post[u].toString()!==this._grid().toString()&&this._registeredMethods.post[u].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(u,1);o[0]===l.GRID?this.registerMethod("post",this._grid.call(this,o[1],o[2],o[3],o[4],o[5])):o[0]===l.AXES?this.registerMethod("post",this._axesIcon.call(this,o[1],o[2],o[3],o[4])):(this.registerMethod("post",this._grid.call(this,o[0],o[1],o[2],o[3],o[4])),this.registerMethod("post",this._axesIcon.call(this,o[5],o[6],o[7],o[8])))},n.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var i=this._registeredMethods.post.length-1;0<=i;i--)this._registeredMethods.post[i].toString()!==this._grid().toString()&&this._registeredMethods.post[i].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(i,1)},n.default.prototype._grid=function(i,o,c,u,p){i===void 0&&(i=this.width/2),o===void 0&&(o=Math.round(i/30)<4?4:Math.round(i/30)),c===void 0&&(c=0),u===void 0&&(u=0),p===void 0&&(p=0);var g=i/o,v=i/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var b=0;b<=o;b++)this.beginShape(this.LINES),this.vertex(-v+c,u,b*g-v+p),this.vertex(v+c,u,b*g-v+p),this.endShape();for(var _=0;_<=o;_++)this.beginShape(this.LINES),this.vertex(_*g-v+c,u,-v+p),this.vertex(_*g-v+c,u,v+p),this.endShape();this.pop()}},n.default.prototype._axesIcon=function(i,o,c,u){return i===void 0&&(i=40<this.width/20?this.width/20:40),o===void 0&&(o=-this.width/4),c===void 0&&(c=o),u===void 0&&(u=o),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(o,c,u),this.vertex(o+i,c,u),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(o,c,u),this.vertex(o,c+i,u),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(o,c,u),this.vertex(o,c,u+i),this.endShape(),this.pop()}};var m=n.default;f.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}n.default.prototype.ambientLight=function(i,o,c,u){this._assert3d("ambientLight"),n.default._validateParameters("ambientLight",arguments);var p=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(p._array[0],p._array[1],p._array[2]),this._renderer._enableLighting=!0,this},n.default.prototype.specularColor=function(i,o,c){this._assert3d("specularColor"),n.default._validateParameters("specularColor",arguments);var u=this.color.apply(this,arguments);return this._renderer.specularColors=[u._array[0],u._array[1],u._array[2]],this},n.default.prototype.directionalLight=function(i,x,_,u,p,g){this._assert3d("directionalLight"),n.default._validateParameters("directionalLight",arguments),i=i instanceof n.default.Color?i:this.color(i,x,_);var v,b,x=arguments[arguments.length-1],_=typeof x=="number"?(v=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(v=x.x,b=x.y,x.z),x=Math.sqrt(v*v+b*b+_*_);return this._renderer.directionalLightDirections.push(v/x,b/x,_/x),this._renderer.directionalLightDiffuseColors.push(i._array[0],i._array[1],i._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.pointLight=function(i,_,x,u,p,g){this._assert3d("pointLight"),n.default._validateParameters("pointLight",arguments),i=i instanceof n.default.Color?i:this.color(i,_,x);var v,b,_=arguments[arguments.length-1],x=typeof _=="number"?(v=arguments[arguments.length-3],b=arguments[arguments.length-2],arguments[arguments.length-1]):(v=_.x,b=_.y,_.z);return this._renderer.pointLightPositions.push(v,b,x),this._renderer.pointLightDiffuseColors.push(i._array[0],i._array[1],i._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.lights=function(){var i;return this._assert3d("lights"),this._colorMode===l.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(i=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,i),this.directionalLight(0,0,i,0,0,-1)),this},n.default.prototype.lightFalloff=function(i,o,c){return this._assert3d("lightFalloff"),n.default._validateParameters("lightFalloff",arguments),i<0&&(i=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),o<0&&(o=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),i===0&&o===0&&c===0&&(i=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=i,this._renderer.linearAttenuation=o,this._renderer.quadraticAttenuation=c,this},n.default.prototype.spotLight=function(i,o,c,u,p,g,v,b,_,x,A){this._assert3d("spotLight"),n.default._validateParameters("spotLight",arguments);var E,T,C,R=arguments.length;switch(R){case 11:case 10:E=this.color(i,o,c),T=new n.default.Vector(u,p,g),C=new n.default.Vector(v,b,_);break;case 9:i instanceof n.default.Color?(E=i,T=new n.default.Vector(o,c,u),C=new n.default.Vector(p,g,v),x=b,A=_):u instanceof n.default.Vector?(E=this.color(i,o,c),T=u,C=new n.default.Vector(p,g,v),x=b,A=_):v instanceof n.default.Vector?(E=this.color(i,o,c),T=new n.default.Vector(u,p,g),C=v,x=b,A=_):(E=this.color(i,o,c),T=new n.default.Vector(u,p,g),C=new n.default.Vector(v,b,_));break;case 8:x=(C=i instanceof n.default.Color?(E=i,T=new n.default.Vector(o,c,u),new n.default.Vector(p,g,v)):u instanceof n.default.Vector?(E=this.color(i,o,c),T=u,new n.default.Vector(p,g,v)):(E=this.color(i,o,c),T=new n.default.Vector(u,p,g),v),b);break;case 7:i instanceof n.default.Color&&o instanceof n.default.Vector?(E=i,T=o,C=new n.default.Vector(c,u,p),x=g,A=v):i instanceof n.default.Color&&p instanceof n.default.Vector?(E=i,T=new n.default.Vector(o,c,u),C=p,x=g,A=v):u instanceof n.default.Vector&&p instanceof n.default.Vector?(E=this.color(i,o,c),T=u,C=p,x=g,A=v):C=i instanceof n.default.Color?(E=i,T=new n.default.Vector(o,c,u),new n.default.Vector(p,g,v)):u instanceof n.default.Vector?(E=this.color(i,o,c),T=u,new n.default.Vector(p,g,v)):(E=this.color(i,o,c),T=new n.default.Vector(u,p,g),v);break;case 6:u instanceof n.default.Vector&&p instanceof n.default.Vector?(E=this.color(i,o,c),T=u,C=p,x=g):i instanceof n.default.Color&&p instanceof n.default.Vector?(E=i,T=new n.default.Vector(o,c,u),C=p,x=g):i instanceof n.default.Color&&o instanceof n.default.Vector&&(E=i,T=o,C=new n.default.Vector(c,u,p),x=g);break;case 5:i instanceof n.default.Color&&o instanceof n.default.Vector&&c instanceof n.default.Vector?(E=i,T=o,C=c,x=u,A=p):u instanceof n.default.Vector&&p instanceof n.default.Vector?(E=this.color(i,o,c),T=u,C=p):i instanceof n.default.Color&&p instanceof n.default.Vector?(E=i,T=new n.default.Vector(o,c,u),C=p):i instanceof n.default.Color&&o instanceof n.default.Vector&&(E=i,T=o,C=new n.default.Vector(c,u,p));break;case 4:E=i,T=o,C=c,x=u;break;case 3:E=i,T=o,C=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(T.x,T.y,T.z),C.normalize(),this._renderer.spotLightDirections.push(C.x,C.y,C.z),x===void 0&&(x=Math.PI/3),A!==void 0&&A<1?(A=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):A===void 0&&(A=100),x=this._renderer._pInst._toRadians(x),this._renderer.spotLightAngle.push(Math.cos(x)),this._renderer.spotLightConc.push(A),this._renderer._enableLighting=!0,this},n.default.prototype.noLights=function(){return this._assert3d("noLights"),n.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var m=n.default;f.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(e,d,f){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(s=e("../core/main"))&&s.__esModule?s:{default:s};e("./p5.Geometry"),a.default.prototype.loadModel=function(n){a.default._validateParameters("loadModel",arguments);var l,h,m,i=n.slice(-4),o=(typeof arguments[1]=="boolean"?(l=arguments[1],h=arguments[2],m=arguments[3],arguments[4]!==void 0&&(i=arguments[4])):(l=!1,h=arguments[1],m=arguments[2],arguments[3]!==void 0&&(i=arguments[3])),new a.default.Geometry),c=(o.gid="".concat(n,"|").concat(l),this);return i.match(/\.stl$/i)?this.httpDo(n,"GET","arrayBuffer",function(u){(function(p,g){if(function(v){for(var b=new DataView(v),_=[115,111,108,105,100],x=0;x<5;x++)if(function(A,E,T){for(var C=0,R=A.length;C<R;C++)if(A[C]!==E.getUint8(T+C,!1))return;return 1}(_,b,x))return;return 1}(g))(function(v,b){for(var _,x,A,E,T,C,R,P=new DataView(b),N=P.getUint32(80,!0),k=!1,I=0;I<70;I++)P.getUint32(I,!1)===1129270351&&P.getUint8(I+4)===82&&P.getUint8(I+5)===61&&(k=!0,E=[],T=P.getUint8(I+6)/255,C=P.getUint8(I+7)/255,R=P.getUint8(I+8)/255);for(var B=0;B<N;B++){for(var Y,W=84+50*B,H=P.getFloat32(W,!0),X=P.getFloat32(4+W,!0),Z=P.getFloat32(8+W,!0),q=(k&&(Y=P.getUint16(48+W,!0),A=32768&Y?(_=T,x=C,R):(_=(31&Y)/31,x=(Y>>5&31)/31,(Y>>10&31)/31)),new a.default.Vector(H,X,Z)),ee=1;ee<=3;ee++){var L=W+12*ee,L=new a.default.Vector(P.getFloat32(L,!0),P.getFloat32(4+L,!0),P.getFloat32(8+L,!0));v.vertices.push(L),v.vertexNormals.push(q),k&&E.push(_,x,A)}v.faces.push([3*B,3*B+1,3*B+2]),v.uvs.push([0,0],[0,0],[0,0])}})(p,g);else{if(g=new DataView(g),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");g=new TextDecoder("utf-8").decode(g).split(`
`),function(v,b){for(var _,x,A="",E=[],T=0;T<b.length;++T){for(var C=b[T].trim(),R=C.split(" "),P=0;P<R.length;++P)R[P]===""&&R.splice(P,1);if(R.length!==0)switch(A){case"":if(R[0]!=="solid")return console.error(C),console.error('Invalid state "'.concat(R[0],'", should be "solid"'));A="solid";break;case"solid":if(R[0]!=="facet"||R[1]!=="normal")return console.error(C),console.error('Invalid state "'.concat(R[0],'", should be "facet normal"'));_=new a.default.Vector(parseFloat(R[2]),parseFloat(R[3]),parseFloat(R[4])),v.vertexNormals.push(_,_,_),A="facet normal";break;case"facet normal":if(R[0]!=="outer"||R[1]!=="loop")return console.error(C),console.error('Invalid state "'.concat(R[0],'", should be "outer loop"'));A="vertex";break;case"vertex":if(R[0]==="vertex")x=new a.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])),v.vertices.push(x),v.uvs.push([0,0]),E.push(v.vertices.indexOf(x));else{if(R[0]!=="endloop")return console.error(C),console.error('Invalid state "'.concat(R[0],'", should be "vertex" or "endloop"'));v.faces.push(E),E=[],A="endloop"}break;case"endloop":if(R[0]!=="endfacet")return console.error(C),console.error('Invalid state "'.concat(R[0],'", should be "endfacet"'));A="endfacet";break;case"endfacet":if(R[0]!=="endsolid"){if(R[0]!=="facet"||R[1]!=="normal")return console.error(C),console.error('Invalid state "'.concat(R[0],'", should be "endsolid" or "facet normal"'));_=new a.default.Vector(parseFloat(R[2]),parseFloat(R[3]),parseFloat(R[4])),v.vertexNormals.push(_,_,_),A="facet normal"}break;default:console.error('Invalid state "'.concat(A,'"'))}}}(p,g)}})(o,u),l&&o.normalize(),c._decrementPreload(),typeof h=="function"&&h(o)},m):i.match(/\.obj$/i)?this.loadStrings(n,function(u){for(var p=o,g=u,v={v:[],vt:[],vn:[]},b={},_=0;_<g.length;++_){var x=g[_].trim().split(/\b\s+/);if(0<x.length){if(x[0]==="v"||x[0]==="vn"){var A=new a.default.Vector(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3]));v[x[0]].push(A)}else if(x[0]==="vt")A=[parseFloat(x[1]),1-parseFloat(x[2])],v[x[0]].push(A);else if(x[0]==="f")for(var E=3;E<x.length;++E){for(var T=[],C=[1,E-1,E],R=0;R<C.length;++R){var P=x[C[R]],N=0;if(b[P]!==void 0)N=b[P];else{for(var k=P.split("/"),I=0;I<k.length;I++)k[I]=parseInt(k[I])-1;N=b[P]=p.vertices.length,p.vertices.push(v.v[k[0]].copy()),v.vt[k[1]]?p.uvs.push(v.vt[k[1]].slice()):p.uvs.push([0,0]),v.vn[k[2]]&&p.vertexNormals.push(v.vn[k[2]].copy())}T.push(N)}T[0]!==T[1]&&T[0]!==T[2]&&T[1]!==T[2]&&p.faces.push(T)}}}p.vertexNormals.length===0&&p.computeNormals(),l&&o.normalize(),c._decrementPreload(),typeof h=="function"&&h(o)},m):(a.default._friendlyFileLoadError(3,n),m?m():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),o},a.default.prototype.model=function(n){this._assert3d("model"),a.default._validateParameters("model",arguments),0<n.vertices.length&&(this._renderer.geometryInHash(n.gid)||(n._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(n.gid,n)),this._renderer.drawBuffers(n.gid))};var s=a.default;f.default=s},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.join"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}e("./p5.Texture"),n.default.prototype.loadShader=function(i,o,c,u){n.default._validateParameters("loadShader",arguments),u=u||console.error;function p(){v._decrementPreload(),c&&c(g)}var g=new n.default.Shader,v=this,b=!1,_=!1;return this.loadStrings(i,function(x){g._vertSrc=x.join(`
`),_=!0,b&&p()},u),this.loadStrings(o,function(x){g._fragSrc=x.join(`
`),b=!0,_&&p()},u),g},n.default.prototype.createShader=function(i,o){return this._assert3d("createShader"),n.default._validateParameters("createShader",arguments),new n.default.Shader(this._renderer,i,o)},n.default.prototype.shader=function(i){return this._assert3d("shader"),n.default._validateParameters("shader",arguments),i._renderer===void 0&&(i._renderer=this._renderer),i.init(),i.isStrokeShader()?this._renderer.userStrokeShader=i:(this._renderer.userFillShader=i,this._renderer._useNormalMaterial=!1),this},n.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},n.default.prototype.texture=function(i){return this._assert3d("texture"),n.default._validateParameters("texture",arguments),i.gifProperties&&i._animateGif(this),this._renderer.drawMode=l.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=i,this._renderer._setProperty("_doFill",!0),this},n.default.prototype.textureMode=function(i){i!==l.IMAGE&&i!==l.NORMAL?console.warn("You tried to set ".concat(i," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=i},n.default.prototype.textureWrap=function(i){for(var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:i,c=(this._renderer.textureWrapX=i,this._renderer.textureWrapY=o,this._renderer.textures),u=0;u<c.length;u++)c[u].setWrapMode(i,o)},n.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return n.default._validateParameters("normalMaterial",o),this._renderer.drawMode=l.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},n.default.prototype.ambientMaterial=function(i,o,c){this._assert3d("ambientMaterial"),n.default._validateParameters("ambientMaterial",arguments);var u=n.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=u._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},n.default.prototype.emissiveMaterial=function(i,o,c,u){this._assert3d("emissiveMaterial"),n.default._validateParameters("emissiveMaterial",arguments);var p=n.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=p._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},n.default.prototype.specularMaterial=function(i,o,c,u){this._assert3d("specularMaterial"),n.default._validateParameters("specularMaterial",arguments);var p=n.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=p._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},n.default.prototype.shininess=function(i){return this._assert3d("shininess"),n.default._validateParameters("shininess",arguments),this._renderer._useShininess=i=i<1?1:i,this},n.default.RendererGL.prototype._applyColorBlend=function(i){var o=this.GL,c=this.drawMode===l.TEXTURE||this.curBlendMode!==l.BLEND||i[i.length-1]<1||this._isErasing;return c!==this._isBlending&&(c||this.curBlendMode!==l.BLEND&&this.curBlendMode!==l.ADD?o.enable(o.BLEND):o.disable(o.BLEND),o.depthMask(!0),this._isBlending=c),this._applyBlendMode(),i},n.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var i=this.GL;switch(this.curBlendMode){case l.BLEND:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA);break;case l.ADD:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.SRC_ALPHA,i.ONE);break;case l.REMOVE:i.blendEquation(i.FUNC_REVERSE_SUBTRACT),i.blendFunc(i.SRC_ALPHA,i.DST_ALPHA);break;case l.MULTIPLY:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ONE,i.ONE);break;case l.SCREEN:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE_MINUS_DST_COLOR,i.ONE,i.ONE,i.ONE);break;case l.EXCLUSION:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE_MINUS_DST_COLOR,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE);break;case l.REPLACE:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO);break;case l.SUBTRACT:i.blendEquationSeparate(i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case l.DARKEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MIN_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case l.LIGHTEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MAX_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var m=n.default;f.default=m},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(e,d,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.prototype.camera=function(){var s;this._assert3d("camera");for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return a.default._validateParameters("camera",l),(s=this._renderer._curCamera).camera.apply(s,l),this},a.default.prototype.perspective=function(){var s;this._assert3d("perspective");for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return a.default._validateParameters("perspective",l),(s=this._renderer._curCamera).perspective.apply(s,l),this},a.default.prototype.ortho=function(){var s;this._assert3d("ortho");for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return a.default._validateParameters("ortho",l),(s=this._renderer._curCamera).ortho.apply(s,l),this},a.default.prototype.frustum=function(){var s;this._assert3d("frustum");for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return a.default._validateParameters("frustum",l),(s=this._renderer._curCamera).frustum.apply(s,l),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var s=new a.default.Camera(this._renderer);return s._computeCameraDefaultSettings(),s._setDefaultCamera(),this._renderer._curCamera=s},a.default.Camera=function(s){this._renderer=s,this.cameraType="default",this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix},a.default.Camera.prototype.perspective=function(m,n,l,h){this.cameraType=0<arguments.length?"custom":"default",m===void 0?(m=this.defaultCameraFOV,this.cameraFOV=m):this.cameraFOV=this._renderer._pInst._toRadians(m),n===void 0&&(n=this.defaultAspectRatio),l===void 0&&(l=this.defaultCameraNear),h===void 0&&(h=this.defaultCameraFar),l<=1e-4&&(l=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),h<l&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=n,this.cameraNear=l,this.cameraFar=h,this.projMatrix=a.default.Matrix.identity();var m=1/Math.tan(this.cameraFOV/2),i=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/n,0,0,0,0,-m,0,0,0,0,(h+l)*i,-1,0,0,2*h*l*i,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},a.default.Camera.prototype.ortho=function(b,v,l,h,m,i){b===void 0&&(b=-this._renderer.width/2),v===void 0&&(v=+this._renderer.width/2),l===void 0&&(l=-this._renderer.height/2),m===void 0&&(m=0);var _=v-b,o=(h=h===void 0?+this._renderer.height/2:h)-l,c=(i=i===void 0?Math.max(this._renderer.width,this._renderer.height):i)-m,u=2/_,p=2/o,g=-2/c,v=-(v+b)/_,b=-(h+l)/o,_=-(i+m)/c;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-p,0,0,0,0,g,0,v,b,_,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},a.default.Camera.prototype.frustum=function(b,v,l,h,m,i){b===void 0&&(b=-this._renderer.width/2),v===void 0&&(v=+this._renderer.width/2),l===void 0&&(l=-this._renderer.height/2),m===void 0&&(m=0);var _=v-b,o=(h=h===void 0?+this._renderer.height/2:h)-l,c=(i=i===void 0?Math.max(this._renderer.width,this._renderer.height):i)-m,u=2*m/_,p=2*m/o,g=-2*i*m/c,v=(v+b)/_,b=(h+l)/o,_=-(i+m)/c;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,p,0,0,v,b,_,-1,0,0,g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},a.default.Camera.prototype._rotateView=function(u,n,l,h){var m=this.centerX,i=this.centerY,o=this.centerZ,c=(m-=this.eyeX,i-=this.eyeY,o-=this.eyeZ,a.default.Matrix.identity(this._renderer._pInst)),u=(c.rotate(this._renderer._pInst._toRadians(u),n,l,h),[m*c.mat4[0]+i*c.mat4[4]+o*c.mat4[8],m*c.mat4[1]+i*c.mat4[5]+o*c.mat4[9],m*c.mat4[2]+i*c.mat4[6]+o*c.mat4[10]]);u[0]+=this.eyeX,u[1]+=this.eyeY,u[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,u[0],u[1],u[2],this.upX,this.upY,this.upZ)},a.default.Camera.prototype.pan=function(s){var n=this._getLocalAxes();this._rotateView(s,n.y[0],n.y[1],n.y[2])},a.default.Camera.prototype.tilt=function(s){var n=this._getLocalAxes();this._rotateView(s,n.x[0],n.x[1],n.x[2])},a.default.Camera.prototype.lookAt=function(s,n,l){this.camera(this.eyeX,this.eyeY,this.eyeZ,s,n,l,this.upX,this.upY,this.upZ)},a.default.Camera.prototype.camera=function(s,n,l,h,m,i,o,c,u){return s===void 0&&(s=this.defaultEyeX,n=this.defaultEyeY,l=this.defaultEyeZ,h=s,m=n,c=1,u=o=i=0),this.eyeX=s,this.eyeY=n,this.eyeZ=l,h!==void 0&&(this.centerX=h,this.centerY=m,this.centerZ=i),o!==void 0&&(this.upX=o,this.upY=c,this.upZ=u),h=this._getLocalAxes(),this.cameraMatrix.set(h.x[0],h.y[0],h.z[0],0,h.x[1],h.y[1],h.z[1],0,h.x[2],h.y[2],h.z[2],0,0,0,0,1),m=-s,this.cameraMatrix.translate([m,-n,-l]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},a.default.Camera.prototype.move=function(h,m,l){var i=this._getLocalAxes(),h=[i.x[0]*h,i.x[1]*h,i.x[2]*h],m=[i.y[0]*m,i.y[1]*m,i.y[2]*m],i=[i.z[0]*l,i.z[1]*l,i.z[2]*l];this.camera(this.eyeX+h[0]+m[0]+i[0],this.eyeY+h[1]+m[1]+i[1],this.eyeZ+h[2]+m[2]+i[2],this.centerX+h[0]+m[0]+i[0],this.centerY+h[1]+m[1]+i[1],this.centerZ+h[2]+m[2]+i[2],0,1,0)},a.default.Camera.prototype.setPosition=function(s,n,l){var h=s-this.eyeX,m=n-this.eyeY,i=l-this.eyeZ;this.camera(s,n,l,this.centerX+h,this.centerY+m,this.centerZ+i,0,1,0)},a.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},a.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},a.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},a.default.Camera.prototype.copy=function(){var s=new a.default.Camera(this._renderer);return s.cameraFOV=this.cameraFOV,s.aspectRatio=this.aspectRatio,s.eyeX=this.eyeX,s.eyeY=this.eyeY,s.eyeZ=this.eyeZ,s.centerX=this.centerX,s.centerY=this.centerY,s.centerZ=this.centerZ,s.cameraNear=this.cameraNear,s.cameraFar=this.cameraFar,s.cameraType=this.cameraType,s.cameraMatrix=this.cameraMatrix.copy(),s.projMatrix=this.projMatrix.copy(),s},a.default.Camera.prototype._getLocalAxes=function(){var s=this.eyeX-this.centerX,n=this.eyeY-this.centerY,l=this.eyeZ-this.centerZ,o=Math.sqrt(s*s+n*n+l*l),o=(o!==0&&(s/=o,n/=o,l/=o),this.upX),h=(c=this.upY)*l-(u=this.upZ)*n,m=-o*l+u*s,i=o*n-c*s,o=n*i-l*m,c=-s*i+l*h,u=s*m-n*h,p=Math.sqrt(h*h+m*m+i*i),p=(p!==0&&(h/=p,m/=p,i/=p),Math.sqrt(o*o+c*c+u*u));return p!==0&&(o/=p,c/=p,u/=p),{x:[h,m,i],y:[o,c,u],z:[s,n,l]}},a.default.Camera.prototype._orbit=function(c,n,u){var m=this.eyeX-this.centerX,o=this.eyeY-this.centerY,i=this.eyeZ-this.centerZ,h=Math.sqrt(m*m+o*o+i*i),m=Math.atan2(m,i),i=Math.acos(Math.max(-1,Math.min(1,o/h))),o=(m+=c,(h+=u)<0&&(h=.1),(i+=n)>Math.PI?i=Math.PI:i<=0&&(i=.001),Math.sin(i)*h*Math.sin(m)),c=Math.cos(i)*h,u=Math.sin(i)*h*Math.cos(m);this.camera(o+this.centerX,c+this.centerY,u+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},a.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},a.default.prototype.setCamera=function(s){this._renderer._curCamera=s,this._renderer.uPMatrix.set(s.projMatrix.mat4[0],s.projMatrix.mat4[1],s.projMatrix.mat4[2],s.projMatrix.mat4[3],s.projMatrix.mat4[4],s.projMatrix.mat4[5],s.projMatrix.mat4[6],s.projMatrix.mat4[7],s.projMatrix.mat4[8],s.projMatrix.mat4[9],s.projMatrix.mat4[10],s.projMatrix.mat4[11],s.projMatrix.mat4[12],s.projMatrix.mat4[13],s.projMatrix.mat4[14],s.projMatrix.mat4[15])},e=a.default.Camera,f.default=e},{"../core/main":267}],316:[function(e,d,f){e("core-js/modules/es.string.sub"),e("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.Geometry=function(s,n,l){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=s!==void 0?s:1,this.detailY=n!==void 0?n:1,this.dirtyFlags={},l instanceof Function&&l.call(this),this},a.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},a.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var s,n,l,h=this.detailX+1,m=0;m<this.detailY;m++)for(var i=0;i<this.detailX;i++)n=(m+1)*h+i+1,this.faces.push([m*h+i,s=m*h+i+1,l=(m+1)*h+i]),this.faces.push([l,s,n]);return this},a.default.Geometry.prototype._getFaceNormal=function(n){var n=this.faces[n],l=this.vertices[n[0]],m=this.vertices[n[1]],n=this.vertices[n[2]],m=a.default.Vector.sub(m,l),n=a.default.Vector.sub(n,l),l=a.default.Vector.cross(m,n),h=a.default.Vector.mag(l),m=h/(a.default.Vector.mag(m)*a.default.Vector.mag(n));return m===0||isNaN(m)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),l):(1<m&&(m=1),l.mult(Math.asin(m)/h))},a.default.Geometry.prototype.computeNormals=function(){for(var s=this.vertexNormals,n=this.vertices,l=this.faces,h=s.length=0;h<n.length;++h)s.push(new a.default.Vector);for(var m=0;m<l.length;++m)for(var i=l[m],o=this._getFaceNormal(m),c=0;c<3;++c)s[i[c]].add(o);for(h=0;h<n.length;++h)s[h].normalize();return this},a.default.Geometry.prototype.averageNormals=function(){for(var s=0;s<=this.detailY;s++){var n=this.detailX+1,l=a.default.Vector.add(this.vertexNormals[s*n],this.vertexNormals[s*n+this.detailX]),l=a.default.Vector.div(l,2);this.vertexNormals[s*n]=l,this.vertexNormals[s*n+this.detailX]=l}return this},a.default.Geometry.prototype.averagePoleNormals=function(){for(var s=new a.default.Vector(0,0,0),n=0;n<this.detailX;n++)s.add(this.vertexNormals[n]);for(var s=a.default.Vector.div(s,this.detailX),l=0;l<this.detailX;l++)this.vertexNormals[l]=s;s=new a.default.Vector(0,0,0);for(var h=this.vertices.length-1;h>this.vertices.length-1-this.detailX;h--)s.add(this.vertexNormals[h]);s=a.default.Vector.div(s,this.detailX);for(var m=this.vertices.length-1;m>this.vertices.length-1-this.detailX;m--)this.vertexNormals[m]=s;return this},a.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var s=0,n=this.strokeIndices.length;s<n;s++)this.edges.push(this.strokeIndices[s]);else for(var l=0;l<this.faces.length;l++)this.edges.push([this.faces[l][0],this.faces[l][1]]),this.edges.push([this.faces[l][1],this.faces[l][2]]),this.edges.push([this.faces[l][2],this.faces[l][0]]);return this},a.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var s=this.lineNormals.length=0;s<this.edges.length;s++){var l=this.vertices[this.edges[s][0]],m=this.vertices[this.edges[s][1]],o=m.copy().sub(l).normalize(),n=l.array(),l=l.array(),h=m.array(),m=m.array(),i=o.array(),o=o.array();i.push(1),o.push(-1),this.lineNormals.push(i,o,i,i,o,o),this.lineVertices.push(n,l,h,h,l,m)}return this},a.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var s=this.vertices[0].copy(),n=this.vertices[0].copy(),l=0;l<this.vertices.length;l++)s.x=Math.max(s.x,this.vertices[l].x),n.x=Math.min(n.x,this.vertices[l].x),s.y=Math.max(s.y,this.vertices[l].y),n.y=Math.min(n.y,this.vertices[l].y),s.z=Math.max(s.z,this.vertices[l].z),n.z=Math.min(n.z,this.vertices[l].z);for(var h=a.default.Vector.lerp(s,n,.5),m=a.default.Vector.sub(s,n),i=200/Math.max(Math.max(m.x,m.y),m.z),o=0;o<this.vertices.length;o++)this.vertices[o].sub(h),this.vertices[o].mult(i)}return this},e=a.default.Geometry,f.default=e},{"../core/main":267,"core-js/modules/es.string.sub":192}],317:[function(l,d,f){l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),l("core-js/modules/es.array.iterator"),l("core-js/modules/es.object.to-string"),l("core-js/modules/es.typed-array.float32-array"),l("core-js/modules/es.typed-array.copy-within"),l("core-js/modules/es.typed-array.every"),l("core-js/modules/es.typed-array.fill"),l("core-js/modules/es.typed-array.filter"),l("core-js/modules/es.typed-array.find"),l("core-js/modules/es.typed-array.find-index"),l("core-js/modules/es.typed-array.for-each"),l("core-js/modules/es.typed-array.includes"),l("core-js/modules/es.typed-array.index-of"),l("core-js/modules/es.typed-array.iterator"),l("core-js/modules/es.typed-array.join"),l("core-js/modules/es.typed-array.last-index-of"),l("core-js/modules/es.typed-array.map"),l("core-js/modules/es.typed-array.reduce"),l("core-js/modules/es.typed-array.reduce-right"),l("core-js/modules/es.typed-array.reverse"),l("core-js/modules/es.typed-array.set"),l("core-js/modules/es.typed-array.slice"),l("core-js/modules/es.typed-array.some"),l("core-js/modules/es.typed-array.sort"),l("core-js/modules/es.typed-array.subarray"),l("core-js/modules/es.typed-array.to-locale-string"),l("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(l=l("../core/main"))&&l.__esModule?l:{default:l},s=Array,n=function(h){return h instanceof Array},l=(typeof Float32Array<"u"&&(s=Float32Array,n=function(h){return h instanceof Array||h instanceof Float32Array}),a.default.Matrix=function(){for(var h=new Array(arguments.length),m=0;m<h.length;++m)h[m]=arguments[m];return h.length&&h[h.length-1]instanceof a.default&&(this.p5=h[h.length-1]),h[0]==="mat3"?this.mat3=Array.isArray(h[1])?h[1]:new s([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(h[0])?h[0]:new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},a.default.Matrix.prototype.set=function(h){return h instanceof a.default.Matrix?this.mat4=h.mat4:n(h)?this.mat4=h:arguments.length===16&&(this.mat4[0]=h,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},a.default.Matrix.prototype.get=function(){return new a.default.Matrix(this.mat4,this.p5)},a.default.Matrix.prototype.copy=function(){var h=new a.default.Matrix(this.p5);return h.mat4[0]=this.mat4[0],h.mat4[1]=this.mat4[1],h.mat4[2]=this.mat4[2],h.mat4[3]=this.mat4[3],h.mat4[4]=this.mat4[4],h.mat4[5]=this.mat4[5],h.mat4[6]=this.mat4[6],h.mat4[7]=this.mat4[7],h.mat4[8]=this.mat4[8],h.mat4[9]=this.mat4[9],h.mat4[10]=this.mat4[10],h.mat4[11]=this.mat4[11],h.mat4[12]=this.mat4[12],h.mat4[13]=this.mat4[13],h.mat4[14]=this.mat4[14],h.mat4[15]=this.mat4[15],h},a.default.Matrix.identity=function(h){return new a.default.Matrix(h)},a.default.Matrix.prototype.transpose=function(h){var m,i,o,c,u,p;return h instanceof a.default.Matrix?(m=h.mat4[1],i=h.mat4[2],o=h.mat4[3],c=h.mat4[6],u=h.mat4[7],p=h.mat4[11],this.mat4[0]=h.mat4[0],this.mat4[1]=h.mat4[4],this.mat4[2]=h.mat4[8],this.mat4[3]=h.mat4[12],this.mat4[4]=m,this.mat4[5]=h.mat4[5],this.mat4[6]=h.mat4[9],this.mat4[7]=h.mat4[13],this.mat4[8]=i,this.mat4[9]=c,this.mat4[10]=h.mat4[10],this.mat4[11]=h.mat4[14],this.mat4[12]=o,this.mat4[13]=u,this.mat4[14]=p,this.mat4[15]=h.mat4[15]):n(h)&&(m=h[1],i=h[2],o=h[3],c=h[6],u=h[7],p=h[11],this.mat4[0]=h[0],this.mat4[1]=h[4],this.mat4[2]=h[8],this.mat4[3]=h[12],this.mat4[4]=m,this.mat4[5]=h[5],this.mat4[6]=h[9],this.mat4[7]=h[13],this.mat4[8]=i,this.mat4[9]=c,this.mat4[10]=h[10],this.mat4[11]=h[14],this.mat4[12]=o,this.mat4[13]=u,this.mat4[14]=p,this.mat4[15]=h[15]),this},a.default.Matrix.prototype.invert=function(P){P instanceof a.default.Matrix?(m=P.mat4[0],i=P.mat4[1],o=P.mat4[2],c=P.mat4[3],u=P.mat4[4],p=P.mat4[5],g=P.mat4[6],v=P.mat4[7],b=P.mat4[8],_=P.mat4[9],x=P.mat4[10],A=P.mat4[11],E=P.mat4[12],T=P.mat4[13],C=P.mat4[14],R=P.mat4[15]):n(P)&&(m=P[0],i=P[1],o=P[2],c=P[3],u=P[4],p=P[5],g=P[6],v=P[7],b=P[8],_=P[9],x=P[10],A=P[11],E=P[12],T=P[13],C=P[14],R=P[15]);var m,i,o,c,u,p,g,v,b,_,x,A,E,T,C,R,P=m*p-i*u,N=m*g-o*u,k=m*v-c*u,I=i*g-o*p,B=i*v-c*p,Y=o*v-c*g,W=b*T-_*E,H=b*C-x*E,X=b*R-A*E,Z=_*C-x*T,q=_*R-A*T,ee=x*R-A*C,L=P*ee-N*q+k*Z+I*X-B*H+Y*W;return L?(this.mat4[0]=(p*ee-g*q+v*Z)*(L=1/L),this.mat4[1]=(o*q-i*ee-c*Z)*L,this.mat4[2]=(T*Y-C*B+R*I)*L,this.mat4[3]=(x*B-_*Y-A*I)*L,this.mat4[4]=(g*X-u*ee-v*H)*L,this.mat4[5]=(m*ee-o*X+c*H)*L,this.mat4[6]=(C*k-E*Y-R*N)*L,this.mat4[7]=(b*Y-x*k+A*N)*L,this.mat4[8]=(u*q-p*X+v*W)*L,this.mat4[9]=(i*X-m*q-c*W)*L,this.mat4[10]=(E*B-T*k+R*P)*L,this.mat4[11]=(_*k-b*B-A*P)*L,this.mat4[12]=(p*H-u*Z-g*W)*L,this.mat4[13]=(m*Z-i*H+o*W)*L,this.mat4[14]=(T*N-E*I-C*P)*L,this.mat4[15]=(b*I-_*N+x*P)*L,this):null},a.default.Matrix.prototype.invert3x3=function(){var h=this.mat3[0],m=this.mat3[1],i=this.mat3[2],o=this.mat3[3],c=this.mat3[4],u=this.mat3[5],p=this.mat3[6],g=this.mat3[7],v=this.mat3[8],b=v*c-u*g,_=-v*o+u*p,x=g*o-c*p,A=h*b+m*_+i*x;return A?(this.mat3[0]=b*(A=1/A),this.mat3[1]=(-v*m+i*g)*A,this.mat3[2]=(u*m-i*c)*A,this.mat3[3]=_*A,this.mat3[4]=(v*h-i*p)*A,this.mat3[5]=(-u*h+i*o)*A,this.mat3[6]=x*A,this.mat3[7]=(-g*h+m*p)*A,this.mat3[8]=(c*h-m*o)*A,this):null},a.default.Matrix.prototype.transpose3x3=function(h){var m=h[1],i=h[2],o=h[5];return this.mat3[1]=h[3],this.mat3[2]=h[6],this.mat3[3]=m,this.mat3[5]=h[7],this.mat3[6]=i,this.mat3[7]=o,this},a.default.Matrix.prototype.inverseTranspose=function(h){if(this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=h.mat4[0],this.mat3[1]=h.mat4[1],this.mat3[2]=h.mat4[2],this.mat3[3]=h.mat4[4],this.mat3[4]=h.mat4[5],this.mat3[5]=h.mat4[6],this.mat3[6]=h.mat4[8],this.mat3[7]=h.mat4[9],this.mat3[8]=h.mat4[10]),h=this.invert3x3(),h)h.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this},a.default.Matrix.prototype.determinant=function(){var h=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],m=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],i=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],o=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],c=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],u=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],p=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],g=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],v=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],b=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],_=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return h*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-m*_+i*b+o*v-c*g+u*p},a.default.Matrix.prototype.mult=function(i){var m;if(i===this||i===this.mat4)m=this.copy().mat4;else if(i instanceof a.default.Matrix)m=i.mat4;else if(n(i))m=i;else{if(arguments.length!==16)return;m=arguments}var i=this.mat4[0],o=this.mat4[1],c=this.mat4[2],u=this.mat4[3];return this.mat4[0]=i*m[0]+o*m[4]+c*m[8]+u*m[12],this.mat4[1]=i*m[1]+o*m[5]+c*m[9]+u*m[13],this.mat4[2]=i*m[2]+o*m[6]+c*m[10]+u*m[14],this.mat4[3]=i*m[3]+o*m[7]+c*m[11]+u*m[15],i=this.mat4[4],o=this.mat4[5],c=this.mat4[6],u=this.mat4[7],this.mat4[4]=i*m[0]+o*m[4]+c*m[8]+u*m[12],this.mat4[5]=i*m[1]+o*m[5]+c*m[9]+u*m[13],this.mat4[6]=i*m[2]+o*m[6]+c*m[10]+u*m[14],this.mat4[7]=i*m[3]+o*m[7]+c*m[11]+u*m[15],i=this.mat4[8],o=this.mat4[9],c=this.mat4[10],u=this.mat4[11],this.mat4[8]=i*m[0]+o*m[4]+c*m[8]+u*m[12],this.mat4[9]=i*m[1]+o*m[5]+c*m[9]+u*m[13],this.mat4[10]=i*m[2]+o*m[6]+c*m[10]+u*m[14],this.mat4[11]=i*m[3]+o*m[7]+c*m[11]+u*m[15],i=this.mat4[12],o=this.mat4[13],c=this.mat4[14],u=this.mat4[15],this.mat4[12]=i*m[0]+o*m[4]+c*m[8]+u*m[12],this.mat4[13]=i*m[1]+o*m[5]+c*m[9]+u*m[13],this.mat4[14]=i*m[2]+o*m[6]+c*m[10]+u*m[14],this.mat4[15]=i*m[3]+o*m[7]+c*m[11]+u*m[15],this},a.default.Matrix.prototype.apply=function(i){var m;if(i===this||i===this.mat4)m=this.copy().mat4;else if(i instanceof a.default.Matrix)m=i.mat4;else if(n(i))m=i;else{if(arguments.length!==16)return;m=arguments}var i=this.mat4,o=i[0],c=i[4],u=i[8],p=i[12],o=(i[0]=m[0]*o+m[1]*c+m[2]*u+m[3]*p,i[4]=m[4]*o+m[5]*c+m[6]*u+m[7]*p,i[8]=m[8]*o+m[9]*c+m[10]*u+m[11]*p,i[12]=m[12]*o+m[13]*c+m[14]*u+m[15]*p,i[1]),c=i[5],u=i[9],p=i[13],o=(i[1]=m[0]*o+m[1]*c+m[2]*u+m[3]*p,i[5]=m[4]*o+m[5]*c+m[6]*u+m[7]*p,i[9]=m[8]*o+m[9]*c+m[10]*u+m[11]*p,i[13]=m[12]*o+m[13]*c+m[14]*u+m[15]*p,i[2]),c=i[6],u=i[10],p=i[14],o=(i[2]=m[0]*o+m[1]*c+m[2]*u+m[3]*p,i[6]=m[4]*o+m[5]*c+m[6]*u+m[7]*p,i[10]=m[8]*o+m[9]*c+m[10]*u+m[11]*p,i[14]=m[12]*o+m[13]*c+m[14]*u+m[15]*p,i[3]),c=i[7],u=i[11],p=i[15];return i[3]=m[0]*o+m[1]*c+m[2]*u+m[3]*p,i[7]=m[4]*o+m[5]*c+m[6]*u+m[7]*p,i[11]=m[8]*o+m[9]*c+m[10]*u+m[11]*p,i[15]=m[12]*o+m[13]*c+m[14]*u+m[15]*p,this},a.default.Matrix.prototype.scale=function(h,m,i){return h instanceof a.default.Vector?(m=h.y,i=h.z,h=h.x):h instanceof Array&&(m=h[1],i=h[2],h=h[0]),this.mat4[0]*=h,this.mat4[1]*=h,this.mat4[2]*=h,this.mat4[3]*=h,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=i,this.mat4[9]*=i,this.mat4[10]*=i,this.mat4[11]*=i,this},a.default.Matrix.prototype.rotate=function(P,q,Z,o){q instanceof a.default.Vector?(Z=q.y,o=q.z,q=q.x):q instanceof Array&&(Z=q[1],o=q[2],q=q[0]);var c=Math.sqrt(q*q+Z*Z+o*o),c=(q*=1/c,Z*=1/c,o*=1/c,this.mat4[0]),u=this.mat4[1],p=this.mat4[2],g=this.mat4[3],v=this.mat4[4],b=this.mat4[5],_=this.mat4[6],x=this.mat4[7],A=this.mat4[8],E=this.mat4[9],T=this.mat4[10],C=this.mat4[11],R=Math.sin(P),P=Math.cos(P),N=1-P,k=q*q*N+P,I=Z*q*N+o*R,B=o*q*N-Z*R,Y=q*Z*N-o*R,W=Z*Z*N+P,H=o*Z*N+q*R,X=q*o*N+Z*R,Z=Z*o*N-q*R,q=o*o*N+P;return this.mat4[0]=c*k+v*I+A*B,this.mat4[1]=u*k+b*I+E*B,this.mat4[2]=p*k+_*I+T*B,this.mat4[3]=g*k+x*I+C*B,this.mat4[4]=c*Y+v*W+A*H,this.mat4[5]=u*Y+b*W+E*H,this.mat4[6]=p*Y+_*W+T*H,this.mat4[7]=g*Y+x*W+C*H,this.mat4[8]=c*X+v*Z+A*q,this.mat4[9]=u*X+b*Z+E*q,this.mat4[10]=p*X+_*Z+T*q,this.mat4[11]=g*X+x*Z+C*q,this},a.default.Matrix.prototype.translate=function(o){var m=o[0],i=o[1],o=o[2]||0;this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*i+this.mat4[8]*o,this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*i+this.mat4[9]*o,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*i+this.mat4[10]*o,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*i+this.mat4[11]*o},a.default.Matrix.prototype.rotateX=function(h){this.rotate(h,1,0,0)},a.default.Matrix.prototype.rotateY=function(h){this.rotate(h,0,1,0)},a.default.Matrix.prototype.rotateZ=function(h){this.rotate(h,0,0,1)},a.default.Matrix.prototype.perspective=function(c,m,i,o){var c=1/Math.tan(c/2),u=1/(i-o);return this.mat4[0]=c/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=c,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(o+i)*u,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*o*i*u,this.mat4[15]=0,this},a.default.Matrix.prototype.ortho=function(h,m,i,o,c,u){var p=1/(h-m),g=1/(i-o),v=1/(c-u);return this.mat4[0]=-2*p,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*v,this.mat4[11]=0,this.mat4[12]=(h+m)*p,this.mat4[13]=(o+i)*g,this.mat4[14]=(u+c)*v,this.mat4[15]=1,this},a.default.Matrix);f.default=l},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(e,d,f){e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.RenderBuffer=function(a,s,n,l,h,m){this.size=a,this.src=s,this.dst=n,this.attr=l,this._renderer=h,this.map=m},e.default.RenderBuffer.prototype._prepareBuffer=function(a,s){var n,l,h,o=s.attributes,m=this._renderer.GL,i=a.model||a,o=o[this.attr];o&&(n=a[this.dst],0<(l=i[this.src]).length&&((h=!n)&&(a[this.dst]=n=m.createBuffer()),m.bindBuffer(m.ARRAY_BUFFER,n),!h&&i.dirtyFlags[this.src]===!1||(h=(a=this.map)?a(l):l,this._renderer._bindBuffer(n,m.ARRAY_BUFFER,h),i.dirtyFlags[this.src]=!1),s.enableAttrib(o,this.size)))},e=e.default.RenderBuffer,f.default=e},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(e,d,f){function a(c){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(c)}function s(c){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(u){return a(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":a(u)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(o=e("../core/main"))&&o.__esModule?o:{default:o},l=function(c){if(c&&c.__esModule)return c;if(c===null||s(c)!=="object"&&typeof c!="function")return{default:c};var u=h();if(u&&u.has(c))return u.get(c);var p,g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in c){var b;Object.prototype.hasOwnProperty.call(c,p)&&((b=v?Object.getOwnPropertyDescriptor(c,p):null)&&(b.get||b.set)?Object.defineProperty(g,p,b):g[p]=c[p])}return g.default=c,u&&u.set(c,g),g}(e("../core/constants"));function h(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,h=function(){return c},c)}function m(c){return function(u){if(Array.isArray(u)){for(var p=0,g=new Array(u.length);p<u.length;p++)g[p]=u[p];return g}}(c)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),n.default.RendererGL.prototype.beginShape=function(c){return this.immediateMode.shapeMode=c!==void 0?c:l.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this};var i={vertices:1,vertexNormals:1,vertexColors:4,uvs:2},o=(n.default.RendererGL.prototype.vertex=function(c,u){if(this.immediateMode.shapeMode===l.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var p in i){var g=i[p],p=this.immediateMode.geometry[p];p.push.apply(p,m(p.slice(p.length-3*g,p.length-2*g)).concat(m(p.slice(p.length-g,p.length))))}var v,b,_=v=b=0,x=(arguments.length===3?_=arguments[2]:arguments.length===4?(v=arguments[2],b=arguments[3]):arguments.length===5&&(_=arguments[2],v=arguments[3],b=arguments[4]),new n.default.Vector(c,u,_)),x=(this.immediateMode.geometry.vertices.push(x),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexColors.push(x[0],x[1],x[2],x[3]),this.textureMode===l.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(v/=this._tex.width,b/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(v,b),this.immediateMode._bezierVertex[0]=c,this.immediateMode._bezierVertex[1]=u,this.immediateMode._bezierVertex[2]=_,this.immediateMode._quadraticVertex[0]=c,this.immediateMode._quadraticVertex[1]=u,this.immediateMode._quadraticVertex[2]=_,this},n.default.RendererGL.prototype.normal=function(c,u,p){return c instanceof n.default.Vector?this._currentNormal=c:this._currentNormal=new n.default.Vector(c,u,p),this},n.default.RendererGL.prototype.endShape=function(c,u,p,g,v,b){return this.immediateMode.shapeMode===l.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},n.default.RendererGL.prototype._processVertices=function(c){var u;this.immediateMode.geometry.vertices.length!==0&&(u=this._doStroke&&this.drawMode!==l.TEXTURE,c=c===l.CLOSE,u&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,c),this.immediateMode.geometry._edgesToVertices()),u=this.immediateMode.shapeMode===l.TESS,(this.isBezier||this.isQuadratic||this.isCurve||u)&&this.immediateMode.shapeMode!==l.LINES&&this._tesselateShape())},n.default.RendererGL.prototype._calculateEdges=function(c,u,p){var g=[],v=0;switch(c){case l.TRIANGLE_STRIP:for(v=0;v<u.length-2;v++)g.push([v,v+1]),g.push([v,v+2]);g.push([v,v+1]);break;case l.TRIANGLES:for(v=0;v<u.length-2;v+=3)g.push([v,v+1]),g.push([v+1,v+2]),g.push([v+2,v]);break;case l.LINES:for(v=0;v<u.length-1;v+=2)g.push([v,v+1]);break;case l.QUADS:for(v=0;v<u.length-5;v+=6)g.push([v,v+1]),g.push([v+1,v+2]),g.push([v+3,v+5]),g.push([v+4,v+5]);break;case l.QUAD_STRIP:for(v=0;v<u.length-2;v+=2)g.push([v,v+1]),g.push([v,v+2]),g.push([v+1,v+3]);g.push([v,v+1]);break;default:for(v=0;v<u.length-1;v++)g.push([v,v+1])}return p&&g.push([u.length-1,0]),g},n.default.RendererGL.prototype._tesselateShape=function(){for(var c=this,u=(this.immediateMode.shapeMode=l.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(_,x){return[_.x,_.y,_.z,c.immediateMode.geometry.uvs[2*x],c.immediateMode.geometry.uvs[2*x+1],c.immediateMode.geometry.vertexColors[4*x],c.immediateMode.geometry.vertexColors[4*x+1],c.immediateMode.geometry.vertexColors[4*x+2],c.immediateMode.geometry.vertexColors[4*x+3],c.immediateMode.geometry.vertexNormals[x].x,c.immediateMode.geometry.vertexNormals[x].y,c.immediateMode.geometry.vertexNormals[x].z]}))]),p=this._triangulate(u),g=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),v=0,b=p.length;v<b;v+=12)g.push.apply(g,m(p.slice(v+5,v+9))),this.normal.apply(this,m(p.slice(v+9,v+12))),this.vertex.apply(this,m(p.slice(v,v+5)));this.immediateMode.geometry.vertexColors=g},n.default.RendererGL.prototype._drawImmediateFill=function(){var c=this.GL,u=this._getImmediateFillShader(),p=(this._setFillUniforms(u),!0),g=!1,v=void 0;try{for(var b,_=this.immediateMode.buffers.fill[Symbol.iterator]();!(p=(b=_.next()).done);p=!0)b.value._prepareBuffer(this.immediateMode.geometry,u)}catch(x){g=!0,v=x}finally{try{p||_.return==null||_.return()}finally{if(g)throw v}}this.immediateMode.shapeMode!==l.LINE_STRIP&&this.immediateMode.shapeMode!==l.LINES||(this.immediateMode.shapeMode=l.TRIANGLE_FAN),this.immediateMode.shapeMode===l.QUADS?this.immediateMode.shapeMode=l.TRIANGLES:this.immediateMode.shapeMode===l.QUAD_STRIP&&(this.immediateMode.shapeMode=l.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),c.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),u.unbindShader()},n.default.RendererGL.prototype._drawImmediateStroke=function(){var c=this.GL,u=this._getImmediateStrokeShader(),p=(this._setStrokeUniforms(u),!0),g=!1,v=void 0;try{for(var b,_=this.immediateMode.buffers.stroke[Symbol.iterator]();!(p=(b=_.next()).done);p=!0)b.value._prepareBuffer(this.immediateMode.geometry,u)}catch(x){g=!0,v=x}finally{try{p||_.return==null||_.return()}finally{if(g)throw v}}this._applyColorBlend(this.curStrokeColor),c.drawArrays(c.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),u.unbindShader()},n.default.RendererGL);f.default=o},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(n=e("../core/main"))&&n.__esModule?n:{default:n};e("./p5.RendererGL"),e("./p5.RenderBuffer");var s=0,n=(a.default.RendererGL.prototype._initBufferDefaults=function(l){var h;return this._freeBuffers(l),1e3<++s&&(h=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[h],s--),this.retainedMode.geometry[l]={}},a.default.RendererGL.prototype._freeBuffers=function(l){var h,m=this.retainedMode.geometry[l];function i(o){var c=!0,u=!1,p=void 0;try{for(var g,v=o[Symbol.iterator]();!(c=(g=v.next()).done);c=!0){var b=g.value;m[b.dst]&&(h.deleteBuffer(m[b.dst]),m[b.dst]=null)}}catch(_){u=!0,p=_}finally{try{c||v.return==null||v.return()}finally{if(u)throw p}}}m&&(delete this.retainedMode.geometry[l],s--,h=this.GL,m.indexBuffer&&h.deleteBuffer(m.indexBuffer),i(this.retainedMode.buffers.stroke),i(this.retainedMode.buffers.fill))},a.default.RendererGL.prototype.createBuffers=function(u,h){var m,i,o,c=this.GL,u=this._initBufferDefaults(u),p=(u.model=h,u.indexBuffer);return h.faces.length?(p=p||(u.indexBuffer=c.createBuffer()),o=(i=(m=a.default.RendererGL.prototype._flatten(h.faces)).some(function(g){return 65535<g}))?Uint32Array:Uint16Array,this._bindBuffer(p,c.ELEMENT_ARRAY_BUFFER,m,o),u.indexBufferType=i?c.UNSIGNED_INT:c.UNSIGNED_SHORT,u.vertexCount=3*h.faces.length):(p&&(c.deleteBuffer(p),u.indexBuffer=null),u.vertexCount=h.vertices?h.vertices.length:0),u.lineVertexCount=h.lineVertices?h.lineVertices.length:0,u},a.default.RendererGL.prototype.drawBuffers=function(l){var h=this.GL,m=this.retainedMode.geometry[l];if(this._doStroke&&0<m.lineVertexCount){var i=this._getRetainedStrokeShader(),o=(this._setStrokeUniforms(i),!0),c=!1,u=void 0;try{for(var p,g=this.retainedMode.buffers.stroke[Symbol.iterator]();!(o=(p=g.next()).done);o=!0)p.value._prepareBuffer(m,i)}catch(A){c=!0,u=A}finally{try{o||g.return==null||g.return()}finally{if(c)throw u}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(h.TRIANGLES,l),i.unbindShader()}if(this._doFill){var v=this._getRetainedFillShader(),b=(this._setFillUniforms(v),!0),c=!1,u=void 0;try{for(var _,x=this.retainedMode.buffers.fill[Symbol.iterator]();!(b=(_=x.next()).done);b=!0)_.value._prepareBuffer(m,v)}catch(T){c=!0,u=T}finally{try{b||x.return==null||x.return()}finally{if(c)throw u}}m.indexBuffer&&this._bindBuffer(m.indexBuffer,h.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(h.TRIANGLES,l),v.unbindShader()}return this},a.default.RendererGL.prototype.drawBuffersScaled=function(l,h,m,i){var o=this.uMVMatrix.copy();try{this.uMVMatrix.scale(h,m,i),this.drawBuffers(l)}finally{this.uMVMatrix=o}},a.default.RendererGL.prototype._drawArrays=function(l,h){return this.GL.drawArrays(l,0,this.retainedMode.geometry[h].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(l,m){var m=this.retainedMode.geometry[m],i=this.GL;if(m.indexBuffer){if(m.indexBufferType===i.UNSIGNED_INT&&!i.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");i.drawElements(i.TRIANGLES,m.vertexCount,m.indexBufferType,0)}else i.drawArrays(l||i.TRIANGLES,0,m.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(l,h){var m=this.GL,i=this._getImmediatePointShader();this._setPointUniforms(i),this._bindBuffer(h,m.ARRAY_BUFFER,this._vToNArray(l),Float32Array,m.STATIC_DRAW),i.enableAttrib(i.attributes.aPosition,3),m.drawArrays(m.Points,0,l.length),i.unbindShader()},a.default.RendererGL);f.default=n},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(u,d,f){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function s(p){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(p)}u("core-js/modules/es.symbol"),u("core-js/modules/es.symbol.description"),u("core-js/modules/es.symbol.iterator"),u("core-js/modules/es.array.concat"),u("core-js/modules/es.array.fill"),u("core-js/modules/es.array.filter"),u("core-js/modules/es.array.from"),u("core-js/modules/es.array.includes"),u("core-js/modules/es.array.iterator"),u("core-js/modules/es.array.slice"),u("core-js/modules/es.object.assign"),u("core-js/modules/es.object.get-own-property-descriptor"),u("core-js/modules/es.object.to-string"),u("core-js/modules/es.regexp.to-string"),u("core-js/modules/es.string.includes"),u("core-js/modules/es.string.iterator"),u("core-js/modules/es.typed-array.float32-array"),u("core-js/modules/es.typed-array.float64-array"),u("core-js/modules/es.typed-array.int16-array"),u("core-js/modules/es.typed-array.uint8-array"),u("core-js/modules/es.typed-array.uint16-array"),u("core-js/modules/es.typed-array.uint32-array"),u("core-js/modules/es.typed-array.copy-within"),u("core-js/modules/es.typed-array.every"),u("core-js/modules/es.typed-array.fill"),u("core-js/modules/es.typed-array.filter"),u("core-js/modules/es.typed-array.find"),u("core-js/modules/es.typed-array.find-index"),u("core-js/modules/es.typed-array.for-each"),u("core-js/modules/es.typed-array.includes"),u("core-js/modules/es.typed-array.index-of"),u("core-js/modules/es.typed-array.iterator"),u("core-js/modules/es.typed-array.join"),u("core-js/modules/es.typed-array.last-index-of"),u("core-js/modules/es.typed-array.map"),u("core-js/modules/es.typed-array.reduce"),u("core-js/modules/es.typed-array.reduce-right"),u("core-js/modules/es.typed-array.reverse"),u("core-js/modules/es.typed-array.set"),u("core-js/modules/es.typed-array.slice"),u("core-js/modules/es.typed-array.some"),u("core-js/modules/es.typed-array.sort"),u("core-js/modules/es.typed-array.subarray"),u("core-js/modules/es.typed-array.to-locale-string"),u("core-js/modules/es.typed-array.to-string"),u("core-js/modules/es.weak-map"),u("core-js/modules/web.dom-collections.iterator"),u("core-js/modules/es.symbol"),u("core-js/modules/es.symbol.description"),u("core-js/modules/es.symbol.iterator"),u("core-js/modules/es.array.concat"),u("core-js/modules/es.array.fill"),u("core-js/modules/es.array.filter"),u("core-js/modules/es.array.from"),u("core-js/modules/es.array.includes"),u("core-js/modules/es.array.iterator"),u("core-js/modules/es.array.slice"),u("core-js/modules/es.object.assign"),u("core-js/modules/es.object.to-string"),u("core-js/modules/es.regexp.to-string"),u("core-js/modules/es.string.includes"),u("core-js/modules/es.string.iterator"),u("core-js/modules/es.typed-array.float32-array"),u("core-js/modules/es.typed-array.float64-array"),u("core-js/modules/es.typed-array.int16-array"),u("core-js/modules/es.typed-array.uint8-array"),u("core-js/modules/es.typed-array.uint16-array"),u("core-js/modules/es.typed-array.uint32-array"),u("core-js/modules/es.typed-array.copy-within"),u("core-js/modules/es.typed-array.every"),u("core-js/modules/es.typed-array.fill"),u("core-js/modules/es.typed-array.filter"),u("core-js/modules/es.typed-array.find"),u("core-js/modules/es.typed-array.find-index"),u("core-js/modules/es.typed-array.for-each"),u("core-js/modules/es.typed-array.includes"),u("core-js/modules/es.typed-array.index-of"),u("core-js/modules/es.typed-array.iterator"),u("core-js/modules/es.typed-array.join"),u("core-js/modules/es.typed-array.last-index-of"),u("core-js/modules/es.typed-array.map"),u("core-js/modules/es.typed-array.reduce"),u("core-js/modules/es.typed-array.reduce-right"),u("core-js/modules/es.typed-array.reverse"),u("core-js/modules/es.typed-array.set"),u("core-js/modules/es.typed-array.slice"),u("core-js/modules/es.typed-array.some"),u("core-js/modules/es.typed-array.sort"),u("core-js/modules/es.typed-array.subarray"),u("core-js/modules/es.typed-array.to-locale-string"),u("core-js/modules/es.typed-array.to-string"),u("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=i(u("../core/main")),l=function(p){if(p&&p.__esModule)return p;if(p===null||s(p)!=="object"&&typeof p!="function")return{default:p};var g=m();if(g&&g.has(p))return g.get(p);var v,b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in p){var x;Object.prototype.hasOwnProperty.call(p,v)&&((x=_?Object.getOwnPropertyDescriptor(p,v):null)&&(x.get||x.set)?Object.defineProperty(b,v,x):b[v]=p[v])}return b.default=p,g&&g.set(p,b),b}(u("../core/constants")),h=i(u("libtess"));u("./p5.Shader"),u("./p5.Camera"),u("../core/p5.Renderer"),u("./p5.Matrix"),u("path");function m(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,m=function(){return p},p)}function i(p){return p&&p.__esModule?p:{default:p}}function o(p){return function(g){if(Array.isArray(g)){for(var v=0,b=new Array(g.length);v<g.length;v++)b[v]=g[v];return b}}(p)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,c={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:u+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:u+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
  gl_FragColor.rgb = diffuse * gl_FragColor.rgb + 
                    vAmbientColor * uAmbientMatColor.rgb + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb;
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`},u=(n.default.RendererGL=function(p,g,v,b){return n.default.Renderer.call(this,p,g,v),this._setAttributeDefaults(g),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=l.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[0,0,0,0],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=l.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new n.default.Matrix,this.uPMatrix=new n.default.Matrix,this.uNMatrix=new n.default.Matrix("mat3"),this._currentNormal=new n.default.Vector(0,0,1),this._curCamera=new n.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new n.default.Geometry,shapeMode:l.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=l.IMAGE,this.textureWrapX=l.CLAMP,this.textureWrapY=l.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},n.default.RendererGL.prototype=Object.create(n.default.Renderer.prototype),n.default.RendererGL.prototype._setAttributeDefaults=function(p){var g={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};p._glAttributes===null?p._glAttributes=g:p._glAttributes=Object.assign(g,p._glAttributes)},n.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var p=this.drawingContext;p.enable(p.DEPTH_TEST),p.depthFunc(p.LEQUAL),p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},n.default.RendererGL.prototype._resetContext=function(p,g){var v,b=this.width,_=this.height,A=this.canvas.id,x=this._pInst instanceof n.default.Graphics,A=(x?((v=this._pInst).canvas.parentNode.removeChild(v.canvas),v.canvas=document.createElement("canvas"),(v._pInst._userNode||document.body).appendChild(v.canvas),n.default.Element.call(v,v.canvas,v._pInst),v.width=b,v.height=_):((v=this.canvas)&&v.parentNode.removeChild(v),(v=document.createElement("canvas")).id=A,(this._pInst._userNode||document.body).appendChild(v),this._pInst.canvas=v,this.canvas=v),new n.default.RendererGL(this._pInst.canvas,this._pInst,!x));this._pInst._setProperty("_renderer",A),A.resize(b,_),A._applyDefaults(),x||this._pInst._elements.push(A),typeof g=="function"&&setTimeout(function(){g.apply(window._renderer,p)},0)},n.default.prototype.setAttributes=function(p,g){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var v=!0;if(g!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[p]!==g&&(this._glAttributes[p]=g,v=!1)):p instanceof Object&&this._glAttributes!==p&&(this._glAttributes=p,v=!1),this._renderer.isP3D&&!v){if(!this._setupDone){for(var b in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(b))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},n.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.background=function(){var b=(b=this._pInst).color.apply(b,arguments),p=b.levels[0]/255,g=b.levels[1]/255,v=b.levels[2]/255,b=b.levels[3]/255;this.GL.clearColor(p,g,v,b),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},n.default.RendererGL.prototype.fill=function(p,g,v,b){var _=n.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=_._array,this.drawMode=l.FILL,this._useNormalMaterial=!1,this._tex=null},n.default.RendererGL.prototype.stroke=function(p,g,v,b){arguments[3]=255;var _=n.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=_._array},n.default.RendererGL.prototype.strokeCap=function(p){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.strokeJoin=function(p){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.filter=function(p){console.error("filter() does not work in WEBGL mode")},n.default.RendererGL.prototype.blendMode=function(p){p===l.DARKEST||p===l.LIGHTEST||p===l.ADD||p===l.BLEND||p===l.SUBTRACT||p===l.SCREEN||p===l.EXCLUSION||p===l.REPLACE||p===l.MULTIPLY||p===l.REMOVE?this.curBlendMode=p:p!==l.BURN&&p!==l.OVERLAY&&p!==l.HARD_LIGHT&&p!==l.SOFT_LIGHT&&p!==l.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},n.default.RendererGL.prototype.erase=function(p,g){this._isErasing||(this._applyBlendMode(l.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,p/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,g/255])},n.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},n.default.RendererGL.prototype.strokeWeight=function(p){this.curStrokeWeight!==p&&(this.pointSize=p,this.curStrokeWeight=p)},n.default.RendererGL.prototype._getPixel=function(p,g){var v=new Uint8Array(4);return this.drawingContext.readPixels(p,g,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,v),[v[0],v[1],v[2],v[3]]},n.default.RendererGL.prototype.loadPixels=function(){var p,g=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(g=g.pixels,p=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,g instanceof Uint8Array&&g.length===p||(g=new Uint8Array(p),this._pixelsState._setProperty("pixels",g)),p=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*p,this.height*p,this.GL.RGBA,this.GL.UNSIGNED_BYTE,g))},n.default.RendererGL.prototype.geometryInHash=function(p){return this.retainedMode.geometry[p]!==void 0},n.default.RendererGL.prototype.resize=function(p,g){n.default.Renderer.prototype.resize.call(this,p,g),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),p=this._pixelsState,p.pixels!==void 0&&p._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},n.default.RendererGL.prototype.clear=function(){this.GL.clearColor((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.applyMatrix=function(p,g,v,b,_,x){arguments.length===16?n.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([p,g,0,0,v,b,0,0,0,0,1,0,_,x,0,1])},n.default.RendererGL.prototype.translate=function(p,g,v){return p instanceof n.default.Vector&&(v=p.z,g=p.y,p=p.x),this.uMVMatrix.translate([p,g,v]),this},n.default.RendererGL.prototype.scale=function(p,g,v){return this.uMVMatrix.scale(p,g,v),this},n.default.RendererGL.prototype.rotate=function(p,g){return g===void 0?this.rotateZ(p):(n.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},n.default.RendererGL.prototype.rotateX=function(p){return this.rotate(p,1,0,0),this},n.default.RendererGL.prototype.rotateY=function(p){return this.rotate(p,0,1,0),this},n.default.RendererGL.prototype.rotateZ=function(p){return this.rotate(p,0,0,1),this},n.default.RendererGL.prototype.push=function(){var p=n.default.Renderer.prototype.push.apply(this),g=p.properties;return g.uMVMatrix=this.uMVMatrix.copy(),g.uPMatrix=this.uPMatrix.copy(),g._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),g.ambientLightColors=this.ambientLightColors.slice(),g.specularColors=this.specularColors.slice(),g.directionalLightDirections=this.directionalLightDirections.slice(),g.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),g.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),g.pointLightPositions=this.pointLightPositions.slice(),g.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),g.pointLightSpecularColors=this.pointLightSpecularColors.slice(),g.spotLightPositions=this.spotLightPositions.slice(),g.spotLightDirections=this.spotLightDirections.slice(),g.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),g.spotLightSpecularColors=this.spotLightSpecularColors.slice(),g.spotLightAngle=this.spotLightAngle.slice(),g.spotLightConc=this.spotLightConc.slice(),g.userFillShader=this.userFillShader,g.userStrokeShader=this.userStrokeShader,g.userPointShader=this.userPointShader,g.pointSize=this.pointSize,g.curStrokeWeight=this.curStrokeWeight,g.curStrokeColor=this.curStrokeColor,g.curFillColor=this.curFillColor,g.curAmbientColor=this.curAmbientColor,g.curSpecularColor=this.curSpecularColor,g.curEmissiveColor=this.curEmissiveColor,g._useSpecularMaterial=this._useSpecularMaterial,g._useEmissiveMaterial=this._useEmissiveMaterial,g._useShininess=this._useShininess,g.constantAttenuation=this.constantAttenuation,g.linearAttenuation=this.linearAttenuation,g.quadraticAttenuation=this.quadraticAttenuation,g._enableLighting=this._enableLighting,g._useNormalMaterial=this._useNormalMaterial,g._tex=this._tex,g.drawMode=this.drawMode,g._currentNormal=this._currentNormal,g.curBlendMode=this.curBlendMode,p},n.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=n.default.Matrix.identity(this._pInst),this},n.default.RendererGL.prototype._getImmediateStrokeShader=function(){var p=this.userStrokeShader;return p&&p.isStrokeShader()?p:this._getLineShader()},n.default.RendererGL.prototype._getRetainedStrokeShader=n.default.RendererGL.prototype._getImmediateStrokeShader,n.default.RendererGL.prototype._getImmediateFillShader=function(){var p=this.userFillShader;if(this._useNormalMaterial&&(!p||!p.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!p||!p.isLightShader())return this._getLightShader()}else if(this._tex){if(!p||!p.isTextureShader())return this._getLightShader()}else if(!p)return this._getImmediateModeShader();return p},n.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var p=this.userFillShader;if(this._enableLighting){if(!p||!p.isLightShader())return this._getLightShader()}else if(this._tex){if(!p||!p.isTextureShader())return this._getLightShader()}else if(!p)return this._getColorShader();return p},n.default.RendererGL.prototype._getImmediatePointShader=function(){var p=this.userPointShader;return p&&p.isPointShader()?p:this._getPointShader()},n.default.RendererGL.prototype._getRetainedLineShader=n.default.RendererGL.prototype._getImmediateLineShader,n.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new n.default.Shader(this,c.phongVert,c.phongFrag):this._defaultLightShader=new n.default.Shader(this,c.lightVert,c.lightTextureFrag)),this._defaultLightShader},n.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new n.default.Shader(this,c.immediateVert,c.vertexColorFrag)),this._defaultImmediateModeShader},n.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new n.default.Shader(this,c.normalVert,c.normalFrag)),this._defaultNormalShader},n.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new n.default.Shader(this,c.normalVert,c.basicFrag)),this._defaultColorShader},n.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new n.default.Shader(this,c.pointVert,c.pointFrag)),this._defaultPointShader},n.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new n.default.Shader(this,c.lineVert,c.lineFrag)),this._defaultLineShader},n.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new n.default.Shader(this,c.fontVert,c.fontFrag)),this._defaultFontShader},n.default.RendererGL.prototype._getEmptyTexture=function(){var p;return this._emptyTexture||((p=new n.default.Image(1,1)).set(0,0,255),this._emptyTexture=new n.default.Texture(this,p)),this._emptyTexture},n.default.RendererGL.prototype.getTexture=function(p){var g=this.textures,v=!0,b=!1,_=void 0;try{for(var x,A=g[Symbol.iterator]();!(v=(x=A.next()).done);v=!0){var E=x.value;if(E.src===p)return E}}catch(T){b=!0,_=T}finally{try{v||A.return==null||A.return()}finally{if(b)throw _}}return b=new n.default.Texture(this,p),g.push(b),b},n.default.RendererGL.prototype._setStrokeUniforms=function(p){p.bindShader(),p.setUniform("uMaterialColor",this.curStrokeColor),p.setUniform("uStrokeWeight",this.curStrokeWeight)},n.default.RendererGL.prototype._setFillUniforms=function(p){p.bindShader(),p.setUniform("uMaterialColor",this.curFillColor),p.setUniform("isTexture",!!this._tex),this._tex&&p.setUniform("uSampler",this._tex),p.setUniform("uTint",this._tint),p.setUniform("uAmbientMatColor",this.curAmbientColor),p.setUniform("uSpecularMatColor",this.curSpecularColor),p.setUniform("uEmissiveMatColor",this.curEmissiveColor),p.setUniform("uSpecular",this._useSpecularMaterial),p.setUniform("uEmissive",this._useEmissiveMaterial),p.setUniform("uShininess",this._useShininess),p.setUniform("uUseLighting",this._enableLighting);var g=this.pointLightDiffuseColors.length/3,g=(p.setUniform("uPointLightCount",g),p.setUniform("uPointLightLocation",this.pointLightPositions),p.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),p.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),g=(p.setUniform("uDirectionalLightCount",g),p.setUniform("uLightingDirection",this.directionalLightDirections),p.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),p.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),g=(p.setUniform("uAmbientLightCount",g),p.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);p.setUniform("uSpotLightCount",g),p.setUniform("uSpotLightAngle",this.spotLightAngle),p.setUniform("uSpotLightConc",this.spotLightConc),p.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),p.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),p.setUniform("uSpotLightLocation",this.spotLightPositions),p.setUniform("uSpotLightDirection",this.spotLightDirections),p.setUniform("uConstantAttenuation",this.constantAttenuation),p.setUniform("uLinearAttenuation",this.linearAttenuation),p.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),p.bindTextures()},n.default.RendererGL.prototype._setPointUniforms=function(p){p.bindShader(),p.setUniform("uMaterialColor",this.curStrokeColor),p.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},n.default.RendererGL.prototype._bindBuffer=function(p,g,v,b,_){g=g||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(g,p),v!==void 0&&(p=new(b||Float32Array)(v),this.GL.bufferData(g,p,_||this.GL.STATIC_DRAW))},n.default.RendererGL.prototype._arraysEqual=function(p,g){var v=p.length;if(v!==g.length)return!1;for(var b=0;b<v;b++)if(p[b]!==g[b])return!1;return!0},n.default.RendererGL.prototype._isTypedArray=function(p){return p instanceof Uint32Array},n.default.RendererGL.prototype._flatten=function(p){if(p.length===0)return[];var g;if(2e4<p.length){for(var v=Object.prototype.toString,b=[],_=p.slice(),x=_.pop();v.call(x)==="[object Array]"?_.push.apply(_,o(x)):b.push(x),_.length&&(x=_.pop())!==void 0;);return b.reverse(),b}return(g=[]).concat.apply(g,o(p))},n.default.RendererGL.prototype._vToNArray=function(p){var g=[],v=!0,b=!1,_=void 0;try{for(var x,A=p[Symbol.iterator]();!(v=(x=A.next()).done);v=!0){var E=x.value;g.push(E.x,E.y,E.z)}}catch(T){b=!0,_=T}finally{try{v||A.return==null||A.return()}finally{if(b)throw _}}return g},n.default.prototype._assert3d=function(p){if(!this._renderer.isP3D)throw new Error("".concat(p,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},n.default.RendererGL.prototype._initTessy=function(){var p=new h.default.GluTesselator;return p.gluTessCallback(h.default.gluEnum.GLU_TESS_VERTEX_DATA,function(g,v){for(var b=0;b<g.length;b++)v[v.length]=g[b]}),p.gluTessCallback(h.default.gluEnum.GLU_TESS_BEGIN,function(g){g!==h.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(g))}),p.gluTessCallback(h.default.gluEnum.GLU_TESS_ERROR,function(g){console.log("error callback"),console.log("error number: ".concat(g))}),p.gluTessCallback(h.default.gluEnum.GLU_TESS_COMBINE,function(g,v,b){for(var _=[0,0,0,0,0,0,0,0,0,0,0,0],x=0;x<b.length;x++)for(var A=0;A<_.length;A++)b[x]!==0&&v[x]&&(_[A]+=v[x][A]*b[x]);return _}),p.gluTessCallback(h.default.gluEnum.GLU_TESS_EDGE_FLAG,function(g){}),p},n.default.RendererGL.prototype._triangulate=function(p){this._tessy.gluTessNormal(0,0,1);var g=[];this._tessy.gluTessBeginPolygon(g);for(var v=0;v<p.length;v++){this._tessy.gluTessBeginContour();for(var b=p[v],_=0;_<b.length;_+=12){var x=b.slice(_,_+12);this._tessy.gluTessVertex(x,x)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),g},n.default.RendererGL.prototype._bezierCoefficients=function(p){var g=p*p,v=1-p,b=v*v;return[b*v,3*b*p,3*v*g,g*p]},n.default.RendererGL.prototype._quadraticCoefficients=function(p){var g=1-p;return[g*g,2*g*p,p*p]},n.default.RendererGL.prototype._bezierToCatmull=function(p){return[p[1],p[1]+(p[2]-p[0])/this._curveTightness,p[2]-(p[3]-p[1])/this._curveTightness,p[2]]},n.default.RendererGL);f.default=u},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(e,d,f){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var a=(e=e("../core/main"))&&e.__esModule?e:{default:e};a.default.Shader=function(s,n,l){this._renderer=s,this._vertSrc=n,this._fragSrc=l,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},a.default.Shader.prototype.init=function(){if(this._glProgram===0){var s=this._renderer.GL;if(this._vertShader=s.createShader(s.VERTEX_SHADER),s.shaderSource(this._vertShader,this._vertSrc),s.compileShader(this._vertShader),!s.getShaderParameter(this._vertShader,s.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(s.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=s.createShader(s.FRAGMENT_SHADER),s.shaderSource(this._fragShader,this._fragSrc),s.compileShader(this._fragShader),!s.getShaderParameter(this._fragShader,s.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(s.getShaderInfoLog(this._fragShader))),null;this._glProgram=s.createProgram(),s.attachShader(this._glProgram,this._vertShader),s.attachShader(this._glProgram,this._fragShader),s.linkProgram(this._glProgram),s.getProgramParameter(this._glProgram,s.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(s.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},a.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var s=this._renderer.GL,n=s.getProgramParameter(this._glProgram,s.ACTIVE_ATTRIBUTES),l=0;l<n;++l){var h=s.getActiveAttrib(this._glProgram,l),m=h.name,i=s.getAttribLocation(this._glProgram,m),o={};o.name=m,o.location=i,o.index=l,o.type=h.type,o.size=h.size,this.attributes[m]=o}this._loadedAttributes=!0}},a.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var s=this._renderer.GL,n=s.getProgramParameter(this._glProgram,s.ACTIVE_UNIFORMS),l=0,h=0;h<n;++h){var m=s.getActiveUniform(this._glProgram,h),i={},o=(i.location=s.getUniformLocation(this._glProgram,m.name),i.size=m.size,m.name);1<m.size&&(o=o.substring(0,o.indexOf("[0]"))),i.name=o,i.type=m.type,i._cachedData=void 0,i.type===s.SAMPLER_2D&&(i.samplerIndex=l,l++,this.samplers.push(i)),i.isArray=1<m.size||i.type===s.FLOAT_MAT3||i.type===s.FLOAT_MAT4||i.type===s.FLOAT_VEC2||i.type===s.FLOAT_VEC3||i.type===s.FLOAT_VEC4||i.type===s.INT_VEC2||i.type===s.INT_VEC4||i.type===s.INT_VEC3,this.uniforms[o]=i}this._loadedUniforms=!0}},a.default.Shader.prototype.compile=function(){},a.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},a.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},a.default.Shader.prototype.bindTextures=function(){var s=this._renderer.GL,n=!0,l=!1,h=void 0;try{for(var m,i=this.samplers[Symbol.iterator]();!(n=(m=i.next()).done);n=!0){var o=m.value,c=o.texture;c===void 0&&(c=this._renderer._getEmptyTexture()),s.activeTexture(s.TEXTURE0+o.samplerIndex),c.bindTexture(),c.update(),s.uniform1i(o.location,o.samplerIndex)}}catch(u){l=!0,h=u}finally{try{n||i.return==null||i.return()}finally{if(l)throw h}}},a.default.Shader.prototype.updateTextures=function(){var s=!0,n=!1,l=void 0;try{for(var h,m=this.samplers[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var i=h.value.texture;i&&i.update()}}catch(o){n=!0,l=o}finally{try{s||m.return==null||m.return()}finally{if(n)throw l}}},a.default.Shader.prototype.unbindTextures=function(){},a.default.Shader.prototype._setMatrixUniforms=function(){var s=this._renderer._curCamera.cameraMatrix,n=this._renderer.uPMatrix,l=this._renderer.uMVMatrix,h=l.copy();h.mult(n),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",s.mat4),this.setUniform("uProjectionMatrix",n.mat4),this.setUniform("uModelViewMatrix",l.mat4),this.setUniform("uModelViewProjectionMatrix",h.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},a.default.Shader.prototype.useProgram=function(){var s=this._renderer.GL;return this._renderer._curShader!==this&&(s.useProgram(this._glProgram),this._renderer._curShader=this),this},a.default.Shader.prototype.setUniform=function(s,n){var l=this.uniforms[s];if(l){var h=this._renderer.GL;if(l.isArray){if(l._cachedData&&this._renderer._arraysEqual(l._cachedData,n))return;l._cachedData=n.slice(0)}else{if(l._cachedData&&l._cachedData===n)return;Array.isArray(n)?l._cachedData=n.slice(0):l._cachedData=n}var m=l.location;switch(this.useProgram(),l.type){case h.BOOL:n===!0?h.uniform1i(m,1):h.uniform1i(m,0);break;case h.INT:1<l.size?n.length&&h.uniform1iv(m,n):h.uniform1i(m,n);break;case h.FLOAT:1<l.size?n.length&&h.uniform1fv(m,n):h.uniform1f(m,n);break;case h.FLOAT_MAT3:h.uniformMatrix3fv(m,!1,n);break;case h.FLOAT_MAT4:h.uniformMatrix4fv(m,!1,n);break;case h.FLOAT_VEC2:1<l.size?n.length&&h.uniform2fv(m,n):h.uniform2f(m,n[0],n[1]);break;case h.FLOAT_VEC3:1<l.size?n.length&&h.uniform3fv(m,n):h.uniform3f(m,n[0],n[1],n[2]);break;case h.FLOAT_VEC4:1<l.size?n.length&&h.uniform4fv(m,n):h.uniform4f(m,n[0],n[1],n[2],n[3]);break;case h.INT_VEC2:1<l.size?n.length&&h.uniform2iv(m,n):h.uniform2i(m,n[0],n[1]);break;case h.INT_VEC3:1<l.size?n.length&&h.uniform3iv(m,n):h.uniform3i(m,n[0],n[1],n[2]);break;case h.INT_VEC4:1<l.size?n.length&&h.uniform4iv(m,n):h.uniform4i(m,n[0],n[1],n[2],n[3]);break;case h.SAMPLER_2D:h.activeTexture(h.TEXTURE0+l.samplerIndex),l.texture=n instanceof a.default.Texture?n:this._renderer.getTexture(n),h.uniform1i(m,l.samplerIndex)}return this}},a.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},a.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},a.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},a.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},a.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},a.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},a.default.Shader.prototype.enableAttrib=function(s,n,l,h,m,i){var o,c;return s&&(o=s.location)!==-1&&(c=this._renderer.GL,s.enabled||(c.enableVertexAttribArray(o),s.enabled=!0),this._renderer.GL.vertexAttribPointer(o,n,l||c.FLOAT,h||!1,m||0,i||0)),this},e=a.default.Shader,f.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(e,d,f){function a(i){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(i)}function s(i){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(o){return a(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":a(o)})(i)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var n=(m=e("../core/main"))&&m.__esModule?m:{default:m},l=function(i){if(i&&i.__esModule)return i;if(i===null||s(i)!=="object"&&typeof i!="function")return{default:i};var o=h();if(o&&o.has(i))return o.get(i);var c,u={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in i){var g;Object.prototype.hasOwnProperty.call(i,c)&&((g=p?Object.getOwnPropertyDescriptor(i,c):null)&&(g.get||g.set)?Object.defineProperty(u,c,g):u[c]=i[c])}return u.default=i,o&&o.set(i,u),u}(e("../core/constants"));function h(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,h=function(){return i},i)}n.default.Texture=function(i,o,c){return this._renderer=i,i=this._renderer.GL,(c=c||{}).dataType===i.FLOAT&&(i.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),i.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=o,this.glTex=void 0,this.glTarget=i.TEXTURE_2D,this.glFormat=c.format||i.RGBA,this.mipmaps=!1,this.glMinFilter=c.minFilter||i.LINEAR,this.glMagFilter=c.magFilter||i.LINEAR,this.glWrapS=c.wrapS||i.CLAMP_TO_EDGE,this.glWrapT=c.wrapT||i.CLAMP_TO_EDGE,this.glDataType=c.dataType||i.UNSIGNED_BYTE,this.isSrcMediaElement=n.default.MediaElement!==void 0&&o instanceof n.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=n.default.Element!==void 0&&o instanceof n.default.Element&&!(o instanceof n.default.Graphics)&&!(o instanceof n.default.Renderer),this.isSrcP5Image=o instanceof n.default.Image,this.isSrcP5Graphics=o instanceof n.default.Graphics,this.isSrcP5Renderer=o instanceof n.default.Renderer,this.isImageData=typeof ImageData<"u"&&o instanceof ImageData,c=this._getTextureDataFromSource(),this.width=c.width,this.height=c.height,this.init(c),this},n.default.Texture.prototype._getTextureDataFromSource=function(){var i;return this.isSrcP5Image?i=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?i=this.src.elt:this.isImageData&&(i=this.src),i},n.default.Texture.prototype.init=function(i){var o,c=this._renderer.GL;this.glTex=c.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.glMagFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(o=new Uint8Array([1,1,1,1]),c.texImage2D(this.glTarget,0,c.RGBA,1,1,0,this.glFormat,this.glDataType,o)):c.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,i)},n.default.Texture.prototype.update=function(){var i,o,c,u=this.src;return u.width!==0&&u.height!==0&&(i=this._getTextureDataFromSource(),o=!1,c=this._renderer.GL,i.width!==this.width||i.height!==this.height?(o=!0,this.width=i.width,this.height=i.height,this.isSrcP5Image?u.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&u.setModified(!0)):this.isSrcP5Image?u.isModified()&&u.setModified(!(o=!0)):this.isSrcMediaElement?u.isModified()?u.setModified(!(o=!0)):u.loadedmetadata&&this._videoPrevUpdateTime!==u.time()&&(this._videoPrevUpdateTime=u.time(),o=!0):this.isImageData?u._dirty&&(o=!(u._dirty=!1)):o=!0,o&&(this.bindTexture(),c.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,i)),o)},n.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},n.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},n.default.Texture.prototype.setInterpolation=function(i,o){var c=this._renderer.GL;i===l.NEAREST?this.glMinFilter=c.NEAREST:this.glMinFilter=c.LINEAR,o===l.NEAREST?this.glMagFilter=c.NEAREST:this.glMagFilter=c.LINEAR,this.bindTexture(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.glMinFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},n.default.Texture.prototype.setWrapMode=function(i,o){function c(v){return(v&v-1)==0}var u=this._renderer.GL,p=c(this.width),g=c(this.height);i===l.REPEAT?p&&g?this.glWrapS=u.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=u.CLAMP_TO_EDGE):i===l.MIRROR?p&&g?this.glWrapS=u.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=u.CLAMP_TO_EDGE):this.glWrapS=u.CLAMP_TO_EDGE,o===l.REPEAT?p&&g?this.glWrapT=u.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=u.CLAMP_TO_EDGE):o===l.MIRROR?p&&g?this.glWrapT=u.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=u.CLAMP_TO_EDGE):this.glWrapT=u.CLAMP_TO_EDGE,this.bindTexture(),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.glWrapS),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var m=n.default.Texture;f.default=m},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(e,d,f){function a(p){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}function s(p){return(s=typeof Symbol=="function"&&a(Symbol.iterator)==="symbol"?function(g){return a(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":a(g)})(p)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var n,l=(n=e("../core/main"))&&n.__esModule?n:{default:n},h=function(p){if(p&&p.__esModule)return p;if(p===null||s(p)!=="object"&&typeof p!="function")return{default:p};var g=m();if(g&&g.has(p))return g.get(p);var v,b={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(v in p){var x;Object.prototype.hasOwnProperty.call(p,v)&&((x=_?Object.getOwnPropertyDescriptor(p,v):null)&&(x.get||x.set)?Object.defineProperty(b,v,x):b[v]=p[v])}return b.default=p,g&&g.set(p,b),b}(e("../core/constants"));function m(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,m=function(){return p},p)}e("./p5.Shader"),e("./p5.RendererGL.Retained"),l.default.RendererGL.prototype._applyTextProperties=function(){},l.default.RendererGL.prototype.textWidth=function(p){return this._isOpenType()?this._textFont._textWidth(p,this._textSize):0};function i(p,g){this.width=p,this.height=g,this.infos=[],this.findImage=function(v){var b,_,x=this.width*this.height;if(x<v)throw new Error("font is too complex to render in 3D");for(var A=this.infos.length-1;0<=A;--A){var E=this.infos[A];if(E.index+v<x){_=(b=E).imageData;break}}if(!b){try{_=new ImageData(this.width,this.height)}catch{var T=document.getElementsByTagName("canvas")[0],C=!T,R=(T||((T=document.createElement("canvas")).style.display="none",document.body.appendChild(T)),T.getContext("2d"));R&&(_=R.createImageData(this.width,this.height)),C&&document.body.removeChild(T)}this.infos.push(b={index:0,imageData:_})}return R=b.index,b.index+=v,_._dirty=!0,{imageData:_,index:R}}}function o(A,g,v,b,_){var x=A.imageData.data,A=4*A.index++;x[A++]=g,x[A++]=v,x[A++]=b,x[+A]=_}function c(p){this.font=p,this.strokeImageInfos=new i(64,64),this.colDimImageInfos=new i(64,64),this.rowDimImageInfos=new i(64,64),this.colCellImageInfos=new i(64,64),this.rowCellImageInfos=new i(64,64),this.glyphInfos={},this.getGlyphInfo=function(g){var v=this.glyphInfos[g.index];if(!v){var b=g.getBoundingBox(),_=b.x1,x=b.y1,A=b.x2-_,E=b.y2-x,T=g.path.commands;if(A==0||E==0||!T.length)return this.glyphInfos[g.index]={};for(var C,R,P,N,k=[],I=[],B=[],Y=8;0<=Y;--Y)B.push([]);for(Y=8;0<=Y;--Y)I.push([]);var W=!0,H=!1,X=void 0;try{for(var Z,q=T[Symbol.iterator]();!(W=(Z=q.next()).done);W=!0){var ee=Z.value,L=(ee.x-_)/A,O=(ee.y-x)/E;if(!De(C,R,L,O)){switch(ee.type){case"M":P=L,N=O;break;case"L":we(C,R,L,O);break;case"Q":var U=(ee.x1-_)/A,V=(ee.y1-x)/E;_e([C,L,U],[R,O,V],{x:C,y:R,cx:U,cy:V});break;case"Z":De(C,R,P,N)?k.push({x:C,y:R}):(we(C,R,P,N),k.push({x:P,y:N}));break;case"C":for(var J=function(oe,G,te,Ae,Ne,ze,Ve,xe){var oe=new Te(new l.default.Vector(oe,G),new l.default.Vector(te,Ae),new l.default.Vector(Ne,ze),new l.default.Vector(Ve,xe)).splitInflections(),ae=[],K=30/u,Q=!0,G=!1,te=void 0;try{for(var ge,Ee=oe[Symbol.iterator]();!(Q=(ge=Ee.next()).done);Q=!0){for(var Le=ge.value,Ye=[],ye=void 0;!(.125<=(ye=K/Le.quadError()));){var je=Math.pow(ye,.3333333333333333),Ue=Le.split(je),$e=Le.split(1-je/(1-je));ae.push(Ue),Ye.push(Le),Le=$e}ye<1&&ae.push(Le.split(.5)),ae.push(Le),Array.prototype.push.apply(ae,Ye.reverse())}}catch(rt){G=!0,te=rt}finally{try{Q||Ee.return==null||Ee.return()}finally{if(G)throw te}}return ae}(C,R,(ee.x1-_)/A,(ee.y1-x)/E,(ee.x2-_)/A,(ee.y2-x)/E,L,O),le=0;le<J.length;le++){var ce=J[le].toQuadratic();_e([ce.x,ce.x1,ce.cx],[ce.y,ce.y1,ce.cy],ce)}break;default:throw new Error("unknown command type: ".concat(ee.type))}C=L,R=O}}}catch(We){H=!0,X=We}finally{try{W||q.return==null||q.return()}finally{if(H)throw X}}for(var ue=k.length,re=this.strokeImageInfos.findImage(ue),de=re.index,ve=0;ve<ue;++ve){var ie=k[ve];o(re,Se(ie.x),Se(ie.y),Se(ie.cx),Se(ie.cy))}(v=this.glyphInfos[g.index]={glyph:g,uGlyphRect:[b.x1,-b.y1,b.x2,-b.y2],strokeImageInfo:re,strokes:k,colInfo:Ie(B,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Ie(I,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[v.colInfo.dimOffset,v.rowInfo.dimOffset]}return v;function _e(We,$,se){var Ae=k.length;function Ne(ae,K,Q){for(var G=ae.length;0<G--;){var te=ae[G];te<K&&(K=te),Q<te&&(Q=te)}return{min:K,max:Q}}k.push(se);for(var se=Ne(We,1,0),We=Math.max(Math.floor(9*se.min),0),ze=Math.min(Math.ceil(9*se.max),9),Ve=We;Ve<ze;++Ve)B[Ve].push(Ae);for(var se=Ne($,1,0),We=Math.max(Math.floor(9*se.min),0),xe=Math.min(Math.ceil(9*se.max),9),oe=We;oe<xe;++oe)I[oe].push(Ae)}function Se(We){return(We=(se=255)*We)<($=0)?$:se<We?se:We;var $,se}function Te(We,$,se,Ae){this.p0=We,this.c0=$,this.c1=se,this.p1=Ae,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return l.default.Vector.sub(l.default.Vector.sub(this.p1,this.p0),l.default.Vector.mult(l.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(oe){var ze=l.default.Vector.lerp(this.p0,this.c0,oe),xe=l.default.Vector.lerp(this.c0,this.c1,oe),Ve=l.default.Vector.lerp(ze,xe,oe),xe=(this.c1=l.default.Vector.lerp(this.c1,this.p1,oe),this.c0=l.default.Vector.lerp(xe,this.c1,oe),l.default.Vector.lerp(Ve,this.c0,oe)),oe=new Te(this.p0,ze,Ve,xe);return this.p0=xe,oe},this.splitInflections=function(){var Ne=l.default.Vector.sub(this.c0,this.p0),ze=l.default.Vector.sub(l.default.Vector.sub(this.c1,this.c0),Ne),Ve=l.default.Vector.sub(l.default.Vector.sub(l.default.Vector.sub(this.p1,this.c1),Ne),l.default.Vector.mult(ze,2)),xe=[],oe=ze.x*Ve.y-ze.y*Ve.x;return oe!==0&&0<=(Ne=(Ve=Ne.x*Ve.y-Ne.y*Ve.x)*Ve-4*oe*(Ne.x*ze.y-Ne.y*ze.x))&&(oe<0&&(oe=-oe,Ve=-Ve),Ne=(-Ve+(ze=Math.sqrt(Ne)))/(2*oe),0<(Ve=(-Ve-ze)/(2*oe))&&Ve<1&&(xe.push(this.split(Ve)),Ne=1-(1-Ne)/(1-Ve)),0<Ne&&Ne<1&&xe.push(this.split(Ne))),xe.push(this),xe}}function we(We,$,se,Ae){_e([We,se],[$,Ae],{x:We,y:$,cx:(We+se)/2,cy:($+Ae)/2})}function De(We,$,se,Ae){return Math.abs(se-We)<1e-5&&Math.abs(Ae-$)<1e-5}function Ie(We,$,se){for(var Ae=We.length,Ne=$.findImage(Ae),$=Ne.index,ze=0,Ve=0;Ve<Ae;++Ve)ze+=We[Ve].length;for(var xe=se.findImage(ze),oe=0;oe<Ae;++oe){var ae=We[oe],K=ae.length,Q=xe.index;o(Ne,Q>>7,127&Q,K>>7,127&K);for(var G=0;G<K;++G){var te=ae[G]+de;o(xe,te>>7,127&te,0,0)}}return{cellImageInfo:xe,dimOffset:$,dimImageInfo:Ne}}}}var u=Math.sqrt(3);l.default.RendererGL.prototype._renderText=function(p,g,v,b,_){if(this._textFont&&typeof this._textFont!="string"){if(!(_<=b)&&this._doFill){if(this._isOpenType()){p.push();var _=this._doStroke,x=this.drawMode,A=(this._doStroke=!1,this.drawMode=h.TEXTURE,this._textFont.font),E=(E=this._textFont._fontInfo)||(this._textFont._fontInfo=new c(A)),v=this._textFont._handleAlignment(this,g,v,b),b=this._textSize/A.unitsPerEm,T=(this.translate(v.x,v.y,0),this.scale(b,b,1),this.GL),v=!this._defaultFontShader,C=this._getFontShader(),R=(C.init(),C.bindShader(),v&&(C.setUniform("uGridImageSize",[64,64]),C.setUniform("uCellsImageSize",[64,64]),C.setUniform("uStrokeImageSize",[64,64]),C.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),P=(R||((b=this._textGeom=new l.default.Geometry(1,1,function(){for(var ce=0;ce<=1;ce++)for(var ue=0;ue<=1;ue++)this.vertices.push(new l.default.Vector(ue,ce,0)),this.uvs.push(ue,ce)})).computeFaces().computeNormals(),R=this.createBuffers("glyph",b)),!0),v=!1,b=void 0;try{for(var N,k=this.retainedMode.buffers.text[Symbol.iterator]();!(P=(N=k.next()).done);P=!0)N.value._prepareBuffer(R,C)}catch(ce){v=!0,b=ce}finally{try{P||k.return==null||k.return()}finally{if(v)throw b}}this._bindBuffer(R.indexBuffer,T.ELEMENT_ARRAY_BUFFER),C.setUniform("uMaterialColor",this.curFillColor);try{var I=0,B=null,Y=A.stringToGlyphs(g),W=!0,H=!1,X=void 0;try{for(var Z,q=Y[Symbol.iterator]();!(W=(Z=q.next()).done);W=!0){var ee,L,O=Z.value,U=(B&&(I+=A.getKerningValue(B,O)),E.getGlyphInfo(O));U.uGlyphRect&&(ee=U.rowInfo,L=U.colInfo,C.setUniform("uSamplerStrokes",U.strokeImageInfo.imageData),C.setUniform("uSamplerRowStrokes",ee.cellImageInfo.imageData),C.setUniform("uSamplerRows",ee.dimImageInfo.imageData),C.setUniform("uSamplerColStrokes",L.cellImageInfo.imageData),C.setUniform("uSamplerCols",L.dimImageInfo.imageData),C.setUniform("uGridOffset",U.uGridOffset),C.setUniform("uGlyphRect",U.uGlyphRect),C.setUniform("uGlyphOffset",I),C.bindTextures(),T.drawElements(T.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),I+=O.advanceWidth,B=O}}catch(ce){H=!0,X=ce}finally{try{W||q.return==null||q.return()}finally{if(H)throw X}}}finally{C.unbindShader(),this._doStroke=_,this.drawMode=x,p.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return p}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)})})(Qd);const Uu=Jd(ya);function $d(w){let t,r,e=d=>{let f=0;r=d,d.windowResized=()=>{d.resizeCanvas(d.windowWidth,d.windowHeight)},d.setup=()=>{t=d.createCanvas(d.windowWidth,d.windowHeight),t.position(0,0),t.style("z-index","-1")},d.draw=()=>{d.background(229.5,127.5);for(let a=0;a<=d.width;a=a+30)for(let s=0;s<=d.height;s=s+30){const n=d.map(200,0,d.width,-4*d.PI,4*d.PI,!0),l=d.map(200,0,d.height,-4*d.PI,4*d.PI,!0),h=n*(a/d.width)+l*(s/d.height),m=a+40*d.cos(2*d.PI*f+h),i=s+20*d.sin(2*d.PI*f+h);d.stroke(140.25),d.ellipse(m,i,5)}f=f+.001}};return Hi(()=>{new Uu(e)}),Ra(()=>{r&&r.remove()}),[]}class eh extends dn{constructor(t){super(),Cr(this,t,$d,null,Ar,{})}}function th(w){let t,r,e,d,f,a,s,n,l,h,m,i,o,c,u,p,g,v,b,_;return{c(){t=ar("svg"),r=ar("rect"),e=ar("mask"),d=ar("path"),f=ar("path"),a=ar("path"),s=ar("path"),n=ar("path"),l=ar("path"),h=ar("path"),m=ar("path"),i=ar("path"),o=ar("path"),c=ar("path"),u=ar("g"),p=ar("rect"),g=ar("defs"),v=ar("linearGradient"),b=ar("stop"),_=ar("stop"),st(r,"width","400"),st(r,"height","100"),st(r,"fill","none"),st(r,"stroke","none"),st(d,"d","M400.003 86.87C374.952 67.1799 353.247 67.7099 328.066 86.87C336.236 93.6477 349.306 98.0389 364.036 98.0389C378.765 98.0389 391.833 93.6477 400.003 86.87Z"),st(d,"class","svelte-yi2lb"),st(f,"d","M400.003 13.1097C374.952 32.7998 353.247 32.2691 328.066 13.1097C336.236 6.33129 349.306 1.94088 364.036 1.94088C378.765 1.94088 391.833 6.33129 400.003 13.1097Z"),st(f,"class","svelte-yi2lb"),st(a,"d","M326.91 85.6625C346.763 60.8171 346.228 39.2917 326.91 14.3172C320.077 22.4195 315.649 35.3808 315.649 49.9895C315.649 64.5982 320.077 77.5596 326.91 85.6625"),st(a,"class","svelte-yi2lb"),st(s,"d","M192.581 85.9245C167.53 66.2344 145.826 66.7651 120.645 85.9245C128.814 92.7023 141.883 97.0935 156.613 97.0935C171.343 97.0935 184.411 92.7023 192.581 85.9245Z"),st(s,"class","svelte-yi2lb"),st(n,"d","M119.488 84.7171C139.341 59.8716 138.806 38.3462 119.488 13.3718C112.654 21.4748 108.227 34.436 108.227 49.0447C108.227 63.6535 112.654 76.6149 119.488 84.7171"),st(n,"class","svelte-yi2lb"),st(l,"d","M193.738 84.7171C173.884 59.8716 174.419 38.3462 193.738 13.3718C200.572 21.4748 204.999 34.436 204.999 49.0447C204.999 63.6535 200.572 76.6149 193.738 84.7171"),st(l,"class","svelte-yi2lb"),st(h,"d","M212.648 50.8133C214.014 82.0918 226.971 96.3809 259.708 97.0935C256.672 69.2185 241.528 52.9688 212.648 50.8133Z"),st(h,"class","svelte-yi2lb"),st(m,"d","M212.648 49.1196C214.014 17.8411 226.971 3.55116 259.708 2.83859C256.672 30.7143 241.528 46.9632 212.648 49.1196"),st(m,"class","svelte-yi2lb"),st(i,"d","M308.476 50.8133C307.108 82.0918 294.151 96.3809 261.416 97.0935C264.452 69.2185 279.594 52.9688 308.476 50.8133Z"),st(i,"class","svelte-yi2lb"),st(o,"d","M308.476 49.1196C307.108 17.8411 294.151 3.55116 261.416 2.83859C264.452 30.7143 279.594 46.9632 308.476 49.1196"),st(o,"class","svelte-yi2lb"),st(c,"d","M50.5395 0.000341475C53.951 32.0019 68.029 47.8135 101.079 50.0002C68.029 52.1868 53.951 67.9983 50.5395 100C47.1285 67.9983 33.0498 52.1868 0 50.0002C33.0498 47.8135 47.1285 32.0019 50.5395 0.000341475Z"),st(c,"class","svelte-yi2lb"),st(e,"id","mask0_23_2"),Hd(e,"mask-type","alpha"),st(e,"maskUnits","userSpaceOnUse"),st(e,"x","0"),st(e,"y","0"),st(e,"width","401"),st(e,"height","100"),st(p,"width","400"),st(p,"height","100"),st(p,"fill","url(#paint0_linear_23_2)"),st(u,"mask","url(#mask0_23_2)"),st(b,"stop-color","#21D4FD"),st(_,"offset","1"),st(_,"stop-color","#B721FF"),st(v,"id","paint0_linear_23_2"),st(v,"x1","-2.98023e-06"),st(v,"y1","100"),st(v,"x2","400"),st(v,"y2","-1.63913e-05"),st(v,"gradientUnits","userSpaceOnUse"),st(t,"width","100%"),st(t,"height","100%"),st(t,"viewBox","0 0 400 100"),st(t,"fill","white"),st(t,"xmlns","http://www.w3.org/2000/svg")},m(x,A){Vt(x,t,A),gt(t,r),gt(t,e),gt(e,d),gt(e,f),gt(e,a),gt(e,s),gt(e,n),gt(e,l),gt(e,h),gt(e,m),gt(e,i),gt(e,o),gt(e,c),gt(t,u),gt(u,p),gt(t,g),gt(g,v),gt(v,b),gt(v,_)},p:rr,i:rr,o:rr,d(x){x&&tr(t)}}}class rh extends dn{constructor(t){super(),Cr(this,t,null,th,Ar,{})}}function kl(w,t,r){const e=w.slice();return e[2]=t[r],e}function Nl(w){let t,r=w[0],e=[];for(let d=0;d<r.length;d+=1)e[d]=Ul(kl(w,r,d));return{c(){t=Dt("nav");for(let d=0;d<e.length;d+=1)e[d].c()},m(d,f){Vt(d,t,f);for(let a=0;a<e.length;a+=1)e[a].m(t,null)},p(d,f){if(f&1){r=d[0];let a;for(a=0;a<r.length;a+=1){const s=kl(d,r,a);e[a]?e[a].p(s,f):(e[a]=Ul(s),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=r.length}},d(d){d&&tr(t),ku(e,d)}}}function Ul(w){let t,r=w[2].label+"",e,d;return{c(){t=Dt("a"),e=si(r),st(t,"class","text-body"),st(t,"href",d=w[2].url)},m(f,a){Vt(f,t,a),gt(t,e)},p(f,a){a&1&&r!==(r=f[2].label+"")&&La(e,r),a&1&&d!==(d=f[2].url)&&st(t,"href",d)},d(f){f&&tr(t)}}}function nh(w){let t,r=w[0]&&Nl(w);return{c(){r&&r.c(),t=Ca(),this.c=rr},m(e,d){r&&r.m(e,d),Vt(e,t,d)},p(e,[d]){e[0]?r?r.p(e,d):(r=Nl(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:rr,o:rr,d(e){r&&r.d(e),e&&tr(t)}}}function ih(w,t,r){let{nav_items:e}=t,d;return Hi(()=>{r(0,d=JSON.parse(e)),console.log({navItems:d})}),w.$$set=f=>{"nav_items"in f&&r(1,e=f.nav_items)},[d,e]}class sh extends oi{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";nav{display:flex;justify-content:space-between;padding:1.6rem}</style>',Cr(this,{target:this.shadowRoot,props:Vi(this.attributes),customElement:!0},ih,nh,Ar,{nav_items:1},null),t&&(t.target&&Vt(t.target,this,t.anchor),t.props&&(this.$set(t.props),cn()))}static get observedAttributes(){return["nav_items"]}get nav_items(){return this.$$.ctx[1]}set nav_items(t){this.$$set({nav_items:t}),cn()}}customElements.define("index-nav",sh);function oh(w){let t,r,e,d,f,a,s,n,l,h,m;return t=new eh({}),f=new rh({}),{c(){an(t.$$.fragment),r=vr(),e=Dt("div"),d=Dt("div"),an(f.$$.fragment),a=vr(),s=Dt("div"),s.innerHTML=`<p class="text-body excerpt">Мы поставляем трубопроводное оборудование и проектируем современные,
			<br/>
			рациональные и экономически обоснованные инженерные системы.</p>`,n=vr(),l=Dt("div"),h=Dt("index-nav"),this.c=rr,st(d,"class","logo-box"),st(s,"class","excerpt-box"),mo(h,"nav_items",w[0]),st(l,"class","index-nav-box"),st(e,"class","content-frame")},m(i,o){Kr(t,i,o),Vt(i,r,o),Vt(i,e,o),gt(e,d),Kr(f,d,null),gt(e,a),gt(e,s),gt(e,n),gt(e,l),gt(l,h),m=!0},p(i,[o]){(!m||o&1)&&mo(h,"nav_items",i[0])},i(i){m||(er(t.$$.fragment,i),er(f.$$.fragment,i),m=!0)},o(i){yr(t.$$.fragment,i),yr(f.$$.fragment,i),m=!1},d(i){zr(t,i),i&&tr(r),i&&tr(e),zr(f)}}}function ah(w,t,r){let{nav_items:e=""}=t;return w.$$set=d=>{"nav_items"in d&&r(0,e=d.nav_items)},[e]}class lh extends oi{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";.content-frame{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%)}.logo-box{width:400px;height:100px}.excerpt-box{display:flex;justify-content:flex-start;padding:1.6rem;border-radius:3px;background-color:hsla(0 0% 90% / 0.5)}</style>',Cr(this,{target:this.shadowRoot,props:Vi(this.attributes),customElement:!0},ah,oh,Ar,{nav_items:0},null),t&&(t.target&&Vt(t.target,this,t.anchor),t.props&&(this.$set(t.props),cn()))}static get observedAttributes(){return["nav_items"]}get nav_items(){return this.$$.ctx[0]}set nav_items(t){this.$$set({nav_items:t}),cn()}}customElements.define("index-screen",lh);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ia="148",xn={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ch=0,Fl=1,uh=2,Oa=1,dh=2,fs=3,Fn=0,Hr=1,_o=2,Ns=3,Un=0,Pi=1,Bl=2,Gl=3,zl=4,hh=5,Li=100,fh=101,ph=102,Vl=103,Hl=104,mh=200,gh=201,yh=202,vh=203,Fu=204,Bu=205,bh=206,_h=207,xh=208,wh=209,Sh=210,Mh=0,Th=1,Eh=2,va=3,jh=4,Ah=5,Ch=6,Lh=7,Gu=0,Rh=1,Ph=2,ln=0,Dh=1,Ih=2,Oh=3,kh=4,Nh=5,zu=300,Oi=301,ki=302,yo=303,ba=304,xo=306,Ni=1e3,Or=1001,vo=1002,gr=1003,_a=1004,uo=1005,dr=1006,Vu=1007,Bn=1008,ti=1009,Uh=1010,Fh=1011,Hu=1012,Bh=1013,Zn=1014,Jr=1015,Mn=1016,Gh=1017,zh=1018,Di=1020,Vh=1021,Hh=1022,Gr=1023,Wh=1024,qh=1025,Qn=1026,Ui=1027,Xh=1028,Yh=1029,Zh=1030,Kh=1031,Jh=1033,Po=33776,Do=33777,Io=33778,Oo=33779,Wl=35840,ql=35841,Xl=35842,Yl=35843,Qh=36196,Zl=37492,Kl=37496,Jl=37808,Ql=37809,$l=37810,ec=37811,tc=37812,rc=37813,nc=37814,ic=37815,sc=37816,oc=37817,ac=37818,lc=37819,cc=37820,uc=37821,dc=36492,bs=2300,Fi=2301,ko=2302,hc=2400,fc=2401,pc=2402,$h=2500,ef=1,Wu=2,Gn=3e3,Pt=3001,tf=3200,rf=3201,ka=0,nf=1,sn="srgb",_s="srgb-linear",No=7680,sf=519,xa=35044,mc="300 es",wa=1035;class ai{addEventListener(t,r){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[t]===void 0&&(e[t]=[]),e[t].indexOf(r)===-1&&e[t].push(r)}hasEventListener(t,r){if(this._listeners===void 0)return!1;const e=this._listeners;return e[t]!==void 0&&e[t].indexOf(r)!==-1}removeEventListener(t,r){if(this._listeners===void 0)return;const d=this._listeners[t];if(d!==void 0){const f=d.indexOf(r);f!==-1&&d.splice(f,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const e=this._listeners[t.type];if(e!==void 0){t.target=this;const d=e.slice(0);for(let f=0,a=d.length;f<a;f++)d[f].call(this,t);t.target=null}}}const jr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gc=1234567;const gs=Math.PI/180,xs=180/Math.PI;function Qr(){const w=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,e=Math.random()*4294967295|0;return(jr[w&255]+jr[w>>8&255]+jr[w>>16&255]+jr[w>>24&255]+"-"+jr[t&255]+jr[t>>8&255]+"-"+jr[t>>16&15|64]+jr[t>>24&255]+"-"+jr[r&63|128]+jr[r>>8&255]+"-"+jr[r>>16&255]+jr[r>>24&255]+jr[e&255]+jr[e>>8&255]+jr[e>>16&255]+jr[e>>24&255]).toLowerCase()}function xr(w,t,r){return Math.max(t,Math.min(r,w))}function Na(w,t){return(w%t+t)%t}function of(w,t,r,e,d){return e+(w-t)*(d-e)/(r-t)}function af(w,t,r){return w!==t?(r-w)/(t-w):0}function ys(w,t,r){return(1-r)*w+r*t}function lf(w,t,r,e){return ys(w,t,1-Math.exp(-r*e))}function cf(w,t=1){return t-Math.abs(Na(w,t*2)-t)}function uf(w,t,r){return w<=t?0:w>=r?1:(w=(w-t)/(r-t),w*w*(3-2*w))}function df(w,t,r){return w<=t?0:w>=r?1:(w=(w-t)/(r-t),w*w*w*(w*(w*6-15)+10))}function hf(w,t){return w+Math.floor(Math.random()*(t-w+1))}function ff(w,t){return w+Math.random()*(t-w)}function pf(w){return w*(.5-Math.random())}function mf(w){w!==void 0&&(gc=w);let t=gc+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function gf(w){return w*gs}function yf(w){return w*xs}function Sa(w){return(w&w-1)===0&&w!==0}function qu(w){return Math.pow(2,Math.ceil(Math.log(w)/Math.LN2))}function bo(w){return Math.pow(2,Math.floor(Math.log(w)/Math.LN2))}function vf(w,t,r,e,d){const f=Math.cos,a=Math.sin,s=f(r/2),n=a(r/2),l=f((t+e)/2),h=a((t+e)/2),m=f((t-e)/2),i=a((t-e)/2),o=f((e-t)/2),c=a((e-t)/2);switch(d){case"XYX":w.set(s*h,n*m,n*i,s*l);break;case"YZY":w.set(n*i,s*h,n*m,s*l);break;case"ZXZ":w.set(n*m,n*i,s*h,s*l);break;case"XZX":w.set(s*h,n*c,n*o,s*l);break;case"YXY":w.set(n*o,s*h,n*c,s*l);break;case"ZYZ":w.set(n*c,n*o,s*h,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}function Tn(w,t){switch(t.constructor){case Float32Array:return w;case Uint16Array:return w/65535;case Uint8Array:return w/255;case Int16Array:return Math.max(w/32767,-1);case Int8Array:return Math.max(w/127,-1);default:throw new Error("Invalid component type.")}}function Gt(w,t){switch(t.constructor){case Float32Array:return w;case Uint16Array:return Math.round(w*65535);case Uint8Array:return Math.round(w*255);case Int16Array:return Math.round(w*32767);case Int8Array:return Math.round(w*127);default:throw new Error("Invalid component type.")}}var bf=Object.freeze({__proto__:null,DEG2RAD:gs,RAD2DEG:xs,generateUUID:Qr,clamp:xr,euclideanModulo:Na,mapLinear:of,inverseLerp:af,lerp:ys,damp:lf,pingpong:cf,smoothstep:uf,smootherstep:df,randInt:hf,randFloat:ff,randFloatSpread:pf,seededRandom:mf,degToRad:gf,radToDeg:yf,isPowerOfTwo:Sa,ceilPowerOfTwo:qu,floorPowerOfTwo:bo,setQuaternionFromProperEuler:vf,normalize:Gt,denormalize:Tn});class _t{constructor(t=0,r=0){_t.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,e=this.y,d=t.elements;return this.x=d[0]*r+d[3]*e+d[6],this.y=d[1]*r+d[4]*e+d[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,e=this.y-t.y;return r*r+e*e}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const e=Math.cos(r),d=Math.sin(r),f=this.x-t.x,a=this.y-t.y;return this.x=f*e-a*d+t.x,this.y=f*d+a*e+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ur{constructor(){Ur.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,r,e,d,f,a,s,n,l){const h=this.elements;return h[0]=t,h[1]=d,h[2]=s,h[3]=r,h[4]=f,h[5]=n,h[6]=e,h[7]=a,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,e=t.elements;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],this}extractBasis(t,r,e){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),e.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const e=t.elements,d=r.elements,f=this.elements,a=e[0],s=e[3],n=e[6],l=e[1],h=e[4],m=e[7],i=e[2],o=e[5],c=e[8],u=d[0],p=d[3],g=d[6],v=d[1],b=d[4],_=d[7],x=d[2],A=d[5],E=d[8];return f[0]=a*u+s*v+n*x,f[3]=a*p+s*b+n*A,f[6]=a*g+s*_+n*E,f[1]=l*u+h*v+m*x,f[4]=l*p+h*b+m*A,f[7]=l*g+h*_+m*E,f[2]=i*u+o*v+c*x,f[5]=i*p+o*b+c*A,f[8]=i*g+o*_+c*E,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],e=t[1],d=t[2],f=t[3],a=t[4],s=t[5],n=t[6],l=t[7],h=t[8];return r*a*h-r*s*l-e*f*h+e*s*n+d*f*l-d*a*n}invert(){const t=this.elements,r=t[0],e=t[1],d=t[2],f=t[3],a=t[4],s=t[5],n=t[6],l=t[7],h=t[8],m=h*a-s*l,i=s*n-h*f,o=l*f-a*n,c=r*m+e*i+d*o;if(c===0)return this.set(0,0,0,0,0,0,0,0,0);const u=1/c;return t[0]=m*u,t[1]=(d*l-h*e)*u,t[2]=(s*e-d*a)*u,t[3]=i*u,t[4]=(h*r-d*n)*u,t[5]=(d*f-s*r)*u,t[6]=o*u,t[7]=(e*n-l*r)*u,t[8]=(a*r-e*f)*u,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,e,d,f,a,s){const n=Math.cos(f),l=Math.sin(f);return this.set(e*n,e*l,-e*(n*a+l*s)+a+t,-d*l,d*n,-d*(-l*a+n*s)+s+r,0,0,1),this}scale(t,r){return this.premultiply(Uo.makeScale(t,r)),this}rotate(t){return this.premultiply(Uo.makeRotation(-t)),this}translate(t,r){return this.premultiply(Uo.makeTranslation(t,r)),this}makeTranslation(t,r){return this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),e=Math.sin(t);return this.set(r,-e,0,e,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,e=t.elements;for(let d=0;d<9;d++)if(r[d]!==e[d])return!1;return!0}fromArray(t,r=0){for(let e=0;e<9;e++)this.elements[e]=t[e+r];return this}toArray(t=[],r=0){const e=this.elements;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Uo=new Ur;function Xu(w){for(let t=w.length-1;t>=0;--t)if(w[t]>=65535)return!0;return!1}function ws(w){return document.createElementNS("http://www.w3.org/1999/xhtml",w)}function $n(w){return w<.04045?w*.0773993808:Math.pow(w*.9478672986+.0521327014,2.4)}function ho(w){return w<.0031308?w*12.92:1.055*Math.pow(w,.41666)-.055}const Fo={[sn]:{[_s]:$n},[_s]:{[sn]:ho}},Lr={legacyMode:!0,get workingColorSpace(){return _s},set workingColorSpace(w){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(w,t,r){if(this.legacyMode||t===r||!t||!r)return w;if(Fo[t]&&Fo[t][r]!==void 0){const e=Fo[t][r];return w.r=e(w.r),w.g=e(w.g),w.b=e(w.b),w}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(w,t){return this.convert(w,this.workingColorSpace,t)},toWorkingColorSpace:function(w,t){return this.convert(w,t,this.workingColorSpace)}},Yu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ur={r:0,g:0,b:0},Xr={h:0,s:0,l:0},Us={h:0,s:0,l:0};function Bo(w,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?w+(t-w)*6*r:r<1/2?t:r<2/3?w+(t-w)*6*(2/3-r):w}function Fs(w,t){return t.r=w.r,t.g=w.g,t.b=w.b,t}class jt{constructor(t,r,e){return this.isColor=!0,this.r=1,this.g=1,this.b=1,r===void 0&&e===void 0?this.set(t):this.setRGB(t,r,e)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=sn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Lr.toWorkingColorSpace(this,r),this}setRGB(t,r,e,d=Lr.workingColorSpace){return this.r=t,this.g=r,this.b=e,Lr.toWorkingColorSpace(this,d),this}setHSL(t,r,e,d=Lr.workingColorSpace){if(t=Na(t,1),r=xr(r,0,1),e=xr(e,0,1),r===0)this.r=this.g=this.b=e;else{const f=e<=.5?e*(1+r):e+r-e*r,a=2*e-f;this.r=Bo(a,f,t+1/3),this.g=Bo(a,f,t),this.b=Bo(a,f,t-1/3)}return Lr.toWorkingColorSpace(this,d),this}setStyle(t,r=sn){function e(f){f!==void 0&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let d;if(d=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let f;const a=d[1],s=d[2];switch(a){case"rgb":case"rgba":if(f=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(f[1],10))/255,this.g=Math.min(255,parseInt(f[2],10))/255,this.b=Math.min(255,parseInt(f[3],10))/255,Lr.toWorkingColorSpace(this,r),e(f[4]),this;if(f=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(f[1],10))/100,this.g=Math.min(100,parseInt(f[2],10))/100,this.b=Math.min(100,parseInt(f[3],10))/100,Lr.toWorkingColorSpace(this,r),e(f[4]),this;break;case"hsl":case"hsla":if(f=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const n=parseFloat(f[1])/360,l=parseFloat(f[2])/100,h=parseFloat(f[3])/100;return e(f[4]),this.setHSL(n,l,h,r)}break}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(t)){const f=d[1],a=f.length;if(a===3)return this.r=parseInt(f.charAt(0)+f.charAt(0),16)/255,this.g=parseInt(f.charAt(1)+f.charAt(1),16)/255,this.b=parseInt(f.charAt(2)+f.charAt(2),16)/255,Lr.toWorkingColorSpace(this,r),this;if(a===6)return this.r=parseInt(f.charAt(0)+f.charAt(1),16)/255,this.g=parseInt(f.charAt(2)+f.charAt(3),16)/255,this.b=parseInt(f.charAt(4)+f.charAt(5),16)/255,Lr.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=sn){const e=Yu[t.toLowerCase()];return e!==void 0?this.setHex(e,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=$n(t.r),this.g=$n(t.g),this.b=$n(t.b),this}copyLinearToSRGB(t){return this.r=ho(t.r),this.g=ho(t.g),this.b=ho(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=sn){return Lr.fromWorkingColorSpace(Fs(this,ur),t),xr(ur.r*255,0,255)<<16^xr(ur.g*255,0,255)<<8^xr(ur.b*255,0,255)<<0}getHexString(t=sn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Lr.workingColorSpace){Lr.fromWorkingColorSpace(Fs(this,ur),r);const e=ur.r,d=ur.g,f=ur.b,a=Math.max(e,d,f),s=Math.min(e,d,f);let n,l;const h=(s+a)/2;if(s===a)n=0,l=0;else{const m=a-s;switch(l=h<=.5?m/(a+s):m/(2-a-s),a){case e:n=(d-f)/m+(d<f?6:0);break;case d:n=(f-e)/m+2;break;case f:n=(e-d)/m+4;break}n/=6}return t.h=n,t.s=l,t.l=h,t}getRGB(t,r=Lr.workingColorSpace){return Lr.fromWorkingColorSpace(Fs(this,ur),r),t.r=ur.r,t.g=ur.g,t.b=ur.b,t}getStyle(t=sn){return Lr.fromWorkingColorSpace(Fs(this,ur),t),t!==sn?`color(${t} ${ur.r} ${ur.g} ${ur.b})`:`rgb(${ur.r*255|0},${ur.g*255|0},${ur.b*255|0})`}offsetHSL(t,r,e){return this.getHSL(Xr),Xr.h+=t,Xr.s+=r,Xr.l+=e,this.setHSL(Xr.h,Xr.s,Xr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,e){return this.r=t.r+(r.r-t.r)*e,this.g=t.g+(r.g-t.g)*e,this.b=t.b+(r.b-t.b)*e,this}lerpHSL(t,r){this.getHSL(Xr),t.getHSL(Us);const e=ys(Xr.h,Us.h,r),d=ys(Xr.s,Us.s,r),f=ys(Xr.l,Us.l,r);return this.setHSL(e,d,f),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}jt.NAMES=Yu;let mi;class Zu{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{mi===void 0&&(mi=ws("canvas")),mi.width=t.width,mi.height=t.height;const e=mi.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),r=mi}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=ws("canvas");r.width=t.width,r.height=t.height;const e=r.getContext("2d");e.drawImage(t,0,0,t.width,t.height);const d=e.getImageData(0,0,t.width,t.height),f=d.data;for(let a=0;a<f.length;a++)f[a]=$n(f[a]/255)*255;return e.putImageData(d,0,0),r}else if(t.data){const r=t.data.slice(0);for(let e=0;e<r.length;e++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[e]=Math.floor($n(r[e]/255)*255):r[e]=$n(r[e]);return{data:r,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Ku{constructor(t=null){this.isSource=!0,this.uuid=Qr(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const e={uuid:this.uuid,url:""},d=this.data;if(d!==null){let f;if(Array.isArray(d)){f=[];for(let a=0,s=d.length;a<s;a++)d[a].isDataTexture?f.push(Go(d[a].image)):f.push(Go(d[a]))}else f=Go(d);e.url=f}return r||(t.images[this.uuid]=e),e}}function Go(w){return typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&w instanceof ImageBitmap?Zu.getDataURL(w):w.data?{data:Array.from(w.data),width:w.width,height:w.height,type:w.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _f=0;class wr extends ai{constructor(t=wr.DEFAULT_IMAGE,r=wr.DEFAULT_MAPPING,e=Or,d=Or,f=dr,a=Bn,s=Gr,n=ti,l=wr.DEFAULT_ANISOTROPY,h=Gn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_f++}),this.uuid=Qr(),this.name="",this.source=new Ku(t),this.mipmaps=[],this.mapping=r,this.wrapS=e,this.wrapT=d,this.magFilter=f,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=n,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ur,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(e.userData=this.userData),r||(t.textures[this.uuid]=e),e}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==zu)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ni:t.x=t.x-Math.floor(t.x);break;case Or:t.x=t.x<0?0:1;break;case vo:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Ni:t.y=t.y-Math.floor(t.y);break;case Or:t.y=t.y<0?0:1;break;case vo:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}wr.DEFAULT_IMAGE=null;wr.DEFAULT_MAPPING=zu;wr.DEFAULT_ANISOTROPY=1;class zt{constructor(t=0,r=0,e=0,d=1){zt.prototype.isVector4=!0,this.x=t,this.y=r,this.z=e,this.w=d}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,e,d){return this.x=t,this.y=r,this.z=e,this.w=d,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,e=this.y,d=this.z,f=this.w,a=t.elements;return this.x=a[0]*r+a[4]*e+a[8]*d+a[12]*f,this.y=a[1]*r+a[5]*e+a[9]*d+a[13]*f,this.z=a[2]*r+a[6]*e+a[10]*d+a[14]*f,this.w=a[3]*r+a[7]*e+a[11]*d+a[15]*f,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,e,d,f;const n=t.elements,l=n[0],h=n[4],m=n[8],i=n[1],o=n[5],c=n[9],u=n[2],p=n[6],g=n[10];if(Math.abs(h-i)<.01&&Math.abs(m-u)<.01&&Math.abs(c-p)<.01){if(Math.abs(h+i)<.1&&Math.abs(m+u)<.1&&Math.abs(c+p)<.1&&Math.abs(l+o+g-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const b=(l+1)/2,_=(o+1)/2,x=(g+1)/2,A=(h+i)/4,E=(m+u)/4,T=(c+p)/4;return b>_&&b>x?b<.01?(e=0,d=.707106781,f=.707106781):(e=Math.sqrt(b),d=A/e,f=E/e):_>x?_<.01?(e=.707106781,d=0,f=.707106781):(d=Math.sqrt(_),e=A/d,f=T/d):x<.01?(e=.707106781,d=.707106781,f=0):(f=Math.sqrt(x),e=E/f,d=T/f),this.set(e,d,f,r),this}let v=Math.sqrt((p-c)*(p-c)+(m-u)*(m-u)+(i-h)*(i-h));return Math.abs(v)<.001&&(v=1),this.x=(p-c)/v,this.y=(m-u)/v,this.z=(i-h)/v,this.w=Math.acos((l+o+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this}clampLength(t,r){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this.z=t.z+(r.z-t.z)*e,this.w=t.w+(r.w-t.w)*e,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ri extends ai{constructor(t=1,r=1,e={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new zt(0,0,t,r),this.scissorTest=!1,this.viewport=new zt(0,0,t,r);const d={width:t,height:r,depth:1};this.texture=new wr(d,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.internalFormat=e.internalFormat!==void 0?e.internalFormat:null,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:dr,this.depthBuffer=e.depthBuffer!==void 0?e.depthBuffer:!0,this.stencilBuffer=e.stencilBuffer!==void 0?e.stencilBuffer:!1,this.depthTexture=e.depthTexture!==void 0?e.depthTexture:null,this.samples=e.samples!==void 0?e.samples:0}setSize(t,r,e=1){(this.width!==t||this.height!==r||this.depth!==e)&&(this.width=t,this.height=r,this.depth=e,this.texture.image.width=t,this.texture.image.height=r,this.texture.image.depth=e,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const r=Object.assign({},t.texture.image);return this.texture.source=new Ku(r),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ju extends wr{constructor(t=null,r=1,e=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:e,depth:d},this.magFilter=gr,this.minFilter=gr,this.wrapR=Or,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xf extends wr{constructor(t=null,r=1,e=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:e,depth:d},this.magFilter=gr,this.minFilter=gr,this.wrapR=Or,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class un{constructor(t=0,r=0,e=0,d=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=e,this._w=d}static slerpFlat(t,r,e,d,f,a,s){let n=e[d+0],l=e[d+1],h=e[d+2],m=e[d+3];const i=f[a+0],o=f[a+1],c=f[a+2],u=f[a+3];if(s===0){t[r+0]=n,t[r+1]=l,t[r+2]=h,t[r+3]=m;return}if(s===1){t[r+0]=i,t[r+1]=o,t[r+2]=c,t[r+3]=u;return}if(m!==u||n!==i||l!==o||h!==c){let p=1-s;const g=n*i+l*o+h*c+m*u,v=g>=0?1:-1,b=1-g*g;if(b>Number.EPSILON){const x=Math.sqrt(b),A=Math.atan2(x,g*v);p=Math.sin(p*A)/x,s=Math.sin(s*A)/x}const _=s*v;if(n=n*p+i*_,l=l*p+o*_,h=h*p+c*_,m=m*p+u*_,p===1-s){const x=1/Math.sqrt(n*n+l*l+h*h+m*m);n*=x,l*=x,h*=x,m*=x}}t[r]=n,t[r+1]=l,t[r+2]=h,t[r+3]=m}static multiplyQuaternionsFlat(t,r,e,d,f,a){const s=e[d],n=e[d+1],l=e[d+2],h=e[d+3],m=f[a],i=f[a+1],o=f[a+2],c=f[a+3];return t[r]=s*c+h*m+n*o-l*i,t[r+1]=n*c+h*i+l*m-s*o,t[r+2]=l*c+h*o+s*i-n*m,t[r+3]=h*c-s*m-n*i-l*o,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,e,d){return this._x=t,this._y=r,this._z=e,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r){const e=t._x,d=t._y,f=t._z,a=t._order,s=Math.cos,n=Math.sin,l=s(e/2),h=s(d/2),m=s(f/2),i=n(e/2),o=n(d/2),c=n(f/2);switch(a){case"XYZ":this._x=i*h*m+l*o*c,this._y=l*o*m-i*h*c,this._z=l*h*c+i*o*m,this._w=l*h*m-i*o*c;break;case"YXZ":this._x=i*h*m+l*o*c,this._y=l*o*m-i*h*c,this._z=l*h*c-i*o*m,this._w=l*h*m+i*o*c;break;case"ZXY":this._x=i*h*m-l*o*c,this._y=l*o*m+i*h*c,this._z=l*h*c+i*o*m,this._w=l*h*m-i*o*c;break;case"ZYX":this._x=i*h*m-l*o*c,this._y=l*o*m+i*h*c,this._z=l*h*c-i*o*m,this._w=l*h*m+i*o*c;break;case"YZX":this._x=i*h*m+l*o*c,this._y=l*o*m+i*h*c,this._z=l*h*c-i*o*m,this._w=l*h*m-i*o*c;break;case"XZY":this._x=i*h*m-l*o*c,this._y=l*o*m-i*h*c,this._z=l*h*c+i*o*m,this._w=l*h*m+i*o*c;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const e=r/2,d=Math.sin(e);return this._x=t.x*d,this._y=t.y*d,this._z=t.z*d,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,e=r[0],d=r[4],f=r[8],a=r[1],s=r[5],n=r[9],l=r[2],h=r[6],m=r[10],i=e+s+m;if(i>0){const o=.5/Math.sqrt(i+1);this._w=.25/o,this._x=(h-n)*o,this._y=(f-l)*o,this._z=(a-d)*o}else if(e>s&&e>m){const o=2*Math.sqrt(1+e-s-m);this._w=(h-n)/o,this._x=.25*o,this._y=(d+a)/o,this._z=(f+l)/o}else if(s>m){const o=2*Math.sqrt(1+s-e-m);this._w=(f-l)/o,this._x=(d+a)/o,this._y=.25*o,this._z=(n+h)/o}else{const o=2*Math.sqrt(1+m-e-s);this._w=(a-d)/o,this._x=(f+l)/o,this._y=(n+h)/o,this._z=.25*o}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let e=t.dot(r)+1;return e<Number.EPSILON?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=e),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(xr(this.dot(t),-1,1)))}rotateTowards(t,r){const e=this.angleTo(t);if(e===0)return this;const d=Math.min(1,r/e);return this.slerp(t,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const e=t._x,d=t._y,f=t._z,a=t._w,s=r._x,n=r._y,l=r._z,h=r._w;return this._x=e*h+a*s+d*l-f*n,this._y=d*h+a*n+f*s-e*l,this._z=f*h+a*l+e*n-d*s,this._w=a*h-e*s-d*n-f*l,this._onChangeCallback(),this}slerp(t,r){if(r===0)return this;if(r===1)return this.copy(t);const e=this._x,d=this._y,f=this._z,a=this._w;let s=a*t._w+e*t._x+d*t._y+f*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=e,this._y=d,this._z=f,this;const n=1-s*s;if(n<=Number.EPSILON){const o=1-r;return this._w=o*a+r*this._w,this._x=o*e+r*this._x,this._y=o*d+r*this._y,this._z=o*f+r*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(n),h=Math.atan2(l,s),m=Math.sin((1-r)*h)/l,i=Math.sin(r*h)/l;return this._w=a*m+this._w*i,this._x=e*m+this._x*i,this._y=d*m+this._y*i,this._z=f*m+this._z*i,this._onChangeCallback(),this}slerpQuaternions(t,r,e){return this.copy(t).slerp(r,e)}random(){const t=Math.random(),r=Math.sqrt(1-t),e=Math.sqrt(t),d=2*Math.PI*Math.random(),f=2*Math.PI*Math.random();return this.set(r*Math.cos(d),e*Math.sin(f),e*Math.cos(f),r*Math.sin(d))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Re{constructor(t=0,r=0,e=0){Re.prototype.isVector3=!0,this.x=t,this.y=r,this.z=e}set(t,r,e){return e===void 0&&(e=this.z),this.x=t,this.y=r,this.z=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(yc.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(yc.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,e=this.y,d=this.z,f=t.elements;return this.x=f[0]*r+f[3]*e+f[6]*d,this.y=f[1]*r+f[4]*e+f[7]*d,this.z=f[2]*r+f[5]*e+f[8]*d,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,e=this.y,d=this.z,f=t.elements,a=1/(f[3]*r+f[7]*e+f[11]*d+f[15]);return this.x=(f[0]*r+f[4]*e+f[8]*d+f[12])*a,this.y=(f[1]*r+f[5]*e+f[9]*d+f[13])*a,this.z=(f[2]*r+f[6]*e+f[10]*d+f[14])*a,this}applyQuaternion(t){const r=this.x,e=this.y,d=this.z,f=t.x,a=t.y,s=t.z,n=t.w,l=n*r+a*d-s*e,h=n*e+s*r-f*d,m=n*d+f*e-a*r,i=-f*r-a*e-s*d;return this.x=l*n+i*-f+h*-s-m*-a,this.y=h*n+i*-a+m*-f-l*-s,this.z=m*n+i*-s+l*-a-h*-f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,e=this.y,d=this.z,f=t.elements;return this.x=f[0]*r+f[4]*e+f[8]*d,this.y=f[1]*r+f[5]*e+f[9]*d,this.z=f[2]*r+f[6]*e+f[10]*d,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this.z=t.z+(r.z-t.z)*e,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const e=t.x,d=t.y,f=t.z,a=r.x,s=r.y,n=r.z;return this.x=d*n-f*s,this.y=f*a-e*n,this.z=e*s-d*a,this}projectOnVector(t){const r=t.lengthSq();if(r===0)return this.set(0,0,0);const e=t.dot(this)/r;return this.copy(t).multiplyScalar(e)}projectOnPlane(t){return zo.copy(this).projectOnVector(t),this.sub(zo)}reflect(t){return this.sub(zo.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;const e=this.dot(t)/r;return Math.acos(xr(e,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,e=this.y-t.y,d=this.z-t.z;return r*r+e*e+d*d}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,e){const d=Math.sin(r)*t;return this.x=d*Math.sin(e),this.y=Math.cos(r)*t,this.z=d*Math.cos(e),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,e){return this.x=t*Math.sin(r),this.y=e,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),e=this.setFromMatrixColumn(t,1).length(),d=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=e,this.z=d,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,e=Math.sqrt(1-t**2);return this.x=e*Math.cos(r),this.y=e*Math.sin(r),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const zo=new Re,yc=new un;class Wi{constructor(t=new Re(1/0,1/0,1/0),r=new Re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){let r=1/0,e=1/0,d=1/0,f=-1/0,a=-1/0,s=-1/0;for(let n=0,l=t.length;n<l;n+=3){const h=t[n],m=t[n+1],i=t[n+2];h<r&&(r=h),m<e&&(e=m),i<d&&(d=i),h>f&&(f=h),m>a&&(a=m),i>s&&(s=i)}return this.min.set(r,e,d),this.max.set(f,a,s),this}setFromBufferAttribute(t){let r=1/0,e=1/0,d=1/0,f=-1/0,a=-1/0,s=-1/0;for(let n=0,l=t.count;n<l;n++){const h=t.getX(n),m=t.getY(n),i=t.getZ(n);h<r&&(r=h),m<e&&(e=m),i<d&&(d=i),h>f&&(f=h),m>a&&(a=m),i>s&&(s=i)}return this.min.set(r,e,d),this.max.set(f,a,s),this}setFromPoints(t){this.makeEmpty();for(let r=0,e=t.length;r<e;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const e=zn.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const e=t.geometry;if(e!==void 0)if(r&&e.attributes!=null&&e.attributes.position!==void 0){const f=e.attributes.position;for(let a=0,s=f.count;a<s;a++)zn.fromBufferAttribute(f,a).applyMatrix4(t.matrixWorld),this.expandByPoint(zn)}else e.boundingBox===null&&e.computeBoundingBox(),Vo.copy(e.boundingBox),Vo.applyMatrix4(t.matrixWorld),this.union(Vo);const d=t.children;for(let f=0,a=d.length;f<a;f++)this.expandByObject(d[f],r);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,zn),zn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,e;return t.normal.x>0?(r=t.normal.x*this.min.x,e=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,e=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,e+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,e+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,e+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,e+=t.normal.z*this.min.z),r<=-t.constant&&e>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(rs),Bs.subVectors(this.max,rs),gi.subVectors(t.a,rs),yi.subVectors(t.b,rs),vi.subVectors(t.c,rs),Ln.subVectors(yi,gi),Rn.subVectors(vi,yi),Vn.subVectors(gi,vi);let r=[0,-Ln.z,Ln.y,0,-Rn.z,Rn.y,0,-Vn.z,Vn.y,Ln.z,0,-Ln.x,Rn.z,0,-Rn.x,Vn.z,0,-Vn.x,-Ln.y,Ln.x,0,-Rn.y,Rn.x,0,-Vn.y,Vn.x,0];return!Ho(r,gi,yi,vi,Bs)||(r=[1,0,0,0,1,0,0,0,1],!Ho(r,gi,yi,vi,Bs))?!1:(Gs.crossVectors(Ln,Rn),r=[Gs.x,Gs.y,Gs.z],Ho(r,gi,yi,vi,Bs))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return zn.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(zn).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(mn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),mn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),mn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),mn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),mn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),mn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),mn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),mn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(mn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const mn=[new Re,new Re,new Re,new Re,new Re,new Re,new Re,new Re],zn=new Re,Vo=new Wi,gi=new Re,yi=new Re,vi=new Re,Ln=new Re,Rn=new Re,Vn=new Re,rs=new Re,Bs=new Re,Gs=new Re,Hn=new Re;function Ho(w,t,r,e,d){for(let f=0,a=w.length-3;f<=a;f+=3){Hn.fromArray(w,f);const s=d.x*Math.abs(Hn.x)+d.y*Math.abs(Hn.y)+d.z*Math.abs(Hn.z),n=t.dot(Hn),l=r.dot(Hn),h=e.dot(Hn);if(Math.max(-Math.max(n,l,h),Math.min(n,l,h))>s)return!1}return!0}const wf=new Wi,ns=new Re,Wo=new Re;class qi{constructor(t=new Re,r=-1){this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const e=this.center;r!==void 0?e.copy(r):wf.setFromPoints(t).getCenter(e);let d=0;for(let f=0,a=t.length;f<a;f++)d=Math.max(d,e.distanceToSquared(t[f]));return this.radius=Math.sqrt(d),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const e=this.center.distanceToSquared(t);return r.copy(t),e>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ns.subVectors(t,this.center);const r=ns.lengthSq();if(r>this.radius*this.radius){const e=Math.sqrt(r),d=(e-this.radius)*.5;this.center.addScaledVector(ns,d/e),this.radius+=d}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Wo.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ns.copy(t.center).add(Wo)),this.expandByPoint(ns.copy(t.center).sub(Wo))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const gn=new Re,qo=new Re,zs=new Re,Pn=new Re,Xo=new Re,Vs=new Re,Yo=new Re;class Ua{constructor(t=new Re,r=new Re(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gn)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const e=r.dot(this.direction);return e<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(e).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=gn.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(gn.copy(this.direction).multiplyScalar(r).add(this.origin),gn.distanceToSquared(t))}distanceSqToSegment(t,r,e,d){qo.copy(t).add(r).multiplyScalar(.5),zs.copy(r).sub(t).normalize(),Pn.copy(this.origin).sub(qo);const f=t.distanceTo(r)*.5,a=-this.direction.dot(zs),s=Pn.dot(this.direction),n=-Pn.dot(zs),l=Pn.lengthSq(),h=Math.abs(1-a*a);let m,i,o,c;if(h>0)if(m=a*n-s,i=a*s-n,c=f*h,m>=0)if(i>=-c)if(i<=c){const u=1/h;m*=u,i*=u,o=m*(m+a*i+2*s)+i*(a*m+i+2*n)+l}else i=f,m=Math.max(0,-(a*i+s)),o=-m*m+i*(i+2*n)+l;else i=-f,m=Math.max(0,-(a*i+s)),o=-m*m+i*(i+2*n)+l;else i<=-c?(m=Math.max(0,-(-a*f+s)),i=m>0?-f:Math.min(Math.max(-f,-n),f),o=-m*m+i*(i+2*n)+l):i<=c?(m=0,i=Math.min(Math.max(-f,-n),f),o=i*(i+2*n)+l):(m=Math.max(0,-(a*f+s)),i=m>0?f:Math.min(Math.max(-f,-n),f),o=-m*m+i*(i+2*n)+l);else i=a>0?-f:f,m=Math.max(0,-(a*i+s)),o=-m*m+i*(i+2*n)+l;return e&&e.copy(this.direction).multiplyScalar(m).add(this.origin),d&&d.copy(zs).multiplyScalar(i).add(qo),o}intersectSphere(t,r){gn.subVectors(t.center,this.origin);const e=gn.dot(this.direction),d=gn.dot(gn)-e*e,f=t.radius*t.radius;if(d>f)return null;const a=Math.sqrt(f-d),s=e-a,n=e+a;return s<0&&n<0?null:s<0?this.at(n,r):this.at(s,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(r===0)return t.distanceToPoint(this.origin)===0?0:null;const e=-(this.origin.dot(t.normal)+t.constant)/r;return e>=0?e:null}intersectPlane(t,r){const e=this.distanceToPlane(t);return e===null?null:this.at(e,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return r===0||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let e,d,f,a,s,n;const l=1/this.direction.x,h=1/this.direction.y,m=1/this.direction.z,i=this.origin;return l>=0?(e=(t.min.x-i.x)*l,d=(t.max.x-i.x)*l):(e=(t.max.x-i.x)*l,d=(t.min.x-i.x)*l),h>=0?(f=(t.min.y-i.y)*h,a=(t.max.y-i.y)*h):(f=(t.max.y-i.y)*h,a=(t.min.y-i.y)*h),e>a||f>d||((f>e||isNaN(e))&&(e=f),(a<d||isNaN(d))&&(d=a),m>=0?(s=(t.min.z-i.z)*m,n=(t.max.z-i.z)*m):(s=(t.max.z-i.z)*m,n=(t.min.z-i.z)*m),e>n||s>d)||((s>e||e!==e)&&(e=s),(n<d||d!==d)&&(d=n),d<0)?null:this.at(e>=0?e:d,r)}intersectsBox(t){return this.intersectBox(t,gn)!==null}intersectTriangle(t,r,e,d,f){Xo.subVectors(r,t),Vs.subVectors(e,t),Yo.crossVectors(Xo,Vs);let a=this.direction.dot(Yo),s;if(a>0){if(d)return null;s=1}else if(a<0)s=-1,a=-a;else return null;Pn.subVectors(this.origin,t);const n=s*this.direction.dot(Vs.crossVectors(Pn,Vs));if(n<0)return null;const l=s*this.direction.dot(Xo.cross(Pn));if(l<0||n+l>a)return null;const h=-s*Pn.dot(Yo);return h<0?null:this.at(h/a,f)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class At{constructor(){At.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,r,e,d,f,a,s,n,l,h,m,i,o,c,u,p){const g=this.elements;return g[0]=t,g[4]=r,g[8]=e,g[12]=d,g[1]=f,g[5]=a,g[9]=s,g[13]=n,g[2]=l,g[6]=h,g[10]=m,g[14]=i,g[3]=o,g[7]=c,g[11]=u,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new At().fromArray(this.elements)}copy(t){const r=this.elements,e=t.elements;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],this}copyPosition(t){const r=this.elements,e=t.elements;return r[12]=e[12],r[13]=e[13],r[14]=e[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,e){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this}makeBasis(t,r,e){return this.set(t.x,r.x,e.x,0,t.y,r.y,e.y,0,t.z,r.z,e.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,e=t.elements,d=1/bi.setFromMatrixColumn(t,0).length(),f=1/bi.setFromMatrixColumn(t,1).length(),a=1/bi.setFromMatrixColumn(t,2).length();return r[0]=e[0]*d,r[1]=e[1]*d,r[2]=e[2]*d,r[3]=0,r[4]=e[4]*f,r[5]=e[5]*f,r[6]=e[6]*f,r[7]=0,r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,e=t.x,d=t.y,f=t.z,a=Math.cos(e),s=Math.sin(e),n=Math.cos(d),l=Math.sin(d),h=Math.cos(f),m=Math.sin(f);if(t.order==="XYZ"){const i=a*h,o=a*m,c=s*h,u=s*m;r[0]=n*h,r[4]=-n*m,r[8]=l,r[1]=o+c*l,r[5]=i-u*l,r[9]=-s*n,r[2]=u-i*l,r[6]=c+o*l,r[10]=a*n}else if(t.order==="YXZ"){const i=n*h,o=n*m,c=l*h,u=l*m;r[0]=i+u*s,r[4]=c*s-o,r[8]=a*l,r[1]=a*m,r[5]=a*h,r[9]=-s,r[2]=o*s-c,r[6]=u+i*s,r[10]=a*n}else if(t.order==="ZXY"){const i=n*h,o=n*m,c=l*h,u=l*m;r[0]=i-u*s,r[4]=-a*m,r[8]=c+o*s,r[1]=o+c*s,r[5]=a*h,r[9]=u-i*s,r[2]=-a*l,r[6]=s,r[10]=a*n}else if(t.order==="ZYX"){const i=a*h,o=a*m,c=s*h,u=s*m;r[0]=n*h,r[4]=c*l-o,r[8]=i*l+u,r[1]=n*m,r[5]=u*l+i,r[9]=o*l-c,r[2]=-l,r[6]=s*n,r[10]=a*n}else if(t.order==="YZX"){const i=a*n,o=a*l,c=s*n,u=s*l;r[0]=n*h,r[4]=u-i*m,r[8]=c*m+o,r[1]=m,r[5]=a*h,r[9]=-s*h,r[2]=-l*h,r[6]=o*m+c,r[10]=i-u*m}else if(t.order==="XZY"){const i=a*n,o=a*l,c=s*n,u=s*l;r[0]=n*h,r[4]=-m,r[8]=l*h,r[1]=i*m+u,r[5]=a*h,r[9]=o*m-c,r[2]=c*m-o,r[6]=s*h,r[10]=u*m+i}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Sf,t,Mf)}lookAt(t,r,e){const d=this.elements;return kr.subVectors(t,r),kr.lengthSq()===0&&(kr.z=1),kr.normalize(),Dn.crossVectors(e,kr),Dn.lengthSq()===0&&(Math.abs(e.z)===1?kr.x+=1e-4:kr.z+=1e-4,kr.normalize(),Dn.crossVectors(e,kr)),Dn.normalize(),Hs.crossVectors(kr,Dn),d[0]=Dn.x,d[4]=Hs.x,d[8]=kr.x,d[1]=Dn.y,d[5]=Hs.y,d[9]=kr.y,d[2]=Dn.z,d[6]=Hs.z,d[10]=kr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const e=t.elements,d=r.elements,f=this.elements,a=e[0],s=e[4],n=e[8],l=e[12],h=e[1],m=e[5],i=e[9],o=e[13],c=e[2],u=e[6],p=e[10],g=e[14],v=e[3],b=e[7],_=e[11],x=e[15],A=d[0],E=d[4],T=d[8],C=d[12],R=d[1],P=d[5],N=d[9],k=d[13],I=d[2],B=d[6],Y=d[10],W=d[14],H=d[3],X=d[7],Z=d[11],q=d[15];return f[0]=a*A+s*R+n*I+l*H,f[4]=a*E+s*P+n*B+l*X,f[8]=a*T+s*N+n*Y+l*Z,f[12]=a*C+s*k+n*W+l*q,f[1]=h*A+m*R+i*I+o*H,f[5]=h*E+m*P+i*B+o*X,f[9]=h*T+m*N+i*Y+o*Z,f[13]=h*C+m*k+i*W+o*q,f[2]=c*A+u*R+p*I+g*H,f[6]=c*E+u*P+p*B+g*X,f[10]=c*T+u*N+p*Y+g*Z,f[14]=c*C+u*k+p*W+g*q,f[3]=v*A+b*R+_*I+x*H,f[7]=v*E+b*P+_*B+x*X,f[11]=v*T+b*N+_*Y+x*Z,f[15]=v*C+b*k+_*W+x*q,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],e=t[4],d=t[8],f=t[12],a=t[1],s=t[5],n=t[9],l=t[13],h=t[2],m=t[6],i=t[10],o=t[14],c=t[3],u=t[7],p=t[11],g=t[15];return c*(+f*n*m-d*l*m-f*s*i+e*l*i+d*s*o-e*n*o)+u*(+r*n*o-r*l*i+f*a*i-d*a*o+d*l*h-f*n*h)+p*(+r*l*m-r*s*o-f*a*m+e*a*o+f*s*h-e*l*h)+g*(-d*s*h-r*n*m+r*s*i+d*a*m-e*a*i+e*n*h)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,e){const d=this.elements;return t.isVector3?(d[12]=t.x,d[13]=t.y,d[14]=t.z):(d[12]=t,d[13]=r,d[14]=e),this}invert(){const t=this.elements,r=t[0],e=t[1],d=t[2],f=t[3],a=t[4],s=t[5],n=t[6],l=t[7],h=t[8],m=t[9],i=t[10],o=t[11],c=t[12],u=t[13],p=t[14],g=t[15],v=m*p*l-u*i*l+u*n*o-s*p*o-m*n*g+s*i*g,b=c*i*l-h*p*l-c*n*o+a*p*o+h*n*g-a*i*g,_=h*u*l-c*m*l+c*s*o-a*u*o-h*s*g+a*m*g,x=c*m*n-h*u*n-c*s*i+a*u*i+h*s*p-a*m*p,A=r*v+e*b+d*_+f*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/A;return t[0]=v*E,t[1]=(u*i*f-m*p*f-u*d*o+e*p*o+m*d*g-e*i*g)*E,t[2]=(s*p*f-u*n*f+u*d*l-e*p*l-s*d*g+e*n*g)*E,t[3]=(m*n*f-s*i*f-m*d*l+e*i*l+s*d*o-e*n*o)*E,t[4]=b*E,t[5]=(h*p*f-c*i*f+c*d*o-r*p*o-h*d*g+r*i*g)*E,t[6]=(c*n*f-a*p*f-c*d*l+r*p*l+a*d*g-r*n*g)*E,t[7]=(a*i*f-h*n*f+h*d*l-r*i*l-a*d*o+r*n*o)*E,t[8]=_*E,t[9]=(c*m*f-h*u*f-c*e*o+r*u*o+h*e*g-r*m*g)*E,t[10]=(a*u*f-c*s*f+c*e*l-r*u*l-a*e*g+r*s*g)*E,t[11]=(h*s*f-a*m*f-h*e*l+r*m*l+a*e*o-r*s*o)*E,t[12]=x*E,t[13]=(h*u*d-c*m*d+c*e*i-r*u*i-h*e*p+r*m*p)*E,t[14]=(c*s*d-a*u*d-c*e*n+r*u*n+a*e*p-r*s*p)*E,t[15]=(a*m*d-h*s*d+h*e*n-r*m*n-a*e*i+r*s*i)*E,this}scale(t){const r=this.elements,e=t.x,d=t.y,f=t.z;return r[0]*=e,r[4]*=d,r[8]*=f,r[1]*=e,r[5]*=d,r[9]*=f,r[2]*=e,r[6]*=d,r[10]*=f,r[3]*=e,r[7]*=d,r[11]*=f,this}getMaxScaleOnAxis(){const t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],d=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,e,d))}makeTranslation(t,r,e){return this.set(1,0,0,t,0,1,0,r,0,0,1,e,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,r,-e,0,0,e,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),e=Math.sin(t);return this.set(r,0,e,0,0,1,0,0,-e,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),e=Math.sin(t);return this.set(r,-e,0,0,e,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const e=Math.cos(r),d=Math.sin(r),f=1-e,a=t.x,s=t.y,n=t.z,l=f*a,h=f*s;return this.set(l*a+e,l*s-d*n,l*n+d*s,0,l*s+d*n,h*s+e,h*n-d*a,0,l*n-d*s,h*n+d*a,f*n*n+e,0,0,0,0,1),this}makeScale(t,r,e){return this.set(t,0,0,0,0,r,0,0,0,0,e,0,0,0,0,1),this}makeShear(t,r,e,d,f,a){return this.set(1,e,f,0,t,1,a,0,r,d,1,0,0,0,0,1),this}compose(t,r,e){const d=this.elements,f=r._x,a=r._y,s=r._z,n=r._w,l=f+f,h=a+a,m=s+s,i=f*l,o=f*h,c=f*m,u=a*h,p=a*m,g=s*m,v=n*l,b=n*h,_=n*m,x=e.x,A=e.y,E=e.z;return d[0]=(1-(u+g))*x,d[1]=(o+_)*x,d[2]=(c-b)*x,d[3]=0,d[4]=(o-_)*A,d[5]=(1-(i+g))*A,d[6]=(p+v)*A,d[7]=0,d[8]=(c+b)*E,d[9]=(p-v)*E,d[10]=(1-(i+u))*E,d[11]=0,d[12]=t.x,d[13]=t.y,d[14]=t.z,d[15]=1,this}decompose(t,r,e){const d=this.elements;let f=bi.set(d[0],d[1],d[2]).length();const a=bi.set(d[4],d[5],d[6]).length(),s=bi.set(d[8],d[9],d[10]).length();this.determinant()<0&&(f=-f),t.x=d[12],t.y=d[13],t.z=d[14],Yr.copy(this);const l=1/f,h=1/a,m=1/s;return Yr.elements[0]*=l,Yr.elements[1]*=l,Yr.elements[2]*=l,Yr.elements[4]*=h,Yr.elements[5]*=h,Yr.elements[6]*=h,Yr.elements[8]*=m,Yr.elements[9]*=m,Yr.elements[10]*=m,r.setFromRotationMatrix(Yr),e.x=f,e.y=a,e.z=s,this}makePerspective(t,r,e,d,f,a){const s=this.elements,n=2*f/(r-t),l=2*f/(e-d),h=(r+t)/(r-t),m=(e+d)/(e-d),i=-(a+f)/(a-f),o=-2*a*f/(a-f);return s[0]=n,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=l,s[9]=m,s[13]=0,s[2]=0,s[6]=0,s[10]=i,s[14]=o,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,r,e,d,f,a){const s=this.elements,n=1/(r-t),l=1/(e-d),h=1/(a-f),m=(r+t)*n,i=(e+d)*l,o=(a+f)*h;return s[0]=2*n,s[4]=0,s[8]=0,s[12]=-m,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-i,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-o,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const r=this.elements,e=t.elements;for(let d=0;d<16;d++)if(r[d]!==e[d])return!1;return!0}fromArray(t,r=0){for(let e=0;e<16;e++)this.elements[e]=t[e+r];return this}toArray(t=[],r=0){const e=this.elements;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t[r+9]=e[9],t[r+10]=e[10],t[r+11]=e[11],t[r+12]=e[12],t[r+13]=e[13],t[r+14]=e[14],t[r+15]=e[15],t}}const bi=new Re,Yr=new At,Sf=new Re(0,0,0),Mf=new Re(1,1,1),Dn=new Re,Hs=new Re,kr=new Re,vc=new At,bc=new un;class Es{constructor(t=0,r=0,e=0,d=Es.DefaultOrder){this.isEuler=!0,this._x=t,this._y=r,this._z=e,this._order=d}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,e,d=this._order){return this._x=t,this._y=r,this._z=e,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,e=!0){const d=t.elements,f=d[0],a=d[4],s=d[8],n=d[1],l=d[5],h=d[9],m=d[2],i=d[6],o=d[10];switch(r){case"XYZ":this._y=Math.asin(xr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,o),this._z=Math.atan2(-a,f)):(this._x=Math.atan2(i,l),this._z=0);break;case"YXZ":this._x=Math.asin(-xr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,o),this._z=Math.atan2(n,l)):(this._y=Math.atan2(-m,f),this._z=0);break;case"ZXY":this._x=Math.asin(xr(i,-1,1)),Math.abs(i)<.9999999?(this._y=Math.atan2(-m,o),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(n,f));break;case"ZYX":this._y=Math.asin(-xr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(i,o),this._z=Math.atan2(n,f)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(xr(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-m,f)):(this._x=0,this._y=Math.atan2(s,o));break;case"XZY":this._z=Math.asin(-xr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(i,l),this._y=Math.atan2(s,f)):(this._x=Math.atan2(-h,o),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,e===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,e){return vc.makeRotationFromQuaternion(t),this.setFromRotationMatrix(vc,r,e)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return bc.setFromEuler(this),this.setFromQuaternion(bc,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Es.DefaultOrder="XYZ";Es.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Qu{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Tf=0;const _c=new Re,_i=new un,yn=new At,Ws=new Re,is=new Re,Ef=new Re,jf=new un,xc=new Re(1,0,0),wc=new Re(0,1,0),Sc=new Re(0,0,1),Af={type:"added"},Mc={type:"removed"};class Jt extends ai{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Tf++}),this.uuid=Qr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jt.DefaultUp.clone();const t=new Re,r=new Es,e=new un,d=new Re(1,1,1);function f(){e.setFromEuler(r,!1)}function a(){r.setFromQuaternion(e,void 0,!1)}r._onChange(f),e._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:e},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new At},normalMatrix:{value:new Ur}}),this.matrix=new At,this.matrixWorld=new At,this.matrixAutoUpdate=Jt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Jt.DefaultMatrixWorldAutoUpdate,this.layers=new Qu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return _i.setFromAxisAngle(t,r),this.quaternion.multiply(_i),this}rotateOnWorldAxis(t,r){return _i.setFromAxisAngle(t,r),this.quaternion.premultiply(_i),this}rotateX(t){return this.rotateOnAxis(xc,t)}rotateY(t){return this.rotateOnAxis(wc,t)}rotateZ(t){return this.rotateOnAxis(Sc,t)}translateOnAxis(t,r){return _c.copy(t).applyQuaternion(this.quaternion),this.position.add(_c.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(xc,t)}translateY(t){return this.translateOnAxis(wc,t)}translateZ(t){return this.translateOnAxis(Sc,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(yn.copy(this.matrixWorld).invert())}lookAt(t,r,e){t.isVector3?Ws.copy(t):Ws.set(t,r,e);const d=this.parent;this.updateWorldMatrix(!0,!1),is.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yn.lookAt(is,Ws,this.up):yn.lookAt(Ws,is,this.up),this.quaternion.setFromRotationMatrix(yn),d&&(yn.extractRotation(d.matrixWorld),_i.setFromRotationMatrix(yn),this.quaternion.premultiply(_i.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Af)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Mc)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(Mc)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),yn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),yn.multiply(t.parent.matrixWorld)),t.applyMatrix4(yn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let e=0,d=this.children.length;e<d;e++){const a=this.children[e].getObjectByProperty(t,r);if(a!==void 0)return a}}getObjectsByProperty(t,r){let e=[];this[t]===r&&e.push(this);for(let d=0,f=this.children.length;d<f;d++){const a=this.children[d].getObjectsByProperty(t,r);a.length>0&&(e=e.concat(a))}return e}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(is,t,Ef),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(is,jf,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let e=0,d=r.length;e<d;e++)r[e].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const r=this.children;for(let e=0,d=r.length;e<d;e++)r[e].traverseVisible(t)}traverseAncestors(t){const r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let e=0,d=r.length;e<d;e++){const f=r[e];(f.matrixWorldAutoUpdate===!0||t===!0)&&f.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const e=this.parent;if(t===!0&&e!==null&&e.matrixWorldAutoUpdate===!0&&e.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){const d=this.children;for(let f=0,a=d.length;f<a;f++){const s=d[f];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=t===void 0||typeof t=="string",e={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),this.castShadow===!0&&(d.castShadow=!0),this.receiveShadow===!0&&(d.receiveShadow=!0),this.visible===!1&&(d.visible=!1),this.frustumCulled===!1&&(d.frustumCulled=!1),this.renderOrder!==0&&(d.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(d.instanceColor=this.instanceColor.toJSON()));function f(s,n){return s[n.uuid]===void 0&&(s[n.uuid]=n.toJSON(t)),n.uuid}if(this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(d.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=f(t.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const n=s.shapes;if(Array.isArray(n))for(let l=0,h=n.length;l<h;l++){const m=n[l];f(t.shapes,m)}else f(t.shapes,n)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(f(t.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let n=0,l=this.material.length;n<l;n++)s.push(f(t.materials,this.material[n]));d.material=s}else d.material=f(t.materials,this.material);if(this.children.length>0){d.children=[];for(let s=0;s<this.children.length;s++)d.children.push(this.children[s].toJSON(t).object)}if(this.animations.length>0){d.animations=[];for(let s=0;s<this.animations.length;s++){const n=this.animations[s];d.animations.push(f(t.animations,n))}}if(r){const s=a(t.geometries),n=a(t.materials),l=a(t.textures),h=a(t.images),m=a(t.shapes),i=a(t.skeletons),o=a(t.animations),c=a(t.nodes);s.length>0&&(e.geometries=s),n.length>0&&(e.materials=n),l.length>0&&(e.textures=l),h.length>0&&(e.images=h),m.length>0&&(e.shapes=m),i.length>0&&(e.skeletons=i),o.length>0&&(e.animations=o),c.length>0&&(e.nodes=c)}return e.object=d,e;function a(s){const n=[];for(const l in s){const h=s[l];delete h.metadata,n.push(h)}return n}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let e=0;e<t.children.length;e++){const d=t.children[e];this.add(d.clone())}return this}}Jt.DefaultUp=new Re(0,1,0);Jt.DefaultMatrixAutoUpdate=!0;Jt.DefaultMatrixWorldAutoUpdate=!0;const Zr=new Re,vn=new Re,Zo=new Re,bn=new Re,xi=new Re,wi=new Re,Tc=new Re,Ko=new Re,Jo=new Re,Qo=new Re;class wn{constructor(t=new Re,r=new Re,e=new Re){this.a=t,this.b=r,this.c=e}static getNormal(t,r,e,d){d.subVectors(e,r),Zr.subVectors(t,r),d.cross(Zr);const f=d.lengthSq();return f>0?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}static getBarycoord(t,r,e,d,f){Zr.subVectors(d,r),vn.subVectors(e,r),Zo.subVectors(t,r);const a=Zr.dot(Zr),s=Zr.dot(vn),n=Zr.dot(Zo),l=vn.dot(vn),h=vn.dot(Zo),m=a*l-s*s;if(m===0)return f.set(-2,-1,-1);const i=1/m,o=(l*n-s*h)*i,c=(a*h-s*n)*i;return f.set(1-o-c,c,o)}static containsPoint(t,r,e,d){return this.getBarycoord(t,r,e,d,bn),bn.x>=0&&bn.y>=0&&bn.x+bn.y<=1}static getUV(t,r,e,d,f,a,s,n){return this.getBarycoord(t,r,e,d,bn),n.set(0,0),n.addScaledVector(f,bn.x),n.addScaledVector(a,bn.y),n.addScaledVector(s,bn.z),n}static isFrontFacing(t,r,e,d){return Zr.subVectors(e,r),vn.subVectors(t,r),Zr.cross(vn).dot(d)<0}set(t,r,e){return this.a.copy(t),this.b.copy(r),this.c.copy(e),this}setFromPointsAndIndices(t,r,e,d){return this.a.copy(t[r]),this.b.copy(t[e]),this.c.copy(t[d]),this}setFromAttributeAndIndices(t,r,e,d){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,e),this.c.fromBufferAttribute(t,d),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Zr.subVectors(this.c,this.b),vn.subVectors(this.a,this.b),Zr.cross(vn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return wn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return wn.getBarycoord(t,this.a,this.b,this.c,r)}getUV(t,r,e,d,f){return wn.getUV(t,this.a,this.b,this.c,r,e,d,f)}containsPoint(t){return wn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return wn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const e=this.a,d=this.b,f=this.c;let a,s;xi.subVectors(d,e),wi.subVectors(f,e),Ko.subVectors(t,e);const n=xi.dot(Ko),l=wi.dot(Ko);if(n<=0&&l<=0)return r.copy(e);Jo.subVectors(t,d);const h=xi.dot(Jo),m=wi.dot(Jo);if(h>=0&&m<=h)return r.copy(d);const i=n*m-h*l;if(i<=0&&n>=0&&h<=0)return a=n/(n-h),r.copy(e).addScaledVector(xi,a);Qo.subVectors(t,f);const o=xi.dot(Qo),c=wi.dot(Qo);if(c>=0&&o<=c)return r.copy(f);const u=o*l-n*c;if(u<=0&&l>=0&&c<=0)return s=l/(l-c),r.copy(e).addScaledVector(wi,s);const p=h*c-o*m;if(p<=0&&m-h>=0&&o-c>=0)return Tc.subVectors(f,d),s=(m-h)/(m-h+(o-c)),r.copy(d).addScaledVector(Tc,s);const g=1/(p+u+i);return a=u*g,s=i*g,r.copy(e).addScaledVector(xi,a).addScaledVector(wi,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Cf=0;class $r extends ai{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Cf++}),this.uuid=Qr(),this.name="",this.type="Material",this.blending=Pi,this.side=Fn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Fu,this.blendDst=Bu,this.blendEquation=Li,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=va,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=No,this.stencilZFail=No,this.stencilZPass=No,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const r in t){const e=t[r];if(e===void 0){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}const d=this[r];if(d===void 0){console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.");continue}d&&d.isColor?d.set(e):d&&d.isVector3&&e&&e.isVector3?d.copy(e):this[r]=e}}toJSON(t){const r=t===void 0||typeof t=="string";r&&(t={textures:{},images:{}});const e={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.color&&this.color.isColor&&(e.color=this.color.getHex()),this.roughness!==void 0&&(e.roughness=this.roughness),this.metalness!==void 0&&(e.metalness=this.metalness),this.sheen!==void 0&&(e.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(e.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(e.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(e.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(e.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(e.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(e.shininess=this.shininess),this.clearcoat!==void 0&&(e.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(e.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(e.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(e.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(e.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(e.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(e.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(e.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(e.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(t).uuid,e.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(t).uuid,e.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(t).uuid,e.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(t).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(t).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(e.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(e.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(e.combine=this.combine)),this.envMapIntensity!==void 0&&(e.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(e.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(e.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(e.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(e.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(e.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(e.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(e.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(e.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(e.size=this.size),this.shadowSide!==null&&(e.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(e.sizeAttenuation=this.sizeAttenuation),this.blending!==Pi&&(e.blending=this.blending),this.side!==Fn&&(e.side=this.side),this.vertexColors&&(e.vertexColors=!0),this.opacity<1&&(e.opacity=this.opacity),this.transparent===!0&&(e.transparent=this.transparent),e.depthFunc=this.depthFunc,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.colorWrite=this.colorWrite,e.stencilWrite=this.stencilWrite,e.stencilWriteMask=this.stencilWriteMask,e.stencilFunc=this.stencilFunc,e.stencilRef=this.stencilRef,e.stencilFuncMask=this.stencilFuncMask,e.stencilFail=this.stencilFail,e.stencilZFail=this.stencilZFail,e.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(e.rotation=this.rotation),this.polygonOffset===!0&&(e.polygonOffset=!0),this.polygonOffsetFactor!==0&&(e.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(e.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(e.linewidth=this.linewidth),this.dashSize!==void 0&&(e.dashSize=this.dashSize),this.gapSize!==void 0&&(e.gapSize=this.gapSize),this.scale!==void 0&&(e.scale=this.scale),this.dithering===!0&&(e.dithering=!0),this.alphaTest>0&&(e.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(e.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(e.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(e.wireframe=this.wireframe),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(e.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(e.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(e.flatShading=this.flatShading),this.visible===!1&&(e.visible=!1),this.toneMapped===!1&&(e.toneMapped=!1),this.fog===!1&&(e.fog=!1),Object.keys(this.userData).length>0&&(e.userData=this.userData);function d(f){const a=[];for(const s in f){const n=f[s];delete n.metadata,a.push(n)}return a}if(r){const f=d(t.textures),a=d(t.images);f.length>0&&(e.textures=f),a.length>0&&(e.images=a)}return e}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let e=null;if(r!==null){const d=r.length;e=new Array(d);for(let f=0;f!==d;++f)e[f]=r[f].clone()}return this.clippingPlanes=e,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Kn extends $r{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Gu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const lr=new Re,qs=new _t;class Ir{constructor(t,r,e=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=r,this.count=t!==void 0?t.length/r:0,this.normalized=e,this.usage=xa,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,r,e){t*=this.itemSize,e*=r.itemSize;for(let d=0,f=this.itemSize;d<f;d++)this.array[t+d]=r.array[e+d];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let r=0,e=this.count;r<e;r++)qs.fromBufferAttribute(this,r),qs.applyMatrix3(t),this.setXY(r,qs.x,qs.y);else if(this.itemSize===3)for(let r=0,e=this.count;r<e;r++)lr.fromBufferAttribute(this,r),lr.applyMatrix3(t),this.setXYZ(r,lr.x,lr.y,lr.z);return this}applyMatrix4(t){for(let r=0,e=this.count;r<e;r++)lr.fromBufferAttribute(this,r),lr.applyMatrix4(t),this.setXYZ(r,lr.x,lr.y,lr.z);return this}applyNormalMatrix(t){for(let r=0,e=this.count;r<e;r++)lr.fromBufferAttribute(this,r),lr.applyNormalMatrix(t),this.setXYZ(r,lr.x,lr.y,lr.z);return this}transformDirection(t){for(let r=0,e=this.count;r<e;r++)lr.fromBufferAttribute(this,r),lr.transformDirection(t),this.setXYZ(r,lr.x,lr.y,lr.z);return this}set(t,r=0){return this.array.set(t,r),this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=Tn(r,this.array)),r}setX(t,r){return this.normalized&&(r=Gt(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=Tn(r,this.array)),r}setY(t,r){return this.normalized&&(r=Gt(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=Tn(r,this.array)),r}setZ(t,r){return this.normalized&&(r=Gt(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=Tn(r,this.array)),r}setW(t,r){return this.normalized&&(r=Gt(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,e){return t*=this.itemSize,this.normalized&&(r=Gt(r,this.array),e=Gt(e,this.array)),this.array[t+0]=r,this.array[t+1]=e,this}setXYZ(t,r,e,d){return t*=this.itemSize,this.normalized&&(r=Gt(r,this.array),e=Gt(e,this.array),d=Gt(d,this.array)),this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=d,this}setXYZW(t,r,e,d,f){return t*=this.itemSize,this.normalized&&(r=Gt(r,this.array),e=Gt(e,this.array),d=Gt(d,this.array),f=Gt(f,this.array)),this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=d,this.array[t+3]=f,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==xa&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class $u extends Ir{constructor(t,r,e){super(new Uint16Array(t),r,e)}}class ed extends Ir{constructor(t,r,e){super(new Uint32Array(t),r,e)}}class En extends Ir{constructor(t,r,e){super(new Float32Array(t),r,e)}}let Lf=0;const Fr=new At,$o=new Jt,Si=new Re,Nr=new Wi,ss=new Wi,mr=new Re;class en extends ai{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Lf++}),this.uuid=Qr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Xu(t)?ed:$u)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,r,e=0){this.groups.push({start:t,count:r,materialIndex:e})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(t),r.needsUpdate=!0);const e=this.attributes.normal;if(e!==void 0){const f=new Ur().getNormalMatrix(t);e.applyNormalMatrix(f),e.needsUpdate=!0}const d=this.attributes.tangent;return d!==void 0&&(d.transformDirection(t),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Fr.makeRotationFromQuaternion(t),this.applyMatrix4(Fr),this}rotateX(t){return Fr.makeRotationX(t),this.applyMatrix4(Fr),this}rotateY(t){return Fr.makeRotationY(t),this.applyMatrix4(Fr),this}rotateZ(t){return Fr.makeRotationZ(t),this.applyMatrix4(Fr),this}translate(t,r,e){return Fr.makeTranslation(t,r,e),this.applyMatrix4(Fr),this}scale(t,r,e){return Fr.makeScale(t,r,e),this.applyMatrix4(Fr),this}lookAt(t){return $o.lookAt(t),$o.updateMatrix(),this.applyMatrix4($o.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Si).negate(),this.translate(Si.x,Si.y,Si.z),this}setFromPoints(t){const r=[];for(let e=0,d=t.length;e<d;e++){const f=t[e];r.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new En(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Re(-1/0,-1/0,-1/0),new Re(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),r)for(let e=0,d=r.length;e<d;e++){const f=r[e];Nr.setFromBufferAttribute(f),this.morphTargetsRelative?(mr.addVectors(this.boundingBox.min,Nr.min),this.boundingBox.expandByPoint(mr),mr.addVectors(this.boundingBox.max,Nr.max),this.boundingBox.expandByPoint(mr)):(this.boundingBox.expandByPoint(Nr.min),this.boundingBox.expandByPoint(Nr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qi);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Re,1/0);return}if(t){const e=this.boundingSphere.center;if(Nr.setFromBufferAttribute(t),r)for(let f=0,a=r.length;f<a;f++){const s=r[f];ss.setFromBufferAttribute(s),this.morphTargetsRelative?(mr.addVectors(Nr.min,ss.min),Nr.expandByPoint(mr),mr.addVectors(Nr.max,ss.max),Nr.expandByPoint(mr)):(Nr.expandByPoint(ss.min),Nr.expandByPoint(ss.max))}Nr.getCenter(e);let d=0;for(let f=0,a=t.count;f<a;f++)mr.fromBufferAttribute(t,f),d=Math.max(d,e.distanceToSquared(mr));if(r)for(let f=0,a=r.length;f<a;f++){const s=r[f],n=this.morphTargetsRelative;for(let l=0,h=s.count;l<h;l++)mr.fromBufferAttribute(s,l),n&&(Si.fromBufferAttribute(t,l),mr.add(Si)),d=Math.max(d,e.distanceToSquared(mr))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(t===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const e=t.array,d=r.position.array,f=r.normal.array,a=r.uv.array,s=d.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ir(new Float32Array(4*s),4));const n=this.getAttribute("tangent").array,l=[],h=[];for(let R=0;R<s;R++)l[R]=new Re,h[R]=new Re;const m=new Re,i=new Re,o=new Re,c=new _t,u=new _t,p=new _t,g=new Re,v=new Re;function b(R,P,N){m.fromArray(d,R*3),i.fromArray(d,P*3),o.fromArray(d,N*3),c.fromArray(a,R*2),u.fromArray(a,P*2),p.fromArray(a,N*2),i.sub(m),o.sub(m),u.sub(c),p.sub(c);const k=1/(u.x*p.y-p.x*u.y);isFinite(k)&&(g.copy(i).multiplyScalar(p.y).addScaledVector(o,-u.y).multiplyScalar(k),v.copy(o).multiplyScalar(u.x).addScaledVector(i,-p.x).multiplyScalar(k),l[R].add(g),l[P].add(g),l[N].add(g),h[R].add(v),h[P].add(v),h[N].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.length}]);for(let R=0,P=_.length;R<P;++R){const N=_[R],k=N.start,I=N.count;for(let B=k,Y=k+I;B<Y;B+=3)b(e[B+0],e[B+1],e[B+2])}const x=new Re,A=new Re,E=new Re,T=new Re;function C(R){E.fromArray(f,R*3),T.copy(E);const P=l[R];x.copy(P),x.sub(E.multiplyScalar(E.dot(P))).normalize(),A.crossVectors(T,P);const k=A.dot(h[R])<0?-1:1;n[R*4]=x.x,n[R*4+1]=x.y,n[R*4+2]=x.z,n[R*4+3]=k}for(let R=0,P=_.length;R<P;++R){const N=_[R],k=N.start,I=N.count;for(let B=k,Y=k+I;B<Y;B+=3)C(e[B+0]),C(e[B+1]),C(e[B+2])}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(r!==void 0){let e=this.getAttribute("normal");if(e===void 0)e=new Ir(new Float32Array(r.count*3),3),this.setAttribute("normal",e);else for(let i=0,o=e.count;i<o;i++)e.setXYZ(i,0,0,0);const d=new Re,f=new Re,a=new Re,s=new Re,n=new Re,l=new Re,h=new Re,m=new Re;if(t)for(let i=0,o=t.count;i<o;i+=3){const c=t.getX(i+0),u=t.getX(i+1),p=t.getX(i+2);d.fromBufferAttribute(r,c),f.fromBufferAttribute(r,u),a.fromBufferAttribute(r,p),h.subVectors(a,f),m.subVectors(d,f),h.cross(m),s.fromBufferAttribute(e,c),n.fromBufferAttribute(e,u),l.fromBufferAttribute(e,p),s.add(h),n.add(h),l.add(h),e.setXYZ(c,s.x,s.y,s.z),e.setXYZ(u,n.x,n.y,n.z),e.setXYZ(p,l.x,l.y,l.z)}else for(let i=0,o=r.count;i<o;i+=3)d.fromBufferAttribute(r,i+0),f.fromBufferAttribute(r,i+1),a.fromBufferAttribute(r,i+2),h.subVectors(a,f),m.subVectors(d,f),h.cross(m),e.setXYZ(i+0,h.x,h.y,h.z),e.setXYZ(i+1,h.x,h.y,h.z),e.setXYZ(i+2,h.x,h.y,h.z);this.normalizeNormals(),e.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let r=0,e=t.count;r<e;r++)mr.fromBufferAttribute(t,r),mr.normalize(),t.setXYZ(r,mr.x,mr.y,mr.z)}toNonIndexed(){function t(s,n){const l=s.array,h=s.itemSize,m=s.normalized,i=new l.constructor(n.length*h);let o=0,c=0;for(let u=0,p=n.length;u<p;u++){s.isInterleavedBufferAttribute?o=n[u]*s.data.stride+s.offset:o=n[u]*h;for(let g=0;g<h;g++)i[c++]=l[o++]}return new Ir(i,h,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new en,e=this.index.array,d=this.attributes;for(const s in d){const n=d[s],l=t(n,e);r.setAttribute(s,l)}const f=this.morphAttributes;for(const s in f){const n=[],l=f[s];for(let h=0,m=l.length;h<m;h++){const i=l[h],o=t(i,e);n.push(o)}r.morphAttributes[s]=n}r.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,n=a.length;s<n;s++){const l=a[s];r.addGroup(l.start,l.count,l.materialIndex)}return r}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const n=this.parameters;for(const l in n)n[l]!==void 0&&(t[l]=n[l]);return t}t.data={attributes:{}};const r=this.index;r!==null&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const e=this.attributes;for(const n in e){const l=e[n];t.data.attributes[n]=l.toJSON(t.data)}const d={};let f=!1;for(const n in this.morphAttributes){const l=this.morphAttributes[n],h=[];for(let m=0,i=l.length;m<i;m++){const o=l[m];h.push(o.toJSON(t.data))}h.length>0&&(d[n]=h,f=!0)}f&&(t.data.morphAttributes=d,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const e=t.index;e!==null&&this.setIndex(e.clone(r));const d=t.attributes;for(const l in d){const h=d[l];this.setAttribute(l,h.clone(r))}const f=t.morphAttributes;for(const l in f){const h=[],m=f[l];for(let i=0,o=m.length;i<o;i++)h.push(m[i].clone(r));this.morphAttributes[l]=h}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let l=0,h=a.length;l<h;l++){const m=a[l];this.addGroup(m.start,m.count,m.materialIndex)}const s=t.boundingBox;s!==null&&(this.boundingBox=s.clone());const n=t.boundingSphere;return n!==null&&(this.boundingSphere=n.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ec=new At,Mi=new Ua,ea=new qi,os=new Re,as=new Re,ls=new Re,ta=new Re,Xs=new Re,Ys=new _t,Zs=new _t,Ks=new _t,ra=new Re,Js=new Re;class Vr extends Jt{constructor(t=new en,r=new Kn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const d=r[e[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,a=d.length;f<a;f++){const s=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=f}}}}getVertexPosition(t,r){const e=this.geometry,d=e.attributes.position,f=e.morphAttributes.position,a=e.morphTargetsRelative;r.fromBufferAttribute(d,t);const s=this.morphTargetInfluences;if(f&&s){Xs.set(0,0,0);for(let n=0,l=f.length;n<l;n++){const h=s[n],m=f[n];h!==0&&(ta.fromBufferAttribute(m,t),a?Xs.addScaledVector(ta,h):Xs.addScaledVector(ta.sub(r),h))}r.add(Xs)}return this.isSkinnedMesh&&this.boneTransform(t,r),r}raycast(t,r){const e=this.geometry,d=this.material,f=this.matrixWorld;if(d===void 0||(e.boundingSphere===null&&e.computeBoundingSphere(),ea.copy(e.boundingSphere),ea.applyMatrix4(f),t.ray.intersectsSphere(ea)===!1)||(Ec.copy(f).invert(),Mi.copy(t.ray).applyMatrix4(Ec),e.boundingBox!==null&&Mi.intersectsBox(e.boundingBox)===!1))return;let a;const s=e.index,n=e.attributes.position,l=e.attributes.uv,h=e.attributes.uv2,m=e.groups,i=e.drawRange;if(s!==null)if(Array.isArray(d))for(let o=0,c=m.length;o<c;o++){const u=m[o],p=d[u.materialIndex],g=Math.max(u.start,i.start),v=Math.min(s.count,Math.min(u.start+u.count,i.start+i.count));for(let b=g,_=v;b<_;b+=3){const x=s.getX(b),A=s.getX(b+1),E=s.getX(b+2);a=Qs(this,p,t,Mi,l,h,x,A,E),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=u.materialIndex,r.push(a))}}else{const o=Math.max(0,i.start),c=Math.min(s.count,i.start+i.count);for(let u=o,p=c;u<p;u+=3){const g=s.getX(u),v=s.getX(u+1),b=s.getX(u+2);a=Qs(this,d,t,Mi,l,h,g,v,b),a&&(a.faceIndex=Math.floor(u/3),r.push(a))}}else if(n!==void 0)if(Array.isArray(d))for(let o=0,c=m.length;o<c;o++){const u=m[o],p=d[u.materialIndex],g=Math.max(u.start,i.start),v=Math.min(n.count,Math.min(u.start+u.count,i.start+i.count));for(let b=g,_=v;b<_;b+=3){const x=b,A=b+1,E=b+2;a=Qs(this,p,t,Mi,l,h,x,A,E),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=u.materialIndex,r.push(a))}}else{const o=Math.max(0,i.start),c=Math.min(n.count,i.start+i.count);for(let u=o,p=c;u<p;u+=3){const g=u,v=u+1,b=u+2;a=Qs(this,d,t,Mi,l,h,g,v,b),a&&(a.faceIndex=Math.floor(u/3),r.push(a))}}}}function Rf(w,t,r,e,d,f,a,s){let n;if(t.side===Hr?n=e.intersectTriangle(a,f,d,!0,s):n=e.intersectTriangle(d,f,a,t.side===Fn,s),n===null)return null;Js.copy(s),Js.applyMatrix4(w.matrixWorld);const l=r.ray.origin.distanceTo(Js);return l<r.near||l>r.far?null:{distance:l,point:Js.clone(),object:w}}function Qs(w,t,r,e,d,f,a,s,n){w.getVertexPosition(a,os),w.getVertexPosition(s,as),w.getVertexPosition(n,ls);const l=Rf(w,t,r,e,os,as,ls,ra);if(l){d&&(Ys.fromBufferAttribute(d,a),Zs.fromBufferAttribute(d,s),Ks.fromBufferAttribute(d,n),l.uv=wn.getUV(ra,os,as,ls,Ys,Zs,Ks,new _t)),f&&(Ys.fromBufferAttribute(f,a),Zs.fromBufferAttribute(f,s),Ks.fromBufferAttribute(f,n),l.uv2=wn.getUV(ra,os,as,ls,Ys,Zs,Ks,new _t));const h={a,b:s,c:n,normal:new Re,materialIndex:0};wn.getNormal(os,as,ls,h.normal),l.face=h}return l}class js extends en{constructor(t=1,r=1,e=1,d=1,f=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:e,widthSegments:d,heightSegments:f,depthSegments:a};const s=this;d=Math.floor(d),f=Math.floor(f),a=Math.floor(a);const n=[],l=[],h=[],m=[];let i=0,o=0;c("z","y","x",-1,-1,e,r,t,a,f,0),c("z","y","x",1,-1,e,r,-t,a,f,1),c("x","z","y",1,1,t,e,r,d,a,2),c("x","z","y",1,-1,t,e,-r,d,a,3),c("x","y","z",1,-1,t,r,e,d,f,4),c("x","y","z",-1,-1,t,r,-e,d,f,5),this.setIndex(n),this.setAttribute("position",new En(l,3)),this.setAttribute("normal",new En(h,3)),this.setAttribute("uv",new En(m,2));function c(u,p,g,v,b,_,x,A,E,T,C){const R=_/E,P=x/T,N=_/2,k=x/2,I=A/2,B=E+1,Y=T+1;let W=0,H=0;const X=new Re;for(let Z=0;Z<Y;Z++){const q=Z*P-k;for(let ee=0;ee<B;ee++){const L=ee*R-N;X[u]=L*v,X[p]=q*b,X[g]=I,l.push(X.x,X.y,X.z),X[u]=0,X[p]=0,X[g]=A>0?1:-1,h.push(X.x,X.y,X.z),m.push(ee/E),m.push(1-Z/T),W+=1}}for(let Z=0;Z<T;Z++)for(let q=0;q<E;q++){const ee=i+q+B*Z,L=i+q+B*(Z+1),O=i+(q+1)+B*(Z+1),U=i+(q+1)+B*Z;n.push(ee,L,U),n.push(L,O,U),H+=6}s.addGroup(o,H,C),o+=H,i+=W}}static fromJSON(t){return new js(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Bi(w){const t={};for(const r in w){t[r]={};for(const e in w[r]){const d=w[r][e];d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?t[r][e]=d.clone():Array.isArray(d)?t[r][e]=d.slice():t[r][e]=d}}return t}function Pr(w){const t={};for(let r=0;r<w.length;r++){const e=Bi(w[r]);for(const d in e)t[d]=e[d]}return t}function Pf(w){const t=[];for(let r=0;r<w.length;r++)t.push(w[r].clone());return t}function td(w){return w.getRenderTarget()===null&&w.outputEncoding===Pt?sn:_s}const Df={clone:Bi,merge:Pr};var If=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Of=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ni extends $r{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=If,this.fragmentShader=Of,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Bi(t.uniforms),this.uniformsGroups=Pf(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const d in this.uniforms){const a=this.uniforms[d].value;a&&a.isTexture?r.uniforms[d]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?r.uniforms[d]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[d]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[d]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[d]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[d]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[d]={type:"m4",value:a.toArray()}:r.uniforms[d]={value:a}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;const e={};for(const d in this.extensions)this.extensions[d]===!0&&(e[d]=!0);return Object.keys(e).length>0&&(r.extensions=e),r}}class rd extends Jt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new At,this.projectionMatrix=new At,this.projectionMatrixInverse=new At}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Dr extends rd{constructor(t=50,r=1,e=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=e,this.far=d,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=xs*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(gs*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return xs*2*Math.atan(Math.tan(gs*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,r,e,d,f,a){this.aspect=t/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=e,this.view.offsetY=d,this.view.width=f,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(gs*.5*this.fov)/this.zoom,e=2*r,d=this.aspect*e,f=-.5*d;const a=this.view;if(this.view!==null&&this.view.enabled){const n=a.fullWidth,l=a.fullHeight;f+=a.offsetX*d/n,r-=a.offsetY*e/l,d*=a.width/n,e*=a.height/l}const s=this.filmOffset;s!==0&&(f+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+d,r,r-e,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const Ti=-90,Ei=1;class kf extends Jt{constructor(t,r,e){super(),this.type="CubeCamera",this.renderTarget=e;const d=new Dr(Ti,Ei,t,r);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(1,0,0),this.add(d);const f=new Dr(Ti,Ei,t,r);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(-1,0,0),this.add(f);const a=new Dr(Ti,Ei,t,r);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const s=new Dr(Ti,Ei,t,r);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);const n=new Dr(Ti,Ei,t,r);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(0,0,1),this.add(n);const l=new Dr(Ti,Ei,t,r);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,r){this.parent===null&&this.updateMatrixWorld();const e=this.renderTarget,[d,f,a,s,n,l]=this.children,h=t.getRenderTarget(),m=t.toneMapping,i=t.xr.enabled;t.toneMapping=ln,t.xr.enabled=!1;const o=e.texture.generateMipmaps;e.texture.generateMipmaps=!1,t.setRenderTarget(e,0),t.render(r,d),t.setRenderTarget(e,1),t.render(r,f),t.setRenderTarget(e,2),t.render(r,a),t.setRenderTarget(e,3),t.render(r,s),t.setRenderTarget(e,4),t.render(r,n),e.texture.generateMipmaps=o,t.setRenderTarget(e,5),t.render(r,l),t.setRenderTarget(h),t.toneMapping=m,t.xr.enabled=i,e.texture.needsPMREMUpdate=!0}}class nd extends wr{constructor(t,r,e,d,f,a,s,n,l,h){t=t!==void 0?t:[],r=r!==void 0?r:Oi,super(t,r,e,d,f,a,s,n,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Nf extends ri{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const e={width:t,height:t,depth:1},d=[e,e,e,e,e,e];this.texture=new nd(d,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:dr}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const e={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},d=new js(5,5,5),f=new ni({name:"CubemapFromEquirect",uniforms:Bi(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:Hr,blending:Un});f.uniforms.tEquirect.value=r;const a=new Vr(d,f),s=r.minFilter;return r.minFilter===Bn&&(r.minFilter=dr),new kf(1,10,this).update(t,a),r.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(t,r,e,d){const f=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(r,e,d);t.setRenderTarget(f)}}const na=new Re,Uf=new Re,Ff=new Ur;class Wn{constructor(t=new Re(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,e,d){return this.normal.set(t,r,e),this.constant=d,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,e){const d=na.subVectors(e,r).cross(Uf.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(d,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,r){const e=t.delta(na),d=this.normal.dot(e);if(d===0)return this.distanceToPoint(t.start)===0?r.copy(t.start):null;const f=-(t.start.dot(this.normal)+this.constant)/d;return f<0||f>1?null:r.copy(e).multiplyScalar(f).add(t.start)}intersectsLine(t){const r=this.distanceToPoint(t.start),e=this.distanceToPoint(t.end);return r<0&&e>0||e<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const e=r||Ff.getNormalMatrix(t),d=this.coplanarPoint(na).applyMatrix4(t),f=this.normal.applyMatrix3(e).normalize();return this.constant=-d.dot(f),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ji=new qi,$s=new Re;class Fa{constructor(t=new Wn,r=new Wn,e=new Wn,d=new Wn,f=new Wn,a=new Wn){this.planes=[t,r,e,d,f,a]}set(t,r,e,d,f,a){const s=this.planes;return s[0].copy(t),s[1].copy(r),s[2].copy(e),s[3].copy(d),s[4].copy(f),s[5].copy(a),this}copy(t){const r=this.planes;for(let e=0;e<6;e++)r[e].copy(t.planes[e]);return this}setFromProjectionMatrix(t){const r=this.planes,e=t.elements,d=e[0],f=e[1],a=e[2],s=e[3],n=e[4],l=e[5],h=e[6],m=e[7],i=e[8],o=e[9],c=e[10],u=e[11],p=e[12],g=e[13],v=e[14],b=e[15];return r[0].setComponents(s-d,m-n,u-i,b-p).normalize(),r[1].setComponents(s+d,m+n,u+i,b+p).normalize(),r[2].setComponents(s+f,m+l,u+o,b+g).normalize(),r[3].setComponents(s-f,m-l,u-o,b-g).normalize(),r[4].setComponents(s-a,m-h,u-c,b-v).normalize(),r[5].setComponents(s+a,m+h,u+c,b+v).normalize(),this}intersectsObject(t){const r=t.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),ji.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ji)}intersectsSprite(t){return ji.center.set(0,0,0),ji.radius=.7071067811865476,ji.applyMatrix4(t.matrixWorld),this.intersectsSphere(ji)}intersectsSphere(t){const r=this.planes,e=t.center,d=-t.radius;for(let f=0;f<6;f++)if(r[f].distanceToPoint(e)<d)return!1;return!0}intersectsBox(t){const r=this.planes;for(let e=0;e<6;e++){const d=r[e];if($s.x=d.normal.x>0?t.max.x:t.min.x,$s.y=d.normal.y>0?t.max.y:t.min.y,$s.z=d.normal.z>0?t.max.z:t.min.z,d.distanceToPoint($s)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let e=0;e<6;e++)if(r[e].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function id(){let w=null,t=!1,r=null,e=null;function d(f,a){r(f,a),e=w.requestAnimationFrame(d)}return{start:function(){t!==!0&&r!==null&&(e=w.requestAnimationFrame(d),t=!0)},stop:function(){w.cancelAnimationFrame(e),t=!1},setAnimationLoop:function(f){r=f},setContext:function(f){w=f}}}function Bf(w,t){const r=t.isWebGL2,e=new WeakMap;function d(l,h){const m=l.array,i=l.usage,o=w.createBuffer();w.bindBuffer(h,o),w.bufferData(h,m,i),l.onUploadCallback();let c;if(m instanceof Float32Array)c=5126;else if(m instanceof Uint16Array)if(l.isFloat16BufferAttribute)if(r)c=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else c=5123;else if(m instanceof Int16Array)c=5122;else if(m instanceof Uint32Array)c=5125;else if(m instanceof Int32Array)c=5124;else if(m instanceof Int8Array)c=5120;else if(m instanceof Uint8Array)c=5121;else if(m instanceof Uint8ClampedArray)c=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:o,type:c,bytesPerElement:m.BYTES_PER_ELEMENT,version:l.version}}function f(l,h,m){const i=h.array,o=h.updateRange;w.bindBuffer(m,l),o.count===-1?w.bufferSubData(m,0,i):(r?w.bufferSubData(m,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):w.bufferSubData(m,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1),h.onUploadCallback()}function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const h=e.get(l);h&&(w.deleteBuffer(h.buffer),e.delete(l))}function n(l,h){if(l.isGLBufferAttribute){const i=e.get(l);(!i||i.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const m=e.get(l);m===void 0?e.set(l,d(l,h)):m.version<l.version&&(f(m.buffer,l,h),m.version=l.version)}return{get:a,remove:s,update:n}}class Ba extends en{constructor(t=1,r=1,e=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:e,heightSegments:d};const f=t/2,a=r/2,s=Math.floor(e),n=Math.floor(d),l=s+1,h=n+1,m=t/s,i=r/n,o=[],c=[],u=[],p=[];for(let g=0;g<h;g++){const v=g*i-a;for(let b=0;b<l;b++){const _=b*m-f;c.push(_,-v,0),u.push(0,0,1),p.push(b/s),p.push(1-g/n)}}for(let g=0;g<n;g++)for(let v=0;v<s;v++){const b=v+l*g,_=v+l*(g+1),x=v+1+l*(g+1),A=v+1+l*g;o.push(b,_,A),o.push(_,x,A)}this.setIndex(o),this.setAttribute("position",new En(c,3)),this.setAttribute("normal",new En(u,3)),this.setAttribute("uv",new En(p,2))}static fromJSON(t){return new Ba(t.width,t.height,t.widthSegments,t.heightSegments)}}var Gf=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,zf=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vf=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Hf=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wf=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qf=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Xf="vec3 transformed = vec3( position );",Yf=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Zf=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Kf=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Jf=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Qf=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,$f=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ep=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,tp=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rp=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,np=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ip=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,sp=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,op=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,ap=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,lp=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,cp=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,up=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,dp=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,hp=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fp="gl_FragColor = linearToOutputTexel( gl_FragColor );",pp=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,mp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gp=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yp=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,vp=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bp=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_p=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,xp=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wp=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Sp=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Mp=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Tp=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Ep=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,jp=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ap=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Cp=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Lp=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Rp=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Pp=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Dp=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ip=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Op=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,kp=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Np=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Up=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Fp=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Bp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Gp=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Vp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Hp=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Wp=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qp=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Xp=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Yp=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Zp=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Kp=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Jp=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Qp=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,$p=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,em=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,tm=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nm=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,im=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sm=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,om=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,am=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,lm=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,cm=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,um=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dm=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,hm=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,fm=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,pm=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,mm=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gm=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ym=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,vm=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,bm=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_m=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,xm=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wm=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Sm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Mm=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Tm=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Em=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,jm=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Am=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Cm=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Lm=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Rm=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Pm=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Dm=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Im=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Om=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,km=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Nm=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Um=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Fm=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Bm=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Gm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zm=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Vm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hm=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Wm=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qm=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Xm=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ym=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Zm=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Km=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Jm=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qm=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$m=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,eg=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tg=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rg=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ng=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ig=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sg=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,og=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ag=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lg=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cg=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ug=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dg=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hg=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fg=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mg=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gg=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,yg=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vg=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tt={alphamap_fragment:Gf,alphamap_pars_fragment:zf,alphatest_fragment:Vf,alphatest_pars_fragment:Hf,aomap_fragment:Wf,aomap_pars_fragment:qf,begin_vertex:Xf,beginnormal_vertex:Yf,bsdfs:Zf,iridescence_fragment:Kf,bumpmap_pars_fragment:Jf,clipping_planes_fragment:Qf,clipping_planes_pars_fragment:$f,clipping_planes_pars_vertex:ep,clipping_planes_vertex:tp,color_fragment:rp,color_pars_fragment:np,color_pars_vertex:ip,color_vertex:sp,common:op,cube_uv_reflection_fragment:ap,defaultnormal_vertex:lp,displacementmap_pars_vertex:cp,displacementmap_vertex:up,emissivemap_fragment:dp,emissivemap_pars_fragment:hp,encodings_fragment:fp,encodings_pars_fragment:pp,envmap_fragment:mp,envmap_common_pars_fragment:gp,envmap_pars_fragment:yp,envmap_pars_vertex:vp,envmap_physical_pars_fragment:Lp,envmap_vertex:bp,fog_vertex:_p,fog_pars_vertex:xp,fog_fragment:wp,fog_pars_fragment:Sp,gradientmap_pars_fragment:Mp,lightmap_fragment:Tp,lightmap_pars_fragment:Ep,lights_lambert_fragment:jp,lights_lambert_pars_fragment:Ap,lights_pars_begin:Cp,lights_toon_fragment:Rp,lights_toon_pars_fragment:Pp,lights_phong_fragment:Dp,lights_phong_pars_fragment:Ip,lights_physical_fragment:Op,lights_physical_pars_fragment:kp,lights_fragment_begin:Np,lights_fragment_maps:Up,lights_fragment_end:Fp,logdepthbuf_fragment:Bp,logdepthbuf_pars_fragment:Gp,logdepthbuf_pars_vertex:zp,logdepthbuf_vertex:Vp,map_fragment:Hp,map_pars_fragment:Wp,map_particle_fragment:qp,map_particle_pars_fragment:Xp,metalnessmap_fragment:Yp,metalnessmap_pars_fragment:Zp,morphcolor_vertex:Kp,morphnormal_vertex:Jp,morphtarget_pars_vertex:Qp,morphtarget_vertex:$p,normal_fragment_begin:em,normal_fragment_maps:tm,normal_pars_fragment:rm,normal_pars_vertex:nm,normal_vertex:im,normalmap_pars_fragment:sm,clearcoat_normal_fragment_begin:om,clearcoat_normal_fragment_maps:am,clearcoat_pars_fragment:lm,iridescence_pars_fragment:cm,output_fragment:um,packing:dm,premultiplied_alpha_fragment:hm,project_vertex:fm,dithering_fragment:pm,dithering_pars_fragment:mm,roughnessmap_fragment:gm,roughnessmap_pars_fragment:ym,shadowmap_pars_fragment:vm,shadowmap_pars_vertex:bm,shadowmap_vertex:_m,shadowmask_pars_fragment:xm,skinbase_vertex:wm,skinning_pars_vertex:Sm,skinning_vertex:Mm,skinnormal_vertex:Tm,specularmap_fragment:Em,specularmap_pars_fragment:jm,tonemapping_fragment:Am,tonemapping_pars_fragment:Cm,transmission_fragment:Lm,transmission_pars_fragment:Rm,uv_pars_fragment:Pm,uv_pars_vertex:Dm,uv_vertex:Im,uv2_pars_fragment:Om,uv2_pars_vertex:km,uv2_vertex:Nm,worldpos_vertex:Um,background_vert:Fm,background_frag:Bm,backgroundCube_vert:Gm,backgroundCube_frag:zm,cube_vert:Vm,cube_frag:Hm,depth_vert:Wm,depth_frag:qm,distanceRGBA_vert:Xm,distanceRGBA_frag:Ym,equirect_vert:Zm,equirect_frag:Km,linedashed_vert:Jm,linedashed_frag:Qm,meshbasic_vert:$m,meshbasic_frag:eg,meshlambert_vert:tg,meshlambert_frag:rg,meshmatcap_vert:ng,meshmatcap_frag:ig,meshnormal_vert:sg,meshnormal_frag:og,meshphong_vert:ag,meshphong_frag:lg,meshphysical_vert:cg,meshphysical_frag:ug,meshtoon_vert:dg,meshtoon_frag:hg,points_vert:fg,points_frag:pg,shadow_vert:mg,shadow_frag:gg,sprite_vert:yg,sprite_frag:vg},ot={common:{diffuse:{value:new jt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ur},uv2Transform:{value:new Ur},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ur}},sprite:{diffuse:{value:new jt(16777215)},opacity:{value:1},center:{value:new _t(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ur}}},on={basic:{uniforms:Pr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:Pr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new jt(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:Pr([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new jt(0)},specular:{value:new jt(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:Pr([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:Pr([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new jt(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:Pr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:Pr([ot.points,ot.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:Pr([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:Pr([ot.common,ot.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:Pr([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:Pr([ot.sprite,ot.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ur},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tt.backgroundCube_vert,fragmentShader:Tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:Pr([ot.common,ot.displacementmap,{referencePosition:{value:new Re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:Pr([ot.lights,ot.fog,{color:{value:new jt(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};on.physical={uniforms:Pr([on.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _t(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new jt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new jt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new jt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};const eo={r:0,b:0,g:0};function bg(w,t,r,e,d,f,a){const s=new jt(0);let n=f===!0?0:1,l,h,m=null,i=0,o=null;function c(p,g){let v=!1,b=g.isScene===!0?g.background:null;b&&b.isTexture&&(b=(g.backgroundBlurriness>0?r:t).get(b));const _=w.xr,x=_.getSession&&_.getSession();x&&x.environmentBlendMode==="additive"&&(b=null),b===null?u(s,n):b&&b.isColor&&(u(b,1),v=!0),(w.autoClear||v)&&w.clear(w.autoClearColor,w.autoClearDepth,w.autoClearStencil),b&&(b.isCubeTexture||b.mapping===xo)?(h===void 0&&(h=new Vr(new js(1,1,1),new ni({name:"BackgroundCubeMaterial",uniforms:Bi(on.backgroundCube.uniforms),vertexShader:on.backgroundCube.vertexShader,fragmentShader:on.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(A,E,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),d.update(h)),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=b.encoding!==Pt,(m!==b||i!==b.version||o!==w.toneMapping)&&(h.material.needsUpdate=!0,m=b,i=b.version,o=w.toneMapping),h.layers.enableAll(),p.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(l===void 0&&(l=new Vr(new Ba(2,2),new ni({name:"BackgroundMaterial",uniforms:Bi(on.background.uniforms),vertexShader:on.background.vertexShader,fragmentShader:on.background.fragmentShader,side:Fn,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(l)),l.material.uniforms.t2D.value=b,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=b.encoding!==Pt,b.matrixAutoUpdate===!0&&b.updateMatrix(),l.material.uniforms.uvTransform.value.copy(b.matrix),(m!==b||i!==b.version||o!==w.toneMapping)&&(l.material.needsUpdate=!0,m=b,i=b.version,o=w.toneMapping),l.layers.enableAll(),p.unshift(l,l.geometry,l.material,0,0,null))}function u(p,g){p.getRGB(eo,td(w)),e.buffers.color.setClear(eo.r,eo.g,eo.b,g,a)}return{getClearColor:function(){return s},setClearColor:function(p,g=1){s.set(p),n=g,u(s,n)},getClearAlpha:function(){return n},setClearAlpha:function(p){n=p,u(s,n)},render:c}}function _g(w,t,r,e){const d=w.getParameter(34921),f=e.isWebGL2?null:t.get("OES_vertex_array_object"),a=e.isWebGL2||f!==null,s={},n=p(null);let l=n,h=!1;function m(I,B,Y,W,H){let X=!1;if(a){const Z=u(W,Y,B);l!==Z&&(l=Z,o(l.object)),X=g(I,W,Y,H),X&&v(I,W,Y,H)}else{const Z=B.wireframe===!0;(l.geometry!==W.id||l.program!==Y.id||l.wireframe!==Z)&&(l.geometry=W.id,l.program=Y.id,l.wireframe=Z,X=!0)}H!==null&&r.update(H,34963),(X||h)&&(h=!1,T(I,B,Y,W),H!==null&&w.bindBuffer(34963,r.get(H).buffer))}function i(){return e.isWebGL2?w.createVertexArray():f.createVertexArrayOES()}function o(I){return e.isWebGL2?w.bindVertexArray(I):f.bindVertexArrayOES(I)}function c(I){return e.isWebGL2?w.deleteVertexArray(I):f.deleteVertexArrayOES(I)}function u(I,B,Y){const W=Y.wireframe===!0;let H=s[I.id];H===void 0&&(H={},s[I.id]=H);let X=H[B.id];X===void 0&&(X={},H[B.id]=X);let Z=X[W];return Z===void 0&&(Z=p(i()),X[W]=Z),Z}function p(I){const B=[],Y=[],W=[];for(let H=0;H<d;H++)B[H]=0,Y[H]=0,W[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:Y,attributeDivisors:W,object:I,attributes:{},index:null}}function g(I,B,Y,W){const H=l.attributes,X=B.attributes;let Z=0;const q=Y.getAttributes();for(const ee in q)if(q[ee].location>=0){const O=H[ee];let U=X[ee];if(U===void 0&&(ee==="instanceMatrix"&&I.instanceMatrix&&(U=I.instanceMatrix),ee==="instanceColor"&&I.instanceColor&&(U=I.instanceColor)),O===void 0||O.attribute!==U||U&&O.data!==U.data)return!0;Z++}return l.attributesNum!==Z||l.index!==W}function v(I,B,Y,W){const H={},X=B.attributes;let Z=0;const q=Y.getAttributes();for(const ee in q)if(q[ee].location>=0){let O=X[ee];O===void 0&&(ee==="instanceMatrix"&&I.instanceMatrix&&(O=I.instanceMatrix),ee==="instanceColor"&&I.instanceColor&&(O=I.instanceColor));const U={};U.attribute=O,O&&O.data&&(U.data=O.data),H[ee]=U,Z++}l.attributes=H,l.attributesNum=Z,l.index=W}function b(){const I=l.newAttributes;for(let B=0,Y=I.length;B<Y;B++)I[B]=0}function _(I){x(I,0)}function x(I,B){const Y=l.newAttributes,W=l.enabledAttributes,H=l.attributeDivisors;Y[I]=1,W[I]===0&&(w.enableVertexAttribArray(I),W[I]=1),H[I]!==B&&((e.isWebGL2?w:t.get("ANGLE_instanced_arrays"))[e.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,B),H[I]=B)}function A(){const I=l.newAttributes,B=l.enabledAttributes;for(let Y=0,W=B.length;Y<W;Y++)B[Y]!==I[Y]&&(w.disableVertexAttribArray(Y),B[Y]=0)}function E(I,B,Y,W,H,X){e.isWebGL2===!0&&(Y===5124||Y===5125)?w.vertexAttribIPointer(I,B,Y,H,X):w.vertexAttribPointer(I,B,Y,W,H,X)}function T(I,B,Y,W){if(e.isWebGL2===!1&&(I.isInstancedMesh||W.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();const H=W.attributes,X=Y.getAttributes(),Z=B.defaultAttributeValues;for(const q in X){const ee=X[q];if(ee.location>=0){let L=H[q];if(L===void 0&&(q==="instanceMatrix"&&I.instanceMatrix&&(L=I.instanceMatrix),q==="instanceColor"&&I.instanceColor&&(L=I.instanceColor)),L!==void 0){const O=L.normalized,U=L.itemSize,V=r.get(L);if(V===void 0)continue;const J=V.buffer,le=V.type,ce=V.bytesPerElement;if(L.isInterleavedBufferAttribute){const ue=L.data,re=ue.stride,de=L.offset;if(ue.isInstancedInterleavedBuffer){for(let ve=0;ve<ee.locationSize;ve++)x(ee.location+ve,ue.meshPerAttribute);I.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let ve=0;ve<ee.locationSize;ve++)_(ee.location+ve);w.bindBuffer(34962,J);for(let ve=0;ve<ee.locationSize;ve++)E(ee.location+ve,U/ee.locationSize,le,O,re*ce,(de+U/ee.locationSize*ve)*ce)}else{if(L.isInstancedBufferAttribute){for(let ue=0;ue<ee.locationSize;ue++)x(ee.location+ue,L.meshPerAttribute);I.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=L.meshPerAttribute*L.count)}else for(let ue=0;ue<ee.locationSize;ue++)_(ee.location+ue);w.bindBuffer(34962,J);for(let ue=0;ue<ee.locationSize;ue++)E(ee.location+ue,U/ee.locationSize,le,O,U*ce,U/ee.locationSize*ue*ce)}}else if(Z!==void 0){const O=Z[q];if(O!==void 0)switch(O.length){case 2:w.vertexAttrib2fv(ee.location,O);break;case 3:w.vertexAttrib3fv(ee.location,O);break;case 4:w.vertexAttrib4fv(ee.location,O);break;default:w.vertexAttrib1fv(ee.location,O)}}}}A()}function C(){N();for(const I in s){const B=s[I];for(const Y in B){const W=B[Y];for(const H in W)c(W[H].object),delete W[H];delete B[Y]}delete s[I]}}function R(I){if(s[I.id]===void 0)return;const B=s[I.id];for(const Y in B){const W=B[Y];for(const H in W)c(W[H].object),delete W[H];delete B[Y]}delete s[I.id]}function P(I){for(const B in s){const Y=s[B];if(Y[I.id]===void 0)continue;const W=Y[I.id];for(const H in W)c(W[H].object),delete W[H];delete Y[I.id]}}function N(){k(),h=!0,l!==n&&(l=n,o(l.object))}function k(){n.geometry=null,n.program=null,n.wireframe=!1}return{setup:m,reset:N,resetDefaultState:k,dispose:C,releaseStatesOfGeometry:R,releaseStatesOfProgram:P,initAttributes:b,enableAttribute:_,disableUnusedAttributes:A}}function xg(w,t,r,e){const d=e.isWebGL2;let f;function a(l){f=l}function s(l,h){w.drawArrays(f,l,h),r.update(h,f,1)}function n(l,h,m){if(m===0)return;let i,o;if(d)i=w,o="drawArraysInstanced";else if(i=t.get("ANGLE_instanced_arrays"),o="drawArraysInstancedANGLE",i===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}i[o](f,l,h,m),r.update(h,f,m)}this.setMode=a,this.render=s,this.renderInstances=n}function wg(w,t,r){let e;function d(){if(e!==void 0)return e;if(t.has("EXT_texture_filter_anisotropic")===!0){const E=t.get("EXT_texture_filter_anisotropic");e=w.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else e=0;return e}function f(E){if(E==="highp"){if(w.getShaderPrecisionFormat(35633,36338).precision>0&&w.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&w.getShaderPrecisionFormat(35633,36337).precision>0&&w.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&w instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&w instanceof WebGL2ComputeRenderingContext;let s=r.precision!==void 0?r.precision:"highp";const n=f(s);n!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",n,"instead."),s=n);const l=a||t.has("WEBGL_draw_buffers"),h=r.logarithmicDepthBuffer===!0,m=w.getParameter(34930),i=w.getParameter(35660),o=w.getParameter(3379),c=w.getParameter(34076),u=w.getParameter(34921),p=w.getParameter(36347),g=w.getParameter(36348),v=w.getParameter(36349),b=i>0,_=a||t.has("OES_texture_float"),x=b&&_,A=a?w.getParameter(36183):0;return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:d,getMaxPrecision:f,precision:s,logarithmicDepthBuffer:h,maxTextures:m,maxVertexTextures:i,maxTextureSize:o,maxCubemapSize:c,maxAttributes:u,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:x,maxSamples:A}}function Sg(w){const t=this;let r=null,e=0,d=!1,f=!1;const a=new Wn,s=new Ur,n={value:null,needsUpdate:!1};this.uniform=n,this.numPlanes=0,this.numIntersection=0,this.init=function(m,i,o){const c=m.length!==0||i||e!==0||d;return d=i,r=h(m,o,0),e=m.length,c},this.beginShadows=function(){f=!0,h(null)},this.endShadows=function(){f=!1,l()},this.setState=function(m,i,o){const c=m.clippingPlanes,u=m.clipIntersection,p=m.clipShadows,g=w.get(m);if(!d||c===null||c.length===0||f&&!p)f?h(null):l();else{const v=f?0:e,b=v*4;let _=g.clippingState||null;n.value=_,_=h(c,i,b,o);for(let x=0;x!==b;++x)_[x]=r[x];g.clippingState=_,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=v}};function l(){n.value!==r&&(n.value=r,n.needsUpdate=e>0),t.numPlanes=e,t.numIntersection=0}function h(m,i,o,c){const u=m!==null?m.length:0;let p=null;if(u!==0){if(p=n.value,c!==!0||p===null){const g=o+u*4,v=i.matrixWorldInverse;s.getNormalMatrix(v),(p===null||p.length<g)&&(p=new Float32Array(g));for(let b=0,_=o;b!==u;++b,_+=4)a.copy(m[b]).applyMatrix4(v,s),a.normal.toArray(p,_),p[_+3]=a.constant}n.value=p,n.needsUpdate=!0}return t.numPlanes=u,t.numIntersection=0,p}}function Mg(w){let t=new WeakMap;function r(a,s){return s===yo?a.mapping=Oi:s===ba&&(a.mapping=ki),a}function e(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const s=a.mapping;if(s===yo||s===ba)if(t.has(a)){const n=t.get(a).texture;return r(n,a.mapping)}else{const n=a.image;if(n&&n.height>0){const l=new Nf(n.height/2);return l.fromEquirectangularTexture(w,a),t.set(a,l),a.addEventListener("dispose",d),r(l.texture,a.mapping)}else return null}}return a}function d(a){const s=a.target;s.removeEventListener("dispose",d);const n=t.get(s);n!==void 0&&(t.delete(s),n.dispose())}function f(){t=new WeakMap}return{get:e,dispose:f}}class Ga extends rd{constructor(t=-1,r=1,e=1,d=-1,f=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=e,this.bottom=d,this.near=f,this.far=a,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,r,e,d,f,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=e,this.view.offsetY=d,this.view.width=f,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),e=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let f=e-t,a=e+t,s=d+r,n=d-r;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=l*this.view.offsetX,a=f+l*this.view.width,s-=h*this.view.offsetY,n=s-h*this.view.height}this.projectionMatrix.makeOrthographic(f,a,s,n,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}const Ri=4,jc=[.125,.215,.35,.446,.526,.582],Xn=20,ia=new Ga,Ac=new jt;let sa=null;const qn=(1+Math.sqrt(5))/2,Ai=1/qn,Cc=[new Re(1,1,1),new Re(-1,1,1),new Re(1,1,-1),new Re(-1,1,-1),new Re(0,qn,Ai),new Re(0,qn,-Ai),new Re(Ai,0,qn),new Re(-Ai,0,qn),new Re(qn,Ai,0),new Re(-qn,Ai,0)];class Lc{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,e=.1,d=100){sa=this._renderer.getRenderTarget(),this._setSize(256);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(t,e,d,f),r>0&&this._blur(f,0,0,r),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Dc(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Pc(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(sa),t.scissorTest=!1,to(t,0,0,t.width,t.height)}_fromTexture(t,r){t.mapping===Oi||t.mapping===ki?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),sa=this._renderer.getRenderTarget();const e=r||this._allocateTargets();return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,e={magFilter:dr,minFilter:dr,generateMipmaps:!1,type:Mn,format:Gr,encoding:Gn,depthBuffer:!1},d=Rc(t,r,e);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Rc(t,r,e);const{_lodMax:f}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Tg(f)),this._blurMaterial=Eg(f,t,r)}return d}_compileMaterial(t){const r=new Vr(this._lodPlanes[0],t);this._renderer.compile(r,ia)}_sceneToCubeUV(t,r,e,d){const s=new Dr(90,1,r,e),n=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],h=this._renderer,m=h.autoClear,i=h.toneMapping;h.getClearColor(Ac),h.toneMapping=ln,h.autoClear=!1;const o=new Kn({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1}),c=new Vr(new js,o);let u=!1;const p=t.background;p?p.isColor&&(o.color.copy(p),t.background=null,u=!0):(o.color.copy(Ac),u=!0);for(let g=0;g<6;g++){const v=g%3;v===0?(s.up.set(0,n[g],0),s.lookAt(l[g],0,0)):v===1?(s.up.set(0,0,n[g]),s.lookAt(0,l[g],0)):(s.up.set(0,n[g],0),s.lookAt(0,0,l[g]));const b=this._cubeSize;to(d,v*b,g>2?b:0,b,b),h.setRenderTarget(d),u&&h.render(c,s),h.render(t,s)}c.geometry.dispose(),c.material.dispose(),h.toneMapping=i,h.autoClear=m,t.background=p}_textureToCubeUV(t,r){const e=this._renderer,d=t.mapping===Oi||t.mapping===ki;d?(this._cubemapMaterial===null&&(this._cubemapMaterial=Dc()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Pc());const f=d?this._cubemapMaterial:this._equirectMaterial,a=new Vr(this._lodPlanes[0],f),s=f.uniforms;s.envMap.value=t;const n=this._cubeSize;to(r,0,0,3*n,2*n),e.setRenderTarget(r),e.render(a,ia)}_applyPMREM(t){const r=this._renderer,e=r.autoClear;r.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const f=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]),a=Cc[(d-1)%Cc.length];this._blur(t,d-1,d,f,a)}r.autoClear=e}_blur(t,r,e,d,f){const a=this._pingPongRenderTarget;this._halfBlur(t,a,r,e,d,"latitudinal",f),this._halfBlur(a,t,e,e,d,"longitudinal",f)}_halfBlur(t,r,e,d,f,a,s){const n=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,m=new Vr(this._lodPlanes[d],l),i=l.uniforms,o=this._sizeLods[e]-1,c=isFinite(f)?Math.PI/(2*o):2*Math.PI/(2*Xn-1),u=f/c,p=isFinite(f)?1+Math.floor(h*u):Xn;p>Xn&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Xn}`);const g=[];let v=0;for(let E=0;E<Xn;++E){const T=E/u,C=Math.exp(-T*T/2);g.push(C),E===0?v+=C:E<p&&(v+=2*C)}for(let E=0;E<g.length;E++)g[E]=g[E]/v;i.envMap.value=t.texture,i.samples.value=p,i.weights.value=g,i.latitudinal.value=a==="latitudinal",s&&(i.poleAxis.value=s);const{_lodMax:b}=this;i.dTheta.value=c,i.mipInt.value=b-e;const _=this._sizeLods[d],x=3*_*(d>b-Ri?d-b+Ri:0),A=4*(this._cubeSize-_);to(r,x,A,3*_,2*_),n.setRenderTarget(r),n.render(m,ia)}}function Tg(w){const t=[],r=[],e=[];let d=w;const f=w-Ri+1+jc.length;for(let a=0;a<f;a++){const s=Math.pow(2,d);r.push(s);let n=1/s;a>w-Ri?n=jc[a-w+Ri-1]:a===0&&(n=0),e.push(n);const l=1/(s-2),h=-l,m=1+l,i=[h,h,m,h,m,m,h,h,m,m,h,m],o=6,c=6,u=3,p=2,g=1,v=new Float32Array(u*c*o),b=new Float32Array(p*c*o),_=new Float32Array(g*c*o);for(let A=0;A<o;A++){const E=A%3*2/3-1,T=A>2?0:-1,C=[E,T,0,E+2/3,T,0,E+2/3,T+1,0,E,T,0,E+2/3,T+1,0,E,T+1,0];v.set(C,u*c*A),b.set(i,p*c*A);const R=[A,A,A,A,A,A];_.set(R,g*c*A)}const x=new en;x.setAttribute("position",new Ir(v,u)),x.setAttribute("uv",new Ir(b,p)),x.setAttribute("faceIndex",new Ir(_,g)),t.push(x),d>Ri&&d--}return{lodPlanes:t,sizeLods:r,sigmas:e}}function Rc(w,t,r){const e=new ri(w,t,r);return e.texture.mapping=xo,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function to(w,t,r,e,d){w.viewport.set(t,r,e,d),w.scissor.set(t,r,e,d)}function Eg(w,t,r){const e=new Float32Array(Xn),d=new Re(0,1,0);return new ni({name:"SphericalGaussianBlur",defines:{n:Xn,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${w}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:za(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Un,depthTest:!1,depthWrite:!1})}function Pc(){return new ni({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:za(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Un,depthTest:!1,depthWrite:!1})}function Dc(){return new ni({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:za(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Un,depthTest:!1,depthWrite:!1})}function za(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jg(w){let t=new WeakMap,r=null;function e(s){if(s&&s.isTexture){const n=s.mapping,l=n===yo||n===ba,h=n===Oi||n===ki;if(l||h)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let m=t.get(s);return r===null&&(r=new Lc(w)),m=l?r.fromEquirectangular(s,m):r.fromCubemap(s,m),t.set(s,m),m.texture}else{if(t.has(s))return t.get(s).texture;{const m=s.image;if(l&&m&&m.height>0||h&&m&&d(m)){r===null&&(r=new Lc(w));const i=l?r.fromEquirectangular(s):r.fromCubemap(s);return t.set(s,i),s.addEventListener("dispose",f),i.texture}else return null}}}return s}function d(s){let n=0;const l=6;for(let h=0;h<l;h++)s[h]!==void 0&&n++;return n===l}function f(s){const n=s.target;n.removeEventListener("dispose",f);const l=t.get(n);l!==void 0&&(t.delete(n),l.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:e,dispose:a}}function Ag(w){const t={};function r(e){if(t[e]!==void 0)return t[e];let d;switch(e){case"WEBGL_depth_texture":d=w.getExtension("WEBGL_depth_texture")||w.getExtension("MOZ_WEBGL_depth_texture")||w.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=w.getExtension("EXT_texture_filter_anisotropic")||w.getExtension("MOZ_EXT_texture_filter_anisotropic")||w.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=w.getExtension("WEBGL_compressed_texture_s3tc")||w.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||w.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=w.getExtension("WEBGL_compressed_texture_pvrtc")||w.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=w.getExtension(e)}return t[e]=d,d}return{has:function(e){return r(e)!==null},init:function(e){e.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(e){const d=r(e);return d===null&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),d}}}function Cg(w,t,r,e){const d={},f=new WeakMap;function a(m){const i=m.target;i.index!==null&&t.remove(i.index);for(const c in i.attributes)t.remove(i.attributes[c]);i.removeEventListener("dispose",a),delete d[i.id];const o=f.get(i);o&&(t.remove(o),f.delete(i)),e.releaseStatesOfGeometry(i),i.isInstancedBufferGeometry===!0&&delete i._maxInstanceCount,r.memory.geometries--}function s(m,i){return d[i.id]===!0||(i.addEventListener("dispose",a),d[i.id]=!0,r.memory.geometries++),i}function n(m){const i=m.attributes;for(const c in i)t.update(i[c],34962);const o=m.morphAttributes;for(const c in o){const u=o[c];for(let p=0,g=u.length;p<g;p++)t.update(u[p],34962)}}function l(m){const i=[],o=m.index,c=m.attributes.position;let u=0;if(o!==null){const v=o.array;u=o.version;for(let b=0,_=v.length;b<_;b+=3){const x=v[b+0],A=v[b+1],E=v[b+2];i.push(x,A,A,E,E,x)}}else{const v=c.array;u=c.version;for(let b=0,_=v.length/3-1;b<_;b+=3){const x=b+0,A=b+1,E=b+2;i.push(x,A,A,E,E,x)}}const p=new(Xu(i)?ed:$u)(i,1);p.version=u;const g=f.get(m);g&&t.remove(g),f.set(m,p)}function h(m){const i=f.get(m);if(i){const o=m.index;o!==null&&i.version<o.version&&l(m)}else l(m);return f.get(m)}return{get:s,update:n,getWireframeAttribute:h}}function Lg(w,t,r,e){const d=e.isWebGL2;let f;function a(i){f=i}let s,n;function l(i){s=i.type,n=i.bytesPerElement}function h(i,o){w.drawElements(f,o,s,i*n),r.update(o,f,1)}function m(i,o,c){if(c===0)return;let u,p;if(d)u=w,p="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",u===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}u[p](f,o,s,i*n,c),r.update(o,f,c)}this.setMode=a,this.setIndex=l,this.render=h,this.renderInstances=m}function Rg(w){const t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function e(f,a,s){switch(r.calls++,a){case 4:r.triangles+=s*(f/3);break;case 1:r.lines+=s*(f/2);break;case 3:r.lines+=s*(f-1);break;case 2:r.lines+=s*f;break;case 0:r.points+=s*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function d(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:d,update:e}}function Pg(w,t){return w[0]-t[0]}function Dg(w,t){return Math.abs(t[1])-Math.abs(w[1])}function Ig(w,t,r){const e={},d=new Float32Array(8),f=new WeakMap,a=new zt,s=[];for(let l=0;l<8;l++)s[l]=[l,0];function n(l,h,m,i){const o=l.morphTargetInfluences;if(t.isWebGL2===!0){const u=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,p=u!==void 0?u.length:0;let g=f.get(h);if(g===void 0||g.count!==p){let Y=function(){I.dispose(),f.delete(h),h.removeEventListener("dispose",Y)};var c=Y;g!==void 0&&g.texture.dispose();const _=h.morphAttributes.position!==void 0,x=h.morphAttributes.normal!==void 0,A=h.morphAttributes.color!==void 0,E=h.morphAttributes.position||[],T=h.morphAttributes.normal||[],C=h.morphAttributes.color||[];let R=0;_===!0&&(R=1),x===!0&&(R=2),A===!0&&(R=3);let P=h.attributes.position.count*R,N=1;P>t.maxTextureSize&&(N=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const k=new Float32Array(P*N*4*p),I=new Ju(k,P,N,p);I.type=Jr,I.needsUpdate=!0;const B=R*4;for(let W=0;W<p;W++){const H=E[W],X=T[W],Z=C[W],q=P*N*4*W;for(let ee=0;ee<H.count;ee++){const L=ee*B;_===!0&&(a.fromBufferAttribute(H,ee),k[q+L+0]=a.x,k[q+L+1]=a.y,k[q+L+2]=a.z,k[q+L+3]=0),x===!0&&(a.fromBufferAttribute(X,ee),k[q+L+4]=a.x,k[q+L+5]=a.y,k[q+L+6]=a.z,k[q+L+7]=0),A===!0&&(a.fromBufferAttribute(Z,ee),k[q+L+8]=a.x,k[q+L+9]=a.y,k[q+L+10]=a.z,k[q+L+11]=Z.itemSize===4?a.w:1)}}g={count:p,texture:I,size:new _t(P,N)},f.set(h,g),h.addEventListener("dispose",Y)}let v=0;for(let _=0;_<o.length;_++)v+=o[_];const b=h.morphTargetsRelative?1:1-v;i.getUniforms().setValue(w,"morphTargetBaseInfluence",b),i.getUniforms().setValue(w,"morphTargetInfluences",o),i.getUniforms().setValue(w,"morphTargetsTexture",g.texture,r),i.getUniforms().setValue(w,"morphTargetsTextureSize",g.size)}else{const u=o===void 0?0:o.length;let p=e[h.id];if(p===void 0||p.length!==u){p=[];for(let x=0;x<u;x++)p[x]=[x,0];e[h.id]=p}for(let x=0;x<u;x++){const A=p[x];A[0]=x,A[1]=o[x]}p.sort(Dg);for(let x=0;x<8;x++)x<u&&p[x][1]?(s[x][0]=p[x][0],s[x][1]=p[x][1]):(s[x][0]=Number.MAX_SAFE_INTEGER,s[x][1]=0);s.sort(Pg);const g=h.morphAttributes.position,v=h.morphAttributes.normal;let b=0;for(let x=0;x<8;x++){const A=s[x],E=A[0],T=A[1];E!==Number.MAX_SAFE_INTEGER&&T?(g&&h.getAttribute("morphTarget"+x)!==g[E]&&h.setAttribute("morphTarget"+x,g[E]),v&&h.getAttribute("morphNormal"+x)!==v[E]&&h.setAttribute("morphNormal"+x,v[E]),d[x]=T,b+=T):(g&&h.hasAttribute("morphTarget"+x)===!0&&h.deleteAttribute("morphTarget"+x),v&&h.hasAttribute("morphNormal"+x)===!0&&h.deleteAttribute("morphNormal"+x),d[x]=0)}const _=h.morphTargetsRelative?1:1-b;i.getUniforms().setValue(w,"morphTargetBaseInfluence",_),i.getUniforms().setValue(w,"morphTargetInfluences",d)}}return{update:n}}function Og(w,t,r,e){let d=new WeakMap;function f(n){const l=e.render.frame,h=n.geometry,m=t.get(n,h);return d.get(m)!==l&&(t.update(m),d.set(m,l)),n.isInstancedMesh&&(n.hasEventListener("dispose",s)===!1&&n.addEventListener("dispose",s),r.update(n.instanceMatrix,34962),n.instanceColor!==null&&r.update(n.instanceColor,34962)),m}function a(){d=new WeakMap}function s(n){const l=n.target;l.removeEventListener("dispose",s),r.remove(l.instanceMatrix),l.instanceColor!==null&&r.remove(l.instanceColor)}return{update:f,dispose:a}}const sd=new wr,od=new Ju,ad=new xf,ld=new nd,Ic=[],Oc=[],kc=new Float32Array(16),Nc=new Float32Array(9),Uc=new Float32Array(4);function Xi(w,t,r){const e=w[0];if(e<=0||e>0)return w;const d=t*r;let f=Ic[d];if(f===void 0&&(f=new Float32Array(d),Ic[d]=f),t!==0){e.toArray(f,0);for(let a=1,s=0;a!==t;++a)s+=r,w[a].toArray(f,s)}return f}function hr(w,t){if(w.length!==t.length)return!1;for(let r=0,e=w.length;r<e;r++)if(w[r]!==t[r])return!1;return!0}function fr(w,t){for(let r=0,e=t.length;r<e;r++)w[r]=t[r]}function wo(w,t){let r=Oc[t];r===void 0&&(r=new Int32Array(t),Oc[t]=r);for(let e=0;e!==t;++e)r[e]=w.allocateTextureUnit();return r}function kg(w,t){const r=this.cache;r[0]!==t&&(w.uniform1f(this.addr,t),r[0]=t)}function Ng(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(w.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(hr(r,t))return;w.uniform2fv(this.addr,t),fr(r,t)}}function Ug(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(w.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(w.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(hr(r,t))return;w.uniform3fv(this.addr,t),fr(r,t)}}function Fg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(w.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(hr(r,t))return;w.uniform4fv(this.addr,t),fr(r,t)}}function Bg(w,t){const r=this.cache,e=t.elements;if(e===void 0){if(hr(r,t))return;w.uniformMatrix2fv(this.addr,!1,t),fr(r,t)}else{if(hr(r,e))return;Uc.set(e),w.uniformMatrix2fv(this.addr,!1,Uc),fr(r,e)}}function Gg(w,t){const r=this.cache,e=t.elements;if(e===void 0){if(hr(r,t))return;w.uniformMatrix3fv(this.addr,!1,t),fr(r,t)}else{if(hr(r,e))return;Nc.set(e),w.uniformMatrix3fv(this.addr,!1,Nc),fr(r,e)}}function zg(w,t){const r=this.cache,e=t.elements;if(e===void 0){if(hr(r,t))return;w.uniformMatrix4fv(this.addr,!1,t),fr(r,t)}else{if(hr(r,e))return;kc.set(e),w.uniformMatrix4fv(this.addr,!1,kc),fr(r,e)}}function Vg(w,t){const r=this.cache;r[0]!==t&&(w.uniform1i(this.addr,t),r[0]=t)}function Hg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(w.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(hr(r,t))return;w.uniform2iv(this.addr,t),fr(r,t)}}function Wg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(w.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(hr(r,t))return;w.uniform3iv(this.addr,t),fr(r,t)}}function qg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(w.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(hr(r,t))return;w.uniform4iv(this.addr,t),fr(r,t)}}function Xg(w,t){const r=this.cache;r[0]!==t&&(w.uniform1ui(this.addr,t),r[0]=t)}function Yg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(w.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(hr(r,t))return;w.uniform2uiv(this.addr,t),fr(r,t)}}function Zg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(w.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(hr(r,t))return;w.uniform3uiv(this.addr,t),fr(r,t)}}function Kg(w,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(w.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(hr(r,t))return;w.uniform4uiv(this.addr,t),fr(r,t)}}function Jg(w,t,r){const e=this.cache,d=r.allocateTextureUnit();e[0]!==d&&(w.uniform1i(this.addr,d),e[0]=d),r.setTexture2D(t||sd,d)}function Qg(w,t,r){const e=this.cache,d=r.allocateTextureUnit();e[0]!==d&&(w.uniform1i(this.addr,d),e[0]=d),r.setTexture3D(t||ad,d)}function $g(w,t,r){const e=this.cache,d=r.allocateTextureUnit();e[0]!==d&&(w.uniform1i(this.addr,d),e[0]=d),r.setTextureCube(t||ld,d)}function ey(w,t,r){const e=this.cache,d=r.allocateTextureUnit();e[0]!==d&&(w.uniform1i(this.addr,d),e[0]=d),r.setTexture2DArray(t||od,d)}function ty(w){switch(w){case 5126:return kg;case 35664:return Ng;case 35665:return Ug;case 35666:return Fg;case 35674:return Bg;case 35675:return Gg;case 35676:return zg;case 5124:case 35670:return Vg;case 35667:case 35671:return Hg;case 35668:case 35672:return Wg;case 35669:case 35673:return qg;case 5125:return Xg;case 36294:return Yg;case 36295:return Zg;case 36296:return Kg;case 35678:case 36198:case 36298:case 36306:case 35682:return Jg;case 35679:case 36299:case 36307:return Qg;case 35680:case 36300:case 36308:case 36293:return $g;case 36289:case 36303:case 36311:case 36292:return ey}}function ry(w,t){w.uniform1fv(this.addr,t)}function ny(w,t){const r=Xi(t,this.size,2);w.uniform2fv(this.addr,r)}function iy(w,t){const r=Xi(t,this.size,3);w.uniform3fv(this.addr,r)}function sy(w,t){const r=Xi(t,this.size,4);w.uniform4fv(this.addr,r)}function oy(w,t){const r=Xi(t,this.size,4);w.uniformMatrix2fv(this.addr,!1,r)}function ay(w,t){const r=Xi(t,this.size,9);w.uniformMatrix3fv(this.addr,!1,r)}function ly(w,t){const r=Xi(t,this.size,16);w.uniformMatrix4fv(this.addr,!1,r)}function cy(w,t){w.uniform1iv(this.addr,t)}function uy(w,t){w.uniform2iv(this.addr,t)}function dy(w,t){w.uniform3iv(this.addr,t)}function hy(w,t){w.uniform4iv(this.addr,t)}function fy(w,t){w.uniform1uiv(this.addr,t)}function py(w,t){w.uniform2uiv(this.addr,t)}function my(w,t){w.uniform3uiv(this.addr,t)}function gy(w,t){w.uniform4uiv(this.addr,t)}function yy(w,t,r){const e=this.cache,d=t.length,f=wo(r,d);hr(e,f)||(w.uniform1iv(this.addr,f),fr(e,f));for(let a=0;a!==d;++a)r.setTexture2D(t[a]||sd,f[a])}function vy(w,t,r){const e=this.cache,d=t.length,f=wo(r,d);hr(e,f)||(w.uniform1iv(this.addr,f),fr(e,f));for(let a=0;a!==d;++a)r.setTexture3D(t[a]||ad,f[a])}function by(w,t,r){const e=this.cache,d=t.length,f=wo(r,d);hr(e,f)||(w.uniform1iv(this.addr,f),fr(e,f));for(let a=0;a!==d;++a)r.setTextureCube(t[a]||ld,f[a])}function _y(w,t,r){const e=this.cache,d=t.length,f=wo(r,d);hr(e,f)||(w.uniform1iv(this.addr,f),fr(e,f));for(let a=0;a!==d;++a)r.setTexture2DArray(t[a]||od,f[a])}function xy(w){switch(w){case 5126:return ry;case 35664:return ny;case 35665:return iy;case 35666:return sy;case 35674:return oy;case 35675:return ay;case 35676:return ly;case 5124:case 35670:return cy;case 35667:case 35671:return uy;case 35668:case 35672:return dy;case 35669:case 35673:return hy;case 5125:return fy;case 36294:return py;case 36295:return my;case 36296:return gy;case 35678:case 36198:case 36298:case 36306:case 35682:return yy;case 35679:case 36299:case 36307:return vy;case 35680:case 36300:case 36308:case 36293:return by;case 36289:case 36303:case 36311:case 36292:return _y}}class wy{constructor(t,r,e){this.id=t,this.addr=e,this.cache=[],this.setValue=ty(r.type)}}class Sy{constructor(t,r,e){this.id=t,this.addr=e,this.cache=[],this.size=r.size,this.setValue=xy(r.type)}}class My{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,e){const d=this.seq;for(let f=0,a=d.length;f!==a;++f){const s=d[f];s.setValue(t,r[s.id],e)}}}const oa=/(\w+)(\])?(\[|\.)?/g;function Fc(w,t){w.seq.push(t),w.map[t.id]=t}function Ty(w,t,r){const e=w.name,d=e.length;for(oa.lastIndex=0;;){const f=oa.exec(e),a=oa.lastIndex;let s=f[1];const n=f[2]==="]",l=f[3];if(n&&(s=s|0),l===void 0||l==="["&&a+2===d){Fc(r,l===void 0?new wy(s,w,t):new Sy(s,w,t));break}else{let m=r.map[s];m===void 0&&(m=new My(s),Fc(r,m)),r=m}}}class fo{constructor(t,r){this.seq=[],this.map={};const e=t.getProgramParameter(r,35718);for(let d=0;d<e;++d){const f=t.getActiveUniform(r,d),a=t.getUniformLocation(r,f.name);Ty(f,a,this)}}setValue(t,r,e,d){const f=this.map[r];f!==void 0&&f.setValue(t,e,d)}setOptional(t,r,e){const d=r[e];d!==void 0&&this.setValue(t,e,d)}static upload(t,r,e,d){for(let f=0,a=r.length;f!==a;++f){const s=r[f],n=e[s.id];n.needsUpdate!==!1&&s.setValue(t,n.value,d)}}static seqWithValue(t,r){const e=[];for(let d=0,f=t.length;d!==f;++d){const a=t[d];a.id in r&&e.push(a)}return e}}function Bc(w,t,r){const e=w.createShader(t);return w.shaderSource(e,r),w.compileShader(e),e}let Ey=0;function jy(w,t){const r=w.split(`
`),e=[],d=Math.max(t-6,0),f=Math.min(t+6,r.length);for(let a=d;a<f;a++){const s=a+1;e.push(`${s===t?">":" "} ${s}: ${r[a]}`)}return e.join(`
`)}function Ay(w){switch(w){case Gn:return["Linear","( value )"];case Pt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",w),["Linear","( value )"]}}function Gc(w,t,r){const e=w.getShaderParameter(t,35713),d=w.getShaderInfoLog(t).trim();if(e&&d==="")return"";const f=/ERROR: 0:(\d+)/.exec(d);if(f){const a=parseInt(f[1]);return r.toUpperCase()+`

`+d+`

`+jy(w.getShaderSource(t),a)}else return d}function Cy(w,t){const r=Ay(t);return"vec4 "+w+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Ly(w,t){let r;switch(t){case Dh:r="Linear";break;case Ih:r="Reinhard";break;case Oh:r="OptimizedCineon";break;case kh:r="ACESFilmic";break;case Nh:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+w+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ry(w){return[w.extensionDerivatives||w.envMapCubeUVHeight||w.bumpMap||w.tangentSpaceNormalMap||w.clearcoatNormalMap||w.flatShading||w.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(w.extensionFragDepth||w.logarithmicDepthBuffer)&&w.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",w.extensionDrawBuffers&&w.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(w.extensionShaderTextureLOD||w.envMap||w.transmission)&&w.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ps).join(`
`)}function Py(w){const t=[];for(const r in w){const e=w[r];e!==!1&&t.push("#define "+r+" "+e)}return t.join(`
`)}function Dy(w,t){const r={},e=w.getProgramParameter(t,35721);for(let d=0;d<e;d++){const f=w.getActiveAttrib(t,d),a=f.name;let s=1;f.type===35674&&(s=2),f.type===35675&&(s=3),f.type===35676&&(s=4),r[a]={type:f.type,location:w.getAttribLocation(t,a),locationSize:s}}return r}function ps(w){return w!==""}function zc(w,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return w.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Vc(w,t){return w.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Iy=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ma(w){return w.replace(Iy,Oy)}function Oy(w,t){const r=Tt[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return Ma(r)}const ky=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hc(w){return w.replace(ky,Ny)}function Ny(w,t,r,e){let d="";for(let f=parseInt(t);f<parseInt(r);f++)d+=e.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return d}function Wc(w){let t="precision "+w.precision+` float;
precision `+w.precision+" int;";return w.precision==="highp"?t+=`
#define HIGH_PRECISION`:w.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:w.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Uy(w){let t="SHADOWMAP_TYPE_BASIC";return w.shadowMapType===Oa?t="SHADOWMAP_TYPE_PCF":w.shadowMapType===dh?t="SHADOWMAP_TYPE_PCF_SOFT":w.shadowMapType===fs&&(t="SHADOWMAP_TYPE_VSM"),t}function Fy(w){let t="ENVMAP_TYPE_CUBE";if(w.envMap)switch(w.envMapMode){case Oi:case ki:t="ENVMAP_TYPE_CUBE";break;case xo:t="ENVMAP_TYPE_CUBE_UV";break}return t}function By(w){let t="ENVMAP_MODE_REFLECTION";if(w.envMap)switch(w.envMapMode){case ki:t="ENVMAP_MODE_REFRACTION";break}return t}function Gy(w){let t="ENVMAP_BLENDING_NONE";if(w.envMap)switch(w.combine){case Gu:t="ENVMAP_BLENDING_MULTIPLY";break;case Rh:t="ENVMAP_BLENDING_MIX";break;case Ph:t="ENVMAP_BLENDING_ADD";break}return t}function zy(w){const t=w.envMapCubeUVHeight;if(t===null)return null;const r=Math.log2(t)-2,e=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:e,maxMip:r}}function Vy(w,t,r,e){const d=w.getContext(),f=r.defines;let a=r.vertexShader,s=r.fragmentShader;const n=Uy(r),l=Fy(r),h=By(r),m=Gy(r),i=zy(r),o=r.isWebGL2?"":Ry(r),c=Py(f),u=d.createProgram();let p,g,v=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(p=[c].filter(ps).join(`
`),p.length>0&&(p+=`
`),g=[o,c].filter(ps).join(`
`),g.length>0&&(g+=`
`)):(p=[Wc(r),"#define SHADER_NAME "+r.shaderName,c,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+n:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ps).join(`
`),g=[o,Wc(r),"#define SHADER_NAME "+r.shaderName,c,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.envMap?"#define "+h:"",r.envMap?"#define "+m:"",i?"#define CUBEUV_TEXEL_WIDTH "+i.texelWidth:"",i?"#define CUBEUV_TEXEL_HEIGHT "+i.texelHeight:"",i?"#define CUBEUV_MAX_MIP "+i.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+n:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==ln?"#define TONE_MAPPING":"",r.toneMapping!==ln?Tt.tonemapping_pars_fragment:"",r.toneMapping!==ln?Ly("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Tt.encodings_pars_fragment,Cy("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(ps).join(`
`)),a=Ma(a),a=zc(a,r),a=Vc(a,r),s=Ma(s),s=zc(s,r),s=Vc(s,r),a=Hc(a),s=Hc(s),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,p=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,g=["#define varying in",r.glslVersion===mc?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===mc?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const b=v+p+a,_=v+g+s,x=Bc(d,35633,b),A=Bc(d,35632,_);if(d.attachShader(u,x),d.attachShader(u,A),r.index0AttributeName!==void 0?d.bindAttribLocation(u,0,r.index0AttributeName):r.morphTargets===!0&&d.bindAttribLocation(u,0,"position"),d.linkProgram(u),w.debug.checkShaderErrors){const C=d.getProgramInfoLog(u).trim(),R=d.getShaderInfoLog(x).trim(),P=d.getShaderInfoLog(A).trim();let N=!0,k=!0;if(d.getProgramParameter(u,35714)===!1){N=!1;const I=Gc(d,x,"vertex"),B=Gc(d,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(u,35715)+`

Program Info Log: `+C+`
`+I+`
`+B)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(R===""||P==="")&&(k=!1);k&&(this.diagnostics={runnable:N,programLog:C,vertexShader:{log:R,prefix:p},fragmentShader:{log:P,prefix:g}})}d.deleteShader(x),d.deleteShader(A);let E;this.getUniforms=function(){return E===void 0&&(E=new fo(d,u)),E};let T;return this.getAttributes=function(){return T===void 0&&(T=Dy(d,u)),T},this.destroy=function(){e.releaseStatesOfProgram(this),d.deleteProgram(u),this.program=void 0},this.name=r.shaderName,this.id=Ey++,this.cacheKey=t,this.usedTimes=1,this.program=u,this.vertexShader=x,this.fragmentShader=A,this}let Hy=0;class Wy{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const r=t.vertexShader,e=t.fragmentShader,d=this._getShaderStage(r),f=this._getShaderStage(e),a=this._getShaderCacheForMaterial(t);return a.has(d)===!1&&(a.add(d),d.usedTimes++),a.has(f)===!1&&(a.add(f),f.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const e of r)e.usedTimes--,e.usedTimes===0&&this.shaderCache.delete(e.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let e=r.get(t);return e===void 0&&(e=new Set,r.set(t,e)),e}_getShaderStage(t){const r=this.shaderCache;let e=r.get(t);return e===void 0&&(e=new qy(t),r.set(t,e)),e}}class qy{constructor(t){this.id=Hy++,this.code=t,this.usedTimes=0}}function Xy(w,t,r,e,d,f,a){const s=new Qu,n=new Wy,l=[],h=d.isWebGL2,m=d.logarithmicDepthBuffer,i=d.vertexTextures;let o=d.precision;const c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function u(T,C,R,P,N){const k=P.fog,I=N.geometry,B=T.isMeshStandardMaterial?P.environment:null,Y=(T.isMeshStandardMaterial?r:t).get(T.envMap||B),W=Y&&Y.mapping===xo?Y.image.height:null,H=c[T.type];T.precision!==null&&(o=d.getMaxPrecision(T.precision),o!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",o,"instead."));const X=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,Z=X!==void 0?X.length:0;let q=0;I.morphAttributes.position!==void 0&&(q=1),I.morphAttributes.normal!==void 0&&(q=2),I.morphAttributes.color!==void 0&&(q=3);let ee,L,O,U;if(H){const re=on[H];ee=re.vertexShader,L=re.fragmentShader}else ee=T.vertexShader,L=T.fragmentShader,n.update(T),O=n.getVertexShaderID(T),U=n.getFragmentShaderID(T);const V=w.getRenderTarget(),J=T.alphaTest>0,le=T.clearcoat>0,ce=T.iridescence>0;return{isWebGL2:h,shaderID:H,shaderName:T.type,vertexShader:ee,fragmentShader:L,defines:T.defines,customVertexShaderID:O,customFragmentShaderID:U,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:o,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:i,outputEncoding:V===null?w.outputEncoding:V.isXRRenderTarget===!0?V.texture.encoding:Gn,map:!!T.map,matcap:!!T.matcap,envMap:!!Y,envMapMode:Y&&Y.mapping,envMapCubeUVHeight:W,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===nf,tangentSpaceNormalMap:T.normalMapType===ka,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===Pt,clearcoat:le,clearcoatMap:le&&!!T.clearcoatMap,clearcoatRoughnessMap:le&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:le&&!!T.clearcoatNormalMap,iridescence:ce,iridescenceMap:ce&&!!T.iridescenceMap,iridescenceThicknessMap:ce&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===Pi,alphaMap:!!T.alphaMap,alphaTest:J,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!I.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!k,useFog:T.fog===!0,fogExp2:k&&k.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:m,skinning:N.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:q,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:w.shadowMap.enabled&&R.length>0,shadowMapType:w.shadowMap.type,toneMapping:T.toneMapped?w.toneMapping:ln,physicallyCorrectLights:w.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===_o,flipSided:T.side===Hr,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||e.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||e.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||e.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function p(T){const C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.customVertexShaderID),C.push(T.customFragmentShaderID)),T.defines!==void 0)for(const R in T.defines)C.push(R),C.push(T.defines[R]);return T.isRawShaderMaterial===!1&&(g(C,T),v(C,T),C.push(w.outputEncoding)),C.push(T.customProgramCacheKey),C.join()}function g(T,C){T.push(C.precision),T.push(C.outputEncoding),T.push(C.envMapMode),T.push(C.envMapCubeUVHeight),T.push(C.combine),T.push(C.vertexUvs),T.push(C.fogExp2),T.push(C.sizeAttenuation),T.push(C.morphTargetsCount),T.push(C.morphAttributeCount),T.push(C.numDirLights),T.push(C.numPointLights),T.push(C.numSpotLights),T.push(C.numSpotLightMaps),T.push(C.numHemiLights),T.push(C.numRectAreaLights),T.push(C.numDirLightShadows),T.push(C.numPointLightShadows),T.push(C.numSpotLightShadows),T.push(C.numSpotLightShadowsWithMaps),T.push(C.shadowMapType),T.push(C.toneMapping),T.push(C.numClippingPlanes),T.push(C.numClipIntersection),T.push(C.depthPacking)}function v(T,C){s.disableAll(),C.isWebGL2&&s.enable(0),C.supportsVertexTextures&&s.enable(1),C.instancing&&s.enable(2),C.instancingColor&&s.enable(3),C.map&&s.enable(4),C.matcap&&s.enable(5),C.envMap&&s.enable(6),C.lightMap&&s.enable(7),C.aoMap&&s.enable(8),C.emissiveMap&&s.enable(9),C.bumpMap&&s.enable(10),C.normalMap&&s.enable(11),C.objectSpaceNormalMap&&s.enable(12),C.tangentSpaceNormalMap&&s.enable(13),C.clearcoat&&s.enable(14),C.clearcoatMap&&s.enable(15),C.clearcoatRoughnessMap&&s.enable(16),C.clearcoatNormalMap&&s.enable(17),C.iridescence&&s.enable(18),C.iridescenceMap&&s.enable(19),C.iridescenceThicknessMap&&s.enable(20),C.displacementMap&&s.enable(21),C.specularMap&&s.enable(22),C.roughnessMap&&s.enable(23),C.metalnessMap&&s.enable(24),C.gradientMap&&s.enable(25),C.alphaMap&&s.enable(26),C.alphaTest&&s.enable(27),C.vertexColors&&s.enable(28),C.vertexAlphas&&s.enable(29),C.vertexUvs&&s.enable(30),C.vertexTangents&&s.enable(31),C.uvsVertexOnly&&s.enable(32),T.push(s.mask),s.disableAll(),C.fog&&s.enable(0),C.useFog&&s.enable(1),C.flatShading&&s.enable(2),C.logarithmicDepthBuffer&&s.enable(3),C.skinning&&s.enable(4),C.morphTargets&&s.enable(5),C.morphNormals&&s.enable(6),C.morphColors&&s.enable(7),C.premultipliedAlpha&&s.enable(8),C.shadowMapEnabled&&s.enable(9),C.physicallyCorrectLights&&s.enable(10),C.doubleSided&&s.enable(11),C.flipSided&&s.enable(12),C.useDepthPacking&&s.enable(13),C.dithering&&s.enable(14),C.specularIntensityMap&&s.enable(15),C.specularColorMap&&s.enable(16),C.transmission&&s.enable(17),C.transmissionMap&&s.enable(18),C.thicknessMap&&s.enable(19),C.sheen&&s.enable(20),C.sheenColorMap&&s.enable(21),C.sheenRoughnessMap&&s.enable(22),C.decodeVideoTexture&&s.enable(23),C.opaque&&s.enable(24),T.push(s.mask)}function b(T){const C=c[T.type];let R;if(C){const P=on[C];R=Df.clone(P.uniforms)}else R=T.uniforms;return R}function _(T,C){let R;for(let P=0,N=l.length;P<N;P++){const k=l[P];if(k.cacheKey===C){R=k,++R.usedTimes;break}}return R===void 0&&(R=new Vy(w,C,T,f),l.push(R)),R}function x(T){if(--T.usedTimes===0){const C=l.indexOf(T);l[C]=l[l.length-1],l.pop(),T.destroy()}}function A(T){n.remove(T)}function E(){n.dispose()}return{getParameters:u,getProgramCacheKey:p,getUniforms:b,acquireProgram:_,releaseProgram:x,releaseShaderCache:A,programs:l,dispose:E}}function Yy(){let w=new WeakMap;function t(f){let a=w.get(f);return a===void 0&&(a={},w.set(f,a)),a}function r(f){w.delete(f)}function e(f,a,s){w.get(f)[a]=s}function d(){w=new WeakMap}return{get:t,remove:r,update:e,dispose:d}}function Zy(w,t){return w.groupOrder!==t.groupOrder?w.groupOrder-t.groupOrder:w.renderOrder!==t.renderOrder?w.renderOrder-t.renderOrder:w.material.id!==t.material.id?w.material.id-t.material.id:w.z!==t.z?w.z-t.z:w.id-t.id}function qc(w,t){return w.groupOrder!==t.groupOrder?w.groupOrder-t.groupOrder:w.renderOrder!==t.renderOrder?w.renderOrder-t.renderOrder:w.z!==t.z?t.z-w.z:w.id-t.id}function Xc(){const w=[];let t=0;const r=[],e=[],d=[];function f(){t=0,r.length=0,e.length=0,d.length=0}function a(m,i,o,c,u,p){let g=w[t];return g===void 0?(g={id:m.id,object:m,geometry:i,material:o,groupOrder:c,renderOrder:m.renderOrder,z:u,group:p},w[t]=g):(g.id=m.id,g.object=m,g.geometry=i,g.material=o,g.groupOrder=c,g.renderOrder=m.renderOrder,g.z=u,g.group=p),t++,g}function s(m,i,o,c,u,p){const g=a(m,i,o,c,u,p);o.transmission>0?e.push(g):o.transparent===!0?d.push(g):r.push(g)}function n(m,i,o,c,u,p){const g=a(m,i,o,c,u,p);o.transmission>0?e.unshift(g):o.transparent===!0?d.unshift(g):r.unshift(g)}function l(m,i){r.length>1&&r.sort(m||Zy),e.length>1&&e.sort(i||qc),d.length>1&&d.sort(i||qc)}function h(){for(let m=t,i=w.length;m<i;m++){const o=w[m];if(o.id===null)break;o.id=null,o.object=null,o.geometry=null,o.material=null,o.group=null}}return{opaque:r,transmissive:e,transparent:d,init:f,push:s,unshift:n,finish:h,sort:l}}function Ky(){let w=new WeakMap;function t(e,d){const f=w.get(e);let a;return f===void 0?(a=new Xc,w.set(e,[a])):d>=f.length?(a=new Xc,f.push(a)):a=f[d],a}function r(){w=new WeakMap}return{get:t,dispose:r}}function Jy(){const w={};return{get:function(t){if(w[t.id]!==void 0)return w[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new Re,color:new jt};break;case"SpotLight":r={position:new Re,direction:new Re,color:new jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Re,color:new jt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Re,skyColor:new jt,groundColor:new jt};break;case"RectAreaLight":r={color:new jt,position:new Re,halfWidth:new Re,halfHeight:new Re};break}return w[t.id]=r,r}}}function Qy(){const w={};return{get:function(t){if(w[t.id]!==void 0)return w[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3};break}return w[t.id]=r,r}}}let $y=0;function e0(w,t){return(t.castShadow?2:0)-(w.castShadow?2:0)+(t.map?1:0)-(w.map?1:0)}function t0(w,t){const r=new Jy,e=Qy(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)d.probe.push(new Re);const f=new Re,a=new At,s=new At;function n(h,m){let i=0,o=0,c=0;for(let P=0;P<9;P++)d.probe[P].set(0,0,0);let u=0,p=0,g=0,v=0,b=0,_=0,x=0,A=0,E=0,T=0;h.sort(e0);const C=m!==!0?Math.PI:1;for(let P=0,N=h.length;P<N;P++){const k=h[P],I=k.color,B=k.intensity,Y=k.distance,W=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)i+=I.r*B*C,o+=I.g*B*C,c+=I.b*B*C;else if(k.isLightProbe)for(let H=0;H<9;H++)d.probe[H].addScaledVector(k.sh.coefficients[H],B);else if(k.isDirectionalLight){const H=r.get(k);if(H.color.copy(k.color).multiplyScalar(k.intensity*C),k.castShadow){const X=k.shadow,Z=e.get(k);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,d.directionalShadow[u]=Z,d.directionalShadowMap[u]=W,d.directionalShadowMatrix[u]=k.shadow.matrix,_++}d.directional[u]=H,u++}else if(k.isSpotLight){const H=r.get(k);H.position.setFromMatrixPosition(k.matrixWorld),H.color.copy(I).multiplyScalar(B*C),H.distance=Y,H.coneCos=Math.cos(k.angle),H.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),H.decay=k.decay,d.spot[g]=H;const X=k.shadow;if(k.map&&(d.spotLightMap[E]=k.map,E++,X.updateMatrices(k),k.castShadow&&T++),d.spotLightMatrix[g]=X.matrix,k.castShadow){const Z=e.get(k);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,d.spotShadow[g]=Z,d.spotShadowMap[g]=W,A++}g++}else if(k.isRectAreaLight){const H=r.get(k);H.color.copy(I).multiplyScalar(B),H.halfWidth.set(k.width*.5,0,0),H.halfHeight.set(0,k.height*.5,0),d.rectArea[v]=H,v++}else if(k.isPointLight){const H=r.get(k);if(H.color.copy(k.color).multiplyScalar(k.intensity*C),H.distance=k.distance,H.decay=k.decay,k.castShadow){const X=k.shadow,Z=e.get(k);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,Z.shadowCameraNear=X.camera.near,Z.shadowCameraFar=X.camera.far,d.pointShadow[p]=Z,d.pointShadowMap[p]=W,d.pointShadowMatrix[p]=k.shadow.matrix,x++}d.point[p]=H,p++}else if(k.isHemisphereLight){const H=r.get(k);H.skyColor.copy(k.color).multiplyScalar(B*C),H.groundColor.copy(k.groundColor).multiplyScalar(B*C),d.hemi[b]=H,b++}}v>0&&(t.isWebGL2||w.has("OES_texture_float_linear")===!0?(d.rectAreaLTC1=ot.LTC_FLOAT_1,d.rectAreaLTC2=ot.LTC_FLOAT_2):w.has("OES_texture_half_float_linear")===!0?(d.rectAreaLTC1=ot.LTC_HALF_1,d.rectAreaLTC2=ot.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=i,d.ambient[1]=o,d.ambient[2]=c;const R=d.hash;(R.directionalLength!==u||R.pointLength!==p||R.spotLength!==g||R.rectAreaLength!==v||R.hemiLength!==b||R.numDirectionalShadows!==_||R.numPointShadows!==x||R.numSpotShadows!==A||R.numSpotMaps!==E)&&(d.directional.length=u,d.spot.length=g,d.rectArea.length=v,d.point.length=p,d.hemi.length=b,d.directionalShadow.length=_,d.directionalShadowMap.length=_,d.pointShadow.length=x,d.pointShadowMap.length=x,d.spotShadow.length=A,d.spotShadowMap.length=A,d.directionalShadowMatrix.length=_,d.pointShadowMatrix.length=x,d.spotLightMatrix.length=A+E-T,d.spotLightMap.length=E,d.numSpotLightShadowsWithMaps=T,R.directionalLength=u,R.pointLength=p,R.spotLength=g,R.rectAreaLength=v,R.hemiLength=b,R.numDirectionalShadows=_,R.numPointShadows=x,R.numSpotShadows=A,R.numSpotMaps=E,d.version=$y++)}function l(h,m){let i=0,o=0,c=0,u=0,p=0;const g=m.matrixWorldInverse;for(let v=0,b=h.length;v<b;v++){const _=h[v];if(_.isDirectionalLight){const x=d.directional[i];x.direction.setFromMatrixPosition(_.matrixWorld),f.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(f),x.direction.transformDirection(g),i++}else if(_.isSpotLight){const x=d.spot[c];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(_.matrixWorld),f.setFromMatrixPosition(_.target.matrixWorld),x.direction.sub(f),x.direction.transformDirection(g),c++}else if(_.isRectAreaLight){const x=d.rectArea[u];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(g),s.identity(),a.copy(_.matrixWorld),a.premultiply(g),s.extractRotation(a),x.halfWidth.set(_.width*.5,0,0),x.halfHeight.set(0,_.height*.5,0),x.halfWidth.applyMatrix4(s),x.halfHeight.applyMatrix4(s),u++}else if(_.isPointLight){const x=d.point[o];x.position.setFromMatrixPosition(_.matrixWorld),x.position.applyMatrix4(g),o++}else if(_.isHemisphereLight){const x=d.hemi[p];x.direction.setFromMatrixPosition(_.matrixWorld),x.direction.transformDirection(g),p++}}}return{setup:n,setupView:l,state:d}}function Yc(w,t){const r=new t0(w,t),e=[],d=[];function f(){e.length=0,d.length=0}function a(m){e.push(m)}function s(m){d.push(m)}function n(m){r.setup(e,m)}function l(m){r.setupView(e,m)}return{init:f,state:{lightsArray:e,shadowsArray:d,lights:r},setupLights:n,setupLightsView:l,pushLight:a,pushShadow:s}}function r0(w,t){let r=new WeakMap;function e(f,a=0){const s=r.get(f);let n;return s===void 0?(n=new Yc(w,t),r.set(f,[n])):a>=s.length?(n=new Yc(w,t),s.push(n)):n=s[a],n}function d(){r=new WeakMap}return{get:e,dispose:d}}class n0 extends $r{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class i0 extends $r{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const s0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,o0=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function a0(w,t,r){let e=new Fa;const d=new _t,f=new _t,a=new zt,s=new n0({depthPacking:rf}),n=new i0,l={},h=r.maxTextureSize,m={0:Hr,1:Fn,2:_o},i=new ni({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _t},radius:{value:4}},vertexShader:s0,fragmentShader:o0}),o=i.clone();o.defines.HORIZONTAL_PASS=1;const c=new en;c.setAttribute("position",new Ir(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const u=new Vr(c,i),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Oa,this.render=function(_,x,A){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||_.length===0)return;const E=w.getRenderTarget(),T=w.getActiveCubeFace(),C=w.getActiveMipmapLevel(),R=w.state;R.setBlending(Un),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let P=0,N=_.length;P<N;P++){const k=_[P],I=k.shadow;if(I===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(I.autoUpdate===!1&&I.needsUpdate===!1)continue;d.copy(I.mapSize);const B=I.getFrameExtents();if(d.multiply(B),f.copy(I.mapSize),(d.x>h||d.y>h)&&(d.x>h&&(f.x=Math.floor(h/B.x),d.x=f.x*B.x,I.mapSize.x=f.x),d.y>h&&(f.y=Math.floor(h/B.y),d.y=f.y*B.y,I.mapSize.y=f.y)),I.map===null){const W=this.type!==fs?{minFilter:gr,magFilter:gr}:{};I.map=new ri(d.x,d.y,W),I.map.texture.name=k.name+".shadowMap",I.camera.updateProjectionMatrix()}w.setRenderTarget(I.map),w.clear();const Y=I.getViewportCount();for(let W=0;W<Y;W++){const H=I.getViewport(W);a.set(f.x*H.x,f.y*H.y,f.x*H.z,f.y*H.w),R.viewport(a),I.updateMatrices(k,W),e=I.getFrustum(),b(x,A,I.camera,k,this.type)}I.isPointLightShadow!==!0&&this.type===fs&&g(I,A),I.needsUpdate=!1}p.needsUpdate=!1,w.setRenderTarget(E,T,C)};function g(_,x){const A=t.update(u);i.defines.VSM_SAMPLES!==_.blurSamples&&(i.defines.VSM_SAMPLES=_.blurSamples,o.defines.VSM_SAMPLES=_.blurSamples,i.needsUpdate=!0,o.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new ri(d.x,d.y)),i.uniforms.shadow_pass.value=_.map.texture,i.uniforms.resolution.value=_.mapSize,i.uniforms.radius.value=_.radius,w.setRenderTarget(_.mapPass),w.clear(),w.renderBufferDirect(x,null,A,i,u,null),o.uniforms.shadow_pass.value=_.mapPass.texture,o.uniforms.resolution.value=_.mapSize,o.uniforms.radius.value=_.radius,w.setRenderTarget(_.map),w.clear(),w.renderBufferDirect(x,null,A,o,u,null)}function v(_,x,A,E,T,C){let R=null;const P=A.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(P!==void 0)R=P;else if(R=A.isPointLight===!0?n:s,w.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0){const N=R.uuid,k=x.uuid;let I=l[N];I===void 0&&(I={},l[N]=I);let B=I[k];B===void 0&&(B=R.clone(),I[k]=B),R=B}return R.visible=x.visible,R.wireframe=x.wireframe,C===fs?R.side=x.shadowSide!==null?x.shadowSide:x.side:R.side=x.shadowSide!==null?x.shadowSide:m[x.side],R.alphaMap=x.alphaMap,R.alphaTest=x.alphaTest,R.map=x.map,R.clipShadows=x.clipShadows,R.clippingPlanes=x.clippingPlanes,R.clipIntersection=x.clipIntersection,R.displacementMap=x.displacementMap,R.displacementScale=x.displacementScale,R.displacementBias=x.displacementBias,R.wireframeLinewidth=x.wireframeLinewidth,R.linewidth=x.linewidth,A.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(A.matrixWorld),R.nearDistance=E,R.farDistance=T),R}function b(_,x,A,E,T){if(_.visible===!1)return;if(_.layers.test(x.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&T===fs)&&(!_.frustumCulled||e.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,_.matrixWorld);const P=t.update(_),N=_.material;if(Array.isArray(N)){const k=P.groups;for(let I=0,B=k.length;I<B;I++){const Y=k[I],W=N[Y.materialIndex];if(W&&W.visible){const H=v(_,W,E,A.near,A.far,T);w.renderBufferDirect(A,null,P,H,_,Y)}}}else if(N.visible){const k=v(_,N,E,A.near,A.far,T);w.renderBufferDirect(A,null,P,k,_,null)}}const R=_.children;for(let P=0,N=R.length;P<N;P++)b(R[P],x,A,E,T)}}function l0(w,t,r){const e=r.isWebGL2;function d(){let ye=!1;const je=new zt;let Ue=null;const $e=new zt(0,0,0,0);return{setMask:function(rt){Ue!==rt&&!ye&&(w.colorMask(rt,rt,rt,rt),Ue=rt)},setLocked:function(rt){ye=rt},setClear:function(rt,nt,lt,at,Lt){Lt===!0&&(rt*=at,nt*=at,lt*=at),je.set(rt,nt,lt,at),$e.equals(je)===!1&&(w.clearColor(rt,nt,lt,at),$e.copy(je))},reset:function(){ye=!1,Ue=null,$e.set(-1,0,0,0)}}}function f(){let ye=!1,je=null,Ue=null,$e=null;return{setTest:function(rt){rt?J(2929):le(2929)},setMask:function(rt){je!==rt&&!ye&&(w.depthMask(rt),je=rt)},setFunc:function(rt){if(Ue!==rt){switch(rt){case Mh:w.depthFunc(512);break;case Th:w.depthFunc(519);break;case Eh:w.depthFunc(513);break;case va:w.depthFunc(515);break;case jh:w.depthFunc(514);break;case Ah:w.depthFunc(518);break;case Ch:w.depthFunc(516);break;case Lh:w.depthFunc(517);break;default:w.depthFunc(515)}Ue=rt}},setLocked:function(rt){ye=rt},setClear:function(rt){$e!==rt&&(w.clearDepth(rt),$e=rt)},reset:function(){ye=!1,je=null,Ue=null,$e=null}}}function a(){let ye=!1,je=null,Ue=null,$e=null,rt=null,nt=null,lt=null,at=null,Lt=null;return{setTest:function(St){ye||(St?J(2960):le(2960))},setMask:function(St){je!==St&&!ye&&(w.stencilMask(St),je=St)},setFunc:function(St,It,xt){(Ue!==St||$e!==It||rt!==xt)&&(w.stencilFunc(St,It,xt),Ue=St,$e=It,rt=xt)},setOp:function(St,It,xt){(nt!==St||lt!==It||at!==xt)&&(w.stencilOp(St,It,xt),nt=St,lt=It,at=xt)},setLocked:function(St){ye=St},setClear:function(St){Lt!==St&&(w.clearStencil(St),Lt=St)},reset:function(){ye=!1,je=null,Ue=null,$e=null,rt=null,nt=null,lt=null,at=null,Lt=null}}}const s=new d,n=new f,l=new a,h=new WeakMap,m=new WeakMap;let i={},o={},c=new WeakMap,u=[],p=null,g=!1,v=null,b=null,_=null,x=null,A=null,E=null,T=null,C=!1,R=null,P=null,N=null,k=null,I=null;const B=w.getParameter(35661);let Y=!1,W=0;const H=w.getParameter(7938);H.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(H)[1]),Y=W>=1):H.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),Y=W>=2);let X=null,Z={};const q=w.getParameter(3088),ee=w.getParameter(2978),L=new zt().fromArray(q),O=new zt().fromArray(ee);function U(ye,je,Ue){const $e=new Uint8Array(4),rt=w.createTexture();w.bindTexture(ye,rt),w.texParameteri(ye,10241,9728),w.texParameteri(ye,10240,9728);for(let nt=0;nt<Ue;nt++)w.texImage2D(je+nt,0,6408,1,1,0,6408,5121,$e);return rt}const V={};V[3553]=U(3553,3553,1),V[34067]=U(34067,34069,6),s.setClear(0,0,0,1),n.setClear(1),l.setClear(0),J(2929),n.setFunc(va),Se(!1),Te(Fl),J(2884),ie(Un);function J(ye){i[ye]!==!0&&(w.enable(ye),i[ye]=!0)}function le(ye){i[ye]!==!1&&(w.disable(ye),i[ye]=!1)}function ce(ye,je){return o[ye]!==je?(w.bindFramebuffer(ye,je),o[ye]=je,e&&(ye===36009&&(o[36160]=je),ye===36160&&(o[36009]=je)),!0):!1}function ue(ye,je){let Ue=u,$e=!1;if(ye)if(Ue=c.get(je),Ue===void 0&&(Ue=[],c.set(je,Ue)),ye.isWebGLMultipleRenderTargets){const rt=ye.texture;if(Ue.length!==rt.length||Ue[0]!==36064){for(let nt=0,lt=rt.length;nt<lt;nt++)Ue[nt]=36064+nt;Ue.length=rt.length,$e=!0}}else Ue[0]!==36064&&(Ue[0]=36064,$e=!0);else Ue[0]!==1029&&(Ue[0]=1029,$e=!0);$e&&(r.isWebGL2?w.drawBuffers(Ue):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ue))}function re(ye){return p!==ye?(w.useProgram(ye),p=ye,!0):!1}const de={[Li]:32774,[fh]:32778,[ph]:32779};if(e)de[Vl]=32775,de[Hl]=32776;else{const ye=t.get("EXT_blend_minmax");ye!==null&&(de[Vl]=ye.MIN_EXT,de[Hl]=ye.MAX_EXT)}const ve={[mh]:0,[gh]:1,[yh]:768,[Fu]:770,[Sh]:776,[xh]:774,[bh]:772,[vh]:769,[Bu]:771,[wh]:775,[_h]:773};function ie(ye,je,Ue,$e,rt,nt,lt,at){if(ye===Un){g===!0&&(le(3042),g=!1);return}if(g===!1&&(J(3042),g=!0),ye!==hh){if(ye!==v||at!==C){if((b!==Li||A!==Li)&&(w.blendEquation(32774),b=Li,A=Li),at)switch(ye){case Pi:w.blendFuncSeparate(1,771,1,771);break;case Bl:w.blendFunc(1,1);break;case Gl:w.blendFuncSeparate(0,769,0,1);break;case zl:w.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}else switch(ye){case Pi:w.blendFuncSeparate(770,771,1,771);break;case Bl:w.blendFunc(770,1);break;case Gl:w.blendFuncSeparate(0,769,0,1);break;case zl:w.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}_=null,x=null,E=null,T=null,v=ye,C=at}return}rt=rt||je,nt=nt||Ue,lt=lt||$e,(je!==b||rt!==A)&&(w.blendEquationSeparate(de[je],de[rt]),b=je,A=rt),(Ue!==_||$e!==x||nt!==E||lt!==T)&&(w.blendFuncSeparate(ve[Ue],ve[$e],ve[nt],ve[lt]),_=Ue,x=$e,E=nt,T=lt),v=ye,C=!1}function _e(ye,je){ye.side===_o?le(2884):J(2884);let Ue=ye.side===Hr;je&&(Ue=!Ue),Se(Ue),ye.blending===Pi&&ye.transparent===!1?ie(Un):ie(ye.blending,ye.blendEquation,ye.blendSrc,ye.blendDst,ye.blendEquationAlpha,ye.blendSrcAlpha,ye.blendDstAlpha,ye.premultipliedAlpha),n.setFunc(ye.depthFunc),n.setTest(ye.depthTest),n.setMask(ye.depthWrite),s.setMask(ye.colorWrite);const $e=ye.stencilWrite;l.setTest($e),$e&&(l.setMask(ye.stencilWriteMask),l.setFunc(ye.stencilFunc,ye.stencilRef,ye.stencilFuncMask),l.setOp(ye.stencilFail,ye.stencilZFail,ye.stencilZPass)),De(ye.polygonOffset,ye.polygonOffsetFactor,ye.polygonOffsetUnits),ye.alphaToCoverage===!0?J(32926):le(32926)}function Se(ye){R!==ye&&(ye?w.frontFace(2304):w.frontFace(2305),R=ye)}function Te(ye){ye!==ch?(J(2884),ye!==P&&(ye===Fl?w.cullFace(1029):ye===uh?w.cullFace(1028):w.cullFace(1032))):le(2884),P=ye}function we(ye){ye!==N&&(Y&&w.lineWidth(ye),N=ye)}function De(ye,je,Ue){ye?(J(32823),(k!==je||I!==Ue)&&(w.polygonOffset(je,Ue),k=je,I=Ue)):le(32823)}function Ie(ye){ye?J(3089):le(3089)}function We(ye){ye===void 0&&(ye=33984+B-1),X!==ye&&(w.activeTexture(ye),X=ye)}function $(ye,je,Ue){Ue===void 0&&(X===null?Ue=33984+B-1:Ue=X);let $e=Z[Ue];$e===void 0&&($e={type:void 0,texture:void 0},Z[Ue]=$e),($e.type!==ye||$e.texture!==je)&&(X!==Ue&&(w.activeTexture(Ue),X=Ue),w.bindTexture(ye,je||V[ye]),$e.type=ye,$e.texture=je)}function se(){const ye=Z[X];ye!==void 0&&ye.type!==void 0&&(w.bindTexture(ye.type,null),ye.type=void 0,ye.texture=void 0)}function Ae(){try{w.compressedTexImage2D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ne(){try{w.compressedTexImage3D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ze(){try{w.texSubImage2D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ve(){try{w.texSubImage3D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function xe(){try{w.compressedTexSubImage2D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function oe(){try{w.compressedTexSubImage3D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ae(){try{w.texStorage2D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function K(){try{w.texStorage3D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Q(){try{w.texImage2D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function G(){try{w.texImage3D.apply(w,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function te(ye){L.equals(ye)===!1&&(w.scissor(ye.x,ye.y,ye.z,ye.w),L.copy(ye))}function ge(ye){O.equals(ye)===!1&&(w.viewport(ye.x,ye.y,ye.z,ye.w),O.copy(ye))}function Ee(ye,je){let Ue=m.get(je);Ue===void 0&&(Ue=new WeakMap,m.set(je,Ue));let $e=Ue.get(ye);$e===void 0&&($e=w.getUniformBlockIndex(je,ye.name),Ue.set(ye,$e))}function Le(ye,je){const $e=m.get(je).get(ye);h.get(je)!==$e&&(w.uniformBlockBinding(je,$e,ye.__bindingPointIndex),h.set(je,$e))}function Ye(){w.disable(3042),w.disable(2884),w.disable(2929),w.disable(32823),w.disable(3089),w.disable(2960),w.disable(32926),w.blendEquation(32774),w.blendFunc(1,0),w.blendFuncSeparate(1,0,1,0),w.colorMask(!0,!0,!0,!0),w.clearColor(0,0,0,0),w.depthMask(!0),w.depthFunc(513),w.clearDepth(1),w.stencilMask(4294967295),w.stencilFunc(519,0,4294967295),w.stencilOp(7680,7680,7680),w.clearStencil(0),w.cullFace(1029),w.frontFace(2305),w.polygonOffset(0,0),w.activeTexture(33984),w.bindFramebuffer(36160,null),e===!0&&(w.bindFramebuffer(36009,null),w.bindFramebuffer(36008,null)),w.useProgram(null),w.lineWidth(1),w.scissor(0,0,w.canvas.width,w.canvas.height),w.viewport(0,0,w.canvas.width,w.canvas.height),i={},X=null,Z={},o={},c=new WeakMap,u=[],p=null,g=!1,v=null,b=null,_=null,x=null,A=null,E=null,T=null,C=!1,R=null,P=null,N=null,k=null,I=null,L.set(0,0,w.canvas.width,w.canvas.height),O.set(0,0,w.canvas.width,w.canvas.height),s.reset(),n.reset(),l.reset()}return{buffers:{color:s,depth:n,stencil:l},enable:J,disable:le,bindFramebuffer:ce,drawBuffers:ue,useProgram:re,setBlending:ie,setMaterial:_e,setFlipSided:Se,setCullFace:Te,setLineWidth:we,setPolygonOffset:De,setScissorTest:Ie,activeTexture:We,bindTexture:$,unbindTexture:se,compressedTexImage2D:Ae,compressedTexImage3D:Ne,texImage2D:Q,texImage3D:G,updateUBOMapping:Ee,uniformBlockBinding:Le,texStorage2D:ae,texStorage3D:K,texSubImage2D:ze,texSubImage3D:Ve,compressedTexSubImage2D:xe,compressedTexSubImage3D:oe,scissor:te,viewport:ge,reset:Ye}}function c0(w,t,r,e,d,f,a){const s=d.isWebGL2,n=d.maxTextures,l=d.maxCubemapSize,h=d.maxTextureSize,m=d.maxSamples,i=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,o=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let u;const p=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v($,se){return g?new OffscreenCanvas($,se):ws("canvas")}function b($,se,Ae,Ne){let ze=1;if(($.width>Ne||$.height>Ne)&&(ze=Ne/Math.max($.width,$.height)),ze<1||se===!0)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){const Ve=se?bo:Math.floor,xe=Ve(ze*$.width),oe=Ve(ze*$.height);u===void 0&&(u=v(xe,oe));const ae=Ae?v(xe,oe):u;return ae.width=xe,ae.height=oe,ae.getContext("2d").drawImage($,0,0,xe,oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+xe+"x"+oe+")."),ae}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),$;return $}function _($){return Sa($.width)&&Sa($.height)}function x($){return s?!1:$.wrapS!==Or||$.wrapT!==Or||$.minFilter!==gr&&$.minFilter!==dr}function A($,se){return $.generateMipmaps&&se&&$.minFilter!==gr&&$.minFilter!==dr}function E($){w.generateMipmap($)}function T($,se,Ae,Ne,ze=!1){if(s===!1)return se;if($!==null){if(w[$]!==void 0)return w[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ve=se;return se===6403&&(Ae===5126&&(Ve=33326),Ae===5131&&(Ve=33325),Ae===5121&&(Ve=33321)),se===33319&&(Ae===5126&&(Ve=33328),Ae===5131&&(Ve=33327),Ae===5121&&(Ve=33323)),se===6408&&(Ae===5126&&(Ve=34836),Ae===5131&&(Ve=34842),Ae===5121&&(Ve=Ne===Pt&&ze===!1?35907:32856),Ae===32819&&(Ve=32854),Ae===32820&&(Ve=32855)),(Ve===33325||Ve===33326||Ve===33327||Ve===33328||Ve===34842||Ve===34836)&&t.get("EXT_color_buffer_float"),Ve}function C($,se,Ae){return A($,Ae)===!0||$.isFramebufferTexture&&$.minFilter!==gr&&$.minFilter!==dr?Math.log2(Math.max(se.width,se.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?se.mipmaps.length:1}function R($){return $===gr||$===_a||$===uo?9728:9729}function P($){const se=$.target;se.removeEventListener("dispose",P),k(se),se.isVideoTexture&&c.delete(se)}function N($){const se=$.target;se.removeEventListener("dispose",N),B(se)}function k($){const se=e.get($);if(se.__webglInit===void 0)return;const Ae=$.source,Ne=p.get(Ae);if(Ne){const ze=Ne[se.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&I($),Object.keys(Ne).length===0&&p.delete(Ae)}e.remove($)}function I($){const se=e.get($);w.deleteTexture(se.__webglTexture);const Ae=$.source,Ne=p.get(Ae);delete Ne[se.__cacheKey],a.memory.textures--}function B($){const se=$.texture,Ae=e.get($),Ne=e.get(se);if(Ne.__webglTexture!==void 0&&(w.deleteTexture(Ne.__webglTexture),a.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++)w.deleteFramebuffer(Ae.__webglFramebuffer[ze]),Ae.__webglDepthbuffer&&w.deleteRenderbuffer(Ae.__webglDepthbuffer[ze]);else{if(w.deleteFramebuffer(Ae.__webglFramebuffer),Ae.__webglDepthbuffer&&w.deleteRenderbuffer(Ae.__webglDepthbuffer),Ae.__webglMultisampledFramebuffer&&w.deleteFramebuffer(Ae.__webglMultisampledFramebuffer),Ae.__webglColorRenderbuffer)for(let ze=0;ze<Ae.__webglColorRenderbuffer.length;ze++)Ae.__webglColorRenderbuffer[ze]&&w.deleteRenderbuffer(Ae.__webglColorRenderbuffer[ze]);Ae.__webglDepthRenderbuffer&&w.deleteRenderbuffer(Ae.__webglDepthRenderbuffer)}if($.isWebGLMultipleRenderTargets)for(let ze=0,Ve=se.length;ze<Ve;ze++){const xe=e.get(se[ze]);xe.__webglTexture&&(w.deleteTexture(xe.__webglTexture),a.memory.textures--),e.remove(se[ze])}e.remove(se),e.remove($)}let Y=0;function W(){Y=0}function H(){const $=Y;return $>=n&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+n),Y+=1,$}function X($){const se=[];return se.push($.wrapS),se.push($.wrapT),se.push($.wrapR||0),se.push($.magFilter),se.push($.minFilter),se.push($.anisotropy),se.push($.internalFormat),se.push($.format),se.push($.type),se.push($.generateMipmaps),se.push($.premultiplyAlpha),se.push($.flipY),se.push($.unpackAlignment),se.push($.encoding),se.join()}function Z($,se){const Ae=e.get($);if($.isVideoTexture&&Ie($),$.isRenderTargetTexture===!1&&$.version>0&&Ae.__version!==$.version){const Ne=$.image;if(Ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(Ae,$,se);return}}r.bindTexture(3553,Ae.__webglTexture,33984+se)}function q($,se){const Ae=e.get($);if($.version>0&&Ae.__version!==$.version){le(Ae,$,se);return}r.bindTexture(35866,Ae.__webglTexture,33984+se)}function ee($,se){const Ae=e.get($);if($.version>0&&Ae.__version!==$.version){le(Ae,$,se);return}r.bindTexture(32879,Ae.__webglTexture,33984+se)}function L($,se){const Ae=e.get($);if($.version>0&&Ae.__version!==$.version){ce(Ae,$,se);return}r.bindTexture(34067,Ae.__webglTexture,33984+se)}const O={[Ni]:10497,[Or]:33071,[vo]:33648},U={[gr]:9728,[_a]:9984,[uo]:9986,[dr]:9729,[Vu]:9985,[Bn]:9987};function V($,se,Ae){if(Ae?(w.texParameteri($,10242,O[se.wrapS]),w.texParameteri($,10243,O[se.wrapT]),($===32879||$===35866)&&w.texParameteri($,32882,O[se.wrapR]),w.texParameteri($,10240,U[se.magFilter]),w.texParameteri($,10241,U[se.minFilter])):(w.texParameteri($,10242,33071),w.texParameteri($,10243,33071),($===32879||$===35866)&&w.texParameteri($,32882,33071),(se.wrapS!==Or||se.wrapT!==Or)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),w.texParameteri($,10240,R(se.magFilter)),w.texParameteri($,10241,R(se.minFilter)),se.minFilter!==gr&&se.minFilter!==dr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Ne=t.get("EXT_texture_filter_anisotropic");if(se.magFilter===gr||se.minFilter!==uo&&se.minFilter!==Bn||se.type===Jr&&t.has("OES_texture_float_linear")===!1||s===!1&&se.type===Mn&&t.has("OES_texture_half_float_linear")===!1)return;(se.anisotropy>1||e.get(se).__currentAnisotropy)&&(w.texParameterf($,Ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,d.getMaxAnisotropy())),e.get(se).__currentAnisotropy=se.anisotropy)}}function J($,se){let Ae=!1;$.__webglInit===void 0&&($.__webglInit=!0,se.addEventListener("dispose",P));const Ne=se.source;let ze=p.get(Ne);ze===void 0&&(ze={},p.set(Ne,ze));const Ve=X(se);if(Ve!==$.__cacheKey){ze[Ve]===void 0&&(ze[Ve]={texture:w.createTexture(),usedTimes:0},a.memory.textures++,Ae=!0),ze[Ve].usedTimes++;const xe=ze[$.__cacheKey];xe!==void 0&&(ze[$.__cacheKey].usedTimes--,xe.usedTimes===0&&I(se)),$.__cacheKey=Ve,$.__webglTexture=ze[Ve].texture}return Ae}function le($,se,Ae){let Ne=3553;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(Ne=35866),se.isData3DTexture&&(Ne=32879);const ze=J($,se),Ve=se.source;r.bindTexture(Ne,$.__webglTexture,33984+Ae);const xe=e.get(Ve);if(Ve.version!==xe.__version||ze===!0){r.activeTexture(33984+Ae),w.pixelStorei(37440,se.flipY),w.pixelStorei(37441,se.premultiplyAlpha),w.pixelStorei(3317,se.unpackAlignment),w.pixelStorei(37443,0);const oe=x(se)&&_(se.image)===!1;let ae=b(se.image,oe,!1,h);ae=We(se,ae);const K=_(ae)||s,Q=f.convert(se.format,se.encoding);let G=f.convert(se.type),te=T(se.internalFormat,Q,G,se.encoding,se.isVideoTexture);V(Ne,se,K);let ge;const Ee=se.mipmaps,Le=s&&se.isVideoTexture!==!0,Ye=xe.__version===void 0||ze===!0,ye=C(se,ae,K);if(se.isDepthTexture)te=6402,s?se.type===Jr?te=36012:se.type===Zn?te=33190:se.type===Di?te=35056:te=33189:se.type===Jr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===Qn&&te===6402&&se.type!==Hu&&se.type!==Zn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=Zn,G=f.convert(se.type)),se.format===Ui&&te===6402&&(te=34041,se.type!==Di&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=Di,G=f.convert(se.type))),Ye&&(Le?r.texStorage2D(3553,1,te,ae.width,ae.height):r.texImage2D(3553,0,te,ae.width,ae.height,0,Q,G,null));else if(se.isDataTexture)if(Ee.length>0&&K){Le&&Ye&&r.texStorage2D(3553,ye,te,Ee[0].width,Ee[0].height);for(let je=0,Ue=Ee.length;je<Ue;je++)ge=Ee[je],Le?r.texSubImage2D(3553,je,0,0,ge.width,ge.height,Q,G,ge.data):r.texImage2D(3553,je,te,ge.width,ge.height,0,Q,G,ge.data);se.generateMipmaps=!1}else Le?(Ye&&r.texStorage2D(3553,ye,te,ae.width,ae.height),r.texSubImage2D(3553,0,0,0,ae.width,ae.height,Q,G,ae.data)):r.texImage2D(3553,0,te,ae.width,ae.height,0,Q,G,ae.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){Le&&Ye&&r.texStorage3D(35866,ye,te,Ee[0].width,Ee[0].height,ae.depth);for(let je=0,Ue=Ee.length;je<Ue;je++)ge=Ee[je],se.format!==Gr?Q!==null?Le?r.compressedTexSubImage3D(35866,je,0,0,0,ge.width,ge.height,ae.depth,Q,ge.data,0,0):r.compressedTexImage3D(35866,je,te,ge.width,ge.height,ae.depth,0,ge.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?r.texSubImage3D(35866,je,0,0,0,ge.width,ge.height,ae.depth,Q,G,ge.data):r.texImage3D(35866,je,te,ge.width,ge.height,ae.depth,0,Q,G,ge.data)}else{Le&&Ye&&r.texStorage2D(3553,ye,te,Ee[0].width,Ee[0].height);for(let je=0,Ue=Ee.length;je<Ue;je++)ge=Ee[je],se.format!==Gr?Q!==null?Le?r.compressedTexSubImage2D(3553,je,0,0,ge.width,ge.height,Q,ge.data):r.compressedTexImage2D(3553,je,te,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?r.texSubImage2D(3553,je,0,0,ge.width,ge.height,Q,G,ge.data):r.texImage2D(3553,je,te,ge.width,ge.height,0,Q,G,ge.data)}else if(se.isDataArrayTexture)Le?(Ye&&r.texStorage3D(35866,ye,te,ae.width,ae.height,ae.depth),r.texSubImage3D(35866,0,0,0,0,ae.width,ae.height,ae.depth,Q,G,ae.data)):r.texImage3D(35866,0,te,ae.width,ae.height,ae.depth,0,Q,G,ae.data);else if(se.isData3DTexture)Le?(Ye&&r.texStorage3D(32879,ye,te,ae.width,ae.height,ae.depth),r.texSubImage3D(32879,0,0,0,0,ae.width,ae.height,ae.depth,Q,G,ae.data)):r.texImage3D(32879,0,te,ae.width,ae.height,ae.depth,0,Q,G,ae.data);else if(se.isFramebufferTexture){if(Ye)if(Le)r.texStorage2D(3553,ye,te,ae.width,ae.height);else{let je=ae.width,Ue=ae.height;for(let $e=0;$e<ye;$e++)r.texImage2D(3553,$e,te,je,Ue,0,Q,G,null),je>>=1,Ue>>=1}}else if(Ee.length>0&&K){Le&&Ye&&r.texStorage2D(3553,ye,te,Ee[0].width,Ee[0].height);for(let je=0,Ue=Ee.length;je<Ue;je++)ge=Ee[je],Le?r.texSubImage2D(3553,je,0,0,Q,G,ge):r.texImage2D(3553,je,te,Q,G,ge);se.generateMipmaps=!1}else Le?(Ye&&r.texStorage2D(3553,ye,te,ae.width,ae.height),r.texSubImage2D(3553,0,0,0,Q,G,ae)):r.texImage2D(3553,0,te,Q,G,ae);A(se,K)&&E(Ne),xe.__version=Ve.version,se.onUpdate&&se.onUpdate(se)}$.__version=se.version}function ce($,se,Ae){if(se.image.length!==6)return;const Ne=J($,se),ze=se.source;r.bindTexture(34067,$.__webglTexture,33984+Ae);const Ve=e.get(ze);if(ze.version!==Ve.__version||Ne===!0){r.activeTexture(33984+Ae),w.pixelStorei(37440,se.flipY),w.pixelStorei(37441,se.premultiplyAlpha),w.pixelStorei(3317,se.unpackAlignment),w.pixelStorei(37443,0);const xe=se.isCompressedTexture||se.image[0].isCompressedTexture,oe=se.image[0]&&se.image[0].isDataTexture,ae=[];for(let je=0;je<6;je++)!xe&&!oe?ae[je]=b(se.image[je],!1,!0,l):ae[je]=oe?se.image[je].image:se.image[je],ae[je]=We(se,ae[je]);const K=ae[0],Q=_(K)||s,G=f.convert(se.format,se.encoding),te=f.convert(se.type),ge=T(se.internalFormat,G,te,se.encoding),Ee=s&&se.isVideoTexture!==!0,Le=Ve.__version===void 0||Ne===!0;let Ye=C(se,K,Q);V(34067,se,Q);let ye;if(xe){Ee&&Le&&r.texStorage2D(34067,Ye,ge,K.width,K.height);for(let je=0;je<6;je++){ye=ae[je].mipmaps;for(let Ue=0;Ue<ye.length;Ue++){const $e=ye[Ue];se.format!==Gr?G!==null?Ee?r.compressedTexSubImage2D(34069+je,Ue,0,0,$e.width,$e.height,G,$e.data):r.compressedTexImage2D(34069+je,Ue,ge,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ee?r.texSubImage2D(34069+je,Ue,0,0,$e.width,$e.height,G,te,$e.data):r.texImage2D(34069+je,Ue,ge,$e.width,$e.height,0,G,te,$e.data)}}}else{ye=se.mipmaps,Ee&&Le&&(ye.length>0&&Ye++,r.texStorage2D(34067,Ye,ge,ae[0].width,ae[0].height));for(let je=0;je<6;je++)if(oe){Ee?r.texSubImage2D(34069+je,0,0,0,ae[je].width,ae[je].height,G,te,ae[je].data):r.texImage2D(34069+je,0,ge,ae[je].width,ae[je].height,0,G,te,ae[je].data);for(let Ue=0;Ue<ye.length;Ue++){const rt=ye[Ue].image[je].image;Ee?r.texSubImage2D(34069+je,Ue+1,0,0,rt.width,rt.height,G,te,rt.data):r.texImage2D(34069+je,Ue+1,ge,rt.width,rt.height,0,G,te,rt.data)}}else{Ee?r.texSubImage2D(34069+je,0,0,0,G,te,ae[je]):r.texImage2D(34069+je,0,ge,G,te,ae[je]);for(let Ue=0;Ue<ye.length;Ue++){const $e=ye[Ue];Ee?r.texSubImage2D(34069+je,Ue+1,0,0,G,te,$e.image[je]):r.texImage2D(34069+je,Ue+1,ge,G,te,$e.image[je])}}}A(se,Q)&&E(34067),Ve.__version=ze.version,se.onUpdate&&se.onUpdate(se)}$.__version=se.version}function ue($,se,Ae,Ne,ze){const Ve=f.convert(Ae.format,Ae.encoding),xe=f.convert(Ae.type),oe=T(Ae.internalFormat,Ve,xe,Ae.encoding);e.get(se).__hasExternalTextures||(ze===32879||ze===35866?r.texImage3D(ze,0,oe,se.width,se.height,se.depth,0,Ve,xe,null):r.texImage2D(ze,0,oe,se.width,se.height,0,Ve,xe,null)),r.bindFramebuffer(36160,$),De(se)?i.framebufferTexture2DMultisampleEXT(36160,Ne,ze,e.get(Ae).__webglTexture,0,we(se)):(ze===3553||ze>=34069&&ze<=34074)&&w.framebufferTexture2D(36160,Ne,ze,e.get(Ae).__webglTexture,0),r.bindFramebuffer(36160,null)}function re($,se,Ae){if(w.bindRenderbuffer(36161,$),se.depthBuffer&&!se.stencilBuffer){let Ne=33189;if(Ae||De(se)){const ze=se.depthTexture;ze&&ze.isDepthTexture&&(ze.type===Jr?Ne=36012:ze.type===Zn&&(Ne=33190));const Ve=we(se);De(se)?i.renderbufferStorageMultisampleEXT(36161,Ve,Ne,se.width,se.height):w.renderbufferStorageMultisample(36161,Ve,Ne,se.width,se.height)}else w.renderbufferStorage(36161,Ne,se.width,se.height);w.framebufferRenderbuffer(36160,36096,36161,$)}else if(se.depthBuffer&&se.stencilBuffer){const Ne=we(se);Ae&&De(se)===!1?w.renderbufferStorageMultisample(36161,Ne,35056,se.width,se.height):De(se)?i.renderbufferStorageMultisampleEXT(36161,Ne,35056,se.width,se.height):w.renderbufferStorage(36161,34041,se.width,se.height),w.framebufferRenderbuffer(36160,33306,36161,$)}else{const Ne=se.isWebGLMultipleRenderTargets===!0?se.texture:[se.texture];for(let ze=0;ze<Ne.length;ze++){const Ve=Ne[ze],xe=f.convert(Ve.format,Ve.encoding),oe=f.convert(Ve.type),ae=T(Ve.internalFormat,xe,oe,Ve.encoding),K=we(se);Ae&&De(se)===!1?w.renderbufferStorageMultisample(36161,K,ae,se.width,se.height):De(se)?i.renderbufferStorageMultisampleEXT(36161,K,ae,se.width,se.height):w.renderbufferStorage(36161,ae,se.width,se.height)}}w.bindRenderbuffer(36161,null)}function de($,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,$),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!e.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),Z(se.depthTexture,0);const Ne=e.get(se.depthTexture).__webglTexture,ze=we(se);if(se.depthTexture.format===Qn)De(se)?i.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ne,0,ze):w.framebufferTexture2D(36160,36096,3553,Ne,0);else if(se.depthTexture.format===Ui)De(se)?i.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ne,0,ze):w.framebufferTexture2D(36160,33306,3553,Ne,0);else throw new Error("Unknown depthTexture format")}function ve($){const se=e.get($),Ae=$.isWebGLCubeRenderTarget===!0;if($.depthTexture&&!se.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");de(se.__webglFramebuffer,$)}else if(Ae){se.__webglDepthbuffer=[];for(let Ne=0;Ne<6;Ne++)r.bindFramebuffer(36160,se.__webglFramebuffer[Ne]),se.__webglDepthbuffer[Ne]=w.createRenderbuffer(),re(se.__webglDepthbuffer[Ne],$,!1)}else r.bindFramebuffer(36160,se.__webglFramebuffer),se.__webglDepthbuffer=w.createRenderbuffer(),re(se.__webglDepthbuffer,$,!1);r.bindFramebuffer(36160,null)}function ie($,se,Ae){const Ne=e.get($);se!==void 0&&ue(Ne.__webglFramebuffer,$,$.texture,36064,3553),Ae!==void 0&&ve($)}function _e($){const se=$.texture,Ae=e.get($),Ne=e.get(se);$.addEventListener("dispose",N),$.isWebGLMultipleRenderTargets!==!0&&(Ne.__webglTexture===void 0&&(Ne.__webglTexture=w.createTexture()),Ne.__version=se.version,a.memory.textures++);const ze=$.isWebGLCubeRenderTarget===!0,Ve=$.isWebGLMultipleRenderTargets===!0,xe=_($)||s;if(ze){Ae.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)Ae.__webglFramebuffer[oe]=w.createFramebuffer()}else{if(Ae.__webglFramebuffer=w.createFramebuffer(),Ve)if(d.drawBuffers){const oe=$.texture;for(let ae=0,K=oe.length;ae<K;ae++){const Q=e.get(oe[ae]);Q.__webglTexture===void 0&&(Q.__webglTexture=w.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&$.samples>0&&De($)===!1){const oe=Ve?se:[se];Ae.__webglMultisampledFramebuffer=w.createFramebuffer(),Ae.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,Ae.__webglMultisampledFramebuffer);for(let ae=0;ae<oe.length;ae++){const K=oe[ae];Ae.__webglColorRenderbuffer[ae]=w.createRenderbuffer(),w.bindRenderbuffer(36161,Ae.__webglColorRenderbuffer[ae]);const Q=f.convert(K.format,K.encoding),G=f.convert(K.type),te=T(K.internalFormat,Q,G,K.encoding,$.isXRRenderTarget===!0),ge=we($);w.renderbufferStorageMultisample(36161,ge,te,$.width,$.height),w.framebufferRenderbuffer(36160,36064+ae,36161,Ae.__webglColorRenderbuffer[ae])}w.bindRenderbuffer(36161,null),$.depthBuffer&&(Ae.__webglDepthRenderbuffer=w.createRenderbuffer(),re(Ae.__webglDepthRenderbuffer,$,!0)),r.bindFramebuffer(36160,null)}}if(ze){r.bindTexture(34067,Ne.__webglTexture),V(34067,se,xe);for(let oe=0;oe<6;oe++)ue(Ae.__webglFramebuffer[oe],$,se,36064,34069+oe);A(se,xe)&&E(34067),r.unbindTexture()}else if(Ve){const oe=$.texture;for(let ae=0,K=oe.length;ae<K;ae++){const Q=oe[ae],G=e.get(Q);r.bindTexture(3553,G.__webglTexture),V(3553,Q,xe),ue(Ae.__webglFramebuffer,$,Q,36064+ae,3553),A(Q,xe)&&E(3553)}r.unbindTexture()}else{let oe=3553;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(s?oe=$.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(oe,Ne.__webglTexture),V(oe,se,xe),ue(Ae.__webglFramebuffer,$,se,36064,oe),A(se,xe)&&E(oe),r.unbindTexture()}$.depthBuffer&&ve($)}function Se($){const se=_($)||s,Ae=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let Ne=0,ze=Ae.length;Ne<ze;Ne++){const Ve=Ae[Ne];if(A(Ve,se)){const xe=$.isWebGLCubeRenderTarget?34067:3553,oe=e.get(Ve).__webglTexture;r.bindTexture(xe,oe),E(xe),r.unbindTexture()}}}function Te($){if(s&&$.samples>0&&De($)===!1){const se=$.isWebGLMultipleRenderTargets?$.texture:[$.texture],Ae=$.width,Ne=$.height;let ze=16384;const Ve=[],xe=$.stencilBuffer?33306:36096,oe=e.get($),ae=$.isWebGLMultipleRenderTargets===!0;if(ae)for(let K=0;K<se.length;K++)r.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer),w.framebufferRenderbuffer(36160,36064+K,36161,null),r.bindFramebuffer(36160,oe.__webglFramebuffer),w.framebufferTexture2D(36009,36064+K,3553,null,0);r.bindFramebuffer(36008,oe.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,oe.__webglFramebuffer);for(let K=0;K<se.length;K++){Ve.push(36064+K),$.depthBuffer&&Ve.push(xe);const Q=oe.__ignoreDepthValues!==void 0?oe.__ignoreDepthValues:!1;if(Q===!1&&($.depthBuffer&&(ze|=256),$.stencilBuffer&&(ze|=1024)),ae&&w.framebufferRenderbuffer(36008,36064,36161,oe.__webglColorRenderbuffer[K]),Q===!0&&(w.invalidateFramebuffer(36008,[xe]),w.invalidateFramebuffer(36009,[xe])),ae){const G=e.get(se[K]).__webglTexture;w.framebufferTexture2D(36009,36064,3553,G,0)}w.blitFramebuffer(0,0,Ae,Ne,0,0,Ae,Ne,ze,9728),o&&w.invalidateFramebuffer(36008,Ve)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),ae)for(let K=0;K<se.length;K++){r.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer),w.framebufferRenderbuffer(36160,36064+K,36161,oe.__webglColorRenderbuffer[K]);const Q=e.get(se[K]).__webglTexture;r.bindFramebuffer(36160,oe.__webglFramebuffer),w.framebufferTexture2D(36009,36064+K,3553,Q,0)}r.bindFramebuffer(36009,oe.__webglMultisampledFramebuffer)}}function we($){return Math.min(m,$.samples)}function De($){const se=e.get($);return s&&$.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function Ie($){const se=a.render.frame;c.get($)!==se&&(c.set($,se),$.update())}function We($,se){const Ae=$.encoding,Ne=$.format,ze=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||$.format===wa||Ae!==Gn&&(Ae===Pt?s===!1?t.has("EXT_sRGB")===!0&&Ne===Gr?($.format=wa,$.minFilter=dr,$.generateMipmaps=!1):se=Zu.sRGBToLinear(se):(Ne!==Gr||ze!==ti)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ae)),se}this.allocateTextureUnit=H,this.resetTextureUnits=W,this.setTexture2D=Z,this.setTexture2DArray=q,this.setTexture3D=ee,this.setTextureCube=L,this.rebindTextures=ie,this.setupRenderTarget=_e,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Te,this.setupDepthRenderbuffer=ve,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=De}function u0(w,t,r){const e=r.isWebGL2;function d(f,a=null){let s;if(f===ti)return 5121;if(f===Gh)return 32819;if(f===zh)return 32820;if(f===Uh)return 5120;if(f===Fh)return 5122;if(f===Hu)return 5123;if(f===Bh)return 5124;if(f===Zn)return 5125;if(f===Jr)return 5126;if(f===Mn)return e?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(f===Vh)return 6406;if(f===Gr)return 6408;if(f===Wh)return 6409;if(f===qh)return 6410;if(f===Qn)return 6402;if(f===Ui)return 34041;if(f===Hh)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(f===wa)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(f===Xh)return 6403;if(f===Yh)return 36244;if(f===Zh)return 33319;if(f===Kh)return 33320;if(f===Jh)return 36249;if(f===Po||f===Do||f===Io||f===Oo)if(a===Pt)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(f===Po)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(f===Do)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(f===Io)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(f===Oo)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(f===Po)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(f===Do)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(f===Io)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(f===Oo)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(f===Wl||f===ql||f===Xl||f===Yl)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(f===Wl)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(f===ql)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(f===Xl)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(f===Yl)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(f===Qh)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(f===Zl||f===Kl)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(f===Zl)return a===Pt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(f===Kl)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(f===Jl||f===Ql||f===$l||f===ec||f===tc||f===rc||f===nc||f===ic||f===sc||f===oc||f===ac||f===lc||f===cc||f===uc)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(f===Jl)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(f===Ql)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(f===$l)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(f===ec)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(f===tc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(f===rc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(f===nc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(f===ic)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(f===sc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(f===oc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(f===ac)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(f===lc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(f===cc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(f===uc)return a===Pt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(f===dc)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(f===dc)return a===Pt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return f===Di?e?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):w[f]!==void 0?w[f]:null}return{convert:d}}class d0 extends Dr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Jn extends Jt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const h0={type:"move"};class aa{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Jn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Jn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Jn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Re),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const e of t.hand.values())this._getHandJoint(r,e)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,r,e){let d=null,f=null,a=null;const s=this._targetRay,n=this._grip,l=this._hand;if(t&&r.session.visibilityState!=="visible-blurred"){if(l&&t.hand){a=!0;for(const u of t.hand.values()){const p=r.getJointPose(u,e),g=this._getHandJoint(l,u);p!==null&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=p.radius),g.visible=p!==null}const h=l.joints["index-finger-tip"],m=l.joints["thumb-tip"],i=h.position.distanceTo(m.position),o=.02,c=.005;l.inputState.pinching&&i>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&i<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else n!==null&&t.gripSpace&&(f=r.getPose(t.gripSpace,e),f!==null&&(n.matrix.fromArray(f.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),f.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(f.linearVelocity)):n.hasLinearVelocity=!1,f.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(f.angularVelocity)):n.hasAngularVelocity=!1));s!==null&&(d=r.getPose(t.targetRaySpace,e),d===null&&f!==null&&(d=f),d!==null&&(s.matrix.fromArray(d.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),d.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(d.linearVelocity)):s.hasLinearVelocity=!1,d.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(d.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(h0)))}return s!==null&&(s.visible=d!==null),n!==null&&(n.visible=f!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(t,r){if(t.joints[r.jointName]===void 0){const e=new Jn;e.matrixAutoUpdate=!1,e.visible=!1,t.joints[r.jointName]=e,t.add(e)}return t.joints[r.jointName]}}class f0 extends wr{constructor(t,r,e,d,f,a,s,n,l,h){if(h=h!==void 0?h:Qn,h!==Qn&&h!==Ui)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");e===void 0&&h===Qn&&(e=Zn),e===void 0&&h===Ui&&(e=Di),super(null,d,f,a,s,n,h,e,l),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=s!==void 0?s:gr,this.minFilter=n!==void 0?n:gr,this.flipY=!1,this.generateMipmaps=!1}}class p0 extends ai{constructor(t,r){super();const e=this;let d=null,f=1,a=null,s="local-floor",n=null,l=null,h=null,m=null,i=null,o=null;const c=r.getContextAttributes();let u=null,p=null;const g=[],v=[],b=new Set,_=new Map,x=new Dr;x.layers.enable(1),x.viewport=new zt;const A=new Dr;A.layers.enable(2),A.viewport=new zt;const E=[x,A],T=new d0;T.layers.enable(1),T.layers.enable(2);let C=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ee=g[q];return ee===void 0&&(ee=new aa,g[q]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(q){let ee=g[q];return ee===void 0&&(ee=new aa,g[q]=ee),ee.getGripSpace()},this.getHand=function(q){let ee=g[q];return ee===void 0&&(ee=new aa,g[q]=ee),ee.getHandSpace()};function P(q){const ee=v.indexOf(q.inputSource);if(ee===-1)return;const L=g[ee];L!==void 0&&L.dispatchEvent({type:q.type,data:q.inputSource})}function N(){d.removeEventListener("select",P),d.removeEventListener("selectstart",P),d.removeEventListener("selectend",P),d.removeEventListener("squeeze",P),d.removeEventListener("squeezestart",P),d.removeEventListener("squeezeend",P),d.removeEventListener("end",N),d.removeEventListener("inputsourceschange",k);for(let q=0;q<g.length;q++){const ee=v[q];ee!==null&&(v[q]=null,g[q].disconnect(ee))}C=null,R=null,t.setRenderTarget(u),i=null,m=null,h=null,d=null,p=null,Z.stop(),e.isPresenting=!1,e.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){f=q,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){s=q,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return n||a},this.setReferenceSpace=function(q){n=q},this.getBaseLayer=function(){return m!==null?m:i},this.getBinding=function(){return h},this.getFrame=function(){return o},this.getSession=function(){return d},this.setSession=async function(q){if(d=q,d!==null){if(u=t.getRenderTarget(),d.addEventListener("select",P),d.addEventListener("selectstart",P),d.addEventListener("selectend",P),d.addEventListener("squeeze",P),d.addEventListener("squeezestart",P),d.addEventListener("squeezeend",P),d.addEventListener("end",N),d.addEventListener("inputsourceschange",k),c.xrCompatible!==!0&&await r.makeXRCompatible(),d.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const ee={antialias:d.renderState.layers===void 0?c.antialias:!0,alpha:c.alpha,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:f};i=new XRWebGLLayer(d,r,ee),d.updateRenderState({baseLayer:i}),p=new ri(i.framebufferWidth,i.framebufferHeight,{format:Gr,type:ti,encoding:t.outputEncoding,stencilBuffer:c.stencil})}else{let ee=null,L=null,O=null;c.depth&&(O=c.stencil?35056:33190,ee=c.stencil?Ui:Qn,L=c.stencil?Di:Zn);const U={colorFormat:32856,depthFormat:O,scaleFactor:f};h=new XRWebGLBinding(d,r),m=h.createProjectionLayer(U),d.updateRenderState({layers:[m]}),p=new ri(m.textureWidth,m.textureHeight,{format:Gr,type:ti,depthTexture:new f0(m.textureWidth,m.textureHeight,L,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:c.stencil,encoding:t.outputEncoding,samples:c.antialias?4:0});const V=t.properties.get(p);V.__ignoreDepthValues=m.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(1),n=null,a=await d.requestReferenceSpace(s),Z.setContext(d),Z.start(),e.isPresenting=!0,e.dispatchEvent({type:"sessionstart"})}};function k(q){for(let ee=0;ee<q.removed.length;ee++){const L=q.removed[ee],O=v.indexOf(L);O>=0&&(v[O]=null,g[O].disconnect(L))}for(let ee=0;ee<q.added.length;ee++){const L=q.added[ee];let O=v.indexOf(L);if(O===-1){for(let V=0;V<g.length;V++)if(V>=v.length){v.push(L),O=V;break}else if(v[V]===null){v[V]=L,O=V;break}if(O===-1)break}const U=g[O];U&&U.connect(L)}}const I=new Re,B=new Re;function Y(q,ee,L){I.setFromMatrixPosition(ee.matrixWorld),B.setFromMatrixPosition(L.matrixWorld);const O=I.distanceTo(B),U=ee.projectionMatrix.elements,V=L.projectionMatrix.elements,J=U[14]/(U[10]-1),le=U[14]/(U[10]+1),ce=(U[9]+1)/U[5],ue=(U[9]-1)/U[5],re=(U[8]-1)/U[0],de=(V[8]+1)/V[0],ve=J*re,ie=J*de,_e=O/(-re+de),Se=_e*-re;ee.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Se),q.translateZ(_e),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const Te=J+_e,we=le+_e,De=ve-Se,Ie=ie+(O-Se),We=ce*le/we*Te,$=ue*le/we*Te;q.projectionMatrix.makePerspective(De,Ie,We,$,Te,we)}function W(q,ee){ee===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ee.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(d===null)return;T.near=A.near=x.near=q.near,T.far=A.far=x.far=q.far,(C!==T.near||R!==T.far)&&(d.updateRenderState({depthNear:T.near,depthFar:T.far}),C=T.near,R=T.far);const ee=q.parent,L=T.cameras;W(T,ee);for(let U=0;U<L.length;U++)W(L[U],ee);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),q.matrix.copy(T.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale);const O=q.children;for(let U=0,V=O.length;U<V;U++)O[U].updateMatrixWorld(!0);L.length===2?Y(T,x,A):T.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(m!==null)return m.fixedFoveation;if(i!==null)return i.fixedFoveation},this.setFoveation=function(q){m!==null&&(m.fixedFoveation=q),i!==null&&i.fixedFoveation!==void 0&&(i.fixedFoveation=q)},this.getPlanes=function(){return b};let H=null;function X(q,ee){if(l=ee.getViewerPose(n||a),o=ee,l!==null){const L=l.views;i!==null&&(t.setRenderTargetFramebuffer(p,i.framebuffer),t.setRenderTarget(p));let O=!1;L.length!==T.cameras.length&&(T.cameras.length=0,O=!0);for(let U=0;U<L.length;U++){const V=L[U];let J=null;if(i!==null)J=i.getViewport(V);else{const ce=h.getViewSubImage(m,V);J=ce.viewport,U===0&&(t.setRenderTargetTextures(p,ce.colorTexture,m.ignoreDepthValues?void 0:ce.depthStencilTexture),t.setRenderTarget(p))}let le=E[U];le===void 0&&(le=new Dr,le.layers.enable(U),le.viewport=new zt,E[U]=le),le.matrix.fromArray(V.transform.matrix),le.projectionMatrix.fromArray(V.projectionMatrix),le.viewport.set(J.x,J.y,J.width,J.height),U===0&&T.matrix.copy(le.matrix),O===!0&&T.cameras.push(le)}}for(let L=0;L<g.length;L++){const O=v[L],U=g[L];O!==null&&U!==void 0&&U.update(O,ee,n||a)}if(H&&H(q,ee),ee.detectedPlanes){e.dispatchEvent({type:"planesdetected",data:ee.detectedPlanes});let L=null;for(const O of b)ee.detectedPlanes.has(O)||(L===null&&(L=[]),L.push(O));if(L!==null)for(const O of L)b.delete(O),_.delete(O),e.dispatchEvent({type:"planeremoved",data:O});for(const O of ee.detectedPlanes)if(!b.has(O))b.add(O),_.set(O,ee.lastChangedTime),e.dispatchEvent({type:"planeadded",data:O});else{const U=_.get(O);O.lastChangedTime>U&&(_.set(O,O.lastChangedTime),e.dispatchEvent({type:"planechanged",data:O}))}}o=null}const Z=new id;Z.setAnimationLoop(X),this.setAnimationLoop=function(q){H=q},this.dispose=function(){}}}function m0(w,t){function r(u,p){p.color.getRGB(u.fogColor.value,td(w)),p.isFog?(u.fogNear.value=p.near,u.fogFar.value=p.far):p.isFogExp2&&(u.fogDensity.value=p.density)}function e(u,p,g,v,b){p.isMeshBasicMaterial||p.isMeshLambertMaterial?d(u,p):p.isMeshToonMaterial?(d(u,p),h(u,p)):p.isMeshPhongMaterial?(d(u,p),l(u,p)):p.isMeshStandardMaterial?(d(u,p),m(u,p),p.isMeshPhysicalMaterial&&i(u,p,b)):p.isMeshMatcapMaterial?(d(u,p),o(u,p)):p.isMeshDepthMaterial?d(u,p):p.isMeshDistanceMaterial?(d(u,p),c(u,p)):p.isMeshNormalMaterial?d(u,p):p.isLineBasicMaterial?(f(u,p),p.isLineDashedMaterial&&a(u,p)):p.isPointsMaterial?s(u,p,g,v):p.isSpriteMaterial?n(u,p):p.isShadowMaterial?(u.color.value.copy(p.color),u.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function d(u,p){u.opacity.value=p.opacity,p.color&&u.diffuse.value.copy(p.color),p.emissive&&u.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(u.map.value=p.map),p.alphaMap&&(u.alphaMap.value=p.alphaMap),p.bumpMap&&(u.bumpMap.value=p.bumpMap,u.bumpScale.value=p.bumpScale,p.side===Hr&&(u.bumpScale.value*=-1)),p.displacementMap&&(u.displacementMap.value=p.displacementMap,u.displacementScale.value=p.displacementScale,u.displacementBias.value=p.displacementBias),p.emissiveMap&&(u.emissiveMap.value=p.emissiveMap),p.normalMap&&(u.normalMap.value=p.normalMap,u.normalScale.value.copy(p.normalScale),p.side===Hr&&u.normalScale.value.negate()),p.specularMap&&(u.specularMap.value=p.specularMap),p.alphaTest>0&&(u.alphaTest.value=p.alphaTest);const g=t.get(p).envMap;if(g&&(u.envMap.value=g,u.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,u.reflectivity.value=p.reflectivity,u.ior.value=p.ior,u.refractionRatio.value=p.refractionRatio),p.lightMap){u.lightMap.value=p.lightMap;const _=w.physicallyCorrectLights!==!0?Math.PI:1;u.lightMapIntensity.value=p.lightMapIntensity*_}p.aoMap&&(u.aoMap.value=p.aoMap,u.aoMapIntensity.value=p.aoMapIntensity);let v;p.map?v=p.map:p.specularMap?v=p.specularMap:p.displacementMap?v=p.displacementMap:p.normalMap?v=p.normalMap:p.bumpMap?v=p.bumpMap:p.roughnessMap?v=p.roughnessMap:p.metalnessMap?v=p.metalnessMap:p.alphaMap?v=p.alphaMap:p.emissiveMap?v=p.emissiveMap:p.clearcoatMap?v=p.clearcoatMap:p.clearcoatNormalMap?v=p.clearcoatNormalMap:p.clearcoatRoughnessMap?v=p.clearcoatRoughnessMap:p.iridescenceMap?v=p.iridescenceMap:p.iridescenceThicknessMap?v=p.iridescenceThicknessMap:p.specularIntensityMap?v=p.specularIntensityMap:p.specularColorMap?v=p.specularColorMap:p.transmissionMap?v=p.transmissionMap:p.thicknessMap?v=p.thicknessMap:p.sheenColorMap?v=p.sheenColorMap:p.sheenRoughnessMap&&(v=p.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),u.uvTransform.value.copy(v.matrix));let b;p.aoMap?b=p.aoMap:p.lightMap&&(b=p.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),u.uv2Transform.value.copy(b.matrix))}function f(u,p){u.diffuse.value.copy(p.color),u.opacity.value=p.opacity}function a(u,p){u.dashSize.value=p.dashSize,u.totalSize.value=p.dashSize+p.gapSize,u.scale.value=p.scale}function s(u,p,g,v){u.diffuse.value.copy(p.color),u.opacity.value=p.opacity,u.size.value=p.size*g,u.scale.value=v*.5,p.map&&(u.map.value=p.map),p.alphaMap&&(u.alphaMap.value=p.alphaMap),p.alphaTest>0&&(u.alphaTest.value=p.alphaTest);let b;p.map?b=p.map:p.alphaMap&&(b=p.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),u.uvTransform.value.copy(b.matrix))}function n(u,p){u.diffuse.value.copy(p.color),u.opacity.value=p.opacity,u.rotation.value=p.rotation,p.map&&(u.map.value=p.map),p.alphaMap&&(u.alphaMap.value=p.alphaMap),p.alphaTest>0&&(u.alphaTest.value=p.alphaTest);let g;p.map?g=p.map:p.alphaMap&&(g=p.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),u.uvTransform.value.copy(g.matrix))}function l(u,p){u.specular.value.copy(p.specular),u.shininess.value=Math.max(p.shininess,1e-4)}function h(u,p){p.gradientMap&&(u.gradientMap.value=p.gradientMap)}function m(u,p){u.roughness.value=p.roughness,u.metalness.value=p.metalness,p.roughnessMap&&(u.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(u.metalnessMap.value=p.metalnessMap),t.get(p).envMap&&(u.envMapIntensity.value=p.envMapIntensity)}function i(u,p,g){u.ior.value=p.ior,p.sheen>0&&(u.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),u.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(u.sheenColorMap.value=p.sheenColorMap),p.sheenRoughnessMap&&(u.sheenRoughnessMap.value=p.sheenRoughnessMap)),p.clearcoat>0&&(u.clearcoat.value=p.clearcoat,u.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(u.clearcoatMap.value=p.clearcoatMap),p.clearcoatRoughnessMap&&(u.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap),p.clearcoatNormalMap&&(u.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),u.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===Hr&&u.clearcoatNormalScale.value.negate())),p.iridescence>0&&(u.iridescence.value=p.iridescence,u.iridescenceIOR.value=p.iridescenceIOR,u.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],u.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(u.iridescenceMap.value=p.iridescenceMap),p.iridescenceThicknessMap&&(u.iridescenceThicknessMap.value=p.iridescenceThicknessMap)),p.transmission>0&&(u.transmission.value=p.transmission,u.transmissionSamplerMap.value=g.texture,u.transmissionSamplerSize.value.set(g.width,g.height),p.transmissionMap&&(u.transmissionMap.value=p.transmissionMap),u.thickness.value=p.thickness,p.thicknessMap&&(u.thicknessMap.value=p.thicknessMap),u.attenuationDistance.value=p.attenuationDistance,u.attenuationColor.value.copy(p.attenuationColor)),u.specularIntensity.value=p.specularIntensity,u.specularColor.value.copy(p.specularColor),p.specularIntensityMap&&(u.specularIntensityMap.value=p.specularIntensityMap),p.specularColorMap&&(u.specularColorMap.value=p.specularColorMap)}function o(u,p){p.matcap&&(u.matcap.value=p.matcap)}function c(u,p){u.referencePosition.value.copy(p.referencePosition),u.nearDistance.value=p.nearDistance,u.farDistance.value=p.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:e}}function g0(w,t,r,e){let d={},f={},a=[];const s=r.isWebGL2?w.getParameter(35375):0;function n(v,b){const _=b.program;e.uniformBlockBinding(v,_)}function l(v,b){let _=d[v.id];_===void 0&&(c(v),_=h(v),d[v.id]=_,v.addEventListener("dispose",p));const x=b.program;e.updateUBOMapping(v,x);const A=t.render.frame;f[v.id]!==A&&(i(v),f[v.id]=A)}function h(v){const b=m();v.__bindingPointIndex=b;const _=w.createBuffer(),x=v.__size,A=v.usage;return w.bindBuffer(35345,_),w.bufferData(35345,x,A),w.bindBuffer(35345,null),w.bindBufferBase(35345,b,_),_}function m(){for(let v=0;v<s;v++)if(a.indexOf(v)===-1)return a.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function i(v){const b=d[v.id],_=v.uniforms,x=v.__cache;w.bindBuffer(35345,b);for(let A=0,E=_.length;A<E;A++){const T=_[A];if(o(T,A,x)===!0){const C=T.__offset,R=Array.isArray(T.value)?T.value:[T.value];let P=0;for(let N=0;N<R.length;N++){const k=R[N],I=u(k);typeof k=="number"?(T.__data[0]=k,w.bufferSubData(35345,C+P,T.__data)):k.isMatrix3?(T.__data[0]=k.elements[0],T.__data[1]=k.elements[1],T.__data[2]=k.elements[2],T.__data[3]=k.elements[0],T.__data[4]=k.elements[3],T.__data[5]=k.elements[4],T.__data[6]=k.elements[5],T.__data[7]=k.elements[0],T.__data[8]=k.elements[6],T.__data[9]=k.elements[7],T.__data[10]=k.elements[8],T.__data[11]=k.elements[0]):(k.toArray(T.__data,P),P+=I.storage/Float32Array.BYTES_PER_ELEMENT)}w.bufferSubData(35345,C,T.__data)}}w.bindBuffer(35345,null)}function o(v,b,_){const x=v.value;if(_[b]===void 0){if(typeof x=="number")_[b]=x;else{const A=Array.isArray(x)?x:[x],E=[];for(let T=0;T<A.length;T++)E.push(A[T].clone());_[b]=E}return!0}else if(typeof x=="number"){if(_[b]!==x)return _[b]=x,!0}else{const A=Array.isArray(_[b])?_[b]:[_[b]],E=Array.isArray(x)?x:[x];for(let T=0;T<A.length;T++){const C=A[T];if(C.equals(E[T])===!1)return C.copy(E[T]),!0}}return!1}function c(v){const b=v.uniforms;let _=0;const x=16;let A=0;for(let E=0,T=b.length;E<T;E++){const C=b[E],R={boundary:0,storage:0},P=Array.isArray(C.value)?C.value:[C.value];for(let N=0,k=P.length;N<k;N++){const I=P[N],B=u(I);R.boundary+=B.boundary,R.storage+=B.storage}if(C.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=_,E>0){A=_%x;const N=x-A;A!==0&&N-R.boundary<0&&(_+=x-A,C.__offset=_)}_+=R.storage}return A=_%x,A>0&&(_+=x-A),v.__size=_,v.__cache={},this}function u(v){const b={boundary:0,storage:0};return typeof v=="number"?(b.boundary=4,b.storage=4):v.isVector2?(b.boundary=8,b.storage=8):v.isVector3||v.isColor?(b.boundary=16,b.storage=12):v.isVector4?(b.boundary=16,b.storage=16):v.isMatrix3?(b.boundary=48,b.storage=48):v.isMatrix4?(b.boundary=64,b.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),b}function p(v){const b=v.target;b.removeEventListener("dispose",p);const _=a.indexOf(b.__bindingPointIndex);a.splice(_,1),w.deleteBuffer(d[b.id]),delete d[b.id],delete f[b.id]}function g(){for(const v in d)w.deleteBuffer(d[v]);a=[],d={},f={}}return{bind:n,update:l,dispose:g}}function y0(){const w=ws("canvas");return w.style.display="block",w}function cd(w={}){this.isWebGLRenderer=!0;const t=w.canvas!==void 0?w.canvas:y0(),r=w.context!==void 0?w.context:null,e=w.depth!==void 0?w.depth:!0,d=w.stencil!==void 0?w.stencil:!0,f=w.antialias!==void 0?w.antialias:!1,a=w.premultipliedAlpha!==void 0?w.premultipliedAlpha:!0,s=w.preserveDrawingBuffer!==void 0?w.preserveDrawingBuffer:!1,n=w.powerPreference!==void 0?w.powerPreference:"default",l=w.failIfMajorPerformanceCaveat!==void 0?w.failIfMajorPerformanceCaveat:!1;let h;r!==null?h=r.getContextAttributes().alpha:h=w.alpha!==void 0?w.alpha:!1;let m=null,i=null;const o=[],c=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Gn,this.physicallyCorrectLights=!1,this.toneMapping=ln,this.toneMappingExposure=1;const u=this;let p=!1,g=0,v=0,b=null,_=-1,x=null;const A=new zt,E=new zt;let T=null,C=t.width,R=t.height,P=1,N=null,k=null;const I=new zt(0,0,C,R),B=new zt(0,0,C,R);let Y=!1;const W=new Fa;let H=!1,X=!1,Z=null;const q=new At,ee=new _t,L=new Re,O={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return b===null?P:1}let V=r;function J(pe,Fe){for(let Ke=0;Ke<pe.length;Ke++){const Be=pe[Ke],Je=t.getContext(Be,Fe);if(Je!==null)return Je}return null}try{const pe={alpha:!0,depth:e,stencil:d,antialias:f,premultipliedAlpha:a,preserveDrawingBuffer:s,powerPreference:n,failIfMajorPerformanceCaveat:l};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ia}`),t.addEventListener("webglcontextlost",te,!1),t.addEventListener("webglcontextrestored",ge,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),V===null){const Fe=["webgl2","webgl","experimental-webgl"];if(u.isWebGL1Renderer===!0&&Fe.shift(),V=J(Fe,pe),V===null)throw J(Fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}V.getShaderPrecisionFormat===void 0&&(V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let le,ce,ue,re,de,ve,ie,_e,Se,Te,we,De,Ie,We,$,se,Ae,Ne,ze,Ve,xe,oe,ae,K;function Q(){le=new Ag(V),ce=new wg(V,le,w),le.init(ce),oe=new u0(V,le,ce),ue=new l0(V,le,ce),re=new Rg,de=new Yy,ve=new c0(V,le,ue,de,ce,oe,re),ie=new Mg(u),_e=new jg(u),Se=new Bf(V,ce),ae=new _g(V,le,Se,ce),Te=new Cg(V,Se,re,ae),we=new Og(V,Te,Se,re),ze=new Ig(V,ce,ve),se=new Sg(de),De=new Xy(u,ie,_e,le,ce,ae,se),Ie=new m0(u,de),We=new Ky,$=new r0(le,ce),Ne=new bg(u,ie,_e,ue,we,h,a),Ae=new a0(u,we,ce),K=new g0(V,re,ce,ue),Ve=new xg(V,le,re,ce),xe=new Lg(V,le,re,ce),re.programs=De.programs,u.capabilities=ce,u.extensions=le,u.properties=de,u.renderLists=We,u.shadowMap=Ae,u.state=ue,u.info=re}Q();const G=new p0(u,V);this.xr=G,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const pe=le.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=le.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(pe){pe!==void 0&&(P=pe,this.setSize(C,R,!1))},this.getSize=function(pe){return pe.set(C,R)},this.setSize=function(pe,Fe,Ke){if(G.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=pe,R=Fe,t.width=Math.floor(pe*P),t.height=Math.floor(Fe*P),Ke!==!1&&(t.style.width=pe+"px",t.style.height=Fe+"px"),this.setViewport(0,0,pe,Fe)},this.getDrawingBufferSize=function(pe){return pe.set(C*P,R*P).floor()},this.setDrawingBufferSize=function(pe,Fe,Ke){C=pe,R=Fe,P=Ke,t.width=Math.floor(pe*Ke),t.height=Math.floor(Fe*Ke),this.setViewport(0,0,pe,Fe)},this.getCurrentViewport=function(pe){return pe.copy(A)},this.getViewport=function(pe){return pe.copy(I)},this.setViewport=function(pe,Fe,Ke,Be){pe.isVector4?I.set(pe.x,pe.y,pe.z,pe.w):I.set(pe,Fe,Ke,Be),ue.viewport(A.copy(I).multiplyScalar(P).floor())},this.getScissor=function(pe){return pe.copy(B)},this.setScissor=function(pe,Fe,Ke,Be){pe.isVector4?B.set(pe.x,pe.y,pe.z,pe.w):B.set(pe,Fe,Ke,Be),ue.scissor(E.copy(B).multiplyScalar(P).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(pe){ue.setScissorTest(Y=pe)},this.setOpaqueSort=function(pe){N=pe},this.setTransparentSort=function(pe){k=pe},this.getClearColor=function(pe){return pe.copy(Ne.getClearColor())},this.setClearColor=function(){Ne.setClearColor.apply(Ne,arguments)},this.getClearAlpha=function(){return Ne.getClearAlpha()},this.setClearAlpha=function(){Ne.setClearAlpha.apply(Ne,arguments)},this.clear=function(pe=!0,Fe=!0,Ke=!0){let Be=0;pe&&(Be|=16384),Fe&&(Be|=256),Ke&&(Be|=1024),V.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",te,!1),t.removeEventListener("webglcontextrestored",ge,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),We.dispose(),$.dispose(),de.dispose(),ie.dispose(),_e.dispose(),we.dispose(),ae.dispose(),K.dispose(),De.dispose(),G.dispose(),G.removeEventListener("sessionstart",$e),G.removeEventListener("sessionend",rt),Z&&(Z.dispose(),Z=null),nt.stop()};function te(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1;const pe=re.autoReset,Fe=Ae.enabled,Ke=Ae.autoUpdate,Be=Ae.needsUpdate,Je=Ae.type;Q(),re.autoReset=pe,Ae.enabled=Fe,Ae.autoUpdate=Ke,Ae.needsUpdate=Be,Ae.type=Je}function Ee(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function Le(pe){const Fe=pe.target;Fe.removeEventListener("dispose",Le),Ye(Fe)}function Ye(pe){ye(pe),de.remove(pe)}function ye(pe){const Fe=de.get(pe).programs;Fe!==void 0&&(Fe.forEach(function(Ke){De.releaseProgram(Ke)}),pe.isShaderMaterial&&De.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,Fe,Ke,Be,Je,pt){Fe===null&&(Fe=O);const yt=Je.isMesh&&Je.matrixWorld.determinant()<0,bt=Ct(pe,Fe,Ke,Be,Je);ue.setMaterial(Be,yt);let me=Ke.index,Xe=1;Be.wireframe===!0&&(me=Te.getWireframeAttribute(Ke),Xe=2);const tt=Ke.drawRange,He=Ke.attributes.position;let ft=tt.start*Xe,Ze=(tt.start+tt.count)*Xe;pt!==null&&(ft=Math.max(ft,pt.start*Xe),Ze=Math.min(Ze,(pt.start+pt.count)*Xe)),me!==null?(ft=Math.max(ft,0),Ze=Math.min(Ze,me.count)):He!=null&&(ft=Math.max(ft,0),Ze=Math.min(Ze,He.count));const wt=Ze-ft;if(wt<0||wt===1/0)return;ae.setup(Je,Be,bt,Ke,me);let it,mt=Ve;if(me!==null&&(it=Se.get(me),mt=xe,mt.setIndex(it)),Je.isMesh)Be.wireframe===!0?(ue.setLineWidth(Be.wireframeLinewidth*U()),mt.setMode(1)):mt.setMode(4);else if(Je.isLine){let et=Be.linewidth;et===void 0&&(et=1),ue.setLineWidth(et*U()),Je.isLineSegments?mt.setMode(1):Je.isLineLoop?mt.setMode(2):mt.setMode(3)}else Je.isPoints?mt.setMode(0):Je.isSprite&&mt.setMode(4);if(Je.isInstancedMesh)mt.renderInstances(ft,wt,Je.count);else if(Ke.isInstancedBufferGeometry){const et=Ke._maxInstanceCount!==void 0?Ke._maxInstanceCount:1/0,Xt=Math.min(Ke.instanceCount,et);mt.renderInstances(ft,wt,Xt)}else mt.render(ft,wt)},this.compile=function(pe,Fe){function Ke(Be,Je,pt){Be.transparent===!0&&Be.side===Ns?(Be.side=Hr,Be.needsUpdate=!0,xt(Be,Je,pt),Be.side=Fn,Be.needsUpdate=!0,xt(Be,Je,pt),Be.side=Ns):xt(Be,Je,pt)}i=$.get(pe),i.init(),c.push(i),pe.traverseVisible(function(Be){Be.isLight&&Be.layers.test(Fe.layers)&&(i.pushLight(Be),Be.castShadow&&i.pushShadow(Be))}),i.setupLights(u.physicallyCorrectLights),pe.traverse(function(Be){const Je=Be.material;if(Je)if(Array.isArray(Je))for(let pt=0;pt<Je.length;pt++){const yt=Je[pt];Ke(yt,pe,Be)}else Ke(Je,pe,Be)}),c.pop(),i=null};let je=null;function Ue(pe){je&&je(pe)}function $e(){nt.stop()}function rt(){nt.start()}const nt=new id;nt.setAnimationLoop(Ue),typeof self<"u"&&nt.setContext(self),this.setAnimationLoop=function(pe){je=pe,G.setAnimationLoop(pe),pe===null?nt.stop():nt.start()},G.addEventListener("sessionstart",$e),G.addEventListener("sessionend",rt),this.render=function(pe,Fe){if(Fe!==void 0&&Fe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),Fe.parent===null&&Fe.matrixWorldAutoUpdate===!0&&Fe.updateMatrixWorld(),G.enabled===!0&&G.isPresenting===!0&&(G.cameraAutoUpdate===!0&&G.updateCamera(Fe),Fe=G.getCamera()),pe.isScene===!0&&pe.onBeforeRender(u,pe,Fe,b),i=$.get(pe,c.length),i.init(),c.push(i),q.multiplyMatrices(Fe.projectionMatrix,Fe.matrixWorldInverse),W.setFromProjectionMatrix(q),X=this.localClippingEnabled,H=se.init(this.clippingPlanes,X,Fe),m=We.get(pe,o.length),m.init(),o.push(m),lt(pe,Fe,0,u.sortObjects),m.finish(),u.sortObjects===!0&&m.sort(N,k),H===!0&&se.beginShadows();const Ke=i.state.shadowsArray;if(Ae.render(Ke,pe,Fe),H===!0&&se.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ne.render(m,pe),i.setupLights(u.physicallyCorrectLights),Fe.isArrayCamera){const Be=Fe.cameras;for(let Je=0,pt=Be.length;Je<pt;Je++){const yt=Be[Je];at(m,pe,yt,yt.viewport)}}else at(m,pe,Fe);b!==null&&(ve.updateMultisampleRenderTarget(b),ve.updateRenderTargetMipmap(b)),pe.isScene===!0&&pe.onAfterRender(u,pe,Fe),ae.resetDefaultState(),_=-1,x=null,c.pop(),c.length>0?i=c[c.length-1]:i=null,o.pop(),o.length>0?m=o[o.length-1]:m=null};function lt(pe,Fe,Ke,Be){if(pe.visible===!1)return;if(pe.layers.test(Fe.layers)){if(pe.isGroup)Ke=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(Fe);else if(pe.isLight)i.pushLight(pe),pe.castShadow&&i.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||W.intersectsSprite(pe)){Be&&L.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(q);const yt=we.update(pe),bt=pe.material;bt.visible&&m.push(pe,yt,bt,Ke,L.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(pe.isSkinnedMesh&&pe.skeleton.frame!==re.render.frame&&(pe.skeleton.update(),pe.skeleton.frame=re.render.frame),!pe.frustumCulled||W.intersectsObject(pe))){Be&&L.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(q);const yt=we.update(pe),bt=pe.material;if(Array.isArray(bt)){const me=yt.groups;for(let Xe=0,tt=me.length;Xe<tt;Xe++){const He=me[Xe],ft=bt[He.materialIndex];ft&&ft.visible&&m.push(pe,yt,ft,Ke,L.z,He)}}else bt.visible&&m.push(pe,yt,bt,Ke,L.z,null)}}const pt=pe.children;for(let yt=0,bt=pt.length;yt<bt;yt++)lt(pt[yt],Fe,Ke,Be)}function at(pe,Fe,Ke,Be){const Je=pe.opaque,pt=pe.transmissive,yt=pe.transparent;i.setupLightsView(Ke),pt.length>0&&Lt(Je,Fe,Ke),Be&&ue.viewport(A.copy(Be)),Je.length>0&&St(Je,Fe,Ke),pt.length>0&&St(pt,Fe,Ke),yt.length>0&&St(yt,Fe,Ke),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function Lt(pe,Fe,Ke){const Be=ce.isWebGL2;Z===null&&(Z=new ri(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")?Mn:ti,minFilter:Bn,samples:Be&&f===!0?4:0})),u.getDrawingBufferSize(ee),Be?Z.setSize(ee.x,ee.y):Z.setSize(bo(ee.x),bo(ee.y));const Je=u.getRenderTarget();u.setRenderTarget(Z),u.clear();const pt=u.toneMapping;u.toneMapping=ln,St(pe,Fe,Ke),u.toneMapping=pt,ve.updateMultisampleRenderTarget(Z),ve.updateRenderTargetMipmap(Z),u.setRenderTarget(Je)}function St(pe,Fe,Ke){const Be=Fe.isScene===!0?Fe.overrideMaterial:null;for(let Je=0,pt=pe.length;Je<pt;Je++){const yt=pe[Je],bt=yt.object,me=yt.geometry,Xe=Be===null?yt.material:Be,tt=yt.group;bt.layers.test(Ke.layers)&&It(bt,Fe,Ke,me,Xe,tt)}}function It(pe,Fe,Ke,Be,Je,pt){pe.onBeforeRender(u,Fe,Ke,Be,Je,pt),pe.modelViewMatrix.multiplyMatrices(Ke.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),Je.onBeforeRender(u,Fe,Ke,Be,pe,pt),Je.transparent===!0&&Je.side===Ns?(Je.side=Hr,Je.needsUpdate=!0,u.renderBufferDirect(Ke,Fe,Be,Je,pe,pt),Je.side=Fn,Je.needsUpdate=!0,u.renderBufferDirect(Ke,Fe,Be,Je,pe,pt),Je.side=Ns):u.renderBufferDirect(Ke,Fe,Be,Je,pe,pt),pe.onAfterRender(u,Fe,Ke,Be,Je,pt)}function xt(pe,Fe,Ke){Fe.isScene!==!0&&(Fe=O);const Be=de.get(pe),Je=i.state.lights,pt=i.state.shadowsArray,yt=Je.state.version,bt=De.getParameters(pe,Je.state,pt,Fe,Ke),me=De.getProgramCacheKey(bt);let Xe=Be.programs;Be.environment=pe.isMeshStandardMaterial?Fe.environment:null,Be.fog=Fe.fog,Be.envMap=(pe.isMeshStandardMaterial?_e:ie).get(pe.envMap||Be.environment),Xe===void 0&&(pe.addEventListener("dispose",Le),Xe=new Map,Be.programs=Xe);let tt=Xe.get(me);if(tt!==void 0){if(Be.currentProgram===tt&&Be.lightsStateVersion===yt)return Ut(pe,bt),tt}else bt.uniforms=De.getUniforms(pe),pe.onBuild(Ke,bt,u),pe.onBeforeCompile(bt,u),tt=De.acquireProgram(bt,me),Xe.set(me,tt),Be.uniforms=bt.uniforms;const He=Be.uniforms;(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(He.clippingPlanes=se.uniform),Ut(pe,bt),Be.needsLights=ir(pe),Be.lightsStateVersion=yt,Be.needsLights&&(He.ambientLightColor.value=Je.state.ambient,He.lightProbe.value=Je.state.probe,He.directionalLights.value=Je.state.directional,He.directionalLightShadows.value=Je.state.directionalShadow,He.spotLights.value=Je.state.spot,He.spotLightShadows.value=Je.state.spotShadow,He.rectAreaLights.value=Je.state.rectArea,He.ltc_1.value=Je.state.rectAreaLTC1,He.ltc_2.value=Je.state.rectAreaLTC2,He.pointLights.value=Je.state.point,He.pointLightShadows.value=Je.state.pointShadow,He.hemisphereLights.value=Je.state.hemi,He.directionalShadowMap.value=Je.state.directionalShadowMap,He.directionalShadowMatrix.value=Je.state.directionalShadowMatrix,He.spotShadowMap.value=Je.state.spotShadowMap,He.spotLightMatrix.value=Je.state.spotLightMatrix,He.spotLightMap.value=Je.state.spotLightMap,He.pointShadowMap.value=Je.state.pointShadowMap,He.pointShadowMatrix.value=Je.state.pointShadowMatrix);const ft=tt.getUniforms(),Ze=fo.seqWithValue(ft.seq,He);return Be.currentProgram=tt,Be.uniformsList=Ze,tt}function Ut(pe,Fe){const Ke=de.get(pe);Ke.outputEncoding=Fe.outputEncoding,Ke.instancing=Fe.instancing,Ke.skinning=Fe.skinning,Ke.morphTargets=Fe.morphTargets,Ke.morphNormals=Fe.morphNormals,Ke.morphColors=Fe.morphColors,Ke.morphTargetsCount=Fe.morphTargetsCount,Ke.numClippingPlanes=Fe.numClippingPlanes,Ke.numIntersection=Fe.numClipIntersection,Ke.vertexAlphas=Fe.vertexAlphas,Ke.vertexTangents=Fe.vertexTangents,Ke.toneMapping=Fe.toneMapping}function Ct(pe,Fe,Ke,Be,Je){Fe.isScene!==!0&&(Fe=O),ve.resetTextureUnits();const pt=Fe.fog,yt=Be.isMeshStandardMaterial?Fe.environment:null,bt=b===null?u.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:Gn,me=(Be.isMeshStandardMaterial?_e:ie).get(Be.envMap||yt),Xe=Be.vertexColors===!0&&!!Ke.attributes.color&&Ke.attributes.color.itemSize===4,tt=!!Be.normalMap&&!!Ke.attributes.tangent,He=!!Ke.morphAttributes.position,ft=!!Ke.morphAttributes.normal,Ze=!!Ke.morphAttributes.color,wt=Be.toneMapped?u.toneMapping:ln,it=Ke.morphAttributes.position||Ke.morphAttributes.normal||Ke.morphAttributes.color,mt=it!==void 0?it.length:0,et=de.get(Be),Xt=i.state.lights;if(H===!0&&(X===!0||pe!==x)){const Yt=pe===x&&Be.id===_;se.setState(Be,pe,Yt)}let Et=!1;Be.version===et.__version?(et.needsLights&&et.lightsStateVersion!==Xt.state.version||et.outputEncoding!==bt||Je.isInstancedMesh&&et.instancing===!1||!Je.isInstancedMesh&&et.instancing===!0||Je.isSkinnedMesh&&et.skinning===!1||!Je.isSkinnedMesh&&et.skinning===!0||et.envMap!==me||Be.fog===!0&&et.fog!==pt||et.numClippingPlanes!==void 0&&(et.numClippingPlanes!==se.numPlanes||et.numIntersection!==se.numIntersection)||et.vertexAlphas!==Xe||et.vertexTangents!==tt||et.morphTargets!==He||et.morphNormals!==ft||et.morphColors!==Ze||et.toneMapping!==wt||ce.isWebGL2===!0&&et.morphTargetsCount!==mt)&&(Et=!0):(Et=!0,et.__version=Be.version);let Ot=et.currentProgram;Et===!0&&(Ot=xt(Be,Fe,Je));let nr=!1,Sr=!1,br=!1;const Ht=Ot.getUniforms(),Wt=et.uniforms;if(ue.useProgram(Ot.program)&&(nr=!0,Sr=!0,br=!0),Be.id!==_&&(_=Be.id,Sr=!0),nr||x!==pe){if(Ht.setValue(V,"projectionMatrix",pe.projectionMatrix),ce.logarithmicDepthBuffer&&Ht.setValue(V,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),x!==pe&&(x=pe,Sr=!0,br=!0),Be.isShaderMaterial||Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshStandardMaterial||Be.envMap){const Yt=Ht.map.cameraPosition;Yt!==void 0&&Yt.setValue(V,L.setFromMatrixPosition(pe.matrixWorld))}(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial)&&Ht.setValue(V,"isOrthographic",pe.isOrthographicCamera===!0),(Be.isMeshPhongMaterial||Be.isMeshToonMaterial||Be.isMeshLambertMaterial||Be.isMeshBasicMaterial||Be.isMeshStandardMaterial||Be.isShaderMaterial||Be.isShadowMaterial||Je.isSkinnedMesh)&&Ht.setValue(V,"viewMatrix",pe.matrixWorldInverse)}if(Je.isSkinnedMesh){Ht.setOptional(V,Je,"bindMatrix"),Ht.setOptional(V,Je,"bindMatrixInverse");const Yt=Je.skeleton;Yt&&(ce.floatVertexTextures?(Yt.boneTexture===null&&Yt.computeBoneTexture(),Ht.setValue(V,"boneTexture",Yt.boneTexture,ve),Ht.setValue(V,"boneTextureSize",Yt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ci=Ke.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0&&ce.isWebGL2===!0)&&ze.update(Je,Ke,Be,Ot),(Sr||et.receiveShadow!==Je.receiveShadow)&&(et.receiveShadow=Je.receiveShadow,Ht.setValue(V,"receiveShadow",Je.receiveShadow)),Be.isMeshGouraudMaterial&&Be.envMap!==null&&(Wt.envMap.value=me,Wt.flipEnvMap.value=me.isCubeTexture&&me.isRenderTargetTexture===!1?-1:1),Sr&&(Ht.setValue(V,"toneMappingExposure",u.toneMappingExposure),et.needsLights&&cr(Wt,br),pt&&Be.fog===!0&&Ie.refreshFogUniforms(Wt,pt),Ie.refreshMaterialUniforms(Wt,Be,P,R,Z),fo.upload(V,et.uniformsList,Wt,ve)),Be.isShaderMaterial&&Be.uniformsNeedUpdate===!0&&(fo.upload(V,et.uniformsList,Wt,ve),Be.uniformsNeedUpdate=!1),Be.isSpriteMaterial&&Ht.setValue(V,"center",Je.center),Ht.setValue(V,"modelViewMatrix",Je.modelViewMatrix),Ht.setValue(V,"normalMatrix",Je.normalMatrix),Ht.setValue(V,"modelMatrix",Je.matrixWorld),Be.isShaderMaterial||Be.isRawShaderMaterial){const Yt=Be.uniformsGroups;for(let tn=0,ui=Yt.length;tn<ui;tn++)if(ce.isWebGL2){const Ji=Yt[tn];K.update(Ji,Ot),K.bind(Ji,Ot)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ot}function cr(pe,Fe){pe.ambientLightColor.needsUpdate=Fe,pe.lightProbe.needsUpdate=Fe,pe.directionalLights.needsUpdate=Fe,pe.directionalLightShadows.needsUpdate=Fe,pe.pointLights.needsUpdate=Fe,pe.pointLightShadows.needsUpdate=Fe,pe.spotLights.needsUpdate=Fe,pe.spotLightShadows.needsUpdate=Fe,pe.rectAreaLights.needsUpdate=Fe,pe.hemisphereLights.needsUpdate=Fe}function ir(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(pe,Fe,Ke){de.get(pe.texture).__webglTexture=Fe,de.get(pe.depthTexture).__webglTexture=Ke;const Be=de.get(pe);Be.__hasExternalTextures=!0,Be.__hasExternalTextures&&(Be.__autoAllocateDepthBuffer=Ke===void 0,Be.__autoAllocateDepthBuffer||le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Be.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(pe,Fe){const Ke=de.get(pe);Ke.__webglFramebuffer=Fe,Ke.__useDefaultFramebuffer=Fe===void 0},this.setRenderTarget=function(pe,Fe=0,Ke=0){b=pe,g=Fe,v=Ke;let Be=!0,Je=null,pt=!1,yt=!1;if(pe){const me=de.get(pe);me.__useDefaultFramebuffer!==void 0?(ue.bindFramebuffer(36160,null),Be=!1):me.__webglFramebuffer===void 0?ve.setupRenderTarget(pe):me.__hasExternalTextures&&ve.rebindTextures(pe,de.get(pe.texture).__webglTexture,de.get(pe.depthTexture).__webglTexture);const Xe=pe.texture;(Xe.isData3DTexture||Xe.isDataArrayTexture||Xe.isCompressedArrayTexture)&&(yt=!0);const tt=de.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(Je=tt[Fe],pt=!0):ce.isWebGL2&&pe.samples>0&&ve.useMultisampledRTT(pe)===!1?Je=de.get(pe).__webglMultisampledFramebuffer:Je=tt,A.copy(pe.viewport),E.copy(pe.scissor),T=pe.scissorTest}else A.copy(I).multiplyScalar(P).floor(),E.copy(B).multiplyScalar(P).floor(),T=Y;if(ue.bindFramebuffer(36160,Je)&&ce.drawBuffers&&Be&&ue.drawBuffers(pe,Je),ue.viewport(A),ue.scissor(E),ue.setScissorTest(T),pt){const me=de.get(pe.texture);V.framebufferTexture2D(36160,36064,34069+Fe,me.__webglTexture,Ke)}else if(yt){const me=de.get(pe.texture),Xe=Fe||0;V.framebufferTextureLayer(36160,36064,me.__webglTexture,Ke||0,Xe)}_=-1},this.readRenderTargetPixels=function(pe,Fe,Ke,Be,Je,pt,yt){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=de.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&yt!==void 0&&(bt=bt[yt]),bt){ue.bindFramebuffer(36160,bt);try{const me=pe.texture,Xe=me.format,tt=me.type;if(Xe!==Gr&&oe.convert(Xe)!==V.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const He=tt===Mn&&(le.has("EXT_color_buffer_half_float")||ce.isWebGL2&&le.has("EXT_color_buffer_float"));if(tt!==ti&&oe.convert(tt)!==V.getParameter(35738)&&!(tt===Jr&&(ce.isWebGL2||le.has("OES_texture_float")||le.has("WEBGL_color_buffer_float")))&&!He){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Fe>=0&&Fe<=pe.width-Be&&Ke>=0&&Ke<=pe.height-Je&&V.readPixels(Fe,Ke,Be,Je,oe.convert(Xe),oe.convert(tt),pt)}finally{const me=b!==null?de.get(b).__webglFramebuffer:null;ue.bindFramebuffer(36160,me)}}},this.copyFramebufferToTexture=function(pe,Fe,Ke=0){const Be=Math.pow(2,-Ke),Je=Math.floor(Fe.image.width*Be),pt=Math.floor(Fe.image.height*Be);ve.setTexture2D(Fe,0),V.copyTexSubImage2D(3553,Ke,0,0,pe.x,pe.y,Je,pt),ue.unbindTexture()},this.copyTextureToTexture=function(pe,Fe,Ke,Be=0){const Je=Fe.image.width,pt=Fe.image.height,yt=oe.convert(Ke.format),bt=oe.convert(Ke.type);ve.setTexture2D(Ke,0),V.pixelStorei(37440,Ke.flipY),V.pixelStorei(37441,Ke.premultiplyAlpha),V.pixelStorei(3317,Ke.unpackAlignment),Fe.isDataTexture?V.texSubImage2D(3553,Be,pe.x,pe.y,Je,pt,yt,bt,Fe.image.data):Fe.isCompressedTexture?V.compressedTexSubImage2D(3553,Be,pe.x,pe.y,Fe.mipmaps[0].width,Fe.mipmaps[0].height,yt,Fe.mipmaps[0].data):V.texSubImage2D(3553,Be,pe.x,pe.y,yt,bt,Fe.image),Be===0&&Ke.generateMipmaps&&V.generateMipmap(3553),ue.unbindTexture()},this.copyTextureToTexture3D=function(pe,Fe,Ke,Be,Je=0){if(u.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const pt=pe.max.x-pe.min.x+1,yt=pe.max.y-pe.min.y+1,bt=pe.max.z-pe.min.z+1,me=oe.convert(Be.format),Xe=oe.convert(Be.type);let tt;if(Be.isData3DTexture)ve.setTexture3D(Be,0),tt=32879;else if(Be.isDataArrayTexture)ve.setTexture2DArray(Be,0),tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(37440,Be.flipY),V.pixelStorei(37441,Be.premultiplyAlpha),V.pixelStorei(3317,Be.unpackAlignment);const He=V.getParameter(3314),ft=V.getParameter(32878),Ze=V.getParameter(3316),wt=V.getParameter(3315),it=V.getParameter(32877),mt=Ke.isCompressedTexture?Ke.mipmaps[0]:Ke.image;V.pixelStorei(3314,mt.width),V.pixelStorei(32878,mt.height),V.pixelStorei(3316,pe.min.x),V.pixelStorei(3315,pe.min.y),V.pixelStorei(32877,pe.min.z),Ke.isDataTexture||Ke.isData3DTexture?V.texSubImage3D(tt,Je,Fe.x,Fe.y,Fe.z,pt,yt,bt,me,Xe,mt.data):Ke.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),V.compressedTexSubImage3D(tt,Je,Fe.x,Fe.y,Fe.z,pt,yt,bt,me,mt.data)):V.texSubImage3D(tt,Je,Fe.x,Fe.y,Fe.z,pt,yt,bt,me,Xe,mt),V.pixelStorei(3314,He),V.pixelStorei(32878,ft),V.pixelStorei(3316,Ze),V.pixelStorei(3315,wt),V.pixelStorei(32877,it),Je===0&&Be.generateMipmaps&&V.generateMipmap(tt),ue.unbindTexture()},this.initTexture=function(pe){pe.isCubeTexture?ve.setTextureCube(pe,0):pe.isData3DTexture?ve.setTexture3D(pe,0):pe.isDataArrayTexture||pe.isCompressedArrayTexture?ve.setTexture2DArray(pe,0):ve.setTexture2D(pe,0),ue.unbindTexture()},this.resetState=function(){g=0,v=0,b=null,ue.reset(),ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class v0 extends cd{}v0.prototype.isWebGL1Renderer=!0;class b0 extends Jt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.backgroundIntensity=this.backgroundIntensity),r}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class _0{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=t!==void 0?t.length/r:0,this.usage=xa,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qr()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,e){t*=this.stride,e*=r.stride;for(let d=0,f=this.stride;d<f;d++)this.array[t+d]=r.array[e+d];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(r,this.stride);return e.setUsage(this.usage),e}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Rr=new Re;class Va{constructor(t,r,e,d=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=e,this.normalized=d}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,e=this.data.count;r<e;r++)Rr.fromBufferAttribute(this,r),Rr.applyMatrix4(t),this.setXYZ(r,Rr.x,Rr.y,Rr.z);return this}applyNormalMatrix(t){for(let r=0,e=this.count;r<e;r++)Rr.fromBufferAttribute(this,r),Rr.applyNormalMatrix(t),this.setXYZ(r,Rr.x,Rr.y,Rr.z);return this}transformDirection(t){for(let r=0,e=this.count;r<e;r++)Rr.fromBufferAttribute(this,r),Rr.transformDirection(t),this.setXYZ(r,Rr.x,Rr.y,Rr.z);return this}setX(t,r){return this.normalized&&(r=Gt(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=Gt(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=Gt(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=Gt(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=Tn(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=Tn(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=Tn(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=Tn(r,this.array)),r}setXY(t,r,e){return t=t*this.data.stride+this.offset,this.normalized&&(r=Gt(r,this.array),e=Gt(e,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=e,this}setXYZ(t,r,e,d){return t=t*this.data.stride+this.offset,this.normalized&&(r=Gt(r,this.array),e=Gt(e,this.array),d=Gt(d,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=e,this.data.array[t+2]=d,this}setXYZW(t,r,e,d,f){return t=t*this.data.stride+this.offset,this.normalized&&(r=Gt(r,this.array),e=Gt(e,this.array),d=Gt(d,this.array),f=Gt(f,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=e,this.data.array[t+2]=d,this.data.array[t+3]=f,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let e=0;e<this.count;e++){const d=e*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)r.push(this.data.array[d+f])}return new Ir(new this.array.constructor(r),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Va(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let e=0;e<this.count;e++){const d=e*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)r.push(this.data.array[d+f])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Zc=new Re,Kc=new zt,Jc=new zt,x0=new Re,Qc=new At;class w0 extends Vr{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new At,this.bindMatrixInverse=new At}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,r){this.skeleton=t,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new zt,r=this.geometry.attributes.skinWeight;for(let e=0,d=r.count;e<d;e++){t.fromBufferAttribute(r,e);const f=1/t.manhattanLength();f!==1/0?t.multiplyScalar(f):t.set(1,0,0,0),r.setXYZW(e,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,r){const e=this.skeleton,d=this.geometry;Kc.fromBufferAttribute(d.attributes.skinIndex,t),Jc.fromBufferAttribute(d.attributes.skinWeight,t),Zc.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let f=0;f<4;f++){const a=Jc.getComponent(f);if(a!==0){const s=Kc.getComponent(f);Qc.multiplyMatrices(e.bones[s].matrixWorld,e.boneInverses[s]),r.addScaledVector(x0.copy(Zc).applyMatrix4(Qc),a)}}return r.applyMatrix4(this.bindMatrixInverse)}}class ud extends Jt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dd extends wr{constructor(t=null,r=1,e=1,d,f,a,s,n,l=gr,h=gr,m,i){super(null,a,s,n,l,h,d,f,m,i),this.isDataTexture=!0,this.image={data:t,width:r,height:e},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $c=new At,S0=new At;class Ha{constructor(t=[],r=[]){this.uuid=Qr(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),r.length===0)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,d=this.bones.length;e<d;e++)this.boneInverses.push(new At)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const e=new At;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,r=this.boneInverses,e=this.boneMatrices,d=this.boneTexture;for(let f=0,a=t.length;f<a;f++){const s=t[f]?t[f].matrixWorld:S0;$c.multiplyMatrices(s,r[f]),$c.toArray(e,f*16)}d!==null&&(d.needsUpdate=!0)}clone(){return new Ha(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=qu(t),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const e=new dd(r,t,t,Gr,Jr);return e.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=e,this.boneTextureSize=t,this}getBoneByName(t){for(let r=0,e=this.bones.length;r<e;r++){const d=this.bones[r];if(d.name===t)return d}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let e=0,d=t.bones.length;e<d;e++){const f=t.bones[e];let a=r[f];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),a=new ud),this.bones.push(a),this.boneInverses.push(new At().fromArray(t.boneInverses[e]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,e=this.boneInverses;for(let d=0,f=r.length;d<f;d++){const a=r[d];t.bones.push(a.uuid);const s=e[d];t.boneInverses.push(s.toArray())}return t}}class eu extends Ir{constructor(t,r,e,d=1){super(t,r,e),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=d}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const tu=new At,ru=new At,ro=[],M0=new At,cs=new Vr;class T0 extends Vr{constructor(t,r,e){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new eu(new Float32Array(e*16),16),this.instanceColor=null,this.count=e,this.frustumCulled=!1;for(let d=0;d<e;d++)this.setMatrixAt(d,M0)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,r){r.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,t*16)}raycast(t,r){const e=this.matrixWorld,d=this.count;if(cs.geometry=this.geometry,cs.material=this.material,cs.material!==void 0)for(let f=0;f<d;f++){this.getMatrixAt(f,tu),ru.multiplyMatrices(e,tu),cs.matrixWorld=ru,cs.raycast(t,ro);for(let a=0,s=ro.length;a<s;a++){const n=ro[a];n.instanceId=f,n.object=this,r.push(n)}ro.length=0}}setColorAt(t,r){this.instanceColor===null&&(this.instanceColor=new eu(new Float32Array(this.instanceMatrix.count*3),3)),r.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class hd extends $r{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new jt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const nu=new Re,iu=new Re,su=new At,la=new Ua,no=new qi;class Wa extends Jt{constructor(t=new en,r=new hd){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,e=[0];for(let d=1,f=r.count;d<f;d++)nu.fromBufferAttribute(r,d-1),iu.fromBufferAttribute(r,d),e[d]=e[d-1],e[d]+=nu.distanceTo(iu);t.setAttribute("lineDistance",new En(e,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const e=this.geometry,d=this.matrixWorld,f=t.params.Line.threshold,a=e.drawRange;if(e.boundingSphere===null&&e.computeBoundingSphere(),no.copy(e.boundingSphere),no.applyMatrix4(d),no.radius+=f,t.ray.intersectsSphere(no)===!1)return;su.copy(d).invert(),la.copy(t.ray).applyMatrix4(su);const s=f/((this.scale.x+this.scale.y+this.scale.z)/3),n=s*s,l=new Re,h=new Re,m=new Re,i=new Re,o=this.isLineSegments?2:1,c=e.index,p=e.attributes.position;if(c!==null){const g=Math.max(0,a.start),v=Math.min(c.count,a.start+a.count);for(let b=g,_=v-1;b<_;b+=o){const x=c.getX(b),A=c.getX(b+1);if(l.fromBufferAttribute(p,x),h.fromBufferAttribute(p,A),la.distanceSqToSegment(l,h,i,m)>n)continue;i.applyMatrix4(this.matrixWorld);const T=t.ray.origin.distanceTo(i);T<t.near||T>t.far||r.push({distance:T,point:m.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,a.start),v=Math.min(p.count,a.start+a.count);for(let b=g,_=v-1;b<_;b+=o){if(l.fromBufferAttribute(p,b),h.fromBufferAttribute(p,b+1),la.distanceSqToSegment(l,h,i,m)>n)continue;i.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(i);A<t.near||A>t.far||r.push({distance:A,point:m.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const d=r[e[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,a=d.length;f<a;f++){const s=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=f}}}}}const ou=new Re,au=new Re;class E0 extends Wa{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,e=[];for(let d=0,f=r.count;d<f;d+=2)ou.fromBufferAttribute(r,d),au.fromBufferAttribute(r,d+1),e[d]=d===0?0:e[d-1],e[d+1]=e[d]+ou.distanceTo(au);t.setAttribute("lineDistance",new En(e,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class j0 extends Wa{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class fd extends $r{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const lu=new At,Ta=new Ua,io=new qi,so=new Re;class A0 extends Jt{constructor(t=new en,r=new fd){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=t.material,this.geometry=t.geometry,this}raycast(t,r){const e=this.geometry,d=this.matrixWorld,f=t.params.Points.threshold,a=e.drawRange;if(e.boundingSphere===null&&e.computeBoundingSphere(),io.copy(e.boundingSphere),io.applyMatrix4(d),io.radius+=f,t.ray.intersectsSphere(io)===!1)return;lu.copy(d).invert(),Ta.copy(t.ray).applyMatrix4(lu);const s=f/((this.scale.x+this.scale.y+this.scale.z)/3),n=s*s,l=e.index,m=e.attributes.position;if(l!==null){const i=Math.max(0,a.start),o=Math.min(l.count,a.start+a.count);for(let c=i,u=o;c<u;c++){const p=l.getX(c);so.fromBufferAttribute(m,p),cu(so,p,n,d,t,r,this)}}else{const i=Math.max(0,a.start),o=Math.min(m.count,a.start+a.count);for(let c=i,u=o;c<u;c++)so.fromBufferAttribute(m,c),cu(so,c,n,d,t,r,this)}}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const d=r[e[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,a=d.length;f<a;f++){const s=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=f}}}}}function cu(w,t,r,e,d,f,a){const s=Ta.distanceSqToPoint(w);if(s<r){const n=new Re;Ta.closestPointToPoint(w,n),n.applyMatrix4(e);const l=d.ray.origin.distanceTo(n);if(l<d.near||l>d.far)return;f.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class qa extends $r{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ka,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class li extends qa{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new jt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class C0 extends $r{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ka,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}function In(w,t,r){return pd(w)?new w.constructor(w.subarray(t,r!==void 0?r:w.length)):w.slice(t,r)}function oo(w,t,r){return!w||!r&&w.constructor===t?w:typeof t.BYTES_PER_ELEMENT=="number"?new t(w):Array.prototype.slice.call(w)}function pd(w){return ArrayBuffer.isView(w)&&!(w instanceof DataView)}function L0(w){function t(d,f){return w[d]-w[f]}const r=w.length,e=new Array(r);for(let d=0;d!==r;++d)e[d]=d;return e.sort(t),e}function uu(w,t,r){const e=w.length,d=new w.constructor(e);for(let f=0,a=0;a!==e;++f){const s=r[f]*t;for(let n=0;n!==t;++n)d[a++]=w[s+n]}return d}function md(w,t,r,e){let d=1,f=w[0];for(;f!==void 0&&f[e]===void 0;)f=w[d++];if(f===void 0)return;let a=f[e];if(a!==void 0)if(Array.isArray(a))do a=f[e],a!==void 0&&(t.push(f.time),r.push.apply(r,a)),f=w[d++];while(f!==void 0);else if(a.toArray!==void 0)do a=f[e],a!==void 0&&(t.push(f.time),a.toArray(r,r.length)),f=w[d++];while(f!==void 0);else do a=f[e],a!==void 0&&(t.push(f.time),r.push(a)),f=w[d++];while(f!==void 0)}class As{constructor(t,r,e,d){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=d!==void 0?d:new r.constructor(e),this.sampleValues=r,this.valueSize=e,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let e=this._cachedIndex,d=r[e],f=r[e-1];e:{t:{let a;r:{n:if(!(t<d)){for(let s=e+2;;){if(d===void 0){if(t<f)break n;return e=r.length,this._cachedIndex=e,this.copySampleValue_(e-1)}if(e===s)break;if(f=d,d=r[++e],t<d)break t}a=r.length;break r}if(!(t>=f)){const s=r[1];t<s&&(e=2,f=s);for(let n=e-2;;){if(f===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(e===n)break;if(d=f,f=r[--e-1],t>=f)break t}a=e,e=0;break r}break e}for(;e<a;){const s=e+a>>>1;t<r[s]?a=s:e=s+1}if(d=r[e],f=r[e-1],f===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(d===void 0)return e=r.length,this._cachedIndex=e,this.copySampleValue_(e-1)}this._cachedIndex=e,this.intervalChanged_(e,f,d)}return this.interpolate_(e,f,t,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,e=this.sampleValues,d=this.valueSize,f=t*d;for(let a=0;a!==d;++a)r[a]=e[f+a];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class R0 extends As{constructor(t,r,e,d){super(t,r,e,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:hc,endingEnd:hc}}intervalChanged_(t,r,e){const d=this.parameterPositions;let f=t-2,a=t+1,s=d[f],n=d[a];if(s===void 0)switch(this.getSettings_().endingStart){case fc:f=t,s=2*r-e;break;case pc:f=d.length-2,s=r+d[f]-d[f+1];break;default:f=t,s=e}if(n===void 0)switch(this.getSettings_().endingEnd){case fc:a=t,n=2*e-r;break;case pc:a=1,n=e+d[1]-d[0];break;default:a=t-1,n=r}const l=(e-r)*.5,h=this.valueSize;this._weightPrev=l/(r-s),this._weightNext=l/(n-e),this._offsetPrev=f*h,this._offsetNext=a*h}interpolate_(t,r,e,d){const f=this.resultBuffer,a=this.sampleValues,s=this.valueSize,n=t*s,l=n-s,h=this._offsetPrev,m=this._offsetNext,i=this._weightPrev,o=this._weightNext,c=(e-r)/(d-r),u=c*c,p=u*c,g=-i*p+2*i*u-i*c,v=(1+i)*p+(-1.5-2*i)*u+(-.5+i)*c+1,b=(-1-o)*p+(1.5+o)*u+.5*c,_=o*p-o*u;for(let x=0;x!==s;++x)f[x]=g*a[h+x]+v*a[l+x]+b*a[n+x]+_*a[m+x];return f}}class P0 extends As{constructor(t,r,e,d){super(t,r,e,d)}interpolate_(t,r,e,d){const f=this.resultBuffer,a=this.sampleValues,s=this.valueSize,n=t*s,l=n-s,h=(e-r)/(d-r),m=1-h;for(let i=0;i!==s;++i)f[i]=a[l+i]*m+a[n+i]*h;return f}}class D0 extends As{constructor(t,r,e,d){super(t,r,e,d)}interpolate_(t){return this.copySampleValue_(t-1)}}class hn{constructor(t,r,e,d){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=oo(r,this.TimeBufferType),this.values=oo(e,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let e;if(r.toJSON!==this.toJSON)e=r.toJSON(t);else{e={name:t.name,times:oo(t.times,Array),values:oo(t.values,Array)};const d=t.getInterpolation();d!==t.DefaultInterpolation&&(e.interpolation=d)}return e.type=t.ValueTypeName,e}InterpolantFactoryMethodDiscrete(t){return new D0(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new P0(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new R0(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case bs:r=this.InterpolantFactoryMethodDiscrete;break;case Fi:r=this.InterpolantFactoryMethodLinear;break;case ko:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(e);return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bs;case this.InterpolantFactoryMethodLinear:return Fi;case this.InterpolantFactoryMethodSmooth:return ko}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const r=this.times;for(let e=0,d=r.length;e!==d;++e)r[e]+=t}return this}scale(t){if(t!==1){const r=this.times;for(let e=0,d=r.length;e!==d;++e)r[e]*=t}return this}trim(t,r){const e=this.times,d=e.length;let f=0,a=d-1;for(;f!==d&&e[f]<t;)++f;for(;a!==-1&&e[a]>r;)--a;if(++a,f!==0||a!==d){f>=a&&(a=Math.max(a,1),f=a-1);const s=this.getValueSize();this.times=In(e,f,a),this.values=In(this.values,f*s,a*s)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const e=this.times,d=this.values,f=e.length;f===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let s=0;s!==f;s++){const n=e[s];if(typeof n=="number"&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,n),t=!1;break}if(a!==null&&a>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,n,a),t=!1;break}a=n}if(d!==void 0&&pd(d))for(let s=0,n=d.length;s!==n;++s){const l=d[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),t=!1;break}}return t}optimize(){const t=In(this.times),r=In(this.values),e=this.getValueSize(),d=this.getInterpolation()===ko,f=t.length-1;let a=1;for(let s=1;s<f;++s){let n=!1;const l=t[s],h=t[s+1];if(l!==h&&(s!==1||l!==t[0]))if(d)n=!0;else{const m=s*e,i=m-e,o=m+e;for(let c=0;c!==e;++c){const u=r[m+c];if(u!==r[i+c]||u!==r[o+c]){n=!0;break}}}if(n){if(s!==a){t[a]=t[s];const m=s*e,i=a*e;for(let o=0;o!==e;++o)r[i+o]=r[m+o]}++a}}if(f>0){t[a]=t[f];for(let s=f*e,n=a*e,l=0;l!==e;++l)r[n+l]=r[s+l];++a}return a!==t.length?(this.times=In(t,0,a),this.values=In(r,0,a*e)):(this.times=t,this.values=r),this}clone(){const t=In(this.times,0),r=In(this.values,0),e=this.constructor,d=new e(this.name,t,r);return d.createInterpolant=this.createInterpolant,d}}hn.prototype.TimeBufferType=Float32Array;hn.prototype.ValueBufferType=Float32Array;hn.prototype.DefaultInterpolation=Fi;class Yi extends hn{}Yi.prototype.ValueTypeName="bool";Yi.prototype.ValueBufferType=Array;Yi.prototype.DefaultInterpolation=bs;Yi.prototype.InterpolantFactoryMethodLinear=void 0;Yi.prototype.InterpolantFactoryMethodSmooth=void 0;class gd extends hn{}gd.prototype.ValueTypeName="color";class Ss extends hn{}Ss.prototype.ValueTypeName="number";class I0 extends As{constructor(t,r,e,d){super(t,r,e,d)}interpolate_(t,r,e,d){const f=this.resultBuffer,a=this.sampleValues,s=this.valueSize,n=(e-r)/(d-r);let l=t*s;for(let h=l+s;l!==h;l+=4)un.slerpFlat(f,0,a,l-s,a,l,n);return f}}class ii extends hn{InterpolantFactoryMethodLinear(t){return new I0(this.times,this.values,this.getValueSize(),t)}}ii.prototype.ValueTypeName="quaternion";ii.prototype.DefaultInterpolation=Fi;ii.prototype.InterpolantFactoryMethodSmooth=void 0;class Zi extends hn{}Zi.prototype.ValueTypeName="string";Zi.prototype.ValueBufferType=Array;Zi.prototype.DefaultInterpolation=bs;Zi.prototype.InterpolantFactoryMethodLinear=void 0;Zi.prototype.InterpolantFactoryMethodSmooth=void 0;class Ms extends hn{}Ms.prototype.ValueTypeName="vector";class O0{constructor(t,r=-1,e,d=$h){this.name=t,this.tracks=e,this.duration=r,this.blendMode=d,this.uuid=Qr(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],e=t.tracks,d=1/(t.fps||1);for(let a=0,s=e.length;a!==s;++a)r.push(N0(e[a]).scale(d));const f=new this(t.name,t.duration,r,t.blendMode);return f.uuid=t.uuid,f}static toJSON(t){const r=[],e=t.tracks,d={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let f=0,a=e.length;f!==a;++f)r.push(hn.toJSON(e[f]));return d}static CreateFromMorphTargetSequence(t,r,e,d){const f=r.length,a=[];for(let s=0;s<f;s++){let n=[],l=[];n.push((s+f-1)%f,s,(s+1)%f),l.push(0,1,0);const h=L0(n);n=uu(n,1,h),l=uu(l,1,h),!d&&n[0]===0&&(n.push(f),l.push(l[0])),a.push(new Ss(".morphTargetInfluences["+r[s].name+"]",n,l).scale(1/e))}return new this(t,-1,a)}static findByName(t,r){let e=t;if(!Array.isArray(t)){const d=t;e=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<e.length;d++)if(e[d].name===r)return e[d];return null}static CreateClipsFromMorphTargetSequences(t,r,e){const d={},f=/^([\w-]*?)([\d]+)$/;for(let s=0,n=t.length;s<n;s++){const l=t[s],h=l.name.match(f);if(h&&h.length>1){const m=h[1];let i=d[m];i||(d[m]=i=[]),i.push(l)}}const a=[];for(const s in d)a.push(this.CreateFromMorphTargetSequence(s,d[s],r,e));return a}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const e=function(m,i,o,c,u){if(o.length!==0){const p=[],g=[];md(o,p,g,c),p.length!==0&&u.push(new m(i,p,g))}},d=[],f=t.name||"default",a=t.fps||30,s=t.blendMode;let n=t.length||-1;const l=t.hierarchy||[];for(let m=0;m<l.length;m++){const i=l[m].keys;if(!(!i||i.length===0))if(i[0].morphTargets){const o={};let c;for(c=0;c<i.length;c++)if(i[c].morphTargets)for(let u=0;u<i[c].morphTargets.length;u++)o[i[c].morphTargets[u]]=-1;for(const u in o){const p=[],g=[];for(let v=0;v!==i[c].morphTargets.length;++v){const b=i[c];p.push(b.time),g.push(b.morphTarget===u?1:0)}d.push(new Ss(".morphTargetInfluence["+u+"]",p,g))}n=o.length*a}else{const o=".bones["+r[m].name+"]";e(Ms,o+".position",i,"pos",d),e(ii,o+".quaternion",i,"rot",d),e(Ms,o+".scale",i,"scl",d)}}return d.length===0?null:new this(f,n,d,s)}resetDuration(){const t=this.tracks;let r=0;for(let e=0,d=t.length;e!==d;++e){const f=this.tracks[e];r=Math.max(r,f.times[f.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function k0(w){switch(w.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ss;case"vector":case"vector2":case"vector3":case"vector4":return Ms;case"color":return gd;case"quaternion":return ii;case"bool":case"boolean":return Yi;case"string":return Zi}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+w)}function N0(w){if(w.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=k0(w.type);if(w.times===void 0){const r=[],e=[];md(w.keys,r,e,"value"),w.times=r,w.values=e}return t.parse!==void 0?t.parse(w):new t(w.name,w.times,w.values,w.interpolation)}const Gi={enabled:!1,files:{},add:function(w,t){this.enabled!==!1&&(this.files[w]=t)},get:function(w){if(this.enabled!==!1)return this.files[w]},remove:function(w){delete this.files[w]},clear:function(){this.files={}}};class U0{constructor(t,r,e){const d=this;let f=!1,a=0,s=0,n;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=e,this.itemStart=function(h){s++,f===!1&&d.onStart!==void 0&&d.onStart(h,a,s),f=!0},this.itemEnd=function(h){a++,d.onProgress!==void 0&&d.onProgress(h,a,s),a===s&&(f=!1,d.onLoad!==void 0&&d.onLoad())},this.itemError=function(h){d.onError!==void 0&&d.onError(h)},this.resolveURL=function(h){return n?n(h):h},this.setURLModifier=function(h){return n=h,this},this.addHandler=function(h,m){return l.push(h,m),this},this.removeHandler=function(h){const m=l.indexOf(h);return m!==-1&&l.splice(m,2),this},this.getHandler=function(h){for(let m=0,i=l.length;m<i;m+=2){const o=l[m],c=l[m+1];if(o.global&&(o.lastIndex=0),o.test(h))return c}return null}}}const F0=new U0;class Ki{constructor(t){this.manager=t!==void 0?t:F0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){const e=this;return new Promise(function(d,f){e.load(t,d,r,f)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const _n={};class B0 extends Error{constructor(t,r){super(t),this.response=r}}class Xa extends Ki{constructor(t){super(t)}load(t,r,e,d){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const f=Gi.get(t);if(f!==void 0)return this.manager.itemStart(t),setTimeout(()=>{r&&r(f),this.manager.itemEnd(t)},0),f;if(_n[t]!==void 0){_n[t].push({onLoad:r,onProgress:e,onError:d});return}_n[t]=[],_n[t].push({onLoad:r,onProgress:e,onError:d});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,n=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const h=_n[t],m=l.body.getReader(),i=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),o=i?parseInt(i):0,c=o!==0;let u=0;const p=new ReadableStream({start(g){v();function v(){m.read().then(({done:b,value:_})=>{if(b)g.close();else{u+=_.byteLength;const x=new ProgressEvent("progress",{lengthComputable:c,loaded:u,total:o});for(let A=0,E=h.length;A<E;A++){const T=h[A];T.onProgress&&T.onProgress(x)}g.enqueue(_),v()}})}}});return new Response(p)}else throw new B0(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(n){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(h=>new DOMParser().parseFromString(h,s));case"json":return l.json();default:if(s===void 0)return l.text();{const m=/charset="?([^;"\s]*)"?/i.exec(s),i=m&&m[1]?m[1].toLowerCase():void 0,o=new TextDecoder(i);return l.arrayBuffer().then(c=>o.decode(c))}}}).then(l=>{Gi.add(t,l);const h=_n[t];delete _n[t];for(let m=0,i=h.length;m<i;m++){const o=h[m];o.onLoad&&o.onLoad(l)}}).catch(l=>{const h=_n[t];if(h===void 0)throw this.manager.itemError(t),l;delete _n[t];for(let m=0,i=h.length;m<i;m++){const o=h[m];o.onError&&o.onError(l)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class G0 extends Ki{constructor(t){super(t)}load(t,r,e,d){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const f=this,a=Gi.get(t);if(a!==void 0)return f.manager.itemStart(t),setTimeout(function(){r&&r(a),f.manager.itemEnd(t)},0),a;const s=ws("img");function n(){h(),Gi.add(t,this),r&&r(this),f.manager.itemEnd(t)}function l(m){h(),d&&d(m),f.manager.itemError(t),f.manager.itemEnd(t)}function h(){s.removeEventListener("load",n,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",n,!1),s.addEventListener("error",l,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),f.manager.itemStart(t),s.src=t,s}}class z0 extends Ki{constructor(t){super(t)}load(t,r,e,d){const f=this,a=new dd,s=new Xa(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(f.withCredentials),s.load(t,function(n){const l=f.parse(n);l&&(l.image!==void 0?a.image=l.image:l.data!==void 0&&(a.image.width=l.width,a.image.height=l.height,a.image.data=l.data),a.wrapS=l.wrapS!==void 0?l.wrapS:Or,a.wrapT=l.wrapT!==void 0?l.wrapT:Or,a.magFilter=l.magFilter!==void 0?l.magFilter:dr,a.minFilter=l.minFilter!==void 0?l.minFilter:dr,a.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.encoding!==void 0&&(a.encoding=l.encoding),l.flipY!==void 0&&(a.flipY=l.flipY),l.format!==void 0&&(a.format=l.format),l.type!==void 0&&(a.type=l.type),l.mipmaps!==void 0&&(a.mipmaps=l.mipmaps,a.minFilter=Bn),l.mipmapCount===1&&(a.minFilter=dr),l.generateMipmaps!==void 0&&(a.generateMipmaps=l.generateMipmaps),a.needsUpdate=!0,r&&r(a,l))},e,d),a}}class V0 extends Ki{constructor(t){super(t)}load(t,r,e,d){const f=new wr,a=new G0(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(s){f.image=s,f.needsUpdate=!0,r!==void 0&&r(f)},e,d),f}}class So extends Jt{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new jt(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),r}}const ca=new At,du=new Re,hu=new Re;class Ya{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _t(512,512),this.map=null,this.mapPass=null,this.matrix=new At,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Fa,this._frameExtents=new _t(1,1),this._viewportCount=1,this._viewports=[new zt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,e=this.matrix;du.setFromMatrixPosition(t.matrixWorld),r.position.copy(du),hu.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(hu),r.updateMatrixWorld(),ca.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ca),e.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),e.multiply(ca)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class H0 extends Ya{constructor(){super(new Dr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,e=xs*2*t.angle*this.focus,d=this.mapSize.width/this.mapSize.height,f=t.distance||r.far;(e!==r.fov||d!==r.aspect||f!==r.far)&&(r.fov=e,r.aspect=d,r.far=f,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class W0 extends So{constructor(t,r,e=0,d=Math.PI/3,f=0,a=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jt.DefaultUp),this.updateMatrix(),this.target=new Jt,this.distance=e,this.angle=d,this.penumbra=f,this.decay=a,this.map=null,this.shadow=new H0}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const fu=new At,us=new Re,ua=new Re;class q0 extends Ya{constructor(){super(new Dr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _t(4,2),this._viewportCount=6,this._viewports=[new zt(2,1,1,1),new zt(0,1,1,1),new zt(3,1,1,1),new zt(1,1,1,1),new zt(3,0,1,1),new zt(1,0,1,1)],this._cubeDirections=[new Re(1,0,0),new Re(-1,0,0),new Re(0,0,1),new Re(0,0,-1),new Re(0,1,0),new Re(0,-1,0)],this._cubeUps=[new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,0,1),new Re(0,0,-1)]}updateMatrices(t,r=0){const e=this.camera,d=this.matrix,f=t.distance||e.far;f!==e.far&&(e.far=f,e.updateProjectionMatrix()),us.setFromMatrixPosition(t.matrixWorld),e.position.copy(us),ua.copy(e.position),ua.add(this._cubeDirections[r]),e.up.copy(this._cubeUps[r]),e.lookAt(ua),e.updateMatrixWorld(),d.makeTranslation(-us.x,-us.y,-us.z),fu.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fu)}}class X0 extends So{constructor(t,r,e=0,d=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=e,this.decay=d,this.shadow=new q0}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Y0 extends Ya{constructor(){super(new Ga(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}let yd=class extends So{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jt.DefaultUp),this.updateMatrix(),this.target=new Jt,this.shadow=new Y0}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},Z0=class extends So{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}};class ei{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let r="";for(let e=0,d=t.length;e<d;e++)r+=String.fromCharCode(t[e]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return r===-1?"./":t.slice(0,r+1)}static resolveURL(t,r){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class K0 extends Ki{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,e,d){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const f=this,a=Gi.get(t);if(a!==void 0)return f.manager.itemStart(t),setTimeout(function(){r&&r(a),f.manager.itemEnd(t)},0),a;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then(function(n){return n.blob()}).then(function(n){return createImageBitmap(n,Object.assign(f.options,{colorSpaceConversion:"none"}))}).then(function(n){Gi.add(t,n),r&&r(n),f.manager.itemEnd(t)}).catch(function(n){d&&d(n),f.manager.itemError(t),f.manager.itemEnd(t)}),f.manager.itemStart(t)}}const Za="\\[\\]\\.:\\/",J0=new RegExp("["+Za+"]","g"),Ka="[^"+Za+"]",Q0="[^"+Za.replace("\\.","")+"]",$0=/((?:WC+[\/:])*)/.source.replace("WC",Ka),ev=/(WCOD+)?/.source.replace("WCOD",Q0),tv=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ka),rv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ka),nv=new RegExp("^"+$0+ev+tv+rv+"$"),iv=["material","materials","bones","map"];class sv{constructor(t,r,e){const d=e||Nt.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,d)}getValue(t,r){this.bind();const e=this._targetGroup.nCachedObjects_,d=this._bindings[e];d!==void 0&&d.getValue(t,r)}setValue(t,r){const e=this._bindings;for(let d=this._targetGroup.nCachedObjects_,f=e.length;d!==f;++d)e[d].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,e=t.length;r!==e;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,e=t.length;r!==e;++r)t[r].unbind()}}class Nt{constructor(t,r,e){this.path=r,this.parsedPath=e||Nt.parseTrackName(r),this.node=Nt.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,e){return t&&t.isAnimationObjectGroup?new Nt.Composite(t,r,e):new Nt(t,r,e)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(J0,"")}static parseTrackName(t){const r=nv.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const e={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},d=e.nodeName&&e.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){const f=e.nodeName.substring(d+1);iv.indexOf(f)!==-1&&(e.nodeName=e.nodeName.substring(0,d),e.objectName=f)}if(e.propertyName===null||e.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){const e=t.skeleton.getBoneByName(r);if(e!==void 0)return e}if(t.children){const e=function(f){for(let a=0;a<f.length;a++){const s=f[a];if(s.name===r||s.uuid===r)return s;const n=e(s.children);if(n)return n}return null},d=e(t.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const e=this.resolvedProperty;for(let d=0,f=e.length;d!==f;++d)t[r++]=e[d]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const e=this.resolvedProperty;for(let d=0,f=e.length;d!==f;++d)e[d]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const e=this.resolvedProperty;for(let d=0,f=e.length;d!==f;++d)e[d]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const e=this.resolvedProperty;for(let d=0,f=e.length;d!==f;++d)e[d]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,e=r.objectName,d=r.propertyName;let f=r.propertyIndex;if(t||(t=Nt.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(e){let l=r.objectIndex;switch(e){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===l){l=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[e]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[e]}if(l!==void 0){if(t[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[l]}}const a=t[d];if(a===void 0){const l=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+d+" but it wasn't found.",t);return}let s=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let n=this.BindingType.Direct;if(f!==void 0){if(d==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[f]!==void 0&&(f=t.morphTargetDictionary[f])}n=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=f}else a.fromArray!==void 0&&a.toArray!==void 0?(n=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(n=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=d;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nt.Composite=sv;Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray];Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class pu{constructor(t=1,r=0,e=0){return this.radius=t,this.phi=r,this.theta=e,this}set(t,r,e){return this.radius=t,this.phi=r,this.theta=e,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,e){return this.radius=Math.sqrt(t*t+r*r+e*e),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,e),this.phi=Math.acos(xr(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Sn=ov();function ov(){const w=new ArrayBuffer(4),t=new Float32Array(w),r=new Uint32Array(w),e=new Uint32Array(512),d=new Uint32Array(512);for(let n=0;n<256;++n){const l=n-127;l<-27?(e[n]=0,e[n|256]=32768,d[n]=24,d[n|256]=24):l<-14?(e[n]=1024>>-l-14,e[n|256]=1024>>-l-14|32768,d[n]=-l-1,d[n|256]=-l-1):l<=15?(e[n]=l+15<<10,e[n|256]=l+15<<10|32768,d[n]=13,d[n|256]=13):l<128?(e[n]=31744,e[n|256]=64512,d[n]=24,d[n|256]=24):(e[n]=31744,e[n|256]=64512,d[n]=13,d[n|256]=13)}const f=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let n=1;n<1024;++n){let l=n<<13,h=0;for(;!(l&8388608);)l<<=1,h-=8388608;l&=-8388609,h+=947912704,f[n]=l|h}for(let n=1024;n<2048;++n)f[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)a[n]=n<<23;a[31]=1199570944,a[32]=2147483648;for(let n=33;n<63;++n)a[n]=2147483648+(n-32<<23);a[63]=3347054592;for(let n=1;n<64;++n)n!==32&&(s[n]=1024);return{floatView:t,uint32View:r,baseTable:e,shiftTable:d,mantissaTable:f,exponentTable:a,offsetTable:s}}function av(w){Math.abs(w)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),w=xr(w,-65504,65504),Sn.floatView[0]=w;const t=Sn.uint32View[0],r=t>>23&511;return Sn.baseTable[r]+((t&8388607)>>Sn.shiftTable[r])}function lv(w){const t=w>>10;return Sn.uint32View[0]=Sn.mantissaTable[Sn.offsetTable[t]+(w&1023)]+Sn.exponentTable[t],Sn.floatView[0]}var ao=Object.freeze({__proto__:null,toHalfFloat:av,fromHalfFloat:lv});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ia}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ia);const vd={},mu={};function Cs(w){const t=Il(vd),r=Il(mu)||t.scene;return w&&(Nu(mu,w),r.add(w),Ra(()=>{r.remove(w),t.invalidate()})),{root:t,parent:r,self:w}}function cv(w){return Nu(vd,w),w}function gu(w){let t;const r=w[37].default,e=Ru(r,w,w[36],null);return{c(){e&&e.c()},m(d,f){e&&e.m(d,f),t=!0},p(d,f){e&&e.p&&(!t||f[1]&32)&&Iu(e,r,d,d[36],t?Du(r,d[36],f,null):Ou(d[36]),null)},i(d){t||(er(e,d),t=!0)},o(d){yr(e,d),t=!1},d(d){e&&e.d(d)}}}function uv(w){let t,r,e,d,f,a,s=w[0].scene&&gu(w);return{c(){t=Dt("div"),r=Dt("canvas"),e=vr(),s&&s.c(),st(r,"class","svelte-1uqz219"),st(t,"class","container svelte-1uqz219")},m(n,l){Vt(n,t,l),gt(t,r),w[38](r),gt(t,e),s&&s.m(t,null),w[39](t),d=!0,f||(a=zd(window,"resize",w[2]),f=!0)},p(n,l){n[0].scene?s?(s.p(n,l),l[0]&1&&er(s,1)):(s=gu(n),s.c(),er(s,1),s.m(t,null)):s&&(Pa(),yr(s,1,1,()=>{s=null}),Da())},i(n){d||(er(s),d=!0)},o(n){yr(s),d=!1},d(n){n&&tr(t),w[38](null),s&&s.d(),w[39](null),f=!1,a()}}}function dv(w,t,r){let{$$slots:e={},$$scope:d}=t,{background:f=null}=t,{environment:a=null}=t,{fog:s=null}=t,{overrideMaterial:n=null}=t,{precision:l="highp"}=t,{powerPreference:h="default"}=t,{alpha:m=!1}=t,{premultipliedAlpha:i=!0}=t,{antialias:o=!1}=t,{stencil:c=!0}=t,{preserveDrawingBuffer:u=!1}=t,{failIfMajorPerformanceCaveat:p=!1}=t,{depth:g=!0}=t,{logarithmicDepthBuffer:v=!1}=t,{autoClear:b=!0}=t,{autoClearColor:_=!0}=t,{autoClearDepth:x=!0}=t,{autoClearStencil:A=!0}=t,{checkShaderErrors:E=!0}=t,{gammaFactor:T=2}=t,{localClippingEnabled:C=!1}=t,{physicallyCorrectLights:R=!1}=t,{outputEncoding:P=void 0}=t,{clippingPlanes:N=[]}=t,{shadows:k=void 0}=t,{toneMapping:I=ln}=t,{toneMappingExposure:B=1}=t,{width:Y=void 0}=t,{height:W=void 0}=t,{pixelRatio:H=typeof devicePixelRatio<"u"?devicePixelRatio:1}=t;function X(){return J.renderer.info}let Z,q,ee,L=null;const O=re=>re(),U=()=>{L||(L=requestAnimationFrame(()=>{L=null,V.forEach(O),J.renderer.render(J.scene,J.camera.object)}))},V=[],J=cv({canvas:null,scene:null,renderer:null,camera:{object:null,callback:()=>{console.warn("no camera is set")},set:(re,de)=>{r(0,J.camera.object=re,J),r(0,J.camera.callback=de,J),J.controls.callback&&J.controls.callback(J.camera.object,J.canvas),U()}},controls:{object:null,callback:null,set:re=>{r(0,J.controls.callback=re,J),J.camera.object&&r(0,J.controls.object=re(J.camera.object,J.canvas),J)}},before_render(re){V.push(re),Ra(()=>{const de=V.indexOf(re);V.splice(de,1)})},invalidate:U});Hi(()=>(r(0,J.renderer=new cd({canvas:J.canvas,precision:l,powerPreference:h,alpha:m,premultipliedAlpha:i,antialias:o,stencil:c,preserveDrawingBuffer:u,failIfMajorPerformanceCaveat:p,depth:g,logarithmicDepthBuffer:v}),J),r(0,J.scene=new b0,J),le(),()=>{console.log("disposing of renderer"),J.renderer.forceContextLoss(),J.renderer.dispose()}));const le=()=>{Y===void 0&&r(34,Z=ee.clientWidth/H),W===void 0&&r(35,q=ee.clientHeight/H)};function ce(re){go[re?"unshift":"push"](()=>{J.canvas=re,r(0,J),r(3,f),r(4,a),r(5,s),r(6,n),r(17,b),r(18,_),r(19,x),r(20,A),r(21,E),r(22,T),r(23,C),r(24,R),r(25,P),r(26,N),r(28,I),r(29,B),r(27,k)})}function ue(re){go[re?"unshift":"push"](()=>{ee=re,r(1,ee)})}return w.$$set=re=>{"background"in re&&r(3,f=re.background),"environment"in re&&r(4,a=re.environment),"fog"in re&&r(5,s=re.fog),"overrideMaterial"in re&&r(6,n=re.overrideMaterial),"precision"in re&&r(7,l=re.precision),"powerPreference"in re&&r(8,h=re.powerPreference),"alpha"in re&&r(9,m=re.alpha),"premultipliedAlpha"in re&&r(10,i=re.premultipliedAlpha),"antialias"in re&&r(11,o=re.antialias),"stencil"in re&&r(12,c=re.stencil),"preserveDrawingBuffer"in re&&r(13,u=re.preserveDrawingBuffer),"failIfMajorPerformanceCaveat"in re&&r(14,p=re.failIfMajorPerformanceCaveat),"depth"in re&&r(15,g=re.depth),"logarithmicDepthBuffer"in re&&r(16,v=re.logarithmicDepthBuffer),"autoClear"in re&&r(17,b=re.autoClear),"autoClearColor"in re&&r(18,_=re.autoClearColor),"autoClearDepth"in re&&r(19,x=re.autoClearDepth),"autoClearStencil"in re&&r(20,A=re.autoClearStencil),"checkShaderErrors"in re&&r(21,E=re.checkShaderErrors),"gammaFactor"in re&&r(22,T=re.gammaFactor),"localClippingEnabled"in re&&r(23,C=re.localClippingEnabled),"physicallyCorrectLights"in re&&r(24,R=re.physicallyCorrectLights),"outputEncoding"in re&&r(25,P=re.outputEncoding),"clippingPlanes"in re&&r(26,N=re.clippingPlanes),"shadows"in re&&r(27,k=re.shadows),"toneMapping"in re&&r(28,I=re.toneMapping),"toneMappingExposure"in re&&r(29,B=re.toneMappingExposure),"width"in re&&r(30,Y=re.width),"height"in re&&r(31,W=re.height),"pixelRatio"in re&&r(32,H=re.pixelRatio),"$$scope"in re&&r(36,d=re.$$scope)},w.$$.update=()=>{if(w.$$.dirty[0]&121&&J.scene&&(r(0,J.scene.background=f,J),r(0,J.scene.environment=a,J),r(0,J.scene.fog=s,J),r(0,J.scene.overrideMaterial=n,J)),w.$$.dirty[0]&1073610753&&J.renderer&&(r(0,J.renderer.autoClear=b,J),r(0,J.renderer.autoClearColor=_,J),r(0,J.renderer.autoClearDepth=x,J),r(0,J.renderer.autoClearStencil=A,J),r(0,J.renderer.debug.checkShaderErrors=E,J),r(0,J.renderer.gammaFactor=T,J),r(0,J.renderer.localClippingEnabled=C,J),r(0,J.renderer.physicallyCorrectLights=R,J),P!=null&&r(0,J.renderer.outputEncoding=P,J),r(0,J.renderer.clippingPlanes=N,J),r(0,J.renderer.toneMapping=I,J),r(0,J.renderer.toneMappingExposure=B,J),k?(r(0,J.renderer.shadowMap.enabled=!0,J),r(0,J.renderer.shadowMap.autoUpdate=!0,J),r(0,J.renderer.shadowMap.type=k===!0?Oa:k,J)):r(0,J.renderer.shadowMap.enabled=!1,J),U()),w.$$.dirty[0]&1073741825|w.$$.dirty[1]&27&&J.renderer){const re=Y!==void 0?Y:Z,de=W!==void 0?W:q;J.renderer.setSize(re,de,!1),J.camera.callback(re,de),J.renderer.setPixelRatio(H),U()}},[J,ee,le,f,a,s,n,l,h,m,i,o,c,u,p,g,v,b,_,x,A,E,T,C,R,P,N,k,I,B,Y,W,H,X,Z,q,d,e,ce,ue]}class hv extends dn{constructor(t){super(),Cr(this,t,dv,uv,Ar,{background:3,environment:4,fog:5,overrideMaterial:6,precision:7,powerPreference:8,alpha:9,premultipliedAlpha:10,antialias:11,stencil:12,preserveDrawingBuffer:13,failIfMajorPerformanceCaveat:14,depth:15,logarithmicDepthBuffer:16,autoClear:17,autoClearColor:18,autoClearDepth:19,autoClearStencil:20,checkShaderErrors:21,gammaFactor:22,localClippingEnabled:23,physicallyCorrectLights:24,outputEncoding:25,clippingPlanes:26,shadows:27,toneMapping:28,toneMappingExposure:29,width:30,height:31,pixelRatio:32,info:33},null,[-1,-1])}get info(){return this.$$.ctx[33]}}function fv(w,t,r,e){w.position.set(t[0],t[1],t[2]),w.rotation.set(r[0],r[1],r[2],r[3]),typeof e=="number"?w.scale.set(e,e,e):w.scale.set(e[0],e[1],e[2])}let pv=[0,0,0],mv=[0,0,0],gv=[1,1,1];new en;new C0;function yu(w){let t;const r=w[6].default,e=Ru(r,w,w[5],null);return{c(){e&&e.c()},m(d,f){e&&e.m(d,f),t=!0},p(d,f){e&&e.p&&(!t||f&32)&&Iu(e,r,d,d[5],t?Du(r,d[5],f,null):Ou(d[5]),null)},i(d){t||(er(e,d),t=!0)},o(d){yr(e,d),t=!1},d(d){e&&e.d(d)}}}function yv(w){let t,r,e=w[0]&&yu(w);return{c(){e&&e.c(),t=Ca()},m(d,f){e&&e.m(d,f),Vt(d,t,f),r=!0},p(d,[f]){d[0]?e?(e.p(d,f),f&1&&er(e,1)):(e=yu(d),e.c(),er(e,1),e.m(t.parentNode,t)):e&&(Pa(),yr(e,1,1,()=>{e=null}),Da())},i(d){r||(er(e),r=!0)},o(d){yr(e),r=!1},d(d){e&&e.d(d),d&&tr(t)}}}function vv(w,t,r){let{$$slots:e={},$$scope:d}=t,{object:f}=t,{position:a=pv}=t,{rotation:s=mv}=t,{scale:n=gv}=t;const{root:l,self:h}=Cs(new Jt);let m;return w.$$set=i=>{"object"in i&&r(0,f=i.object),"position"in i&&r(1,a=i.position),"rotation"in i&&r(2,s=i.rotation),"scale"in i&&r(3,n=i.scale),"$$scope"in i&&r(5,d=i.$$scope)},w.$$.update=()=>{w.$$.dirty&17&&(m&&h.remove(m),f&&h.add(f),r(4,m=f),l.invalidate()),w.$$.dirty&14&&(fv(h,a,s,n),l.invalidate())},[f,a,s,n,m,d,e]}class bv extends dn{constructor(t){super(),Cr(this,t,vv,yv,Ar,{object:0,position:1,rotation:2,scale:3})}}function _v(w,t,r){let{fov:e=45}=t,{near:d=.1}=t,{far:f=2e3}=t,{zoom:a=1}=t,{viewOffset:s=void 0}=t,{position:n=[0,0,5]}=t,{target:l=[0,0,0]}=t;const{root:h,self:m}=Cs(new Dr),i=new Re;return h.camera.set(m,(o,c)=>{r(7,m.aspect=o/c,m),m.updateProjectionMatrix()}),w.$$set=o=>{"fov"in o&&r(0,e=o.fov),"near"in o&&r(1,d=o.near),"far"in o&&r(2,f=o.far),"zoom"in o&&r(3,a=o.zoom),"viewOffset"in o&&r(4,s=o.viewOffset),"position"in o&&r(5,n=o.position),"target"in o&&r(6,l=o.target)},w.$$.update=()=>{w.$$.dirty&255&&(r(7,m.fov=e,m),r(7,m.near=d,m),r(7,m.far=f,m),r(7,m.zoom=a,m),s&&m.setViewOffset(s.fullWidth,s.fullHeight,s.x,s.y,s.width,s.height),m.position.set(n[0],n[1],n[2]),i.set(l[0],l[1],l[2]),m.lookAt(i),m.updateProjectionMatrix(),h.invalidate())},[e,d,f,a,s,n,l,m]}class xv extends dn{constructor(t){super(),Cr(this,t,_v,null,Ar,{fov:0,near:1,far:2,zoom:3,viewOffset:4,position:5,target:6})}}const vu={type:"change"},da={type:"start"},bu={type:"end"};class wv extends ai{constructor(t,r){super(),this.object=t,this.domElement=r,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Re,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:xn.ROTATE,MIDDLE:xn.DOLLY,RIGHT:xn.PAN},this.touches={ONE:kn.ROTATE,TWO:kn.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(oe){oe.addEventListener("keydown",We),this._domElementKeyEvents=oe},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(vu),e.update(),f=d.NONE},this.update=function(){const oe=new Re,ae=new un().setFromUnitVectors(t.up,new Re(0,1,0)),K=ae.clone().invert(),Q=new Re,G=new un,te=2*Math.PI;return function(){const Ee=e.object.position;oe.copy(Ee).sub(e.target),oe.applyQuaternion(ae),s.setFromVector3(oe),e.autoRotate&&f===d.NONE&&C(E()),e.enableDamping?(s.theta+=n.theta*e.dampingFactor,s.phi+=n.phi*e.dampingFactor):(s.theta+=n.theta,s.phi+=n.phi);let Le=e.minAzimuthAngle,Ye=e.maxAzimuthAngle;return isFinite(Le)&&isFinite(Ye)&&(Le<-Math.PI?Le+=te:Le>Math.PI&&(Le-=te),Ye<-Math.PI?Ye+=te:Ye>Math.PI&&(Ye-=te),Le<=Ye?s.theta=Math.max(Le,Math.min(Ye,s.theta)):s.theta=s.theta>(Le+Ye)/2?Math.max(Le,s.theta):Math.min(Ye,s.theta)),s.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=l,s.radius=Math.max(e.minDistance,Math.min(e.maxDistance,s.radius)),e.enableDamping===!0?e.target.addScaledVector(h,e.dampingFactor):e.target.add(h),oe.setFromSpherical(s),oe.applyQuaternion(K),Ee.copy(e.target).add(oe),e.object.lookAt(e.target),e.enableDamping===!0?(n.theta*=1-e.dampingFactor,n.phi*=1-e.dampingFactor,h.multiplyScalar(1-e.dampingFactor)):(n.set(0,0,0),h.set(0,0,0)),l=1,m||Q.distanceToSquared(e.object.position)>a||8*(1-G.dot(e.object.quaternion))>a?(e.dispatchEvent(vu),Q.copy(e.object.position),G.copy(e.object.quaternion),m=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Ae),e.domElement.removeEventListener("pointerdown",ie),e.domElement.removeEventListener("pointercancel",Te),e.domElement.removeEventListener("wheel",Ie),e.domElement.removeEventListener("pointermove",_e),e.domElement.removeEventListener("pointerup",Se),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",We)};const e=this,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=d.NONE;const a=1e-6,s=new pu,n=new pu;let l=1;const h=new Re;let m=!1;const i=new _t,o=new _t,c=new _t,u=new _t,p=new _t,g=new _t,v=new _t,b=new _t,_=new _t,x=[],A={};function E(){return 2*Math.PI/60/60*e.autoRotateSpeed}function T(){return Math.pow(.95,e.zoomSpeed)}function C(oe){n.theta-=oe}function R(oe){n.phi-=oe}const P=function(){const oe=new Re;return function(K,Q){oe.setFromMatrixColumn(Q,0),oe.multiplyScalar(-K),h.add(oe)}}(),N=function(){const oe=new Re;return function(K,Q){e.screenSpacePanning===!0?oe.setFromMatrixColumn(Q,1):(oe.setFromMatrixColumn(Q,0),oe.crossVectors(e.object.up,oe)),oe.multiplyScalar(K),h.add(oe)}}(),k=function(){const oe=new Re;return function(K,Q){const G=e.domElement;if(e.object.isPerspectiveCamera){const te=e.object.position;oe.copy(te).sub(e.target);let ge=oe.length();ge*=Math.tan(e.object.fov/2*Math.PI/180),P(2*K*ge/G.clientHeight,e.object.matrix),N(2*Q*ge/G.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(P(K*(e.object.right-e.object.left)/e.object.zoom/G.clientWidth,e.object.matrix),N(Q*(e.object.top-e.object.bottom)/e.object.zoom/G.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function I(oe){e.object.isPerspectiveCamera?l/=oe:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*oe)),e.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function B(oe){e.object.isPerspectiveCamera?l*=oe:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/oe)),e.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Y(oe){i.set(oe.clientX,oe.clientY)}function W(oe){v.set(oe.clientX,oe.clientY)}function H(oe){u.set(oe.clientX,oe.clientY)}function X(oe){o.set(oe.clientX,oe.clientY),c.subVectors(o,i).multiplyScalar(e.rotateSpeed);const ae=e.domElement;C(2*Math.PI*c.x/ae.clientHeight),R(2*Math.PI*c.y/ae.clientHeight),i.copy(o),e.update()}function Z(oe){b.set(oe.clientX,oe.clientY),_.subVectors(b,v),_.y>0?I(T()):_.y<0&&B(T()),v.copy(b),e.update()}function q(oe){p.set(oe.clientX,oe.clientY),g.subVectors(p,u).multiplyScalar(e.panSpeed),k(g.x,g.y),u.copy(p),e.update()}function ee(oe){oe.deltaY<0?B(T()):oe.deltaY>0&&I(T()),e.update()}function L(oe){let ae=!1;switch(oe.code){case e.keys.UP:oe.ctrlKey||oe.metaKey||oe.shiftKey?R(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):k(0,e.keyPanSpeed),ae=!0;break;case e.keys.BOTTOM:oe.ctrlKey||oe.metaKey||oe.shiftKey?R(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):k(0,-e.keyPanSpeed),ae=!0;break;case e.keys.LEFT:oe.ctrlKey||oe.metaKey||oe.shiftKey?C(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):k(e.keyPanSpeed,0),ae=!0;break;case e.keys.RIGHT:oe.ctrlKey||oe.metaKey||oe.shiftKey?C(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):k(-e.keyPanSpeed,0),ae=!0;break}ae&&(oe.preventDefault(),e.update())}function O(){if(x.length===1)i.set(x[0].pageX,x[0].pageY);else{const oe=.5*(x[0].pageX+x[1].pageX),ae=.5*(x[0].pageY+x[1].pageY);i.set(oe,ae)}}function U(){if(x.length===1)u.set(x[0].pageX,x[0].pageY);else{const oe=.5*(x[0].pageX+x[1].pageX),ae=.5*(x[0].pageY+x[1].pageY);u.set(oe,ae)}}function V(){const oe=x[0].pageX-x[1].pageX,ae=x[0].pageY-x[1].pageY,K=Math.sqrt(oe*oe+ae*ae);v.set(0,K)}function J(){e.enableZoom&&V(),e.enablePan&&U()}function le(){e.enableZoom&&V(),e.enableRotate&&O()}function ce(oe){if(x.length==1)o.set(oe.pageX,oe.pageY);else{const K=xe(oe),Q=.5*(oe.pageX+K.x),G=.5*(oe.pageY+K.y);o.set(Q,G)}c.subVectors(o,i).multiplyScalar(e.rotateSpeed);const ae=e.domElement;C(2*Math.PI*c.x/ae.clientHeight),R(2*Math.PI*c.y/ae.clientHeight),i.copy(o)}function ue(oe){if(x.length===1)p.set(oe.pageX,oe.pageY);else{const ae=xe(oe),K=.5*(oe.pageX+ae.x),Q=.5*(oe.pageY+ae.y);p.set(K,Q)}g.subVectors(p,u).multiplyScalar(e.panSpeed),k(g.x,g.y),u.copy(p)}function re(oe){const ae=xe(oe),K=oe.pageX-ae.x,Q=oe.pageY-ae.y,G=Math.sqrt(K*K+Q*Q);b.set(0,G),_.set(0,Math.pow(b.y/v.y,e.zoomSpeed)),I(_.y),v.copy(b)}function de(oe){e.enableZoom&&re(oe),e.enablePan&&ue(oe)}function ve(oe){e.enableZoom&&re(oe),e.enableRotate&&ce(oe)}function ie(oe){e.enabled!==!1&&(x.length===0&&(e.domElement.setPointerCapture(oe.pointerId),e.domElement.addEventListener("pointermove",_e),e.domElement.addEventListener("pointerup",Se)),Ne(oe),oe.pointerType==="touch"?$(oe):we(oe))}function _e(oe){e.enabled!==!1&&(oe.pointerType==="touch"?se(oe):De(oe))}function Se(oe){ze(oe),x.length===0&&(e.domElement.releasePointerCapture(oe.pointerId),e.domElement.removeEventListener("pointermove",_e),e.domElement.removeEventListener("pointerup",Se)),e.dispatchEvent(bu),f=d.NONE}function Te(oe){ze(oe)}function we(oe){let ae;switch(oe.button){case 0:ae=e.mouseButtons.LEFT;break;case 1:ae=e.mouseButtons.MIDDLE;break;case 2:ae=e.mouseButtons.RIGHT;break;default:ae=-1}switch(ae){case xn.DOLLY:if(e.enableZoom===!1)return;W(oe),f=d.DOLLY;break;case xn.ROTATE:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(e.enablePan===!1)return;H(oe),f=d.PAN}else{if(e.enableRotate===!1)return;Y(oe),f=d.ROTATE}break;case xn.PAN:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(e.enableRotate===!1)return;Y(oe),f=d.ROTATE}else{if(e.enablePan===!1)return;H(oe),f=d.PAN}break;default:f=d.NONE}f!==d.NONE&&e.dispatchEvent(da)}function De(oe){switch(f){case d.ROTATE:if(e.enableRotate===!1)return;X(oe);break;case d.DOLLY:if(e.enableZoom===!1)return;Z(oe);break;case d.PAN:if(e.enablePan===!1)return;q(oe);break}}function Ie(oe){e.enabled===!1||e.enableZoom===!1||f!==d.NONE||(oe.preventDefault(),e.dispatchEvent(da),ee(oe),e.dispatchEvent(bu))}function We(oe){e.enabled===!1||e.enablePan===!1||L(oe)}function $(oe){switch(Ve(oe),x.length){case 1:switch(e.touches.ONE){case kn.ROTATE:if(e.enableRotate===!1)return;O(),f=d.TOUCH_ROTATE;break;case kn.PAN:if(e.enablePan===!1)return;U(),f=d.TOUCH_PAN;break;default:f=d.NONE}break;case 2:switch(e.touches.TWO){case kn.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;J(),f=d.TOUCH_DOLLY_PAN;break;case kn.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;le(),f=d.TOUCH_DOLLY_ROTATE;break;default:f=d.NONE}break;default:f=d.NONE}f!==d.NONE&&e.dispatchEvent(da)}function se(oe){switch(Ve(oe),f){case d.TOUCH_ROTATE:if(e.enableRotate===!1)return;ce(oe),e.update();break;case d.TOUCH_PAN:if(e.enablePan===!1)return;ue(oe),e.update();break;case d.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;de(oe),e.update();break;case d.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;ve(oe),e.update();break;default:f=d.NONE}}function Ae(oe){e.enabled!==!1&&oe.preventDefault()}function Ne(oe){x.push(oe)}function ze(oe){delete A[oe.pointerId];for(let ae=0;ae<x.length;ae++)if(x[ae].pointerId==oe.pointerId){x.splice(ae,1);return}}function Ve(oe){let ae=A[oe.pointerId];ae===void 0&&(ae=new _t,A[oe.pointerId]=ae),ae.set(oe.pageX,oe.pageY)}function xe(oe){const ae=oe.pointerId===x[0].pointerId?x[1]:x[0];return A[ae.pointerId]}e.domElement.addEventListener("contextmenu",Ae),e.domElement.addEventListener("pointerdown",ie),e.domElement.addEventListener("pointercancel",Te),e.domElement.addEventListener("wheel",Ie,{passive:!1}),this.update()}}function bd(w){Hi(()=>{let t;return requestAnimationFrame(function r(){t=requestAnimationFrame(r),w()}),()=>{cancelAnimationFrame(t)}})}function Sv(w,t,r){let{autoRotate:e=!1}=t,{autoRotateSpeed:d=2}=t,{dampingFactor:f=.05}=t,{enableDamping:a=!1}=t,{enabled:s=!0}=t,{enablePan:n=!0}=t,{enableRotate:l=!0}=t,{enableZoom:h=!0}=t,{keyPanSpeed:m=7}=t,{keys:i={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}}=t,{maxAzimuthAngle:o=1/0}=t,{maxDistance:c=1/0}=t,{maxPolarAngle:u=Math.PI}=t,{maxZoom:p=1/0}=t,{minAzimuthAngle:g=1/0}=t,{minDistance:v=0}=t,{minPolarAngle:b=0}=t,{minZoom:_=0}=t,{mouseButtons:x={LEFT:xn.ROTATE,MIDDLE:xn.DOLLY,RIGHT:xn.PAN}}=t,{panSpeed:A=1}=t,{rotateSpeed:E=1}=t,{screenSpacePanning:T=!0}=t,{touches:C={ONE:kn.ROTATE,TWO:kn.DOLLY_PAN}}=t,{zoomSpeed:R=1}=t,{target:P=[0,0,0]}=t;const{root:N}=Cs(),k=qd();let I;return N.controls.set((B,Y)=>(r(25,I=new wv(B,Y)),I.addEventListener("start",W=>{k("start",W)}),I.addEventListener("end",W=>{k("end",W)}),I.addEventListener("change",W=>{k("change",W),(!P||I.target.x!==P[0]||I.target.y!==P[1]||I.target.z!==P[2])&&r(0,P=[I.target.x,I.target.y,I.target.z]),N.invalidate()}),I)),bd(()=>{I&&(e||a)&&I.update()}),w.$$set=B=>{"autoRotate"in B&&r(1,e=B.autoRotate),"autoRotateSpeed"in B&&r(2,d=B.autoRotateSpeed),"dampingFactor"in B&&r(3,f=B.dampingFactor),"enableDamping"in B&&r(4,a=B.enableDamping),"enabled"in B&&r(5,s=B.enabled),"enablePan"in B&&r(6,n=B.enablePan),"enableRotate"in B&&r(7,l=B.enableRotate),"enableZoom"in B&&r(8,h=B.enableZoom),"keyPanSpeed"in B&&r(9,m=B.keyPanSpeed),"keys"in B&&r(10,i=B.keys),"maxAzimuthAngle"in B&&r(11,o=B.maxAzimuthAngle),"maxDistance"in B&&r(12,c=B.maxDistance),"maxPolarAngle"in B&&r(13,u=B.maxPolarAngle),"maxZoom"in B&&r(14,p=B.maxZoom),"minAzimuthAngle"in B&&r(15,g=B.minAzimuthAngle),"minDistance"in B&&r(16,v=B.minDistance),"minPolarAngle"in B&&r(17,b=B.minPolarAngle),"minZoom"in B&&r(18,_=B.minZoom),"mouseButtons"in B&&r(19,x=B.mouseButtons),"panSpeed"in B&&r(20,A=B.panSpeed),"rotateSpeed"in B&&r(21,E=B.rotateSpeed),"screenSpacePanning"in B&&r(22,T=B.screenSpacePanning),"touches"in B&&r(23,C=B.touches),"zoomSpeed"in B&&r(24,R=B.zoomSpeed),"target"in B&&r(0,P=B.target)},w.$$.update=()=>{w.$$.dirty&67108862&&I&&(r(25,I.autoRotate=e,I),r(25,I.autoRotateSpeed=d,I),r(25,I.dampingFactor=f,I),r(25,I.enableDamping=a,I),r(25,I.enabled=s,I),r(25,I.enablePan=n,I),r(25,I.enableRotate=l,I),r(25,I.enableZoom=h,I),r(25,I.keyPanSpeed=m,I),r(25,I.keys=i,I),r(25,I.maxAzimuthAngle=o,I),r(25,I.maxDistance=c,I),r(25,I.maxPolarAngle=u,I),r(25,I.maxZoom=p,I),r(25,I.minAzimuthAngle=g,I),r(25,I.minDistance=v,I),r(25,I.minPolarAngle=b,I),r(25,I.minZoom=_,I),r(25,I.mouseButtons=x,I),r(25,I.panSpeed=A,I),r(25,I.rotateSpeed=E,I),r(25,I.screenSpacePanning=T,I),r(25,I.touches=C,I),r(25,I.zoomSpeed=R,I),I.update()),w.$$.dirty&33554433&&P&&(I.target.x!==P[0]||I.target.y!==P[1]||I.target.z!==P[2])&&(I.target.set(P[0],P[1],P[2]),I.update())},[P,e,d,f,a,s,n,l,h,m,i,o,c,u,p,g,v,b,_,x,A,E,T,C,R,I]}class Mv extends dn{constructor(t){super(),Cr(this,t,Sv,null,Ar,{autoRotate:1,autoRotateSpeed:2,dampingFactor:3,enableDamping:4,enabled:5,enablePan:6,enableRotate:7,enableZoom:8,keyPanSpeed:9,keys:10,maxAzimuthAngle:11,maxDistance:12,maxPolarAngle:13,maxZoom:14,minAzimuthAngle:15,minDistance:16,minPolarAngle:17,minZoom:18,mouseButtons:19,panSpeed:20,rotateSpeed:21,screenSpacePanning:22,touches:23,zoomSpeed:24,target:0})}}function Tv(w,t,r){let{color:e=16777215}=t,{intensity:d=1}=t;const{root:f,self:a}=Cs(new Z0(e,d));return w.$$set=s=>{"color"in s&&r(0,e=s.color),"intensity"in s&&r(1,d=s.intensity)},w.$$.update=()=>{w.$$.dirty&7&&(a.color.set(e),r(2,a.intensity=d,a),f.invalidate())},[e,d,a]}class Ev extends dn{constructor(t){super(),Cr(this,t,Tv,null,Ar,{color:0,intensity:1})}}function jv(w,t,r){let{color:e=16777215}=t,{intensity:d=1}=t,{position:f=[0,1,0]}=t,{target:a=[0,0,0]}=t,{shadow:s=null}=t;const{root:n,self:l}=Cs(new yd);return w.$$set=h=>{"color"in h&&r(0,e=h.color),"intensity"in h&&r(1,d=h.intensity),"position"in h&&r(2,f=h.position),"target"in h&&r(3,a=h.target),"shadow"in h&&r(4,s=h.shadow)},w.$$.update=()=>{if(w.$$.dirty&47&&(l.color.set(e),r(5,l.intensity=d,l),l.position.set(f[0],f[1],f[2]),l.target.position.set(a[0],a[1],a[2]),n.invalidate()),w.$$.dirty&48){if(s){const{mapSize:h=[512,512],camera:{left:m=-5,bottom:i=-5,right:o=5,top:c=5,near:u=.5,far:p=500}={},bias:g=0,radius:v=1}=s===!0?{}:s;l.shadow.mapSize.set(h[0],h[1]),r(5,l.shadow.camera.left=m,l),r(5,l.shadow.camera.top=c,l),r(5,l.shadow.camera.right=o,l),r(5,l.shadow.camera.bottom=i,l),r(5,l.shadow.camera.near=u,l),r(5,l.shadow.camera.far=p,l),r(5,l.shadow.bias=g,l),r(5,l.shadow.radius=v,l),r(5,l.castShadow=!0,l)}else r(5,l.castShadow=!1,l);n.invalidate()}},[e,d,f,a,s,l]}class Av extends dn{constructor(t){super(),Cr(this,t,jv,null,Ar,{color:0,intensity:1,position:2,target:3,shadow:4})}}class Cv extends Ki{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Iv(r)}),this.register(function(r){return new Gv(r)}),this.register(function(r){return new zv(r)}),this.register(function(r){return new kv(r)}),this.register(function(r){return new Nv(r)}),this.register(function(r){return new Uv(r)}),this.register(function(r){return new Fv(r)}),this.register(function(r){return new Dv(r)}),this.register(function(r){return new Bv(r)}),this.register(function(r){return new Ov(r)}),this.register(function(r){return new Rv(r)}),this.register(function(r){return new Vv(r)}),this.register(function(r){return new Hv(r)})}load(t,r,e,d){const f=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=ei.extractUrlBase(t),this.manager.itemStart(t);const s=function(l){d?d(l):console.error(l),f.manager.itemError(t),f.manager.itemEnd(t)},n=new Xa(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,function(l){try{f.parse(l,a,function(h){r(h),f.manager.itemEnd(t)},s)}catch(h){s(h)}},e,s)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,e,d){let f;const a={},s={};if(typeof t=="string")f=JSON.parse(t);else if(t instanceof ArrayBuffer)if(ei.decodeText(new Uint8Array(t,0,4))===_d){try{a[Rt.KHR_BINARY_GLTF]=new Wv(t)}catch(h){d&&d(h);return}f=JSON.parse(a[Rt.KHR_BINARY_GLTF].content)}else f=JSON.parse(ei.decodeText(new Uint8Array(t)));else f=t;if(f.asset===void 0||f.asset.version[0]<2){d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const n=new ib(f,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});n.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const h=this.pluginCallbacks[l](n);s[h.name]=h,a[h.name]=!0}if(f.extensionsUsed)for(let l=0;l<f.extensionsUsed.length;++l){const h=f.extensionsUsed[l],m=f.extensionsRequired||[];switch(h){case Rt.KHR_MATERIALS_UNLIT:a[h]=new Pv;break;case Rt.KHR_DRACO_MESH_COMPRESSION:a[h]=new qv(f,this.dracoLoader);break;case Rt.KHR_TEXTURE_TRANSFORM:a[h]=new Xv;break;case Rt.KHR_MESH_QUANTIZATION:a[h]=new Yv;break;default:m.indexOf(h)>=0&&s[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}n.setExtensions(a),n.setPlugins(s),n.parse(e,d)}parseAsync(t,r){const e=this;return new Promise(function(d,f){e.parse(t,r,d,f)})}}function Lv(){let w={};return{get:function(t){return w[t]},add:function(t,r){w[t]=r},remove:function(t){delete w[t]},removeAll:function(){w={}}}}const Rt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Rv{constructor(t){this.parser=t,this.name=Rt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let e=0,d=r.length;e<d;e++){const f=r[e];f.extensions&&f.extensions[this.name]&&f.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,f.extensions[this.name].light)}}_loadLight(t){const r=this.parser,e="light:"+t;let d=r.cache.get(e);if(d)return d;const f=r.json,n=((f.extensions&&f.extensions[this.name]||{}).lights||[])[t];let l;const h=new jt(16777215);n.color!==void 0&&h.fromArray(n.color);const m=n.range!==void 0?n.range:0;switch(n.type){case"directional":l=new yd(h),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new X0(h),l.distance=m;break;case"spot":l=new W0(h),l.distance=m,n.spot=n.spot||{},n.spot.innerConeAngle=n.spot.innerConeAngle!==void 0?n.spot.innerConeAngle:0,n.spot.outerConeAngle=n.spot.outerConeAngle!==void 0?n.spot.outerConeAngle:Math.PI/4,l.angle=n.spot.outerConeAngle,l.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+n.type)}return l.position.set(0,0,0),l.decay=2,Nn(l,n),n.intensity!==void 0&&(l.intensity=n.intensity),l.name=r.createUniqueName(n.name||"light_"+t),d=Promise.resolve(l),r.cache.add(e,d),d}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,e=this.parser,f=e.json.nodes[t],s=(f.extensions&&f.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(n){return e._getNodeRef(r.cache,s,n)})}}class Pv{constructor(){this.name=Rt.KHR_MATERIALS_UNLIT}getMaterialType(){return Kn}extendParams(t,r,e){const d=[];t.color=new jt(1,1,1),t.opacity=1;const f=r.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){const a=f.baseColorFactor;t.color.fromArray(a),t.opacity=a[3]}f.baseColorTexture!==void 0&&d.push(e.assignTexture(t,"map",f.baseColorTexture,Pt))}return Promise.all(d)}}class Dv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const d=this.parser.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=d.extensions[this.name].emissiveStrength;return f!==void 0&&(r.emissiveIntensity=f),Promise.resolve()}}class Iv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const e=this.parser,d=e.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],a=d.extensions[this.name];if(a.clearcoatFactor!==void 0&&(r.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&f.push(e.assignTexture(r,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&f.push(e.assignTexture(r,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(f.push(e.assignTexture(r,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const s=a.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new _t(s,s)}return Promise.all(f)}}class Ov{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const e=this.parser,d=e.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],a=d.extensions[this.name];return a.iridescenceFactor!==void 0&&(r.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&f.push(e.assignTexture(r,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(r.iridescenceIOR=a.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&f.push(e.assignTexture(r,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(f)}}class kv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const e=this.parser,d=e.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[];r.sheenColor=new jt(0,0,0),r.sheenRoughness=0,r.sheen=1;const a=d.extensions[this.name];return a.sheenColorFactor!==void 0&&r.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&f.push(e.assignTexture(r,"sheenColorMap",a.sheenColorTexture,Pt)),a.sheenRoughnessTexture!==void 0&&f.push(e.assignTexture(r,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(f)}}class Nv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const e=this.parser,d=e.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],a=d.extensions[this.name];return a.transmissionFactor!==void 0&&(r.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&f.push(e.assignTexture(r,"transmissionMap",a.transmissionTexture)),Promise.all(f)}}class Uv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const e=this.parser,d=e.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],a=d.extensions[this.name];r.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&f.push(e.assignTexture(r,"thicknessMap",a.thicknessTexture)),r.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return r.attenuationColor=new jt(s[0],s[1],s[2]),Promise.all(f)}}class Fv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const d=this.parser.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=d.extensions[this.name];return r.ior=f.ior!==void 0?f.ior:1.5,Promise.resolve()}}class Bv{constructor(t){this.parser=t,this.name=Rt.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:li}extendMaterialParams(t,r){const e=this.parser,d=e.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],a=d.extensions[this.name];r.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&f.push(e.assignTexture(r,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return r.specularColor=new jt(s[0],s[1],s[2]),a.specularColorTexture!==void 0&&f.push(e.assignTexture(r,"specularColorMap",a.specularColorTexture,Pt)),Promise.all(f)}}class Gv{constructor(t){this.parser=t,this.name=Rt.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,e=r.json,d=e.textures[t];if(!d.extensions||!d.extensions[this.name])return null;const f=d.extensions[this.name],a=r.options.ktx2Loader;if(!a){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,f.source,a)}}class zv{constructor(t){this.parser=t,this.name=Rt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,e=this.parser,d=e.json,f=d.textures[t];if(!f.extensions||!f.extensions[r])return null;const a=f.extensions[r],s=d.images[a.source];let n=e.textureLoader;if(s.uri){const l=e.options.manager.getHandler(s.uri);l!==null&&(n=l)}return this.detectSupport().then(function(l){if(l)return e.loadTextureImage(t,a.source,n);if(d.extensionsRequired&&d.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class Vv{constructor(t){this.name=Rt.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,e=r.bufferViews[t];if(e.extensions&&e.extensions[this.name]){const d=e.extensions[this.name],f=this.parser.getDependency("buffer",d.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return f.then(function(s){const n=d.byteOffset||0,l=d.byteLength||0,h=d.count,m=d.byteStride,i=new Uint8Array(s,n,l);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(h,m,i,d.mode,d.filter).then(function(o){return o.buffer}):a.ready.then(function(){const o=new ArrayBuffer(h*m);return a.decodeGltfBuffer(new Uint8Array(o),h,m,i,d.mode,d.filter),o})})}else return null}}class Hv{constructor(t){this.name=Rt.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,e=r.nodes[t];if(!e.extensions||!e.extensions[this.name]||e.mesh===void 0)return null;const d=r.meshes[e.mesh];for(const l of d.primitives)if(l.mode!==Br.TRIANGLES&&l.mode!==Br.TRIANGLE_STRIP&&l.mode!==Br.TRIANGLE_FAN&&l.mode!==void 0)return null;const a=e.extensions[this.name].attributes,s=[],n={};for(const l in a)s.push(this.parser.getDependency("accessor",a[l]).then(h=>(n[l]=h,n[l])));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then(l=>{const h=l.pop(),m=h.isGroup?h.children:[h],i=l[0].count,o=[];for(const c of m){const u=new At,p=new Re,g=new un,v=new Re(1,1,1),b=new T0(c.geometry,c.material,i);for(let _=0;_<i;_++)n.TRANSLATION&&p.fromBufferAttribute(n.TRANSLATION,_),n.ROTATION&&g.fromBufferAttribute(n.ROTATION,_),n.SCALE&&v.fromBufferAttribute(n.SCALE,_),b.setMatrixAt(_,u.compose(p,g,v));for(const _ in n)_!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&c.geometry.setAttribute(_,n[_]);Jt.prototype.copy.call(b,c),b.frustumCulled=!1,this.parser.assignFinalMaterial(b),o.push(b)}return h.isGroup?(h.clear(),h.add(...o),h):o[0]}))}}const _d="glTF",ds=12,_u={JSON:1313821514,BIN:5130562};class Wv{constructor(t){this.name=Rt.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,ds);if(this.header={magic:ei.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==_d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const e=this.header.length-ds,d=new DataView(t,ds);let f=0;for(;f<e;){const a=d.getUint32(f,!0);f+=4;const s=d.getUint32(f,!0);if(f+=4,s===_u.JSON){const n=new Uint8Array(t,ds+f,a);this.content=ei.decodeText(n)}else if(s===_u.BIN){const n=ds+f;this.body=t.slice(n,n+a)}f+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qv{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Rt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const e=this.json,d=this.dracoLoader,f=t.extensions[this.name].bufferView,a=t.extensions[this.name].attributes,s={},n={},l={};for(const h in a){const m=Ea[h]||h.toLowerCase();s[m]=a[h]}for(const h in t.attributes){const m=Ea[h]||h.toLowerCase();if(a[h]!==void 0){const i=e.accessors[t.attributes[h]],o=Ii[i.componentType];l[m]=o.name,n[m]=i.normalized===!0}}return r.getDependency("bufferView",f).then(function(h){return new Promise(function(m){d.decodeDracoFile(h,function(i){for(const o in i.attributes){const c=i.attributes[o],u=n[o];u!==void 0&&(c.normalized=u)}m(i)},s,l)})})}}class Xv{constructor(){this.name=Rt.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return r.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class Yv{constructor(){this.name=Rt.KHR_MESH_QUANTIZATION}}class xd extends As{constructor(t,r,e,d){super(t,r,e,d)}copySampleValue_(t){const r=this.resultBuffer,e=this.sampleValues,d=this.valueSize,f=t*d*3+d;for(let a=0;a!==d;a++)r[a]=e[f+a];return r}interpolate_(t,r,e,d){const f=this.resultBuffer,a=this.sampleValues,s=this.valueSize,n=s*2,l=s*3,h=d-r,m=(e-r)/h,i=m*m,o=i*m,c=t*l,u=c-l,p=-2*o+3*i,g=o-i,v=1-p,b=g-i+m;for(let _=0;_!==s;_++){const x=a[u+_+s],A=a[u+_+n]*h,E=a[c+_+s],T=a[c+_]*h;f[_]=v*x+b*A+p*E+g*T}return f}}const Zv=new un;class Kv extends xd{interpolate_(t,r,e,d){const f=super.interpolate_(t,r,e,d);return Zv.fromArray(f).normalize().toArray(f),f}}const Br={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ii={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xu={9728:gr,9729:dr,9984:_a,9985:Vu,9986:uo,9987:Bn},wu={33071:Or,33648:vo,10497:Ni},ha={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ea={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},On={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Jv={CUBICSPLINE:void 0,LINEAR:Fi,STEP:bs},fa={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Qv(w){return w.DefaultMaterial===void 0&&(w.DefaultMaterial=new qa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fn})),w.DefaultMaterial}function hs(w,t,r){for(const e in r.extensions)w[e]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[e]=r.extensions[e])}function Nn(w,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(w.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function $v(w,t,r){let e=!1,d=!1,f=!1;for(let l=0,h=t.length;l<h;l++){const m=t[l];if(m.POSITION!==void 0&&(e=!0),m.NORMAL!==void 0&&(d=!0),m.COLOR_0!==void 0&&(f=!0),e&&d&&f)break}if(!e&&!d&&!f)return Promise.resolve(w);const a=[],s=[],n=[];for(let l=0,h=t.length;l<h;l++){const m=t[l];if(e){const i=m.POSITION!==void 0?r.getDependency("accessor",m.POSITION):w.attributes.position;a.push(i)}if(d){const i=m.NORMAL!==void 0?r.getDependency("accessor",m.NORMAL):w.attributes.normal;s.push(i)}if(f){const i=m.COLOR_0!==void 0?r.getDependency("accessor",m.COLOR_0):w.attributes.color;n.push(i)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(n)]).then(function(l){const h=l[0],m=l[1],i=l[2];return e&&(w.morphAttributes.position=h),d&&(w.morphAttributes.normal=m),f&&(w.morphAttributes.color=i),w.morphTargetsRelative=!0,w})}function eb(w,t){if(w.updateMorphTargets(),t.weights!==void 0)for(let r=0,e=t.weights.length;r<e;r++)w.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(w.morphTargetInfluences.length===r.length){w.morphTargetDictionary={};for(let e=0,d=r.length;e<d;e++)w.morphTargetDictionary[r[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function tb(w){const t=w.extensions&&w.extensions[Rt.KHR_DRACO_MESH_COMPRESSION];let r;return t?r="draco:"+t.bufferView+":"+t.indices+":"+Su(t.attributes):r=w.indices+":"+Su(w.attributes)+":"+w.mode,r}function Su(w){let t="";const r=Object.keys(w).sort();for(let e=0,d=r.length;e<d;e++)t+=r[e]+":"+w[r[e]]+";";return t}function ja(w){switch(w){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function rb(w){return w.search(/\.jpe?g($|\?)/i)>0||w.search(/^data\:image\/jpeg/)===0?"image/jpeg":w.search(/\.webp($|\?)/i)>0||w.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const nb=new At;class ib{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new Lv,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let e=!1,d=!1,f=-1;typeof navigator<"u"&&(e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,d=navigator.userAgent.indexOf("Firefox")>-1,f=d?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||e||d&&f<98?this.textureLoader=new V0(this.options.manager):this.textureLoader=new K0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Xa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const e=this,d=this.json,f=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(a){const s={scene:a[0][d.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:d.asset,parser:e,userData:{}};hs(f,s,d),Nn(s,d),Promise.all(e._invokeAll(function(n){return n.afterRoot&&n.afterRoot(s)})).then(function(){t(s)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],e=this.json.meshes||[];for(let d=0,f=r.length;d<f;d++){const a=r[d].joints;for(let s=0,n=a.length;s<n;s++)t[a[s]].isBone=!0}for(let d=0,f=t.length;d<f;d++){const a=t[d];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(e[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,e){if(t.refs[r]<=1)return e;const d=e.clone(),f=(a,s)=>{const n=this.associations.get(a);n!=null&&this.associations.set(s,n);for(const[l,h]of a.children.entries())f(h,s.children[l])};return f(e,d),d.name+="_instance_"+t.uses[r]++,d}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let e=0;e<r.length;e++){const d=t(r[e]);if(d)return d}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const e=[];for(let d=0;d<r.length;d++){const f=t(r[d]);f&&e.push(f)}return e}getDependency(t,r){const e=t+":"+r;let d=this.cache.get(e);if(!d){switch(t){case"scene":d=this.loadScene(r);break;case"node":d=this._invokeOne(function(f){return f.loadNode&&f.loadNode(r)});break;case"mesh":d=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(r)});break;case"accessor":d=this.loadAccessor(r);break;case"bufferView":d=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(r)});break;case"buffer":d=this.loadBuffer(r);break;case"material":d=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(r)});break;case"texture":d=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(r)});break;case"skin":d=this.loadSkin(r);break;case"animation":d=this._invokeOne(function(f){return f.loadAnimation&&f.loadAnimation(r)});break;case"camera":d=this.loadCamera(r);break;default:if(d=this._invokeOne(function(f){return f!=this&&f.getDependency&&f.getDependency(t,r)}),!d)throw new Error("Unknown type: "+t);break}this.cache.add(e,d)}return d}getDependencies(t){let r=this.cache.get(t);if(!r){const e=this,d=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(d.map(function(f,a){return e.getDependency(t,a)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],e=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[Rt.KHR_BINARY_GLTF].body);const d=this.options;return new Promise(function(f,a){e.load(ei.resolveURL(r.uri,d.path),f,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(e){const d=r.byteLength||0,f=r.byteOffset||0;return e.slice(f,f+d)})}loadAccessor(t){const r=this,e=this.json,d=this.json.accessors[t];if(d.bufferView===void 0&&d.sparse===void 0){const a=ha[d.type],s=Ii[d.componentType],n=d.normalized===!0,l=new s(d.count*a);return Promise.resolve(new Ir(l,a,n))}const f=[];return d.bufferView!==void 0?f.push(this.getDependency("bufferView",d.bufferView)):f.push(null),d.sparse!==void 0&&(f.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),f.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(f).then(function(a){const s=a[0],n=ha[d.type],l=Ii[d.componentType],h=l.BYTES_PER_ELEMENT,m=h*n,i=d.byteOffset||0,o=d.bufferView!==void 0?e.bufferViews[d.bufferView].byteStride:void 0,c=d.normalized===!0;let u,p;if(o&&o!==m){const g=Math.floor(i/o),v="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+g+":"+d.count;let b=r.cache.get(v);b||(u=new l(s,g*o,d.count*o/h),b=new _0(u,o/h),r.cache.add(v,b)),p=new Va(b,n,i%o/h,c)}else s===null?u=new l(d.count*n):u=new l(s,i,d.count*n),p=new Ir(u,n,c);if(d.sparse!==void 0){const g=ha.SCALAR,v=Ii[d.sparse.indices.componentType],b=d.sparse.indices.byteOffset||0,_=d.sparse.values.byteOffset||0,x=new v(a[1],b,d.sparse.count*g),A=new l(a[2],_,d.sparse.count*n);s!==null&&(p=new Ir(p.array.slice(),p.itemSize,p.normalized));for(let E=0,T=x.length;E<T;E++){const C=x[E];if(p.setX(C,A[E*n]),n>=2&&p.setY(C,A[E*n+1]),n>=3&&p.setZ(C,A[E*n+2]),n>=4&&p.setW(C,A[E*n+3]),n>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(t){const r=this.json,e=this.options,f=r.textures[t].source,a=r.images[f];let s=this.textureLoader;if(a.uri){const n=e.manager.getHandler(a.uri);n!==null&&(s=n)}return this.loadTextureImage(t,f,s)}loadTextureImage(t,r,e){const d=this,f=this.json,a=f.textures[t],s=f.images[r],n=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[n])return this.textureCache[n];const l=this.loadImageSource(r,e).then(function(h){h.flipY=!1,h.name=a.name||s.name||"";const i=(f.samplers||{})[a.sampler]||{};return h.magFilter=xu[i.magFilter]||dr,h.minFilter=xu[i.minFilter]||Bn,h.wrapS=wu[i.wrapS]||Ni,h.wrapT=wu[i.wrapT]||Ni,d.associations.set(h,{textures:t}),h}).catch(function(){return null});return this.textureCache[n]=l,l}loadImageSource(t,r){const e=this,d=this.json,f=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(m=>m.clone());const a=d.images[t],s=self.URL||self.webkitURL;let n=a.uri||"",l=!1;if(a.bufferView!==void 0)n=e.getDependency("bufferView",a.bufferView).then(function(m){l=!0;const i=new Blob([m],{type:a.mimeType});return n=s.createObjectURL(i),n});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const h=Promise.resolve(n).then(function(m){return new Promise(function(i,o){let c=i;r.isImageBitmapLoader===!0&&(c=function(u){const p=new wr(u);p.needsUpdate=!0,i(p)}),r.load(ei.resolveURL(m,f.path),c,void 0,o)})}).then(function(m){return l===!0&&s.revokeObjectURL(n),m.userData.mimeType=a.mimeType||rb(a.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",n),m});return this.sourceCache[t]=h,h}assignTexture(t,r,e,d){const f=this;return this.getDependency("texture",e.index).then(function(a){if(!a)return null;if(e.texCoord!==void 0&&e.texCoord!=0&&!(r==="aoMap"&&e.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+e.texCoord+" for texture "+r+" not yet supported."),f.extensions[Rt.KHR_TEXTURE_TRANSFORM]){const s=e.extensions!==void 0?e.extensions[Rt.KHR_TEXTURE_TRANSFORM]:void 0;if(s){const n=f.associations.get(a);a=f.extensions[Rt.KHR_TEXTURE_TRANSFORM].extendTexture(a,s),f.associations.set(a,n)}}return d!==void 0&&(a.encoding=d),t[r]=a,a})}assignFinalMaterial(t){const r=t.geometry;let e=t.material;const d=r.attributes.tangent===void 0,f=r.attributes.color!==void 0,a=r.attributes.normal===void 0;if(t.isPoints){const s="PointsMaterial:"+e.uuid;let n=this.cache.get(s);n||(n=new fd,$r.prototype.copy.call(n,e),n.color.copy(e.color),n.map=e.map,n.sizeAttenuation=!1,this.cache.add(s,n)),e=n}else if(t.isLine){const s="LineBasicMaterial:"+e.uuid;let n=this.cache.get(s);n||(n=new hd,$r.prototype.copy.call(n,e),n.color.copy(e.color),this.cache.add(s,n)),e=n}if(d||f||a){let s="ClonedMaterial:"+e.uuid+":";d&&(s+="derivative-tangents:"),f&&(s+="vertex-colors:"),a&&(s+="flat-shading:");let n=this.cache.get(s);n||(n=e.clone(),f&&(n.vertexColors=!0),a&&(n.flatShading=!0),d&&(n.normalScale&&(n.normalScale.y*=-1),n.clearcoatNormalScale&&(n.clearcoatNormalScale.y*=-1)),this.cache.add(s,n),this.associations.set(n,this.associations.get(e))),e=n}e.aoMap&&r.attributes.uv2===void 0&&r.attributes.uv!==void 0&&r.setAttribute("uv2",r.attributes.uv),t.material=e}getMaterialType(){return qa}loadMaterial(t){const r=this,e=this.json,d=this.extensions,f=e.materials[t];let a;const s={},n=f.extensions||{},l=[];if(n[Rt.KHR_MATERIALS_UNLIT]){const m=d[Rt.KHR_MATERIALS_UNLIT];a=m.getMaterialType(),l.push(m.extendParams(s,f,r))}else{const m=f.pbrMetallicRoughness||{};if(s.color=new jt(1,1,1),s.opacity=1,Array.isArray(m.baseColorFactor)){const i=m.baseColorFactor;s.color.fromArray(i),s.opacity=i[3]}m.baseColorTexture!==void 0&&l.push(r.assignTexture(s,"map",m.baseColorTexture,Pt)),s.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,s.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(l.push(r.assignTexture(s,"metalnessMap",m.metallicRoughnessTexture)),l.push(r.assignTexture(s,"roughnessMap",m.metallicRoughnessTexture))),a=this._invokeOne(function(i){return i.getMaterialType&&i.getMaterialType(t)}),l.push(Promise.all(this._invokeAll(function(i){return i.extendMaterialParams&&i.extendMaterialParams(t,s)})))}f.doubleSided===!0&&(s.side=_o);const h=f.alphaMode||fa.OPAQUE;if(h===fa.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,h===fa.MASK&&(s.alphaTest=f.alphaCutoff!==void 0?f.alphaCutoff:.5)),f.normalTexture!==void 0&&a!==Kn&&(l.push(r.assignTexture(s,"normalMap",f.normalTexture)),s.normalScale=new _t(1,1),f.normalTexture.scale!==void 0)){const m=f.normalTexture.scale;s.normalScale.set(m,m)}return f.occlusionTexture!==void 0&&a!==Kn&&(l.push(r.assignTexture(s,"aoMap",f.occlusionTexture)),f.occlusionTexture.strength!==void 0&&(s.aoMapIntensity=f.occlusionTexture.strength)),f.emissiveFactor!==void 0&&a!==Kn&&(s.emissive=new jt().fromArray(f.emissiveFactor)),f.emissiveTexture!==void 0&&a!==Kn&&l.push(r.assignTexture(s,"emissiveMap",f.emissiveTexture,Pt)),Promise.all(l).then(function(){const m=new a(s);return f.name&&(m.name=f.name),Nn(m,f),r.associations.set(m,{materials:t}),f.extensions&&hs(d,m,f),m})}createUniqueName(t){const r=Nt.sanitizeNodeName(t||"");let e=r;for(let d=1;this.nodeNamesUsed[e];++d)e=r+"_"+d;return this.nodeNamesUsed[e]=!0,e}loadGeometries(t){const r=this,e=this.extensions,d=this.primitiveCache;function f(s){return e[Rt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(s,r).then(function(n){return Mu(n,s,r)})}const a=[];for(let s=0,n=t.length;s<n;s++){const l=t[s],h=tb(l),m=d[h];if(m)a.push(m.promise);else{let i;l.extensions&&l.extensions[Rt.KHR_DRACO_MESH_COMPRESSION]?i=f(l):i=Mu(new en,l,r),d[h]={primitive:l,promise:i},a.push(i)}}return Promise.all(a)}loadMesh(t){const r=this,e=this.json,d=this.extensions,f=e.meshes[t],a=f.primitives,s=[];for(let n=0,l=a.length;n<l;n++){const h=a[n].material===void 0?Qv(this.cache):this.getDependency("material",a[n].material);s.push(h)}return s.push(r.loadGeometries(a)),Promise.all(s).then(function(n){const l=n.slice(0,n.length-1),h=n[n.length-1],m=[];for(let o=0,c=h.length;o<c;o++){const u=h[o],p=a[o];let g;const v=l[o];if(p.mode===Br.TRIANGLES||p.mode===Br.TRIANGLE_STRIP||p.mode===Br.TRIANGLE_FAN||p.mode===void 0)g=f.isSkinnedMesh===!0?new w0(u,v):new Vr(u,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),p.mode===Br.TRIANGLE_STRIP?g.geometry=Tu(g.geometry,ef):p.mode===Br.TRIANGLE_FAN&&(g.geometry=Tu(g.geometry,Wu));else if(p.mode===Br.LINES)g=new E0(u,v);else if(p.mode===Br.LINE_STRIP)g=new Wa(u,v);else if(p.mode===Br.LINE_LOOP)g=new j0(u,v);else if(p.mode===Br.POINTS)g=new A0(u,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(g.geometry.morphAttributes).length>0&&eb(g,f),g.name=r.createUniqueName(f.name||"mesh_"+t),Nn(g,f),p.extensions&&hs(d,g,p),r.assignFinalMaterial(g),m.push(g)}for(let o=0,c=m.length;o<c;o++)r.associations.set(m[o],{meshes:t,primitives:o});if(m.length===1)return m[0];const i=new Jn;r.associations.set(i,{meshes:t});for(let o=0,c=m.length;o<c;o++)i.add(m[o]);return i})}loadCamera(t){let r;const e=this.json.cameras[t],d=e[e.type];if(!d){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?r=new Dr(bf.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):e.type==="orthographic"&&(r=new Ga(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),e.name&&(r.name=this.createUniqueName(e.name)),Nn(r,e),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],e=[];for(let d=0,f=r.joints.length;d<f;d++)e.push(this.getDependency("node",r.joints[d]));return r.inverseBindMatrices!==void 0?e.push(this.getDependency("accessor",r.inverseBindMatrices)):e.push(null),Promise.all(e).then(function(d){const f=d.pop(),a=d,s=[],n=[];for(let l=0,h=a.length;l<h;l++){const m=a[l];if(m){s.push(m);const i=new At;f!==null&&i.fromArray(f.array,l*16),n.push(i)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[l])}return new Ha(s,n)})}loadAnimation(t){const e=this.json.animations[t],d=[],f=[],a=[],s=[],n=[];for(let l=0,h=e.channels.length;l<h;l++){const m=e.channels[l],i=e.samplers[m.sampler],o=m.target,c=o.node,u=e.parameters!==void 0?e.parameters[i.input]:i.input,p=e.parameters!==void 0?e.parameters[i.output]:i.output;d.push(this.getDependency("node",c)),f.push(this.getDependency("accessor",u)),a.push(this.getDependency("accessor",p)),s.push(i),n.push(o)}return Promise.all([Promise.all(d),Promise.all(f),Promise.all(a),Promise.all(s),Promise.all(n)]).then(function(l){const h=l[0],m=l[1],i=l[2],o=l[3],c=l[4],u=[];for(let g=0,v=h.length;g<v;g++){const b=h[g],_=m[g],x=i[g],A=o[g],E=c[g];if(b===void 0)continue;b.updateMatrix();let T;switch(On[E.path]){case On.weights:T=Ss;break;case On.rotation:T=ii;break;case On.position:case On.scale:default:T=Ms;break}const C=b.name?b.name:b.uuid,R=A.interpolation!==void 0?Jv[A.interpolation]:Fi,P=[];On[E.path]===On.weights?b.traverse(function(k){k.morphTargetInfluences&&P.push(k.name?k.name:k.uuid)}):P.push(C);let N=x.array;if(x.normalized){const k=ja(N.constructor),I=new Float32Array(N.length);for(let B=0,Y=N.length;B<Y;B++)I[B]=N[B]*k;N=I}for(let k=0,I=P.length;k<I;k++){const B=new T(P[k]+"."+On[E.path],_.array,N,R);A.interpolation==="CUBICSPLINE"&&(B.createInterpolant=function(W){const H=this instanceof ii?Kv:xd;return new H(this.times,this.values,this.getValueSize()/3,W)},B.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(B)}}const p=e.name?e.name:"animation_"+t;return new O0(p,void 0,u)})}createNodeMesh(t){const r=this.json,e=this,d=r.nodes[t];return d.mesh===void 0?null:e.getDependency("mesh",d.mesh).then(function(f){const a=e._getNodeRef(e.meshCache,d.mesh,f);return d.weights!==void 0&&a.traverse(function(s){if(s.isMesh)for(let n=0,l=d.weights.length;n<l;n++)s.morphTargetInfluences[n]=d.weights[n]}),a})}loadNode(t){const r=this.json,e=this.extensions,d=this,f=r.nodes[t],a=f.name?d.createUniqueName(f.name):"";return function(){const s=[],n=d._invokeOne(function(i){return i.createNodeMesh&&i.createNodeMesh(t)});n&&s.push(n),f.camera!==void 0&&s.push(d.getDependency("camera",f.camera).then(function(i){return d._getNodeRef(d.cameraCache,f.camera,i)})),d._invokeAll(function(i){return i.createNodeAttachment&&i.createNodeAttachment(t)}).forEach(function(i){s.push(i)});const l=[],h=f.children||[];for(let i=0,o=h.length;i<o;i++)l.push(d.getDependency("node",h[i]));const m=f.skin===void 0?Promise.resolve(null):d.getDependency("skin",f.skin);return Promise.all([Promise.all(s),Promise.all(l),m])}().then(function(s){const n=s[0],l=s[1],h=s[2];let m;if(f.isBone===!0?m=new ud:n.length>1?m=new Jn:n.length===1?m=n[0]:m=new Jt,m!==n[0])for(let i=0,o=n.length;i<o;i++)m.add(n[i]);if(f.name&&(m.userData.name=f.name,m.name=a),Nn(m,f),f.extensions&&hs(e,m,f),f.matrix!==void 0){const i=new At;i.fromArray(f.matrix),m.applyMatrix4(i)}else f.translation!==void 0&&m.position.fromArray(f.translation),f.rotation!==void 0&&m.quaternion.fromArray(f.rotation),f.scale!==void 0&&m.scale.fromArray(f.scale);d.associations.has(m)||d.associations.set(m,{}),d.associations.get(m).nodes=t,h!==null&&m.traverse(function(i){i.isSkinnedMesh&&i.bind(h,nb)});for(let i=0,o=l.length;i<o;i++)m.add(l[i]);return m})}loadScene(t){const r=this.extensions,e=this.json.scenes[t],d=this,f=new Jn;e.name&&(f.name=d.createUniqueName(e.name)),Nn(f,e),e.extensions&&hs(r,f,e);const a=e.nodes||[],s=[];for(let n=0,l=a.length;n<l;n++)s.push(d.getDependency("node",a[n]));return Promise.all(s).then(function(n){for(let h=0,m=n.length;h<m;h++)f.add(n[h]);const l=h=>{const m=new Map;for(const[i,o]of d.associations)(i instanceof $r||i instanceof wr)&&m.set(i,o);return h.traverse(i=>{const o=d.associations.get(i);o!=null&&m.set(i,o)}),m};return d.associations=l(f),f})}}function sb(w,t,r){const e=t.attributes,d=new Wi;if(e.POSITION!==void 0){const s=r.json.accessors[e.POSITION],n=s.min,l=s.max;if(n!==void 0&&l!==void 0){if(d.set(new Re(n[0],n[1],n[2]),new Re(l[0],l[1],l[2])),s.normalized){const h=ja(Ii[s.componentType]);d.min.multiplyScalar(h),d.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const f=t.targets;if(f!==void 0){const s=new Re,n=new Re;for(let l=0,h=f.length;l<h;l++){const m=f[l];if(m.POSITION!==void 0){const i=r.json.accessors[m.POSITION],o=i.min,c=i.max;if(o!==void 0&&c!==void 0){if(n.setX(Math.max(Math.abs(o[0]),Math.abs(c[0]))),n.setY(Math.max(Math.abs(o[1]),Math.abs(c[1]))),n.setZ(Math.max(Math.abs(o[2]),Math.abs(c[2]))),i.normalized){const u=ja(Ii[i.componentType]);n.multiplyScalar(u)}s.max(n)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(s)}w.boundingBox=d;const a=new qi;d.getCenter(a.center),a.radius=d.min.distanceTo(d.max)/2,w.boundingSphere=a}function Mu(w,t,r){const e=t.attributes,d=[];function f(a,s){return r.getDependency("accessor",a).then(function(n){w.setAttribute(s,n)})}for(const a in e){const s=Ea[a]||a.toLowerCase();s in w.attributes||d.push(f(e[a],s))}if(t.indices!==void 0&&!w.index){const a=r.getDependency("accessor",t.indices).then(function(s){w.setIndex(s)});d.push(a)}return Nn(w,t),sb(w,t,r),Promise.all(d).then(function(){return t.targets!==void 0?$v(w,t.targets,r):w})}function Tu(w,t){let r=w.getIndex();if(r===null){const a=[],s=w.getAttribute("position");if(s!==void 0){for(let n=0;n<s.count;n++)a.push(n);w.setIndex(a),r=w.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),w}const e=r.count-2,d=[];if(t===Wu)for(let a=1;a<=e;a++)d.push(r.getX(0)),d.push(r.getX(a)),d.push(r.getX(a+1));else for(let a=0;a<e;a++)a%2===0?(d.push(r.getX(a)),d.push(r.getX(a+1)),d.push(r.getX(a+2))):(d.push(r.getX(a+2)),d.push(r.getX(a+1)),d.push(r.getX(a)));d.length/3!==e&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const f=w.clone();return f.setIndex(d),f}class ob extends z0{constructor(t){super(t),this.type=Mn}parse(t){const s=function(b,_){switch(b){case 1:console.error("THREE.RGBELoader Read Error: "+(_||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(_||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(_||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(_||""))}return-1},m=`
`,i=function(b,_,x){_=_||1024;let E=b.pos,T=-1,C=0,R="",P=String.fromCharCode.apply(null,new Uint16Array(b.subarray(E,E+128)));for(;0>(T=P.indexOf(m))&&C<_&&E<b.byteLength;)R+=P,C+=P.length,E+=128,P+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(E,E+128)));return-1<T?(x!==!1&&(b.pos+=C+T+1),R+P.slice(0,T)):!1},o=function(b){const _=/^#\?(\S+)/,x=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,T=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let R,P;if(b.pos>=b.byteLength||!(R=i(b)))return s(1,"no header found");if(!(P=R.match(_)))return s(3,"bad initial token");for(C.valid|=1,C.programtype=P[1],C.string+=R+`
`;R=i(b),R!==!1;){if(C.string+=R+`
`,R.charAt(0)==="#"){C.comments+=R+`
`;continue}if((P=R.match(x))&&(C.gamma=parseFloat(P[1])),(P=R.match(A))&&(C.exposure=parseFloat(P[1])),(P=R.match(E))&&(C.valid|=2,C.format=P[1]),(P=R.match(T))&&(C.valid|=4,C.height=parseInt(P[1],10),C.width=parseInt(P[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2?C.valid&4?C:s(3,"missing image size specifier"):s(3,"missing format specifier")},c=function(b,_,x){const A=_;if(A<8||A>32767||b[0]!==2||b[1]!==2||b[2]&128)return new Uint8Array(b);if(A!==(b[2]<<8|b[3]))return s(3,"wrong scanline width");const E=new Uint8Array(4*_*x);if(!E.length)return s(4,"unable to allocate buffer space");let T=0,C=0;const R=4*A,P=new Uint8Array(4),N=new Uint8Array(R);let k=x;for(;k>0&&C<b.byteLength;){if(C+4>b.byteLength)return s(1);if(P[0]=b[C++],P[1]=b[C++],P[2]=b[C++],P[3]=b[C++],P[0]!=2||P[1]!=2||(P[2]<<8|P[3])!=A)return s(3,"bad rgbe scanline format");let I=0,B;for(;I<R&&C<b.byteLength;){B=b[C++];const W=B>128;if(W&&(B-=128),B===0||I+B>R)return s(3,"bad scanline data");if(W){const H=b[C++];for(let X=0;X<B;X++)N[I++]=H}else N.set(b.subarray(C,C+B),I),I+=B,C+=B}const Y=A;for(let W=0;W<Y;W++){let H=0;E[T]=N[W+H],H+=A,E[T+1]=N[W+H],H+=A,E[T+2]=N[W+H],H+=A,E[T+3]=N[W+H],T+=4}k--}return E},u=function(b,_,x,A){const E=b[_+3],T=Math.pow(2,E-128)/255;x[A+0]=b[_+0]*T,x[A+1]=b[_+1]*T,x[A+2]=b[_+2]*T,x[A+3]=1},p=function(b,_,x,A){const E=b[_+3],T=Math.pow(2,E-128)/255;x[A+0]=ao.toHalfFloat(Math.min(b[_+0]*T,65504)),x[A+1]=ao.toHalfFloat(Math.min(b[_+1]*T,65504)),x[A+2]=ao.toHalfFloat(Math.min(b[_+2]*T,65504)),x[A+3]=ao.toHalfFloat(1)},g=new Uint8Array(t);g.pos=0;const v=o(g);if(v!==-1){const b=v.width,_=v.height,x=c(g.subarray(g.pos),b,_);if(x!==-1){let A,E,T;switch(this.type){case Jr:T=x.length/4;const C=new Float32Array(T*4);for(let P=0;P<T;P++)u(x,P*4,C,P*4);A=C,E=Jr;break;case Mn:T=x.length/4;const R=new Uint16Array(T*4);for(let P=0;P<T;P++)p(x,P*4,R,P*4);A=R,E=Mn;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:b,height:_,data:A,header:v.string,gamma:v.gamma,exposure:v.exposure,type:E}}}return null}setDataType(t){return this.type=t,this}load(t,r,e,d){function f(a,s){switch(a.type){case Jr:case Mn:a.encoding=Gn,a.minFilter=dr,a.magFilter=dr,a.generateMipmaps=!1,a.flipY=!0;break}r&&r(a,s)}return super.load(t,f,e,d)}}function Eu(w){let t,r;return t=new bv({props:{rotation:[0,w[3],0],object:w[1].scene,scale:[pa,pa,pa]}}),{c(){an(t.$$.fragment)},m(e,d){Kr(t,e,d),r=!0},p(e,d){const f={};d&8&&(f.rotation=[0,e[3],0]),d&2&&(f.object=e[1].scene),t.$set(f)},i(e){r||(er(t.$$.fragment,e),r=!0)},o(e){yr(t.$$.fragment,e),r=!1},d(e){zr(t,e)}}}function ab(w){let t,r,e,d,f,a,s,n,l,h,m=w[1]&&Eu(w);return r=new xv({props:{position:w[0].cameraPosition,zoom:w[0].cameraZoom}}),d=new Mv({props:{target:[0,0,0],enableZoom:!1,enablePan:!1,enableDamping:!0,maxPolarAngle:Math.PI*.5}}),a=new Ev({props:{intensity:.15}}),n=new Av({props:{intensity:.4,position:[5,6,5],shadow:{mapSize:[2048,2048]}}}),{c(){m&&m.c(),t=vr(),an(r.$$.fragment),e=vr(),an(d.$$.fragment),f=vr(),an(a.$$.fragment),s=vr(),an(n.$$.fragment),l=si(`
	​`)},m(i,o){m&&m.m(i,o),Vt(i,t,o),Kr(r,i,o),Vt(i,e,o),Kr(d,i,o),Vt(i,f,o),Kr(a,i,o),Vt(i,s,o),Kr(n,i,o),Vt(i,l,o),h=!0},p(i,o){i[1]?m?(m.p(i,o),o&2&&er(m,1)):(m=Eu(i),m.c(),er(m,1),m.m(t.parentNode,t)):m&&(Pa(),yr(m,1,1,()=>{m=null}),Da());const c={};o&1&&(c.position=i[0].cameraPosition),o&1&&(c.zoom=i[0].cameraZoom),r.$set(c)},i(i){h||(er(m),er(r.$$.fragment,i),er(d.$$.fragment,i),er(a.$$.fragment,i),er(n.$$.fragment,i),h=!0)},o(i){yr(m),yr(r.$$.fragment,i),yr(d.$$.fragment,i),yr(a.$$.fragment,i),yr(n.$$.fragment,i),h=!1},d(i){m&&m.d(i),i&&tr(t),zr(r,i),i&&tr(e),zr(d,i),i&&tr(f),zr(a,i),i&&tr(s),zr(n,i),i&&tr(l)}}}function lb(w){let t,r,e;return r=new hv({props:{environment:w[2],width:600,height:600,alpha:!0,pixelRatio:1,antialias:!0,powerPreference:"high-performance",shadows:!0,$$slots:{default:[ab]},$$scope:{ctx:w}}}),{c(){t=si("​"),an(r.$$.fragment)},m(d,f){Vt(d,t,f),Kr(r,d,f),e=!0},p(d,[f]){const a={};f&4&&(a.environment=d[2]),f&75&&(a.$$scope={dirty:f,ctx:d}),r.$set(a)},i(d){e||(er(r.$$.fragment,d),e=!0)},o(d){yr(r.$$.fragment,d),e=!1},d(d){d&&tr(t),zr(r,d)}}}const pa=1;function cb(w,t,r){let{data:e}=t;const d=e.modelSrc;let f=null,a,s=0;bd(()=>{r(3,s+=.001)});function n(){return new Cv().loadAsync(d)}return Hi(()=>{n().then(l=>{l.scene.traverse(h=>{h.castShadow=!0,h.receiveShadow=!0}),r(1,f=l)}),new ob().load(e.environmentMapSrc,l=>{r(2,a=l),r(2,a.mapping=yo,a),r(2,a.encoding=Pt,a)})}),w.$$set=l=>{"data"in l&&r(0,e=l.data)},[e,f,a,s]}class ub extends dn{constructor(t){super(),Cr(this,t,cb,lb,Ar,{data:0})}}function ju(w,t,r){const e=w.slice();return e[1]=t[r].iconPath,e[2]=t[r].text,e}function Au(w){let t,r=w[0],e=[];for(let d=0;d<r.length;d+=1)e[d]=Cu(ju(w,r,d));return{c(){t=Dt("ul");for(let d=0;d<e.length;d+=1)e[d].c();st(t,"class","summary")},m(d,f){Vt(d,t,f);for(let a=0;a<e.length;a+=1)e[a].m(t,null)},p(d,f){if(f&1){r=d[0];let a;for(a=0;a<r.length;a+=1){const s=ju(d,r,a);e[a]?e[a].p(s,f):(e[a]=Cu(s),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=r.length}},d(d){d&&tr(t),ku(e,d)}}}function Cu(w){let t,r,e,d,f,a=w[2]+"",s,n;return{c(){t=Dt("li"),r=Dt("img"),f=vr(),s=si(a),n=vr(),Dl(r.src,e=w[1])||st(r,"src",e),st(r,"alt",d=w[2]),st(t,"class","summary-item text-footnote")},m(l,h){Vt(l,t,h),gt(t,r),gt(t,f),gt(t,s),gt(t,n)},p(l,h){h&1&&!Dl(r.src,e=l[1])&&st(r,"src",e),h&1&&d!==(d=l[2])&&st(r,"alt",d),h&1&&a!==(a=l[2]+"")&&La(s,a)},d(l){l&&tr(t)}}}function db(w){let t,r=w[0]&&Au(w);return{c(){r&&r.c(),t=Ca(),this.c=rr},m(e,d){r&&r.m(e,d),Vt(e,t,d)},p(e,[d]){e[0]?r?r.p(e,d):(r=Au(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:rr,o:rr,d(e){r&&r.d(e),e&&tr(t)}}}function hb(w,t,r){let{data:e}=t;return console.log({data:e}),w.$$set=d=>{"data"in d&&r(0,e=d.data)},[e]}class fb extends oi{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";.summary{display:flex;justify-content:space-between;align-items:center}.summary-item{display:flex;align-items:center;position:relative}.summary-item:after{content:"";position:absolute;bottom:-20%;left:5%;width:90%;height:8%;border-radius:50%;box-shadow:0px 10px 5px hsla(259.2 0% 66.9% / 0.2)}.summary-item>img{width:48px;height:48px;margin-right:0.8rem}</style>',Cr(this,{target:this.shadowRoot,props:Vi(this.attributes),customElement:!0},hb,db,Ar,{data:0},null),t&&(t.target&&Vt(t.target,this,t.anchor),t.props&&(this.$set(t.props),cn()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),cn()}}customElements.define("page-summary",fb);function pb(w){let t,r,e;return{c(){t=Dt("button"),r=Dt("span"),e=si(w[0]),this.c=rr,st(r,"class","text-button-caption")},m(d,f){Vt(d,t,f),gt(t,r),gt(r,e)},p(d,[f]){f&1&&La(e,d[0])},i:rr,o:rr,d(d){d&&tr(t)}}}function mb(w,t,r){let{label:e}=t;return w.$$set=d=>{"label"in d&&r(0,e=d.label)},[e]}class gb extends oi{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";button{all:unset;padding:1.2rem 2rem;border-radius:3px;background-color:var(--color-light-primary);cursor:pointer;box-shadow:0 4px 14px 0 hsla(259.2 100% 66.9% / 0.39);transition-duration:500ms}button:hover{background-color:var(--color-light-primary-hover);box-shadow:0 4px 14px 0 hsla(259.2 100% 66.9% / 0)}span{color:var(--color-light-on-primary)}</style>',Cr(this,{target:this.shadowRoot,props:Vi(this.attributes),customElement:!0},mb,pb,Ar,{label:0},null),t&&(t.target&&Vt(t.target,this,t.anchor),t.props&&(this.$set(t.props),cn()))}static get observedAttributes(){return["label"]}get label(){return this.$$.ctx[0]}set label(t){this.$$set({label:t}),cn()}}customElements.define("basic-button",gb);const yb={title:"Оснащение",excerpt:"Выполняем комплексное оснащение промышленных объектов сложным инженерным оборудованием. Также, мы произведем необходимое импортозамещение, если того вдруг потребуют неотвратимые обстоятельства."},vb={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/factory/factory.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/studio_pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.2},bb=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/noPiggy.png",text:"Полный цикл"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/quality.png",text:"Современное проектирование"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/deadline.png",text:"Лучшие инженеры"}],_b={content:yb,gltf:vb,summary:bb};function xb(w){let t,r,e,d,f,a,s,n,l,h,m,i,o,c,u;return m=new ub({props:{data:w[0].gltf}}),{c(){t=Dt("div"),r=Dt("div"),e=Dt("div"),d=Dt("h1"),d.textContent=`${w[0].content.title}`,f=vr(),a=Dt("p"),a.textContent=`${w[0].content.excerpt}`,s=vr(),n=Dt("div"),n.innerHTML='<basic-button label="Наш магазин"></basic-button>',l=vr(),h=Dt("div"),an(m.$$.fragment),i=vr(),o=Dt("div"),c=Dt("page-summary"),this.c=rr,st(d,"class","text-screen-title text-with-gradient"),st(a,"class","text-body excerpt"),st(n,"class","button-box"),st(e,"class","message-box"),st(h,"class","art-box"),mo(c,"data",w[0].summary),st(o,"class","summary-box"),st(r,"class","content-box"),st(t,"class","page")},m(p,g){Vt(p,t,g),gt(t,r),gt(r,e),gt(e,d),gt(e,f),gt(e,a),gt(e,s),gt(e,n),gt(r,l),gt(r,h),Kr(m,h,null),gt(r,i),gt(r,o),gt(o,c),u=!0},p:rr,i(p){u||(er(m.$$.fragment,p),u=!0)},o(p){yr(m.$$.fragment,p),u=!1},d(p){p&&tr(t),zr(m)}}}function wb(w){return[_b]}class Sb extends oi{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";:root{--margin-bottom:2.4rem;--offset-margin:5.8rem}.page{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:var(--color-light-surface)}.content-box{display:grid;grid-template-rows:600px auto;grid-template-columns:repeat(2, auto)}.message-box{grid-row:1/2;grid-column:1/2;display:flex;flex-direction:column;justify-content:flex-end}h1{margin-left:-5.8rem;white-space:nowrap}.excerpt{width:500px;color:var(--color-light-on-surface);margin-bottom:3.2rem}.button-box{margin-bottom:4rem}.art-box{position:relative;width:600px;height:600px;margin-bottom:-4rem;grid-row:1/2;grid-column:2/3}.summary-box{grid-row:2/3;grid-column:1/3}</style>',Cr(this,{target:this.shadowRoot,props:Vi(this.attributes),customElement:!0},wb,xb,Ar,{},null),t&&t.target&&Vt(t.target,this,t.anchor)}}customElements.define("gltf-screen",Sb);function Mb(w){let t,r,e=d=>{let f=0,a,s;const n=600,l=2;let h=n/(3.333*l);d.preload=()=>{r=d.loadImage("https://v0ffk4.github.io/tios-static/webgl/texCrateVariant.jpg")},d.setup=()=>{d.describe("анимация контейнеров с оборудованием"),t=d.createCanvas(n,n,d.WEBGL),t.style("position","fixed"),t.style("top","50%"),t.style("left","50%"),t.style("transform","translate(-50%, -50%)"),t.style("margin-top","-50px"),t.style("margin-left","150px"),t.style("mix-blend-mode","multiply"),a=d.atan(.5/d.sqrt(1)),s=d.dist(0,0,200,200),d.createGraphics(200,200)},d.draw=()=>{let m=d.mouseX-d.width/2,i=d.mouseY-d.height/2;d.background(255,0),d.stroke(255),d.strokeWeight(1),d.ortho(-n*.9,n*.9,-n*.9,n*.9,0,2e3),d.translate(50,50,-50),d.rotateX(-d.QUARTER_PI*.5),d.rotateY(a);let o=d.map(m,0,d.width,-50,50),c=d.map(i,0,d.height,-200,-200);d.directionalLight(255,255,255,-o,-c,-500),d.ambientLight(120,120,120),d.pointLight(100,100,100,m,i,100),d.ambientMaterial(100),d.normalMaterial();for(let p=0;p<d.height;p+=h*l)u(p);function u(p){for(let g=0;g<d.width;g+=h){d.push();let v=d.dist(g,p,d.width/2,d.height/2),b=d.map(v,0,s,-d.PI,d.PI),_=f+b,x=d.floor(d.map(d.sin(_),-1,1,100,200));d.translate(g-d.width/2,0,p-d.height/2),d.texture(r),d.box(h,x,h*l),d.smooth(),d.pop()}}f-=.05}};return Hi(()=>{parent&&new Uu(e)}),[]}class Tb extends dn{constructor(t){super(),Cr(this,t,Mb,null,Ar,{})}}const Eb={title:"Техника",excerpt:"Быстро и ответственно поставляем широкий спектр оборудования во все уголки России. Напрямую работаем с поставщиками, поэтому клиенты получают качественное оборудование точно в срок."},jb="gear",Ab=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/noPiggy.png",text:"Без посредников"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/quality.png",text:"Высокое качество"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/deadline.png",text:"Сжатые сроки"}],Cb={content:Eb,variant:jb,summary:Ab};function Lb(w){let t,r,e,d,f,a,s,n,l,h,m,i,o,c;return o=new Tb({}),{c(){t=Dt("div"),r=Dt("div"),e=Dt("div"),d=Dt("h1"),d.textContent=`${w[0].content.title}`,f=vr(),a=Dt("p"),a.textContent=`${w[0].content.excerpt}`,s=vr(),n=Dt("div"),n.innerHTML='<basic-button label="Наш магазин"></basic-button>',l=vr(),h=Dt("div"),m=Dt("page-summary"),i=vr(),an(o.$$.fragment),this.c=rr,st(d,"class","text-screen-title text-with-gradient"),st(a,"class","text-body excerpt"),st(n,"class","button-box"),st(e,"class","message-box"),mo(m,"data",w[0].summary),st(h,"class","summary-box"),st(r,"class","content-box"),st(t,"class","page")},m(u,p){Vt(u,t,p),gt(t,r),gt(r,e),gt(e,d),gt(e,f),gt(e,a),gt(e,s),gt(e,n),gt(r,l),gt(r,h),gt(h,m),Vt(u,i,p),Kr(o,u,p),c=!0},p:rr,i(u){c||(er(o.$$.fragment,u),c=!0)},o(u){yr(o.$$.fragment,u),c=!1},d(u){u&&tr(t),u&&tr(i),zr(o,u)}}}function Rb(w){return[Cb]}class Pb extends oi{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";:root{--margin-bottom:2.4rem;--offset-margin:5.8rem}.page{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:var(--color-light-surface);mix-blend-mode:multiply}.content-box{display:grid;width:1000px;grid-template-rows:600px auto}.message-box{grid-row:1/2;grid-column:1/2;display:flex;flex-direction:column;justify-content:flex-end}h1{margin-left:-5.8rem;white-space:nowrap}.excerpt{width:500px;color:var(--color-light-on-surface);margin-bottom:3.2rem}.button-box{margin-bottom:4rem}.summary-box{grid-row:2/3}</style>',Cr(this,{target:this.shadowRoot,props:Vi(this.attributes),customElement:!0},Rb,Lb,Ar,{},null),t&&t.target&&Vt(t.target,this,t.anchor)}}customElements.define("p5-screen",Pb);
