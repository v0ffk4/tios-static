(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))e(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerpolicy&&(d.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?d.credentials="include":u.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function e(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();function ut(){}const tl=b=>b;function Qh(b,t){for(const r in t)b[r]=t[r];return b}function rl(b){return b()}function fc(){return Object.create(null)}function ni(b){b.forEach(rl)}function Qi(b){return typeof b=="function"}function Ot(b,t){return b!=b?t==t:b!==t||b&&typeof b=="object"||typeof b=="function"}let to;function en(b,t){return to||(to=document.createElement("a")),to.href=t,b===to.href}function Ld(b){return Object.keys(b).length===0}function nl(b,t,r,e){if(b){const u=Rd(b,t,r,e);return b[0](u)}}function Rd(b,t,r,e){return b[1]&&e?Qh(r.ctx.slice(),b[1](e(t))):r.ctx}function il(b,t,r,e){if(b[2]&&e){const u=b[2](e(r));if(t.dirty===void 0)return u;if(typeof u=="object"){const d=[],o=Math.max(t.dirty.length,u.length);for(let i=0;i<o;i+=1)d[i]=t.dirty[i]|u[i];return d}return t.dirty|u}return t.dirty}function sl(b,t,r,e,u,d){if(u){const o=Rd(t,r,e,d);b.p(o,u)}}function ol(b){if(b.ctx.length>32){const t=[],r=b.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}const Pd=typeof window<"u";let Dd=Pd?()=>window.performance.now():()=>Date.now(),al=Pd?b=>requestAnimationFrame(b):ut;const Yi=new Set;function kd(b){Yi.forEach(t=>{t.c(b)||(Yi.delete(t),t.f())}),Yi.size!==0&&al(kd)}function Id(b){let t;return Yi.size===0&&al(kd),{promise:new Promise(r=>{Yi.add(t={c:b,f:r})}),abort(){Yi.delete(t)}}}function Ae(b,t){b.appendChild(t)}function Od(b,t,r){const e=ll(b);if(!e.getElementById(t)){const u=tt("style");u.id=t,u.textContent=r,Nd(e,u)}}function ll(b){if(!b)return document;const t=b.getRootNode?b.getRootNode():b.ownerDocument;return t&&t.host?t:b.ownerDocument}function $h(b){const t=tt("style");return Nd(ll(b),t),t.sheet}function Nd(b,t){return Ae(b.head||b,t),t.sheet}function lt(b,t,r){b.insertBefore(t,r||null)}function dt(b){b.parentNode&&b.parentNode.removeChild(b)}function Ws(b,t){for(let r=0;r<b.length;r+=1)b[r]&&b[r].d(t)}function tt(b){return document.createElement(b)}function mt(b){return document.createElementNS("http://www.w3.org/2000/svg",b)}function dr(b){return document.createTextNode(b)}function _t(){return dr(" ")}function zn(){return dr("")}function Nn(b,t,r,e){return b.addEventListener(t,r,e),()=>b.removeEventListener(t,r,e)}function me(b,t,r){r==null?b.removeAttribute(t):b.getAttribute(t)!==r&&b.setAttribute(t,r)}function fn(b,t,r){t in b?b[t]=typeof b[t]=="boolean"&&r===""?!0:r:me(b,t,r)}function ef(b){return Array.from(b.childNodes)}function ii(b,t){t=""+t,b.wholeText!==t&&(b.data=t)}function br(b,t,r,e){r===null?b.style.removeProperty(t):b.style.setProperty(t,r,e?"important":"")}let ro;function tf(){if(ro===void 0){ro=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ro=!0}}return ro}function Ud(b,t){getComputedStyle(b).position==="static"&&(b.style.position="relative");const e=tt("iframe");e.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),e.setAttribute("aria-hidden","true"),e.tabIndex=-1;const u=tf();let d;return u?(e.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",d=Nn(window,"message",o=>{o.source===e.contentWindow&&t()})):(e.src="about:blank",e.onload=()=>{d=Nn(e.contentWindow,"resize",t)}),Ae(b,e),()=>{(u||d&&e.contentWindow)&&d(),dt(e)}}function zt(b,t,r){b.classList[r?"add":"remove"](t)}function Fd(b,t,{bubbles:r=!1,cancelable:e=!1}={}){const u=document.createEvent("CustomEvent");return u.initCustomEvent(b,r,e,t),u}function jr(b){const t={};for(const r of b)t[r.name]=r.value;return t}const No=new Map;let Uo=0;function rf(b){let t=5381,r=b.length;for(;r--;)t=(t<<5)-t^b.charCodeAt(r);return t>>>0}function nf(b,t){const r={stylesheet:$h(t),rules:{}};return No.set(b,r),r}function Ua(b,t,r,e,u,d,o,i=0){const n=16.666/e;let a=`{
`;for(let m=0;m<=1;m+=n){const g=t+(r-t)*d(m);a+=m*100+`%{${o(g,1-g)}}
`}const f=a+`100% {${o(r,1-r)}}
}`,p=`__svelte_${rf(f)}_${i}`,s=ll(b),{stylesheet:l,rules:c}=No.get(s)||nf(s,b);c[p]||(c[p]=!0,l.insertRule(`@keyframes ${p} ${f}`,l.cssRules.length));const h=b.style.animation||"";return b.style.animation=`${h?`${h}, `:""}${p} ${e}ms linear ${u}ms 1 both`,Uo+=1,p}function Fa(b,t){const r=(b.style.animation||"").split(", "),e=r.filter(t?d=>d.indexOf(t)<0:d=>d.indexOf("__svelte")===-1),u=r.length-e.length;u&&(b.style.animation=e.join(", "),Uo-=u,Uo||sf())}function sf(){al(()=>{Uo||(No.forEach(b=>{const{ownerNode:t}=b.stylesheet;t&&dt(t)}),No.clear())})}let Us;function ks(b){Us=b}function qs(){if(!Us)throw new Error("Function called outside component initialization");return Us}function si(b){qs().$$.on_mount.push(b)}function cl(b){qs().$$.on_destroy.push(b)}function of(){const b=qs();return(t,r,{cancelable:e=!1}={})=>{const u=b.$$.callbacks[t];if(u){const d=Fd(t,r,{cancelable:e});return u.slice().forEach(o=>{o.call(b,d)}),!d.defaultPrevented}return!0}}function Bd(b,t){return qs().$$.context.set(b,t),t}function pc(b){return qs().$$.context.get(b)}const Wi=[],$i=[],Po=[],mc=[],af=Promise.resolve();let Ba=!1;function lf(){Ba||(Ba=!0,af.then(fr))}function _r(b){Po.push(b)}const ea=new Set;let Ai=0;function fr(){if(Ai!==0)return;const b=Us;do{try{for(;Ai<Wi.length;){const t=Wi[Ai];Ai++,ks(t),cf(t.$$)}}catch(t){throw Wi.length=0,Ai=0,t}for(ks(null),Wi.length=0,Ai=0;$i.length;)$i.pop()();for(let t=0;t<Po.length;t+=1){const r=Po[t];ea.has(r)||(ea.add(r),r())}Po.length=0}while(Wi.length);for(;mc.length;)mc.pop()();Ba=!1,ea.clear(),ks(b)}function cf(b){if(b.fragment!==null){b.update(),ni(b.before_update);const t=b.dirty;b.dirty=[-1],b.fragment&&b.fragment.p(b.ctx,t),b.after_update.forEach(_r)}}let bs;function zd(){return bs||(bs=Promise.resolve(),bs.then(()=>{bs=null})),bs}function Is(b,t,r){b.dispatchEvent(Fd(`${t?"intro":"outro"}${r}`))}const Do=new Set;let kn;function Fn(){kn={r:0,c:[],p:kn}}function Bn(){kn.r||ni(kn.c),kn=kn.p}function xt(b,t){b&&b.i&&(Do.delete(b),b.i(t))}function Mt(b,t,r,e){if(b&&b.o){if(Do.has(b))return;Do.add(b),kn.c.push(()=>{Do.delete(b),e&&(r&&b.d(1),e())}),b.o(t)}else e&&e()}const Gd={duration:0};function gc(b,t,r){const e={direction:"in"};let u=t(b,r,e),d=!1,o,i,n=0;function a(){o&&Fa(b,o)}function f(){const{delay:s=0,duration:l=300,easing:c=tl,tick:h=ut,css:m}=u||Gd;m&&(o=Ua(b,0,1,l,s,c,m,n++)),h(0,1);const g=Dd()+s,y=g+l;i&&i.abort(),d=!0,_r(()=>Is(b,!0,"start")),i=Id(_=>{if(d){if(_>=y)return h(1,0),Is(b,!0,"end"),a(),d=!1;if(_>=g){const x=c((_-g)/l);h(x,1-x)}}return d})}let p=!1;return{start(){p||(p=!0,Fa(b),Qi(u)?(u=u(e),zd().then(f)):f())},invalidate(){p=!1},end(){d&&(a(),d=!1)}}}function zr(b,t,r,e){const u={direction:"both"};let d=t(b,r,u),o=e?0:1,i=null,n=null,a=null;function f(){a&&Fa(b,a)}function p(l,c){const h=l.b-o;return c*=Math.abs(h),{a:o,b:l.b,d:h,duration:c,start:l.start,end:l.start+c,group:l.group}}function s(l){const{delay:c=0,duration:h=300,easing:m=tl,tick:g=ut,css:y}=d||Gd,_={start:Dd()+c,b:l};l||(_.group=kn,kn.r+=1),i||n?n=_:(y&&(f(),a=Ua(b,o,l,h,c,m,y)),l&&g(0,1),i=p(_,h),_r(()=>Is(b,l,"start")),Id(x=>{if(n&&x>n.start&&(i=p(n,h),n=null,Is(b,i.b,"start"),y&&(f(),a=Ua(b,o,i.b,i.duration,0,m,d.css))),i){if(x>=i.end)g(o=i.b,1-o),Is(b,i.b,"end"),n||(i.b?f():--i.group.r||ni(i.group.c)),i=null;else if(x>=i.start){const w=x-i.start;o=i.a+i.d*m(w/i.duration),g(o,1-o)}}return!!(i||n)}))}return{run(l){Qi(d)?zd().then(()=>{d=d(u),s(l)}):s(l)},end(){f(),i=n=null}}}const Vd=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Kt(b){b&&b.c()}function Xt(b,t,r,e){const{fragment:u,after_update:d}=b.$$;u&&u.m(t,r),e||_r(()=>{const o=b.$$.on_mount.map(rl).filter(Qi);b.$$.on_destroy?b.$$.on_destroy.push(...o):ni(o),b.$$.on_mount=[]}),d.forEach(_r)}function Ht(b,t){const r=b.$$;r.fragment!==null&&(ni(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function uf(b,t){b.$$.dirty[0]===-1&&(Wi.push(b),lf(),b.$$.dirty.fill(0)),b.$$.dirty[t/31|0]|=1<<t%31}function Ut(b,t,r,e,u,d,o,i=[-1]){const n=Us;ks(b);const a=b.$$={fragment:null,ctx:[],props:d,update:ut,not_equal:u,bound:fc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(n?n.$$.context:[])),callbacks:fc(),dirty:i,skip_bound:!1,root:t.target||n.$$.root};o&&o(a.root);let f=!1;if(a.ctx=r?r(b,t.props||{},(p,s,...l)=>{const c=l.length?l[0]:s;return a.ctx&&u(a.ctx[p],a.ctx[p]=c)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](c),f&&uf(b,p)),s}):[],a.update(),f=!0,ni(a.before_update),a.fragment=e?e(a.ctx):!1,t.target){if(t.hydrate){const p=ef(t.target);a.fragment&&a.fragment.l(p),p.forEach(dt)}else a.fragment&&a.fragment.c();t.intro&&xt(b.$$.fragment),Xt(b,t.target,t.anchor,t.customElement),fr()}ks(n)}let xr;typeof HTMLElement=="function"&&(xr=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:b}=this.$$;this.$$.on_disconnect=b.map(rl).filter(Qi);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(b,t,r){this[b]=r}disconnectedCallback(){ni(this.$$.on_disconnect)}$destroy(){Ht(this,1),this.$destroy=ut}$on(b,t){if(!Qi(t))return ut;const r=this.$$.callbacks[b]||(this.$$.callbacks[b]=[]);return r.push(t),()=>{const e=r.indexOf(t);e!==-1&&r.splice(e,1)}}$set(b){this.$$set&&!Ld(b)&&(this.$$.skip_bound=!0,this.$$set(b),this.$$.skip_bound=!1)}});class Rr{$destroy(){Ht(this,1),this.$destroy=ut}$on(t,r){if(!Qi(r))return ut;const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(r),()=>{const u=e.indexOf(r);u!==-1&&e.splice(u,1)}}$set(t){this.$$set&&!Ld(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function yc(b,t,r){const e=b.slice();return e[1]=t[r].iconPath,e[2]=t[r].text,e}function vc(b){let t,r=b[0],e=[];for(let u=0;u<r.length;u+=1)e[u]=bc(yc(b,r,u));return{c(){t=tt("ul");for(let u=0;u<e.length;u+=1)e[u].c();me(t,"class","summary")},m(u,d){lt(u,t,d);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(u,d){if(d&1){r=u[0];let o;for(o=0;o<r.length;o+=1){const i=yc(u,r,o);e[o]?e[o].p(i,d):(e[o]=bc(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}},d(u){u&&dt(t),Ws(e,u)}}}function bc(b){let t,r,e,u,d,o=b[2]+"",i,n;return{c(){t=tt("li"),r=tt("img"),d=_t(),i=dr(o),n=_t(),en(r.src,e=b[1])||me(r,"src",e),me(r,"alt",u=b[2]),me(t,"class","summary-item text-footnote")},m(a,f){lt(a,t,f),Ae(t,r),Ae(t,d),Ae(t,i),Ae(t,n)},p(a,f){f&1&&!en(r.src,e=a[1])&&me(r,"src",e),f&1&&u!==(u=a[2])&&me(r,"alt",u),f&1&&o!==(o=a[2]+"")&&ii(i,o)},d(a){a&&dt(t)}}}function df(b){let t,r=b[0]&&vc(b);return{c(){r&&r.c(),t=zn(),this.c=ut},m(e,u){r&&r.m(e,u),lt(e,t,u)},p(e,[u]){e[0]?r?r.p(e,u):(r=vc(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:ut,o:ut,d(e){r&&r.d(e),e&&dt(t)}}}function hf(b,t,r){let{data:e}=t;return b.$$set=u=>{"data"in u&&r(0,e=u.data)},[e]}class ff extends xr{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";.summary{display:grid;grid-template-columns:repeat(auto-fill, 50%)}.summary-item{display:flex;align-items:center;position:relative;margin-bottom:calc(16px * 1)}.summary-item>img{width:48px;height:48px;margin-right:calc(8px * 1)}@media(min-width: 601px){.summary{grid-template-columns:repeat(auto-fill, 33.333%)}}@media(min-width: 901px){.summary{grid-template-columns:repeat(auto-fill, 100%)}}@media(min-width: 1201px){.summary{display:flex;justify-content:space-between}}</style>',Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},hf,df,Ot,{data:0},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),fr()}}customElements.define("page-summary",ff);function pf(b){let t,r,e;return{c(){t=tt("button"),r=tt("span"),e=dr(b[0]),this.c=ut,me(r,"class","text-button-caption")},m(u,d){lt(u,t,d),Ae(t,r),Ae(r,e)},p(u,[d]){d&1&&ii(e,u[0])},i:ut,o:ut,d(u){u&&dt(t)}}}function mf(b,t,r){let{label:e}=t;return b.$$set=u=>{"label"in u&&r(0,e=u.label)},[e]}class gf extends xr{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";button{all:unset;padding:calc(12px * 1) calc(2rem * 1);border-radius:3px;background-color:var(--color-light-primary);cursor:pointer;box-shadow:0 4px 14px 0 hsla(259.2 100% 66.9% / 0.39);transition-duration:500ms}button:hover{background-color:var(--color-light-primary-hover);box-shadow:0 4px 14px 0 hsla(259.2 100% 66.9% / 0)}span{color:var(--color-light-on-primary)}</style>',Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},mf,pf,Ot,{label:0},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["label"]}get label(){return this.$$.ctx[0]}set label(t){this.$$set({label:t}),fr()}}customElements.define("basic-button",gf);function yf(b){Od(b,"svelte-yi2lb","path.svelte-yi2lb{fill:black}")}function vf(b){let t,r,e,u,d,o,i,n,a,f,p,s,l,c,h,m,g,y,_,x;return{c(){t=mt("svg"),r=mt("rect"),e=mt("mask"),u=mt("path"),d=mt("path"),o=mt("path"),i=mt("path"),n=mt("path"),a=mt("path"),f=mt("path"),p=mt("path"),s=mt("path"),l=mt("path"),c=mt("path"),h=mt("g"),m=mt("rect"),g=mt("defs"),y=mt("linearGradient"),_=mt("stop"),x=mt("stop"),me(r,"width","400"),me(r,"height","100"),me(r,"fill","none"),me(r,"stroke","none"),me(u,"d","M400.003 86.87C374.952 67.1799 353.247 67.7099 328.066 86.87C336.236 93.6477 349.306 98.0389 364.036 98.0389C378.765 98.0389 391.833 93.6477 400.003 86.87Z"),me(u,"class","svelte-yi2lb"),me(d,"d","M400.003 13.1097C374.952 32.7998 353.247 32.2691 328.066 13.1097C336.236 6.33129 349.306 1.94088 364.036 1.94088C378.765 1.94088 391.833 6.33129 400.003 13.1097Z"),me(d,"class","svelte-yi2lb"),me(o,"d","M326.91 85.6625C346.763 60.8171 346.228 39.2917 326.91 14.3172C320.077 22.4195 315.649 35.3808 315.649 49.9895C315.649 64.5982 320.077 77.5596 326.91 85.6625"),me(o,"class","svelte-yi2lb"),me(i,"d","M192.581 85.9245C167.53 66.2344 145.826 66.7651 120.645 85.9245C128.814 92.7023 141.883 97.0935 156.613 97.0935C171.343 97.0935 184.411 92.7023 192.581 85.9245Z"),me(i,"class","svelte-yi2lb"),me(n,"d","M119.488 84.7171C139.341 59.8716 138.806 38.3462 119.488 13.3718C112.654 21.4748 108.227 34.436 108.227 49.0447C108.227 63.6535 112.654 76.6149 119.488 84.7171"),me(n,"class","svelte-yi2lb"),me(a,"d","M193.738 84.7171C173.884 59.8716 174.419 38.3462 193.738 13.3718C200.572 21.4748 204.999 34.436 204.999 49.0447C204.999 63.6535 200.572 76.6149 193.738 84.7171"),me(a,"class","svelte-yi2lb"),me(f,"d","M212.648 50.8133C214.014 82.0918 226.971 96.3809 259.708 97.0935C256.672 69.2185 241.528 52.9688 212.648 50.8133Z"),me(f,"class","svelte-yi2lb"),me(p,"d","M212.648 49.1196C214.014 17.8411 226.971 3.55116 259.708 2.83859C256.672 30.7143 241.528 46.9632 212.648 49.1196"),me(p,"class","svelte-yi2lb"),me(s,"d","M308.476 50.8133C307.108 82.0918 294.151 96.3809 261.416 97.0935C264.452 69.2185 279.594 52.9688 308.476 50.8133Z"),me(s,"class","svelte-yi2lb"),me(l,"d","M308.476 49.1196C307.108 17.8411 294.151 3.55116 261.416 2.83859C264.452 30.7143 279.594 46.9632 308.476 49.1196"),me(l,"class","svelte-yi2lb"),me(c,"d","M50.5395 0.000341475C53.951 32.0019 68.029 47.8135 101.079 50.0002C68.029 52.1868 53.951 67.9983 50.5395 100C47.1285 67.9983 33.0498 52.1868 0 50.0002C33.0498 47.8135 47.1285 32.0019 50.5395 0.000341475Z"),me(c,"class","svelte-yi2lb"),me(e,"id","mask0_23_2"),br(e,"mask-type","alpha"),me(e,"maskUnits","userSpaceOnUse"),me(e,"x","0"),me(e,"y","0"),me(e,"width","401"),me(e,"height","100"),me(m,"width","400"),me(m,"height","100"),me(m,"fill","url(#paint0_linear_23_2)"),me(h,"mask","url(#mask0_23_2)"),me(_,"stop-color","#21D4FD"),me(x,"offset","1"),me(x,"stop-color","#B721FF"),me(y,"id","paint0_linear_23_2"),me(y,"x1","-2.98023e-06"),me(y,"y1","100"),me(y,"x2","400"),me(y,"y2","-1.63913e-05"),me(y,"gradientUnits","userSpaceOnUse"),me(t,"width","100%"),me(t,"height","100%"),me(t,"viewBox","0 0 400 100"),me(t,"fill","white"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(w,j){lt(w,t,j),Ae(t,r),Ae(t,e),Ae(e,u),Ae(e,d),Ae(e,o),Ae(e,i),Ae(e,n),Ae(e,a),Ae(e,f),Ae(e,p),Ae(e,s),Ae(e,l),Ae(e,c),Ae(t,h),Ae(h,m),Ae(t,g),Ae(g,y),Ae(y,_),Ae(y,x)},p:ut,i:ut,o:ut,d(w){w&&dt(t)}}}class Hd extends Rr{constructor(t){super(),Ut(this,t,null,vf,Ot,{},yf)}}const Li=[];function Wd(b,t=ut){let r;const e=new Set;function u(i){if(Ot(b,i)&&(b=i,r)){const n=!Li.length;for(const a of e)a[1](),Li.push(a,b);if(n){for(let a=0;a<Li.length;a+=2)Li[a][0](Li[a+1]);Li.length=0}}}function d(i){u(i(b))}function o(i,n=ut){const a=[i,n];return e.add(a),e.size===1&&(r=t(u)||ut),i(b),()=>{e.delete(a),e.size===0&&(r(),r=null)}}return{set:u,update:d,subscribe:o}}const ul=Wd(0),qd=Wd(0),{window:za}=Vd;function bf(b){let t=!1,r=()=>{t=!1},e,u,d,o,i,n;return _r(b[1]),d=new Hd({}),{c(){u=tt("div"),Kt(d.$$.fragment),this.c=ut,br(u,"--logo-width",Xd+"px"),me(u,"class","logo-container"),zt(u,"is-hidden",b[0]>50)},m(a,f){lt(a,u,f),Xt(d,u,null),o=!0,i||(n=[Nn(za,"scroll",()=>{t=!0,clearTimeout(e),e=setTimeout(r,100),b[1]()}),Nn(u,"click",_c),Nn(u,"keydown",_c)],i=!0)},p(a,[f]){f&1&&!t&&(t=!0,clearTimeout(e),scrollTo(za.pageXOffset,a[0]),e=setTimeout(r,100)),(!o||f&1)&&zt(u,"is-hidden",a[0]>50)},i(a){o||(xt(d.$$.fragment,a),o=!0)},o(a){Mt(d.$$.fragment,a),o=!1},d(a){a&&dt(u),Ht(d),i=!1,ni(n)}}}let Xd=200;function _c(){window.location.href="/"}function _f(b,t,r){let e;function u(){r(0,e=za.pageYOffset)}return qd.update(d=>Xd),[e,u]}class xf extends xr{constructor(t){super(),this.shadowRoot.innerHTML="<style>.logo-container{width:var(--logo-width);height:50px;object-fit:contain;overflow:hidden;position:fixed;top:calc(8px * 1);left:calc(8px * 1);cursor:pointer;transition-duration:300ms;opacity:0;visibility:hidden;z-index:10}.is-hidden{opacity:0 !important;visibility:hidden !important}@media(min-width: 651px){.logo-container{opacity:1;visibility:visible}}</style>",Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},_f,bf,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("header-logo",xf);const wf={title:"Контакты",excerpt:"Свяжитесь с нами для того, чтобы сделать заказ или же получить консультацию высококвалифицированных и увлеченных своим делом специалистов."},Sf={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/contact/contact.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.6,shadowsEnabled:!0},Mf={iconPath:"https://v0ffk4.github.io/tios-static/icons/email.png",label:"mail@t-i-o-s.ru",url:"mailto:mail@t-i-o-s.ru"},Tf={iconPath:"https://v0ffk4.github.io/tios-static/icons/phone.png",label:"+7 (812) 240-90-60",url:"tel:78122409060"},Ef=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/telegram.png",label:"Telegram",url:""},{iconPath:"https://v0ffk4.github.io/tios-static/icons/whatsApp.png",label:"WhatsApp",url:""}],Rs={content:wf,gltf:Sf,email:Mf,phone:Tf,messengers:Ef};function jf(b){let t,r,e,u,d,o,i,n,a,f=Rs.email.label+"",p,s,l,c,h,m,g,y=Rs.phone.label+"",_;return{c(){t=tt("div"),r=tt("div"),e=tt("span"),e.textContent=`© ${b[0]} Техника и оснащение`,u=_t(),d=tt("div"),o=tt("a"),i=tt("img"),a=_t(),p=dr(f),s=_t(),l=tt("div"),c=tt("a"),h=tt("img"),g=_t(),_=dr(y),this.c=ut,me(e,"class","text-footnote"),me(r,"class","copyright"),en(i.src,n="https://v0ffk4.github.io/tios-static/icons/mailFooter.png")||me(i,"src",n),me(i,"alt","иконка почты"),me(o,"class","text-footnote"),me(o,"href",Rs.email.url),me(d,"class","mail"),en(h.src,m="https://v0ffk4.github.io/tios-static/icons/phoneFooter.png")||me(h,"src",m),me(h,"alt","иконка телефона"),me(c,"class","text-footnote"),me(c,"href",Rs.phone.url),me(l,"class","phone"),me(t,"class","footer")},m(x,w){lt(x,t,w),Ae(t,r),Ae(r,e),Ae(t,u),Ae(t,d),Ae(d,o),Ae(o,i),Ae(o,a),Ae(o,p),Ae(t,s),Ae(t,l),Ae(l,c),Ae(c,h),Ae(c,g),Ae(c,_)},p:ut,i:ut,o:ut,d(x){x&&dt(t)}}}function Cf(b){return[new Date().getFullYear()]}class Af extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";.footer{display:none;height:var(--footer-height-desktop);position:fixed;bottom:8px;left:8px;align-items:center;padding-inline:12px;color:var(--color-light-on-background)}img{width:16px;height:16px;margin-right:4px;transition-duration:150ms}a{display:flex;align-items:center;transition-duration:150ms}a:hover{color:var(--color-light-primary)}a:hover>img{filter:invert(42%) sepia(71%) saturate(5034%) hue-rotate(242deg)
			brightness(95%) contrast(96%)}.copyright,.mail{margin-right:2.4rem}@media(min-width: 900px){.footer{display:flex}}@media(min-width: 1201px){.footer{left:50%;transform:translateX(-50%)}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},Cf,jf,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("custom-footer",Af);function Lf(b){let t;return{c(){t=tt("div"),t.innerHTML=`<svg class="predator-counter" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 2000 200" enable-background="new 0 0 2000 200" xml:space="preserve"><path class="predator-counter-active" d="M77.358,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C86.399,125.882,81.879,130.426,77.358,132.435z"></path><path class="predator-counter-active" d="M54.24,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C45.198,126.421,49.718,130.965,54.24,132.974z"></path><path class="predator-counter-active" d="M74.476,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S77.651,153.379,74.476,149.584z"></path><path class="predator-counter-inactive" d="M57.121,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S53.946,153.379,57.121,149.584z"></path><path class="predator-counter-inactive" d="M55.275,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C47.938,148.041,52.625,145.451,55.275,142.279z"></path><path class="predator-counter-inactive" d="M76.323,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C83.659,148.58,78.973,145.99,76.323,142.818z"></path><path class="predator-counter-active" d="M77.358,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C86.399,74.118,81.879,69.574,77.358,67.565z"></path><path class="predator-counter-inactive" d="M54.24,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C45.198,73.579,49.718,69.035,54.24,67.026z"></path><path class="predator-counter-active" d="M74.476,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S77.651,46.621,74.476,50.416z"></path><path class="predator-counter-inactive" d="M57.121,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S53.946,46.621,57.121,50.416z"></path><path class="predator-counter-inactive" d="M55.275,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C47.938,51.959,52.625,54.549,55.275,57.721z"></path><path class="predator-counter-inactive" d="M76.323,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        S78.973,54.01,76.323,57.182z"></path><path class="predator-counter-active" d="M166.825,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C175.867,125.882,171.347,130.426,166.825,132.435z"></path><path class="predator-counter-inactive" d="M143.707,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        S139.186,130.965,143.707,132.974z"></path><path class="predator-counter-inactive" d="M163.944,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S167.118,153.379,163.944,149.584z"></path><path class="predator-counter-active" d="M146.589,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S143.414,153.379,146.589,149.584z"></path><path class="predator-counter-active" d="M144.742,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C137.406,148.041,142.092,145.451,144.742,142.279z"></path><path class="predator-counter-inactive" d="M165.79,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C173.127,148.58,168.44,145.99,165.79,142.818z"></path><path class="predator-counter-active" d="M166.825,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C175.867,74.118,171.347,69.574,166.825,67.565z"></path><path class="predator-counter-inactive" d="M143.707,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        S139.186,69.035,143.707,67.026z"></path><path class="predator-counter-inactive" d="M163.944,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S167.118,46.621,163.944,50.416z"></path><path class="predator-counter-inactive" d="M146.589,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S143.414,46.621,146.589,50.416z"></path><path class="predator-counter-inactive" d="M144.742,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C137.406,51.959,142.092,54.549,144.742,57.721z"></path><path class="predator-counter-inactive" d="M165.79,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        S168.44,54.01,165.79,57.182z"></path><path class="predator-counter-active" d="M256.293,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C265.335,125.882,260.814,130.426,256.293,132.435z"></path><path class="predator-counter-active" d="M233.175,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C224.133,126.421,228.653,130.965,233.175,132.974z"></path><path class="predator-counter-active" d="M253.411,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S256.586,153.379,253.411,149.584z"></path><path class="predator-counter-inactive" d="M236.056,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S232.882,153.379,236.056,149.584z"></path><path class="predator-counter-inactive" d="M234.21,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C226.873,148.041,231.56,145.451,234.21,142.279z"></path><path class="predator-counter-inactive" d="M255.258,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C262.594,148.58,257.908,145.99,255.258,142.818z"></path><path class="predator-counter-inactive" d="M256.293,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C265.335,74.118,260.814,69.574,256.293,67.565z"></path><path class="predator-counter-inactive" d="M233.175,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C224.133,73.579,228.653,69.035,233.175,67.026z"></path><path class="predator-counter-active" d="M253.411,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S256.586,46.621,253.411,50.416z"></path><path class="predator-counter-active" d="M236.056,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S232.882,46.621,236.056,50.416z"></path><path class="predator-counter-inactive" d="M234.21,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C226.873,51.959,231.56,54.549,234.21,57.721z"></path><path class="predator-counter-inactive" d="M255.258,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        S257.908,54.01,255.258,57.182z"></path><path class="predator-counter-inactive" d="M345.76,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C354.802,125.882,350.282,130.426,345.76,132.435z"></path><path class="predator-counter-active" d="M322.642,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C313.601,126.421,318.121,130.965,322.642,132.974z"></path><path class="predator-counter-inactive" d="M342.879,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S346.054,153.379,342.879,149.584z"></path><path class="predator-counter-active" d="M325.524,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S322.349,153.379,325.524,149.584z"></path><path class="predator-counter-inactive" d="M323.677,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C316.341,148.041,321.027,145.451,323.677,142.279z"></path><path class="predator-counter-inactive" d="M344.725,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C352.062,148.58,347.375,145.99,344.725,142.818z"></path><path class="predator-counter-active" d="M345.76,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C354.802,74.118,350.282,69.574,345.76,67.565z"></path><path class="predator-counter-active" d="M322.642,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C313.601,73.579,318.121,69.035,322.642,67.026z"></path><path class="predator-counter-inactive" d="M342.879,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S346.054,46.621,342.879,50.416z"></path><path class="predator-counter-active" d="M325.524,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S322.349,46.621,325.524,50.416z"></path><path class="predator-counter-active" d="M323.677,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C316.341,51.959,321.027,54.549,323.677,57.721z"></path><path class="predator-counter-active" d="M344.725,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        S347.375,54.01,344.725,57.182z"></path><path class="predator-counter-active" d="M477.358,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C486.399,125.882,481.879,130.426,477.358,132.435z"></path><path class="predator-counter-inactive" d="M454.24,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        S449.718,130.965,454.24,132.974z"></path><path class="predator-counter-active" d="M474.476,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S477.651,153.379,474.476,149.584z"></path><path class="predator-counter-active" d="M457.121,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S453.946,153.379,457.121,149.584z"></path><path class="predator-counter-inactive" d="M455.275,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C447.938,148.041,452.625,145.451,455.275,142.279z"></path><path class="predator-counter-inactive" d="M476.323,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C483.659,148.58,478.973,145.99,476.323,142.818z"></path><path class="predator-counter-active" d="M477.358,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C486.399,74.118,481.879,69.574,477.358,67.565z"></path><path class="predator-counter-inactive" d="M454.24,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        S449.718,69.035,454.24,67.026z"></path><path class="predator-counter-active" d="M474.476,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S477.651,46.621,474.476,50.416z"></path><path class="predator-counter-inactive" d="M457.121,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S453.946,46.621,457.121,50.416z"></path><path class="predator-counter-inactive" d="M455.275,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C447.938,51.959,452.625,54.549,455.275,57.721z"></path><path class="predator-counter-inactive" d="M476.323,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        S478.973,54.01,476.323,57.182z"></path><path class="predator-counter-inactive" d="M566.825,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C575.867,125.882,571.347,130.426,566.825,132.435z"></path><path class="predator-counter-inactive" d="M543.707,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C534.665,126.421,539.186,130.965,543.707,132.974z"></path><path class="predator-counter-inactive" d="M563.944,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S567.118,153.379,563.944,149.584z"></path><path class="predator-counter-inactive" d="M546.589,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S543.414,153.379,546.589,149.584z"></path><path class="predator-counter-active" d="M544.742,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C537.406,148.041,542.092,145.451,544.742,142.279z"></path><path class="predator-counter-inactive" d="M565.79,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C573.127,148.58,568.44,145.99,565.79,142.818z"></path><path class="predator-counter-active" d="M566.825,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C575.867,74.118,571.347,69.574,566.825,67.565z"></path><path class="predator-counter-inactive" d="M543.707,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C534.665,73.579,539.186,69.035,543.707,67.026z"></path><path class="predator-counter-active" d="M563.944,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S567.118,46.621,563.944,50.416z"></path><path class="predator-counter-inactive" d="M546.589,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S543.414,46.621,546.589,50.416z"></path><path class="predator-counter-inactive" d="M544.742,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C537.406,51.959,542.092,54.549,544.742,57.721z"></path><path class="predator-counter-active" d="M565.79,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        C573.127,51.42,568.44,54.01,565.79,57.182z"></path><path class="predator-counter-active" d="M656.293,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C665.335,125.882,660.814,130.426,656.293,132.435z"></path><path class="predator-counter-inactive" d="M633.175,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C624.133,126.421,628.653,130.965,633.175,132.974z"></path><path class="predator-counter-active" d="M653.411,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S656.586,153.379,653.411,149.584z"></path><path class="predator-counter-inactive" d="M636.056,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S632.882,153.379,636.056,149.584z"></path><path class="predator-counter-inactive" d="M634.21,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C626.873,148.041,631.56,145.451,634.21,142.279z"></path><path class="predator-counter-inactive" d="M655.258,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C662.594,148.58,657.908,145.99,655.258,142.818z"></path><path class="predator-counter-active" d="M656.293,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C665.335,74.118,660.814,69.574,656.293,67.565z"></path><path class="predator-counter-inactive" d="M633.175,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C624.133,73.579,628.653,69.035,633.175,67.026z"></path><path class="predator-counter-active" d="M653.411,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S656.586,46.621,653.411,50.416z"></path><path class="predator-counter-active" d="M636.056,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S632.882,46.621,636.056,50.416z"></path><path class="predator-counter-inactive" d="M634.21,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C626.873,51.959,631.56,54.549,634.21,57.721z"></path><path class="predator-counter-inactive" d="M655.258,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        C662.594,51.42,657.908,54.01,655.258,57.182z"></path><path class="predator-counter-inactive" d="M745.76,132.435c-3.154-14.509,1.51-23.451,14.718-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C754.802,125.882,750.282,130.426,745.76,132.435z"></path><path class="predator-counter-active" d="M722.642,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C713.601,126.421,718.121,130.965,722.642,132.974z"></path><path class="predator-counter-inactive" d="M742.879,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S746.054,153.379,742.879,149.584z"></path><path class="predator-counter-inactive" d="M725.524,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S722.349,153.379,725.524,149.584z"></path><path class="predator-counter-inactive" d="M723.677,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C716.341,148.041,721.027,145.451,723.677,142.279z"></path><path class="predator-counter-inactive" d="M744.725,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C752.062,148.58,747.375,145.99,744.725,142.818z"></path><path class="predator-counter-active" d="M745.76,67.565c-3.154,14.509,1.51,23.451,14.718,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C754.802,74.118,750.282,69.574,745.76,67.565z"></path><path class="predator-counter-active" d="M722.642,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C713.601,73.579,718.121,69.035,722.642,67.026z"></path><path class="predator-counter-inactive" d="M742.879,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S746.054,46.621,742.879,50.416z"></path><path class="predator-counter-active" d="M725.524,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S722.349,46.621,725.524,50.416z"></path><path class="predator-counter-inactive" d="M723.677,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C716.341,51.959,721.027,54.549,723.677,57.721z"></path><path class="predator-counter-active" d="M744.725,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        C752.062,51.42,747.375,54.01,744.725,57.182z"></path><path class="predator-counter-active" d="M877.358,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C886.399,125.882,881.879,130.426,877.358,132.435z"></path><path class="predator-counter-inactive" d="M854.24,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C845.198,126.421,849.718,130.965,854.24,132.974z"></path><path class="predator-counter-active" d="M874.476,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S877.651,153.379,874.476,149.584z"></path><path class="predator-counter-inactive" d="M857.121,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S853.946,153.379,857.121,149.584z"></path><path class="predator-counter-inactive" d="M855.275,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C847.938,148.041,852.625,145.451,855.275,142.279z"></path><path class="predator-counter-inactive" d="M876.323,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C883.659,148.58,878.973,145.99,876.323,142.818z"></path><path class="predator-counter-active" d="M877.358,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C886.399,74.118,881.879,69.574,877.358,67.565z"></path><path class="predator-counter-inactive" d="M854.24,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C845.198,73.579,849.718,69.035,854.24,67.026z"></path><path class="predator-counter-active" d="M874.476,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S877.651,46.621,874.476,50.416z"></path><path class="predator-counter-active" d="M857.121,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S853.946,46.621,857.121,50.416z"></path><path class="predator-counter-active" d="M855.275,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C847.938,51.959,852.625,54.549,855.275,57.721z"></path><path class="predator-counter-inactive" d="M876.323,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        C883.659,51.42,878.973,54.01,876.323,57.182z"></path><path class="predator-counter-inactive" d="M966.825,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C975.867,125.882,971.347,130.426,966.825,132.435z"></path><path class="predator-counter-active" d="M943.707,132.974c3.154-14.509-1.51-23.451-14.718-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C934.665,126.421,939.186,130.965,943.707,132.974z"></path><path class="predator-counter-inactive" d="M963.944,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S967.118,153.379,963.944,149.584z"></path><path class="predator-counter-active" d="M946.589,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S943.414,153.379,946.589,149.584z"></path><path class="predator-counter-inactive" d="M944.742,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C937.406,148.041,942.092,145.451,944.742,142.279z"></path><path class="predator-counter-inactive" d="M965.79,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.512,1.826
        C973.127,148.58,968.44,145.99,965.79,142.818z"></path><path class="predator-counter-active" d="M966.825,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C975.867,74.118,971.347,69.574,966.825,67.565z"></path><path class="predator-counter-inactive" d="M943.707,67.026c3.154,14.509-1.51,23.451-14.718,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C934.665,73.579,939.186,69.035,943.707,67.026z"></path><path class="predator-counter-active" d="M963.944,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S967.118,46.621,963.944,50.416z"></path><path class="predator-counter-inactive" d="M946.589,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S943.414,46.621,946.589,50.416z"></path><path class="predator-counter-inactive" d="M944.742,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C937.406,51.959,942.092,54.549,944.742,57.721z"></path><path class="predator-counter-active" d="M965.79,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.512-1.826
        C973.127,51.42,968.44,54.01,965.79,57.182z"></path><path class="predator-counter-inactive" d="M1056.293,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1065.335,125.882,1060.814,130.426,1056.293,132.435z"></path><path class="predator-counter-active" d="M1033.175,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1024.133,126.421,1028.653,130.965,1033.175,132.974z"></path><path class="predator-counter-active" d="M1053.411,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1056.586,153.379,1053.411,149.584z"></path><path class="predator-counter-inactive" d="M1036.056,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1032.882,153.379,1036.056,149.584z"></path><path class="predator-counter-inactive" d="M1034.21,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.512,1.826
        C1026.874,148.041,1031.56,145.451,1034.21,142.279z"></path><path class="predator-counter-inactive" d="M1055.258,142.818c10.933-5.858,19.186-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1062.594,148.58,1057.908,145.99,1055.258,142.818z"></path><path class="predator-counter-active" d="M1056.293,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1065.335,74.118,1060.814,69.574,1056.293,67.565z"></path><path class="predator-counter-inactive" d="M1033.175,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1024.133,73.579,1028.653,69.035,1033.175,67.026z"></path><path class="predator-counter-active" d="M1053.411,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1056.586,46.621,1053.411,50.416z"></path><path class="predator-counter-inactive" d="M1036.056,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1032.882,46.621,1036.056,50.416z"></path><path class="predator-counter-inactive" d="M1034.21,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.512-1.826
        C1026.874,51.959,1031.56,54.549,1034.21,57.721z"></path><path class="predator-counter-active" d="M1055.258,57.182c10.933,5.858,19.186,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1062.594,51.42,1057.908,54.01,1055.258,57.182z"></path><path class="predator-counter-active" d="M1145.76,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1154.802,125.882,1150.282,130.426,1145.76,132.435z"></path><path class="predator-counter-active" d="M1122.642,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        S1118.121,130.965,1122.642,132.974z"></path><path class="predator-counter-active" d="M1142.879,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1146.054,153.379,1142.879,149.584z"></path><path class="predator-counter-active" d="M1125.524,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1122.349,153.379,1125.524,149.584z"></path><path class="predator-counter-inactive" d="M1123.677,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1116.341,148.041,1121.027,145.451,1123.677,142.279z"></path><path class="predator-counter-inactive" d="M1144.725,142.818c10.933-5.858,19.186-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1152.062,148.58,1147.375,145.99,1144.725,142.818z"></path><path class="predator-counter-inactive" d="M1145.76,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1154.802,74.118,1150.282,69.574,1145.76,67.565z"></path><path class="predator-counter-active" d="M1122.642,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        S1118.121,69.035,1122.642,67.026z"></path><path class="predator-counter-inactive" d="M1142.879,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1146.054,46.621,1142.879,50.416z"></path><path class="predator-counter-active" d="M1125.524,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1122.349,46.621,1125.524,50.416z"></path><path class="predator-counter-inactive" d="M1123.677,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1116.341,51.959,1121.027,54.549,1123.677,57.721z"></path><path class="predator-counter-active" d="M1144.725,57.182c10.933,5.858,19.186,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1152.062,51.42,1147.375,54.01,1144.725,57.182z"></path><path class="predator-counter-active" d="M1277.358,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1286.399,125.882,1281.879,130.426,1277.358,132.435z"></path><path class="predator-counter-inactive" d="M1254.24,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1245.198,126.421,1249.718,130.965,1254.24,132.974z"></path><path class="predator-counter-active" d="M1274.476,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1277.651,153.379,1274.476,149.584z"></path><path class="predator-counter-inactive" d="M1257.121,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1253.946,153.379,1257.121,149.584z"></path><path class="predator-counter-active" d="M1255.275,142.279c-10.933-5.858-19.186-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1247.938,148.041,1252.625,145.451,1255.275,142.279z"></path><path class="predator-counter-inactive" d="M1276.323,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1283.659,148.58,1278.973,145.99,1276.323,142.818z"></path><path class="predator-counter-active" d="M1277.358,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1286.399,74.118,1281.879,69.574,1277.358,67.565z"></path><path class="predator-counter-active" d="M1254.24,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1245.198,73.579,1249.718,69.035,1254.24,67.026z"></path><path class="predator-counter-inactive" d="M1274.476,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1277.651,46.621,1274.476,50.416z"></path><path class="predator-counter-active" d="M1257.121,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1253.946,46.621,1257.121,50.416z"></path><path class="predator-counter-active" d="M1255.275,57.721c-10.933,5.858-19.186,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1247.938,51.959,1252.625,54.549,1255.275,57.721z"></path><path class="predator-counter-inactive" d="M1276.323,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1283.659,51.42,1278.973,54.01,1276.323,57.182z"></path><path class="predator-counter-inactive" d="M1366.825,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1375.867,125.882,1371.347,130.426,1366.825,132.435z"></path><path class="predator-counter-active" d="M1343.707,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1334.665,126.421,1339.186,130.965,1343.707,132.974z"></path><path class="predator-counter-active" d="M1363.944,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1367.118,153.379,1363.944,149.584z"></path><path class="predator-counter-inactive" d="M1346.589,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1343.414,153.379,1346.589,149.584z"></path><path class="predator-counter-inactive" d="M1344.742,142.279c-10.933-5.858-19.186-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1337.406,148.041,1342.092,145.451,1344.742,142.279z"></path><path class="predator-counter-inactive" d="M1365.79,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1373.126,148.58,1368.44,145.99,1365.79,142.818z"></path><path class="predator-counter-active" d="M1366.825,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1375.867,74.118,1371.347,69.574,1366.825,67.565z"></path><path class="predator-counter-inactive" d="M1343.707,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1334.665,73.579,1339.186,69.035,1343.707,67.026z"></path><path class="predator-counter-inactive" d="M1363.944,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1367.118,46.621,1363.944,50.416z"></path><path class="predator-counter-active" d="M1346.589,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1343.414,46.621,1346.589,50.416z"></path><path class="predator-counter-inactive" d="M1344.742,57.721c-10.933,5.858-19.186,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1337.406,51.959,1342.092,54.549,1344.742,57.721z"></path><path class="predator-counter-active" d="M1365.79,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1373.126,51.42,1368.44,54.01,1365.79,57.182z"></path><path class="predator-counter-inactive" d="M1456.293,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1465.335,125.882,1460.814,130.426,1456.293,132.435z"></path><path class="predator-counter-active" d="M1433.175,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1424.133,126.421,1428.653,130.965,1433.175,132.974z"></path><path class="predator-counter-inactive" d="M1453.411,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1456.586,153.379,1453.411,149.584z"></path><path class="predator-counter-inactive" d="M1436.056,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1432.882,153.379,1436.056,149.584z"></path><path class="predator-counter-inactive" d="M1434.21,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1426.874,148.041,1431.56,145.451,1434.21,142.279z"></path><path class="predator-counter-active" d="M1455.258,142.818c10.933-5.858,19.186-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1462.594,148.58,1457.908,145.99,1455.258,142.818z"></path><path class="predator-counter-inactive" d="M1456.293,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1465.335,74.118,1460.814,69.574,1456.293,67.565z"></path><path class="predator-counter-active" d="M1433.175,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1424.133,73.579,1428.653,69.035,1433.175,67.026z"></path><path class="predator-counter-inactive" d="M1453.411,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1456.586,46.621,1453.411,50.416z"></path><path class="predator-counter-active" d="M1436.056,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1432.882,46.621,1436.056,50.416z"></path><path class="predator-counter-active" d="M1434.21,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1426.874,51.959,1431.56,54.549,1434.21,57.721z"></path><path class="predator-counter-inactive" d="M1455.258,57.182c10.933,5.858,19.186,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1462.594,51.42,1457.908,54.01,1455.258,57.182z"></path><path class="predator-counter-active" d="M1545.76,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1554.802,125.882,1550.282,130.426,1545.76,132.435z"></path><path class="predator-counter-inactive" d="M1522.642,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        S1518.121,130.965,1522.642,132.974z"></path><path class="predator-counter-inactive" d="M1542.879,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1546.054,153.379,1542.879,149.584z"></path><path class="predator-counter-active" d="M1525.524,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1522.349,153.379,1525.524,149.584z"></path><path class="predator-counter-active" d="M1523.677,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1516.341,148.041,1521.027,145.451,1523.677,142.279z"></path><path class="predator-counter-inactive" d="M1544.725,142.818c10.933-5.858,19.186-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1552.062,148.58,1547.375,145.99,1544.725,142.818z"></path><path class="predator-counter-active" d="M1545.76,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1554.802,74.118,1550.282,69.574,1545.76,67.565z"></path><path class="predator-counter-active" d="M1522.642,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        S1518.121,69.035,1522.642,67.026z"></path><path class="predator-counter-inactive" d="M1542.879,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1546.054,46.621,1542.879,50.416z"></path><path class="predator-counter-active" d="M1525.524,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1522.349,46.621,1525.524,50.416z"></path><path class="predator-counter-inactive" d="M1523.677,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1516.341,51.959,1521.027,54.549,1523.677,57.721z"></path><path class="predator-counter-active" d="M1544.725,57.182c10.933,5.858,19.186,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1552.062,51.42,1547.375,54.01,1544.725,57.182z"></path><path class="predator-counter-active" d="M1677.358,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1686.399,125.882,1681.879,130.426,1677.358,132.435z"></path><path class="predator-counter-inactive" d="M1654.24,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1645.198,126.421,1649.718,130.965,1654.24,132.974z"></path><path class="predator-counter-inactive" d="M1674.476,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1677.651,153.379,1674.476,149.584z"></path><path class="predator-counter-inactive" d="M1657.121,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1653.946,153.379,1657.121,149.584z"></path><path class="predator-counter-active" d="M1655.275,142.279c-10.933-5.858-19.186-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1647.938,148.041,1652.625,145.451,1655.275,142.279z"></path><path class="predator-counter-active" d="M1676.323,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1683.659,148.58,1678.973,145.99,1676.323,142.818z"></path><path class="predator-counter-active" d="M1677.358,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1686.399,74.118,1681.879,69.574,1677.358,67.565z"></path><path class="predator-counter-active" d="M1654.24,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1645.198,73.579,1649.718,69.035,1654.24,67.026z"></path><path class="predator-counter-inactive" d="M1674.476,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1677.651,46.621,1674.476,50.416z"></path><path class="predator-counter-active" d="M1657.121,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1653.946,46.621,1657.121,50.416z"></path><path class="predator-counter-inactive" d="M1655.275,57.721c-10.933,5.858-19.186,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1647.938,51.959,1652.625,54.549,1655.275,57.721z"></path><path class="predator-counter-active" d="M1676.323,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1683.659,51.42,1678.973,54.01,1676.323,57.182z"></path><path class="predator-counter-active" d="M1766.825,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1775.867,125.882,1771.347,130.426,1766.825,132.435z"></path><path class="predator-counter-active" d="M1743.707,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1734.665,126.421,1739.186,130.965,1743.707,132.974z"></path><path class="predator-counter-inactive" d="M1763.944,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1767.118,153.379,1763.944,149.584z"></path><path class="predator-counter-active" d="M1746.589,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1743.414,153.379,1746.589,149.584z"></path><path class="predator-counter-inactive" d="M1744.742,142.279c-10.933-5.858-19.186-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1737.406,148.041,1742.092,145.451,1744.742,142.279z"></path><path class="predator-counter-inactive" d="M1765.79,142.818c10.933-5.858,19.185-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1773.126,148.58,1768.44,145.99,1765.79,142.818z"></path><path class="predator-counter-inactive" d="M1766.825,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1775.867,74.118,1771.347,69.574,1766.825,67.565z"></path><path class="predator-counter-inactive" d="M1743.707,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1734.665,73.579,1739.186,69.035,1743.707,67.026z"></path><path class="predator-counter-active" d="M1763.944,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1767.118,46.621,1763.944,50.416z"></path><path class="predator-counter-active" d="M1746.589,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1743.414,46.621,1746.589,50.416z"></path><path class="predator-counter-inactive" d="M1744.742,57.721c-10.933,5.858-19.186,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1737.406,51.959,1742.092,54.549,1744.742,57.721z"></path><path class="predator-counter-inactive" d="M1765.79,57.182c10.933,5.858,19.185,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1773.126,51.42,1768.44,54.01,1765.79,57.182z"></path><path class="predator-counter-inactive" d="M1856.293,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1865.335,125.882,1860.814,130.426,1856.293,132.435z"></path><path class="predator-counter-active" d="M1833.175,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        C1824.133,126.421,1828.653,130.965,1833.175,132.974z"></path><path class="predator-counter-inactive" d="M1853.411,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1856.586,153.379,1853.411,149.584z"></path><path class="predator-counter-inactive" d="M1836.056,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1832.882,153.379,1836.056,149.584z"></path><path class="predator-counter-inactive" d="M1834.21,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1826.874,148.041,1831.56,145.451,1834.21,142.279z"></path><path class="predator-counter-active" d="M1855.258,142.818c10.933-5.858,19.186-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1862.594,148.58,1857.908,145.99,1855.258,142.818z"></path><path class="predator-counter-active" d="M1856.293,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1865.335,74.118,1860.814,69.574,1856.293,67.565z"></path><path class="predator-counter-active" d="M1833.175,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        C1824.133,73.579,1828.653,69.035,1833.175,67.026z"></path><path class="predator-counter-inactive" d="M1853.411,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1856.586,46.621,1853.411,50.416z"></path><path class="predator-counter-active" d="M1836.056,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1832.882,46.621,1836.056,50.416z"></path><path class="predator-counter-inactive" d="M1834.21,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1826.874,51.959,1831.56,54.549,1834.21,57.721z"></path><path class="predator-counter-inactive" d="M1855.258,57.182c10.933,5.858,19.186,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1862.594,51.42,1857.908,54.01,1855.258,57.182z"></path><path class="predator-counter-inactive" d="M1945.76,132.435c-3.154-14.509,1.51-23.451,14.719-29.999c1.178,4.805,0.351,11.161-2.663,17.304
        C1954.802,125.882,1950.282,130.426,1945.76,132.435z"></path><path class="predator-counter-active" d="M1922.642,132.974c3.154-14.509-1.51-23.451-14.719-29.999c-1.178,4.805-0.351,11.161,2.663,17.304
        S1918.121,130.965,1922.642,132.974z"></path><path class="predator-counter-inactive" d="M1942.879,149.584c-9.222,11.637-8.974,21.718,0,33.416c3.175-3.795,5.231-9.866,5.231-16.708
        S1946.054,153.379,1942.879,149.584z"></path><path class="predator-counter-active" d="M1925.524,149.584c9.222,11.637,8.974,21.718,0,33.416c-3.175-3.795-5.231-9.866-5.231-16.708
        S1922.349,153.379,1925.524,149.584z"></path><path class="predator-counter-active" d="M1923.677,142.279c-10.933-5.858-19.185-4.16-27.473,4.95c3.59,2.048,8.886,2.839,14.511,1.826
        C1916.341,148.041,1921.027,145.451,1923.677,142.279z"></path><path class="predator-counter-inactive" d="M1944.725,142.818c10.933-5.858,19.186-4.16,27.473,4.95c-3.59,2.048-8.886,2.839-14.511,1.826
        C1952.062,148.58,1947.375,145.99,1944.725,142.818z"></path><path class="predator-counter-active" d="M1945.76,67.565c-3.154,14.509,1.51,23.451,14.719,29.999c1.178-4.805,0.351-11.161-2.663-17.304
        C1954.802,74.118,1950.282,69.574,1945.76,67.565z"></path><path class="predator-counter-inactive" d="M1922.642,67.026c3.154,14.509-1.51,23.451-14.719,29.999c-1.178-4.805-0.351-11.161,2.663-17.304
        S1918.121,69.035,1922.642,67.026z"></path><path class="predator-counter-active" d="M1942.879,50.416c-9.222-11.637-8.974-21.718,0-33.416c3.175,3.795,5.231,9.866,5.231,16.708
        S1946.054,46.621,1942.879,50.416z"></path><path class="predator-counter-inactive" d="M1925.524,50.416c9.222-11.637,8.974-21.718,0-33.416c-3.175,3.795-5.231,9.866-5.231,16.708
        S1922.349,46.621,1925.524,50.416z"></path><path class="predator-counter-active" d="M1923.677,57.721c-10.933,5.858-19.185,4.16-27.473-4.95c3.59-2.048,8.886-2.839,14.511-1.826
        C1916.341,51.959,1921.027,54.549,1923.677,57.721z"></path><path class="predator-counter-active" d="M1944.725,57.182c10.933,5.858,19.186,4.16,27.473-4.95c-3.59-2.048-8.886-2.839-14.511-1.826
        C1952.062,51.42,1947.375,54.01,1944.725,57.182z"></path><path class="predator-counter-active" d="M2291.039-63.657c7.661,0,7.674-11.906,0-11.906C2283.377-75.563,2283.365-63.657,2291.039-63.657
        L2291.039-63.657z"></path></svg>`,this.c=ut,me(t,"class","predator-counter-box")},m(r,e){lt(r,t,e)},p:ut,i:ut,o:ut,d(r){r&&dt(t)}}}class Rf extends xr{constructor(t){super(),this.shadowRoot.innerHTML="<style>.predator-counter-box{width:400px;height:200px;overflow:hidden;position:relative}.predator-counter{width:2000px;height:200px;display:block;animation:walk 3s steps(5, end) infinite}.predator-counter-active{fill:var(--color-light-tertiary)}.predator-counter-inactive{fill:var(--color-light-secondary);opacity:0.05}@keyframes walk{to{transform:translateX(-2000px)}}</style>",Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},null,Lf,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("gltf-preloader",Rf);function xc(b){return b<.5?4*b*b*b:.5*Math.pow(2*b-2,3)+1}function Gr(b,{delay:t=0,duration:r=400,easing:e=tl}={}){const u=+getComputedStyle(b).opacity;return{delay:t,duration:r,easing:e,css:d=>`opacity: ${d*u}`}}function Pf(b){let t,r,e;return{c(){t=tt("main-nav-desktop")},m(u,d){lt(u,t,d),e=!0},p(u,d){},i(u){e||(_r(()=>{r||(r=zr(t,Gr,{duration:Fo},!0)),r.run(1)}),e=!0)},o(u){r||(r=zr(t,Gr,{duration:Fo},!1)),r.run(0),e=!1},d(u){u&&dt(t),u&&r&&r.end()}}}function Df(b){let t,r,e;return{c(){t=tt("main-nav-mobile")},m(u,d){lt(u,t,d),e=!0},p(u,d){},i(u){e||(_r(()=>{r||(r=zr(t,Gr,{duration:Fo},!0)),r.run(1)}),e=!0)},o(u){r||(r=zr(t,Gr,{duration:Fo},!1)),r.run(0),e=!1},d(u){u&&dt(t),u&&r&&r.end()}}}function kf(b){let t,r,e,u;const d=[Df,Pf],o=[];function i(n,a){return n[0]<1200?0:n[0]>1200?1:-1}return~(t=i(b))&&(r=o[t]=d[t](b)),{c(){r&&r.c(),e=zn(),this.c=ut},m(n,a){~t&&o[t].m(n,a),lt(n,e,a),u=!0},p(n,[a]){let f=t;t=i(n),t===f?~t&&o[t].p(n,a):(r&&(Fn(),Mt(o[f],1,1,()=>{o[f]=null}),Bn()),~t?(r=o[t],r?r.p(n,a):(r=o[t]=d[t](n),r.c()),xt(r,1),r.m(e.parentNode,e)):r=null)},i(n){u||(xt(r),u=!0)},o(n){Mt(r),u=!1},d(n){~t&&o[t].d(n),n&&dt(e)}}}let Fo=150;function If(b,t,r){let e;return window.addEventListener("resize",()=>{r(0,e=window.innerWidth)}),si(()=>{r(0,e=window.innerWidth)}),[e]}class Of extends xr{constructor(t){super(),Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},If,kf,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("main-nav",Of);function Nf(b){let t,r,e,u,d;return{c(){t=mt("svg"),r=mt("style"),e=dr(`.nav-svg-stroke {
			fill: none;
			stroke: var(--color-light-on-primary);
			stroke-width: 1;
		}
	`),u=mt("rect"),d=mt("path"),me(u,"width","28"),me(u,"height","28"),me(u,"fill","none"),me(u,"stroke","none"),me(d,"class","nav-svg-stroke"),me(d,"d","M11 20.5L17.4785 25.1275C17.8177 25.3698 18.2241 25.5 18.6409 25.5H23.5C24.6046 25.5 25.5 24.6046 25.5 23.5V10.2124C25.5 9.46723 25.0858 8.78388 24.4251 8.4392L14.9251 3.48268C14.3455 3.18024 13.6545 3.18024 13.0749 3.48268L3.57487 8.4392C2.91424 8.78388 2.5 9.46723 2.5 10.2124V23.5C2.5 24.6046 3.39543 25.5 4.5 25.5H10"),me(t,"width","28"),me(t,"height","28"),me(t,"viewBox","0 0 28 28"),me(t,"fill","none"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(o,i){lt(o,t,i),Ae(t,r),Ae(r,e),Ae(t,u),Ae(t,d)},p:ut,i:ut,o:ut,d(o){o&&dt(t)}}}class Uf extends Rr{constructor(t){super(),Ut(this,t,null,Nf,Ot,{})}}function Ff(b){let t,r,e,u,d,o,i,n,a,f;return{c(){t=mt("svg"),r=mt("rect"),e=mt("style"),u=dr(`.nav-svg-stroke {
			fill: none;
			stroke: var(--color-light-on-primary);
			stroke-width: 1px;
		}

		.nav-svg-fill {
			stroke: none;
			fill: var(--color-light-on-primary);
		}
	`),d=mt("path"),o=mt("path"),i=mt("path"),n=mt("rect"),a=mt("rect"),f=mt("path"),me(r,"width","28"),me(r,"height","28"),me(r,"fill","none"),me(r,"stroke","none"),me(d,"class","nav-svg-stroke"),br(d,"stroke",b[0]),me(d,"d","M8.5 14.5H7.5C6.39543 14.5 5.5 13.6046 5.5 12.5V12C5.5 11.1716 4.82843 10.5 4 10.5V10.5C3.17157 10.5 2.5 11.1716 2.5 12V25C2.5 25.8284 3.17157 26.5 4 26.5V26.5C4.82843 26.5 5.5 25.8284 5.5 25V24.5C5.5 23.3954 6.39543 22.5 7.5 22.5H8.5"),me(o,"class","nav-svg-stroke"),br(o,"stroke",b[0]),me(o,"d","M20.5 22.5L21.5 22.5C22.6046 22.5 23.5 23.3954 23.5 24.5L23.5 25C23.5 25.8284 24.1716 26.5 25 26.5V26.5C25.8284 26.5 26.5 25.8284 26.5 25L26.5 12C26.5 11.1716 25.8284 10.5 25 10.5V10.5C24.1716 10.5 23.5 11.1716 23.5 12L23.5 12.5C23.5 13.6046 22.6046 14.5 21.5 14.5L20.5 14.5"),me(i,"class","nav-svg-stroke"),br(i,"stroke",b[0]),me(i,"d","M12.5 10.5V11.5C12.5 12.6046 11.6046 13.5 10.5 13.5V13.5C9.39543 13.5 8.5 14.3954 8.5 15.5V21.5C8.5 22.6046 9.396 23.5 10.5006 23.5C13.3995 23.5 15.6005 23.5 18.4994 23.5C19.604 23.5 20.5 22.6046 20.5 21.5V15.5C20.5 14.3954 19.6046 13.5 18.5 13.5V13.5C17.3954 13.5 16.5 12.6046 16.5 11.5V10.5"),me(n,"class","nav-svg-stroke"),br(n,"stroke",b[0]),me(n,"x","11.5"),me(n,"y","5.5"),me(n,"width","6"),me(n,"height","5"),me(n,"rx","1.5"),me(a,"class","nav-svg-fill"),br(a,"fill",b[0]),me(a,"x","8"),me(a,"y","1"),me(a,"width","13"),me(a,"height","1"),me(f,"class","nav-svg-stroke"),br(f,"stroke",b[0]),me(f,"d","M12.5 5.5V3.5H16.5V5.5"),me(t,"width","28"),me(t,"height","28"),me(t,"viewBox","0 0 28 28"),me(t,"fill","none"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(p,s){lt(p,t,s),Ae(t,r),Ae(t,e),Ae(e,u),Ae(t,d),Ae(t,o),Ae(t,i),Ae(t,n),Ae(t,a),Ae(t,f)},p(p,[s]){s&1&&br(d,"stroke",p[0]),s&1&&br(o,"stroke",p[0]),s&1&&br(i,"stroke",p[0]),s&1&&br(n,"stroke",p[0]),s&1&&br(a,"fill",p[0]),s&1&&br(f,"stroke",p[0])},i:ut,o:ut,d(p){p&&dt(t)}}}function Bf(b,t,r){let{color:e="var(--color-light-on-primary)"}=t;return b.$$set=u=>{"color"in u&&r(0,e=u.color)},[e]}class dl extends Rr{constructor(t){super(),Ut(this,t,Bf,Ff,Ot,{color:0})}}function zf(b){let t,r,e,u,d,o,i;return{c(){t=mt("svg"),r=mt("style"),e=dr(`.nav-svg-stroke {
			fill: none;
			stroke: var(--color-light-on-primary);
			stroke-width: 1;
		}
	`),u=mt("rect"),d=mt("rect"),o=mt("rect"),i=mt("rect"),me(u,"width","28"),me(u,"height","28"),me(u,"fill","none"),me(u,"stroke","none"),me(d,"class","nav-svg-stroke"),me(d,"x","8.5"),me(d,"y","2.5"),me(d,"width","11"),me(d,"height","10"),me(d,"rx","1.5"),me(o,"class","nav-svg-stroke"),me(o,"x","2.5"),me(o,"y","15.5"),me(o,"width","10"),me(o,"height","10"),me(o,"rx","1.5"),me(i,"class","nav-svg-stroke"),me(i,"x","15.5"),me(i,"y","15.5"),me(i,"width","10"),me(i,"height","10"),me(i,"rx","1.5"),me(t,"width","28"),me(t,"height","28"),me(t,"viewBox","0 0 28 28"),me(t,"fill","none"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(n,a){lt(n,t,a),Ae(t,r),Ae(r,e),Ae(t,u),Ae(t,d),Ae(t,o),Ae(t,i)},p:ut,i:ut,o:ut,d(n){n&&dt(t)}}}class hl extends Rr{constructor(t){super(),Ut(this,t,null,zf,Ot,{})}}function Gf(b){let t,r,e,u,d,o;return{c(){t=mt("svg"),r=mt("style"),e=dr(`.nav-svg-stroke {
			fill: none;
			stroke: var(--color-light-on-primary);
			stroke-width: 1;
		}
	`),u=mt("rect"),d=mt("path"),o=mt("path"),me(u,"width","28"),me(u,"height","28"),me(u,"fill","none"),me(u,"stroke","none"),me(d,"class","nav-svg-stroke"),me(d,"d","M13.5985 3.37818L3.69751 24.0052C3.29252 24.8489 4.16489 25.7369 5.01569 25.347L14.0833 21.191C14.3479 21.0697 14.6521 21.0697 14.9167 21.191L23.9843 25.347C24.8351 25.7369 25.7075 24.8489 25.3025 24.0052L15.4015 3.37817C15.0385 2.62181 13.9615 2.62182 13.5985 3.37818Z"),me(o,"d","M14.5 3V21.5"),me(t,"width","28"),me(t,"height","28"),me(t,"viewBox","0 0 28 28"),me(t,"fill","none"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(i,n){lt(i,t,n),Ae(t,r),Ae(r,e),Ae(t,u),Ae(t,d),Ae(t,o)},p:ut,i:ut,o:ut,d(i){i&&dt(t)}}}class Yd extends Rr{constructor(t){super(),Ut(this,t,null,Gf,Ot,{})}}function Vf(b){let t,r,e,u,d,o,i,n,a,f,p,s,l,c,h,m,g,y,_,x,w,j;return e=new Uf({}),n=new dl({}),l=new hl({}),y=new Yd({}),{c(){t=tt("nav"),r=tt("a"),Kt(e.$$.fragment),u=_t(),d=tt("span"),d.textContent="Главная",o=_t(),i=tt("a"),Kt(n.$$.fragment),a=_t(),f=tt("span"),f.textContent="Техника",p=_t(),s=tt("a"),Kt(l.$$.fragment),c=_t(),h=tt("span"),h.textContent="Оснащение",m=_t(),g=tt("a"),Kt(y.$$.fragment),_=_t(),x=tt("span"),x.textContent="Контакты",this.c=ut,me(d,"class","text-button"),me(r,"href","/"),zt(r,"is-active",window.location.pathname==="/"),me(f,"class","text-button"),me(i,"href","/gear/"),zt(i,"is-active",window.location.pathname==="/gear/"),me(h,"class","text-button"),me(s,"href","/rigging/"),zt(s,"is-active",window.location.pathname==="/rigging/"),me(x,"class","text-button"),me(g,"href","/contact/"),zt(g,"is-active",window.location.pathname==="/contact/"),_r(()=>b[1].call(t))},m(E,T){lt(E,t,T),Ae(t,r),Xt(e,r,null),Ae(r,u),Ae(r,d),Ae(t,o),Ae(t,i),Xt(n,i,null),Ae(i,a),Ae(i,f),Ae(t,p),Ae(t,s),Xt(l,s,null),Ae(s,c),Ae(s,h),Ae(t,m),Ae(t,g),Xt(y,g,null),Ae(g,_),Ae(g,x),w=Ud(t,b[1].bind(t)),j=!0},p(E,[T]){(!j||T&0)&&zt(r,"is-active",window.location.pathname==="/"),(!j||T&0)&&zt(i,"is-active",window.location.pathname==="/gear/"),(!j||T&0)&&zt(s,"is-active",window.location.pathname==="/rigging/"),(!j||T&0)&&zt(g,"is-active",window.location.pathname==="/contact/")},i(E){j||(xt(e.$$.fragment,E),xt(n.$$.fragment,E),xt(l.$$.fragment,E),xt(y.$$.fragment,E),j=!0)},o(E){Mt(e.$$.fragment,E),Mt(n.$$.fragment,E),Mt(l.$$.fragment,E),Mt(y.$$.fragment,E),j=!1},d(E){E&&dt(t),Ht(e),Ht(n),Ht(l),Ht(y),w()}}}function Hf(b,t,r){let e=0;function u(){e=this.offsetWidth,r(0,e)}return b.$$.update=()=>{b.$$.dirty&1&&ul.update(d=>e)},[e,u]}class Wf extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";nav{position:fixed;width:calc(100% - calc(16px * 1));bottom:calc(8px * 1);right:calc(8px * 1);height:var(--main-nav-height-desktop);padding-inline:calc(24px * 1);display:grid;grid-template-columns:repeat(4, auto);gap:calc(24px * 1);background-color:var(--color-light-primary);border-radius:3px;box-shadow:rgba(0, 0, 0, 0.1) 0px 1px 3px 0px,
			rgba(0, 0, 0, 0.06) 0px 1px 2px 0px;z-index:999}a{display:flex;width:60px;flex-direction:column;justify-content:center;align-items:center}a>span{position:relative;display:none;color:var(--color-light-background)}a.is-active>span::after{content:"●";position:absolute;bottom:0;left:-10px;color:greenyellow;font-size:calc(12px * 1)}@media(min-width: 501px){a>span{display:inline;color:var(--color-light-background)}}@media(min-width: 601px){nav{width:auto}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},Hf,Vf,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("main-nav-mobile",Wf);function qf(b){let t,r,e,u,d,o,i,n,a,f,p,s,l,c,h;return{c(){t=mt("svg"),r=mt("style"),e=dr(`.nav-svg-fill {
			fill: #fff;
			stroke: none;
			opacity: 0.8;
		}
	`),u=mt("rect"),d=mt("path"),o=mt("path"),i=mt("path"),n=mt("path"),a=mt("path"),f=mt("path"),p=mt("path"),s=mt("path"),l=mt("path"),c=mt("path"),h=mt("path"),me(u,"width","100"),me(u,"height","25"),me(u,"fill","none"),me(u,"stroke","none"),me(d,"d","M100 22C94 17 88 17 82 22C84.0257 23.6944 87.3478 24.5 91 24.5C94.6522 24.5 97.9743 23.6944 100 22Z"),me(d,"class","nav-svg-fill"),me(o,"d","M100 3C94 8 88 8 82 3C84.0257 1.30557 87.3478 0.5 91 0.5C94.6522 0.5 97.9743 1.30557 100 3Z"),me(o,"class","nav-svg-fill"),me(i,"d","M81.5051 21.5C87.0051 15.5 87.0051 8.5 81.5051 3.5C79.8107 5.52574 79.0051 8.84782 79.0051 12.5C79.0051 16.1522 79.8107 19.4743 81.5051 21.5Z"),me(i,"class","nav-svg-fill"),me(n,"d","M53 13C53.3388 20.8196 56.883 23.8219 65 24C64.2471 17.0313 60.1608 13.5389 53 13Z"),me(n,"class","nav-svg-fill"),me(a,"d","M53 12C53.3388 4.18039 56.883 1.17814 65 1C64.2471 7.96874 60.1608 11.4611 53 12Z"),me(a,"class","nav-svg-fill"),me(f,"d","M78 13C77.6612 20.8196 74.117 23.8219 66 24C66.7529 17.0313 70.8392 13.5389 78 13Z"),me(f,"class","nav-svg-fill"),me(p,"d","M78 12C77.6612 4.18039 74.117 1.17814 66 1C66.7529 7.96874 70.8392 11.4611 78 12Z"),me(p,"class","nav-svg-fill"),me(s,"d","M48.5 21.4811C42.7502 16.5 36.5 16.5 30.4135 21.4811C32.4391 23.1755 35.8478 24.5 39.5 24.5C43.1523 24.5 46.4743 23.1755 48.5 21.4811Z"),me(s,"class","nav-svg-fill"),me(l,"d","M30 21C35 15 35 9 30 3C28.3056 5.02574 27 8.34782 27 12C27 15.6522 28.3056 18.9744 30 21Z"),me(l,"class","nav-svg-fill"),me(c,"d","M49 21C44 15 44 9 49 3.16368C50.6946 5.18943 52 8.34782 52 12C52 15.6522 50.6946 18.9744 49 21Z"),me(c,"class","nav-svg-fill"),me(h,"d","M12.5 9.53674e-06C13.3459 8.00039 16.8365 11.9533 25.0312 12.5C16.8365 13.0466 13.3459 16.9995 12.5 24.9999C11.6543 16.9995 8.19457 13.0467 0 12.5C8.19457 11.9533 11.6543 8.00039 12.5 9.53674e-06Z"),me(h,"class","nav-svg-fill"),me(t,"width","100%"),me(t,"height","100%"),me(t,"viewBox","0 0 100 25"),me(t,"fill","white"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(m,g){lt(m,t,g),Ae(t,r),Ae(r,e),Ae(t,u),Ae(t,d),Ae(t,o),Ae(t,i),Ae(t,n),Ae(t,a),Ae(t,f),Ae(t,p),Ae(t,s),Ae(t,l),Ae(t,c),Ae(t,h)},p:ut,i:ut,o:ut,d(m){m&&dt(t)}}}class Xf extends Rr{constructor(t){super(),Ut(this,t,null,qf,Ot,{})}}function Yf(b){let t,r;const e=b[2].default,u=nl(e,b,b[1],null);return{c(){t=tt("button"),u&&u.c(),me(t,"data-bottom-tooltip",b[0])},m(d,o){lt(d,t,o),u&&u.m(t,null),r=!0},p(d,[o]){u&&u.p&&(!r||o&2)&&sl(u,e,d,d[1],r?il(e,d[1],o,null):ol(d[1]),null),(!r||o&1)&&me(t,"data-bottom-tooltip",d[0])},i(d){r||(xt(u,d),r=!0)},o(d){Mt(u,d),r=!1},d(d){d&&dt(t),u&&u.d(d)}}}function Zf(b,t,r){let{$$slots:e={},$$scope:u}=t,{tooltip:d=!1}=t;return b.$$set=o=>{"tooltip"in o&&r(0,d=o.tooltip),"$$scope"in o&&r(1,u=o.$$scope)},[d,u,e]}class no extends Rr{constructor(t){super(),Ut(this,t,Zf,Yf,Ot,{tooltip:0})}}const{window:Ga}=Vd;function Kf(b){let t,r,e,u;return e=new Xf({}),{c(){t=tt("a"),r=tt("div"),Kt(e.$$.fragment),me(r,"class","logo-container"),me(t,"href","/"),zt(t,"is-active",window.location.pathname==="/")},m(d,o){lt(d,t,o),Ae(t,r),Xt(e,r,null),u=!0},p(d,o){(!u||o&0)&&zt(t,"is-active",window.location.pathname==="/")},i(d){u||(xt(e.$$.fragment,d),u=!0)},o(d){Mt(e.$$.fragment,d),u=!1},d(d){d&&dt(t),Ht(e)}}}function Jf(b){let t,r,e;return r=new dl({}),{c(){t=tt("a"),Kt(r.$$.fragment),me(t,"href","/gear/"),zt(t,"is-active",window.location.pathname==="/gear/")},m(u,d){lt(u,t,d),Xt(r,t,null),e=!0},p(u,d){(!e||d&0)&&zt(t,"is-active",window.location.pathname==="/gear/")},i(u){e||(xt(r.$$.fragment,u),e=!0)},o(u){Mt(r.$$.fragment,u),e=!1},d(u){u&&dt(t),Ht(r)}}}function Qf(b){let t,r,e;return r=new hl({}),{c(){t=tt("a"),Kt(r.$$.fragment),me(t,"href","/rigging/"),zt(t,"is-active",window.location.pathname==="/rigging/")},m(u,d){lt(u,t,d),Xt(r,t,null),e=!0},p(u,d){(!e||d&0)&&zt(t,"is-active",window.location.pathname==="/rigging/")},i(u){e||(xt(r.$$.fragment,u),e=!0)},o(u){Mt(r.$$.fragment,u),e=!1},d(u){u&&dt(t),Ht(r)}}}function $f(b){let t,r,e;return r=new Yd({}),{c(){t=tt("a"),Kt(r.$$.fragment),me(t,"href","/contact/"),zt(t,"is-active",window.location.pathname==="/contact/")},m(u,d){lt(u,t,d),Xt(r,t,null),e=!0},p(u,d){(!e||d&0)&&zt(t,"is-active",window.location.pathname==="/contact/")},i(u){e||(xt(r.$$.fragment,u),e=!0)},o(u){Mt(r.$$.fragment,u),e=!1},d(u){u&&dt(t),Ht(r)}}}function ep(b){let t=!1,r=()=>{t=!1},e,u,d,o,i,n,a,f,p,s,l,c,h,m,g;return _r(b[2]),d=new no({props:{tooltip:"Главная",$$slots:{default:[Kf]},$$scope:{ctx:b}}}),a=new no({props:{tooltip:"Техника",$$slots:{default:[Jf]},$$scope:{ctx:b}}}),p=new no({props:{tooltip:"Оснащение",$$slots:{default:[Qf]},$$scope:{ctx:b}}}),l=new no({props:{tooltip:"Контакты",$$slots:{default:[$f]},$$scope:{ctx:b}}}),{c(){u=tt("nav"),Kt(d.$$.fragment),o=_t(),i=tt("div"),i.innerHTML=`<div class="stripe-dark"></div> 
		<div class="stripe-light"></div>`,n=_t(),Kt(a.$$.fragment),f=_t(),Kt(p.$$.fragment),s=_t(),Kt(l.$$.fragment),this.c=ut,me(i,"class","splitter"),_r(()=>b[3].call(u)),zt(u,"is-translucent",b[1]>50)},m(y,_){lt(y,u,_),Xt(d,u,null),Ae(u,o),Ae(u,i),Ae(u,n),Xt(a,u,null),Ae(u,f),Xt(p,u,null),Ae(u,s),Xt(l,u,null),c=Ud(u,b[3].bind(u)),h=!0,m||(g=Nn(Ga,"scroll",()=>{t=!0,clearTimeout(e),e=setTimeout(r,100),b[2]()}),m=!0)},p(y,[_]){_&2&&!t&&(t=!0,clearTimeout(e),scrollTo(Ga.pageXOffset,y[1]),e=setTimeout(r,100));const x={};_&16&&(x.$$scope={dirty:_,ctx:y}),d.$set(x);const w={};_&16&&(w.$$scope={dirty:_,ctx:y}),a.$set(w);const j={};_&16&&(j.$$scope={dirty:_,ctx:y}),p.$set(j);const E={};_&16&&(E.$$scope={dirty:_,ctx:y}),l.$set(E),(!h||_&2)&&zt(u,"is-translucent",y[1]>50)},i(y){h||(xt(d.$$.fragment,y),xt(a.$$.fragment,y),xt(p.$$.fragment,y),xt(l.$$.fragment,y),h=!0)},o(y){Mt(d.$$.fragment,y),Mt(a.$$.fragment,y),Mt(p.$$.fragment,y),Mt(l.$$.fragment,y),h=!1},d(y){y&&dt(u),Ht(d),Ht(a),Ht(p),Ht(l),c(),m=!1,g()}}}function tp(b,t,r){let e=0,u;function d(){r(1,u=Ga.pageYOffset)}function o(){e=this.offsetWidth,r(0,e)}return b.$$.update=()=>{b.$$.dirty&1&&ul.update(i=>e)},[e,u,d,o]}class rp extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";nav{position:fixed;top:0;left:0;height:var(--main-nav-height-desktop);padding-inline:calc(24px * 1);display:grid;grid-template-columns:repeat(5, auto);gap:calc(24px * 1);background-color:var(--color-light-primary);border-bottom-right-radius:3px;box-shadow:rgba(0, 0, 0, 0.1) 0px 1px 3px 0px,
			rgba(0, 0, 0, 0.06) 0px 1px 2px 0px;z-index:99;transition-duration:300ms}.is-translucent{background-color:hsla(258.1 82.4% 62.2% / 0.85);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.logo-container{width:100px;height:28px;display:flex;align-items:center}a{display:flex;border-radius:3px;position:relative}a.is-active::after{content:"●";position:absolute;bottom:calc(-4px * 1);left:calc(-8px * 1);color:greenyellow;font-size:calc(12px * 1)}.splitter{display:flex}.stripe-light,.stripe-dark{width:1px;height:var(--main-nav-height-desktop);background-color:var(--color-light-primary)}.stripe-light{filter:brightness(115%)}.stripe-dark{filter:brightness(85%)}.is-translucent .stripe-dark{opacity:0.3}.is-translucent .stripe-light{opacity:0}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},tp,ep,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("main-nav-desktop",rp);const np=[{label:"Задвижки",url:"/catalog/gate-valves/"},{label:"Затворы",url:"/catalog/butterfly-valves/"},{label:"Краны",url:"/catalog/ball-valves/"},{label:"Вентили",url:"/catalog/stop-valves/"},{label:"Клапаны",url:"/catalog/pressure-valves/"},{label:"Фильтры",url:"/catalog/filters/"},{label:"Аксессуары",url:"/catalog/accessories/"}],ip=[{label:"Обширная география",url:"/content/geography/"},{label:"Редкое оборудование",url:"/content/unobtanium/"},{label:"Замещение импорта",url:"/content/import-substitution/"}];function wc(b){let t="",r;return{c(){r=dr(t)},m(e,u){lt(e,r,u)},d(e){e&&dt(r)}}}function sp(b){let t,r,e;return{c(){t=tt("sub-nav-hamburger"),fn(t,"data",b[0])},m(u,d){lt(u,t,d),e=!0},p(u,d){b=u,(!e||d&1)&&fn(t,"data",b[0])},i(u){e||(_r(()=>{r||(r=zr(t,Gr,{duration:es},!0)),r.run(1)}),e=!0)},o(u){r||(r=zr(t,Gr,{duration:es},!1)),r.run(0),e=!1},d(u){u&&dt(t),u&&r&&r.end()}}}function op(b){let t,r,e;return{c(){t=tt("sub-nav-mobile"),fn(t,"data",b[0])},m(u,d){lt(u,t,d),e=!0},p(u,d){b=u,(!e||d&1)&&fn(t,"data",b[0])},i(u){e||(_r(()=>{r||(r=zr(t,Gr,{duration:es},!0)),r.run(1)}),e=!0)},o(u){r||(r=zr(t,Gr,{duration:es},!1)),r.run(0),e=!1},d(u){u&&dt(t),u&&r&&r.end()}}}function ap(b){let t,r,e;return{c(){t=tt("sub-nav-desktop"),fn(t,"data",b[0])},m(u,d){lt(u,t,d),e=!0},p(u,d){b=u,(!e||d&1)&&fn(t,"data",b[0])},i(u){e||(_r(()=>{r||(r=zr(t,Gr,{duration:es},!0)),r.run(1)}),e=!0)},o(u){r||(r=zr(t,Gr,{duration:es},!1)),r.run(0),e=!1},d(u){u&&dt(t),u&&r&&r.end()}}}function lp(b){let t,r,e,u,d,o=!b[0]&&wc();const i=[ap,op,sp],n=[];function a(f,p){return f[1]>1401?0:f[1]>901?1:f[1]<901?2:-1}return~(r=a(b))&&(e=n[r]=i[r](b)),{c(){o&&o.c(),t=_t(),e&&e.c(),u=zn(),this.c=ut},m(f,p){o&&o.m(f,p),lt(f,t,p),~r&&n[r].m(f,p),lt(f,u,p),d=!0},p(f,[p]){f[0]?o&&(o.d(1),o=null):o||(o=wc(),o.c(),o.m(t.parentNode,t));let s=r;r=a(f),r===s?~r&&n[r].p(f,p):(e&&(Fn(),Mt(n[s],1,1,()=>{n[s]=null}),Bn()),~r?(e=n[r],e?e.p(f,p):(e=n[r]=i[r](f),e.c()),xt(e,1),e.m(u.parentNode,u)):e=null)},i(f){d||(xt(e),d=!0)},o(f){Mt(e),d=!1},d(f){o&&o.d(f),f&&dt(t),~r&&n[r].d(f),f&&dt(u)}}}let es=500;function cp(b,t,r){let{variant:e}=t,u,d;return window.addEventListener("resize",()=>{r(1,d=window.innerWidth)}),si(()=>{r(1,d=window.innerWidth)}),b.$$set=o=>{"variant"in o&&r(2,e=o.variant)},b.$$.update=()=>{if(b.$$.dirty&4)switch(e){case"product-categories":r(0,u=np);break;case"content":r(0,u=ip);break}},[u,d,e]}class up extends xr{constructor(t){super(),Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},cp,lp,Ot,{variant:2},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["variant"]}get variant(){return this.$$.ctx[2]}set variant(t){this.$$set({variant:t}),fr()}}customElements.define("sub-nav",up);function Sc(b,t,r){const e=b.slice();return e[1]=t[r].label,e[2]=t[r].url,e}function Mc(b){let t,r=b[0],e=[];for(let u=0;u<r.length;u+=1)e[u]=Tc(Sc(b,r,u));return{c(){t=tt("nav");for(let u=0;u<e.length;u+=1)e[u].c()},m(u,d){lt(u,t,d);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(u,d){if(d&1){r=u[0];let o;for(o=0;o<r.length;o+=1){const i=Sc(u,r,o);e[o]?e[o].p(i,d):(e[o]=Tc(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}},d(u){u&&dt(t),Ws(e,u)}}}function Tc(b){let t,r=b[1]+"",e,u,d;return{c(){t=tt("a"),e=dr(r),u=_t(),me(t,"class","text-button-caption"),me(t,"href",d=b[2]),zt(t,"is-active",window.location.pathname===b[2])},m(o,i){lt(o,t,i),Ae(t,e),Ae(t,u)},p(o,i){i&1&&r!==(r=o[1]+"")&&ii(e,r),i&1&&d!==(d=o[2])&&me(t,"href",d),i&1&&zt(t,"is-active",window.location.pathname===o[2])},d(o){o&&dt(t)}}}function dp(b){let t,r=b[0]&&Mc(b);return{c(){r&&r.c(),t=zn(),this.c=ut},m(e,u){r&&r.m(e,u),lt(e,t,u)},p(e,[u]){e[0]?r?r.p(e,u):(r=Mc(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:ut,o:ut,d(e){r&&r.d(e),e&&dt(t)}}}function hp(b,t,r){let{data:e}=t;return b.$$set=u=>{"data"in u&&r(0,e=u.data)},[e]}class fp extends xr{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";nav{position:fixed;right:0;top:calc(var(--main-nav-height-desktop) + calc(8px * 1));padding:calc(16px * 1) 0;display:flex;flex-direction:column;align-items:flex-end;z-index:10}a{position:relative;padding:calc(16px * 1) calc(32px * 1);transition-duration:150ms}a:hover{background-color:var(--color-light-tertiary);color:var(--color-light-background);border-top-left-radius:3px;border-bottom-left-radius:3px}a.is-active::after{content:">";font-size:calc(16px * 1);color:var(--color-light-tertiary);position:absolute;left:calc(16px * 1);top:50%;transform:translateY(-50%)}a.is-active:hover::after{color:var(--color-light-background)}</style>',Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},hp,dp,Ot,{data:0},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),fr()}}customElements.define("sub-nav-desktop",fp);function Ec(b,t,r){const e=b.slice();return e[3]=t[r].label,e[4]=t[r].url,e}function jc(b){let t,r=b[0],e=[];for(let u=0;u<r.length;u+=1)e[u]=Cc(Ec(b,r,u));return{c(){t=tt("nav");for(let u=0;u<e.length;u+=1)e[u].c();br(t,"--main-nav-width",b[1]+"px"),br(t,"--logo-width",b[2]+"px")},m(u,d){lt(u,t,d);for(let o=0;o<e.length;o+=1)e[o].m(t,null)},p(u,d){if(d&1){r=u[0];let o;for(o=0;o<r.length;o+=1){const i=Ec(u,r,o);e[o]?e[o].p(i,d):(e[o]=Cc(i),e[o].c(),e[o].m(t,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}d&2&&br(t,"--main-nav-width",u[1]+"px"),d&4&&br(t,"--logo-width",u[2]+"px")},d(u){u&&dt(t),Ws(e,u)}}}function Cc(b){let t,r=b[3]+"",e,u,d;return{c(){t=tt("a"),e=dr(r),u=_t(),me(t,"class","text-button-caption"),me(t,"href",d=b[4]),zt(t,"is-active",window.location.pathname===b[4])},m(o,i){lt(o,t,i),Ae(t,e),Ae(t,u)},p(o,i){i&1&&r!==(r=o[3]+"")&&ii(e,r),i&1&&d!==(d=o[4])&&me(t,"href",d),i&1&&zt(t,"is-active",window.location.pathname===o[4])},d(o){o&&dt(t)}}}function pp(b){let t,r=b[0]&&b[1]&&jc(b);return{c(){r&&r.c(),t=zn(),this.c=ut},m(e,u){r&&r.m(e,u),lt(e,t,u)},p(e,[u]){e[0]&&e[1]?r?r.p(e,u):(r=jc(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:ut,o:ut,d(e){r&&r.d(e),e&&dt(t)}}}function mp(b,t,r){let{data:e=null}=t,u,d;return ul.subscribe(o=>{r(1,u=o)}),qd.subscribe(o=>{r(2,d=o)}),b.$$set=o=>{"data"in o&&r(0,e=o.data)},[e,u,d]}class gp extends xr{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";nav{position:fixed;top:0rem;right:0;width:calc(100vw - var(--logo-width) - 100px * 1);padding-inline:calc(8px * 1);display:flex;height:calc(58px * 1);justify-content:flex-end;align-items:center;flex-wrap:wrap;z-index:10}a{position:relative;padding:calc(8px * 1) calc(16px * 1);margin-bottom:calc(4px * 1);transition-duration:150ms}a:hover{background-color:var(--color-light-tertiary);color:var(--color-light-background)}a.is-active::after{content:">";font-size:calc(16px * 1);color:var(--color-light-tertiary);position:absolute;left:calc(4px * 1);top:50%;transform:translateY(-50%)}a.is-active:hover::after{color:var(--color-light-background)}@media(min-width: 1201px){nav{width:calc(100vw - var(--logo-width) - var(--main-nav-width) - 100px);right:var(--main-nav-width)}}</style>',Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},mp,pp,Ot,{data:0},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),fr()}}customElements.define("sub-nav-mobile",gp);function yp(b){let t,r,e,u,d,o;return{c(){t=mt("svg"),r=mt("style"),e=dr(`circle {
			stroke: white;
			fill: none;
			transition-duration: var(--duration);
		}

		circle.is-active {
			stroke: white;
			fill: white;
		}
	`),u=mt("circle"),d=mt("circle"),o=mt("circle"),me(u,"cx","3"),me(u,"cy","3"),me(u,"r","1.5"),zt(u,"is-active",b[0]),me(d,"cx","10"),me(d,"cy","3"),me(d,"r","1.5"),zt(d,"is-active",b[0]),me(o,"cx","17"),me(o,"cy","3"),me(o,"r","1.5"),zt(o,"is-active",b[0]),br(t,"--duration",b[1]+"ms"),me(t,"width","20"),me(t,"height","6"),me(t,"viewBox","0 0 20 6"),me(t,"fill","none"),me(t,"xmlns","http://www.w3.org/2000/svg")},m(i,n){lt(i,t,n),Ae(t,r),Ae(r,e),Ae(t,u),Ae(t,d),Ae(t,o)},p(i,[n]){n&1&&zt(u,"is-active",i[0]),n&1&&zt(d,"is-active",i[0]),n&1&&zt(o,"is-active",i[0]),n&2&&br(t,"--duration",i[1]+"ms")},i:ut,o:ut,d(i){i&&dt(t)}}}function vp(b,t,r){let{isActive:e}=t,{duration:u}=t;return b.$$set=d=>{"isActive"in d&&r(0,e=d.isActive),"duration"in d&&r(1,u=d.duration)},[e,u]}class bp extends Rr{constructor(t){super(),Ut(this,t,vp,yp,Ot,{isActive:0,duration:1})}}function Ac(b,t,r){const e=b.slice();return e[3]=t[r].label,e[4]=t[r].url,e}function Lc(b){let t=null+"",r;return{c(){r=dr(t)},m(e,u){lt(e,r,u)},d(e){e&&dt(r)}}}function Rc(b){let t,r,e,u=b[0],d=[];for(let o=0;o<u.length;o+=1)d[o]=Pc(Ac(b,u,o));return{c(){t=tt("nav");for(let o=0;o<d.length;o+=1)d[o].c()},m(o,i){lt(o,t,i);for(let n=0;n<d.length;n+=1)d[n].m(t,null);e=!0},p(o,i){if(b=o,i&1){u=b[0];let n;for(n=0;n<u.length;n+=1){const a=Ac(b,u,n);d[n]?d[n].p(a,i):(d[n]=Pc(a),d[n].c(),d[n].m(t,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},i(o){e||(_r(()=>{r||(r=zr(t,Gr,{duration:Va},!0)),r.run(1)}),e=!0)},o(o){r||(r=zr(t,Gr,{duration:Va},!1)),r.run(0),e=!1},d(o){o&&dt(t),Ws(d,o),o&&r&&r.end()}}}function Pc(b){let t,r=b[3]+"",e,u;return{c(){t=tt("a"),e=dr(r),me(t,"class","text-button-caption"),me(t,"href",u=b[4])},m(d,o){lt(d,t,o),Ae(t,e)},p(d,o){o&1&&r!==(r=d[3]+"")&&ii(e,r),o&1&&u!==(u=d[4])&&me(t,"href",u)},d(d){d&&dt(t)}}}function _p(b){let t,r,e,u,d,o,i,n,a=!b[0]&&Lc();e=new bp({props:{isActive:b[1],duration:Va}});let f=b[1]&&Rc(b);return{c(){a&&a.c(),t=_t(),r=tt("button"),Kt(e.$$.fragment),u=_t(),f&&f.c(),d=zn(),this.c=ut,me(r,"class","burger")},m(p,s){a&&a.m(p,s),lt(p,t,s),lt(p,r,s),Xt(e,r,null),lt(p,u,s),f&&f.m(p,s),lt(p,d,s),o=!0,i||(n=Nn(r,"click",b[2]),i=!0)},p(p,[s]){p[0]?a&&(a.d(1),a=null):a||(a=Lc(),a.c(),a.m(t.parentNode,t));const l={};s&2&&(l.isActive=p[1]),e.$set(l),p[1]?f?(f.p(p,s),s&2&&xt(f,1)):(f=Rc(p),f.c(),xt(f,1),f.m(d.parentNode,d)):f&&(Fn(),Mt(f,1,1,()=>{f=null}),Bn())},i(p){o||(xt(e.$$.fragment,p),xt(f),o=!0)},o(p){Mt(e.$$.fragment,p),Mt(f),o=!1},d(p){a&&a.d(p),p&&dt(t),p&&dt(r),Ht(e),p&&dt(u),f&&f.d(p),p&&dt(d),i=!1,n()}}}let Va=100;function xp(b,t,r){let{data:e=null}=t,u=!1;function d(){r(1,u=!u)}return b.$$set=o=>{"data"in o&&r(0,e=o.data)},[e,u,d]}class wp extends xr{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";button{all:unset;position:fixed;top:calc(8px * 1);right:calc(8px * 1);width:calc(56px * 1);height:calc(40px * 1);border-radius:3px;background-color:var(--color-light-primary);display:flex;justify-content:center;align-items:center;cursor:pointer;z-index:11}nav{position:fixed;top:calc(8px * 1);right:calc(8px * 1);min-height:56px;padding:calc(16px * 1) 80px calc(16px * 1) calc(16px * 1);background-color:var(--color-light-primary);border-radius:3px;z-index:10}nav>a{display:block;white-space:nowrap;color:var(--color-light-on-primary);margin-bottom:calc(24px * 1);text-align:end}a:last-of-type{margin-bottom:0}</style>',Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},xp,_p,Ot,{data:0},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),fr()}}customElements.define("sub-nav-hamburger",wp);var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sp(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function so(b){throw new Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ha={},Mp={get exports(){return Ha},set exports(b){Ha=b}};/*! p5.js v1.5.0 October 18, 2022 */(function(b,t){(function(r){b.exports=r()})(function(){var r;return function e(u,d,o){function i(f,p){if(!d[f]){if(!u[f]){var s=typeof so=="function"&&so;if(!p&&s)return s(f,!0);if(n)return n(f,!0);throw(p=new Error("Cannot find module '"+f+"'")).code="MODULE_NOT_FOUND",p}s=d[f]={exports:{}},u[f][0].call(s.exports,function(l){return i(u[f][1][l]||l)},s,s.exports,e,u,d,o)}return d[f].exports}for(var n=typeof so=="function"&&so,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,u,d){d.byteLength=function(h){var h=s(h),c=h[0],h=h[1];return 3*(c+h)/4-h},d.toByteArray=function(l){var c,h,g=s(l),m=g[0],g=g[1],y=new n(function(w,j){return 3*(w+j)/4-j}(m,g)),_=0,x=0<g?m-4:m;for(h=0;h<x;h+=4)c=i[l.charCodeAt(h)]<<18|i[l.charCodeAt(h+1)]<<12|i[l.charCodeAt(h+2)]<<6|i[l.charCodeAt(h+3)],y[_++]=c>>16&255,y[_++]=c>>8&255,y[_++]=255&c;return g===2&&(c=i[l.charCodeAt(h)]<<2|i[l.charCodeAt(h+1)]>>4,y[_++]=255&c),g===1&&(c=i[l.charCodeAt(h)]<<10|i[l.charCodeAt(h+1)]<<4|i[l.charCodeAt(h+2)]>>2,y[_++]=c>>8&255,y[_++]=255&c),y},d.fromByteArray=function(l){for(var c,h=l.length,m=h%3,g=[],y=0,_=h-m;y<_;y+=16383)g.push(function(x,w,j){for(var E,T=[],A=w;A<j;A+=3)E=(x[A]<<16&16711680)+(x[A+1]<<8&65280)+(255&x[A+2]),T.push(function(R){return o[R>>18&63]+o[R>>12&63]+o[R>>6&63]+o[63&R]}(E));return T.join("")}(l,y,_<y+16383?_:y+16383));return m==1?(c=l[h-1],g.push(o[c>>2]+o[c<<4&63]+"==")):m==2&&(c=(l[h-2]<<8)+l[h-1],g.push(o[c>>10]+o[c>>4&63]+o[c<<2&63]+"=")),g.join("")};for(var o=[],i=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=a.length;f<p;++f)o[f]=a[f],i[a.charCodeAt(f)]=f;function s(l){var c=l.length;if(0<c%4)throw new Error("Invalid string. Length must be a multiple of 4");return l=l.indexOf("="),c=(l=l===-1?c:l)===c?0:4-l%4,[l,c]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,u,d){},{}],3:[function(e,u,d){arguments[4][2][0].apply(d,arguments)},{dup:2}],4:[function(e,u,d){(function(s){var i=e("base64-js"),n=e("ieee754"),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,f=(d.Buffer=s,d.SlowBuffer=function(L){return+L!=L&&(L=0),s.alloc(+L)},d.INSPECT_MAX_BYTES=50,2147483647);function p(L){if(f<L)throw new RangeError('The value "'+L+'" is invalid for option "size"');return L=new Uint8Array(L),Object.setPrototypeOf(L,s.prototype),L}function s(L,I,F){if(typeof L!="number")return l(L,I,F);if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(L)}function l(L,I,F){if(typeof L=="string"){var V=L,J=I;if(s.isEncoding(J=typeof J=="string"&&J!==""?J:"utf8"))return le=0|y(V,J),ce=p(le),ce=(V=ce.write(V,J))!==le?ce.slice(0,V):ce;throw new TypeError("Unknown encoding: "+J)}if(ArrayBuffer.isView(L))return m(L);if(L!=null){if(Z(L,ArrayBuffer)||L&&Z(L.buffer,ArrayBuffer)){var le=L,V=I,ce=F;if(V<0||le.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<V+(ce||0))throw new RangeError('"length" is outside of buffer bounds');return le=V===void 0&&ce===void 0?new Uint8Array(le):ce===void 0?new Uint8Array(le,V):new Uint8Array(le,V,ce),Object.setPrototypeOf(le,s.prototype),le}if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(J=L.valueOf&&L.valueOf(),J!=null&&J!==L)return s.from(J,I,F);var ue=function(re){{var de,be;if(s.isBuffer(re))return de=0|g(re.length),(be=p(de)).length!==0&&re.copy(be,0,0,de),be}if(re.length!==void 0)return typeof re.length!="number"||q(re.length)?p(0):m(re);if(re.type==="Buffer"&&Array.isArray(re.data))return m(re.data)}(L);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return s.from(L[Symbol.toPrimitive]("string"),I,F)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function c(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function h(L){return c(L),p(L<0?0:0|g(L))}function m(L){for(var I=L.length<0?0:0|g(L.length),F=p(I),V=0;V<I;V+=1)F[V]=255&L[V];return F}function g(L){if(f<=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|L}function y(L,I){if(s.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||Z(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);var F=L.length,V=2<arguments.length&&arguments[2]===!0;if(!V&&F===0)return 0;for(var J=!1;;)switch(I){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return H(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*F;case"hex":return F>>>1;case"base64":return W(L).length;default:if(J)return V?-1:H(L).length;I=(""+I).toLowerCase(),J=!0}}function _(L,I,F){var V,J=!1;if((I=I===void 0||I<0?0:I)>this.length||(F=F===void 0||F>this.length?this.length:F)<=0||(F>>>=0)<=(I>>>=0))return"";for(L=L||"utf8";;)switch(L){case"hex":var le=this,Se=I,ce=F,be=le.length;(!ce||ce<0||be<ce)&&(ce=be);for(var ue="",re=Se=!Se||Se<0?0:Se;re<ce;++re)ue+=ee[le[re]];return ue;case"utf8":case"utf-8":return A(this,I,F);case"ascii":var de=this,be=I,ie=F,xe="";ie=Math.min(de.length,ie);for(var Me=be;Me<ie;++Me)xe+=String.fromCharCode(127&de[Me]);return xe;case"latin1":case"binary":var Ee=this,Se=I,Ie=F,Oe="";Ie=Math.min(Ee.length,Ie);for(var Xe=Se;Xe<Ie;++Xe)Oe+=String.fromCharCode(Ee[Xe]);return Oe;case"base64":return $=this,V=F,(se=I)===0&&V===$.length?i.fromByteArray($):i.fromByteArray($.slice(se,V));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var $=I,se=F,Le=this.slice($,se),Fe="",He=0;He<Le.length;He+=2)Fe+=String.fromCharCode(Le[He]+256*Le[He+1]);return Fe;default:if(J)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),J=!0}}function x(L,I,F){var V=L[I];L[I]=L[F],L[F]=V}function w(L,I,F,V,J){if(L.length===0)return-1;if(typeof F=="string"?(V=F,F=0):2147483647<F?F=2147483647:F<-2147483648&&(F=-2147483648),(F=(F=q(F=+F)?J?0:L.length-1:F)<0?L.length+F:F)>=L.length){if(J)return-1;F=L.length-1}else if(F<0){if(!J)return-1;F=0}if(typeof I=="string"&&(I=s.from(I,V)),s.isBuffer(I))return I.length===0?-1:j(L,I,F,V,J);if(typeof I=="number")return I&=255,typeof Uint8Array.prototype.indexOf=="function"?(J?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(L,I,F):j(L,[I],F,V,J);throw new TypeError("val must be string, number or Buffer")}function j(L,I,F,V,J){var le=1,ce=L.length,ue=I.length;if(V!==void 0&&((V=String(V).toLowerCase())==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(L.length<2||I.length<2)return-1;ce/=le=2,ue/=2,F/=2}function re(Me,Ee){return le===1?Me[Ee]:Me.readUInt16BE(Ee*le)}if(J)for(var de=-1,be=F;be<ce;be++)if(re(L,be)===re(I,de===-1?0:be-de)){if(be-(de=de===-1?be:de)+1===ue)return de*le}else de!==-1&&(be-=be-de),de=-1;else for(be=F=ce<F+ue?ce-ue:F;0<=be;be--){for(var ie=!0,xe=0;xe<ue;xe++)if(re(L,be+xe)!==re(I,xe)){ie=!1;break}if(ie)return be}return-1}function E(L,I,F,V){return X(function(J){for(var le=[],ce=0;ce<J.length;++ce)le.push(255&J.charCodeAt(ce));return le}(I),L,F,V)}function T(L,I,F,V){return X(function(J,le){for(var ce,ue,re=[],de=0;de<J.length&&!((le-=2)<0);++de)ue=J.charCodeAt(de),ce=ue>>8,ue=ue%256,re.push(ue),re.push(ce);return re}(I,L.length-F),L,F,V)}function A(L,I,F){F=Math.min(L.length,F);for(var V=[],J=I;J<F;){var le,ce,ue,re,de=L[J],be=null,ie=239<de?4:223<de?3:191<de?2:1;if(J+ie<=F)switch(ie){case 1:de<128&&(be=de);break;case 2:(192&(le=L[J+1]))==128&&127<(re=(31&de)<<6|63&le)&&(be=re);break;case 3:le=L[J+1],ce=L[J+2],(192&le)==128&&(192&ce)==128&&2047<(re=(15&de)<<12|(63&le)<<6|63&ce)&&(re<55296||57343<re)&&(be=re);break;case 4:le=L[J+1],ce=L[J+2],ue=L[J+3],(192&le)==128&&(192&ce)==128&&(192&ue)==128&&65535<(re=(15&de)<<18|(63&le)<<12|(63&ce)<<6|63&ue)&&re<1114112&&(be=re)}be===null?(be=65533,ie=1):65535<be&&(be-=65536,V.push(be>>>10&1023|55296),be=56320|1023&be),V.push(be),J+=ie}var xe=V,Me=xe.length;if(Me<=R)return String.fromCharCode.apply(String,xe);for(var Ee="",Se=0;Se<Me;)Ee+=String.fromCharCode.apply(String,xe.slice(Se,Se+=R));return Ee}d.kMaxLength=f,(s.TYPED_ARRAY_SUPPORT=function(){try{var L=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(L,I),L.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=l,Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(L,I,F){return I=I,F=F,c(L=L),!(L<=0)&&I!==void 0?typeof F=="string"?p(L).fill(I,F):p(L).fill(I):p(L)},s.allocUnsafe=h,s.allocUnsafeSlow=h,s.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==s.prototype},s.compare=function(L,I){if(Z(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),Z(I,Uint8Array)&&(I=s.from(I,I.offset,I.byteLength)),!s.isBuffer(L)||!s.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===I)return 0;for(var F=L.length,V=I.length,J=0,le=Math.min(F,V);J<le;++J)if(L[J]!==I[J]){F=L[J],V=I[J];break}return F<V?-1:V<F?1:0},s.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(L,I){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return s.alloc(0);if(I===void 0)for(J=I=0;J<L.length;++J)I+=L[J].length;for(var F=s.allocUnsafe(I),V=0,J=0;J<L.length;++J){var le=L[J];if(Z(le,Uint8Array)&&(le=s.from(le)),!s.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(F,V),V+=le.length}return F},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<L;I+=2)x(this,I,I+1);return this},s.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<L;I+=4)x(this,I,I+3),x(this,I+1,I+2);return this},s.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<L;I+=8)x(this,I,I+7),x(this,I+1,I+6),x(this,I+2,I+5),x(this,I+3,I+4);return this},s.prototype.toLocaleString=s.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?A(this,0,L):_.apply(this,arguments)},s.prototype.equals=function(L){if(s.isBuffer(L))return this===L||s.compare(this,L)===0;throw new TypeError("Argument must be a Buffer")},s.prototype.inspect=function(){var I="",L=d.INSPECT_MAX_BYTES,I=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim();return this.length>L&&(I+=" ... "),"<Buffer "+I+">"},a&&(s.prototype[a]=s.prototype.inspect),s.prototype.compare=function(L,I,F,V,J){if(Z(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),!s.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(F===void 0&&(F=L?L.length:0),V===void 0&&(V=0),J===void 0&&(J=this.length),(I=I===void 0?0:I)<0||F>L.length||V<0||J>this.length)throw new RangeError("out of range index");if(J<=V&&F<=I)return 0;if(J<=V)return-1;if(F<=I)return 1;if(this===L)return 0;for(var le=(J>>>=0)-(V>>>=0),ce=(F>>>=0)-(I>>>=0),ue=Math.min(le,ce),re=this.slice(V,J),de=L.slice(I,F),be=0;be<ue;++be)if(re[be]!==de[be]){le=re[be],ce=de[be];break}return le<ce?-1:ce<le?1:0},s.prototype.includes=function(L,I,F){return this.indexOf(L,I,F)!==-1},s.prototype.indexOf=function(L,I,F){return w(this,L,I,F,!0)},s.prototype.lastIndexOf=function(L,I,F){return w(this,L,I,F,!1)},s.prototype.write=function(L,I,F,V){if(I===void 0)V="utf8",F=this.length,I=0;else if(F===void 0&&typeof I=="string")V=I,F=this.length,I=0;else{if(!isFinite(I))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");I>>>=0,isFinite(F)?(F>>>=0,V===void 0&&(V="utf8")):(V=F,F=void 0)}var J=this.length-I;if((F===void 0||J<F)&&(F=J),0<L.length&&(F<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");V=V||"utf8";for(var le,ce,ue,re=!1;;)switch(V){case"hex":var de=this,be=L,ie=I,xe=F,Me=(ie=Number(ie)||0,de.length-ie);(!xe||Me<(xe=Number(xe)))&&(xe=Me),(Me=be.length)/2<xe&&(xe=Me/2);for(var Ee=0;Ee<xe;++Ee){var Se=parseInt(be.substr(2*Ee,2),16);if(q(Se))return Ee;de[ie+Ee]=Se}return Ee;case"utf8":case"utf-8":return Me=I,ue=F,X(H(L,(ce=this).length-Me),ce,Me,ue);case"ascii":return E(this,L,I,F);case"latin1":case"binary":return E(this,L,I,F);case"base64":return ce=this,ue=I,le=F,X(W(L),ce,ue,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,L,I,F);default:if(re)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),re=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function P(L,I,F){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(F<L+I)throw new RangeError("Trying to access beyond buffer length")}function N(L,I,F,V,J,le){if(!s.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(J<I||I<le)throw new RangeError('"value" argument is out of bounds');if(F+V>L.length)throw new RangeError("Index out of range")}function O(L,I,F,V){if(F+V>L.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function D(L,I,F,V,J){return I=+I,F>>>=0,J||O(L,0,F,4),n.write(L,I,F,V,23,4),F+4}function U(L,I,F,V,J){return I=+I,F>>>=0,J||O(L,0,F,8),n.write(L,I,F,V,52,8),F+8}s.prototype.slice=function(L,I){var F=this.length,F=((L=~~L)<0?(L+=F)<0&&(L=0):F<L&&(L=F),(I=I===void 0?F:~~I)<0?(I+=F)<0&&(I=0):F<I&&(I=F),I<L&&(I=L),this.subarray(L,I));return Object.setPrototypeOf(F,s.prototype),F},s.prototype.readUIntLE=function(L,I,F){L>>>=0,I>>>=0,F||P(L,I,this.length);for(var V=this[L],J=1,le=0;++le<I&&(J*=256);)V+=this[L+le]*J;return V},s.prototype.readUIntBE=function(L,I,F){L>>>=0,I>>>=0,F||P(L,I,this.length);for(var V=this[L+--I],J=1;0<I&&(J*=256);)V+=this[L+--I]*J;return V},s.prototype.readUInt8=function(L,I){return L>>>=0,I||P(L,1,this.length),this[L]},s.prototype.readUInt16LE=function(L,I){return L>>>=0,I||P(L,2,this.length),this[L]|this[L+1]<<8},s.prototype.readUInt16BE=function(L,I){return L>>>=0,I||P(L,2,this.length),this[L]<<8|this[L+1]},s.prototype.readUInt32LE=function(L,I){return L>>>=0,I||P(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},s.prototype.readUInt32BE=function(L,I){return L>>>=0,I||P(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},s.prototype.readIntLE=function(L,I,F){L>>>=0,I>>>=0,F||P(L,I,this.length);for(var V=this[L],J=1,le=0;++le<I&&(J*=256);)V+=this[L+le]*J;return(J*=128)<=V&&(V-=Math.pow(2,8*I)),V},s.prototype.readIntBE=function(L,I,F){L>>>=0,I>>>=0,F||P(L,I,this.length);for(var V=I,J=1,le=this[L+--V];0<V&&(J*=256);)le+=this[L+--V]*J;return(J*=128)<=le&&(le-=Math.pow(2,8*I)),le},s.prototype.readInt8=function(L,I){return L>>>=0,I||P(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},s.prototype.readInt16LE=function(L,I){return L>>>=0,I||P(L,2,this.length),I=this[L]|this[L+1]<<8,32768&I?4294901760|I:I},s.prototype.readInt16BE=function(L,I){return L>>>=0,I||P(L,2,this.length),I=this[L+1]|this[L]<<8,32768&I?4294901760|I:I},s.prototype.readInt32LE=function(L,I){return L>>>=0,I||P(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},s.prototype.readInt32BE=function(L,I){return L>>>=0,I||P(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},s.prototype.readFloatLE=function(L,I){return L>>>=0,I||P(L,4,this.length),n.read(this,L,!0,23,4)},s.prototype.readFloatBE=function(L,I){return L>>>=0,I||P(L,4,this.length),n.read(this,L,!1,23,4)},s.prototype.readDoubleLE=function(L,I){return L>>>=0,I||P(L,8,this.length),n.read(this,L,!0,52,8)},s.prototype.readDoubleBE=function(L,I){return L>>>=0,I||P(L,8,this.length),n.read(this,L,!1,52,8)},s.prototype.writeUIntLE=function(L,I,F,V){L=+L,I>>>=0,F>>>=0,V||N(this,L,I,F,Math.pow(2,8*F)-1,0);var J=1,le=0;for(this[I]=255&L;++le<F&&(J*=256);)this[I+le]=L/J&255;return I+F},s.prototype.writeUIntBE=function(L,I,F,V){L=+L,I>>>=0,F>>>=0,V||N(this,L,I,F,Math.pow(2,8*F)-1,0);var J=F-1,le=1;for(this[I+J]=255&L;0<=--J&&(le*=256);)this[I+J]=L/le&255;return I+F},s.prototype.writeUInt8=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,1,255,0),this[I]=255&L,I+1},s.prototype.writeUInt16LE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,2,65535,0),this[I]=255&L,this[I+1]=L>>>8,I+2},s.prototype.writeUInt16BE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,2,65535,0),this[I]=L>>>8,this[I+1]=255&L,I+2},s.prototype.writeUInt32LE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,4,4294967295,0),this[I+3]=L>>>24,this[I+2]=L>>>16,this[I+1]=L>>>8,this[I]=255&L,I+4},s.prototype.writeUInt32BE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,4,4294967295,0),this[I]=L>>>24,this[I+1]=L>>>16,this[I+2]=L>>>8,this[I+3]=255&L,I+4},s.prototype.writeIntLE=function(L,I,F,V){L=+L,I>>>=0,V||N(this,L,I,F,(V=Math.pow(2,8*F-1))-1,-V);var J=0,le=1,ce=0;for(this[I]=255&L;++J<F&&(le*=256);)L<0&&ce===0&&this[I+J-1]!==0&&(ce=1),this[I+J]=(L/le>>0)-ce&255;return I+F},s.prototype.writeIntBE=function(L,I,F,V){L=+L,I>>>=0,V||N(this,L,I,F,(V=Math.pow(2,8*F-1))-1,-V);var J=F-1,le=1,ce=0;for(this[I+J]=255&L;0<=--J&&(le*=256);)L<0&&ce===0&&this[I+J+1]!==0&&(ce=1),this[I+J]=(L/le>>0)-ce&255;return I+F},s.prototype.writeInt8=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,1,127,-128),this[I]=255&(L=L<0?255+L+1:L),I+1},s.prototype.writeInt16LE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,2,32767,-32768),this[I]=255&L,this[I+1]=L>>>8,I+2},s.prototype.writeInt16BE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,2,32767,-32768),this[I]=L>>>8,this[I+1]=255&L,I+2},s.prototype.writeInt32LE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,4,2147483647,-2147483648),this[I]=255&L,this[I+1]=L>>>8,this[I+2]=L>>>16,this[I+3]=L>>>24,I+4},s.prototype.writeInt32BE=function(L,I,F){return L=+L,I>>>=0,F||N(this,L,I,4,2147483647,-2147483648),this[I]=(L=L<0?4294967295+L+1:L)>>>24,this[I+1]=L>>>16,this[I+2]=L>>>8,this[I+3]=255&L,I+4},s.prototype.writeFloatLE=function(L,I,F){return D(this,L,I,!0,F)},s.prototype.writeFloatBE=function(L,I,F){return D(this,L,I,!1,F)},s.prototype.writeDoubleLE=function(L,I,F){return U(this,L,I,!0,F)},s.prototype.writeDoubleBE=function(L,I,F){return U(this,L,I,!1,F)},s.prototype.copy=function(L,I,F,V){if(!s.isBuffer(L))throw new TypeError("argument should be a Buffer");if(F=F||0,V||V===0||(V=this.length),I>=L.length&&(I=L.length),(V=0<V&&V<F?F:V)===F||L.length===0||this.length===0)return 0;if((I=I||0)<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length);var J=(V=L.length-I<V-F?L.length-I+F:V)-F;if(this===L&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(I,F,V);else if(this===L&&F<I&&I<V)for(var le=J-1;0<=le;--le)L[le+I]=this[le+F];else Uint8Array.prototype.set.call(L,this.subarray(F,V),I);return J},s.prototype.fill=function(L,I,F,V){if(typeof L=="string"){if(typeof I=="string"?(V=I,I=0,F=this.length):typeof F=="string"&&(V=F,F=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!s.isEncoding(V))throw new TypeError("Unknown encoding: "+V);var J;L.length===1&&(J=L.charCodeAt(0),(V==="utf8"&&J<128||V==="latin1")&&(L=J))}else typeof L=="number"?L&=255:typeof L=="boolean"&&(L=Number(L));if(I<0||this.length<I||this.length<F)throw new RangeError("Out of range index");var le;if(!(F<=I))if(I>>>=0,F=F===void 0?this.length:F>>>0,typeof(L=L||0)=="number")for(le=I;le<F;++le)this[le]=L;else{var ce=s.isBuffer(L)?L:s.from(L,V),ue=ce.length;if(ue===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(le=0;le<F-I;++le)this[le+I]=ce[le%ue]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function H(L,I){I=I||1/0;for(var F,V=L.length,J=null,le=[],ce=0;ce<V;++ce){if(55295<(F=L.charCodeAt(ce))&&F<57344){if(!J){if(56319<F){-1<(I-=3)&&le.push(239,191,189);continue}if(ce+1===V){-1<(I-=3)&&le.push(239,191,189);continue}J=F;continue}if(F<56320){-1<(I-=3)&&le.push(239,191,189),J=F;continue}F=65536+(J-55296<<10|F-56320)}else J&&-1<(I-=3)&&le.push(239,191,189);if(J=null,F<128){if(--I<0)break;le.push(F)}else if(F<2048){if((I-=2)<0)break;le.push(F>>6|192,63&F|128)}else if(F<65536){if((I-=3)<0)break;le.push(F>>12|224,F>>6&63|128,63&F|128)}else{if(!(F<1114112))throw new Error("Invalid code point");if((I-=4)<0)break;le.push(F>>18|240,F>>12&63|128,F>>6&63|128,63&F|128)}}return le}function W(L){return i.toByteArray(function(I){if((I=(I=I.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;I.length%4!=0;)I+="=";return I}(L))}function X(L,I,F,V){for(var J=0;J<V&&!(J+F>=I.length||J>=L.length);++J)I[J+F]=L[J];return J}function Z(L,I){return L instanceof I||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===I.name}function q(L){return L!=L}var ee=function(){for(var L="0123456789abcdef",I=new Array(256),F=0;F<16;++F)for(var V=16*F,J=0;J<16;++J)I[V+J]=L[F]+L[J];return I}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:238}],5:[function(e,u,d){u.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},{}],6:[function(e,u,d){var o=e("../internals/is-object");u.exports=function(i){if(o(i)||i===null)return i;throw TypeError("Can't set "+String(i)+" as a prototype")}},{"../internals/is-object":74}],7:[function(n,u,d){var o=n("../internals/well-known-symbol"),i=n("../internals/object-create"),n=n("../internals/object-define-property"),a=o("unscopables"),f=Array.prototype;f[a]==null&&n.f(f,a,{configurable:!0,value:i(null)}),u.exports=function(p){f[a][p]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(e,u,d){var o=e("../internals/string-multibyte").charAt;u.exports=function(i,n,a){return n+(a?o(i,n).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,u,d){u.exports=function(o,i,n){if(o instanceof i)return o;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},{}],10:[function(e,u,d){var o=e("../internals/is-object");u.exports=function(i){if(o(i))return i;throw TypeError(String(i)+" is not an object")}},{"../internals/is-object":74}],11:[function(e,u,d){u.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(O,u,d){function o(U){return p(U)&&s(D,l(U))}var i,n=O("../internals/array-buffer-native"),a=O("../internals/descriptors"),f=O("../internals/global"),p=O("../internals/is-object"),s=O("../internals/has"),l=O("../internals/classof"),c=O("../internals/create-non-enumerable-property"),h=O("../internals/redefine"),m=O("../internals/object-define-property").f,g=O("../internals/object-get-prototype-of"),y=O("../internals/object-set-prototype-of"),R=O("../internals/well-known-symbol"),O=O("../internals/uid"),_=f.Int8Array,x=_&&_.prototype,w=f.Uint8ClampedArray,w=w&&w.prototype,j=_&&g(_),E=x&&g(x),T=Object.prototype,A=T.isPrototypeOf,R=R("toStringTag"),P=O("TYPED_ARRAY_TAG"),N=n&&!!y&&l(f.opera)!=="Opera",O=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(i in D)f[i]||(N=!1);if((!N||typeof j!="function"||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},N))for(i in D)f[i]&&y(f[i],j);if((!N||!E||E===T)&&(E=j.prototype,N))for(i in D)f[i]&&y(f[i].prototype,E);if(N&&g(w)!==E&&y(w,E),a&&!s(E,R))for(i in O=!0,m(E,R,{get:function(){return p(this)?this[P]:void 0}}),D)f[i]&&c(f[i],P,i);u.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:O&&P,aTypedArray:function(U){if(o(U))return U;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(U){if(y){if(A.call(j,U))return U}else for(var Y in D)if(s(D,i)&&(Y=f[Y],Y&&(U===Y||A.call(Y,U))))return U;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(U,Y,H){if(a){if(H)for(var W in D)W=f[W],W&&s(W.prototype,U)&&delete W.prototype[U];E[U]&&!H||h(E,U,!H&&N&&x[U]||Y)}},exportTypedArrayStaticMethod:function(U,Y,H){var W,X;if(a){if(y){if(H)for(W in D)(X=f[W])&&s(X,U)&&delete X[U];if(j[U]&&!H)return;try{return h(j,U,!H&&N&&_[U]||Y)}catch{}}for(W in D)!(X=f[W])||X[U]&&!H||h(X,U,Y)}},isView:function(U){return U=l(U),U==="DataView"||s(D,U)},isTypedArray:o,TypedArray:j,TypedArrayPrototype:E}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(F,u,d){function o(ie){return[255&ie]}function i(ie){return[255&ie,ie>>8&255]}function n(ie){return[255&ie,ie>>8&255,ie>>16&255,ie>>24&255]}function a(ie){return ie[3]<<24|ie[2]<<16|ie[1]<<8|ie[0]}function f(ie){return le(ie,23,4)}function p(ie){return le(ie,52,8)}function s(ie,xe){O(ie[Z],xe,{get:function(){return Y(this)[xe]}})}function l(Oe,xe,Ie,Ee){if(Ie=T(Ie),Oe=Y(Oe),Ie+xe>Oe.byteLength)throw J(q);var Se=Y(Oe.buffer).bytes,Ie=Ie+Oe.byteOffset,Oe=Se.slice(Ie,Ie+xe);return Ee?Oe:Oe.reverse()}function c(ie,xe,Me,Ee,Se,Ie){if(Me=T(Me),ie=Y(ie),Me+xe>ie.byteLength)throw J(q);for(var Oe=Y(ie.buffer).bytes,Xe=Me+ie.byteOffset,$=Ee(+Se),se=0;se<xe;se++)Oe[Xe+se]=$[Ie?se:xe-se-1]}var h=F("../internals/global"),m=F("../internals/descriptors"),g=F("../internals/array-buffer-native"),y=F("../internals/create-non-enumerable-property"),_=F("../internals/redefine-all"),x=F("../internals/fails"),w=F("../internals/an-instance"),j=F("../internals/to-integer"),E=F("../internals/to-length"),T=F("../internals/to-index"),A=F("../internals/ieee754"),R=F("../internals/object-get-prototype-of"),P=F("../internals/object-set-prototype-of"),N=F("../internals/object-get-own-property-names").f,O=F("../internals/object-define-property").f,D=F("../internals/array-fill"),U=F("../internals/set-to-string-tag"),F=F("../internals/internal-state"),Y=F.get,H=F.set,W="ArrayBuffer",X="DataView",Z="prototype",q="Wrong index",ee=h[W],L=ee,I=h[X],F=I&&I[Z],V=Object.prototype,J=h.RangeError,le=A.pack,ce=A.unpack;if(g){if(!x(function(){ee(1)})||!x(function(){new ee(-1)})||x(function(){return new ee,new ee(1.5),new ee(NaN),ee.name!=W})){for(var ue,h=(L=function(Me){return w(this,L),new ee(T(Me))})[Z]=ee[Z],re=N(ee),de=0;re.length>de;)(ue=re[de++])in L||y(L,ue,ee[ue]);h.constructor=L}P&&R(F)!==V&&P(F,V);var A=new I(new L(2)),be=F.setInt8;A.setInt8(0,2147483648),A.setInt8(1,2147483649),!A.getInt8(0)&&A.getInt8(1)||_(F,{setInt8:function(xe,Me){be.call(this,xe,Me<<24>>24)},setUint8:function(xe,Me){be.call(this,xe,Me<<24>>24)}},{unsafe:!0})}else L=function(ie){w(this,L,W),ie=T(ie),H(this,{bytes:D.call(new Array(ie),0),byteLength:ie}),m||(this.byteLength=ie)},I=function(ie,Se,Me){w(this,I,X),w(ie,L,X);var Ee=Y(ie).byteLength,Se=j(Se);if(Se<0||Ee<Se)throw J("Wrong offset");if(Ee<Se+(Me=Me===void 0?Ee-Se:E(Me)))throw J("Wrong length");H(this,{buffer:ie,byteLength:Me,byteOffset:Se}),m||(this.buffer=ie,this.byteLength=Me,this.byteOffset=Se)},m&&(s(L,"byteLength"),s(I,"buffer"),s(I,"byteLength"),s(I,"byteOffset")),_(I[Z],{getInt8:function(ie){return l(this,1,ie)[0]<<24>>24},getUint8:function(ie){return l(this,1,ie)[0]},getInt16:function(ie){return ie=l(this,2,ie,1<arguments.length?arguments[1]:void 0),(ie[1]<<8|ie[0])<<16>>16},getUint16:function(ie){return ie=l(this,2,ie,1<arguments.length?arguments[1]:void 0),ie[1]<<8|ie[0]},getInt32:function(ie){return a(l(this,4,ie,1<arguments.length?arguments[1]:void 0))},getUint32:function(ie){return a(l(this,4,ie,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ie){return ce(l(this,4,ie,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ie){return ce(l(this,8,ie,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ie,xe){c(this,1,ie,o,xe)},setUint8:function(ie,xe){c(this,1,ie,o,xe)},setInt16:function(ie,xe){c(this,2,ie,i,xe,2<arguments.length?arguments[2]:void 0)},setUint16:function(ie,xe){c(this,2,ie,i,xe,2<arguments.length?arguments[2]:void 0)},setInt32:function(ie,xe){c(this,4,ie,n,xe,2<arguments.length?arguments[2]:void 0)},setUint32:function(ie,xe){c(this,4,ie,n,xe,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ie,xe){c(this,4,ie,f,xe,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ie,xe){c(this,8,ie,p,xe,2<arguments.length?arguments[2]:void 0)}});U(L,W),U(I,X),u.exports={ArrayBuffer:L,DataView:I}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(e,u,d){var o=e("../internals/to-object"),i=e("../internals/to-absolute-index"),n=e("../internals/to-length"),a=Math.min;u.exports=[].copyWithin||function(m,p){var s=o(this),l=n(s.length),c=i(m,l),h=i(p,l),m=2<arguments.length?arguments[2]:void 0,g=a((m===void 0?l:i(m,l))-h,l-c),y=1;for(h<c&&c<h+g&&(y=-1,h+=g-1,c+=g-1);0<g--;)h in s?s[c]=s[h]:delete s[c],c+=y,h+=y;return s}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(e,u,d){var o=e("../internals/to-object"),i=e("../internals/to-absolute-index"),n=e("../internals/to-length");u.exports=function(a){for(var f=o(this),p=n(f.length),l=arguments.length,s=i(1<l?arguments[1]:void 0,p),l=2<l?arguments[2]:void 0,c=l===void 0?p:i(l,p);s<c;)f[s++]=a;return f}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(n,u,d){var o=n("../internals/array-iteration").forEach,i=n("../internals/array-method-is-strict"),n=n("../internals/array-method-uses-to-length"),i=i("forEach"),n=n("forEach");u.exports=i&&n?[].forEach:function(a){return o(this,a,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,u,d){var o=e("../internals/function-bind-context"),i=e("../internals/to-object"),n=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),f=e("../internals/to-length"),p=e("../internals/create-property"),s=e("../internals/get-iterator-method");u.exports=function(w){var c,h,m,g,y,_,x=i(w),w=typeof this=="function"?this:Array,j=arguments.length,E=1<j?arguments[1]:void 0,T=E!==void 0,A=s(x),R=0;if(T&&(E=o(E,2<j?arguments[2]:void 0,2)),A==null||w==Array&&a(A))for(h=new w(c=f(x.length));R<c;R++)_=T?E(x[R],R):x[R],p(h,R,_);else for(y=(g=A.call(x)).next,h=new w;!(m=y.call(g)).done;R++)_=T?n(g,E,[m.value,R],!0):m.value,p(h,R,_);return h.length=R,h}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(e,u,d){function o(f){return function(p,s,l){var c,h=i(p),m=n(h.length),g=a(l,m);if(f&&s!=s){for(;g<m;)if((c=h[g++])!=c)return!0}else for(;g<m;g++)if((f||g in h)&&h[g]===s)return f||g||0;return!f&&-1}}var i=e("../internals/to-indexed-object"),n=e("../internals/to-length"),a=e("../internals/to-absolute-index");u.exports={includes:o(!0),indexOf:o(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(e,u,d){function o(l){var c=l==1,h=l==2,m=l==3,g=l==4,y=l==6,_=l==5||y;return function(x,w,j,E){for(var T,A,R=a(x),P=n(R),N=i(w,j,3),O=f(P.length),D=0,w=E||p,U=c?w(x,O):h?w(x,0):void 0;D<O;D++)if((_||D in P)&&(A=N(T=P[D],D,R),l)){if(c)U[D]=A;else if(A)switch(l){case 3:return!0;case 5:return T;case 6:return D;case 2:s.call(U,T)}else if(g)return!1}return y?-1:m||g?g:U}}var i=e("../internals/function-bind-context"),n=e("../internals/indexed-object"),a=e("../internals/to-object"),f=e("../internals/to-length"),p=e("../internals/array-species-create"),s=[].push;u.exports={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(l,u,d){var o=l("../internals/to-indexed-object"),i=l("../internals/to-integer"),n=l("../internals/to-length"),s=l("../internals/array-method-is-strict"),l=l("../internals/array-method-uses-to-length"),a=Math.min,f=[].lastIndexOf,p=!!f&&1/[1].lastIndexOf(1,-0)<0,s=s("lastIndexOf"),l=l("indexOf",{ACCESSORS:!0,1:0});u.exports=p||!s||!l?function(c){if(p)return f.apply(this,arguments)||0;var h=o(this),m=n(h.length),g=m-1;for((g=1<arguments.length?a(g,i(arguments[1])):g)<0&&(g=m+g);0<=g;g--)if(g in h&&h[g]===c)return g||0;return-1}:f},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(e,u,d){var o=e("../internals/fails"),i=e("../internals/well-known-symbol"),n=e("../internals/engine-v8-version"),a=i("species");u.exports=function(f){return 51<=n||!o(function(){var p=[];return(p.constructor={})[a]=function(){return{foo:1}},p[f](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":146}],22:[function(e,u,d){var o=e("../internals/fails");u.exports=function(i,n){var a=[][i];return!!a&&o(function(){a.call(null,n||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(e,u,d){function o(s){throw s}var i=e("../internals/descriptors"),n=e("../internals/fails"),a=e("../internals/has"),f=Object.defineProperty,p={};u.exports=function(s,l){var c,h,m,g;return a(p,s)?p[s]:(c=[][s],h=!!a(l=l||{},"ACCESSORS")&&l.ACCESSORS,m=a(l,0)?l[0]:o,g=a(l,1)?l[1]:void 0,p[s]=!!c&&!n(function(){if(h&&!i)return!0;var y={length:-1};h?f(y,1,{enumerable:!0,get:o}):y[1]=1,c.call(y,m,g)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(e,u,d){function o(p){return function(s,l,c,h){i(l);var m=n(s),g=a(m),y=f(m.length),_=p?y-1:0,x=p?-1:1;if(c<2)for(;;){if(_ in g){h=g[_],_+=x;break}if(_+=x,p?_<0:y<=_)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=_:_<y;_+=x)_ in g&&(h=l(h,g[_],_,m));return h}}var i=e("../internals/a-function"),n=e("../internals/to-object"),a=e("../internals/indexed-object"),f=e("../internals/to-length");u.exports={left:o(!1),right:o(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(e,u,d){var o=e("../internals/is-object"),i=e("../internals/is-array"),n=e("../internals/well-known-symbol")("species");u.exports=function(a,f){var p;return new((p=i(a)&&(typeof(p=a.constructor)=="function"&&(p===Array||i(p.prototype))||o(p)&&(p=p[n])===null)?void 0:p)===void 0?Array:p)(f===0?0:f)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(e,u,d){var o=e("../internals/an-object");u.exports=function(i,n,a,f){try{return f?n(o(a)[0],a[1]):n(a)}catch(p){throw f=i.return,f!==void 0&&o(f.call(i)),p}}},{"../internals/an-object":10}],27:[function(e,u,d){var o=e("../internals/well-known-symbol")("iterator"),i=!1;try{var n=0,a={next:function(){return{done:!!n++}},return:function(){i=!0}};a[o]=function(){return this},Array.from(a,function(){throw 2})}catch{}u.exports=function(f,p){if(!p&&!i)return!1;var s=!1;try{var l={};l[o]=function(){return{next:function(){return{done:s=!0}}}},f(l)}catch{}return s}},{"../internals/well-known-symbol":146}],28:[function(e,u,d){var o={}.toString;u.exports=function(i){return o.call(i).slice(8,-1)}},{}],29:[function(e,u,d){var o=e("../internals/to-string-tag-support"),i=e("../internals/classof-raw"),n=e("../internals/well-known-symbol")("toStringTag"),a=i(function(){return arguments}())=="Arguments";u.exports=o?i:function(f){var p;return f===void 0?"Undefined":f===null?"Null":typeof(p=function(s,l){try{return s[l]}catch{}}(f=Object(f),n))=="string"?p:a?i(f):(p=i(f))=="Object"&&typeof f.callee=="function"?"Arguments":p}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(m,u,d){var o=m("../internals/object-define-property").f,i=m("../internals/object-create"),n=m("../internals/redefine-all"),a=m("../internals/function-bind-context"),f=m("../internals/an-instance"),p=m("../internals/iterate"),s=m("../internals/define-iterator"),l=m("../internals/set-species"),c=m("../internals/descriptors"),h=m("../internals/internal-metadata").fastKey,m=m("../internals/internal-state"),g=m.set,y=m.getterFor;u.exports={getConstructor:function(_,x,w,j){function E(P,N,O){var D,U=R(P),Y=T(P,N);return Y?Y.value=O:(U.last=Y={index:D=h(N,!0),key:N,value:O,previous:N=U.last,next:void 0,removed:!1},U.first||(U.first=Y),N&&(N.next=Y),c?U.size++:P.size++,D!=="F"&&(U.index[D]=Y)),P}function T(D,N){var O,D=R(D),U=h(N);if(U!=="F")return D.index[U];for(O=D.first;O;O=O.next)if(O.key==N)return O}var A=_(function(P,N){f(P,A,x),g(P,{type:x,index:i(null),first:void 0,last:void 0,size:0}),c||(P.size=0),N!=null&&p(N,P[j],P,w)}),R=y(x);return n(A.prototype,{clear:function(){for(var P=R(this),N=P.index,O=P.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=void 0),delete N[O.index],O=O.next;P.first=P.last=void 0,c?P.size=0:this.size=0},delete:function(U){var N,O,D=R(this),U=T(this,U);return U&&(N=U.next,O=U.previous,delete D.index[U.index],U.removed=!0,O&&(O.next=N),N&&(N.previous=O),D.first==U&&(D.first=N),D.last==U&&(D.last=O),c?D.size--:this.size--),!!U},forEach:function(P){for(var N,O=R(this),D=a(P,1<arguments.length?arguments[1]:void 0,3);N=N?N.next:O.first;)for(D(N.value,N.key,this);N&&N.removed;)N=N.previous},has:function(P){return!!T(this,P)}}),n(A.prototype,w?{get:function(P){return P=T(this,P),P&&P.value},set:function(P,N){return E(this,P===0?0:P,N)}}:{add:function(P){return E(this,P=P===0?0:P,P)}}),c&&o(A.prototype,"size",{get:function(){return R(this).size}}),A},setStrong:function(_,x,w){var j=x+" Iterator",E=y(x),T=y(j);s(_,x,function(A,R){g(this,{type:j,target:A,state:E(A),kind:R,last:void 0})},function(){for(var A=T(this),R=A.kind,P=A.last;P&&P.removed;)P=P.previous;return A.target&&(A.last=P=P?P.next:A.state.first)?R=="keys"?{value:P.key,done:!1}:R=="values"?{value:P.value,done:!1}:{value:[P.key,P.value],done:!1}:{value:A.target=void 0,done:!0}},w?"entries":"values",!w,!0),l(x)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(g,u,d){function o(E){return E.frozen||(E.frozen=new i)}function i(){this.entries=[]}function n(E,T){return x(E.entries,function(A){return A[0]===T})}var a=g("../internals/redefine-all"),f=g("../internals/internal-metadata").getWeakData,p=g("../internals/an-object"),s=g("../internals/is-object"),l=g("../internals/an-instance"),c=g("../internals/iterate"),h=g("../internals/array-iteration"),m=g("../internals/has"),g=g("../internals/internal-state"),y=g.set,_=g.getterFor,x=h.find,w=h.findIndex,j=0;i.prototype={get:function(E){if(E=n(this,E),E)return E[1]},has:function(E){return!!n(this,E)},set:function(E,T){var A=n(this,E);A?A[1]=T:this.entries.push([E,T])},delete:function(E){var T=w(this.entries,function(A){return A[0]===E});return~T&&this.entries.splice(T,1),!!~T}},u.exports={getConstructor:function(E,T,A,R){function P(D,U,Y){var H=O(D),W=f(p(U),!0);return W===!0?o(H).set(U,Y):W[H.id]=Y,D}var N=E(function(D,U){l(D,N,T),y(D,{type:T,id:j++,frozen:void 0}),U!=null&&c(U,D[R],D,A)}),O=_(T);return a(N.prototype,{delete:function(D){var U,Y=O(this);return!!s(D)&&((U=f(D))===!0?o(Y).delete(D):U&&m(U,Y.id)&&delete U[Y.id])},has:function(D){var U,Y=O(this);return!!s(D)&&((U=f(D))===!0?o(Y).has(D):U&&m(U,Y.id))}}),a(N.prototype,A?{get:function(D){var U,Y=O(this);if(s(D))return(U=f(D))===!0?o(Y).get(D):U?U[Y.id]:void 0},set:function(D,U){return P(this,D,U)}}:{add:function(D){return P(this,D,!0)}}),N}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/global"),n=e("../internals/is-forced"),a=e("../internals/redefine"),f=e("../internals/internal-metadata"),p=e("../internals/iterate"),s=e("../internals/an-instance"),l=e("../internals/is-object"),c=e("../internals/fails"),h=e("../internals/check-correctness-of-iteration"),m=e("../internals/set-to-string-tag"),g=e("../internals/inherit-if-required");u.exports=function(y,_,x){function w(W){var X=U[W];a(U,W,W=="add"?function(Z){return X.call(this,Z===0?0:Z),this}:W=="delete"?function(Z){return!(N&&!l(Z))&&X.call(this,Z===0?0:Z)}:W=="get"?function(Z){return N&&!l(Z)?void 0:X.call(this,Z===0?0:Z)}:W=="has"?function(Z){return!(N&&!l(Z))&&X.call(this,Z===0?0:Z)}:function(Z,q){return X.call(this,Z===0?0:Z,q),this})}var j,E,T,A,R,P=y.indexOf("Map")!==-1,N=y.indexOf("Weak")!==-1,O=P?"set":"add",D=i[y],U=D&&D.prototype,Y=D,H={};return n(y,typeof D!="function"||!(N||U.forEach&&!c(function(){new D().entries().next()})))?(Y=x.getConstructor(_,y,P,O),f.REQUIRED=!0):n(y,!0)&&(E=(j=new Y)[O](N?{}:-0,1)!=j,T=c(function(){j.has(1)}),A=h(function(W){new D(W)}),R=!N&&c(function(){for(var W=new D,X=5;X--;)W[O](X,X);return!W.has(-0)}),A||(((Y=_(function(W,X){return s(W,Y,y),W=g(new D,W,Y),X!=null&&p(X,W[O],W,P),W})).prototype=U).constructor=Y),(T||R)&&(w("delete"),w("has"),P&&w("get")),(R||E)&&w(O),N&&U.clear&&delete U.clear),H[y]=Y,o({global:!0,forced:Y!=D},H),m(Y,y),N||x.setStrong(Y,y,P),Y}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(e,u,d){var o=e("../internals/has"),i=e("../internals/own-keys"),n=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");u.exports=function(f,p){for(var s=i(p),l=a.f,c=n.f,h=0;h<s.length;h++){var m=s[h];o(f,m)||l(f,m,c(p,m))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(e,u,d){var o=e("../internals/well-known-symbol")("match");u.exports=function(i){var n=/./;try{"/./"[i](n)}catch{try{return n[o]=!1,"/./"[i](n)}catch{}}return!1}},{"../internals/well-known-symbol":146}],35:[function(e,u,d){e=e("../internals/fails"),u.exports=!e(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":51}],36:[function(e,u,d){var o=e("../internals/require-object-coercible"),i=/"/g;u.exports=function(s,a,f,p){var s=String(o(s)),l="<"+a;return f!==""&&(l+=" "+f+'="'+String(p).replace(i,"&quot;")+'"'),l+">"+s+"</"+a+">"}},{"../internals/require-object-coercible":113}],37:[function(e,u,d){function o(){return this}var i=e("../internals/iterators-core").IteratorPrototype,n=e("../internals/object-create"),a=e("../internals/create-property-descriptor"),f=e("../internals/set-to-string-tag"),p=e("../internals/iterators");u.exports=function(s,l,c){return l+=" Iterator",s.prototype=n(i,{next:a(1,c)}),f(s,l,!1,!0),p[l]=o,s}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/object-define-property"),n=e("../internals/create-property-descriptor");u.exports=o?function(a,f,p){return i.f(a,f,n(1,p))}:function(a,f,p){return a[f]=p,a}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(e,u,d){u.exports=function(o,i){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:i}}},{}],40:[function(e,u,d){var o=e("../internals/to-primitive"),i=e("../internals/object-define-property"),n=e("../internals/create-property-descriptor");u.exports=function(a,f,p){f=o(f),f in a?i.f(a,f,n(0,p)):a[f]=p}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":138}],41:[function(g,u,d){function o(){return this}var i=g("../internals/export"),n=g("../internals/create-iterator-constructor"),a=g("../internals/object-get-prototype-of"),f=g("../internals/object-set-prototype-of"),p=g("../internals/set-to-string-tag"),s=g("../internals/create-non-enumerable-property"),l=g("../internals/redefine"),c=g("../internals/well-known-symbol"),h=g("../internals/is-pure"),m=g("../internals/iterators"),g=g("../internals/iterators-core"),y=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,x=c("iterator"),w="values",j="entries";u.exports=function(E,T,A,H,P,N,O){n(A,T,H);function D(L){if(L===P&&q)return q;if(!_&&L in X)return X[L];switch(L){case"keys":case w:case j:return function(){return new A(this,L)}}return function(){return new A(this)}}var U,Y,H=T+" Iterator",W=!1,X=E.prototype,Z=X[x]||X["@@iterator"]||P&&X[P],q=!_&&Z||D(P),ee=T=="Array"&&X.entries||Z;if(ee&&(ee=a(ee.call(new E)),y!==Object.prototype&&ee.next&&(h||a(ee)===y||(f?f(ee,y):typeof ee[x]!="function"&&s(ee,x,o)),p(ee,H,!0,!0),h&&(m[H]=o))),P==w&&Z&&Z.name!==w&&(W=!0,q=function(){return Z.call(this)}),h&&!O||X[x]===q||s(X,x,q),m[T]=q,P)if(U={values:D(w),keys:N?q:D("keys"),entries:D(j)},O)for(Y in U)!_&&!W&&Y in X||l(X,Y,U[Y]);else i({target:T,proto:!0,forced:_||W},U);return U}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],42:[function(e,u,d){var o=e("../internals/path"),i=e("../internals/has"),n=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;u.exports=function(f){var p=o.Symbol||(o.Symbol={});i(p,f)||a(p,f,{value:n.f(f)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],43:[function(e,u,d){e=e("../internals/fails"),u.exports=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(i,u,d){var o=i("../internals/global"),i=i("../internals/is-object"),n=o.document,a=i(n)&&i(n.createElement);u.exports=function(f){return a?n.createElement(f):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(e,u,d){u.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(e,u,d){e=e("../internals/engine-user-agent"),u.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e)},{"../internals/engine-user-agent":47}],47:[function(e,u,d){e=e("../internals/get-built-in"),u.exports=e("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(n,u,d){var o,i,a=n("../internals/global"),n=n("../internals/engine-user-agent"),a=a.process,a=a&&a.versions,a=a&&a.v8;a?i=(o=a.split("."))[0]+o[1]:n&&(!(o=n.match(/Edge\/(\d+)/))||74<=o[1])&&(o=n.match(/Chrome\/(\d+)/))&&(i=o[1]),u.exports=i&&+i},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(e,u,d){u.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(e,u,d){var o=e("../internals/global"),i=e("../internals/object-get-own-property-descriptor").f,n=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),f=e("../internals/set-global"),p=e("../internals/copy-constructor-properties"),s=e("../internals/is-forced");u.exports=function(l,c){var h,m,g,y=l.target,_=l.global,x=l.stat,w=_?o:x?o[y]||f(y,{}):(o[y]||{}).prototype;if(w)for(h in c){if(m=c[h],g=l.noTargetGet?(g=i(w,h))&&g.value:w[h],!s(_?h:y+(x?".":"#")+h,l.forced)&&g!==void 0){if(typeof m==typeof g)continue;p(m,g)}(l.sham||g&&g.sham)&&n(m,"sham",!0),a(w,h,m,l)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(e,u,d){u.exports=function(o){try{return!!o()}catch{return!0}}},{}],52:[function(c,u,d){c("../modules/es.regexp.exec");var o=c("../internals/redefine"),i=c("../internals/fails"),n=c("../internals/well-known-symbol"),a=c("../internals/regexp-exec"),f=c("../internals/create-non-enumerable-property"),p=n("species"),s=!i(function(){var g=/./;return g.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(g,"$<a>")!=="7"}),l="a".replace(/./,"$0")==="$0",c=n("replace"),h=!!/./[c]&&/./[c]("a","$0")==="",m=!i(function(){var y=/(?:)/,g=y.exec,y=(y.exec=function(){return g.apply(this,arguments)},"ab".split(y));return y.length!==2||y[0]!=="a"||y[1]!=="b"});u.exports=function(g,y,_,x){var w,j,E=n(g),T=!i(function(){var R={};return R[E]=function(){return 7},""[g](R)!=7}),A=T&&!i(function(){var R=!1,P=/a/;return g==="split"&&((P={constructor:{}}).constructor[p]=function(){return P},P.flags="",P[E]=/./[E]),P.exec=function(){return R=!0,null},P[E](""),!R});T&&A&&(g!=="replace"||s&&l&&!h)&&(g!=="split"||m)||(w=/./[E],_=(A=_(E,""[g],function(R,P,N,O,D){return P.exec===a?T&&!D?{done:!0,value:w.call(P,N,O)}:{done:!0,value:R.call(N,P,O)}:{done:!1}},{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}))[0],j=A[1],o(String.prototype,g,_),o(RegExp.prototype,E,y==2?function(R,P){return j.call(R,this,P)}:function(R){return j.call(R,this)})),x&&f(RegExp.prototype[E],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],53:[function(e,u,d){e=e("../internals/fails"),u.exports=!e(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(e,u,d){var o=e("../internals/a-function");u.exports=function(i,n,a){if(o(i),n===void 0)return i;switch(a){case 0:return function(){return i.call(n)};case 1:return function(f){return i.call(n,f)};case 2:return function(f,p){return i.call(n,f,p)};case 3:return function(f,p,s){return i.call(n,f,p,s)}}return function(){return i.apply(n,arguments)}}},{"../internals/a-function":5}],55:[function(e,u,d){var o=e("../internals/a-function"),i=e("../internals/is-object"),n=[].slice,a={};u.exports=Function.bind||function(f){var p=o(this),s=n.call(arguments,1),l=function(){var c=s.concat(n.call(arguments));if(this instanceof l){var h=p,m=c.length,g=c;if(!(m in a)){for(var y=[],_=0;_<m;_++)y[_]="a["+_+"]";a[m]=Function("C,a","return new C("+y.join(",")+")")}return a[m](h,g)}return p.apply(f,c)};return i(p.prototype)&&(l.prototype=p.prototype),l}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,u,d){function o(a){return typeof a=="function"?a:void 0}var i=e("../internals/path"),n=e("../internals/global");u.exports=function(a,f){return arguments.length<2?o(i[a])||o(n[a]):i[a]&&i[a][f]||n[a]&&n[a][f]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,u,d){var o=e("../internals/classof"),i=e("../internals/iterators"),n=e("../internals/well-known-symbol")("iterator");u.exports=function(a){if(a!=null)return a[n]||a["@@iterator"]||i[o(a)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(e,u,d){var o=e("../internals/an-object"),i=e("../internals/get-iterator-method");u.exports=function(n){var a=i(n);if(typeof a!="function")throw TypeError(String(n)+" is not iterable");return o(a.call(n))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,u,d){(function(o){function i(n){return n&&n.Math==Math&&n}u.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof o=="object"&&o)||Function("return this")()}).call(this,typeof io<"u"?io:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(e,u,d){var o={}.hasOwnProperty;u.exports=function(i,n){return o.call(i,n)}},{}],61:[function(e,u,d){u.exports={}},{}],62:[function(e,u,d){var o=e("../internals/global");u.exports=function(i,n){var a=o.console;a&&a.error&&(arguments.length===1?a.error(i):a.error(i,n))}},{"../internals/global":59}],63:[function(e,u,d){e=e("../internals/get-built-in"),u.exports=e("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/fails"),n=e("../internals/document-create-element");u.exports=!o&&!i(function(){return Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(e,u,d){var o=Math.abs,i=Math.pow,n=Math.floor,a=Math.log,f=Math.LN2;u.exports={pack:function(p,s,_){var c,h,m,g=new Array(_),y=8*_-s-1,_=(1<<y)-1,x=_>>1,w=s===23?i(2,-24)-i(2,-77):0,j=p<0||p===0&&1/p<0?1:0,E=0;for((p=o(p))!=p||p===1/0?(h=p!=p?1:0,c=_):(c=n(a(p)/f),p*(m=i(2,-c))<1&&(c--,m*=2),2<=(p+=1<=c+x?w/m:w*i(2,1-x))*m&&(c++,m/=2),_<=c+x?(h=0,c=_):1<=c+x?(h=(p*m-1)*i(2,s),c+=x):(h=p*i(2,x-1)*i(2,s),c=0));8<=s;g[E++]=255&h,h/=256,s-=8);for(c=c<<s|h,y+=s;0<y;g[E++]=255&c,c/=256,y-=8);return g[--E]|=128*j,g},unpack:function(p,s){var l,c=p.length,_=8*c-s-1,h=(1<<_)-1,m=h>>1,g=_-7,y=c-1,_=p[y--],x=127&_;for(_>>=7;0<g;x=256*x+p[y],y--,g-=8);for(l=x&(1<<-g)-1,x>>=-g,g+=s;0<g;l=256*l+p[y],y--,g-=8);if(x===0)x=1-m;else{if(x===h)return l?NaN:_?-1/0:1/0;l+=i(2,s),x-=m}return(_?-1:1)*l*i(2,x-s)}}},{}],66:[function(e,u,d){var o=e("../internals/fails"),i=e("../internals/classof-raw"),n="".split;u.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(a){return i(a)=="String"?n.call(a,""):Object(a)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(e,u,d){var o=e("../internals/is-object"),i=e("../internals/object-set-prototype-of");u.exports=function(n,a,f){return i&&typeof(a=a.constructor)=="function"&&a!==f&&o(a=a.prototype)&&a!==f.prototype&&i(n,a),n}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(o,u,d){var o=o("../internals/shared-store"),i=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(n){return i.call(n)}),u.exports=o.inspectSource},{"../internals/shared-store":119}],69:[function(e,u,d){function o(g){f(g,l,{value:{objectID:"O"+ ++c,weakData:{}}})}var i=e("../internals/hidden-keys"),n=e("../internals/is-object"),a=e("../internals/has"),f=e("../internals/object-define-property").f,p=e("../internals/uid"),s=e("../internals/freezing"),l=p("meta"),c=0,h=Object.isExtensible||function(){return!0},m=u.exports={REQUIRED:!1,fastKey:function(g,y){if(!n(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!a(g,l)){if(!h(g))return"F";if(!y)return"E";o(g)}return g[l].objectID},getWeakData:function(g,y){if(!a(g,l)){if(!h(g))return!0;if(!y)return!1;o(g)}return g[l].weakData},onFreeze:function(g){return s&&m.REQUIRED&&h(g)&&!a(g,l)&&o(g),g}};i[l]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(_,u,d){var o,i,n,a,f,p,s,l,c=_("../internals/native-weak-map"),x=_("../internals/global"),h=_("../internals/is-object"),m=_("../internals/create-non-enumerable-property"),g=_("../internals/has"),y=_("../internals/shared-key"),_=_("../internals/hidden-keys"),x=x.WeakMap;s=c?(o=new x,i=o.get,n=o.has,a=o.set,f=function(w,j){return a.call(o,w,j),j},p=function(w){return i.call(o,w)||{}},function(w){return n.call(o,w)}):(_[l=y("state")]=!0,f=function(w,j){return m(w,l,j),j},p=function(w){return g(w,l)?w[l]:{}},function(w){return g(w,l)}),u.exports={set:f,get:p,has:s,enforce:function(w){return s(w)?p(w):f(w,{})},getterFor:function(w){return function(j){if(h(j)&&(j=p(j)).type===w)return j;throw TypeError("Incompatible receiver, "+w+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,u,d){var o=e("../internals/well-known-symbol"),i=e("../internals/iterators"),n=o("iterator"),a=Array.prototype;u.exports=function(f){return f!==void 0&&(i.Array===f||a[n]===f)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(e,u,d){var o=e("../internals/classof-raw");u.exports=Array.isArray||function(i){return o(i)=="Array"}},{"../internals/classof-raw":28}],73:[function(e,u,d){function o(l,c){return(l=f[a(l)])==s||l!=p&&(typeof c=="function"?i(c):!!c)}var i=e("../internals/fails"),n=/#|\.prototype\./,a=o.normalize=function(l){return String(l).replace(n,".").toLowerCase()},f=o.data={},p=o.NATIVE="N",s=o.POLYFILL="P";u.exports=o},{"../internals/fails":51}],74:[function(e,u,d){u.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},{}],75:[function(e,u,d){u.exports=!1},{}],76:[function(e,u,d){var o=e("../internals/is-object"),i=e("../internals/classof-raw"),n=e("../internals/well-known-symbol")("match");u.exports=function(a){var f;return o(a)&&((f=a[n])!==void 0?!!f:i(a)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(e,u,d){function o(l,c){this.stopped=l,this.result=c}var i=e("../internals/an-object"),n=e("../internals/is-array-iterator-method"),a=e("../internals/to-length"),f=e("../internals/function-bind-context"),p=e("../internals/get-iterator-method"),s=e("../internals/call-with-safe-iteration-closing");(u.exports=function(l,c,h,m,g){var y,_,x,w,j,E,T=f(c,h,m?2:1);if(g)y=l;else{if(typeof(c=p(l))!="function")throw TypeError("Target is not iterable");if(n(c)){for(_=0,x=a(l.length);_<x;_++)if((w=m?T(i(E=l[_])[0],E[1]):T(l[_]))&&w instanceof o)return w;return new o(!1)}y=c.call(l)}for(j=y.next;!(E=j.call(y)).done;)if(typeof(w=s(y,T,E.value,m))=="object"&&w&&w instanceof o)return w;return new o(!1)}).stop=function(l){return new o(!0,l)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(p,u,d){var o,i,n=p("../internals/object-get-prototype-of"),a=p("../internals/create-non-enumerable-property"),f=p("../internals/has"),s=p("../internals/well-known-symbol"),p=p("../internals/is-pure"),s=s("iterator"),l=!1;[].keys&&("next"in(i=[].keys())?(n=n(n(i)))!==Object.prototype&&(o=n):l=!0),o==null&&(o={}),p||f(o,s)||a(o,s,function(){return this}),u.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:l}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(e,u,d){u.exports={}},{}],80:[function(e,u,d){u.exports=Math.sign||function(o){return(o=+o)==0||o!=o?o:o<0?-1:1}},{}],81:[function(m,u,d){var o,i,n,a,f,p,s,l,c=m("../internals/global"),j=m("../internals/object-get-own-property-descriptor").f,w=m("../internals/classof-raw"),h=m("../internals/task").set,m=m("../internals/engine-is-ios"),g=c.MutationObserver||c.WebKitMutationObserver,y=c.process,_=c.Promise,x=w(y)=="process",w=j(c,"queueMicrotask"),j=w&&w.value;j||(o=function(){var E,T;for(x&&(E=y.domain)&&E.exit();i;){T=i.fn,i=i.next;try{T()}catch(A){throw i?a():n=void 0,A}}n=void 0,E&&E.enter()},a=x?function(){y.nextTick(o)}:g&&!m?(f=!0,p=document.createTextNode(""),new g(o).observe(p,{characterData:!0}),function(){p.data=f=!f}):_&&_.resolve?(s=_.resolve(void 0),l=s.then,function(){l.call(s,o)}):function(){h.call(c,o)}),u.exports=j||function(E){E={fn:E,next:void 0},n&&(n.next=E),i||(i=E,a()),n=E}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(e,u,d){e=e("../internals/global"),u.exports=e.Promise},{"../internals/global":59}],83:[function(e,u,d){e=e("../internals/fails"),u.exports=!!Object.getOwnPropertySymbols&&!e(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(e,u,d){var o=e("../internals/fails"),i=e("../internals/well-known-symbol"),n=e("../internals/is-pure"),a=i("iterator");u.exports=!o(function(){var f=new URL("b?a=1&b=2&c=3","http://a"),p=f.searchParams,s="";return f.pathname="c%20d",p.forEach(function(l,c){p.delete("b"),s+=c+l}),n&&!f.toJSON||!p.sort||f.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[a]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||s!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(o,u,d){var i=o("../internals/global"),o=o("../internals/inspect-source"),i=i.WeakMap;u.exports=typeof i=="function"&&/native code/.test(o(i))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,u,d){function o(n){var a,f;this.promise=new n(function(p,s){if(a!==void 0||f!==void 0)throw TypeError("Bad Promise constructor");a=p,f=s}),this.resolve=i(a),this.reject=i(f)}var i=e("../internals/a-function");u.exports.f=function(n){return new o(n)}},{"../internals/a-function":5}],87:[function(e,u,d){var o=e("../internals/is-regexp");u.exports=function(i){if(o(i))throw TypeError("The method doesn't accept regular expressions");return i}},{"../internals/is-regexp":76}],88:[function(e,u,d){var o=e("../internals/global").isFinite;u.exports=Number.isFinite||function(i){return typeof i=="number"&&o(i)}},{"../internals/global":59}],89:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/fails"),n=e("../internals/object-keys"),a=e("../internals/object-get-own-property-symbols"),f=e("../internals/object-property-is-enumerable"),p=e("../internals/to-object"),s=e("../internals/indexed-object"),l=Object.assign,c=Object.defineProperty;u.exports=!l||i(function(){var h,m,g,y;return!(!o||l({b:1},l(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(m={},y="abcdefghijklmnopqrst",(h={})[g=Symbol()]=7,y.split("").forEach(function(_){m[_]=_}),l({},h)[g]!=7||n(l({},m)).join("")!=y)})?function(h,m){for(var g=p(h),y=arguments.length,_=1,x=a.f,w=f.f;_<y;)for(var j,E=s(arguments[_++]),T=x?n(E).concat(x(E)):n(E),A=T.length,R=0;R<A;)j=T[R++],o&&!w.call(E,j)||(g[j]=E[j]);return g}:l},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(c,u,d){function o(){}var i,n=c("../internals/an-object"),a=c("../internals/object-define-properties"),f=c("../internals/enum-bug-keys"),p=c("../internals/hidden-keys"),s=c("../internals/html"),l=c("../internals/document-create-element"),c=c("../internals/shared-key"),h="prototype",m="script",g=c("IE_PROTO"),y=function(x){return"<"+m+">"+x+"</"+m+">"},_=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch{}_=i?((x=i).write(y("")),x.close(),w=x.parentWindow.Object,x=null,w):(x=l("iframe"),w="java"+m+":",x.style.display="none",s.appendChild(x),x.src=String(w),(w=x.contentWindow.document).open(),w.write(y("document.F=Object")),w.close(),w.F);for(var x,w,j=f.length;j--;)delete _[h][f[j]];return _()};p[g]=!0,u.exports=Object.create||function(x,w){var j;return x!==null?(o[h]=n(x),j=new o,o[h]=null,j[g]=x):j=_(),w===void 0?j:a(j,w)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/object-define-property"),n=e("../internals/an-object"),a=e("../internals/object-keys");u.exports=o?Object.defineProperties:function(f,p){n(f);for(var s,l=a(p),c=l.length,h=0;h<c;)i.f(f,s=l[h++],p[s]);return f}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/ie8-dom-define"),n=e("../internals/an-object"),a=e("../internals/to-primitive"),f=Object.defineProperty;d.f=o?f:function(p,s,l){if(n(p),s=a(s,!0),n(l),i)try{return f(p,s,l)}catch{}if("get"in l||"set"in l)throw TypeError("Accessors not supported");return"value"in l&&(p[s]=l.value),p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/object-property-is-enumerable"),n=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),f=e("../internals/to-primitive"),p=e("../internals/has"),s=e("../internals/ie8-dom-define"),l=Object.getOwnPropertyDescriptor;d.f=o?l:function(c,h){if(c=a(c),h=f(h,!0),s)try{return l(c,h)}catch{}if(p(c,h))return n(!i.f.call(c,h),c[h])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(e,u,d){var o=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-names").f,n={}.toString,a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];u.exports.f=function(f){if(!a||n.call(f)!="[object Window]")return i(o(f));try{return i(f)}catch{return a.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(e,u,d){var o=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys").concat("length","prototype");d.f=Object.getOwnPropertyNames||function(n){return o(n,i)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(e,u,d){d.f=Object.getOwnPropertySymbols},{}],97:[function(a,u,d){var o=a("../internals/has"),i=a("../internals/to-object"),n=a("../internals/shared-key"),a=a("../internals/correct-prototype-getter"),f=n("IE_PROTO"),p=Object.prototype;u.exports=a?Object.getPrototypeOf:function(s){return s=i(s),o(s,f)?s[f]:typeof s.constructor=="function"&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?p:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(e,u,d){var o=e("../internals/has"),i=e("../internals/to-indexed-object"),n=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys");u.exports=function(f,p){var s,l=i(f),c=0,h=[];for(s in l)!o(a,s)&&o(l,s)&&h.push(s);for(;p.length>c;)!o(l,s=p[c++])||~n(h,s)||h.push(s);return h}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(e,u,d){var o=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys");u.exports=Object.keys||function(n){return o(n,i)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(e,u,d){var o={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!o.call({1:2},1);d.f=n?function(a){return a=i(this,a),!!a&&a.enumerable}:o},{}],101:[function(e,u,d){var o=e("../internals/an-object"),i=e("../internals/a-possible-prototype");u.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,a=!1,f={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),a=f instanceof Array}catch{}return function(p,s){return o(p),i(s),a?n.call(p,s):p.__proto__=s,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,u,d){var o=e("../internals/to-string-tag-support"),i=e("../internals/classof");u.exports=o?{}.toString:function(){return"[object "+i(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(e,u,d){var o=e("../internals/get-built-in"),i=e("../internals/object-get-own-property-names"),n=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object");u.exports=o("Reflect","ownKeys")||function(f){var p=i.f(a(f)),s=n.f;return s?p.concat(s(f)):p}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,u,d){e=e("../internals/global"),u.exports=e},{"../internals/global":59}],105:[function(e,u,d){u.exports=function(o){try{return{error:!1,value:o()}}catch(i){return{error:!0,value:i}}}},{}],106:[function(e,u,d){var o=e("../internals/an-object"),i=e("../internals/is-object"),n=e("../internals/new-promise-capability");u.exports=function(a,f){return o(a),i(f)&&f.constructor===a?f:((0,(a=n.f(a)).resolve)(f),a.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,u,d){var o=e("../internals/redefine");u.exports=function(i,n,a){for(var f in n)o(i,f,n[f],a);return i}},{"../internals/redefine":108}],108:[function(p,u,d){var o=p("../internals/global"),i=p("../internals/create-non-enumerable-property"),n=p("../internals/has"),a=p("../internals/set-global"),f=p("../internals/inspect-source"),p=p("../internals/internal-state"),s=p.get,l=p.enforce,c=String(String).split("String");(u.exports=function(h,m,g,w){var _=!!w&&!!w.unsafe,x=!!w&&!!w.enumerable,w=!!w&&!!w.noTargetGet;typeof g=="function"&&(typeof m!="string"||n(g,"name")||i(g,"name",m),l(g).source=c.join(typeof m=="string"?m:"")),h===o?x?h[m]=g:a(m,g):(_?!w&&h[m]&&(x=!0):delete h[m],x?h[m]=g:i(h,m,g))})(Function.prototype,"toString",function(){return typeof this=="function"&&s(this).source||f(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,u,d){var o=e("./classof-raw"),i=e("./regexp-exec");u.exports=function(n,a){var f=n.exec;if(typeof f=="function"){if(f=f.call(n,a),typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(o(n)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return i.call(n,a)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(a,u,d){var o,i,n=a("./regexp-flags"),a=a("./regexp-sticky-helpers"),f=RegExp.prototype.exec,p=String.prototype.replace,s=f,l=(o=/a/,i=/b*/g,f.call(o,"a"),f.call(i,"a"),o.lastIndex!==0||i.lastIndex!==0),c=a.UNSUPPORTED_Y||a.BROKEN_CARET,h=/()??/.exec("")[1]!==void 0;u.exports=s=l||h||c?function(m){var g,y,_,x,w=this,j=c&&w.sticky,E=n.call(w),T=w.source,A=0,R=m;return j&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),R=String(m).slice(w.lastIndex),0<w.lastIndex&&(!w.multiline||w.multiline&&m[w.lastIndex-1]!==`
`)&&(T="(?: "+T+")",R=" "+R,A++),y=new RegExp("^(?:"+T+")",E)),h&&(y=new RegExp("^"+T+"$(?!\\s)",E)),l&&(g=w.lastIndex),_=f.call(j?y:w,R),j?_?(_.input=_.input.slice(A),_[0]=_[0].slice(A),_.index=w.lastIndex,w.lastIndex+=_[0].length):w.lastIndex=0:l&&_&&(w.lastIndex=w.global?_.index+_[0].length:g),h&&_&&1<_.length&&p.call(_[0],y,function(){for(x=1;x<arguments.length-2;x++)arguments[x]===void 0&&(_[x]=void 0)}),_}:s},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,u,d){var o=e("../internals/an-object");u.exports=function(){var i=o(this),n="";return i.global&&(n+="g"),i.ignoreCase&&(n+="i"),i.multiline&&(n+="m"),i.dotAll&&(n+="s"),i.unicode&&(n+="u"),i.sticky&&(n+="y"),n}},{"../internals/an-object":10}],112:[function(e,u,d){e=e("./fails");function o(i,n){return RegExp(i,n)}d.UNSUPPORTED_Y=e(function(){var i=o("a","y");return i.lastIndex=2,i.exec("abcd")!=null}),d.BROKEN_CARET=e(function(){var i=o("^r","gy");return i.lastIndex=2,i.exec("str")!=null})},{"./fails":51}],113:[function(e,u,d){u.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},{}],114:[function(e,u,d){u.exports=Object.is||function(o,i){return o===i?o!==0||1/o==1/i:o!=o&&i!=i}},{}],115:[function(e,u,d){var o=e("../internals/global"),i=e("../internals/create-non-enumerable-property");u.exports=function(n,a){try{i(o,n,a)}catch{o[n]=a}return a}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(e,u,d){var o=e("../internals/get-built-in"),i=e("../internals/object-define-property"),n=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),f=n("species");u.exports=function(s){var s=o(s),l=i.f;a&&s&&!s[f]&&l(s,f,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(e,u,d){var o=e("../internals/object-define-property").f,i=e("../internals/has"),n=e("../internals/well-known-symbol")("toStringTag");u.exports=function(a,f,p){a&&!i(a=p?a:a.prototype,n)&&o(a,n,{configurable:!0,value:f})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(e,u,d){var o=e("../internals/shared"),i=e("../internals/uid"),n=o("keys");u.exports=function(a){return n[a]||(n[a]=i(a))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(o,u,d){var n=o("../internals/global"),o=o("../internals/set-global"),i="__core-js_shared__",n=n[i]||o(i,{});u.exports=n},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,u,d){var o=e("../internals/is-pure"),i=e("../internals/shared-store");(u.exports=function(n,a){return i[n]||(i[n]=a!==void 0?a:{})})("versions",[]).push({version:"3.6.5",mode:o?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,u,d){var o=e("../internals/an-object"),i=e("../internals/a-function"),n=e("../internals/well-known-symbol")("species");u.exports=function(p,f){var p=o(p).constructor;return p===void 0||(p=o(p)[n])==null?f:i(p)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(e,u,d){var o=e("../internals/fails");u.exports=function(i){return o(function(){var n=""[i]('"');return n!==n.toLowerCase()||3<n.split('"').length})}},{"../internals/fails":51}],123:[function(e,u,d){function o(a){return function(l,c){var s,l=String(n(l)),c=i(c),h=l.length;return c<0||h<=c?a?"":void 0:(s=l.charCodeAt(c))<55296||56319<s||c+1===h||(h=l.charCodeAt(c+1))<56320||57343<h?a?l.charAt(c):s:a?l.slice(c,c+2):h-56320+(s-55296<<10)+65536}}var i=e("../internals/to-integer"),n=e("../internals/require-object-coercible");u.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(e,u,d){function o(_){return _+22+75*(_<26)}function i(_){var x,w=[],j=(_=function(Z){for(var q=[],ee=0,L=Z.length;ee<L;){var I,F=Z.charCodeAt(ee++);55296<=F&&F<=56319&&ee<L?(64512&(I=Z.charCodeAt(ee++)))==56320?q.push(((1023&F)<<10)+(1023&I)+65536):(q.push(F),ee--):q.push(F)}return q}(_)).length,E=128,T=0,A=72;for(O=0;O<_.length;O++)(x=_[O])<128&&w.push(y(x));var R=w.length,P=R;for(R&&w.push("-");P<j;){for(var N=n,O=0;O<_.length;O++)E<=(x=_[O])&&x<N&&(N=x);var D=P+1;if(N-E>g((n-T)/D))throw RangeError(h);for(T+=(N-E)*D,E=N,O=0;O<_.length;O++){if((x=_[O])<E&&++T>n)throw RangeError(h);if(x==E){for(var U=T,Y=a;;Y+=a){var H=Y<=A?1:A+f<=Y?f:Y-A;if(U<H)break;var W=U-H,X=a-H;w.push(y(o(H+W%X))),U=g(W/X)}w.push(y(o(U))),A=function(Z,q,ee){var L=0;for(Z=ee?g(Z/s):Z>>1,Z+=g(Z/q);m*f>>1<Z;L+=a)Z=g(Z/m);return g(L+(m+1)*Z/(Z+p))}(T,D,P==R),T=0,++P}}++T,++E}return w.join("")}var n=2147483647,a=36,f=26,p=38,s=700,l=/[^\0-\u007E]/,c=/[.\u3002\uFF0E\uFF61]/g,h="Overflow: input needs wider integers to process",m=a-1,g=Math.floor,y=String.fromCharCode;u.exports=function(_){for(var x,w=[],j=_.toLowerCase().replace(c,".").split("."),E=0;E<j.length;E++)x=j[E],w.push(l.test(x)?"xn--"+i(x):x);return w.join(".")}},{}],125:[function(e,u,d){var o=e("../internals/to-integer"),i=e("../internals/require-object-coercible");u.exports="".repeat||function(n){var a=String(i(this)),f="",p=o(n);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(a+=a))1&p&&(f+=a);return f}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(e,u,d){var o=e("../internals/fails"),i=e("../internals/whitespaces");u.exports=function(n){return o(function(){return!!i[n]()||"​᠎"[n]()!="​᠎"||i[n].name!==n})}},{"../internals/fails":51,"../internals/whitespaces":147}],127:[function(n,u,d){function o(p){return function(s){return s=String(i(s)),1&p&&(s=s.replace(a,"")),s=2&p?s.replace(f,""):s}}var i=n("../internals/require-object-coercible"),n="["+n("../internals/whitespaces")+"]",a=RegExp("^"+n+n+"*"),f=RegExp(n+n+"*$");u.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(m,u,d){function o(P){return function(){R(P)}}function i(P){R(P.data)}function n(P){f.postMessage(P+"",g.protocol+"//"+g.host)}var a,f=m("../internals/global"),p=m("../internals/fails"),s=m("../internals/classof-raw"),l=m("../internals/function-bind-context"),c=m("../internals/html"),h=m("../internals/document-create-element"),m=m("../internals/engine-is-ios"),g=f.location,y=f.setImmediate,_=f.clearImmediate,x=f.process,w=f.MessageChannel,j=f.Dispatch,E=0,T={},A="onreadystatechange",R=function(P){var N;T.hasOwnProperty(P)&&(N=T[P],delete T[P],N())};y&&_||(y=function(P){for(var N=[],O=1;O<arguments.length;)N.push(arguments[O++]);return T[++E]=function(){(typeof P=="function"?P:Function(P)).apply(void 0,N)},a(E),E},_=function(P){delete T[P]},s(x)=="process"?a=function(P){x.nextTick(o(P))}:j&&j.now?a=function(P){j.now(o(P))}:w&&!m?(m=(s=new w).port2,s.port1.onmessage=i,a=l(m.postMessage,m,1)):!f.addEventListener||typeof postMessage!="function"||f.importScripts||p(n)||g.protocol==="file:"?a=A in h("script")?function(P){c.appendChild(h("script"))[A]=function(){c.removeChild(this),R(P)}}:function(P){setTimeout(o(P),0)}:(a=n,f.addEventListener("message",i,!1))),u.exports={set:y,clear:_}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(e,u,d){var o=e("../internals/classof-raw");u.exports=function(i){if(typeof i!="number"&&o(i)!="Number")throw TypeError("Incorrect invocation");return+i}},{"../internals/classof-raw":28}],130:[function(e,u,d){var o=e("../internals/to-integer"),i=Math.max,n=Math.min;u.exports=function(a,f){return a=o(a),a<0?i(a+f,0):n(a,f)}},{"../internals/to-integer":133}],131:[function(e,u,d){var o=e("../internals/to-integer"),i=e("../internals/to-length");u.exports=function(a){if(a===void 0)return 0;var a=o(a),f=i(a);if(a!==f)throw RangeError("Wrong length or index");return f}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(e,u,d){var o=e("../internals/indexed-object"),i=e("../internals/require-object-coercible");u.exports=function(n){return o(i(n))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(e,u,d){var o=Math.ceil,i=Math.floor;u.exports=function(n){return isNaN(n=+n)?0:(0<n?i:o)(n)}},{}],134:[function(e,u,d){var o=e("../internals/to-integer"),i=Math.min;u.exports=function(n){return 0<n?i(o(n),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(e,u,d){var o=e("../internals/require-object-coercible");u.exports=function(i){return Object(o(i))}},{"../internals/require-object-coercible":113}],136:[function(e,u,d){var o=e("../internals/to-positive-integer");u.exports=function(i,n){if(i=o(i),i%n)throw RangeError("Wrong offset");return i}},{"../internals/to-positive-integer":137}],137:[function(e,u,d){var o=e("../internals/to-integer");u.exports=function(i){if(i=o(i),i<0)throw RangeError("The argument can't be less than 0");return i}},{"../internals/to-integer":133}],138:[function(e,u,d){var o=e("../internals/is-object");u.exports=function(i,n){if(!o(i))return i;var a,f;if(n&&typeof(a=i.toString)=="function"&&!o(f=a.call(i))||typeof(a=i.valueOf)=="function"&&!o(f=a.call(i))||!n&&typeof(a=i.toString)=="function"&&!o(f=a.call(i)))return f;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(e,u,d){var o={};o[e("../internals/well-known-symbol")("toStringTag")]="z",u.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":146}],140:[function(e,u,d){function o(Se,Ie){for(var Oe=0,Xe=Ie.length,$=new(ie(Se))(Xe);Oe<Xe;)$[Oe]=Ie[Oe++];return $}function i(Se,Ie){I(Se,Ie,{get:function(){return ee(this)[Ie]}})}function n(Se){return Se instanceof le||(Se=R(Se))=="ArrayBuffer"||Se=="SharedArrayBuffer"}function a(Se,Ie){return xe(Se)&&typeof Ie!="symbol"&&Ie in Se&&String(+Ie)==String(Ie)}function f(Se,Ie){return a(Se,Ie=T(Ie,!0))?_(2,Se[Ie]):F(Se,Ie)}function p(Se,Ie,Oe){return!(a(Se,Ie=T(Ie,!0))&&P(Oe)&&A(Oe,"value"))||A(Oe,"get")||A(Oe,"set")||Oe.configurable||A(Oe,"writable")&&!Oe.writable||A(Oe,"enumerable")&&!Oe.enumerable?I(Se,Ie,Oe):(Se[Ie]=Oe.value,Se)}var s=e("../internals/export"),l=e("../internals/global"),c=e("../internals/descriptors"),h=e("../internals/typed-array-constructors-require-wrappers"),m=e("../internals/array-buffer-view-core"),g=e("../internals/array-buffer"),y=e("../internals/an-instance"),_=e("../internals/create-property-descriptor"),x=e("../internals/create-non-enumerable-property"),w=e("../internals/to-length"),j=e("../internals/to-index"),E=e("../internals/to-offset"),T=e("../internals/to-primitive"),A=e("../internals/has"),R=e("../internals/classof"),P=e("../internals/is-object"),N=e("../internals/object-create"),O=e("../internals/object-set-prototype-of"),D=e("../internals/object-get-own-property-names").f,U=e("../internals/typed-array-from"),Y=e("../internals/array-iteration").forEach,H=e("../internals/set-species"),W=e("../internals/object-define-property"),X=e("../internals/object-get-own-property-descriptor"),Z=e("../internals/internal-state"),q=e("../internals/inherit-if-required"),ee=Z.get,L=Z.set,I=W.f,F=X.f,V=Math.round,J=l.RangeError,le=g.ArrayBuffer,ce=g.DataView,ue=m.NATIVE_ARRAY_BUFFER_VIEWS,re=m.TYPED_ARRAY_TAG,de=m.TypedArray,be=m.TypedArrayPrototype,ie=m.aTypedArrayConstructor,xe=m.isTypedArray,Me="BYTES_PER_ELEMENT",Ee="Wrong length";c?(ue||(X.f=f,W.f=p,i(be,"buffer"),i(be,"byteOffset"),i(be,"byteLength"),i(be,"length")),s({target:"Object",stat:!0,forced:!ue},{getOwnPropertyDescriptor:f,defineProperty:p}),u.exports=function(we,Ie,Oe){function Xe(ae,K){I(ae,K,{get:function(){var Q=this,z=K;return(Q=ee(Q)).view[Le](z*$+Q.byteOffset,!0)},set:function(Q){var z=this,te=K;z=ee(z),Oe&&(Q=(Q=V(Q))<0?0:255<Q?255:255&Q),z.view[Fe](te*$+z.byteOffset,Q,!0)},enumerable:!0})}var $=we.match(/\d+$/)[0]/8,se=we+(Oe?"Clamped":"")+"Array",Le="get"+we,Fe="set"+we,He=l[se],We=He,we=We&&We.prototype,oe={};ue?h&&(We=Ie(function(ae,K,Q,z){return y(ae,We,se),q(P(K)?n(K)?z!==void 0?new He(K,E(Q,$),z):Q!==void 0?new He(K,E(Q,$)):new He(K):xe(K)?o(We,K):U.call(We,K):new He(j(K)),ae,We)}),O&&O(We,de),Y(D(He),function(ae){ae in We||x(We,ae,He[ae])}),We.prototype=we):(We=Ie(function(ae,K,Q,z){y(ae,We,se);var te,ye,je=0,Pe=0;if(P(K)){if(!n(K))return xe(K)?o(We,K):U.call(We,K);var Ke=K,Pe=E(Q,$),Q=K.byteLength;if(z===void 0){if(Q%$||(te=Q-Pe)<0)throw J(Ee)}else if(Q<(te=w(z)*$)+Pe)throw J(Ee);ye=te/$}else ye=j(K),Ke=new le(te=ye*$);for(L(ae,{buffer:Ke,byteOffset:Pe,byteLength:te,length:ye,view:new ce(Ke)});je<ye;)Xe(ae,je++)}),O&&O(We,de),we=We.prototype=N(be)),we.constructor!==We&&x(we,"constructor",We),re&&x(we,re,se),oe[se]=We,s({global:!0,forced:We!=He,sham:!ue},oe),Me in We||x(We,Me,$),Me in we||x(we,Me,$),H(se)}):u.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(a,u,d){var o=a("../internals/global"),i=a("../internals/fails"),n=a("../internals/check-correctness-of-iteration"),a=a("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,f=o.ArrayBuffer,p=o.Int8Array;u.exports=!a||!i(function(){p(1)})||!i(function(){new p(-1)})||!n(function(s){new p,new p(null),new p(1.5),new p(s)},!0)||i(function(){return new p(new f(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],142:[function(e,u,d){var o=e("../internals/to-object"),i=e("../internals/to-length"),n=e("../internals/get-iterator-method"),a=e("../internals/is-array-iterator-method"),f=e("../internals/function-bind-context"),p=e("../internals/array-buffer-view-core").aTypedArrayConstructor;u.exports=function(s){var l,c,h,m,g,y,_=o(s),x=arguments.length,w=1<x?arguments[1]:void 0,j=w!==void 0,E=n(_);if(E!=null&&!a(E))for(y=(g=E.call(_)).next,_=[];!(m=y.call(g)).done;)_.push(m.value);for(j&&2<x&&(w=f(w,arguments[2],2)),c=i(_.length),h=new(p(this))(c),l=0;l<c;l++)h[l]=j?w(_[l],l):_[l];return h}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(e,u,d){var o=0,i=Math.random();u.exports=function(n){return"Symbol("+String(n===void 0?"":n)+")_"+(++o+i).toString(36)}},{}],144:[function(e,u,d){e=e("../internals/native-symbol"),u.exports=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],145:[function(e,u,d){e=e("../internals/well-known-symbol"),d.f=e},{"../internals/well-known-symbol":146}],146:[function(p,u,d){var o=p("../internals/global"),i=p("../internals/shared"),n=p("../internals/has"),a=p("../internals/uid"),f=p("../internals/native-symbol"),p=p("../internals/use-symbol-as-uid"),s=i("wks"),l=o.Symbol,c=p?l:l&&l.withoutSetter||a;u.exports=function(h){return n(s,h)||(f&&n(l,h)?s[h]=l[h]:s[h]=c("Symbol."+h)),s[h]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(e,u,d){u.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],148:[function(n,u,d){var o=n("../internals/export"),i=n("../internals/global"),f=n("../internals/array-buffer"),n=n("../internals/set-species"),a="ArrayBuffer",f=f[a];o({global:!0,forced:i[a]!==f},{ArrayBuffer:f}),n(a)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],149:[function(_,u,d){var o=_("../internals/export"),i=_("../internals/fails"),n=_("../internals/is-array"),a=_("../internals/is-object"),f=_("../internals/to-object"),p=_("../internals/to-length"),s=_("../internals/create-property"),l=_("../internals/array-species-create"),c=_("../internals/array-method-has-species-support"),y=_("../internals/well-known-symbol"),_=_("../internals/engine-v8-version"),h=y("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",y=51<=_||!i(function(){var x=[];return x[h]=!1,x.concat()[0]!==x}),_=c("concat");o({target:"Array",proto:!0,forced:!y||!_},{concat:function(x){for(var w,j,E,T,A,R=f(this),P=l(R,0),N=0,O=-1,D=arguments.length;O<D;O++)if(A=void 0,!a(T=E=O===-1?R:arguments[O])||((A=T[h])!==void 0?!A:!n(T))){if(m<=N)throw TypeError(g);s(P,N++,E)}else{if(j=p(E.length),m<N+j)throw TypeError(g);for(w=0;w<j;w++,N++)w in E&&s(P,N,E[w])}return P.length=N,P}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(n,u,d){var o=n("../internals/export"),i=n("../internals/array-copy-within"),n=n("../internals/add-to-unscopables");o({target:"Array",proto:!0},{copyWithin:i}),n("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],151:[function(a,u,d){var o=a("../internals/export"),i=a("../internals/array-iteration").every,n=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),n=n("every"),a=a("every");o({target:"Array",proto:!0,forced:!n||!a},{every:function(f){return i(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],152:[function(n,u,d){var o=n("../internals/export"),i=n("../internals/array-fill"),n=n("../internals/add-to-unscopables");o({target:"Array",proto:!0},{fill:i}),n("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],153:[function(a,u,d){var o=a("../internals/export"),i=a("../internals/array-iteration").filter,n=a("../internals/array-method-has-species-support"),a=a("../internals/array-method-uses-to-length"),n=n("filter"),a=a("filter");o({target:"Array",proto:!0,forced:!n||!a},{filter:function(f){return i(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(i,u,d){var o=i("../internals/export"),i=i("../internals/array-for-each");o({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},{"../internals/array-for-each":16,"../internals/export":50}],155:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/array-from");o({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(n){Array.from(n)})},{from:i})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],156:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/array-includes").includes,n=e("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(a){return i(this,a,1<arguments.length?arguments[1]:void 0)}}),n("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],157:[function(p,u,d){var o=p("../internals/export"),i=p("../internals/array-includes").indexOf,f=p("../internals/array-method-is-strict"),p=p("../internals/array-method-uses-to-length"),n=[].indexOf,a=!!n&&1/[1].indexOf(1,-0)<0,f=f("indexOf"),p=p("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:a||!f||!p},{indexOf:function(s){return a?n.apply(this,arguments)||0:i(this,s,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(f,u,d){var o=f("../internals/to-indexed-object"),i=f("../internals/add-to-unscopables"),n=f("../internals/iterators"),a=f("../internals/internal-state"),f=f("../internals/define-iterator"),p="Array Iterator",s=a.set,l=a.getterFor(p);u.exports=f(Array,"Array",function(c,h){s(this,{type:p,target:o(c),index:0,kind:h})},function(){var c=l(this),h=c.target,m=c.kind,g=c.index++;return!h||g>=h.length?{value:c.target=void 0,done:!0}:m=="keys"?{value:g,done:!1}:m=="values"?{value:h[g],done:!1}:{value:[g,h[g]],done:!1}},"values"),n.Arguments=n.Array,i("keys"),i("values"),i("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(f,u,d){var o=f("../internals/export"),a=f("../internals/indexed-object"),i=f("../internals/to-indexed-object"),f=f("../internals/array-method-is-strict"),n=[].join,a=a!=Object,f=f("join",",");o({target:"Array",proto:!0,forced:a||!f},{join:function(p){return n.call(i(this),p===void 0?",":p)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(i,u,d){var o=i("../internals/export"),i=i("../internals/array-last-index-of");o({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},{"../internals/array-last-index-of":20,"../internals/export":50}],161:[function(a,u,d){var o=a("../internals/export"),i=a("../internals/array-iteration").map,n=a("../internals/array-method-has-species-support"),a=a("../internals/array-method-uses-to-length"),n=n("map"),a=a("map");o({target:"Array",proto:!0,forced:!n||!a},{map:function(f){return i(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],162:[function(h,u,d){var o=h("../internals/export"),i=h("../internals/is-object"),n=h("../internals/is-array"),a=h("../internals/to-absolute-index"),f=h("../internals/to-length"),p=h("../internals/to-indexed-object"),s=h("../internals/create-property"),l=h("../internals/well-known-symbol"),c=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),c=c("slice"),h=h("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),g=[].slice,y=Math.max;o({target:"Array",proto:!0,forced:!c||!h},{slice:function(_,x){var w,j,E,T=p(this),A=f(T.length),R=a(_,A),P=a(x===void 0?A:x,A);if(n(T)&&((w=typeof(w=T.constructor)=="function"&&(w===Array||n(w.prototype))||i(w)&&(w=w[m])===null?void 0:w)===Array||w===void 0))return g.call(T,R,P);for(j=new(w===void 0?Array:w)(y(P-R,0)),E=0;R<P;R++,E++)R in T&&s(j,E,T[R]);return j.length=E,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(a,u,d){var o=a("../internals/export"),i=a("../internals/array-iteration").some,n=a("../internals/array-method-is-strict"),a=a("../internals/array-method-uses-to-length"),n=n("some"),a=a("some");o({target:"Array",proto:!0,forced:!n||!a},{some:function(f){return i(this,f,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(c,u,d){var o=c("../internals/export"),i=c("../internals/to-absolute-index"),n=c("../internals/to-integer"),a=c("../internals/to-length"),f=c("../internals/to-object"),p=c("../internals/array-species-create"),s=c("../internals/create-property"),l=c("../internals/array-method-has-species-support"),c=c("../internals/array-method-uses-to-length"),l=l("splice"),c=c("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min;o({target:"Array",proto:!0,forced:!l||!c},{splice:function(N,y){var _,x,w,j,E,T,A=f(this),R=a(A.length),P=i(N,R),N=arguments.length;if(N===0?_=x=0:x=N===1?(_=0,R-P):(_=N-2,m(h(n(y),0),R-P)),9007199254740991<R+_-x)throw TypeError("Maximum allowed length exceeded");for(w=p(A,x),j=0;j<x;j++)(E=P+j)in A&&s(w,j,A[E]);if(_<(w.length=x)){for(j=P;j<R-x;j++)T=j+_,(E=j+x)in A?A[T]=A[E]:delete A[T];for(j=R;R-x+_<j;j--)delete A[j-1]}else if(x<_)for(j=R-x;P<j;j--)T=j+_-1,(E=j+x-1)in A?A[T]=A[E]:delete A[T];for(j=0;j<_;j++)A[j+P]=arguments[j+2];return A.length=R-x+_,w}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(i,u,d){var o=i("../internals/descriptors"),i=i("../internals/object-define-property").f,n=Function.prototype,a=n.toString,f=/^\s*function ([^ (]*)/;!o||"name"in n||i(n,"name",{configurable:!0,get:function(){try{return a.call(this).match(f)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],166:[function(i,u,d){var o=i("../internals/collection"),i=i("../internals/collection-strong");u.exports=o("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},i)},{"../internals/collection":32,"../internals/collection-strong":30}],167:[function(o,u,d){var o=o("../internals/export"),i=Math.hypot,n=Math.abs,a=Math.sqrt;o({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(f,p){for(var s,l,c=0,h=0,m=arguments.length,g=0;h<m;)g<(s=n(arguments[h++]))?(c=c*(l=g/s)*l+1,g=s):c+=0<s?(l=s/g)*l:s;return g===1/0?1/0:g*a(c)}})},{"../internals/export":50}],168:[function(e,u,d){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],169:[function(e,u,d){function o(O){var D,U,Y,H,W,X,Z,q=c(O,!1);if(typeof q=="string"&&2<q.length){if((O=(q=x(q)).charCodeAt(0))===43||O===45){if((D=q.charCodeAt(2))===88||D===120)return NaN}else if(O===48){switch(q.charCodeAt(1)){case 66:case 98:U=2,Y=49;break;case 79:case 111:U=8,Y=55;break;default:return+q}for(W=(H=q.slice(2)).length,X=0;X<W;X++)if((Z=H.charCodeAt(X))<48||Y<Z)return NaN;return parseInt(H,U)}}return+q}var i=e("../internals/descriptors"),n=e("../internals/global"),a=e("../internals/is-forced"),f=e("../internals/redefine"),p=e("../internals/has"),s=e("../internals/classof-raw"),l=e("../internals/inherit-if-required"),c=e("../internals/to-primitive"),h=e("../internals/fails"),m=e("../internals/object-create"),g=e("../internals/object-get-own-property-names").f,y=e("../internals/object-get-own-property-descriptor").f,_=e("../internals/object-define-property").f,x=e("../internals/string-trim").trim,w="Number",j=n[w],E=j.prototype,T=s(m(E))==w;if(a(w,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var A,R=function(D){var D=arguments.length<1?0:D,U=this;return U instanceof R&&(T?h(function(){E.valueOf.call(U)}):s(U)!=w)?l(new j(o(D)),U,R):o(D)},P=i?g(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;P.length>N;N++)p(j,A=P[N])&&!p(R,A)&&_(R,A,y(j,A));(R.prototype=E).constructor=R,f(n,w,R)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],170:[function(e,u,d){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],171:[function(p,u,d){function o(c,h,m){return h===0?m:h%2==1?o(c,h-1,m*c):o(c*c,h/2,m)}var i=p("../internals/export"),n=p("../internals/to-integer"),a=p("../internals/this-number-value"),f=p("../internals/string-repeat"),p=p("../internals/fails"),s=1 .toFixed,l=Math.floor;i({target:"Number",proto:!0,forced:s&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||0xde0b6b3a7640080 .toFixed(0)!=="1000000000000000128")||!p(function(){s.call({})})},{toFixed:function(w){function h(A,R){for(var P=-1,N=R;++P<6;)N+=A*j[P],j[P]=N%1e7,N=l(N/1e7)}function m(A){for(var R=6,P=0;0<=--R;)P+=j[R],j[R]=l(P/A),P=P%A*1e7}function g(){for(var A,R=6,P="";0<=--R;)P===""&&R!==0&&j[R]===0||(A=String(j[R]),P=P===""?A:P+f.call("0",7-A.length)+A);return P}var y,_,x=a(this),w=n(w),j=[0,0,0,0,0,0],E="",T="0";if(w<0||20<w)throw RangeError("Incorrect fraction digits");if(x!=x)return"NaN";if(x<=-1e21||1e21<=x)return String(x);if(x<0&&(E="-",x=-x),1e-21<x)if(x=(y=function(A){for(var R=0,P=A;4096<=P;)R+=12,P/=4096;for(;2<=P;)R+=1,P/=2;return R}(x*o(2,69,1))-69)<0?x*o(2,-y,1):x/o(2,y,1),x*=4503599627370496,0<(y=52-y)){for(h(0,x),_=w;7<=_;)h(1e7,0),_-=7;for(h(o(10,_,1),0),_=y-1;23<=_;)m(1<<23),_-=23;m(1<<_),h(1,1),m(2),T=g()}else h(0,x),h(1<<-y,0),T=g()+f.call("0",w);return T=0<w?E+((x=T.length)<=w?"0."+f.call("0",w-x)+T:T.slice(0,x-w)+"."+T.slice(x-w)):E+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],172:[function(i,u,d){var o=i("../internals/export"),i=i("../internals/object-assign");o({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},{"../internals/export":50,"../internals/object-assign":89}],173:[function(a,u,d){var o=a("../internals/export"),f=a("../internals/fails"),i=a("../internals/to-indexed-object"),n=a("../internals/object-get-own-property-descriptor").f,a=a("../internals/descriptors"),f=f(function(){n(1)});o({target:"Object",stat:!0,forced:!a||f,sham:!a},{getOwnPropertyDescriptor:function(p,s){return n(i(p),s)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":132}],174:[function(n,u,d){var o=n("../internals/export"),i=n("../internals/fails"),n=n("../internals/object-get-own-property-names-external").f;o({target:"Object",stat:!0,forced:i(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:n})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],175:[function(f,u,d){var o=f("../internals/export"),i=f("../internals/fails"),n=f("../internals/to-object"),a=f("../internals/object-get-prototype-of"),f=f("../internals/correct-prototype-getter");o({target:"Object",stat:!0,forced:i(function(){a(1)}),sham:!f},{getPrototypeOf:function(p){return a(n(p))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/to-object"),n=e("../internals/object-keys");o({target:"Object",stat:!0,forced:e("../internals/fails")(function(){n(1)})},{keys:function(a){return n(i(a))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(n,u,d){var o=n("../internals/to-string-tag-support"),i=n("../internals/redefine"),n=n("../internals/object-to-string");o||i(Object.prototype,"toString",n,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(Oe,u,d){var o,i,n,a,f=Oe("../internals/export"),p=Oe("../internals/is-pure"),s=Oe("../internals/global"),l=Oe("../internals/get-built-in"),c=Oe("../internals/native-promise-constructor"),h=Oe("../internals/redefine"),m=Oe("../internals/redefine-all"),g=Oe("../internals/set-to-string-tag"),y=Oe("../internals/set-species"),_=Oe("../internals/is-object"),x=Oe("../internals/a-function"),w=Oe("../internals/an-instance"),j=Oe("../internals/classof-raw"),E=Oe("../internals/inspect-source"),T=Oe("../internals/iterate"),A=Oe("../internals/check-correctness-of-iteration"),R=Oe("../internals/species-constructor"),P=Oe("../internals/task").set,N=Oe("../internals/microtask"),O=Oe("../internals/promise-resolve"),D=Oe("../internals/host-report-errors"),U=Oe("../internals/new-promise-capability"),Y=Oe("../internals/perform"),H=Oe("../internals/internal-state"),W=Oe("../internals/is-forced"),Xe=Oe("../internals/well-known-symbol"),X=Oe("../internals/engine-v8-version"),Z=Xe("species"),q="Promise",ee=H.get,L=H.set,I=H.getterFor(q),F=c,V=s.TypeError,J=s.document,le=s.process,ce=l("fetch"),ue=U.f,re=ue,de=j(le)=="process",be=!!(J&&J.createEvent&&s.dispatchEvent),ie="unhandledrejection",xe="rejectionhandled",Me=1,Ee=2,Se=1,Ie=2,Oe=W(q,function(){var oe,ae;return E(F)===String(F)&&(X===66||!de&&typeof PromiseRejectionEvent!="function")?!0:!(!p||F.prototype.finally)||!(51<=X&&/native code/.test(F))&&(ae=function(K){K(function(){},function(){})},((oe=F.resolve(1)).constructor={})[Z]=ae,!(oe.then(function(){})instanceof ae))}),Xe=Oe||!A(function(oe){F.all(oe).catch(function(){})}),$=function(oe){var ae;return!(!_(oe)||typeof(ae=oe.then)!="function")&&ae},se=function(oe,ae,K){var Q;ae.notified||(ae.notified=!0,Q=ae.reactions,N(function(){for(var z,te,ye=ae.value,je=ae.state==Me,Pe=0;Q.length>Pe;){var Ke,ve,Ce,Be=Q[Pe++],rt=je?Be.ok:Be.fail,st=Be.resolve,ot=Be.reject,ft=Be.domain;try{rt?(je||(ae.rejection===Ie&&function(ht,Bt){P.call(s,function(){de?le.emit("rejectionHandled",ht):Le(xe,ht,Bt.value)})}(oe,ae),ae.rejection=Se),rt===!0?Ke=ye:(ft&&ft.enter(),Ke=rt(ye),ft&&(ft.exit(),Ce=!0)),Ke===Be.promise?ot(V("Promise-chain cycle")):(ve=$(Ke))?ve.call(Ke,st,ot):st(Ke)):ot(ye)}catch(ht){ft&&!Ce&&ft.exit(),ot(ht)}}ae.reactions=[],ae.notified=!1,K&&!ae.rejection&&(z=oe,te=ae,P.call(s,function(){var ht=te.value,Bt=Fe(te);if(Bt&&(Bt=Y(function(){de?le.emit("unhandledRejection",ht,z):Le(ie,z,ht)}),te.rejection=de||Fe(te)?Ie:Se,Bt.error))throw Bt.value}))}))},Le=function(oe,ae,K){var Q;be?((Q=J.createEvent("Event")).promise=ae,Q.reason=K,Q.initEvent(oe,!1,!0),s.dispatchEvent(Q)):Q={promise:ae,reason:K},(ae=s["on"+oe])?ae(Q):oe===ie&&D("Unhandled promise rejection",K)},Fe=function(oe){return oe.rejection!==Se&&!oe.parent},He=function(oe,ae,K,Q){return function(z){oe(ae,K,z,Q)}},We=function(oe,ae,K,Q){ae.done||(ae.done=!0,(ae=Q||ae).value=K,ae.state=Ee,se(oe,ae,!0))},we=function(oe,ae,K,Q){if(!ae.done){ae.done=!0,Q&&(ae=Q);try{if(oe===K)throw V("Promise can't be resolved itself");var z=$(K);z?N(function(){var te={done:!1};try{z.call(K,He(we,oe,te,ae),He(We,oe,te,ae))}catch(ye){We(oe,te,ye,ae)}}):(ae.value=K,ae.state=Me,se(oe,ae,!1))}catch(te){We(oe,{done:!1},te,ae)}}};Oe&&(F=function(oe){w(this,F,q),x(oe),o.call(this);var ae=ee(this);try{oe(He(we,this,ae),He(We,this,ae))}catch(K){We(this,ae,K)}},(o=function(oe){L(this,{type:q,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=m(F.prototype,{then:function(oe,ae){var K=I(this),Q=ue(R(this,F));return Q.ok=typeof oe!="function"||oe,Q.fail=typeof ae=="function"&&ae,Q.domain=de?le.domain:void 0,K.parent=!0,K.reactions.push(Q),K.state!=0&&se(this,K,!1),Q.promise},catch:function(oe){return this.then(void 0,oe)}}),i=function(){var oe=new o,ae=ee(oe);this.promise=oe,this.resolve=He(we,oe,ae),this.reject=He(We,oe,ae)},U.f=ue=function(oe){return oe===F||oe===n?new i:re(oe)},p||typeof c!="function"||(a=c.prototype.then,h(c.prototype,"then",function(oe,ae){var K=this;return new F(function(Q,z){a.call(K,Q,z)}).then(oe,ae)},{unsafe:!0}),typeof ce=="function"&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(oe){return O(F,ce.apply(s,arguments))}}))),f({global:!0,wrap:!0,forced:Oe},{Promise:F}),g(F,q,!1,!0),y(q),n=l(q),f({target:q,stat:!0,forced:Oe},{reject:function(oe){var ae=ue(this);return ae.reject.call(void 0,oe),ae.promise}}),f({target:q,stat:!0,forced:p||Oe},{resolve:function(oe){return O(p&&this===n?F:this,oe)}}),f({target:q,stat:!0,forced:Xe},{all:function(oe){var ae=this,K=ue(ae),Q=K.resolve,z=K.reject,te=Y(function(){var ye=x(ae.resolve),je=[],Pe=0,Ke=1;T(oe,function(ve){var Ce=Pe++,Be=!1;je.push(void 0),Ke++,ye.call(ae,ve).then(function(rt){Be||(Be=!0,je[Ce]=rt,--Ke||Q(je))},z)}),--Ke||Q(je)});return te.error&&z(te.value),K.promise},race:function(oe){var ae=this,K=ue(ae),Q=K.reject,z=Y(function(){var te=x(ae.resolve);T(oe,function(ye){te.call(ae,ye).then(K.resolve,Q)})});return z.error&&Q(z.value),K.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(s,u,d){var o=s("../internals/export"),m=s("../internals/get-built-in"),i=s("../internals/a-function"),n=s("../internals/an-object"),a=s("../internals/is-object"),f=s("../internals/object-create"),p=s("../internals/function-bind"),s=s("../internals/fails"),l=m("Reflect","construct"),c=s(function(){function g(){}return!(l(function(){},[],g)instanceof g)}),h=!s(function(){l(function(){})}),m=c||h;o({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(g,y){i(g),n(y);var _=arguments.length<3?g:i(arguments[2]);if(h&&!c)return l(g,y,_);if(g==_){switch(y.length){case 0:return new g;case 1:return new g(y[0]);case 2:return new g(y[0],y[1]);case 3:return new g(y[0],y[1],y[2]);case 4:return new g(y[0],y[1],y[2],y[3])}var x=[null];return x.push.apply(x,y),new(p.apply(g,x))}return x=_.prototype,_=f(a(x)?x:Object.prototype),x=Function.apply.call(g,_,y),a(x)?x:_}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(e,u,d){var o=e("../internals/descriptors"),i=e("../internals/global"),n=e("../internals/is-forced"),a=e("../internals/inherit-if-required"),f=e("../internals/object-define-property").f,p=e("../internals/object-get-own-property-names").f,s=e("../internals/is-regexp"),l=e("../internals/regexp-flags"),c=e("../internals/regexp-sticky-helpers"),h=e("../internals/redefine"),m=e("../internals/fails"),g=e("../internals/internal-state").set,y=e("../internals/set-species"),_=e("../internals/well-known-symbol")("match"),x=i.RegExp,w=x.prototype,j=/a/g,E=/a/g,T=new x(j)!==j,A=c.UNSUPPORTED_Y;if(o&&n("RegExp",!T||A||m(function(){return E[_]=!1,x(j)!=j||x(E)==E||x(j,"i")!="/a/i"}))){for(var R=function(O,D){var U,Y=this instanceof R,H=s(O),W=D===void 0;return!Y&&H&&O.constructor===R&&W?O:(T?H&&!W&&(O=O.source):O instanceof R&&(W&&(D=l.call(O)),O=O.source),A&&(U=!!D&&-1<D.indexOf("y"))&&(D=D.replace(/y/g,"")),H=a(T?new x(O,D):x(O,D),Y?this:w,R),A&&U&&g(H,{sticky:U}),H)},P=p(x),N=0;P.length>N;)(function(O){O in R||f(R,O,{configurable:!0,get:function(){return x[O]},set:function(D){x[O]=D}})})(P[N++]);(w.constructor=R).prototype=w,h(i,"RegExp",R)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(i,u,d){var o=i("../internals/export"),i=i("../internals/regexp-exec");o({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},{"../internals/export":50,"../internals/regexp-exec":110}],182:[function(a,u,d){var o=a("../internals/redefine"),i=a("../internals/an-object"),s=a("../internals/fails"),n=a("../internals/regexp-flags"),a="toString",f=RegExp.prototype,p=f[a],s=s(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),l=p.name!=a;(s||l)&&o(RegExp.prototype,a,function(){var c=i(this),h=String(c.source),m=c.flags;return"/"+h+"/"+String(m===void 0&&c instanceof RegExp&&!("flags"in f)?n.call(c):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(i,u,d){var o=i("../internals/collection"),i=i("../internals/collection-strong");u.exports=o("Set",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},i)},{"../internals/collection":32,"../internals/collection-strong":30}],184:[function(p,u,d){var o=p("../internals/export"),i=p("../internals/object-get-own-property-descriptor").f,n=p("../internals/to-length"),a=p("../internals/not-a-regexp"),f=p("../internals/require-object-coercible"),c=p("../internals/correct-is-regexp-logic"),p=p("../internals/is-pure"),s="".endsWith,l=Math.min,c=c("endsWith");o({target:"String",proto:!0,forced:!!(p||c||!(o=i(String.prototype,"endsWith"))||o.writable)&&!c},{endsWith:function(h){var m=String(f(this)),g=(a(h),1<arguments.length?arguments[1]:void 0),y=n(m.length),g=g===void 0?y:l(n(g),y),y=String(h);return s?s.call(m,y,g):m.slice(g-y.length,g)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/not-a-regexp"),n=e("../internals/require-object-coercible");o({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(a){return!!~String(n(this)).indexOf(i(a),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(n,u,d){var o=n("../internals/string-multibyte").charAt,i=n("../internals/internal-state"),n=n("../internals/define-iterator"),a="String Iterator",f=i.set,p=i.getterFor(a);n(String,"String",function(s){f(this,{type:a,string:String(s),index:0})},function(){var s=p(this),l=s.string,c=s.index;return c>=l.length?{value:void 0,done:!0}:(l=o(l,c),s.index+=l.length,{value:l,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(e,u,d){var o=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),n=e("../internals/to-length"),a=e("../internals/require-object-coercible"),f=e("../internals/advance-string-index"),p=e("../internals/regexp-exec-abstract");o("match",1,function(s,l,c){return[function(h){var m=a(this),g=h==null?void 0:h[s];return g!==void 0?g.call(h,m):new RegExp(h)[s](String(m))},function(h){var m=c(l,h,this);if(m.done)return m.value;var g=i(h),y=String(this);if(!g.global)return p(g,y);for(var _=g.unicode,x=[],w=g.lastIndex=0;(j=p(g,y))!==null;){var j=String(j[0]);(x[w]=j)===""&&(g.lastIndex=f(y,n(g.lastIndex),_)),w++}return w===0?null:x}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(e,u,d){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":125}],189:[function(e,u,d){var o=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),n=e("../internals/to-object"),a=e("../internals/to-length"),f=e("../internals/to-integer"),p=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract"),c=Math.max,h=Math.min,m=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;o("replace",2,function(_,x,w,j){var E=j.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=j.REPLACE_KEEPS_$0,A=E?"$":"$0";return[function(R,P){var N=p(this),O=R==null?void 0:R[_];return O!==void 0?O.call(R,N,P):x.call(String(N),R,P)},function(R,P){if(!E&&T||typeof P=="string"&&P.indexOf(A)===-1){var N=w(x,R,this,P);if(N.done)return N.value}for(var O,D=i(R),U=String(this),Y=typeof P=="function",H=(Y||(P=String(P)),D.global),W=(H&&(O=D.unicode,D.lastIndex=0),[]);(L=l(D,U))!==null&&(W.push(L),H);)String(L[0])===""&&(D.lastIndex=s(U,a(D.lastIndex),O));for(var X,Z="",q=0,ee=0;ee<W.length;ee++){for(var L=W[ee],I=String(L[0]),F=c(h(f(L.index),U.length),0),V=[],J=1;J<L.length;J++)V.push((X=L[J])===void 0?X:String(X));var le=L.groups,ce=Y?(ce=[I].concat(V,F,U),le!==void 0&&ce.push(le),String(P.apply(void 0,ce))):function(ue,re,de,be,ie,xe){var Me=de+ue.length,Ee=be.length,Se=y;return ie!==void 0&&(ie=n(ie),Se=g),x.call(xe,Se,function(Ie,Oe){var Xe;switch(Oe.charAt(0)){case"$":return"$";case"&":return ue;case"`":return re.slice(0,de);case"'":return re.slice(Me);case"<":Xe=ie[Oe.slice(1,-1)];break;default:var $,se=+Oe;if(se==0)return Ie;if(Ee<se)return($=m(se/10))!==0&&$<=Ee?be[$-1]===void 0?Oe.charAt(1):be[$-1]+Oe.charAt(1):Ie;Xe=be[se-1]}return Xe===void 0?"":Xe})}(I,U,F,V,le,P);q<=F&&(Z+=U.slice(q,F)+ce,q=F+I.length)}return Z+U.slice(q)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(e,u,d){var o=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),n=e("../internals/require-object-coercible"),a=e("../internals/same-value"),f=e("../internals/regexp-exec-abstract");o("search",1,function(p,s,l){return[function(c){var h=n(this),m=c==null?void 0:c[p];return m!==void 0?m.call(c,h):new RegExp(c)[p](String(h))},function(c){var h,m=l(s,c,this);return m.done?m.value:(m=i(c),c=String(this),h=m.lastIndex,a(h,0)||(m.lastIndex=0),c=f(m,c),a(m.lastIndex,h)||(m.lastIndex=h),c===null?-1:c.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(h,u,d){var o=h("../internals/fix-regexp-well-known-symbol-logic"),i=h("../internals/is-regexp"),n=h("../internals/an-object"),a=h("../internals/require-object-coercible"),f=h("../internals/species-constructor"),p=h("../internals/advance-string-index"),s=h("../internals/to-length"),l=h("../internals/regexp-exec-abstract"),c=h("../internals/regexp-exec"),h=h("../internals/fails"),m=[].push,g=Math.min,y=4294967295,_=!h(function(){return!RegExp(y,"y")});o("split",2,function(x,w,j){var E="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,A){var R=String(a(this)),P=A===void 0?y:A>>>0;if(P==0)return[];if(T===void 0)return[R];if(!i(T))return w.call(R,T,P);for(var N,O,D,U=[],A=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),Y=0,H=new RegExp(T.source,A+"g");(N=c.call(H,R))&&!(Y<(O=H.lastIndex)&&(U.push(R.slice(Y,N.index)),1<N.length&&N.index<R.length&&m.apply(U,N.slice(1)),D=N[0].length,Y=O,U.length>=P));)H.lastIndex===N.index&&H.lastIndex++;return Y===R.length?!D&&H.test("")||U.push(""):U.push(R.slice(Y)),U.length>P?U.slice(0,P):U}:"0".split(void 0,0).length?function(T,A){return T===void 0&&A===0?[]:w.call(this,T,A)}:w;return[function(T,A){var R=a(this),P=T==null?void 0:T[x];return P!==void 0?P.call(T,R,A):E.call(String(R),T,A)},function(N,A){var R=j(E,N,this,A,E!==w);if(R.done)return R.value;var R=n(N),P=String(this),N=f(R,RegExp),O=R.unicode,D=(R.ignoreCase?"i":"")+(R.multiline?"m":"")+(R.unicode?"u":"")+(_?"y":"g"),U=new N(_?R:"^(?:"+R.source+")",D),Y=A===void 0?y:A>>>0;if(Y==0)return[];if(P.length===0)return l(U,P)===null?[P]:[];for(var H=0,W=0,X=[];W<P.length;){U.lastIndex=_?W:0;var Z,q=l(U,_?P:P.slice(W));if(q===null||(Z=g(s(U.lastIndex+(_?0:W)),P.length))===H)W=p(P,W,O);else{if(X.push(P.slice(H,W)),X.length===Y)return X;for(var ee=1;ee<=q.length-1;ee++)if(X.push(q[ee]),X.length===Y)return X;W=H=Z}}return X.push(P.slice(H)),X}]},!_)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/create-html");o({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return i(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],193:[function(e,u,d){var o=e("../internals/export"),i=e("../internals/string-trim").trim;o({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return i(this)}})},{"../internals/export":50,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(g,u,d){var o,i,n,a,f,p=g("../internals/export"),s=g("../internals/descriptors"),l=g("../internals/global"),c=g("../internals/has"),h=g("../internals/is-object"),m=g("../internals/object-define-property").f,g=g("../internals/copy-constructor-properties"),y=l.Symbol;!s||typeof y!="function"||"description"in y.prototype&&y().description===void 0||(o={},g(i=function(){var _=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof i?new y(_):_===void 0?y():y(_);return _===""&&(o[x]=!0),x},y),(l=i.prototype=y.prototype).constructor=i,n=l.toString,a=String(y("test"))=="Symbol(test)",f=/^Symbol\((.*)\)[^)]+$/,m(l,"description",{configurable:!0,get:function(){var _=h(this)?this.valueOf():this,x=n.call(_);return c(o,_)?"":(_=a?x.slice(7,-1):x.replace(f,"$1"))===""?void 0:_}}),p({global:!0,forced:!0},{Symbol:i}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(e,u,d){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],196:[function(re,u,d){function o(z,te){var ye=Xe[z]=R(xe[ue]);return de(ye,{type:ce,tag:z,description:te}),c||(ye.description=te),ye}function i(z,je){w(z);var ye=E(je),je=P(ye).concat(Q(ye));return J(je,function(Pe){c&&!K.call(ye,Pe)||ae(z,Pe,ye[Pe])}),z}function n(je,Pe){var ye,je=E(je),Pe=T(Pe,!0);if(je!==ie||!y(Xe,Pe)||y($,Pe))return!(ye=Ee(je,Pe))||!y(Xe,Pe)||y(je,le)&&je[le][Pe]||(ye.enumerable=!0),ye}function a(te){var te=Ie(E(te)),ye=[];return J(te,function(je){y(Xe,je)||y(q,je)||ye.push(je)}),ye}var f=re("../internals/export"),p=re("../internals/global"),s=re("../internals/get-built-in"),l=re("../internals/is-pure"),c=re("../internals/descriptors"),h=re("../internals/native-symbol"),m=re("../internals/use-symbol-as-uid"),g=re("../internals/fails"),y=re("../internals/has"),_=re("../internals/is-array"),x=re("../internals/is-object"),w=re("../internals/an-object"),j=re("../internals/to-object"),E=re("../internals/to-indexed-object"),T=re("../internals/to-primitive"),A=re("../internals/create-property-descriptor"),R=re("../internals/object-create"),P=re("../internals/object-keys"),N=re("../internals/object-get-own-property-names"),O=re("../internals/object-get-own-property-names-external"),D=re("../internals/object-get-own-property-symbols"),U=re("../internals/object-get-own-property-descriptor"),Y=re("../internals/object-define-property"),H=re("../internals/object-property-is-enumerable"),W=re("../internals/create-non-enumerable-property"),X=re("../internals/redefine"),Z=re("../internals/shared"),Fe=re("../internals/shared-key"),q=re("../internals/hidden-keys"),ee=re("../internals/uid"),L=re("../internals/well-known-symbol"),I=re("../internals/well-known-symbol-wrapped"),F=re("../internals/define-well-known-symbol"),V=re("../internals/set-to-string-tag"),He=re("../internals/internal-state"),J=re("../internals/array-iteration").forEach,le=Fe("hidden"),ce="Symbol",ue="prototype",re=L("toPrimitive"),de=He.set,be=He.getterFor(ce),ie=Object[ue],xe=p.Symbol,Me=s("JSON","stringify"),Ee=U.f,Se=Y.f,Ie=O.f,Oe=H.f,Xe=Z("symbols"),$=Z("op-symbols"),se=Z("string-to-symbol-registry"),Le=Z("symbol-to-string-registry"),Fe=Z("wks"),He=p.QObject,We=!He||!He[ue]||!He[ue].findChild,we=c&&g(function(){return R(Se({},"a",{get:function(){return Se(this,"a",{value:7}).a}})).a!=7})?function(z,te,ye){var je=Ee(ie,te);je&&delete ie[te],Se(z,te,ye),je&&z!==ie&&Se(ie,te,je)}:Se,oe=m?function(z){return typeof z=="symbol"}:function(z){return Object(z)instanceof xe},ae=function(z,te,ye){return z===ie&&ae($,te,ye),w(z),te=T(te,!0),w(ye),(y(Xe,te)?(ye.enumerable?(y(z,le)&&z[le][te]&&(z[le][te]=!1),ye=R(ye,{enumerable:A(0,!1)})):(y(z,le)||Se(z,le,A(1,{})),z[le][te]=!0),we):Se)(z,te,ye)},K=function(te){var te=T(te,!0),ye=Oe.call(this,te);return!(this===ie&&y(Xe,te)&&!y($,te))&&(!(ye||!y(this,te)||!y(Xe,te)||y(this,le)&&this[le][te])||ye)},Q=function(ye){var te=ye===ie,ye=Ie(te?$:E(ye)),je=[];return J(ye,function(Pe){!y(Xe,Pe)||te&&!y(ie,Pe)||je.push(Xe[Pe])}),je};h||(X((xe=function(){if(this instanceof xe)throw TypeError("Symbol is not a constructor");var z=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,te=ee(z),ye=function(je){this===ie&&ye.call($,je),y(this,le)&&y(this[le],te)&&(this[le][te]=!1),we(this,te,A(1,je))};return c&&We&&we(ie,te,{configurable:!0,set:ye}),o(te,z)})[ue],"toString",function(){return be(this).tag}),X(xe,"withoutSetter",function(z){return o(ee(z),z)}),H.f=K,Y.f=ae,U.f=n,N.f=O.f=a,D.f=Q,I.f=function(z){return o(L(z),z)},c&&(Se(xe[ue],"description",{configurable:!0,get:function(){return be(this).description}}),l||X(ie,"propertyIsEnumerable",K,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:xe}),J(P(Fe),function(z){F(z)}),f({target:ce,stat:!0,forced:!h},{for:function(ye){var te,ye=String(ye);return y(se,ye)?se[ye]:(te=xe(ye),se[ye]=te,Le[te]=ye,te)},keyFor:function(z){if(!oe(z))throw TypeError(z+" is not a symbol");if(y(Le,z))return Le[z]},useSetter:function(){We=!0},useSimple:function(){We=!1}}),f({target:"Object",stat:!0,forced:!h,sham:!c},{create:function(z,te){return te===void 0?R(z):i(R(z),te)},defineProperty:ae,defineProperties:i,getOwnPropertyDescriptor:n}),f({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:a,getOwnPropertySymbols:Q}),f({target:"Object",stat:!0,forced:g(function(){D.f(1)})},{getOwnPropertySymbols:function(z){return D.f(j(z))}}),Me&&f({target:"JSON",stat:!0,forced:!h||g(function(){var z=xe();return Me([z])!="[null]"||Me({a:z})!="{}"||Me(Object(z))!="{}"})},{stringify:function(z,te,ye){for(var je,Pe=[z],Ke=1;Ke<arguments.length;)Pe.push(arguments[Ke++]);if((x(je=te)||z!==void 0)&&!oe(z))return _(te)||(te=function(ve,Ce){if(typeof je=="function"&&(Ce=je.call(this,ve,Ce)),!oe(Ce))return Ce}),Pe[1]=te,Me.apply(null,Pe)}}),xe[ue][re]||W(xe[ue],re,xe[ue].valueOf),V(xe,ce),q[le]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-copy-within"),n=o.aTypedArray;(0,o.exportTypedArrayMethod)("copyWithin",function(a,f){return i.call(n(this),a,f,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").every,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("every",function(a){return i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-fill"),n=o.aTypedArray;(0,o.exportTypedArrayMethod)("fill",function(a){return i.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").filter,n=e("../internals/species-constructor"),a=o.aTypedArray,f=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("filter",function(p){for(var s=i(a(this),p,1<arguments.length?arguments[1]:void 0),p=n(this,this.constructor),l=0,c=s.length,h=new(f(p))(c);l<c;)h[l]=s[l++];return h})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").findIndex,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("findIndex",function(a){return i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").find,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("find",function(a){return i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,u,d){e("../internals/typed-array-constructor")("Float32",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],204:[function(e,u,d){e("../internals/typed-array-constructor")("Float64",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],205:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").forEach,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("forEach",function(a){i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-includes").includes,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("includes",function(a){return i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-includes").indexOf,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("indexOf",function(a){return i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(e,u,d){e("../internals/typed-array-constructor")("Int16",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],209:[function(e,u,d){e("../internals/typed-array-constructor")("Int32",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],210:[function(i,u,d){function o(){return n.call(p(this))}var c=i("../internals/global"),l=i("../internals/array-buffer-view-core"),s=i("../modules/es.array.iterator"),i=i("../internals/well-known-symbol")("iterator"),c=c.Uint8Array,n=s.values,a=s.keys,f=s.entries,p=l.aTypedArray,s=l.exportTypedArrayMethod,l=c&&c.prototype[i],c=!!l&&(l.name=="values"||l.name==null);s("entries",function(){return f.call(p(this))}),s("keys",function(){return a.call(p(this))}),s("values",o,!c),s(i,o,!c)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(i,u,d){var i=i("../internals/array-buffer-view-core"),o=i.aTypedArray,i=i.exportTypedArrayMethod,n=[].join;i("join",function(a){return n.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-last-index-of"),n=o.aTypedArray;(0,o.exportTypedArrayMethod)("lastIndexOf",function(a){return i.apply(n(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").map,n=e("../internals/species-constructor"),a=o.aTypedArray,f=o.aTypedArrayConstructor;(0,o.exportTypedArrayMethod)("map",function(p){return i(a(this),p,1<arguments.length?arguments[1]:void 0,function(s,l){return new(f(n(s,s.constructor)))(l)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-reduce").right,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduceRight",function(a){return i(n(this),a,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-reduce").left,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("reduce",function(a){return i(n(this),a,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(i,u,d){var i=i("../internals/array-buffer-view-core"),o=i.aTypedArray,i=i.exportTypedArrayMethod,n=Math.floor;i("reverse",function(){for(var a,f=o(this).length,p=n(f/2),s=0;s<p;)a=this[s],this[s++]=this[--f],this[f]=a;return this})},{"../internals/array-buffer-view-core":12}],217:[function(f,u,d){var o=f("../internals/array-buffer-view-core"),i=f("../internals/to-length"),n=f("../internals/to-offset"),a=f("../internals/to-object"),f=f("../internals/fails"),p=o.aTypedArray;(0,o.exportTypedArrayMethod)("set",function(s){p(this);var l=n(1<arguments.length?arguments[1]:void 0,1),c=this.length,h=a(s),m=i(h.length),g=0;if(c<m+l)throw RangeError("Wrong length");for(;g<m;)this[l+g]=h[g++]},f(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(i,u,d){var f=i("../internals/array-buffer-view-core"),o=i("../internals/species-constructor"),i=i("../internals/fails"),n=f.aTypedArray,a=f.aTypedArrayConstructor,f=f.exportTypedArrayMethod,p=[].slice;f("slice",function(s,l){for(var c=p.call(n(this),s,l),s=o(this,this.constructor),h=0,m=c.length,g=new(a(s))(m);h<m;)g[h]=c[h++];return g},i(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],219:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").some,n=o.aTypedArray;(0,o.exportTypedArrayMethod)("some",function(a){return i(n(this),a,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(i,u,d){var i=i("../internals/array-buffer-view-core"),o=i.aTypedArray,i=i.exportTypedArrayMethod,n=[].sort;i("sort",function(a){return n.call(o(this),a)})},{"../internals/array-buffer-view-core":12}],221:[function(e,u,d){var o=e("../internals/array-buffer-view-core"),i=e("../internals/to-length"),n=e("../internals/to-absolute-index"),a=e("../internals/species-constructor"),f=o.aTypedArray;(0,o.exportTypedArrayMethod)("subarray",function(h,s){var l=f(this),c=l.length,h=n(h,c);return new(a(l,l.constructor))(l.buffer,l.byteOffset+h*l.BYTES_PER_ELEMENT,i((s===void 0?c:n(s,c))-h))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(i,u,d){var f=i("../internals/global"),o=i("../internals/array-buffer-view-core"),i=i("../internals/fails"),n=f.Int8Array,a=o.aTypedArray,f=o.exportTypedArrayMethod,p=[].toLocaleString,s=[].slice,l=!!n&&i(function(){p.call(new n(1))});f("toLocaleString",function(){return p.apply(l?s.call(a(this)):a(this),arguments)},i(function(){return[1,2].toLocaleString()!=new n([1,2]).toLocaleString()})||!i(function(){n.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],223:[function(i,u,d){var o=i("../internals/array-buffer-view-core").exportTypedArrayMethod,f=i("../internals/fails"),i=i("../internals/global").Uint8Array,i=i&&i.prototype||{},n=[].toString,a=[].join,f=(f(function(){n.call({})})&&(n=function(){return a.call(this)}),i.toString!=n);o("toString",n,f)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],224:[function(e,u,d){e("../internals/typed-array-constructor")("Uint16",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],225:[function(e,u,d){e("../internals/typed-array-constructor")("Uint32",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],226:[function(e,u,d){e("../internals/typed-array-constructor")("Uint8",function(o){return function(i,n,a){return o(this,i,n,a)}})},{"../internals/typed-array-constructor":140}],227:[function(e,u,d){e("../internals/typed-array-constructor")("Uint8",function(o){return function(i,n,a){return o(this,i,n,a)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(y,w,d){function o(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}}var i,n,a,f,p,_=y("../internals/global"),s=y("../internals/redefine-all"),l=y("../internals/internal-metadata"),c=y("../internals/collection"),h=y("../internals/collection-weak"),m=y("../internals/is-object"),g=y("../internals/internal-state").enforce,y=y("../internals/native-weak-map"),_=!_.ActiveXObject&&"ActiveXObject"in _,x=Object.isExtensible,w=w.exports=c("WeakMap",o,h);y&&_&&(i=h.getConstructor(o,"WeakMap",!0),l.REQUIRED=!0,c=w.prototype,n=c.delete,a=c.has,f=c.get,p=c.set,s(c,{delete:function(j){var E;return m(j)&&!x(j)?((E=g(this)).frozen||(E.frozen=new i),n.call(this,j)||E.frozen.delete(j)):n.call(this,j)},has:function(j){var E;return m(j)&&!x(j)?((E=g(this)).frozen||(E.frozen=new i),a.call(this,j)||E.frozen.has(j)):a.call(this,j)},get:function(j){var E;return!m(j)||x(j)||((E=g(this)).frozen||(E.frozen=new i),a.call(this,j))?f.call(this,j):E.frozen.get(j)},set:function(j,E){var T;return!m(j)||x(j)||((T=g(this)).frozen||(T.frozen=new i),a.call(this,j))?p.call(this,j,E):T.frozen.set(j,E),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],229:[function(e,u,d){var o,i=e("../internals/global"),n=e("../internals/dom-iterables"),a=e("../internals/array-for-each"),f=e("../internals/create-non-enumerable-property");for(o in n){var p=i[o],p=p&&p.prototype;if(p&&p.forEach!==a)try{f(p,"forEach",a)}catch{p.forEach=a}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],230:[function(p,u,d){var o,i=p("../internals/global"),n=p("../internals/dom-iterables"),a=p("../modules/es.array.iterator"),f=p("../internals/create-non-enumerable-property"),p=p("../internals/well-known-symbol"),s=p("iterator"),l=p("toStringTag"),c=a.values;for(o in n){var h=i[o],m=h&&h.prototype;if(m){if(m[s]!==c)try{f(m,s,c)}catch{m[s]=c}if(m[l]||f(m,l,o),n[o]){for(var g in a)if(m[g]!==a[g])try{f(m,g,a[g])}catch{m[g]=a[g]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(le,u,d){le("../modules/es.array.iterator");function o(ce){try{return decodeURIComponent(ce)}catch{return ce}}function i(ce){return F[ce]}function n(ce){return encodeURIComponent(ce).replace(I,i)}function a(ce){this.entries.length=0,V(this.entries,ce)}function f(ce,ue){if(ce<ue)throw TypeError("Not enough arguments")}function p(){_(this,p,Y);var ce,ue,re,de,be,ie,xe,Me,Ee=0<arguments.length?arguments[0]:void 0,Se=[];if(W(this,{type:Y,entries:Se,updateURL:function(){},updateSearchParams:a}),Ee!==void 0)if(T(Ee))if(typeof(ce=N(Ee))=="function")for(re=(ue=ce.call(Ee)).next;!(de=re.call(ue)).done;){if((ie=(be=(de=P(E(de.value))).next).call(de)).done||(xe=be.call(de)).done||!be.call(de).done)throw TypeError("Expected sequence with length 2");Se.push({key:ie.value+"",value:xe.value+""})}else for(Me in Ee)x(Ee,Me)&&Se.push({key:Me,value:Ee[Me]+""});else V(Se,typeof Ee=="string"?Ee.charAt(0)==="?"?Ee.slice(1):Ee:Ee+"")}var s=le("../internals/export"),U=le("../internals/get-built-in"),l=le("../internals/native-url"),c=le("../internals/redefine"),h=le("../internals/redefine-all"),m=le("../internals/set-to-string-tag"),g=le("../internals/create-iterator-constructor"),y=le("../internals/internal-state"),_=le("../internals/an-instance"),x=le("../internals/has"),w=le("../internals/function-bind-context"),j=le("../internals/classof"),E=le("../internals/an-object"),T=le("../internals/is-object"),A=le("../internals/object-create"),R=le("../internals/create-property-descriptor"),P=le("../internals/get-iterator"),N=le("../internals/get-iterator-method"),le=le("../internals/well-known-symbol"),O=U("fetch"),D=U("Headers"),U=le("iterator"),Y="URLSearchParams",H=Y+"Iterator",W=y.set,X=y.getterFor(Y),Z=y.getterFor(H),q=/\+/g,ee=Array(4),L=function(ce){var ue,re=ce.replace(q," "),de=4;try{return decodeURIComponent(re)}catch{for(;de;)re=re.replace((ue=de--,ee[ue-1]||(ee[ue-1]=RegExp("((?:%[\\da-f]{2}){"+ue+"})","gi"))),o);return re}},I=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},V=function(ce,ue){if(ue)for(var re,de=ue.split("&"),be=0;be<de.length;)(re=de[be++]).length&&(re=re.split("="),ce.push({key:L(re.shift()),value:L(re.join("="))}))},J=g(function(ce,ue){W(this,{type:H,iterator:P(X(ce).entries),kind:ue})},"Iterator",function(){var ue=Z(this),ce=ue.kind,ue=ue.iterator.next(),re=ue.value;return ue.done||(ue.value=ce==="keys"?re.key:ce==="values"?re.value:[re.key,re.value]),ue}),le=p.prototype;h(le,{append:function(ce,ue){f(arguments.length,2);var re=X(this);re.entries.push({key:ce+"",value:ue+""}),re.updateURL()},delete:function(ce){f(arguments.length,1);for(var ue=X(this),re=ue.entries,de=ce+"",be=0;be<re.length;)re[be].key===de?re.splice(be,1):be++;ue.updateURL()},get:function(ce){f(arguments.length,1);for(var ue=X(this).entries,re=ce+"",de=0;de<ue.length;de++)if(ue[de].key===re)return ue[de].value;return null},getAll:function(ce){f(arguments.length,1);for(var ue=X(this).entries,re=ce+"",de=[],be=0;be<ue.length;be++)ue[be].key===re&&de.push(ue[be].value);return de},has:function(ce){f(arguments.length,1);for(var ue=X(this).entries,re=ce+"",de=0;de<ue.length;)if(ue[de++].key===re)return!0;return!1},set:function(ce,ue){f(arguments.length,1);for(var re,de=X(this),be=de.entries,ie=!1,xe=ce+"",Me=ue+"",Ee=0;Ee<be.length;Ee++)(re=be[Ee]).key===xe&&(ie?be.splice(Ee--,1):(ie=!0,re.value=Me));ie||be.push({key:xe,value:Me}),de.updateURL()},sort:function(){for(var ce,ue,re=X(this),de=re.entries,be=de.slice(),ie=de.length=0;ie<be.length;ie++){for(ce=be[ie],ue=0;ue<ie;ue++)if(de[ue].key>ce.key){de.splice(ue,0,ce);break}ue===ie&&de.push(ce)}re.updateURL()},forEach:function(ce){for(var ue,re=X(this).entries,de=w(ce,1<arguments.length?arguments[1]:void 0,3),be=0;be<re.length;)de((ue=re[be++]).value,ue.key,this)},keys:function(){return new J(this,"keys")},values:function(){return new J(this,"values")},entries:function(){return new J(this,"entries")}},{enumerable:!0}),c(le,U,le.entries),c(le,"toString",function(){for(var ce,ue=X(this).entries,re=[],de=0;de<ue.length;)ce=ue[de++],re.push(n(ce.key)+"="+n(ce.value));return re.join("&")},{enumerable:!0}),m(p,Y),s({global:!0,forced:!l},{URLSearchParams:p}),l||typeof O!="function"||typeof D!="function"||s({global:!0,enumerable:!0,forced:!0},{fetch:function(be){var ue,re,de,be=[be];return 1<arguments.length&&(T(ue=arguments[1])&&(re=ue.body,j(re)===Y&&((de=ue.headers?new D(ue.headers):new D).has("content-type")||de.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ue=A(ue,{body:R(0,String(re)),headers:R(0,de)}))),be.push(ue)),O.apply(this,be)}}),u.exports={URLSearchParams:p,getState:X}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],232:[function(P,u,d){P("../modules/es.string.iterator");function o(ge){var Ze,it,qe,bt;if(typeof ge=="number"){for(Ze=[],it=0;it<4;it++)Ze.unshift(ge%256),ge=H(ge/256);return Ze.join(".")}if(typeof ge!="object")return ge;for(Ze="",qe=xe(ge),it=0;it<8;it++)bt&&ge[it]===0||(bt=bt&&!1,qe===it?(Ze+=it?":":"::",bt=!0):(Ze+=ge[it].toString(16),it<7&&(Ze+=":")));return"["+Ze+"]"}function i(ge){return!ge.host||ge.cannotBeABaseURL||ge.scheme=="file"}function n(ge,Ze,it,qe){var bt,Je,Lt,at=it||oe,St=0,nt="",sr=!1,kt=!1,qt=!1;for(it||(ge.scheme="",ge.username="",ge.password="",ge.host=null,ge.port=null,ge.path=[],ge.query=null,ge.fragment=null,ge.cannotBeABaseURL=!1,Ze=Ze.replace(de,"")),Ze=Ze.replace(be,""),bt=j(Ze);St<=bt.length;){switch(Je=bt[St],at){case oe:if(!Je||!L.test(Je)){if(it)return Z;at=K;continue}nt+=Je.toLowerCase(),at=ae;break;case ae:if(Je&&(I.test(Je)||Je=="+"||Je=="-"||Je=="."))nt+=Je.toLowerCase();else{if(Je!=":"){if(it)return Z;nt="",at=K,St=0;continue}if(it&&($(ge)!=x(Xe,nt)||nt=="file"&&(se(ge)||ge.port!==null)||ge.scheme=="file"&&!ge.host))return;if(ge.scheme=nt,it)return void($(ge)&&Xe[ge.scheme]==ge.port&&(ge.port=null));nt="",ge.scheme=="file"?at=rt:$(ge)&&qe&&qe.scheme==ge.scheme?at=Q:$(ge)?at=je:bt[St+1]=="/"?(at=z,St++):(ge.cannotBeABaseURL=!0,ge.path.push(""),at=Bt)}break;case K:if(!qe||qe.cannotBeABaseURL&&Je!="#")return Z;if(qe.cannotBeABaseURL&&Je=="#"){ge.scheme=qe.scheme,ge.path=qe.path.slice(),ge.query=qe.query,ge.fragment="",ge.cannotBeABaseURL=!0,at=Wt;break}at=qe.scheme=="file"?rt:te;continue;case Q:if(Je!="/"||bt[St+1]!="/"){at=te;continue}at=Pe,St++;break;case z:if(Je=="/"){at=Ke;break}at=ht;continue;case te:if(ge.scheme=qe.scheme,Je==p)ge.username=qe.username,ge.password=qe.password,ge.host=qe.host,ge.port=qe.port,ge.path=qe.path.slice(),ge.query=qe.query;else if(Je=="/"||Je=="\\"&&$(ge))at=ye;else if(Je=="?")ge.username=qe.username,ge.password=qe.password,ge.host=qe.host,ge.port=qe.port,ge.path=qe.path.slice(),ge.query="",at=Rt;else{if(Je!="#"){ge.username=qe.username,ge.password=qe.password,ge.host=qe.host,ge.port=qe.port,ge.path=qe.path.slice(),ge.path.pop(),at=ht;continue}ge.username=qe.username,ge.password=qe.password,ge.host=qe.host,ge.port=qe.port,ge.path=qe.path.slice(),ge.query=qe.query,ge.fragment="",at=Wt}break;case ye:if(!$(ge)||Je!="/"&&Je!="\\"){if(Je!="/"){ge.username=qe.username,ge.password=qe.password,ge.host=qe.host,ge.port=qe.port,at=ht;continue}at=Ke}else at=Pe;break;case je:if(at=Pe,Je!="/"||nt.charAt(St+1)!="/")continue;St++;break;case Pe:if(Je=="/"||Je=="\\")break;at=Ke;continue;case Ke:if(Je=="@"){sr&&(nt="%40"+nt);for(var sr=!0,pr=j(nt),Or=0;Or<pr.length;Or++){var Pr=pr[Or];Pr!=":"||qt?(Pr=Oe(Pr,Ie),qt?ge.password+=Pr:ge.username+=Pr):qt=!0}nt=""}else if(Je==p||Je=="/"||Je=="?"||Je=="#"||Je=="\\"&&$(ge)){if(sr&&nt=="")return X;St-=j(nt).length+1,nt="",at=ve}else nt+=Je;break;case ve:case Ce:if(it&&ge.scheme=="file"){at=ot;continue}if(Je!=":"||kt){if(Je==p||Je=="/"||Je=="?"||Je=="#"||Je=="\\"&&$(ge)){if($(ge)&&nt=="")return q;if(it&&nt==""&&(se(ge)||ge.port!==null))return;if(Lt=ie(ge,nt))return Lt;if(nt="",at=ft,it)return;continue}Je=="["?kt=!0:Je=="]"&&(kt=!1),nt+=Je}else{if(nt=="")return q;if(Lt=ie(ge,nt))return Lt;if(nt="",at=Be,it==Ce)return}break;case Be:if(!F.test(Je)){if(Je==p||Je=="/"||Je=="?"||Je=="#"||Je=="\\"&&$(ge)||it){if(nt!=""){var rr=parseInt(nt,10);if(65535<rr)return ee;ge.port=$(ge)&&rr===Xe[ge.scheme]?null:rr,nt=""}if(it)return;at=ft;continue}return ee}nt+=Je;break;case rt:if(ge.scheme="file",Je=="/"||Je=="\\")at=st;else{if(!qe||qe.scheme!="file"){at=ht;continue}if(Je==p)ge.host=qe.host,ge.path=qe.path.slice(),ge.query=qe.query;else if(Je=="?")ge.host=qe.host,ge.path=qe.path.slice(),ge.query="",at=Rt;else{if(Je!="#"){Fe(bt.slice(St).join(""))||(ge.host=qe.host,ge.path=qe.path.slice(),He(ge)),at=ht;continue}ge.host=qe.host,ge.path=qe.path.slice(),ge.query=qe.query,ge.fragment="",at=Wt}}break;case st:if(Je=="/"||Je=="\\"){at=ot;break}qe&&qe.scheme=="file"&&!Fe(bt.slice(St).join(""))&&(Le(qe.path[0],!0)?ge.path.push(qe.path[0]):ge.host=qe.host),at=ht;continue;case ot:if(Je==p||Je=="/"||Je=="\\"||Je=="?"||Je=="#"){if(!it&&Le(nt))at=ht;else{if(nt==""){if(ge.host="",it)return}else{if(Lt=ie(ge,nt))return Lt;if(ge.host=="localhost"&&(ge.host=""),it)return;nt=""}at=ft}continue}nt+=Je;break;case ft:if($(ge)){if(at=ht,Je!="/"&&Je!="\\")continue}else if(it||Je!="?")if(it||Je!="#"){if(Je!=p&&(at=ht,Je!="/"))continue}else ge.fragment="",at=Wt;else ge.query="",at=Rt;break;case ht:if(Je==p||Je=="/"||Je=="\\"&&$(ge)||!it&&(Je=="?"||Je=="#")){if(we(nt)?(He(ge),Je=="/"||Je=="\\"&&$(ge)||ge.path.push("")):We(nt)?Je=="/"||Je=="\\"&&$(ge)||ge.path.push(""):(ge.scheme=="file"&&!ge.path.length&&Le(nt)&&(ge.host&&(ge.host=""),nt=nt.charAt(0)+":"),ge.path.push(nt)),nt="",ge.scheme=="file"&&(Je==p||Je=="?"||Je=="#"))for(;1<ge.path.length&&ge.path[0]==="";)ge.path.shift();Je=="?"?(ge.query="",at=Rt):Je=="#"&&(ge.fragment="",at=Wt)}else nt+=Oe(Je,Se);break;case Bt:Je=="?"?(ge.query="",at=Rt):Je=="#"?(ge.fragment="",at=Wt):Je!=p&&(ge.path[0]+=Oe(Je,Me));break;case Rt:it||Je!="#"?Je!=p&&(Je=="'"&&$(ge)?ge.query+="%27":ge.query+=Je=="#"?"%23":Oe(Je,Me)):(ge.fragment="",at=Wt);break;case Wt:Je!=p&&(ge.fragment+=Oe(Je,Ee))}St++}}function a(Je){var Ze,it,qe=_(this,a,"URL"),bt=1<arguments.length?arguments[1]:void 0,Je=String(Je),Lt=U(qe,{type:"URL"});if(bt!==void 0){if(bt instanceof a)Ze=Y(bt);else if(it=n(Ze={},String(bt)))throw TypeError(it)}if(it=n(Lt,Je,null,Ze))throw TypeError(it);var at=Lt.searchParams=new O;(bt=D(at)).updateSearchParams(Lt.query),bt.updateURL=function(){Lt.query=String(at)||null},h||(qe.href=Jt.call(qe),qe.origin=Ft.call(qe),qe.protocol=wr.call(qe),qe.username=mr.call(qe),qe.password=pe.call(qe),qe.host=ze.call(qe),qe.hostname=Qe.call(qe),qe.port=Ge.call(qe),qe.pathname=$e.call(qe),qe.search=wt.call(qe),qe.searchParams=Tt.call(qe),qe.hash=jt.call(qe))}function f(ge,Ze){return{get:ge,set:Ze,configurable:!0,enumerable:!0}}var p,s,l,c=P("../internals/export"),h=P("../internals/descriptors"),m=P("../internals/native-url"),At=P("../internals/global"),g=P("../internals/object-define-properties"),y=P("../internals/redefine"),_=P("../internals/an-instance"),x=P("../internals/has"),w=P("../internals/object-assign"),j=P("../internals/array-from"),E=P("../internals/string-multibyte").codeAt,T=P("../internals/string-punycode-to-ascii"),A=P("../internals/set-to-string-tag"),R=P("../modules/web.url-search-params"),P=P("../internals/internal-state"),N=At.URL,O=R.URLSearchParams,D=R.getState,U=P.set,Y=P.getterFor("URL"),H=Math.floor,W=Math.pow,X="Invalid authority",Z="Invalid scheme",q="Invalid host",ee="Invalid port",L=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,F=/\d/,V=/^(0x|0X)/,J=/^[0-7]+$/,le=/^\d+$/,ce=/^[\dA-Fa-f]+$/,ue=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,re=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,de=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,be=/[\u0009\u000A\u000D]/g,ie=function(ge,Ze){var it,qe,bt;if(Ze.charAt(0)=="[")return Ze.charAt(Ze.length-1)=="]"&&(it=function(Je){var Lt=[0,0,0,0,0,0,0,0],at=0,St=null,nt=0,sr,kt,qt,pr,Or,Pr,rr,nr=function(){return Je.charAt(nt)};if(nr()==":"){if(Je.charAt(1)!=":")return;nt+=2,at++,St=at}for(;nr();){if(at==8)return;if(nr()==":"){if(St!==null)return;nt++,at++,St=at;continue}for(sr=kt=0;kt<4&&ce.test(nr());)sr=sr*16+parseInt(nr(),16),nt++,kt++;if(nr()=="."){if(kt==0||(nt-=kt,at>6))return;for(qt=0;nr();){if(pr=null,qt>0)if(nr()=="."&&qt<4)nt++;else return;if(!F.test(nr()))return;for(;F.test(nr());){if(Or=parseInt(nr(),10),pr===null)pr=Or;else{if(pr==0)return;pr=pr*10+Or}if(pr>255)return;nt++}Lt[at]=Lt[at]*256+pr,qt++,(qt==2||qt==4)&&at++}if(qt!=4)return;break}else if(nr()==":"){if(nt++,!nr())return}else if(nr())return;Lt[at++]=sr}if(St!==null)for(Pr=at-St,at=7;at!=0&&Pr>0;)rr=Lt[at],Lt[at--]=Lt[St+Pr-1],Lt[St+--Pr]=rr;else if(at!=8)return;return Lt}(Ze.slice(1,-1)))?void(ge.host=it):q;if($(ge))return Ze=T(Ze),ue.test(Ze)||(it=function(Je){var Lt=Je.split("."),at,St,nt,sr,kt,qt,pr;if(Lt.length&&Lt[Lt.length-1]==""&&Lt.pop(),(at=Lt.length)>4)return Je;for(St=[],nt=0;nt<at;nt++){if(sr=Lt[nt],sr=="")return Je;if(kt=10,sr.length>1&&sr.charAt(0)=="0"&&(kt=V.test(sr)?16:8,sr=sr.slice(kt==8?1:2)),sr==="")qt=0;else{if(!(kt==10?le:kt==8?J:ce).test(sr))return Je;qt=parseInt(sr,kt)}St.push(qt)}for(nt=0;nt<at;nt++)if(qt=St[nt],nt==at-1){if(qt>=W(256,5-at))return null}else if(qt>255)return null;for(pr=St.pop(),nt=0;nt<St.length;nt++)pr+=St[nt]*W(256,3-nt);return pr}(Ze))===null?q:void(ge.host=it);if(re.test(Ze))return q;for(it="",qe=j(Ze),bt=0;bt<qe.length;bt++)it+=Oe(qe[bt],Me);ge.host=it},xe=function(ge){for(var Ze=null,it=1,qe=null,bt=0,Je=0;Je<8;Je++)ge[Je]!==0?(it<bt&&(Ze=qe,it=bt),qe=null,bt=0):(qe===null&&(qe=Je),++bt);return it<bt&&(Ze=qe,it=bt),Ze},Me={},Ee=w({},Me,{" ":1,'"':1,"<":1,">":1,"`":1}),Se=w({},Ee,{"#":1,"?":1,"{":1,"}":1}),Ie=w({},Se,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Oe=function(ge,Ze){var it=E(ge,0);return 32<it&&it<127&&!x(Ze,ge)?ge:encodeURIComponent(ge)},Xe={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(ge){return x(Xe,ge.scheme)},se=function(ge){return ge.username!=""||ge.password!=""},Le=function(ge,Ze){return ge.length==2&&L.test(ge.charAt(0))&&((ge=ge.charAt(1))==":"||!Ze&&ge=="|")},Fe=function(ge){return 1<ge.length&&Le(ge.slice(0,2))&&(ge.length==2||(ge=ge.charAt(2))==="/"||ge==="\\"||ge==="?"||ge==="#")},He=function(ge){var Ze=ge.path,it=Ze.length;!it||ge.scheme=="file"&&it==1&&Le(Ze[0],!0)||Ze.pop()},We=function(ge){return ge==="."||ge.toLowerCase()==="%2e"},we=function(ge){return(ge=ge.toLowerCase())===".."||ge==="%2e."||ge===".%2e"||ge==="%2e%2e"},oe={},ae={},K={},Q={},z={},te={},ye={},je={},Pe={},Ke={},ve={},Ce={},Be={},rt={},st={},ot={},ft={},ht={},Bt={},Rt={},Wt={},At=a.prototype,Jt=function(){var ge=Y(this),Ze=ge.scheme,it=ge.username,qe=ge.password,bt=ge.host,Je=ge.port,Lt=ge.path,at=ge.query,St=ge.fragment,nt=Ze+":";return bt!==null?(nt+="//",se(ge)&&(nt+=it+(qe?":"+qe:"")+"@"),nt+=o(bt),Je!==null&&(nt+=":"+Je)):Ze=="file"&&(nt+="//"),nt+=ge.cannotBeABaseURL?Lt[0]:Lt.length?"/"+Lt.join("/"):"",at!==null&&(nt+="?"+at),St!==null&&(nt+="#"+St),nt},Ft=function(){var ge=Y(this),Ze=ge.scheme,it=ge.port;if(Ze=="blob")try{return new URL(Ze.path[0]).origin}catch{return"null"}return Ze!="file"&&$(ge)?Ze+"://"+o(ge.host)+(it!==null?":"+it:""):"null"},wr=function(){return Y(this).scheme+":"},mr=function(){return Y(this).username},pe=function(){return Y(this).password},ze=function(){var Ze=Y(this),ge=Ze.host,Ze=Ze.port;return ge===null?"":Ze===null?o(ge):o(ge)+":"+Ze},Qe=function(){var ge=Y(this).host;return ge===null?"":o(ge)},Ge=function(){var ge=Y(this).port;return ge===null?"":String(ge)},$e=function(){var ge=Y(this),Ze=ge.path;return ge.cannotBeABaseURL?Ze[0]:Ze.length?"/"+Ze.join("/"):""},wt=function(){var ge=Y(this).query;return ge?"?"+ge:""},Tt=function(){return Y(this).searchParams},jt=function(){var ge=Y(this).fragment;return ge?"#"+ge:""};h&&g(At,{href:f(Jt,function(it){var Ze=Y(this),it=String(it),it=n(Ze,it);if(it)throw TypeError(it);D(Ze.searchParams).updateSearchParams(Ze.query)}),origin:f(Ft),protocol:f(wr,function(ge){var Ze=Y(this);n(Ze,String(ge)+":",oe)}),username:f(mr,function(ge){var Ze=Y(this),it=j(String(ge));if(!i(Ze)){Ze.username="";for(var qe=0;qe<it.length;qe++)Ze.username+=Oe(it[qe],Ie)}}),password:f(pe,function(ge){var Ze=Y(this),it=j(String(ge));if(!i(Ze)){Ze.password="";for(var qe=0;qe<it.length;qe++)Ze.password+=Oe(it[qe],Ie)}}),host:f(ze,function(ge){var Ze=Y(this);Ze.cannotBeABaseURL||n(Ze,String(ge),ve)}),hostname:f(Qe,function(ge){var Ze=Y(this);Ze.cannotBeABaseURL||n(Ze,String(ge),Ce)}),port:f(Ge,function(ge){var Ze=Y(this);i(Ze)||((ge=String(ge))==""?Ze.port=null:n(Ze,ge,Be))}),pathname:f($e,function(ge){var Ze=Y(this);Ze.cannotBeABaseURL||(Ze.path=[],n(Ze,ge+"",ft))}),search:f(wt,function(ge){var Ze=Y(this);(ge=String(ge))==""?Ze.query=null:(ge.charAt(0)=="?"&&(ge=ge.slice(1)),Ze.query="",n(Ze,ge,Rt)),D(Ze.searchParams).updateSearchParams(Ze.query)}),searchParams:f(Tt),hash:f(jt,function(ge){var Ze=Y(this);(ge=String(ge))==""?Ze.fragment=null:(ge.charAt(0)=="#"&&(ge=ge.slice(1)),Ze.fragment="",n(Ze,ge,Wt))})}),y(At,"toJSON",function(){return Jt.call(this)},{enumerable:!0}),y(At,"toString",function(){return Jt.call(this)},{enumerable:!0}),N&&(s=N.createObjectURL,l=N.revokeObjectURL,s&&y(a,"createObjectURL",function(ge){return s.apply(N,arguments)}),l&&y(a,"revokeObjectURL",function(ge){return l.apply(N,arguments)})),A(a,"URL"),c({global:!0,forced:!m,sham:!h},{URL:a})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":231}],233:[function(e,u,d){u.exports=e("./").polyfill()},{"./":234}],234:[function(e,u,d){(function(o,i){var n,a;n=this,a=function(){function f(ie){return typeof ie=="function"}var p=Array.isArray||function(ie){return Object.prototype.toString.call(ie)==="[object Array]"},s=0,l=void 0,c=void 0,h=function(ie,xe){w[s]=ie,w[s+1]=xe,(s+=2)===2&&(c?c(j):O())},m=typeof window<"u"?window:void 0,g=m||{},g=g.MutationObserver||g.WebKitMutationObserver,y=typeof self>"u"&&o!==void 0&&{}.toString.call(o)==="[object process]",_=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){var ie=setTimeout;return function(){return ie(j,1)}}var w=new Array(1e3);function j(){for(var ie=0;ie<s;ie+=2)(0,w[ie])(w[ie+1]),w[ie]=void 0,w[ie+1]=void 0;s=0}function E(){try{var ie=Function("return this")().require("vertx");return(l=ie.runOnLoop||ie.runOnContext)!==void 0?function(){l(j)}:x()}catch{return x()}}var T,A,R,O=void 0;function P(ie,xe){var Me,Ee=this,Se=new this.constructor(U),Ie=(Se[D]===void 0&&ce(Se),Ee._state);return Ie?(Me=arguments[Ie-1],h(function(){return J(Ie,Se,Me,Ee._result)})):F(Ee,Se,ie,xe),Se}function N(ie){var xe;return ie&&typeof ie=="object"&&ie.constructor===this?ie:(q(xe=new this(U),ie),xe)}var O=y?function(){return o.nextTick(j)}:g?(A=0,y=new g(j),R=document.createTextNode(""),y.observe(R,{characterData:!0}),function(){R.data=A=++A%2}):_?((T=new MessageChannel).port1.onmessage=j,function(){return T.port2.postMessage(0)}):(m===void 0&&typeof e=="function"?E:x)(),D=Math.random().toString(36).substring(2);function U(){}var Y=void 0,H=1,W=2;function X(ie,xe,Me){h(function(Ee){var Se=!1,Ie=function(Oe,Xe,$,se){try{Oe.call(Xe,$,se)}catch(Le){return Le}}(Me,xe,function(Oe){Se||(Se=!0,(xe!==Oe?q:L)(Ee,Oe))},function(Oe){Se||(Se=!0,I(Ee,Oe))},Ee._label);!Se&&Ie&&(Se=!0,I(Ee,Ie))},ie)}function Z(ie,xe,Me){var Ee,Se;xe.constructor===ie.constructor&&Me===P&&xe.constructor.resolve===N?(Ee=ie,(Se=xe)._state===H?L(Ee,Se._result):Se._state===W?I(Ee,Se._result):F(Se,void 0,function(Ie){return q(Ee,Ie)},function(Ie){return I(Ee,Ie)})):Me!==void 0&&f(Me)?X(ie,xe,Me):L(ie,xe)}function q(ie,xe){if(ie===xe)I(ie,new TypeError("You cannot resolve a promise with itself"));else if(Me=typeof xe,xe===null||Me!="object"&&Me!="function")L(ie,xe);else{Me=void 0;try{Me=xe.then}catch(Ee){return void I(ie,Ee)}Z(ie,xe,Me)}var Me}function ee(ie){ie._onerror&&ie._onerror(ie._result),V(ie)}function L(ie,xe){ie._state===Y&&(ie._result=xe,ie._state=H,ie._subscribers.length!==0&&h(V,ie))}function I(ie,xe){ie._state===Y&&(ie._state=W,ie._result=xe,h(ee,ie))}function F(ie,xe,Me,Ee){var Se=ie._subscribers,Ie=Se.length;ie._onerror=null,Se[Ie]=xe,Se[Ie+H]=Me,Se[Ie+W]=Ee,Ie===0&&ie._state&&h(V,ie)}function V(ie){var xe=ie._subscribers,Me=ie._state;if(xe.length!==0){for(var Ee,Se=void 0,Ie=ie._result,Oe=0;Oe<xe.length;Oe+=3)Ee=xe[Oe],Se=xe[Oe+Me],Ee?J(Me,Ee,Se,Ie):Se(Ie);ie._subscribers.length=0}}function J(ie,xe,Me,Ee){var Se=f(Me),Ie=void 0,Oe=void 0,Xe=!0;if(Se){try{Ie=Me(Ee)}catch($){Xe=!1,Oe=$}if(xe===Ie)return void I(xe,new TypeError("A promises callback cannot return that same promise."))}else Ie=Ee;xe._state===Y&&(Se&&Xe?q(xe,Ie):Xe===!1?I(xe,Oe):ie===H?L(xe,Ie):ie===W&&I(xe,Ie))}var le=0;function ce(ie){ie[D]=le++,ie._state=void 0,ie._result=void 0,ie._subscribers=[]}re.prototype._enumerate=function(ie){for(var xe=0;this._state===Y&&xe<ie.length;xe++)this._eachEntry(ie[xe],xe)},re.prototype._eachEntry=function(ie,xe){var Me=this._instanceConstructor,Ee=Me.resolve;if(Ee===N){var Se,Ie=void 0,Oe=void 0,Xe=!1;try{Ie=ie.then}catch($){Xe=!0,Oe=$}Ie===P&&ie._state!==Y?this._settledAt(ie._state,xe,ie._result):typeof Ie!="function"?(this._remaining--,this._result[xe]=ie):Me===de?(Se=new Me(U),Xe?I(Se,Oe):Z(Se,ie,Ie),this._willSettleAt(Se,xe)):this._willSettleAt(new Me(function($){return $(ie)}),xe)}else this._willSettleAt(Ee(ie),xe)},re.prototype._settledAt=function(ie,xe,Me){var Ee=this.promise;Ee._state===Y&&(this._remaining--,ie===W?I(Ee,Me):this._result[xe]=Me),this._remaining===0&&L(Ee,this._result)},re.prototype._willSettleAt=function(ie,xe){var Me=this;F(ie,void 0,function(Ee){return Me._settledAt(H,xe,Ee)},function(Ee){return Me._settledAt(W,xe,Ee)})};var ue=re;function re(ie,xe){this._instanceConstructor=ie,this.promise=new ie(U),this.promise[D]||ce(this.promise),p(xe)?(this.length=xe.length,this._remaining=xe.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(xe),this._remaining!==0)||L(this.promise,this._result)):I(this.promise,new Error("Array Methods must be provided an Array"))}be.prototype.catch=function(ie){return this.then(null,ie)},be.prototype.finally=function(ie){var xe=this.constructor;return f(ie)?this.then(function(Me){return xe.resolve(ie()).then(function(){return Me})},function(Me){return xe.resolve(ie()).then(function(){throw Me})}):this.then(ie,ie)};var de=be;function be(ie){if(this[D]=le++,this._result=this._state=void 0,this._subscribers=[],U!==ie){if(typeof ie!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof be))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var xe=this;try{ie(function(Me){q(xe,Me)},function(Me){I(xe,Me)})}catch(Me){I(xe,Me)}}}return de.prototype.then=P,de.all=function(ie){return new ue(this,ie).promise},de.race=function(ie){var xe=this;return p(ie)?new xe(function(Me,Ee){for(var Se=ie.length,Ie=0;Ie<Se;Ie++)xe.resolve(ie[Ie]).then(Me,Ee)}):new xe(function(Me,Ee){return Ee(new TypeError("You must pass an array to race."))})},de.resolve=N,de.reject=function(ie){var xe=new this(U);return I(xe,ie),xe},de._setScheduler=function(ie){c=ie},de._setAsap=function(ie){h=ie},de._asap=h,de.polyfill=function(){var ie=void 0;if(i!==void 0)ie=i;else if(typeof self<"u")ie=self;else try{ie=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var xe=ie.Promise;if(xe){var Me=null;try{Me=Object.prototype.toString.call(xe.resolve())}catch{}if(Me==="[object Promise]"&&!xe.cast)return}ie.Promise=de},de.Promise=de},typeof d=="object"&&u!==void 0?u.exports=a():n.ES6Promise=a()}).call(this,e("_process"),typeof io<"u"?io:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:243}],235:[function(e,u,d){var o,i;o=this,i=function(n,a){var f=5e3,p="callback";function s(c){try{delete window[c]}catch{window[c]=void 0}}function l(c){c=document.getElementById(c),c&&document.getElementsByTagName("head")[0].removeChild(c)}a.exports=function(c){var h=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],m=c,g=h.timeout||f,y=h.jsonpCallback||p,_=void 0;return new Promise(function(x,w){var j=h.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),E=y+"_"+j,T=(window[j]=function(A){x({ok:!0,json:function(){return Promise.resolve(A)}}),_&&clearTimeout(_),l(E),s(j)},m+=m.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+m+y+"="+j),h.charset&&T.setAttribute("charset",h.charset),T.id=E,document.getElementsByTagName("head")[0].appendChild(T),_=setTimeout(function(){w(new Error("JSONP request to "+c+" timed out")),s(j),l(E),window[j]=function(){s(j)}},g),T.onerror=function(){w(new Error("JSONP request to "+c+" failed")),s(j),l(E),_&&clearTimeout(_)}})}},d!==void 0&&u!==void 0?i(0,u):(i(i={exports:{}},i),o.fetchJsonp=i.exports)},{}],236:[function(e,u,d){var o=function(i){var n,a,f,p,s,l,c,h,m,g,y;if(!(i===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return y=i.document,n=function(){return i.URL||i.webkitURL||i},a=y.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in a,p=/constructor/i.test(i.HTMLElement)||i.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(_){(i.setImmediate||i.setTimeout)(function(){throw _},0)},c=4e4,h=function(_){setTimeout(function(){typeof _=="string"?n().revokeObjectURL(_):_.remove()},c)},m=function(_){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob([String.fromCharCode(65279),_],{type:_.type}):_},y=(g=function(_,x,A){A||(_=m(_));var j,E,T=this,A=_.type==="application/octet-stream",R=function(){for(var P=T,N="writestart progress write writeend".split(" "),O=void 0,D=(N=[].concat(N)).length;D--;){var U=P["on"+N[D]];if(typeof U=="function")try{U.call(P,O||P)}catch(Y){l(Y)}}};T.readyState=T.INIT,f?(j=n().createObjectURL(_),setTimeout(function(){var P,N;a.href=j,a.download=x,P=a,N=new MouseEvent("click"),P.dispatchEvent(N),R(),h(j),T.readyState=T.DONE})):(s||A&&p)&&i.FileReader?((E=new FileReader).onloadend=function(){var P=s?E.result:E.result.replace(/^data:[^;]*;/,"data:attachment/file;");i.open(P,"_blank")||(i.location.href=P),P=void 0,T.readyState=T.DONE,R()},E.readAsDataURL(_),T.readyState=T.INIT):(j=j||n().createObjectURL(_),!A&&i.open(j,"_blank")||(i.location.href=j),T.readyState=T.DONE,R(),h(j))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(_,x,w){return x=x||_.name||"download",w||(_=m(_)),navigator.msSaveOrOpenBlob(_,x)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,function(_,x,w){return new g(_,x||_.name||"download",w)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);u!==void 0&&u.exports?u.exports.saveAs=o:r!=null},{}],237:[function(e,u,d){var o,i=Object.defineProperty,n=(i(d,"__esModule",{value:!0}),d),a={GIFEncoder:()=>R,applyPalette:()=>function(Y,H,W="rgb565"){if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<H.length)throw new Error("applyPalette() only works with 256 colors or less");const X=new Uint32Array(Y.buffer),Z=X.length,q=W==="rgb444"?4096:65536,ee=new Uint8Array(Z),L=new Array(q);if(W==="rgba4444")for(let be=0;be<Z;be++){var J=X[be],I=J>>24&255,F=J>>16&255,V=J>>8&255,J=255&J,le=h(J,V,F,I),le=le in L?L[le]:L[le]=function(ie,xe,Me,Ee,Se){let Ie=0,Oe=1e100;for(let Le=0;Le<Se.length;Le++){var Xe,$=Se[Le],se=E($[3]-Ee);se>Oe||(Xe=$[0],(se+=E(Xe-ie))>Oe||(Xe=$[1],(se+=E(Xe-xe))>Oe||(Xe=$[2],(se+=E(Xe-Me))>Oe||(Oe=se,Ie=Le))))}return Ie}(J,V,F,I,H);ee[be]=le}else{const be=W==="rgb444"?m:c;for(let ie=0;ie<Z;ie++){var re=X[ie],ce=re>>16&255,ue=re>>8&255,re=255&re,de=be(re,ue,ce),de=de in L?L[de]:L[de]=function(xe,Me,Ee,Se){let Ie=0,Oe=1e100;for(let Le=0;Le<Se.length;Le++){var Xe,$=Se[Le],se=E($[0]-xe);se>Oe||(Xe=$[1],(se+=E(Xe-Me))>Oe||(Xe=$[2],(se+=E(Xe-Ee))>Oe||(Oe=se,Ie=Le)))}return Ie}(re,ue,ce,H);ee[ie]=de}}return ee},default:()=>U,nearestColor:()=>function(Y,H,W=w){return Y[T(Y,H,W)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>A,prequantize:()=>function(Y,{roundRGB:H=5,roundAlpha:W=10,oneBitAlpha:X=null}={}){const Z=new Uint32Array(Y.buffer);for(let F=0;F<Z.length;F++){var I=Z[F];let V=I>>24&255;var q,ee=I>>16&255,L=I>>8&255,I=255&I;V=j(V,W),X&&(q=typeof X=="number"?X:127,V=V<=q?0:255),I=j(I,H),L=j(L,H),ee=j(ee,H),Z[F]=V<<24|ee<<16|L<<8|I<<0}},quantize:()=>function(Y,H,W={}){var{format:X="rgb565",clearAlpha:Z=!0,clearAlphaColor:q=0,clearAlphaThreshold:ee=0,oneBitAlpha:L=!1}=W;if(!Y||!Y.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Y instanceof Uint8Array||Y instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Y=new Uint32Array(Y.buffer);let I=W.useSqrt!==!1;const F=X==="rgba4444",V=function(Fe,He){const We=He==="rgb444"?4096:65536,we=new Array(We),oe=Fe.length;if(He==="rgba4444")for(let st=0;st<oe;++st){var z=Fe[st],ae=z>>24&255,K=z>>16&255,Q=z>>8&255,z=255&z,te=h(z,Q,K,ae);let ot=te in we?we[te]:we[te]=x();ot.rc+=z,ot.gc+=Q,ot.bc+=K,ot.ac+=ae,ot.cnt++}else if(He==="rgb444")for(let st=0;st<oe;++st){var Pe=Fe[st],ye=Pe>>16&255,je=Pe>>8&255,Pe=255&Pe,Ke=m(Pe,je,ye);let ot=Ke in we?we[Ke]:we[Ke]=x();ot.rc+=Pe,ot.gc+=je,ot.bc+=ye,ot.cnt++}else for(let st=0;st<oe;++st){var Be=Fe[st],ve=Be>>16&255,Ce=Be>>8&255,Be=255&Be,rt=c(Be,Ce,ve);let ot=rt in we?we[rt]:we[rt]=x();ot.rc+=Be,ot.gc+=Ce,ot.bc+=ve,ot.cnt++}return we}(Y,X),J=V.length,le=J-1,ce=new Uint32Array(J+1);for(var ue=0,re=0;re<J;++re){const Fe=V[re];Fe!=null&&($=1/Fe.cnt,F&&(Fe.ac*=$),Fe.rc*=$,Fe.gc*=$,Fe.bc*=$,V[ue++]=Fe)}y(H)/ue<.022&&(I=!1);for(var de,be,ie,re=0;re<ue-1;++re)V[re].fw=re+1,V[re+1].bk=re,I&&(V[re].cnt=Math.sqrt(V[re].cnt));for(I&&(V[re].cnt=Math.sqrt(V[re].cnt)),re=0;re<ue;++re){_(V,re,!1);var xe=V[re].err;for(be=++ce[0];1<be&&(ie=be>>1,!(V[de=ce[ie]].err<=xe));be=ie)ce[be]=de;ce[be]=re}var Me,Ee=ue-H;for(re=0;re<Ee;){for(;;){var Se=ce[1];if((Me=V[Se]).tm>=Me.mtm&&V[Me.nn].mtm<=Me.tm)break;for(Me.mtm==le?Se=ce[1]=ce[ce[0]--]:(_(V,Se,!1),Me.tm=re),xe=V[Se].err,be=1;(ie=be+be)<=ce[0]&&(ie<ce[0]&&V[ce[ie]].err>V[ce[ie+1]].err&&ie++,!(xe<=V[de=ce[ie]].err));be=ie)ce[be]=de;ce[be]=Se}var Ie=V[Me.nn],Oe=Me.cnt,Xe=Ie.cnt,$=1/(Oe+Xe);F&&(Me.ac=$*(Oe*Me.ac+Xe*Ie.ac)),Me.rc=$*(Oe*Me.rc+Xe*Ie.rc),Me.gc=$*(Oe*Me.gc+Xe*Ie.gc),Me.bc=$*(Oe*Me.bc+Xe*Ie.bc),Me.cnt+=Ie.cnt,Me.mtm=++re,V[Ie.bk].fw=Ie.fw,V[Ie.fw].bk=Ie.bk,Ie.mtm=le}let se=[];for(re=0;;0){let Fe=g(Math.round(V[re].rc),0,255),He=g(Math.round(V[re].gc),0,255),We=g(Math.round(V[re].bc),0,255),we=255;F&&(we=g(Math.round(V[re].ac),0,255),L&&(Le=typeof L=="number"?L:127,we=we<=Le?0:255),Z&&we<=ee&&(Fe=He=We=q,we=0));var Le=F?[Fe,He,We,we]:[Fe,He,We];if(function(oe,ae){for(let z=0;z<oe.length;z++){var Q=oe[z],K=Q[0]===ae[0]&&Q[1]===ae[1]&&Q[2]===ae[2],Q=!(4<=Q.length&&4<=ae.length)||Q[3]===ae[3];if(K&&Q)return!0}return!1}(se,Le)||se.push(Le),(re=V[re].fw)==0)break}return se},snapColorsToPalette:()=>function(Y,H,W=5){if(Y.length&&H.length){var X=Y.map(I=>I.slice(0,3)),Z=W*W,q=Y[0].length;for(let I=0;I<H.length;I++){let F=H[I];F=F.length<q?[F[0],F[1],F[2],255]:F.length>q?F.slice(0,3):F.slice();var L=A(X,F.slice(0,3),w),ee=L[0],L=L[1];0<L&&L<=Z&&(Y[ee]=F)}}}};for(o in a)i(n,o,{get:a[o],enumerable:!0});var f={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function p(Y=256){let H=0,W=new Uint8Array(Y);return{get buffer(){return W.buffer},reset(){H=0},bytesView(){return W.subarray(0,H)},bytes(){return W.slice(0,H)},writeByte(Z){X(H+1),W[H]=Z,H++},writeBytes(Z,q=0,ee=Z.length){X(H+ee);for(let L=0;L<ee;L++)W[H++]=Z[L+q]},writeBytesView(Z,q=0,ee=Z.byteLength){X(H+ee),W.set(Z.subarray(q,q+ee),H),H+=ee}};function X(Z){var q=W.length;if(!(Z<=q)){Z=Math.max(Z,q*(q<1048576?2:1.125)>>>0),q!=0&&(Z=Math.max(Z,256));const ee=W;W=new Uint8Array(Z),0<H&&W.set(ee.subarray(0,H),0)}}}var s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],l=function(Y,H,W,F,Z=p(512),q=new Uint8Array(256),ee=new Int32Array(5003),L=new Int32Array(5003)){var I=ee.length,F=Math.max(2,F);q.fill(0),L.fill(0),ee.fill(-1);let V=0,J=0;var le=F+1;const ce=le;let ue=!1,re=ce,de=(1<<re)-1;var be=1<<le-1;const ie=1+be;let xe=2+be,Me=0,Ee=W[0],Se=0;for(let Le=I;Le<65536;Le*=2)++Se;Se=8-Se,Z.writeByte(F),se(be);var Ie=W.length;for(let Le=1;Le<Ie;Le++)e:{var Oe=W[Le],Xe=(Oe<<12)+Ee;let Fe=Oe<<Se^Ee;if(ee[Fe]===Xe)Ee=L[Fe];else{for(var $=Fe===0?1:I-Fe;0<=ee[Fe];)if((Fe-=$)<0&&(Fe+=I),ee[Fe]===Xe){Ee=L[Fe];break e}se(Ee),Ee=Oe,xe<4096?(L[Fe]=xe++,ee[Fe]=Xe):(ee.fill(-1),xe=2+be,ue=!0,se(be))}}return se(Ee),se(ie),Z.writeByte(0),Z.bytesView();function se(Le){for(V&=s[J],0<J?V|=Le<<J:V=Le,J+=re;8<=J;)q[Me++]=255&V,254<=Me&&(Z.writeByte(Me),Z.writeBytesView(q,0,Me),Me=0),V>>=8,J-=8;if((xe>de||ue)&&(ue?(re=ce,de=(1<<re)-1,ue=!1):(++re,de=re===12?1<<re:(1<<re)-1)),Le==ie){for(;0<J;)q[Me++]=255&V,254<=Me&&(Z.writeByte(Me),Z.writeBytesView(q,0,Me),Me=0),V>>=8,J-=8;0<Me&&(Z.writeByte(Me),Z.writeBytesView(q,0,Me),Me=0)}}};function c(Y,H,W){return Y<<8&63488|H<<2&992|W>>3}function h(Y,H,W,X){return Y>>4|240&H|(240&W)<<4|(240&X)<<8}function m(Y,H,W){return Y>>4<<8|240&H|W>>4}function g(Y,H,W){return Y<H?H:W<Y?W:Y}function y(Y){return Y*Y}function _(Y,H,W){var X=0,Z=1e100;const q=Y[H];for(var ee=q.cnt,L=q.ac,I=q.rc,F=q.gc,V=q.bc,J=q.fw;J!=0;J=Y[J].fw){var le,ce=Y[J],ue=ce.cnt,ue=ee*ue/(ee+ue);Z<=ue||(le=0,W&&Z<=(le+=ue*y(ce.ac-L))||Z<=(le+=ue*y(ce.rc-I))||Z<=(le+=ue*y(ce.gc-F))||Z<=(le+=ue*y(ce.bc-V))||(Z=le,X=J))}q.err=Z,q.nn=X}function x(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function w(Y,H){for(var W=0,X=0;X<Y.length;X++){var Z=Y[X]-H[X];W+=Z*Z}return W}function j(Y,H){return 1<H?Math.round(Y/H)*H:Y}function E(Y){return Y*Y}function T(Y,H,W=w){let X=1/0,Z=-1;for(let ee=0;ee<Y.length;ee++){var q=W(H,Y[ee]);q<X&&(X=q,Z=ee)}return Z}function A(Y,H,W=w){let X=1/0,Z=-1;for(let ee=0;ee<Y.length;ee++){var q=W(H,Y[ee]);q<X&&(X=q,Z=ee)}return[Z,X]}function R(Y={}){const{initialCapacity:H=4096,auto:W=!0}=Y,X=p(H),Z=new Uint8Array(256),q=new Int32Array(5003),ee=new Int32Array(5003);let L=!1;return{reset(){X.reset(),L=!1},finish(){X.writeByte(f.trailer)},bytes(){return X.bytes()},bytesView(){return X.bytesView()},get buffer(){return X.buffer},get stream(){return X},writeHeader:I,writeFrame(F,V,J,Ee={}){var{transparent:ce=!1,transparentIndex:ue=0,delay:$=0,palette:re=null,repeat:Ie=0,colorDepth:de=8,dispose:be=-1}=Ee;let ie=!1;if(W?L||(ie=!0,I(),L=!0):ie=Boolean(Ee.first),V=Math.max(0,Math.floor(V)),J=Math.max(0,Math.floor(J)),ie){if(!re)throw new Error("First frame must include a { palette } option");var[Ee,Oe,Me,Xe,Se=8]=[X,V,J,re,de];Xe=D(Xe.length)-1,Se=128|Se-1<<4|Xe,N(Ee,Oe),N(Ee,Me),Ee.writeBytes([Se,0,0]),P(X,re),0<=Ie&&(Xe=X,Oe=Ie,Xe.writeByte(33),Xe.writeByte(255),Xe.writeByte(11),O(Xe,"NETSCAPE2.0"),Xe.writeByte(3),Xe.writeByte(1),N(Xe,Oe),Xe.writeByte(0))}var xe,Me=Math.round($/10),Ee=X,Se=be,Ie=Me,Oe=ce,Xe=ue,$=(Ee.writeByte(33),Ee.writeByte(249),Ee.writeByte(4),Xe<0&&(Xe=0,Oe=!1),Oe=Oe?(xe=1,2):xe=0,0<=Se&&(Oe=7&Se),Oe<<=2,Ee.writeByte(0|Oe|xe),N(Ee,Ie),Ee.writeByte(Xe||0),Ee.writeByte(0),Boolean(re)&&!ie);be=X,ce=V,ue=J,xe=$?re:null,be.writeByte(44),N(be,0),N(be,0),N(be,ce),N(be,ue),xe?(ce=D(xe.length)-1,be.writeByte(128|ce)):be.writeByte(0),$&&P(X,re),[Ie,Ee,ue,ce,be=8,$,re,F]=[X,F,V,J,de,Z,q,ee],l(ue,ce,Ee,be,Ie,$,re,F)}};function I(){O(X,"GIF89a")}}function P(Y,H){var W=1<<D(H.length);for(let X=0;X<W;X++){let Z=[0,0,0];X<H.length&&(Z=H[X]),Y.writeByte(Z[0]),Y.writeByte(Z[1]),Y.writeByte(Z[2])}}function N(Y,H){Y.writeByte(255&H),Y.writeByte(H>>8&255)}function O(Y,H){for(var W=0;W<H.length;W++)Y.writeByte(H.charCodeAt(W))}function D(Y){return Math.max(Math.ceil(Math.log2(Y)),1)}var U=R},{}],238:[function(e,u,d){d.read=function(o,i,n,a,_){var p,s,l=8*_-a-1,c=(1<<l)-1,h=c>>1,m=-7,g=n?_-1:0,y=n?-1:1,_=o[i+g];for(g+=y,p=_&(1<<-m)-1,_>>=-m,m+=l;0<m;p=256*p+o[i+g],g+=y,m-=8);for(s=p&(1<<-m)-1,p>>=-m,m+=a;0<m;s=256*s+o[i+g],g+=y,m-=8);if(p===0)p=1-h;else{if(p===c)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,a),p-=h}return(_?-1:1)*s*Math.pow(2,p-a)},d.write=function(o,i,n,a,f,x){var s,l,c=8*x-f-1,h=(1<<c)-1,m=h>>1,g=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=a?0:x-1,_=a?1:-1,x=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(l=isNaN(i)?1:0,s=h):(s=Math.floor(Math.log(i)/Math.LN2),i*(a=Math.pow(2,-s))<1&&(s--,a*=2),2<=(i+=1<=s+m?g/a:g*Math.pow(2,1-m))*a&&(s++,a/=2),h<=s+m?(l=0,s=h):1<=s+m?(l=(i*a-1)*Math.pow(2,f),s+=m):(l=i*Math.pow(2,m-1)*Math.pow(2,f),s=0));8<=f;o[n+y]=255&l,y+=_,l/=256,f-=8);for(s=s<<f|l,c+=f;0<c;o[n+y]=255&s,y+=_,s/=256,c-=8);o[n+y-_]|=128*x}},{}],239:[function(e,u,d){var o;function i(K,Q){return K.b===Q.b&&K.a===Q.a}function n(K,Q){return K.b<Q.b||K.b===Q.b&&K.a<=Q.a}function a(K,Q,z){var te=Q.b-K.b,ye=z.b-Q.b;return 0<te+ye?te<ye?Q.a-K.a+te/(te+ye)*(K.a-z.a):Q.a-z.a+ye/(te+ye)*(z.a-K.a):0}function f(K,Q,z){var te=Q.b-K.b,ye=z.b-Q.b;return 0<te+ye?(Q.a-z.a)*te+(Q.a-K.a)*ye:0}function p(K,Q){return K.a<Q.a||K.a===Q.a&&K.b<=Q.b}function s(K,Q,z){var te=Q.a-K.a,ye=z.a-Q.a;return 0<te+ye?te<ye?Q.b-K.b+te/(te+ye)*(K.b-z.b):Q.b-z.b+ye/(te+ye)*(z.b-K.b):0}function l(K,Q,z){var te=Q.a-K.a,ye=z.a-Q.a;return 0<te+ye?(Q.b-z.b)*te+(Q.b-K.b)*ye:0}function c(K,Q,z,te){return(K=K<0?0:K)<=(z=z<0?0:z)?z===0?(Q+te)/2:Q+K/(K+z)*(te-Q):te+z/(K+z)*(Q-te)}function h(K){var Q=x(K.b);return j(Q,K.c),j(Q.b,K.c),E(Q,K.a),Q}function m(K,Q){var z=!1,te=!1;K!==Q&&(Q.a!==K.a&&(te=!0,A(Q.a,K.a)),Q.d!==K.d&&(z=!0,R(Q.d,K.d)),w(Q,K),te||(j(Q,K.a),K.a.c=K),z||(E(Q,K.d),K.d.a=K))}function g(K){var Q=K.b,z=!1;K.d!==K.b.d&&(z=!0,R(K.d,K.b.d)),K.c===K?A(K.a,null):(K.b.d.a=K.b.e,K.a.c=K.c,w(K,K.b.e),z||E(K,K.d)),Q.c===Q?(A(Q.a,null),R(Q.d,null)):(K.d.a=Q.b.e,Q.a.c=Q.c,w(Q,Q.b.e)),T(K)}function y(K){var Q=x(K),z=Q.b;return w(Q,K.e),Q.a=K.b.a,j(z,Q.a),Q.d=z.d=K.d,Q=Q.b,w(K.b,K.b.b.e),w(K.b,Q),K.b.a=Q.a,Q.b.a.c=Q.b,Q.b.d=K.b.d,Q.f=K.f,Q.b.f=K.b.f,Q}function _(K,Q){var z=!1,te=x(K),ye=te.b;return Q.d!==K.d&&(z=!0,R(Q.d,K.d)),w(te,K.e),w(ye,Q),te.a=K.b.a,ye.a=Q.a,te.d=ye.d=K.d,K.d.a=ye,z||E(te,K.d),te}function x(K){var Q=new Me,z=new Me,te=K.b.h;return(((z.h=te).b.h=Q).h=K).b.h=z,Q.b=z,((Q.c=Q).e=z).b=Q,(z.c=z).e=Q}function w(K,Q){var z=K.c,te=Q.c;z.b.e=Q,(te.b.e=K).c=te,Q.c=z}function j(K,Q){var z=Q.f,te=new Se(Q,z);for(z.e=te,z=(Q.f=te).c=K;z.a=te,(z=z.c)!==K;);}function E(K,Q){var z=Q.d,te=new xe(Q,z);for(z.b=te,(Q.d=te).a=K,te.c=Q.c,z=K;z.d=te,(z=z.e)!==K;);}function T(K){var Q=K.h;K=K.b.h,(Q.b.h=K).b.h=Q}function A(K,Q){for(var z=K.c,te=z;te.a=Q,(te=te.c)!==z;);z=K.f,((te=K.e).f=z).e=te}function R(K,Q){for(var z=K.a,te=z;te.d=Q,(te=te.e)!==z;);z=K.d,((te=K.b).d=z).b=te}function P(K){var Q=0;return Math.abs(K[1])>Math.abs(K[0])&&(Q=1),Q=Math.abs(K[2])>Math.abs(K[Q])?2:Q}function N(K,Q){K.f+=Q.f,K.b.f+=Q.b.f}function O(K,Q,z){return K=K.a,Q=Q.a,z=z.a,Q.b.a===K?z.b.a===K?n(Q.a,z.a)?f(z.b.a,Q.a,z.a)<=0:0<=f(Q.b.a,z.a,Q.a):f(z.b.a,K,z.a)<=0:z.b.a===K?0<=f(Q.b.a,K,Q.a):(Q=a(Q.b.a,K,Q.a),(K=a(z.b.a,K,z.a))<=Q)}function D(K){K.a.i=null;var Q=K.e;Q.a.c=Q.c,Q.c.a=Q.a,K.e=null}function U(K,Q){g(K.a),K.c=!1,(K.a=Q).i=K}function Y(K){for(var Q=K.a.a;(K=ae(K)).a.a===Q;);return K.c&&(U(K,Q=_(oe(K).a.b,K.a.e)),K=ae(K)),K}function H(K,Q,z){var te=new we;return te.a=z,te.e=ue(K.f,Q.e,te),z.i=te}function W(K,Q){switch(K.s){case 100130:return(1&Q)!=0;case 100131:return Q!==0;case 100132:return 0<Q;case 100133:return Q<0;case 100134:return 2<=Q||Q<=-2}return!1}function X(K){var Q=K.a,z=Q.d;z.c=K.d,z.a=Q,D(K)}function Z(K,Q,z){for(Q=(K=Q).a;K!==z;){K.c=!1;var te=oe(K),ye=te.a;if(ye.a!==Q.a){if(!te.c){X(K);break}U(te,ye=_(Q.c.b,ye.b))}Q.c!==ye&&(m(ye.b.e,ye),m(Q,ye)),X(K),Q=te.a,K=te}return Q}function q(K,Q,z,te,ye,je){for(var Pe=!0;H(K,Q,z.b),(z=z.c)!==te;);for(ye===null&&(ye=oe(Q).a.b.c);(z=(te=oe(Q)).a.b).a===ye.a;)z.c!==ye&&(m(z.b.e,z),m(ye.b.e,z)),te.f=Q.f-z.f,te.d=W(K,te.f),Q.b=!0,!Pe&&F(K,Q)&&(N(z,ye),D(Q),g(ye)),Pe=!1,Q=te,ye=z;Q.b=!0,je&&J(K,Q)}function ee(K,Q,z,te,ye){var je=[Q.g[0],Q.g[1],Q.g[2]];Q.d=null,Q.d=K.o&&K.o(je,z,te,K.c)||null,Q.d===null&&(ye?K.n||(ie(K,100156),K.n=!0):Q.d=z[0])}function L(K,Q,z){var te=[null,null,null,null];te[0]=Q.a.d,te[1]=z.a.d,ee(K,Q.a,te,[.5,.5,0,0],!1),m(Q,z)}function I(K,Q,z,te,ye){var je=Math.abs(Q.b-K.b)+Math.abs(Q.a-K.a),Pe=Math.abs(z.b-K.b)+Math.abs(z.a-K.a),Ke=ye+1;te[ye]=.5*Pe/(je+Pe),te[Ke]=.5*je/(je+Pe),K.g[0]+=te[ye]*Q.g[0]+te[Ke]*z.g[0],K.g[1]+=te[ye]*Q.g[1]+te[Ke]*z.g[1],K.g[2]+=te[ye]*Q.g[2]+te[Ke]*z.g[2]}function F(K,Q){var z=oe(Q),te=Q.a,ye=z.a;if(n(te.a,ye.a)){if(0<f(ye.b.a,te.a,ye.a))return;if(i(te.a,ye.a)){if(te.a!==ye.a){var z=K.e,je=te.a.h;if(0<=je){var Pe=(z=z.b).d,Ke=z.e,ve=z.c,Ce=ve[je];Pe[Ce]=Pe[z.a],(ve[Pe[Ce]]=Ce)<=--z.a&&(Ce<=1||n(Ke[Pe[Ce>>1]],Ke[Pe[Ce]])?He:We)(z,Ce),Ke[je]=null,ve[je]=z.b,z.b=je}else for(z.c[-(je+1)]=null;0<z.a&&z.c[z.d[z.a-1]]===null;)--z.a;L(K,ye.b.e,te)}}else y(ye.b),m(te,ye.b.e),Q.b=z.b=!0}else{if(f(te.b.a,ye.a,te.a)<0)return;ae(Q).b=Q.b=!0,y(te.b),m(ye.b.e,te)}return 1}function V(K,Q){var z=oe(Q),te=Q.a,ye=z.a,je=te.a,Pe=ye.a,Ke=te.b.a,ve=ye.b.a,Ce=new Se;if(f(Ke,K.a,je),f(ve,K.a,Pe),!(je===Pe||Math.min(je.a,Ke.a)>Math.max(Pe.a,ve.a))){if(n(je,Pe)){if(0<f(ve,je,Pe))return}else if(f(Ke,Pe,je)<0)return;var Be,rt,st=Ke,ot=je,ft=ve,ht=Pe;if(n(st,ot)||(Be=st,st=ot,ot=Be),n(ft,ht)||(Be=ft,ft=ht,ht=Be),n(st,ft)||(Be=st,st=ft,ft=Be,Be=ot,ot=ht,ht=Be),n(ft,ot)?n(ot,ht)?((Be=a(st,ft,ot))+(rt=a(ft,ot,ht))<0&&(Be=-Be,rt=-rt),Ce.b=c(Be,ft.b,rt,ot.b)):((Be=f(st,ft,ot))+(rt=-f(st,ht,ot))<0&&(Be=-Be,rt=-rt),Ce.b=c(Be,ft.b,rt,ht.b)):Ce.b=(ft.b+ot.b)/2,p(st,ot)||(Be=st,st=ot,ot=Be),p(ft,ht)||(Be=ft,ft=ht,ht=Be),p(st,ft)||(Be=st,st=ft,ft=Be,Be=ot,ot=ht,ht=Be),p(ft,ot)?p(ot,ht)?((Be=s(st,ft,ot))+(rt=s(ft,ot,ht))<0&&(Be=-Be,rt=-rt),Ce.a=c(Be,ft.a,rt,ot.a)):((Be=l(st,ft,ot))+(rt=-l(st,ht,ot))<0&&(Be=-Be,rt=-rt),Ce.a=c(Be,ft.a,rt,ht.a)):Ce.a=(ft.a+ot.a)/2,n(Ce,K.a)&&(Ce.b=K.a.b,Ce.a=K.a.a),st=n(je,Pe)?je:Pe,n(st,Ce)&&(Ce.b=st.b,Ce.a=st.a),i(Ce,je)||i(Ce,Pe))return F(K,Q),0;if(!i(Ke,K.a)&&0<=f(Ke,K.a,Ce)||!i(ve,K.a)&&f(ve,K.a,Ce)<=0){if(ve===K.a)y(te.b),m(ye.b,te),te=oe(Q=Y(Q)).a,Z(K,oe(Q),z),q(K,Q,te.b.e,te,te,!0);else{if(Ke!==K.a)return 0<=f(Ke,K.a,Ce)&&(ae(Q).b=Q.b=!0,y(te.b),te.a.b=K.a.b,te.a.a=K.a.a),void(f(ve,K.a,Ce)<=0&&(Q.b=z.b=!0,y(ye.b),ye.a.b=K.a.b,ye.a.a=K.a.a));for(y(ye.b),m(te.e,ye.b.e),Pe=(je=z=Q).a.b.a;(je=ae(je)).a.b.a===Pe;);je=oe(Q=je).a.b.c,z.a=ye.b.e,q(K,Q,(ye=Z(K,z,null)).c,te.b.c,je,!0)}return 1}y(te.b),y(ye.b),m(ye.b.e,te),te.a.b=Ce.b,te.a.a=Ce.a,te.a.h=Oe(K.e,te.a),te=te.a,ye=[0,0,0,0],Ce=[je.d,Ke.d,Pe.d,ve.d],te.g[0]=te.g[1]=te.g[2]=0,I(te,je,Ke,ye,0),I(te,Pe,ve,ye,2),ee(K,te,Ce,ye,!0),ae(Q).b=Q.b=z.b=!0}}function J(K,Q){for(var z=oe(Q);;){for(;z.b;)z=oe(Q=z);if(!Q.b&&((Q=ae(z=Q))===null||!Q.b))break;Q.b=!1;var te=Q.a,ye=z.a;if(je=te.b.a!==ye.b.a)e:{var je,Pe=oe(je=Q),Ke=je.a,ve=Pe.a,Ce=void 0;if(n(Ke.b.a,ve.b.a)){if(f(Ke.b.a,ve.b.a,Ke.a)<0){je=!1;break e}ae(je).b=je.b=!0,Ce=y(Ke),m(ve.b,Ce),Ce.d.c=je.d}else{if(0<f(ve.b.a,Ke.b.a,ve.a)){je=!1;break e}je.b=Pe.b=!0,Ce=y(ve),m(Ke.e,ve.b),Ce.b.d.c=je.d}je=!0}if(je&&(z.c?(D(z),g(ye),ye=(z=oe(Q)).a):Q.c&&(D(Q),g(te),te=(Q=ae(z)).a)),te.a!==ye.a){if(te.b.a===ye.b.a||Q.c||z.c||te.b.a!==K.a&&ye.b.a!==K.a)F(K,Q);else if(V(K,Q))break}te.a===ye.a&&te.b.a===ye.b.a&&(N(ye,te),D(Q),g(te),Q=ae(z))}}function le(K,Q){var z=new we,te=h(K.b);te.a.b=4e150,te.a.a=Q,te.b.a.b=-4e150,te.b.a.a=Q,K.a=te.b.a,z.a=te,z.f=0,z.d=!1,z.c=!1,z.h=!0,z.b=!1,te=ue(te=K.f,te.a,z),z.e=te}function ce(K){this.a=new re,this.b=K,this.c=O}function ue(K,Q,z){for(;(Q=Q.c).b!==null&&!K.c(K.b,Q.b,z););return K=new re(z,Q.a,Q),Q.a.c=K,Q.a=K}function re(K,Q,z){this.b=K||null,this.a=Q||this,this.c=z||this}function de(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function be(K,Q){if(K.d!==Q)for(;K.d!==Q;)if(K.d<Q)switch(K.d){case 0:ie(K,100151),K.u(null);break;case 1:ie(K,100152),K.t()}else switch(K.d){case 2:ie(K,100154),K.v();break;case 1:ie(K,100153),K.w()}}function ie(K,Q){K.p&&K.p(Q,K.c)}function xe(K,Q){this.b=K||this,this.d=Q||this,this.a=null,this.c=!1}function Me(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ee(){this.c=new Se,this.a=new xe,this.b=new Me,this.d=new Me,this.b.b=this.d,this.d.b=this.b}function Se(K,Q){this.e=K||this,this.f=Q||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Ie(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new $}function Oe(K,Q){var z,te,ye;return K.e?(2*(te=++(z=K.b).a)>z.f&&(z.f*=2,z.c=se(z.c,z.f+1)),z.b===0?ye=te:(ye=z.b,z.b=z.c[z.b]),z.e[ye]=Q,z.c[ye]=te,z.d[te]=ye,z.h&&We(z,te),ye):(z=K.a++,K.c[z]=Q,-(z+1))}function Xe(K){if(K.a===0)return Fe(K.b);var Q=K.c[K.d[K.a-1]];if(K.b.a!==0&&n(Le(K.b),Q))return Fe(K.b);for(;--K.a,0<K.a&&K.c[K.d[K.a-1]]===null;);return Q}function $(){this.d=se([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function se(K,Q){for(var z=Array(Q),te=0;te<K.length;te++)z[te]=K[te];for(;te<Q;te++)z[te]=0;return z}function Le(K){return K.e[K.d[1]]}function Fe(K){var Q=K.d,z=K.e,te=K.c,ye=Q[1],je=z[ye];return 0<K.a&&(Q[1]=Q[K.a],te[Q[1]]=1,z[ye]=null,te[ye]=K.b,K.b=ye,0<--K.a&&He(K,1)),je}function He(K,Q){for(var z=K.d,te=K.e,ye=K.c,je=Q,Pe=z[je];;){var Ke=je<<1,ve=(Ke<K.a&&n(te[z[Ke+1]],te[z[Ke]])&&(Ke+=1),z[Ke]);if(Ke>K.a||n(te[Pe],te[ve])){ye[z[je]=Pe]=je;break}ye[z[je]=ve]=je,je=Ke}}function We(K,Q){for(var z=K.d,te=K.e,ye=K.c,je=Q,Pe=z[je];;){var Ke=je>>1,ve=z[Ke];if(Ke==0||n(te[ve],te[Pe])){ye[z[je]=Pe]=je;break}ye[z[je]=ve]=je,je=Ke}}function we(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function oe(K){return K.e.c.b}function ae(K){return K.e.a.b}(o=de.prototype).x=function(){be(this,0)},o.B=function(K,Q){switch(K){case 100142:return;case 100140:switch(Q){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=Q)}break;case 100141:return void(this.m=!!Q);default:return void ie(this,100900)}ie(this,100901)},o.y=function(K){switch(K){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ie(this,100900)}return!1},o.A=function(K,Q,z){this.j[0]=K,this.j[1]=Q,this.j[2]=z},o.z=function(K,Q){var z=Q||null;switch(K){case 100100:case 100106:this.h=z;break;case 100104:case 100110:this.l=z;break;case 100101:case 100107:this.k=z;break;case 100102:case 100108:this.i=z;break;case 100103:case 100109:this.p=z;break;case 100105:case 100111:this.o=z;break;case 100112:this.r=z;break;default:ie(this,100900)}},o.C=function(K,Q){var z=!1,te=[0,0,0];be(this,2);for(var ye=0;ye<3;++ye){var je=K[ye];je<-1e150&&(je=-1e150,z=!0),1e150<je&&(je=1e150,z=!0),te[ye]=je}z&&ie(this,100155),(z=this.q)===null?m(z=h(this.b),z.b):(y(z),z=z.e),z.a.d=Q,z.a.g[0]=te[0],z.a.g[1]=te[1],z.a.g[2]=te[2],z.f=1,z.b.f=-1,this.q=z},o.u=function(K){be(this,0),this.d=1,this.b=new Ee,this.c=K},o.t=function(){be(this,1),this.d=2,this.q=null},o.v=function(){be(this,2),this.d=1},o.w=function(){be(this,1),this.d=0;var K,Q,z=this.j[0],te=this.j[1],ye=this.j[2],je=!1,Pe=[z,te,ye];if(z===0&&te===0&&ye===0){for(var te=[-2e150,-2e150,-2e150],Ke=[2e150,2e150,2e150],ye=[],ve=[],z=(je=this.b.c).e;z!==je;z=z.e)for(var Ce=0;Ce<3;++Ce){var Be=z.g[Ce];Be<Ke[Ce]&&(Ke[Ce]=Be,ve[Ce]=z),Be>te[Ce]&&(te[Ce]=Be,ye[Ce]=z)}if(te[1]-Ke[1]>te[z=0]-Ke[0]&&(z=1),Ke[z=te[2]-Ke[2]>te[z]-Ke[z]?2:z]>=te[z])Pe[0]=0,Pe[1]=0,Pe[2]=1;else{for(Ke=ve[z],ye=ye[z],ve=[te=0,0,0],Ke=[Ke.g[0]-ye.g[0],Ke.g[1]-ye.g[1],Ke.g[2]-ye.g[2]],Ce=[0,0,0],z=je.e;z!==je;z=z.e)Ce[0]=z.g[0]-ye.g[0],Ce[1]=z.g[1]-ye.g[1],Ce[2]=z.g[2]-ye.g[2],ve[0]=Ke[1]*Ce[2]-Ke[2]*Ce[1],ve[1]=Ke[2]*Ce[0]-Ke[0]*Ce[2],ve[2]=Ke[0]*Ce[1]-Ke[1]*Ce[0],te<(Be=ve[0]*ve[0]+ve[1]*ve[1]+ve[2]*ve[2])&&(te=Be,Pe[0]=ve[0],Pe[1]=ve[1],Pe[2]=ve[2]);te<=0&&(Pe[0]=Pe[1]=Pe[2]=0,Pe[P(Ke)]=1)}je=!0}for(ve=P(Pe),z=this.b.c,te=(ve+1)%3,ye=(ve+2)%3,ve=0<Pe[ve]?1:-1,Pe=z.e;Pe!==z;Pe=Pe.e)Pe.b=Pe.g[te],Pe.a=ve*Pe.g[ye];if(je){for(Pe=0,z=(je=this.b.a).b;z!==je;z=z.b)if(!((te=z.a).f<=0))for(;Pe+=(te.a.b-te.b.a.b)*(te.a.a+te.b.a.a),(te=te.e)!==z.a;);if(Pe<0)for(je=(Pe=this.b.c).e;je!==Pe;je=je.e)je.a=-je.a}for(this.n=!1,Pe=this.b.b,z=Pe.h;z!==Pe;z=je)je=z.h,te=z.e,i(z.a,z.b.a)&&z.e.e!==z&&(L(this,te,z),g(z),te=(z=te).e),te.e===z&&(te!==z&&(te!==je&&te!==je.b||(je=je.h),g(te)),z!==je&&z!==je.b||(je=je.h),g(z));for(this.e=Pe=new Ie,je=this.b.c,z=je.e;z!==je;z=z.e)z.h=Oe(Pe,z);var rt=Pe;rt.d=[];for(var st=0;st<rt.a;st++)rt.d[st]=st;rt.d.sort(function(ht){return function(Bt,Rt){return n(ht[Bt],ht[Rt])?1:-1}}(rt.c)),rt.e=!0;for(var ot=rt.b,ft=ot.a;1<=ft;--ft)He(ot,ft);for(ot.h=!0,this.f=new ce(this),le(this,-4e150),le(this,4e150);(Pe=Xe(this.e))!==null;){for(;;){e:if((z=this.e).a===0)je=Le(z.b);else if(je=z.c[z.d[z.a-1]],z.b.a!==0&&n(z=Le(z.b),je)){je=z;break e}if(je===null||!i(je,Pe))break;je=Xe(this.e),L(this,Pe.c,je.c)}(function ht(Bt,Rt){for(var Wt,At=(Bt.a=Rt).c;At.i===null;)if((At=At.c)===Rt.c){var At=Bt,Jt=Rt;(pe=new we).a=Jt.c.b;for(var ze=(Ft=At.f).a;(ze=ze.a).b!==null&&!Ft.c(Ft.b,pe,ze.b););var Ft,wr,mr=oe(Ft=ze.b),pe=Ft.a,ze=mr.a;return void(f(pe.b.a,Jt,pe.a)===0?i((pe=Ft.a).a,Jt)||i(pe.b.a,Jt)||(y(pe.b),Ft.c&&(g(pe.c),Ft.c=!1),m(Jt.c,pe),ht(At,Jt)):(wr=n(ze.b.a,pe.b.a)?Ft:mr,mr=void 0,Ft.d||wr.c?(mr=wr===Ft?_(Jt.c.b,pe.e):_(ze.b.c.b,Jt.c).b,wr.c?U(wr,mr):((Ft=H(pe=At,Ft,mr)).f=ae(Ft).f+Ft.a.f,Ft.d=W(pe,Ft.f)),ht(At,Jt)):q(At,Ft,Jt.c,Jt.c,null,!0)))}Ft=(pe=oe(At=Y(At.i))).a,(pe=Z(Bt,pe,null)).c===Ft?(pe=(Ft=pe).c,ze=oe(At),mr=At.a,wr=ze.a,Wt=!1,mr.b.a!==wr.b.a&&V(Bt,At),i(mr.a,Bt.a)&&(m(pe.b.e,mr),pe=oe(At=Y(At)).a,Z(Bt,oe(At),ze),Wt=!0),i(wr.a,Bt.a)&&(m(Ft,wr.b.e),Ft=Z(Bt,ze,null),Wt=!0),Wt?q(Bt,At,Ft.c,pe,pe,!0):(Jt=n(wr.a,mr.a)?wr.b.e:mr,q(Bt,At,Jt=_(Ft.c.b,Jt),Jt.c,Jt.c,!1),Jt.b.i.c=!0,J(Bt,At))):q(Bt,At,pe.c,Ft,Ft,!0)})(this,Pe)}for(this.a=this.f.a.a.b.a.a,Pe=0;(je=this.f.a.a.b)!==null;)je.h||++Pe,D(je);for(this.f=null,(Pe=this.e).b=null,Pe.d=null,this.e=Pe.c=null,Pe=this.b,z=Pe.a.b;z!==Pe.a;z=je)je=z.b,(z=z.a).e.e===z&&(N(z.c,z),g(z));if(!this.n){if(Pe=this.b,this.m)for(z=Pe.b.h;z!==Pe.b;z=je)je=z.h,z.b.d.c!==z.d.c?z.f=z.d.c?1:-1:g(z);else for(z=Pe.a.b;z!==Pe.a;z=je)if(je=z.b,z.c){for(z=z.a;n(z.b.a,z.a);z=z.c.b);for(;n(z.a,z.b.a);z=z.e);for(te=z.c.b,ye=void 0;z.e!==te;)if(n(z.b.a,te.a)){for(;te.e!==z&&(n((Q=te.e).b.a,Q.a)||f(te.a,te.b.a,te.e.b.a)<=0);)te=(ye=_(te.e,te)).b;te=te.c.b}else{for(;te.e!==z&&(n((K=z.c.b).a,K.b.a)||0<=f(z.b.a,z.a,z.c.b.a));)z=(ye=_(z,z.c.b)).b;z=z.e}for(;te.e.e!==z;)ye=_(te.e,te),te=ye.b}if(this.h||this.i||this.k||this.l)if(this.m){for(je=(Pe=this.b).a.b;je!==Pe.a;je=je.b)if(je.c){for(this.h&&this.h(2,this.c),z=je.a;this.k&&this.k(z.a.d,this.c),(z=z.e)!==je.a;);this.i&&this.i(this.c)}}else{for(Pe=this.b,je=!!this.l,z=!1,te=-1,ye=Pe.a.d;ye!==Pe.a;ye=ye.d)if(ye.c)for(z||(this.h&&this.h(4,this.c),z=!0),ve=ye.a;je&&(Ke=ve.b.d.c?0:1,te!==Ke&&(te=Ke,this.l&&this.l(!!te,this.c))),this.k&&this.k(ve.a.d,this.c),(ve=ve.e)!==ye.a;);z&&this.i&&this.i(this.c)}if(this.r){for(Pe=this.b,z=Pe.a.b;z!==Pe.a;z=je)if(je=z.b,!z.c){for(ye=(te=z.a).e,ve=void 0;ye=(ve=ye).e,(ve.d=null)===ve.b.d&&(ve.c===ve?A(ve.a,null):(ve.a.c=ve.c,w(ve,ve.b.e)),(Ke=ve.b).c===Ke?A(Ke.a,null):(Ke.a.c=Ke.c,w(Ke,Ke.b.e)),T(ve)),ve!==te;);te=z.d,((z=z.b).d=te).b=z}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:de,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},de.prototype.gluDeleteTess=de.prototype.x,de.prototype.gluTessProperty=de.prototype.B,de.prototype.gluGetTessProperty=de.prototype.y,de.prototype.gluTessNormal=de.prototype.A,de.prototype.gluTessCallback=de.prototype.z,de.prototype.gluTessVertex=de.prototype.C,de.prototype.gluTessBeginPolygon=de.prototype.u,de.prototype.gluTessBeginContour=de.prototype.t,de.prototype.gluTessEndContour=de.prototype.v,de.prototype.gluTessEndPolygon=de.prototype.w,u!==void 0&&(u.exports=this.libtess)},{}],240:[function(e,u,d){function o(n,a,f,p){var s=0,l=(p=p===void 0?{}:p).loop===void 0?null:p.loop,c=p.palette===void 0?null:p.palette;if(a<=0||f<=0||65535<a||65535<f)throw new Error("Width/Height invalid.");function h(E){if(E=E.length,E<2||256<E||E&E-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return E}n[s++]=71,n[s++]=73,n[s++]=70,n[s++]=56,n[s++]=57,n[s++]=97;var m=0,g=0;if(c!==null){for(var y=h(c);y>>=1;)++m;if(y=1<<m,--m,p.background!==void 0){if(y<=(g=p.background))throw new Error("Background index out of range.");if(g===0)throw new Error("Background index explicitly passed as 0.")}}if(n[s++]=255&a,n[s++]=a>>8&255,n[s++]=255&f,n[s++]=f>>8&255,n[s++]=(c!==null?128:0)|m,n[s++]=g,n[s++]=0,c!==null)for(var _=0,x=c.length;_<x;++_){var w=c[_];n[s++]=w>>16&255,n[s++]=w>>8&255,n[s++]=255&w}if(l!==null){if(l<0||65535<l)throw new Error("Loop count invalid.");n[s++]=33,n[s++]=255,n[s++]=11,n[s++]=78,n[s++]=69,n[s++]=84,n[s++]=83,n[s++]=67,n[s++]=65,n[s++]=80,n[s++]=69,n[s++]=50,n[s++]=46,n[s++]=48,n[s++]=3,n[s++]=1,n[s++]=255&l,n[s++]=l>>8&255,n[s++]=0}var j=!1;this.addFrame=function(E,T,A,R,P,N){if(j===!0&&(--s,j=!1),N=N===void 0?{}:N,E<0||T<0||65535<E||65535<T)throw new Error("x/y invalid.");if(A<=0||R<=0||65535<A||65535<R)throw new Error("Width/Height invalid.");if(P.length<A*R)throw new Error("Not enough pixels for the frame size.");var O=!0,D=N.palette;if(D==null&&(O=!1,D=c),D==null)throw new Error("Must supply either a local or global palette.");for(var Y=h(D),U=0;Y>>=1;)++U;var Y=1<<U,H=N.delay===void 0?0:N.delay,W=N.disposal===void 0?0:N.disposal;if(W<0||3<W)throw new Error("Disposal out of range.");var X=!1,Z=0;if(N.transparent!==void 0&&N.transparent!==null&&(X=!0,(Z=N.transparent)<0||Y<=Z))throw new Error("Transparent color index.");if(W===0&&!X&&H===0||(n[s++]=33,n[s++]=249,n[s++]=4,n[s++]=W<<2|(X===!0?1:0),n[s++]=255&H,n[s++]=H>>8&255,n[s++]=Z,n[s++]=0),n[s++]=44,n[s++]=255&E,n[s++]=E>>8&255,n[s++]=255&T,n[s++]=T>>8&255,n[s++]=255&A,n[s++]=A>>8&255,n[s++]=255&R,n[s++]=R>>8&255,n[s++]=O===!0?128|U-1:0,O===!0)for(var q=0,ee=D.length;q<ee;++q){var L=D[q];n[s++]=L>>16&255,n[s++]=L>>8&255,n[s++]=255&L}return s=function(I,F,V,J){I[F++]=V;var le=F++,ce=1<<V,ue=ce-1,re=1+ce,de=1+re,be=V+1,ie=0,xe=0;function Me(Fe){for(;Fe<=ie;)I[F++]=255&xe,xe>>=8,ie-=8,F===le+256&&(I[le]=255,le=F++)}function Ee(Fe){xe|=Fe<<ie,ie+=be,Me(8)}var Se=J[0]&ue,Ie={};Ee(ce);for(var Oe=1,Xe=J.length;Oe<Xe;++Oe){var $=J[Oe]&ue,se=Se<<8|$,Le=Ie[se];if(Le===void 0){for(xe|=Se<<ie,ie+=be;8<=ie;)I[F++]=255&xe,xe>>=8,ie-=8,F===le+256&&(I[le]=255,le=F++);de===4096?(Ee(ce),de=1+re,be=V+1,Ie={}):(1<<be<=de&&++be,Ie[se]=de++),Se=$}else Se=Le}return Ee(Se),Ee(re),Me(1),le+1===F?I[le]=0:(I[le]=F-le-1,I[F++]=0),F}(n,s,U<2?2:U,P)},this.end=function(){return j===!1&&(n[s++]=59,j=!0),s},this.getOutputBuffer=function(){return n},this.setOutputBuffer=function(E){n=E},this.getOutputBufferPosition=function(){return s},this.setOutputBufferPosition=function(E){s=E}}function i(n,a,f,p){for(var s=n[a++],l=1<<s,c=1+l,h=1+c,m=s+1,g=(1<<m)-1,y=0,_=0,x=0,w=n[a++],j=new Int32Array(4096),E=null;;){for(;y<16&&w!==0;)_|=n[a++]<<y,y+=8,w===1?w=n[a++]:--w;if(y<m)break;var T=_&g;if(_>>=m,y-=m,T==l)h=1+c,g=(1<<(m=s+1))-1,E=null;else{if(T==c)break;for(var A=T<h?T:E,R=0,P=A;l<P;)P=j[P]>>8,++R;var N=P;if(p<x+R+(A!==T?1:0))return void console.log("Warning, gif stream longer than expected.");f[x++]=N;var O=x+=R;for(A!==T&&(f[x++]=N),P=A;R--;)P=j[P],f[--O]=255&P,P>>=8;E!==null&&h<4096&&(j[h++]=E<<8|N,g+1<=h&&m<12&&(++m,g=g<<1|1)),E=T}}x!==p&&console.log("Warning, gif stream shorter than expected.")}try{d.GifWriter=o,d.GifReader=function(n){var a=0;if(n[a++]!==71||n[a++]!==73||n[a++]!==70||n[a++]!==56||(n[a++]+1&253)!=56||n[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var f=n[a++]|n[a++]<<8,p=n[a++]|n[a++]<<8,s=n[a++],l=1<<1+(7&s),c=(n[a++],n[a++],null),h=null,m=(s>>7&&(c=a,a+=3*(h=l)),!0),g=[],y=0,_=null,x=0,w=null;for(this.width=f,this.height=p;m&&a<n.length;)switch(n[a++]){case 33:switch(n[a++]){case 255:if(n[a]!==11||n[a+1]==78&&n[a+2]==69&&n[a+3]==84&&n[a+4]==83&&n[a+5]==67&&n[a+6]==65&&n[a+7]==80&&n[a+8]==69&&n[a+9]==50&&n[a+10]==46&&n[a+11]==48&&n[a+12]==3&&n[a+13]==1&&n[a+16]==0)a+=14,w=n[a++]|n[a++]<<8,a++;else for(a+=12;;){if(!(0<=(E=n[a++])))throw Error("Invalid block size");if(E===0)break;a+=E}break;case 249:if(n[a++]!==4||n[a+4]!==0)throw new Error("Invalid graphics extension block.");var j=n[a++],y=n[a++]|n[a++]<<8,_=n[a++];!(1&j)&&(_=null),x=j>>2&7,a++;break;case 254:for(;;){if(!(0<=(E=n[a++])))throw Error("Invalid block size");if(E===0)break;a+=E}break;default:throw new Error("Unknown graphic control label: 0x"+n[a-1].toString(16))}break;case 44:var E,T=n[a++]|n[a++]<<8,A=n[a++]|n[a++]<<8,R=n[a++]|n[a++]<<8,P=n[a++]|n[a++]<<8,H=n[a++],N=H>>6&1,O=1<<1+(7&H),D=c,U=h,Y=!1,H=(H>>7&&(Y=!0,D=a,a+=3*(U=O)),a);for(a++;;){if(!(0<=(E=n[a++])))throw Error("Invalid block size");if(E===0)break;a+=E}g.push({x:T,y:A,width:R,height:P,has_local_palette:Y,palette_offset:D,palette_size:U,data_offset:H,data_length:a-H,transparent_index:_,interlaced:!!N,delay:y,disposal:x});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+n[a-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return w},this.frameInfo=function(W){if(W<0||W>=g.length)throw new Error("Frame index out of range.");return g[W]},this.decodeAndBlitFrameBGRA=function(W,X){for(var W=this.frameInfo(W),Z=W.width*W.height,q=new Uint8Array(Z),ee=(i(n,W.data_offset,q,Z),W.palette_offset),L=W.transparent_index,I=(L===null&&(L=256),W.width),F=f-I,V=I,J=4*(W.y*f+W.x),le=4*((W.y+W.height)*f+W.x),ce=J,ue=4*F,re=(W.interlaced===!0&&(ue+=4*f*7),8),de=0,be=q.length;de<be;++de){var ie,xe,Me=q[de];V===0&&(V=I,le<=(ce+=ue)&&(ue=4*F+4*f*(re-1),ce=J+(I+F)*(re<<1),re>>=1)),Me===L?ce+=4:(ie=n[ee+3*Me],xe=n[ee+3*Me+1],Me=n[ee+3*Me+2],X[ce++]=Me,X[ce++]=xe,X[ce++]=ie,X[ce++]=255),--V}},this.decodeAndBlitFrameRGBA=function(W,X){for(var W=this.frameInfo(W),Z=W.width*W.height,q=new Uint8Array(Z),ee=(i(n,W.data_offset,q,Z),W.palette_offset),L=W.transparent_index,I=(L===null&&(L=256),W.width),F=f-I,V=I,J=4*(W.y*f+W.x),le=4*((W.y+W.height)*f+W.x),ce=J,ue=4*F,re=(W.interlaced===!0&&(ue+=4*f*7),8),de=0,be=q.length;de<be;++de){var ie,xe,Me=q[de];V===0&&(V=I,le<=(ce+=ue)&&(ue=4*F+4*f*(re-1),ce=J+(I+F)*(re<<1),re>>=1)),Me===L?ce+=4:(ie=n[ee+3*Me],xe=n[ee+3*Me+1],Me=n[ee+3*Me+2],X[ce++]=ie,X[ce++]=xe,X[ce++]=Me,X[ce++]=255),--V}}}}catch{}},{}],241:[function(e,u,d){(function(o){var i,n;i=this,n=function(a){function f(k){if(this==null)throw TypeError();var S,M=String(this),C=M.length,k=k?Number(k):0;if(!((k=k!=k?0:k)<0||C<=k))return 55296<=(S=M.charCodeAt(k))&&S<=56319&&k+1<C&&56320<=(C=M.charCodeAt(k+1))&&C<=57343?1024*(S-55296)+C-56320+65536:S}String.prototype.codePointAt||((p=function(){try{var v={},S=Object.defineProperty,M=S(v,v,v)&&S}catch{}return M}())?p(String.prototype,"codePointAt",{value:f,configurable:!0,writable:!0}):String.prototype.codePointAt=f);var p,s=0,l=-3;function c(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function h(v,S){this.source=v,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=S,this.destLen=0,this.ltree=new c,this.dtree=new c}var m=new c,g=new c,y=new Uint8Array(30),_=new Uint16Array(30),x=new Uint8Array(30),w=new Uint16Array(30),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new c,T=new Uint8Array(320);function A(v,S,M,C){for(var k,B=0;B<M;++B)v[B]=0;for(B=0;B<30-M;++B)v[B+M]=B/M|0;for(k=C,B=0;B<30;++B)S[B]=k,k+=1<<v[B]}var R=new Uint16Array(16);function P(v,S,M,C){for(var k,B=0;B<16;++B)v.table[B]=0;for(B=0;B<C;++B)v.table[S[M+B]]++;for(B=k=v.table[0]=0;B<16;++B)R[B]=k,k+=v.table[B];for(B=0;B<C;++B)S[M+B]&&(v.trans[R[S[M+B]]++]=B)}function N(v,S,M){if(!S)return M;for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;var C=v.tag&65535>>>16-S;return v.tag>>>=S,v.bitcount-=S,C+M}function O(v,S){for(;v.bitcount<24;)v.tag|=v.source[v.sourceIndex++]<<v.bitcount,v.bitcount+=8;for(var M=0,C=0,k=0,B=v.tag;C=2*C+(1&B),B>>>=1,M+=S.table[++k],0<=(C-=S.table[k]););return v.tag=B,v.bitcount-=k,S.trans[M+C]}function D(v,S,M){for(;;){var C=O(v,S);if(C===256)return s;if(C<256)v.dest[v.destLen++]=C;else for(var k,B=N(v,y[C-=257],_[C]),C=O(v,M),G=k=v.destLen-N(v,x[C],w[C]);G<k+B;++G)v.dest[v.destLen++]=v.dest[G]}}for(var U=m,Y=g,H=0;H<7;++H)U.table[H]=0;for(U.table[7]=24,U.table[8]=152,U.table[9]=112,H=0;H<24;++H)U.trans[H]=256+H;for(H=0;H<144;++H)U.trans[24+H]=H;for(H=0;H<8;++H)U.trans[168+H]=280+H;for(H=0;H<112;++H)U.trans[176+H]=144+H;for(H=0;H<5;++H)Y.table[H]=0;for(Y.table[5]=32,H=0;H<32;++H)Y.trans[H]=H;A(y,_,4,3),A(x,w,2,1),y[28]=0,_[28]=258;var W=function(v,S){var M,C,k,B=new h(v,S);do{switch(k=void 0,(C=B).bitcount--||(C.tag=C.source[C.sourceIndex++],C.bitcount=7),k=1&C.tag,C.tag>>>=1,C=k,N(B,2,0)){case 0:M=function(Ue){for(var gt,Et;8<Ue.bitcount;)Ue.sourceIndex--,Ue.bitcount-=8;if((gt=256*Ue.source[Ue.sourceIndex+1]+Ue.source[Ue.sourceIndex])!==(65535&~(256*Ue.source[Ue.sourceIndex+3]+Ue.source[Ue.sourceIndex+2])))return l;for(Ue.sourceIndex+=4,Et=gt;Et;--Et)Ue.dest[Ue.destLen++]=Ue.source[Ue.sourceIndex++];return Ue.bitcount=0,s}(B);break;case 1:M=D(B,m,g);break;case 2:Ye=Ve=et=Ne=G=_e=Re=ke=Te=he=fe=ne=void 0;for(var G,ne=B,fe=B.ltree,he=B.dtree,Te=N(ne,5,257),ke=N(ne,5,1),Re=N(ne,4,4),_e=0;_e<19;++_e)T[_e]=0;for(_e=0;_e<Re;++_e){var et=N(ne,3,0);T[j[_e]]=et}for(P(E,T,0,19),G=0;G<Te+ke;){var Ve=O(ne,E);switch(Ve){case 16:for(var Ye=T[G-1],Ne=N(ne,2,3);Ne;--Ne)T[G++]=Ye;break;case 17:for(Ne=N(ne,3,3);Ne;--Ne)T[G++]=0;break;case 18:for(Ne=N(ne,7,11);Ne;--Ne)T[G++]=0;break;default:T[G++]=Ve}}P(fe,T,0,Te),P(he,T,Te,ke),M=D(B,B.ltree,B.dtree);break;default:M=l}if(M!==s)throw new Error("Data error")}while(!C);return B.destLen<B.dest.length?typeof B.dest.slice=="function"?B.dest.slice(0,B.destLen):B.dest.subarray(0,B.destLen):B.dest};function X(v,S,M,C,k){return Math.pow(1-k,3)*v+3*Math.pow(1-k,2)*k*S+3*(1-k)*Math.pow(k,2)*M+Math.pow(k,3)*C}function Z(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function q(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function ee(v){throw new Error(v)}function L(v,S){v||ee(S)}Z.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Z.prototype.addPoint=function(v,S){typeof v=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=v,this.x2=v),v<this.x1&&(this.x1=v),v>this.x2&&(this.x2=v)),typeof S=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=S,this.y2=S),S<this.y1&&(this.y1=S),S>this.y2&&(this.y2=S))},Z.prototype.addX=function(v){this.addPoint(v,null)},Z.prototype.addY=function(v){this.addPoint(null,v)},Z.prototype.addBezier=function(v,S,M,C,k,B,G,ne){var fe=[v,S],he=[M,C],Te=[k,B],ke=[G,ne];this.addPoint(v,S),this.addPoint(G,ne);for(var Re=0;Re<=1;Re++){var _e,et=6*fe[Re]-12*he[Re]+6*Te[Re],Ve=-3*fe[Re]+9*he[Re]-9*Te[Re]+3*ke[Re],Ye=3*he[Re]-3*fe[Re];Ve==0?et==0||0<(_e=-Ye/et)&&_e<1&&(Re===0&&this.addX(X(fe[Re],he[Re],Te[Re],ke[Re],_e)),Re===1&&this.addY(X(fe[Re],he[Re],Te[Re],ke[Re],_e))):(_e=Math.pow(et,2)-4*Ye*Ve)<0||(0<(Ye=(-et+Math.sqrt(_e))/(2*Ve))&&Ye<1&&(Re===0&&this.addX(X(fe[Re],he[Re],Te[Re],ke[Re],Ye)),Re===1&&this.addY(X(fe[Re],he[Re],Te[Re],ke[Re],Ye))),0<(Ye=(-et-Math.sqrt(_e))/(2*Ve))&&Ye<1&&(Re===0&&this.addX(X(fe[Re],he[Re],Te[Re],ke[Re],Ye)),Re===1&&this.addY(X(fe[Re],he[Re],Te[Re],ke[Re],Ye))))}},Z.prototype.addQuad=function(v,S,M,C,k,B){M=v+2/3*(M-v),C=S+2/3*(C-S),this.addBezier(v,S,M,C,M+1/3*(k-v),C+1/3*(B-S),k,B)},q.prototype.moveTo=function(v,S){this.commands.push({type:"M",x:v,y:S})},q.prototype.lineTo=function(v,S){this.commands.push({type:"L",x:v,y:S})},q.prototype.curveTo=q.prototype.bezierCurveTo=function(v,S,M,C,k,B){this.commands.push({type:"C",x1:v,y1:S,x2:M,y2:C,x:k,y:B})},q.prototype.quadTo=q.prototype.quadraticCurveTo=function(v,S,M,C){this.commands.push({type:"Q",x1:v,y1:S,x:M,y:C})},q.prototype.close=q.prototype.closePath=function(){this.commands.push({type:"Z"})},q.prototype.extend=function(v){var S;if(v.commands)v=v.commands;else if(v instanceof Z)return S=v,this.moveTo(S.x1,S.y1),this.lineTo(S.x2,S.y1),this.lineTo(S.x2,S.y2),this.lineTo(S.x1,S.y2),void this.close();Array.prototype.push.apply(this.commands,v)},q.prototype.getBoundingBox=function(){for(var v=new Z,S=0,M=0,C=0,k=0,B=0;B<this.commands.length;B++){var G=this.commands[B];switch(G.type){case"M":v.addPoint(G.x,G.y),S=C=G.x,M=k=G.y;break;case"L":v.addPoint(G.x,G.y),C=G.x,k=G.y;break;case"Q":v.addQuad(C,k,G.x1,G.y1,G.x,G.y),C=G.x,k=G.y;break;case"C":v.addBezier(C,k,G.x1,G.y1,G.x2,G.y2,G.x,G.y),C=G.x,k=G.y;break;case"Z":C=S,k=M;break;default:throw new Error("Unexpected path command "+G.type)}}return v.isEmpty()&&v.addPoint(0,0),v},q.prototype.draw=function(v){v.beginPath();for(var S=0;S<this.commands.length;S+=1){var M=this.commands[S];M.type==="M"?v.moveTo(M.x,M.y):M.type==="L"?v.lineTo(M.x,M.y):M.type==="C"?v.bezierCurveTo(M.x1,M.y1,M.x2,M.y2,M.x,M.y):M.type==="Q"?v.quadraticCurveTo(M.x1,M.y1,M.x,M.y):M.type==="Z"&&v.closePath()}this.fill&&(v.fillStyle=this.fill,v.fill()),this.stroke&&(v.strokeStyle=this.stroke,v.lineWidth=this.strokeWidth,v.stroke())},q.prototype.toPathData=function(v){function S(){for(var B=arguments,G="",ne=0;ne<arguments.length;ne+=1){var fe=B[ne];0<=fe&&0<ne&&(G+=" "),G+=(fe=fe,Math.round(fe)===fe?""+Math.round(fe):fe.toFixed(v))}return G}v=v!==void 0?v:2;for(var M="",C=0;C<this.commands.length;C+=1){var k=this.commands[C];k.type==="M"?M+="M"+S(k.x,k.y):k.type==="L"?M+="L"+S(k.x,k.y):k.type==="C"?M+="C"+S(k.x1,k.y1,k.x2,k.y2,k.x,k.y):k.type==="Q"?M+="Q"+S(k.x1,k.y1,k.x,k.y):k.type==="Z"&&(M+="Z")}return M},q.prototype.toSVG=function(v){var S=(S='<path d="')+this.toPathData(v)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?S+=' fill="none"':S+=' fill="'+this.fill+'"'),this.stroke&&(S+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),S+="/>"},q.prototype.toDOMElement=function(S){var S=this.toPathData(S),M=document.createElementNS("http://www.w3.org/2000/svg","path");return M.setAttribute("d",S),M};var I={fail:ee,argument:L,assert:L},F={},V={},J={};function le(v){return function(){return v}}V.BYTE=function(v){return I.argument(0<=v&&v<=255,"Byte value should be between 0 and 255."),[v]},J.BYTE=le(1),V.CHAR=function(v){return[v.charCodeAt(0)]},J.CHAR=le(1),V.CHARARRAY=function(v){for(var S=[],M=0;M<v.length;M+=1)S[M]=v.charCodeAt(M);return S},J.CHARARRAY=function(v){return v.length},V.USHORT=function(v){return[v>>8&255,255&v]},J.USHORT=le(2),V.SHORT=function(v){return[(v=32768<=v?-(65536-v):v)>>8&255,255&v]},J.SHORT=le(2),V.UINT24=function(v){return[v>>16&255,v>>8&255,255&v]},J.UINT24=le(3),V.ULONG=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},J.ULONG=le(4),V.LONG=function(v){return[(v=2147483648<=v?-(4294967296-v):v)>>24&255,v>>16&255,v>>8&255,255&v]},J.LONG=le(4),V.FIXED=V.ULONG,J.FIXED=J.ULONG,V.FWORD=V.SHORT,J.FWORD=J.SHORT,V.UFWORD=V.USHORT,J.UFWORD=J.USHORT,V.LONGDATETIME=function(v){return[0,0,0,0,v>>24&255,v>>16&255,v>>8&255,255&v]},J.LONGDATETIME=le(8),V.TAG=function(v){return I.argument(v.length===4,"Tag should be exactly 4 ASCII characters."),[v.charCodeAt(0),v.charCodeAt(1),v.charCodeAt(2),v.charCodeAt(3)]},J.TAG=le(4),V.Card8=V.BYTE,J.Card8=J.BYTE,V.Card16=V.USHORT,J.Card16=J.USHORT,V.OffSize=V.BYTE,J.OffSize=J.BYTE,V.SID=V.USHORT,J.SID=J.USHORT,V.NUMBER=function(v){return-107<=v&&v<=107?[v+139]:108<=v&&v<=1131?[247+((v-=108)>>8),255&v]:-1131<=v&&v<=-108?[251+((v=-v-108)>>8),255&v]:-32768<=v&&v<=32767?V.NUMBER16(v):V.NUMBER32(v)},J.NUMBER=function(v){return V.NUMBER(v).length},V.NUMBER16=function(v){return[28,v>>8&255,255&v]},J.NUMBER16=le(3),V.NUMBER32=function(v){return[29,v>>24&255,v>>16&255,v>>8&255,255&v]},J.NUMBER32=le(5),V.REAL=function(v){for(var S=v.toString(),M=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(S),C=(M&&(M=parseFloat("1e"+((M[2]?+M[2]:0)+M[1].length)),S=(Math.round(v*M)/M).toString()),""),k=0,B=S.length;k<B;k+=1){var G=S[k];C+=G==="e"?S[++k]==="-"?"c":"b":G==="."?"a":G==="-"?"e":G}for(var ne=[30],fe=0,he=(C+=1&C.length?"f":"ff").length;fe<he;fe+=2)ne.push(parseInt(C.substr(fe,2),16));return ne},J.REAL=function(v){return V.REAL(v).length},V.NAME=V.CHARARRAY,J.NAME=J.CHARARRAY,V.STRING=V.CHARARRAY,J.STRING=J.CHARARRAY,F.UTF8=function(v,S,M){for(var C=[],k=M,B=0;B<k;B++,S+=1)C[B]=v.getUint8(S);return String.fromCharCode.apply(null,C)},F.UTF16=function(v,S,M){for(var C=[],k=M/2,B=0;B<k;B++,S+=2)C[B]=v.getUint16(S);return String.fromCharCode.apply(null,C)},V.UTF16=function(v){for(var S=[],M=0;M<v.length;M+=1){var C=v.charCodeAt(M);S[S.length]=C>>8&255,S[S.length]=255&C}return S},J.UTF16=function(v){return 2*v.length};var ce,ue={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},re=(F.MACSTRING=function(v,S,M,C){var k=ue[C];if(k!==void 0){for(var B="",G=0;G<M;G++){var ne=v.getUint8(S+G);B+=ne<=127?String.fromCharCode(ne):k[127&ne]}return B}},typeof WeakMap=="function"&&new WeakMap);function de(v){return-128<=v&&v<=127}V.MACSTRING=function(v,S){var M=function(G){if(!ce)for(var ne in ce={},ue)ce[ne]=new String(ne);var fe=ce[G];if(fe!==void 0){if(re){var he=re.get(fe);if(he!==void 0)return he}var Te=ue[G];if(Te!==void 0){for(var ke={},Re=0;Re<Te.length;Re++)ke[Te.charCodeAt(Re)]=Re+128;return re&&re.set(fe,ke),ke}}}(S);if(M!==void 0){for(var C=[],k=0;k<v.length;k++){var B=v.charCodeAt(k);if(128<=B&&(B=M[B])===void 0)return;C[k]=B}return C}},J.MACSTRING=function(v,S){return v=V.MACSTRING(v,S),v!==void 0?v.length:0},V.VARDELTAS=function(v){for(var C=0,S=[];C<v.length;)var M=v[C],C=(M===0?function(k,B,G){for(var ne=0,fe=k.length;B<fe&&ne<64&&k[B]===0;)++B,++ne;return G.push(128|ne-1),B}:-128<=M&&M<=127?function(k,B,G){for(var ne=0,fe=k.length,he=B;he<fe&&ne<64;){var Te=k[he];if(!de(Te)||Te===0&&he+1<fe&&k[he+1]===0)break;++he,++ne}G.push(ne-1);for(var ke=B;ke<he;++ke)G.push(k[ke]+256&255);return he}:function(k,B,G){for(var ne=0,fe=k.length,he=B;he<fe&&ne<64;){var Te=k[he];if(Te===0||de(Te)&&he+1<fe&&de(k[he+1]))break;++he,++ne}G.push(64|ne-1);for(var ke=B;ke<he;++ke){var Re=k[ke];G.push(Re+65536>>8&255,Re+256&255)}return he})(v,C,S);return S},V.INDEX=function(v){for(var S=1,M=[S],C=[],k=0;k<v.length;k+=1){var B=V.OBJECT(v[k]);Array.prototype.push.apply(C,B),S+=B.length,M.push(S)}if(C.length===0)return[0,0];for(var G=[],ne=1+Math.floor(Math.log(S)/Math.log(2))/8|0,fe=[void 0,V.BYTE,V.USHORT,V.UINT24,V.ULONG][ne],he=0;he<M.length;he+=1){var Te=fe(M[he]);Array.prototype.push.apply(G,Te)}return Array.prototype.concat(V.Card16(v.length),V.OffSize(ne),G,C)},J.INDEX=function(v){return V.INDEX(v).length},V.DICT=function(v){for(var S=[],M=Object.keys(v),C=M.length,k=0;k<C;k+=1){var B=parseInt(M[k],0),G=v[B];S=(S=S.concat(V.OPERAND(G.value,G.type))).concat(V.OPERATOR(B))}return S},J.DICT=function(v){return V.DICT(v).length},V.OPERATOR=function(v){return v<1200?[v]:[12,v-1200]},V.OPERAND=function(v,S){var M=[];if(Array.isArray(S))for(var C=0;C<S.length;C+=1)I.argument(v.length===S.length,"Not enough arguments given for type"+S),M=M.concat(V.OPERAND(v[C],S[C]));else if(S==="SID")M=M.concat(V.NUMBER(v));else if(S==="offset")M=M.concat(V.NUMBER32(v));else if(S==="number")M=M.concat(V.NUMBER(v));else{if(S!=="real")throw new Error("Unknown operand type "+S);M=M.concat(V.REAL(v))}return M},V.OP=V.BYTE,J.OP=J.BYTE;var be=typeof WeakMap=="function"&&new WeakMap;function ie(v,S,M){for(var C=0;C<S.length;C+=1){var k=S[C];this[k.name]=k.value}if(this.tableName=v,this.fields=S,M)for(var B=Object.keys(M),G=0;G<B.length;G+=1){var ne=B[G],fe=M[ne];this[ne]!==void 0&&(this[ne]=fe)}}function xe(v,S,M){M===void 0&&(M=S.length);var C=new Array(S.length+1);C[0]={name:v+"Count",type:"USHORT",value:M};for(var k=0;k<S.length;k++)C[k+1]={name:v+k,type:"USHORT",value:S[k]};return C}function Me(v,S,M){var C=S.length,k=new Array(C+1);k[0]={name:v+"Count",type:"USHORT",value:C};for(var B=0;B<C;B++)k[B+1]={name:v+B,type:"TABLE",value:M(S[B],B)};return k}function Ee(v,S,M){var C=S.length,k=[];k[0]={name:v+"Count",type:"USHORT",value:C};for(var B=0;B<C;B++)k=k.concat(M(S[B],B));return k}function Se(v){v.format===1?ie.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(xe("glyph",v.glyphs))):I.assert(!1,"Can't create coverage table format 2 yet.")}function Ie(v){ie.call(this,"scriptListTable",Ee("scriptRecord",v,function(S,M){var C=S.script,k=C.defaultLangSys;return I.assert(!!k,"Unable to write GSUB: script "+S.tag+" has no default language system."),[{name:"scriptTag"+M,type:"TAG",value:S.tag},{name:"script"+M,type:"TABLE",value:new ie("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ie("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:k.reqFeatureIndex}].concat(xe("featureIndex",k.featureIndexes)))}].concat(Ee("langSys",C.langSysRecords,function(B,G){var ne=B.langSys;return[{name:"langSysTag"+G,type:"TAG",value:B.tag},{name:"langSys"+G,type:"TABLE",value:new ie("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ne.reqFeatureIndex}].concat(xe("featureIndex",ne.featureIndexes)))}]})))}]}))}function Oe(v){ie.call(this,"featureListTable",Ee("featureRecord",v,function(S,M){var C=S.feature;return[{name:"featureTag"+M,type:"TAG",value:S.tag},{name:"feature"+M,type:"TABLE",value:new ie("featureTable",[{name:"featureParams",type:"USHORT",value:C.featureParams}].concat(xe("lookupListIndex",C.lookupListIndexes)))}]}))}function Xe(v,S){ie.call(this,"lookupListTable",Me("lookup",v,function(M){var C=S[M.lookupType];return I.assert(!!C,"Unable to write GSUB lookup type "+M.lookupType+" tables."),new ie("lookupTable",[{name:"lookupType",type:"USHORT",value:M.lookupType},{name:"lookupFlag",type:"USHORT",value:M.lookupFlag}].concat(Me("subtable",M.subtables,C)))}))}V.CHARSTRING=function(v){if(be){var S=be.get(v);if(S!==void 0)return S}for(var B=[],M=v.length,C=0;C<M;C+=1)var k=v[C],B=B.concat(V[k.type](k.value));return be&&be.set(v,B),B},J.CHARSTRING=function(v){return V.CHARSTRING(v).length},V.OBJECT=function(v){var S=V[v.type];return I.argument(S!==void 0,"No encoding function for type "+v.type),S(v.value)},J.OBJECT=function(v){var S=J[v.type];return I.argument(S!==void 0,"No sizeOf function for type "+v.type),S(v.value)},V.TABLE=function(v){for(var S=[],M=v.fields.length,C=[],k=[],B=0;B<M;B+=1){var G=v.fields[B],fe=V[G.type],ne=(I.argument(fe!==void 0,"No encoding function for field type "+G.type+" ("+G.name+")"),v[G.name]),fe=fe(ne=ne===void 0?G.value:ne);G.type==="TABLE"?(k.push(S.length),S=S.concat([0,0]),C.push(fe)):S=S.concat(fe)}for(var he=0;he<C.length;he+=1){var Te=k[he],ke=S.length;I.argument(ke<65536,"Table "+v.tableName+" too big."),S[Te]=ke>>8,S[Te+1]=255&ke,S=S.concat(C[he])}return S},J.TABLE=function(v){for(var S=0,M=v.fields.length,C=0;C<M;C+=1){var k=v.fields[C],B=J[k.type],G=(I.argument(B!==void 0,"No sizeOf function for field type "+k.type+" ("+k.name+")"),v[k.name]);S+=B(G=G===void 0?k.value:G),k.type==="TABLE"&&(S+=2)}return S},V.RECORD=V.TABLE,J.RECORD=J.TABLE,V.LITERAL=function(v){return v},J.LITERAL=function(v){return v.length},ie.prototype.encode=function(){return V.TABLE(this)},ie.prototype.sizeOf=function(){return J.TABLE(this)};var $={Table:ie,Record:ie,Coverage:(Se.prototype=Object.create(ie.prototype)).constructor=Se,ScriptList:(Ie.prototype=Object.create(ie.prototype)).constructor=Ie,FeatureList:(Oe.prototype=Object.create(ie.prototype)).constructor=Oe,LookupList:(Xe.prototype=Object.create(ie.prototype)).constructor=Xe,ushortList:xe,tableList:Me,recordList:Ee};function se(v,S){return v.getUint8(S)}function Le(v,S){return v.getUint16(S,!1)}function Fe(v,S){return v.getUint32(S,!1)}function He(v,S){return v.getInt16(S,!1)+v.getUint16(S+2,!1)/65535}var We={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function we(v,S){this.data=v,this.offset=S,this.relativeOffset=0}we.prototype.parseByte=function(){var v=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},we.prototype.parseChar=function(){var v=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,v},we.prototype.parseCard8=we.prototype.parseByte,we.prototype.parseCard16=we.prototype.parseUShort=function(){var v=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},we.prototype.parseSID=we.prototype.parseUShort,we.prototype.parseOffset16=we.prototype.parseUShort,we.prototype.parseShort=function(){var v=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,v},we.prototype.parseF2Dot14=function(){var v=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,v},we.prototype.parseOffset32=we.prototype.parseULong=function(){var v=Fe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},we.prototype.parseFixed=function(){var v=He(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,v},we.prototype.parseString=function(v){var S=this.data,M=this.offset+this.relativeOffset,C="";this.relativeOffset+=v;for(var k=0;k<v;k++)C+=String.fromCharCode(S.getUint8(M+k));return C},we.prototype.parseTag=function(){return this.parseString(4)},we.prototype.parseLongDateTime=function(){var v=Fe(this.data,this.offset+this.relativeOffset+4);return v-=2082844800,this.relativeOffset+=8,v},we.prototype.parseVersion=function(v){var S=Le(this.data,this.offset+this.relativeOffset),M=Le(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,S+M/(v=v===void 0?4096:v)/10},we.prototype.skip=function(v,S){this.relativeOffset+=We[v]*(S=S===void 0?1:S)},we.prototype.parseULongList=function(v){v===void 0&&(v=this.parseULong());for(var S=new Array(v),M=this.data,C=this.offset+this.relativeOffset,k=0;k<v;k++)S[k]=M.getUint32(C),C+=4;return this.relativeOffset+=4*v,S},we.prototype.parseOffset16List=we.prototype.parseUShortList=function(v){v===void 0&&(v=this.parseUShort());for(var S=new Array(v),M=this.data,C=this.offset+this.relativeOffset,k=0;k<v;k++)S[k]=M.getUint16(C),C+=2;return this.relativeOffset+=2*v,S},we.prototype.parseShortList=function(v){for(var S=new Array(v),M=this.data,C=this.offset+this.relativeOffset,k=0;k<v;k++)S[k]=M.getInt16(C),C+=2;return this.relativeOffset+=2*v,S},we.prototype.parseByteList=function(v){for(var S=new Array(v),M=this.data,C=this.offset+this.relativeOffset,k=0;k<v;k++)S[k]=M.getUint8(C++);return this.relativeOffset+=v,S},we.prototype.parseList=function(v,S){S||(S=v,v=this.parseUShort());for(var M=new Array(v),C=0;C<v;C++)M[C]=S.call(this);return M},we.prototype.parseList32=function(v,S){S||(S=v,v=this.parseULong());for(var M=new Array(v),C=0;C<v;C++)M[C]=S.call(this);return M},we.prototype.parseRecordList=function(v,S){S||(S=v,v=this.parseUShort());for(var M=new Array(v),C=Object.keys(S),k=0;k<v;k++){for(var B={},G=0;G<C.length;G++){var ne=C[G],fe=S[ne];B[ne]=fe.call(this)}M[k]=B}return M},we.prototype.parseRecordList32=function(v,S){S||(S=v,v=this.parseULong());for(var M=new Array(v),C=Object.keys(S),k=0;k<v;k++){for(var B={},G=0;G<C.length;G++){var ne=C[G],fe=S[ne];B[ne]=fe.call(this)}M[k]=B}return M},we.prototype.parseStruct=function(v){if(typeof v=="function")return v.call(this);for(var S=Object.keys(v),M={},C=0;C<S.length;C++){var k=S[C],B=v[k];M[k]=B.call(this)}return M},we.prototype.parseValueRecord=function(v){var S;if((v=v===void 0?this.parseUShort():v)!==0)return S={},1&v&&(S.xPlacement=this.parseShort()),2&v&&(S.yPlacement=this.parseShort()),4&v&&(S.xAdvance=this.parseShort()),8&v&&(S.yAdvance=this.parseShort()),16&v&&(S.xPlaDevice=void 0,this.parseShort()),32&v&&(S.yPlaDevice=void 0,this.parseShort()),64&v&&(S.xAdvDevice=void 0,this.parseShort()),128&v&&(S.yAdvDevice=void 0,this.parseShort()),S},we.prototype.parseValueRecordList=function(){for(var v=this.parseUShort(),S=this.parseUShort(),M=new Array(S),C=0;C<S;C++)M[C]=this.parseValueRecord(v);return M},we.prototype.parsePointer=function(v){var S=this.parseOffset16();if(0<S)return new we(this.data,this.offset+S).parseStruct(v)},we.prototype.parsePointer32=function(v){var S=this.parseOffset32();if(0<S)return new we(this.data,this.offset+S).parseStruct(v)},we.prototype.parseListOfLists=function(v){for(var S=this.parseOffset16List(),M=S.length,C=this.relativeOffset,k=new Array(M),B=0;B<M;B++){var G=S[B];if(G===0)k[B]=void 0;else if(this.relativeOffset=G,v){for(var ne=this.parseOffset16List(),fe=new Array(ne.length),he=0;he<ne.length;he++)this.relativeOffset=G+ne[he],fe[he]=v.call(this);k[B]=fe}else k[B]=this.parseUShortList()}return this.relativeOffset=C,k},we.prototype.parseCoverage=function(){var v=this.offset+this.relativeOffset,S=this.parseUShort(),M=this.parseUShort();if(S===1)return{format:1,glyphs:this.parseUShortList(M)};if(S!==2)throw new Error("0x"+v.toString(16)+": Coverage format must be 1 or 2.");for(var C=new Array(M),k=0;k<M;k++)C[k]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:C}},we.prototype.parseClassDef=function(){var v=this.offset+this.relativeOffset,S=this.parseUShort();if(S===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(S===2)return{format:2,ranges:this.parseRecordList({start:we.uShort,end:we.uShort,classId:we.uShort})};throw new Error("0x"+v.toString(16)+": ClassDef format must be 1 or 2.")},we.list=function(v,S){return function(){return this.parseList(v,S)}},we.list32=function(v,S){return function(){return this.parseList32(v,S)}},we.recordList=function(v,S){return function(){return this.parseRecordList(v,S)}},we.recordList32=function(v,S){return function(){return this.parseRecordList32(v,S)}},we.pointer=function(v){return function(){return this.parsePointer(v)}},we.pointer32=function(v){return function(){return this.parsePointer32(v)}},we.tag=we.prototype.parseTag,we.byte=we.prototype.parseByte,we.uShort=we.offset16=we.prototype.parseUShort,we.uShortList=we.prototype.parseUShortList,we.uLong=we.offset32=we.prototype.parseULong,we.uLongList=we.prototype.parseULongList,we.struct=we.prototype.parseStruct,we.coverage=we.prototype.parseCoverage,we.classDef=we.prototype.parseClassDef;var oe={reserved:we.uShort,reqFeatureIndex:we.uShort,featureIndexes:we.uShortList},ae=(we.prototype.parseScriptList=function(){return this.parsePointer(we.recordList({tag:we.tag,script:we.pointer({defaultLangSys:we.pointer(oe),langSysRecords:we.recordList({tag:we.tag,langSys:we.pointer(oe)})})}))||[]},we.prototype.parseFeatureList=function(){return this.parsePointer(we.recordList({tag:we.tag,feature:we.pointer({featureParams:we.offset16,lookupListIndexes:we.uShortList})}))||[]},we.prototype.parseLookupList=function(v){return this.parsePointer(we.list(we.pointer(function(){var S=this.parseUShort(),M=(I.argument(1<=S&&S<=9,"GPOS/GSUB lookup type "+S+" unknown."),this.parseUShort()),C=16&M;return{lookupType:S,lookupFlag:M,subtables:this.parseList(we.pointer(v[S])),markFilteringSet:C?this.parseUShort():void 0}})))||[]},we.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var v=this.parseUShort(),S=this.parseUShort();return I.argument(v===1&&S<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:we.offset32,featureTableSubstitutionOffset:we.offset32})})||[]},{getByte:se,getCard8:se,getUShort:Le,getCard16:Le,getShort:function(v,S){return v.getInt16(S,!1)},getULong:Fe,getFixed:He,getTag:function(v,S){for(var M="",C=S;C<S+4;C+=1)M+=String.fromCharCode(v.getInt8(C));return M},getOffset:function(v,S,M){for(var C=0,k=0;k<M;k+=1)C=(C<<=8)+v.getUint8(S+k);return C},getBytes:function(v,S,M){for(var C=[],k=S;k<M;k+=1)C.push(v.getUint8(k));return C},bytesToString:function(v){for(var S="",M=0;M<v.length;M+=1)S+=String.fromCharCode(v[M]);return S},Parser:we}),K={parse:function(v,S){for(var M={},C=(M.version=ae.getUShort(v,S),I.argument(M.version===0,"cmap table version should be 0."),M.numTables=ae.getUShort(v,S+2),-1),k=M.numTables-1;0<=k;--k){var B=ae.getUShort(v,S+4+8*k),G=ae.getUShort(v,S+4+8*k+2);if(B===3&&(G===0||G===1||G===10)||B===0&&(G===0||G===1||G===2||G===3||G===4)){C=ae.getULong(v,S+4+8*k+4);break}}if(C===-1)throw new Error("No valid cmap sub-tables found.");var ne=new ae.Parser(v,S+C);if(M.format=ne.parseUShort(),M.format===12){var fe,he=M,Te=ne;Te.parseUShort(),he.length=Te.parseULong(),he.language=Te.parseULong(),he.groupCount=fe=Te.parseULong(),he.glyphIndexMap={};for(var ke=0;ke<fe;ke+=1)for(var Re=Te.parseULong(),_e=Te.parseULong(),et=Te.parseULong(),Ve=Re;Ve<=_e;Ve+=1)he.glyphIndexMap[Ve]=et,et++}else{if(M.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+M.format+").");var Ye=M,Ne=v,Ue=S,gt=C;Ye.length=ne.parseUShort(),Ye.language=ne.parseUShort(),Ye.segCount=Et=ne.parseUShort()>>1,ne.skip("uShort",3),Ye.glyphIndexMap={};for(var Et,yt=new ae.Parser(Ne,Ue+gt+14),vt=new ae.Parser(Ne,Ue+gt+16+2*Et),Pt=new ae.Parser(Ne,Ue+gt+16+4*Et),ir=new ae.Parser(Ne,Ue+gt+16+6*Et),hr=Ue+gt+16+8*Et,yr=0;yr<Et-1;yr+=1)for(var Nr=void 0,Ur=yt.parseUShort(),on=vt.parseUShort(),$t=Pt.parseShort(),ar=ir.parseUShort(),Yt=on;Yt<=Ur;Yt+=1)ar!==0?(hr=(hr=ir.offset+ir.relativeOffset-2)+ar+2*(Yt-on),(Nr=ae.getUShort(Ne,hr))!==0&&(Nr=Nr+$t&65535)):Nr=Yt+$t&65535,Ye.glyphIndexMap[Yt]=Nr}return M},make:function(v){for(var S=!0,M=v.length-1;0<M;--M)if(65535<v.get(M).unicode){console.log("Adding CMAP format 12 (needed!)"),S=!1;break}var C,k,B=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:S?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:S?12:20}],G=(B=(B=S?B:B.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new $.Table("cmap",B));for(G.segments=[],M=0;M<v.length;M+=1){for(var ne=v.get(M),fe=0;fe<ne.unicodes.length;fe+=1)C=ne.unicodes[fe],k=M,G.segments.push({end:C,start:C,delta:-(C-k),offset:0,glyphIndex:k});G.segments=G.segments.sort(function(Ue,gt){return Ue.start-gt.start})}G.segments.push({end:65535,start:65535,delta:1,offset:0});var he=G.segments.length,Te=0,ke=[],Re=[],_e=[],et=[],Ve=[],Ye=[];for(M=0;M<he;M+=1){var Ne=G.segments[M];Ne.end<=65535&&Ne.start<=65535?(ke=ke.concat({name:"end_"+M,type:"USHORT",value:Ne.end}),Re=Re.concat({name:"start_"+M,type:"USHORT",value:Ne.start}),_e=_e.concat({name:"idDelta_"+M,type:"SHORT",value:Ne.delta}),et=et.concat({name:"idRangeOffset_"+M,type:"USHORT",value:Ne.offset}),Ne.glyphId!==void 0&&(Ve=Ve.concat({name:"glyph_"+M,type:"USHORT",value:Ne.glyphId}))):Te+=1,S||Ne.glyphIndex===void 0||(Ye=(Ye=(Ye=Ye.concat({name:"cmap12Start_"+M,type:"ULONG",value:Ne.start})).concat({name:"cmap12End_"+M,type:"ULONG",value:Ne.end})).concat({name:"cmap12Glyph_"+M,type:"ULONG",value:Ne.glyphIndex}))}return G.segCountX2=2*(he-Te),G.searchRange=2*Math.pow(2,Math.floor(Math.log(he-Te)/Math.log(2))),G.entrySelector=Math.log(G.searchRange/2)/Math.log(2),G.rangeShift=G.segCountX2-G.searchRange,G.fields=G.fields.concat(ke),G.fields.push({name:"reservedPad",type:"USHORT",value:0}),G.fields=G.fields.concat(Re),G.fields=G.fields.concat(_e),G.fields=G.fields.concat(et),G.fields=G.fields.concat(Ve),G.cmap4Length=14+2*ke.length+2+2*Re.length+2*_e.length+2*et.length+2*Ve.length,S||(B=16+4*Ye.length,G.cmap12Offset=20+G.cmap4Length,G.fields=G.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:B},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:Ye.length/3}]),G.fields=G.fields.concat(Ye)),G}},Q=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],z=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],te=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ye=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function je(v){this.font=v}function Pe(v){this.cmap=v}function Ke(v,S){this.encoding=v,this.charset=S}function ve(v){switch(v.version){case 1:this.names=ye.slice();break;case 2:this.names=new Array(v.numberOfGlyphs);for(var S=0;S<v.numberOfGlyphs;S++)v.glyphNameIndex[S]<ye.length?this.names[S]=ye[v.glyphNameIndex[S]]:this.names[S]=v.names[v.glyphNameIndex[S]-ye.length];break;case 2.5:this.names=new Array(v.numberOfGlyphs);for(var M=0;M<v.numberOfGlyphs;M++)this.names[M]=ye[M+v.glyphNameIndex[M]];break;default:this.names=[]}}je.prototype.charToGlyphIndex=function(v){var S=v.codePointAt(0),M=this.font.glyphs;if(M){for(var C=0;C<M.length;C+=1)for(var k=M.get(C),B=0;B<k.unicodes.length;B+=1)if(k.unicodes[B]===S)return C}return null},Pe.prototype.charToGlyphIndex=function(v){return this.cmap.glyphIndexMap[v.codePointAt(0)]||0},Ke.prototype.charToGlyphIndex=function(v){return v=v.codePointAt(0),v=this.encoding[v],this.charset.indexOf(v)},ve.prototype.nameToGlyphIndex=function(v){return this.names.indexOf(v)},ve.prototype.glyphIndexToName=function(v){return this.names[v]};var Ce={line:function(v,S,M,C,k){v.beginPath(),v.moveTo(S,M),v.lineTo(C,k),v.stroke()}};function Be(v){this.bindConstructorValues(v)}function rt(v,S,M){Object.defineProperty(v,S,{get:function(){return v.path,v[M]},set:function(C){v[M]=C},enumerable:!0,configurable:!0})}function st(v,S){if(this.font=v,this.glyphs={},Array.isArray(S))for(var M=0;M<S.length;M++)this.glyphs[M]=S[M];this.length=S&&S.length||0}Be.prototype.bindConstructorValues=function(v){var S;this.index=v.index||0,this.name=v.name||null,this.unicode=v.unicode||void 0,this.unicodes=v.unicodes||v.unicode!==void 0?[v.unicode]:[],v.xMin&&(this.xMin=v.xMin),v.yMin&&(this.yMin=v.yMin),v.xMax&&(this.xMax=v.xMax),v.yMax&&(this.yMax=v.yMax),v.advanceWidth&&(this.advanceWidth=v.advanceWidth),Object.defineProperty(this,"path",(v=v.path,S=v||new q,{configurable:!0,get:function(){return S=typeof S=="function"?S():S},set:function(M){S=M}}))},Be.prototype.addUnicode=function(v){this.unicodes.length===0&&(this.unicode=v),this.unicodes.push(v)},Be.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},Be.prototype.getPath=function(v,S,M,C,k){v=v!==void 0?v:0,S=S!==void 0?S:0,M=M!==void 0?M:72;for(var B,G,ne=(C=C||{}).xScale,fe=C.yScale,he=((B=C.hinting&&k&&k.hinting?this.path&&k.hinting.exec(this,M):B)?(G=k.hinting.getCommands(B),v=Math.round(v),S=Math.round(S),ne=fe=1):(G=this.path.commands,C=1/this.path.unitsPerEm*M,ne===void 0&&(ne=C),fe===void 0&&(fe=C)),new q),Te=0;Te<G.length;Te+=1){var ke=G[Te];ke.type==="M"?he.moveTo(v+ke.x*ne,S+-ke.y*fe):ke.type==="L"?he.lineTo(v+ke.x*ne,S+-ke.y*fe):ke.type==="Q"?he.quadraticCurveTo(v+ke.x1*ne,S+-ke.y1*fe,v+ke.x*ne,S+-ke.y*fe):ke.type==="C"?he.curveTo(v+ke.x1*ne,S+-ke.y1*fe,v+ke.x2*ne,S+-ke.y2*fe,v+ke.x*ne,S+-ke.y*fe):ke.type==="Z"&&he.closePath()}return he},Be.prototype.getContours=function(){if(this.points===void 0)return[];for(var v=[],S=[],M=0;M<this.points.length;M+=1){var C=this.points[M];S.push(C),C.lastPointOfContour&&(v.push(S),S=[])}return I.argument(S.length===0,"There are still points left in the current contour."),v},Be.prototype.getMetrics=function(){for(var v=this.path.commands,S=[],M=[],C=0;C<v.length;C+=1){var k=v[C];k.type!=="Z"&&(S.push(k.x),M.push(k.y)),k.type!=="Q"&&k.type!=="C"||(S.push(k.x1),M.push(k.y1)),k.type==="C"&&(S.push(k.x2),M.push(k.y2))}var B={xMin:Math.min.apply(null,S),yMin:Math.min.apply(null,M),xMax:Math.max.apply(null,S),yMax:Math.max.apply(null,M),leftSideBearing:this.leftSideBearing};return isFinite(B.xMin)||(B.xMin=0),isFinite(B.xMax)||(B.xMax=this.advanceWidth),isFinite(B.yMin)||(B.yMin=0),isFinite(B.yMax)||(B.yMax=0),B.rightSideBearing=this.advanceWidth-B.leftSideBearing-(B.xMax-B.xMin),B},Be.prototype.draw=function(v,S,M,C,k){this.getPath(S,M,C,k).draw(v)},Be.prototype.drawPoints=function(v,S,M,C){function k(Te,ke,Re,_e){var et=2*Math.PI;v.beginPath();for(var Ve=0;Ve<Te.length;Ve+=1)v.moveTo(ke+Te[Ve].x*_e,Re+Te[Ve].y*_e),v.arc(ke+Te[Ve].x*_e,Re+Te[Ve].y*_e,2,0,et,!1);v.closePath(),v.fill()}S=S!==void 0?S:0,M=M!==void 0?M:0;for(var C=1/this.path.unitsPerEm*(C=C!==void 0?C:24),B=[],G=[],ne=this.path,fe=0;fe<ne.commands.length;fe+=1){var he=ne.commands[fe];he.x!==void 0&&B.push({x:he.x,y:-he.y}),he.x1!==void 0&&G.push({x:he.x1,y:-he.y1}),he.x2!==void 0&&G.push({x:he.x2,y:-he.y2})}v.fillStyle="blue",k(B,S,M,C),v.fillStyle="red",k(G,S,M,C)},Be.prototype.drawMetrics=function(v,S,M,C){S=S!==void 0?S:0,M=M!==void 0?M:0,C=1/this.path.unitsPerEm*(C=C!==void 0?C:24),v.lineWidth=1,v.strokeStyle="black",Ce.line(v,S,-1e4,S,1e4),Ce.line(v,-1e4,M,1e4,M);var k=this.xMin||0,B=this.yMin||0,G=this.xMax||0,ne=this.yMax||0,fe=this.advanceWidth||0;v.strokeStyle="blue",Ce.line(v,S+k*C,-1e4,S+k*C,1e4),Ce.line(v,S+G*C,-1e4,S+G*C,1e4),Ce.line(v,-1e4,M+-B*C,1e4,M+-B*C),Ce.line(v,-1e4,M+-ne*C,1e4,M+-ne*C),v.strokeStyle="green",Ce.line(v,S+fe*C,-1e4,S+fe*C,1e4)},st.prototype.get=function(v){return typeof this.glyphs[v]=="function"&&(this.glyphs[v]=this.glyphs[v]()),this.glyphs[v]},st.prototype.push=function(v,S){this.glyphs[v]=S,this.length++};var ot={GlyphSet:st,glyphLoader:function(v,S){return new Be({index:S,font:v})},ttfGlyphLoader:function(v,S,M,C,k,B){return function(){var G=new Be({index:S,font:v});return G.path=function(){M(G,C,k);var ne=B(v.glyphs,G);return ne.unitsPerEm=v.unitsPerEm,ne},rt(G,"xMin","_xMin"),rt(G,"xMax","_xMax"),rt(G,"yMin","_yMin"),rt(G,"yMax","_yMax"),G}},cffGlyphLoader:function(v,S,M,C){return function(){var k=new Be({index:S,font:v});return k.path=function(){var B=M(v,k,C);return B.unitsPerEm=v.unitsPerEm,B},k}}};function ft(v){return v=v.length<1240?107:v.length<33900?1131:32768,v}function ht(v,S,M){var C,k=[],B=[],G=ae.getCard16(v,S);if(G!==0){for(var ne=ae.getByte(v,S+2),fe=S+(G+1)*ne+2,he=S+3,Te=0;Te<G+1;Te+=1)k.push(ae.getOffset(v,he,ne)),he+=ne;C=fe+k[G]}else C=S+2;for(var ke=0;ke<k.length-1;ke+=1){var Re=ae.getBytes(v,fe+k[ke],fe+k[ke+1]);M&&(Re=M(Re)),B.push(Re)}return{objects:B,startOffset:S,endOffset:C}}function Bt(v,S){if(S===28)return v.parseByte()<<8|v.parseByte();if(S===29)return v.parseByte()<<24|v.parseByte()<<16|v.parseByte()<<8|v.parseByte();if(S===30){for(var M=v,C="",k=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var G=M.parseByte(),B=G>>4,G=15&G;if(B==15||(C+=k[B],G==15))break;C+=k[G]}return parseFloat(C)}if(32<=S&&S<=246)return S-139;if(247<=S&&S<=250)return 256*(S-247)+v.parseByte()+108;if(251<=S&&S<=254)return 256*-(S-251)-v.parseByte()-108;throw new Error("Invalid b0 "+S)}function Rt(v,S,M){var C=new ae.Parser(v,S=S!==void 0?S:0),k=[],B=[];for(M=M!==void 0?M:v.length;C.relativeOffset<M;){var G=C.parseByte();G<=21?(G===12&&(G=1200+C.parseByte()),k.push([G,B]),B=[]):B.push(Bt(C,G))}for(var ne=k,fe={},he=0;he<ne.length;he+=1){var Te=ne[he][0],ke=ne[he][1],Re=void 0,Re=ke.length===1?ke[0]:ke;if(fe.hasOwnProperty(Te)&&!isNaN(fe[Te]))throw new Error("Object "+fe+" already has key "+Te);fe[Te]=Re}return fe}function Wt(v,S){return S=S<=390?Q[S]:v[S-391]}function At(v,S,M){for(var C,k={},B=0;B<S.length;B+=1){var G=S[B];if(Array.isArray(G.type)){var ne=[];ne.length=G.type.length;for(var fe=0;fe<G.type.length;fe++)(C=v[G.op]!==void 0?v[G.op][fe]:void 0)===void 0&&(C=G.value!==void 0&&G.value[fe]!==void 0?G.value[fe]:null),G.type[fe]==="SID"&&(C=Wt(M,C)),ne[fe]=C;k[G.name]=ne}else(C=v[G.op])===void 0&&(C=G.value!==void 0?G.value:null),G.type==="SID"&&(C=Wt(M,C)),k[G.name]=C}return k}var Jt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ft=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function wr(v,S,M,C){return At(Rt(v,S,M),Ft,C)}function mr(v,S,M,C){for(var k=[],B=0;B<M.length;B+=1){var G=new DataView(new Uint8Array(M[B]).buffer),G=(ne=C,At(Rt(G,0,G.byteLength),Jt,ne)),ne=(G._subrs=[],G._subrsBias=0,G.private[0]),fe=G.private[1];ne!==0&&fe!==0&&(ne=wr(v,fe+S,ne,C),G._defaultWidthX=ne.defaultWidthX,G._nominalWidthX=ne.nominalWidthX,ne.subrs!==0&&(fe=ht(v,fe+ne.subrs+S),G._subrs=fe.objects,G._subrsBias=ft(G._subrs)),G._privateDict=ne),k.push(G)}return k}function pe(v,S,M){var C,k,B,G,ne,fe,he,Te,ke,Re=new q,_e=[],et=0,Ve=!1,Ye=!1,Ne=0,Ue=0,gt=(ke=(v.isCIDFont?(ne=v.tables.cff.topDict._fdSelect[S.index],ne=v.tables.cff.topDict._fdArray[ne],fe=ne._subrs,he=ne._subrsBias,Te=ne._defaultWidthX,ne):(fe=v.tables.cff.topDict._subrs,he=v.tables.cff.topDict._subrsBias,Te=v.tables.cff.topDict._defaultWidthX,v.tables.cff.topDict))._nominalWidthX,Te);function Et(vt,Pt){Ye&&Re.closePath(),Re.moveTo(vt,Pt),Ye=!0}function yt(){_e.length%2==0||Ve||(gt=_e.shift()+ke),et+=_e.length>>1,_e.length=0,Ve=!0}return function vt(Pt){for(var ir,hr,yr,Nr,Ur,on,$t,ar,Yt,Fr,ur,Dr,lr=0;lr<Pt.length;){var Cr=Pt[lr];switch(lr+=1,Cr){case 1:case 3:yt();break;case 4:1<_e.length&&!Ve&&(gt=_e.shift()+ke,Ve=!0),Ue+=_e.pop(),Et(Ne,Ue);break;case 5:for(;0<_e.length;)Ne+=_e.shift(),Ue+=_e.shift(),Re.lineTo(Ne,Ue);break;case 6:for(;0<_e.length&&(Ne+=_e.shift(),Re.lineTo(Ne,Ue),_e.length!==0);)Ue+=_e.shift(),Re.lineTo(Ne,Ue);break;case 7:for(;0<_e.length&&(Ue+=_e.shift(),Re.lineTo(Ne,Ue),_e.length!==0);)Ne+=_e.shift(),Re.lineTo(Ne,Ue);break;case 8:for(;0<_e.length;)C=Ne+_e.shift(),k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),Ne=B+_e.shift(),Ue=G+_e.shift(),Re.curveTo(C,k,B,G,Ne,Ue);break;case 10:Ur=_e.pop()+he,(on=fe[Ur])&&vt(on);break;case 11:return;case 12:switch(Cr=Pt[lr],lr+=1,Cr){case 35:C=Ne+_e.shift(),k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),$t=B+_e.shift(),ar=G+_e.shift(),Yt=$t+_e.shift(),Fr=ar+_e.shift(),ur=Yt+_e.shift(),Dr=Fr+_e.shift(),Ne=ur+_e.shift(),Ue=Dr+_e.shift(),_e.shift(),Re.curveTo(C,k,B,G,$t,ar),Re.curveTo(Yt,Fr,ur,Dr,Ne,Ue);break;case 34:C=Ne+_e.shift(),k=Ue,B=C+_e.shift(),G=k+_e.shift(),$t=B+_e.shift(),ar=G,Yt=$t+_e.shift(),Fr=G,ur=Yt+_e.shift(),Dr=Ue,Ne=ur+_e.shift(),Re.curveTo(C,k,B,G,$t,ar),Re.curveTo(Yt,Fr,ur,Dr,Ne,Ue);break;case 36:C=Ne+_e.shift(),k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),$t=B+_e.shift(),ar=G,Yt=$t+_e.shift(),Fr=G,ur=Yt+_e.shift(),Dr=Fr+_e.shift(),Ne=ur+_e.shift(),Re.curveTo(C,k,B,G,$t,ar),Re.curveTo(Yt,Fr,ur,Dr,Ne,Ue);break;case 37:C=Ne+_e.shift(),k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),$t=B+_e.shift(),ar=G+_e.shift(),Yt=$t+_e.shift(),Fr=ar+_e.shift(),ur=Yt+_e.shift(),Dr=Fr+_e.shift(),Math.abs(ur-Ne)>Math.abs(Dr-Ue)?Ne=ur+_e.shift():Ue=Dr+_e.shift(),Re.curveTo(C,k,B,G,$t,ar),Re.curveTo(Yt,Fr,ur,Dr,Ne,Ue);break;default:console.log("Glyph "+S.index+": unknown operator 1200"+Cr),_e.length=0}break;case 14:0<_e.length&&!Ve&&(gt=_e.shift()+ke,Ve=!0),Ye&&(Re.closePath(),Ye=!1);break;case 18:yt();break;case 19:case 20:yt(),lr+=et+7>>3;break;case 21:2<_e.length&&!Ve&&(gt=_e.shift()+ke,Ve=!0),Ue+=_e.pop(),Et(Ne+=_e.pop(),Ue);break;case 22:1<_e.length&&!Ve&&(gt=_e.shift()+ke,Ve=!0),Et(Ne+=_e.pop(),Ue);break;case 23:yt();break;case 24:for(;2<_e.length;)C=Ne+_e.shift(),k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),Ne=B+_e.shift(),Ue=G+_e.shift(),Re.curveTo(C,k,B,G,Ne,Ue);Ne+=_e.shift(),Ue+=_e.shift(),Re.lineTo(Ne,Ue);break;case 25:for(;6<_e.length;)Ne+=_e.shift(),Ue+=_e.shift(),Re.lineTo(Ne,Ue);C=Ne+_e.shift(),k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),Ne=B+_e.shift(),Ue=G+_e.shift(),Re.curveTo(C,k,B,G,Ne,Ue);break;case 26:for(_e.length%2&&(Ne+=_e.shift());0<_e.length;)C=Ne,k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),Ne=B,Ue=G+_e.shift(),Re.curveTo(C,k,B,G,Ne,Ue);break;case 27:for(_e.length%2&&(Ue+=_e.shift());0<_e.length;)C=Ne+_e.shift(),k=Ue,B=C+_e.shift(),G=k+_e.shift(),Ne=B+_e.shift(),Ue=G,Re.curveTo(C,k,B,G,Ne,Ue);break;case 28:ir=Pt[lr],hr=Pt[lr+1],_e.push((ir<<24|hr<<16)>>16),lr+=2;break;case 29:Ur=_e.pop()+v.gsubrsBias,(on=v.gsubrs[Ur])&&vt(on);break;case 30:for(;0<_e.length&&(C=Ne,k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),Ne=B+_e.shift(),Ue=G+(_e.length===1?_e.shift():0),Re.curveTo(C,k,B,G,Ne,Ue),_e.length!==0);)C=Ne+_e.shift(),k=Ue,B=C+_e.shift(),G=k+_e.shift(),Ue=G+_e.shift(),Ne=B+(_e.length===1?_e.shift():0),Re.curveTo(C,k,B,G,Ne,Ue);break;case 31:for(;0<_e.length&&(C=Ne+_e.shift(),k=Ue,B=C+_e.shift(),G=k+_e.shift(),Ue=G+_e.shift(),Ne=B+(_e.length===1?_e.shift():0),Re.curveTo(C,k,B,G,Ne,Ue),_e.length!==0);)C=Ne,k=Ue+_e.shift(),B=C+_e.shift(),G=k+_e.shift(),Ne=B+_e.shift(),Ue=G+(_e.length===1?_e.shift():0),Re.curveTo(C,k,B,G,Ne,Ue);break;default:Cr<32?console.log("Glyph "+S.index+": unknown operator "+Cr):Cr<247?_e.push(Cr-139):Cr<251?(ir=Pt[lr],lr+=1,_e.push(256*(Cr-247)+ir+108)):Cr<255?(ir=Pt[lr],lr+=1,_e.push(256*-(Cr-251)-ir-108)):(ir=Pt[lr],hr=Pt[lr+1],yr=Pt[lr+2],Nr=Pt[lr+3],lr+=4,_e.push((ir<<24|hr<<16|yr<<8|Nr)/65536))}}}(M),S.advanceWidth=gt,Re}function ze(v,S){var M,C=Q.indexOf(v);return 0<=C&&(M=C),0<=(C=S.indexOf(v))?M=C+Q.length:(M=Q.length+S.length,S.push(v)),M}function Qe(v,S,M){for(var C={},k=0;k<v.length;k+=1){var B=v[k],G=S[B.name];G===void 0||function ne(fe,he){if(fe===he)return 1;if(Array.isArray(fe)&&Array.isArray(he)&&fe.length===he.length){for(var Te=0;Te<fe.length;Te+=1)if(!ne(fe[Te],he[Te]))return;return 1}}(G,B.value)||(B.type==="SID"&&(G=ze(G,M)),C[B.op]={name:B.name,type:B.type,value:G})}return C}function Ge(v,S){var M=new $.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return M.dict=Qe(Jt,v,S),M}function $e(v){var S=new $.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return S.topDicts=[{name:"topDict_0",type:"TABLE",value:v}],S}function wt(v){for(var S=new $.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),M=0;M<v.length;M+=1){var C=v.get(M),k=function(B){for(var G=[],ne=B.path,fe=(G.push({name:"width",type:"NUMBER",value:B.advanceWidth}),0),he=0,Te=0;Te<ne.commands.length;Te+=1){var ke,Re,_e,et,Ve=void 0,Ye=void 0,Ne=ne.commands[Te];(Ne=Ne.type==="Q"?{type:"C",x:Ne.x,y:Ne.y,x1:1/3*fe+2/3*Ne.x1,y1:1/3*he+2/3*Ne.y1,x2:1/3*Ne.x+2/3*Ne.x1,y2:1/3*Ne.y+2/3*Ne.y1}:Ne).type==="M"?(Ve=Math.round(Ne.x-fe),Ye=Math.round(Ne.y-he),G.push({name:"dx",type:"NUMBER",value:Ve}),G.push({name:"dy",type:"NUMBER",value:Ye}),G.push({name:"rmoveto",type:"OP",value:21}),fe=Math.round(Ne.x),he=Math.round(Ne.y)):Ne.type==="L"?(Ve=Math.round(Ne.x-fe),Ye=Math.round(Ne.y-he),G.push({name:"dx",type:"NUMBER",value:Ve}),G.push({name:"dy",type:"NUMBER",value:Ye}),G.push({name:"rlineto",type:"OP",value:5}),fe=Math.round(Ne.x),he=Math.round(Ne.y)):Ne.type==="C"&&(ke=Math.round(Ne.x1-fe),Re=Math.round(Ne.y1-he),_e=Math.round(Ne.x2-Ne.x1),et=Math.round(Ne.y2-Ne.y1),Ve=Math.round(Ne.x-Ne.x2),Ye=Math.round(Ne.y-Ne.y2),G.push({name:"dx1",type:"NUMBER",value:ke}),G.push({name:"dy1",type:"NUMBER",value:Re}),G.push({name:"dx2",type:"NUMBER",value:_e}),G.push({name:"dy2",type:"NUMBER",value:et}),G.push({name:"dx",type:"NUMBER",value:Ve}),G.push({name:"dy",type:"NUMBER",value:Ye}),G.push({name:"rrcurveto",type:"OP",value:8}),fe=Math.round(Ne.x),he=Math.round(Ne.y))}return G.push({name:"endchar",type:"OP",value:14}),G}(C);S.charStrings.push({name:C.name,type:"CHARSTRING",value:k})}return S}var Tt={parse:function(v,S,M){M.tables.cff={},ne=v,C=S,(k={}).formatMajor=ae.getCard8(ne,C),k.formatMinor=ae.getCard8(ne,C+1),k.size=ae.getCard8(ne,C+2),k.offsetSize=ae.getCard8(ne,C+3),k.startOffset=C,k.endOffset=C+4;var ne=ht(v,k.endOffset,ae.bytesToString),C=ht(v,ne.endOffset),k=ht(v,C.endOffset,ae.bytesToString),ne=ht(v,k.endOffset);if(M.gsubrs=ne.objects,M.gsubrsBias=ft(M.gsubrs),(ne=mr(v,S,C.objects,k.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+ne.length);if(C=ne[0],(M.tables.cff.topDict=C)._privateDict&&(M.defaultWidthX=C._privateDict.defaultWidthX,M.nominalWidthX=C._privateDict.nominalWidthX),C.ros[0]!==void 0&&C.ros[1]!==void 0&&(M.isCIDFont=!0),M.isCIDFont){var ne=C.fdArray,B=C.fdSelect;if(ne===0||B===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ne=mr(v,S,ht(v,ne+=S).objects,k.objects),C._fdArray=ne,C._fdSelect=function(Re,_e,et,Ve){var Ye,Ne=[],Ue=new ae.Parser(Re,_e);if((Re=Ue.parseCard8())===0)for(var gt=0;gt<et;gt++){if(Ve<=(Ye=Ue.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ye+" (FD count "+Ve+")");Ne.push(Ye)}else{if(Re!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Re);var Et,yt=Ue.parseCard16(),vt=Ue.parseCard16();if(vt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+vt);for(var Pt=0;Pt<yt;Pt++){if(Ye=Ue.parseCard8(),Et=Ue.parseCard16(),Ve<=Ye)throw new Error("CFF table CID Font FDSelect has bad FD index value "+Ye+" (FD count "+Ve+")");if(et<Et)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Et);for(;vt<Et;vt++)Ne.push(Ye);vt=Et}if(Et!==et)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Et)}return Ne}(v,B+=S,M.numGlyphs,ne.length)}var B=S+C.private[1],ne=wr(v,B,C.private[0],k.objects),G=(M.defaultWidthX=ne.defaultWidthX,M.nominalWidthX=ne.nominalWidthX,ne.subrs!==0?(B=ht(v,B+ne.subrs),M.subrs=B.objects,M.subrsBias=ft(M.subrs)):(M.subrs=[],M.subrsBias=0),ht(v,S+C.charStrings)),ne=(M.nGlyphs=G.objects.length,function(Te,ke,Re,_e){var et=new ae.Parser(Te,ke),Ve=(--Re,[".notdef"]);if((Te=et.parseCard8())===0)for(var Ye=0;Ye<Re;Ye+=1)Ne=et.parseSID(),Ve.push(Wt(_e,Ne));else if(Te===1)for(;Ve.length<=Re;)for(var Ne=et.parseSID(),Ue=et.parseCard8(),gt=0;gt<=Ue;gt+=1)Ve.push(Wt(_e,Ne)),Ne+=1;else{if(Te!==2)throw new Error("Unknown charset format "+Te);for(;Ve.length<=Re;){Ne=et.parseSID(),Ue=et.parseCard16();for(var Et=0;Et<=Ue;Et+=1)Ve.push(Wt(_e,Ne)),Ne+=1}}return Ve}(v,S+C.charset,M.nGlyphs,k.objects));C.encoding===0?M.cffEncoding=new Ke(z,ne):C.encoding===1?M.cffEncoding=new Ke(te,ne):M.cffEncoding=function(Te,ke,Re){var _e={},et=new ae.Parser(Te,ke);if((Te=et.parseCard8())===0)for(var Ve=et.parseCard8(),Ye=0;Ye<Ve;Ye+=1)_e[Ue=et.parseCard8()]=Ye;else{if(Te!==1)throw new Error("Unknown encoding format "+Te);for(var Ne=et.parseCard8(),Ue=1,gt=0;gt<Ne;gt+=1)for(var Et=et.parseCard8(),yt=et.parseCard8(),vt=Et;vt<=Et+yt;vt+=1)_e[vt]=Ue,Ue+=1}return new Ke(_e,Re)}(v,S+C.encoding,ne),M.encoding=M.encoding||M.cffEncoding,M.glyphs=new ot.GlyphSet(M);for(var fe=0;fe<M.nGlyphs;fe+=1){var he=G.objects[fe];M.glyphs.push(fe,ot.cffGlyphLoader(M,fe,pe,he))}},make:function(v,Te){for(var M,C=new $.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),k=1/Te.unitsPerEm,k={version:Te.version,fullName:Te.fullName,familyName:Te.familyName,weight:Te.weightName,fontBBox:Te.fontBBox||[0,0,0,0],fontMatrix:[k,0,0,k,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},B=[],G=1;G<v.length;G+=1)M=v.get(G),B.push(M.name);var ne,fe,he=[],Te=(C.header=new $.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),C.nameIndex=function(Re){var _e=new $.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);_e.names=[];for(var et=0;et<Re.length;et+=1)_e.names.push({name:"name_"+et,type:"NAME",value:Re[et]});return _e}([Te.postScriptName]),Ge(k,he)),ke=(C.topDictIndex=$e(Te),C.globalSubrIndex=new $.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),C.charsets=function(Re,_e){for(var et=new $.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Ve=0;Ve<Re.length;Ve+=1){var Ye=ze(Re[Ve],_e);et.fields.push({name:"glyph_"+Ve,type:"SID",value:Ye})}return et}(B,he),C.charStringsIndex=wt(v),C.privateDict=(ke={},ne=he,(fe=new $.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Qe(Ft,ke,ne),fe),C.stringIndex=function(Re){var _e=new $.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);_e.strings=[];for(var et=0;et<Re.length;et+=1)_e.strings.push({name:"string_"+et,type:"STRING",value:Re[et]});return _e}(he),C.header.sizeOf()+C.nameIndex.sizeOf()+C.topDictIndex.sizeOf()+C.stringIndex.sizeOf()+C.globalSubrIndex.sizeOf());return k.charset=ke,k.encoding=0,k.charStrings=k.charset+C.charsets.sizeOf(),k.private[1]=k.charStrings+C.charStringsIndex.sizeOf(),Te=Ge(k,he),C.topDictIndex=$e(Te),C}},jt={parse:function(C,S){var M={},C=new ae.Parser(C,S);return M.version=C.parseVersion(),M.fontRevision=Math.round(1e3*C.parseFixed())/1e3,M.checkSumAdjustment=C.parseULong(),M.magicNumber=C.parseULong(),I.argument(M.magicNumber===1594834165,"Font header has wrong magic number."),M.flags=C.parseUShort(),M.unitsPerEm=C.parseUShort(),M.created=C.parseLongDateTime(),M.modified=C.parseLongDateTime(),M.xMin=C.parseShort(),M.yMin=C.parseShort(),M.xMax=C.parseShort(),M.yMax=C.parseShort(),M.macStyle=C.parseUShort(),M.lowestRecPPEM=C.parseUShort(),M.fontDirectionHint=C.parseShort(),M.indexToLocFormat=C.parseShort(),M.glyphDataFormat=C.parseShort(),M},make:function(v){var S=Math.round(new Date().getTime()/1e3)+2082844800,M=S;return v.createdTimestamp&&(M=v.createdTimestamp+2082844800),new $.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:M},{name:"modified",type:"LONGDATETIME",value:S},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],v)}},ge={parse:function(C,S){var M={},C=new ae.Parser(C,S);return M.version=C.parseVersion(),M.ascender=C.parseShort(),M.descender=C.parseShort(),M.lineGap=C.parseShort(),M.advanceWidthMax=C.parseUShort(),M.minLeftSideBearing=C.parseShort(),M.minRightSideBearing=C.parseShort(),M.xMaxExtent=C.parseShort(),M.caretSlopeRise=C.parseShort(),M.caretSlopeRun=C.parseShort(),M.caretOffset=C.parseShort(),C.relativeOffset+=8,M.metricDataFormat=C.parseShort(),M.numberOfHMetrics=C.parseUShort(),M},make:function(v){return new $.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],v)}},Ze={parse:function(v,S,M,C,k){for(var B,G,ne=new ae.Parser(v,S),fe=0;fe<C;fe+=1){fe<M&&(B=ne.parseUShort(),G=ne.parseShort());var he=k.get(fe);he.advanceWidth=B,he.leftSideBearing=G}},make:function(v){for(var S=new $.Table("hmtx",[]),M=0;M<v.length;M+=1){var k=v.get(M),C=k.advanceWidth||0,k=k.leftSideBearing||0;S.fields.push({name:"advanceWidth_"+M,type:"USHORT",value:C}),S.fields.push({name:"leftSideBearing_"+M,type:"SHORT",value:k})}return S}},it={make:function(v){for(var S=new $.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:v.length}]),M="",C=12+4*v.length,k=0;k<v.length;++k){var B=M.indexOf(v[k]);B<0&&(B=M.length,M+=v[k]),S.fields.push({name:"offset "+k,type:"USHORT",value:C+B}),S.fields.push({name:"length "+k,type:"USHORT",value:v[k].length})}return S.fields.push({name:"stringPool",type:"CHARARRAY",value:M}),S},parse:function(v,S){for(var M=new ae.Parser(v,S),C=M.parseULong(),k=(I.argument(C===1,"Unsupported ltag table version."),M.skip("uLong",1),M.parseULong()),B=[],G=0;G<k;G++){for(var ne="",fe=S+M.parseUShort(),he=M.parseUShort(),Te=fe;Te<fe+he;++Te)ne+=String.fromCharCode(v.getInt8(Te));B.push(ne)}return B}},qe={parse:function(C,S){var M={},C=new ae.Parser(C,S);return M.version=C.parseVersion(),M.numGlyphs=C.parseUShort(),M.version===1&&(M.maxPoints=C.parseUShort(),M.maxContours=C.parseUShort(),M.maxCompositePoints=C.parseUShort(),M.maxCompositeContours=C.parseUShort(),M.maxZones=C.parseUShort(),M.maxTwilightPoints=C.parseUShort(),M.maxStorage=C.parseUShort(),M.maxFunctionDefs=C.parseUShort(),M.maxInstructionDefs=C.parseUShort(),M.maxStackElements=C.parseUShort(),M.maxSizeOfInstructions=C.parseUShort(),M.maxComponentElements=C.parseUShort(),M.maxComponentDepth=C.parseUShort()),M},make:function(v){return new $.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:v}])}},bt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Je={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Lt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},at={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},St="utf-16",nt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},sr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function kt(v,S,M){switch(v){case 0:return St;case 1:return sr[M]||nt[S];case 3:if(S===1||S===10)return St}}function qt(v){var S,M={};for(S in v)M[v[S]]=parseInt(S);return M}function pr(v,S,M,C,k,B){return new $.Record("NameRecord",[{name:"platformID",type:"USHORT",value:v},{name:"encodingID",type:"USHORT",value:S},{name:"languageID",type:"USHORT",value:M},{name:"nameID",type:"USHORT",value:C},{name:"length",type:"USHORT",value:k},{name:"offset",type:"USHORT",value:B}])}function Or(v,S){if((M=function(B,G){var ne=B.length,fe=G.length-ne+1;e:for(var he=0;he<fe;he++)for(;he<fe;he++){for(var Te=0;Te<ne;Te++)if(G[he+Te]!==B[Te])continue e;return he}return-1}(v,S))<0)for(var M=S.length,C=0,k=v.length;C<k;++C)S.push(v[C]);return M}var Pr={parse:function(v,S,M){for(var C={},k=new ae.Parser(v,S),S=k.parseUShort(),B=k.parseUShort(),G=k.offset+k.parseUShort(),ne=0;ne<B;ne++){var et=k.parseUShort(),fe=k.parseUShort(),he=k.parseUShort(),Te=k.parseUShort(),Te=bt[Te]||Te,ke=k.parseUShort(),Re=k.parseUShort(),_e=function(Ye,Ne,Ue){switch(Ye){case 0:if(Ne===65535)return"und";if(Ue)return Ue[Ne];break;case 1:return Je[Ne];case 3:return at[Ne]}}(et,he,M),et=kt(et,fe,he);et!==void 0&&_e!==void 0&&(fe=void 0,(fe=et===St?F.UTF16(v,G+Re,ke):F.MACSTRING(v,G+Re,ke,et))&&((he=(he=C[Te])===void 0?C[Te]={}:he)[_e]=fe))}return S===1&&k.parseUShort(),C},make:function(v,S){var M,C=[],k={},B=qt(bt);for(M in v){var G=B[M];if(G===void 0&&(G=M),Re=parseInt(G),isNaN(Re))throw new Error('Name table entry "'+M+'" does not exist, see nameTableNames for complete list.');k[Re]=v[M],C.push(Re)}for(var ne=qt(Je),fe=qt(at),he=[],Te=[],ke=0;ke<C.length;ke++){var Re,_e,et=k[Re=C[ke]];for(_e in et){var Ve=et[_e],Et=1,Ye=ne[_e],Ne=Lt[Ye],Ue=kt(Et,Ne,Ye),Ue=V.MACSTRING(Ve,Ue),gt=(Ue===void 0&&(Et=0,(Ye=S.indexOf(_e))<0&&(Ye=S.length,S.push(_e)),Ne=4,Ue=V.UTF16(Ve)),Or(Ue,Te)),Et=(he.push(pr(Et,Ne,Ye,Re,Ue.length,gt)),fe[_e]);Et!==void 0&&(Ye=Or(Ne=V.UTF16(Ve),Te),he.push(pr(3,1,Et,Re,Ne.length,Ye)))}}he.sort(function(Pt,ir){return Pt.platformID-ir.platformID||Pt.encodingID-ir.encodingID||Pt.languageID-ir.languageID||Pt.nameID-ir.nameID});for(var yt=new $.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:he.length},{name:"stringOffset",type:"USHORT",value:6+12*he.length}]),vt=0;vt<he.length;vt++)yt.fields.push({name:"record_"+vt,type:"RECORD",value:he[vt]});return yt.fields.push({name:"strings",type:"LITERAL",value:Te}),yt}},rr=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],nr={parse:function(v,S){var M={},C=new ae.Parser(v,S);M.version=C.parseUShort(),M.xAvgCharWidth=C.parseShort(),M.usWeightClass=C.parseUShort(),M.usWidthClass=C.parseUShort(),M.fsType=C.parseUShort(),M.ySubscriptXSize=C.parseShort(),M.ySubscriptYSize=C.parseShort(),M.ySubscriptXOffset=C.parseShort(),M.ySubscriptYOffset=C.parseShort(),M.ySuperscriptXSize=C.parseShort(),M.ySuperscriptYSize=C.parseShort(),M.ySuperscriptXOffset=C.parseShort(),M.ySuperscriptYOffset=C.parseShort(),M.yStrikeoutSize=C.parseShort(),M.yStrikeoutPosition=C.parseShort(),M.sFamilyClass=C.parseShort(),M.panose=[];for(var k=0;k<10;k++)M.panose[k]=C.parseByte();return M.ulUnicodeRange1=C.parseULong(),M.ulUnicodeRange2=C.parseULong(),M.ulUnicodeRange3=C.parseULong(),M.ulUnicodeRange4=C.parseULong(),M.achVendID=String.fromCharCode(C.parseByte(),C.parseByte(),C.parseByte(),C.parseByte()),M.fsSelection=C.parseUShort(),M.usFirstCharIndex=C.parseUShort(),M.usLastCharIndex=C.parseUShort(),M.sTypoAscender=C.parseShort(),M.sTypoDescender=C.parseShort(),M.sTypoLineGap=C.parseShort(),M.usWinAscent=C.parseUShort(),M.usWinDescent=C.parseUShort(),1<=M.version&&(M.ulCodePageRange1=C.parseULong(),M.ulCodePageRange2=C.parseULong()),2<=M.version&&(M.sxHeight=C.parseShort(),M.sCapHeight=C.parseShort(),M.usDefaultChar=C.parseUShort(),M.usBreakChar=C.parseUShort(),M.usMaxContent=C.parseUShort()),M},make:function(v){return new $.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],v)},unicodeRanges:rr,getUnicodeRange:function(v){for(var S=0;S<rr.length;S+=1){var M=rr[S];if(v>=M.begin&&v<M.end)return S}return-1}},Mi={parse:function(v,S){var M={},C=new ae.Parser(v,S);switch(M.version=C.parseVersion(),M.italicAngle=C.parseFixed(),M.underlinePosition=C.parseShort(),M.underlineThickness=C.parseShort(),M.isFixedPitch=C.parseULong(),M.minMemType42=C.parseULong(),M.maxMemType42=C.parseULong(),M.minMemType1=C.parseULong(),M.maxMemType1=C.parseULong(),M.version){case 1:M.names=ye.slice();break;case 2:M.numberOfGlyphs=C.parseUShort(),M.glyphNameIndex=new Array(M.numberOfGlyphs);for(var k=0;k<M.numberOfGlyphs;k++)M.glyphNameIndex[k]=C.parseUShort();M.names=[];for(var B,G=0;G<M.numberOfGlyphs;G++)M.glyphNameIndex[G]>=ye.length&&(B=C.parseChar(),M.names.push(C.parseString(B)));break;case 2.5:M.numberOfGlyphs=C.parseUShort(),M.offset=new Array(M.numberOfGlyphs);for(var ne=0;ne<M.numberOfGlyphs;ne++)M.offset[ne]=C.parseChar()}return M},make:function(){return new $.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},or=new Array(9),mn=(or[1]=function(){var v=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{substFormat:1,coverage:this.parsePointer(we.coverage),deltaGlyphId:this.parseUShort()}:S===2?{substFormat:2,coverage:this.parsePointer(we.coverage),substitute:this.parseOffset16List()}:void I.assert(!1,"0x"+v.toString(16)+": lookup type 1 format must be 1 or 2.")},or[2]=function(){var v=this.parseUShort();return I.argument(v===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(we.coverage),sequences:this.parseListOfLists()}},or[3]=function(){var v=this.parseUShort();return I.argument(v===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(we.coverage),alternateSets:this.parseListOfLists()}},or[4]=function(){var v=this.parseUShort();return I.argument(v===1,"GSUB ligature table identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(we.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:we.uShort,lookupListIndex:we.uShort});or[5]=function(){var v,S,M=this.offset+this.relativeOffset,C=this.parseUShort();return C===1?{substFormat:C,coverage:this.parsePointer(we.coverage),ruleSets:this.parseListOfLists(function(){var k=this.parseUShort(),B=this.parseUShort();return{input:this.parseUShortList(k-1),lookupRecords:this.parseRecordList(B,mn)}})}:C===2?{substFormat:C,coverage:this.parsePointer(we.coverage),classDef:this.parsePointer(we.classDef),classSets:this.parseListOfLists(function(){var k=this.parseUShort(),B=this.parseUShort();return{classes:this.parseUShortList(k-1),lookupRecords:this.parseRecordList(B,mn)}})}:C===3?(v=this.parseUShort(),S=this.parseUShort(),{substFormat:C,coverages:this.parseList(v,we.pointer(we.coverage)),lookupRecords:this.parseRecordList(S,mn)}):void I.assert(!1,"0x"+M.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},or[6]=function(){var v=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{substFormat:1,coverage:this.parsePointer(we.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(mn)}})}:S===2?{substFormat:2,coverage:this.parsePointer(we.coverage),backtrackClassDef:this.parsePointer(we.classDef),inputClassDef:this.parsePointer(we.classDef),lookaheadClassDef:this.parsePointer(we.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(mn)}})}:S===3?{substFormat:3,backtrackCoverage:this.parseList(we.pointer(we.coverage)),inputCoverage:this.parseList(we.pointer(we.coverage)),lookaheadCoverage:this.parseList(we.pointer(we.coverage)),lookupRecords:this.parseRecordList(mn)}:void I.assert(!1,"0x"+v.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},or[7]=function(){var v=this.parseUShort(),v=(I.argument(v===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),S=new we(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:v,extension:or[v].call(S)}},or[8]=function(){var v=this.parseUShort();return I.argument(v===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:v,coverage:this.parsePointer(we.coverage),backtrackCoverage:this.parseList(we.pointer(we.coverage)),lookaheadCoverage:this.parseList(we.pointer(we.coverage)),substitutes:this.parseUShortList()}};var Ti=new Array(9);Ti[1]=function(v){return v.substFormat===1?new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new $.Coverage(v.coverage)},{name:"deltaGlyphID",type:"USHORT",value:v.deltaGlyphId}]):new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new $.Coverage(v.coverage)}].concat($.ushortList("substitute",v.substitute)))},Ti[3]=function(v){return I.assert(v.substFormat===1,"Lookup type 3 substFormat must be 1."),new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new $.Coverage(v.coverage)}].concat($.tableList("altSet",v.alternateSets,function(S){return new $.Table("alternateSetTable",$.ushortList("alternate",S))})))},Ti[4]=function(v){return I.assert(v.substFormat===1,"Lookup type 4 substFormat must be 1."),new $.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new $.Coverage(v.coverage)}].concat($.tableList("ligSet",v.ligatureSets,function(S){return new $.Table("ligatureSetTable",$.tableList("ligature",S,function(M){return new $.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:M.ligGlyph}].concat($.ushortList("component",M.components,M.components.length+1)))}))})))};var ps={parse:function(v,S){return S=(v=new we(v,S=S||0)).parseVersion(1),I.argument(S===1||S===1.1,"Unsupported GSUB table version."),S===1?{version:S,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(or)}:{version:S,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(or),variations:v.parseFeatureVariationsList()}},make:function(v){return new $.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new $.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new $.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new $.LookupList(v.lookups,Ti)}])}},Pl={parse:function(v,S){for(var M=new ae.Parser(v,S),C=M.parseULong(),k=(I.argument(C===1,"Unsupported META table version."),M.parseULong(),M.parseULong(),M.parseULong()),B={},G=0;G<k;G++){var ne=M.parseTag(),he=M.parseULong(),fe=M.parseULong(),he=F.UTF8(v,S+he,fe);B[ne]=he}return B},make:function(v){var S,M=Object.keys(v).length,C="",k=16+12*M,B=new $.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:k},{name:"numTags",type:"ULONG",value:M}]);for(S in v){var G=C.length;C+=v[S],B.fields.push({name:"tag "+S,type:"TAG",value:S}),B.fields.push({name:"offset "+S,type:"ULONG",value:k+G}),B.fields.push({name:"length "+S,type:"ULONG",value:v[S].length})}return B.fields.push({name:"stringPool",type:"CHARARRAY",value:C}),B}};function Dl(v){return Math.log(v)/Math.log(2)|0}function Xo(v){for(;v.length%4!=0;)v.push(0);for(var S=0,M=0;M<v.length;M+=4)S+=(v[M]<<24)+(v[M+1]<<16)+(v[M+2]<<8)+v[M+3];return S%=Math.pow(2,32)}function kl(v,S,M,C){return new $.Record("Table Record",[{name:"tag",type:"TAG",value:v!==void 0?v:""},{name:"checkSum",type:"ULONG",value:S!==void 0?S:0},{name:"offset",type:"ULONG",value:M!==void 0?M:0},{name:"length",type:"ULONG",value:C!==void 0?C:0}])}function Il(v){for(var S=new $.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),M=(S.tables=v,S.numTables=v.length,Math.pow(2,Dl(S.numTables))),C=(S.searchRange=16*M,S.entrySelector=Dl(M),S.rangeShift=16*S.numTables-S.searchRange,[]),k=[],B=S.sizeOf()+kl().sizeOf()*S.numTables;B%4!=0;)B+=1,k.push({name:"padding",type:"BYTE",value:0});for(var G=0;G<v.length;G+=1){var ne=v[G],fe=(I.argument(ne.tableName.length===4,"Table name"+ne.tableName+" is invalid."),ne.sizeOf()),he=kl(ne.tableName,Xo(ne.encode()),B,fe);for(C.push({name:he.tag+" Table Record",type:"RECORD",value:he}),k.push({name:ne.tableName+" table",type:"RECORD",value:ne}),B+=fe,I.argument(!isNaN(B),"Something went wrong calculating the offset.");B%4!=0;)B+=1,k.push({name:"padding",type:"BYTE",value:0})}return C.sort(function(Te,ke){return Te.value.tag>ke.value.tag?1:-1}),S.fields=S.fields.concat(C),S.fields=S.fields.concat(k),S}function Ol(v,S,M){for(var C=0;C<S.length;C+=1){var k=v.charToGlyphIndex(S[C]);if(0<k)return v.glyphs.get(k).getMetrics()}return M}var Dh={make:Il,fontToTable:function(v){for(var S,M=[],C=[],k=[],B=[],G=[],ne=[],fe=[],he=0,Te=0,ke=0,Re=0,_e=0,et=0;et<v.glyphs.length;et+=1){var Ve=v.glyphs.get(et),Ye=0|Ve.unicode;if(isNaN(Ve.advanceWidth))throw new Error("Glyph "+Ve.name+" ("+et+"): advanceWidth is not a number.");(Ye<S||S===void 0)&&0<Ye&&(S=Ye),he<Ye&&(he=Ye);var Ye=nr.getUnicodeRange(Ye);if(Ye<32)Te|=1<<Ye;else if(Ye<64)ke|=1<<Ye-32;else if(Ye<96)Re|=1<<Ye-64;else{if(!(Ye<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");_e|=1<<Ye-96}Ve.name!==".notdef"&&(Ye=Ve.getMetrics(),M.push(Ye.xMin),C.push(Ye.yMin),k.push(Ye.xMax),B.push(Ye.yMax),ne.push(Ye.leftSideBearing),fe.push(Ye.rightSideBearing),G.push(Ve.advanceWidth))}var Ne,Ue={xMin:Math.min.apply(null,M),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,k),yMax:Math.max.apply(null,B),advanceWidthMax:Math.max.apply(null,G),advanceWidthAvg:function(Cr){for(var vs=0,Ci=0;Ci<Cr.length;Ci+=1)vs+=Cr[Ci];return vs/Cr.length}(G),minLeftSideBearing:Math.min.apply(null,ne),maxLeftSideBearing:Math.max.apply(null,ne),minRightSideBearing:Math.min.apply(null,fe)},gt=(Ue.ascender=v.ascender,Ue.descender=v.descender,jt.make({flags:3,unitsPerEm:v.unitsPerEm,xMin:Ue.xMin,yMin:Ue.yMin,xMax:Ue.xMax,yMax:Ue.yMax,lowestRecPPEM:3,createdTimestamp:v.createdTimestamp})),Et=ge.make({ascender:Ue.ascender,descender:Ue.descender,advanceWidthMax:Ue.advanceWidthMax,minLeftSideBearing:Ue.minLeftSideBearing,minRightSideBearing:Ue.minRightSideBearing,xMaxExtent:Ue.maxLeftSideBearing+(Ue.xMax-Ue.xMin),numberOfHMetrics:v.glyphs.length}),yt=qe.make(v.glyphs.length),vt=nr.make({xAvgCharWidth:Math.round(Ue.advanceWidthAvg),usWeightClass:v.tables.os2.usWeightClass,usWidthClass:v.tables.os2.usWidthClass,usFirstCharIndex:S,usLastCharIndex:he,ulUnicodeRange1:Te,ulUnicodeRange2:ke,ulUnicodeRange3:Re,ulUnicodeRange4:_e,fsSelection:v.tables.os2.fsSelection,sTypoAscender:Ue.ascender,sTypoDescender:Ue.descender,sTypoLineGap:0,usWinAscent:Ue.yMax,usWinDescent:Math.abs(Ue.yMin),ulCodePageRange1:1,sxHeight:Ol(v,"xyvw",{yMax:Math.round(Ue.ascender/2)}).yMax,sCapHeight:Ol(v,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ue).yMax,usDefaultChar:v.hasChar(" ")?32:0,usBreakChar:v.hasChar(" ")?32:0}),Pt=Ze.make(v.glyphs),ir=K.make(v.glyphs),ar=v.getEnglishName("fontFamily"),Yt=v.getEnglishName("fontSubfamily"),$t=ar+" "+Yt,hr=(hr=v.getEnglishName("postScriptName"))||ar.replace(/\s/g,"")+"-"+Yt,yr={};for(Ne in v.names)yr[Ne]=v.names[Ne];yr.uniqueID||(yr.uniqueID={en:v.getEnglishName("manufacturer")+":"+$t}),yr.postScriptName||(yr.postScriptName={en:hr}),yr.preferredFamily||(yr.preferredFamily=v.names.fontFamily),yr.preferredSubfamily||(yr.preferredSubfamily=v.names.fontSubfamily);var Ur=[],Nr=Pr.make(yr,Ur),Ur=0<Ur.length?it.make(Ur):void 0,on=Mi.make(),$t=Tt.make(v.glyphs,{version:v.getEnglishName("version"),fullName:$t,familyName:ar,weightName:Yt,postScriptName:hr,unitsPerEm:v.unitsPerEm,fontBBox:[0,Ue.yMin,Ue.ascender,Ue.advanceWidthMax]}),ar=v.metas&&0<Object.keys(v.metas).length?Pl.make(v.metas):void 0,Yt=[gt,Et,yt,vt,Nr,ir,on,$t,Pt];Ur&&Yt.push(Ur),v.tables.gsub&&Yt.push(ps.make(v.tables.gsub)),ar&&Yt.push(ar);for(var Fr=Xo((hr=Il(Yt)).encode()),ur=hr.fields,Dr=!1,lr=0;lr<ur.length;lr+=1)if(ur[lr].name==="head table"){ur[lr].value.checkSumAdjustment=2981146554-Fr,Dr=!0;break}if(Dr)return hr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Xo};function Yo(v,S){for(var M=0,C=v.length-1;M<=C;){var k=M+C>>>1,B=v[k].tag;if(B===S)return k;B<S?M=1+k:C=k-1}return-M-1}function Nl(v,S){for(var M=0,C=v.length-1;M<=C;){var k=M+C>>>1,B=v[k];if(B===S)return k;B<S?M=1+k:C=k-1}return-M-1}function Ul(v,S){for(var M=0,C=v.length-1;M<=C;){var k,B=M+C>>>1,G=(k=v[B]).start;if(G===S)return k;G<S?M=1+B:C=B-1}if(0<M)return S>(k=v[M-1]).end?0:k}function Js(v,S){this.font=v,this.tableName=S}function Qs(v){Js.call(this,v,"gpos")}function gn(v){Js.call(this,v,"gsub")}function Fl(v,S,M){for(var C=v.subtables,k=0;k<C.length;k++){var B=C[k];if(B.substFormat===S)return B}if(M)return C.push(M),M}function Bl(v){for(var S=new ArrayBuffer(v.length),M=new Uint8Array(S),C=0;C<v.length;++C)M[C]=v[C];return S}function Ei(v,S){if(!v)throw S}function zl(v,S,M,C,k){var B=0<(S&C)?(B=v.parseByte(),M+(B=S&k?B:-B)):0<(S&k)?M:M+v.parseShort();return B}function kh(v,S,M){var C,k=new ae.Parser(S,M);if(v.numberOfContours=k.parseShort(),v._xMin=k.parseShort(),v._yMin=k.parseShort(),v._xMax=k.parseShort(),v._yMax=k.parseShort(),0<v.numberOfContours){for(var B=v.endPointIndices=[],G=0;G<v.numberOfContours;G+=1)B.push(k.parseUShort());v.instructionLength=k.parseUShort(),v.instructions=[];for(var ne=0;ne<v.instructionLength;ne+=1)v.instructions.push(k.parseByte());for(var fe=B[B.length-1]+1,he=[],Te=0;Te<fe;Te+=1)if(C=k.parseByte(),he.push(C),0<(8&C))for(var ke=k.parseByte(),Re=0;Re<ke;Re+=1)he.push(C),Te+=1;if(I.argument(he.length===fe,"Bad flags."),0<B.length){var _e,et=[];if(0<fe){for(var Ve=0;Ve<fe;Ve+=1)C=he[Ve],(_e={}).onCurve=!!(1&C),_e.lastPointOfContour=0<=B.indexOf(Ve),et.push(_e);for(var Ye=0,Ne=0;Ne<fe;Ne+=1)C=he[Ne],(_e=et[Ne]).x=zl(k,C,Ye,2,16),Ye=_e.x;for(var Ue=0,gt=0;gt<fe;gt+=1)C=he[gt],(_e=et[gt]).y=zl(k,C,Ue,4,32),Ue=_e.y}v.points=et}else v.points=[]}else if(v.numberOfContours===0)v.points=[];else{v.isComposite=!0,v.points=[],v.components=[];for(var Et=!0;Et;){he=k.parseUShort();var yt={glyphIndex:k.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&he)?0<(2&he)?(yt.dx=k.parseShort(),yt.dy=k.parseShort()):yt.matchedPoints=[k.parseUShort(),k.parseUShort()]:0<(2&he)?(yt.dx=k.parseChar(),yt.dy=k.parseChar()):yt.matchedPoints=[k.parseByte(),k.parseByte()],0<(8&he)?yt.xScale=yt.yScale=k.parseF2Dot14():0<(64&he)?(yt.xScale=k.parseF2Dot14(),yt.yScale=k.parseF2Dot14()):0<(128&he)&&(yt.xScale=k.parseF2Dot14(),yt.scale01=k.parseF2Dot14(),yt.scale10=k.parseF2Dot14(),yt.yScale=k.parseF2Dot14()),v.components.push(yt),Et=!!(32&he)}if(256&he){v.instructionLength=k.parseUShort(),v.instructions=[];for(var vt=0;vt<v.instructionLength;vt+=1)v.instructions.push(k.parseByte())}}}function Zo(v,S){for(var M=[],C=0;C<v.length;C+=1){var k=v[C],k={x:S.xScale*k.x+S.scale01*k.y+S.dx,y:S.scale10*k.x+S.yScale*k.y+S.dy,onCurve:k.onCurve,lastPointOfContour:k.lastPointOfContour};M.push(k)}return M}function Gl(v){var S=new q;if(v)for(var M=function(ke){for(var Re=[],_e=[],et=0;et<ke.length;et+=1){var Ve=ke[et];_e.push(Ve),Ve.lastPointOfContour&&(Re.push(_e),_e=[])}return I.argument(_e.length===0,"There are still points left in the current contour."),Re}(v),C=0;C<M.length;++C){var k,B=M[C],G=B[B.length-1],ne=B[0];G.onCurve?S.moveTo(G.x,G.y):ne.onCurve?S.moveTo(ne.x,ne.y):(k={x:.5*(G.x+ne.x),y:.5*(G.y+ne.y)},S.moveTo(k.x,k.y));for(var fe=0;fe<B.length;++fe){var he,Te=G,G=ne,ne=B[(fe+1)%B.length];G.onCurve?S.lineTo(G.x,G.y):(he=ne,Te.onCurve||(G.x,Te.x,G.y,Te.y),ne.onCurve||(he={x:.5*(G.x+ne.x),y:.5*(G.y+ne.y)}),S.quadraticCurveTo(G.x,G.y,he.x,he.y))}S.closePath()}return S}function Ih(v,S){if(S.isComposite)for(var M=0;M<S.components.length;M+=1){var C=S.components[M],k=v.get(C.glyphIndex);if(k.getPath(),k.points){var B=void 0;if(C.matchedPoints===void 0)B=Zo(k.points,C);else{if(C.matchedPoints[0]>S.points.length-1||C.matchedPoints[1]>k.points.length-1)throw Error("Matched points out of range in "+S.name);var G=S.points[C.matchedPoints[0]],ne=k.points[C.matchedPoints[1]],C={xScale:C.xScale,scale01:C.scale01,scale10:C.scale10,yScale:C.yScale,dx:0,dy:0},ne=Zo([ne],C)[0];C.dx=G.x-ne.x,C.dy=G.y-ne.y,B=Zo(k.points,C)}S.points=S.points.concat(B)}}return Gl(S.points)}(Qs.prototype=Js.prototype={searchTag:Yo,binSearch:Nl,getTable:function(v){var S=this.font.tables[this.tableName];return S=!S&&v?this.font.tables[this.tableName]=this.createDefaultTable():S},getScriptNames:function(){var v=this.getTable();return v?v.scripts.map(function(S){return S.tag}):[]},getDefaultScriptName:function(){var v=this.getTable();if(v){for(var S=!1,M=0;M<v.scripts.length;M++){var C=v.scripts[M].tag;if(C==="DFLT")return C;C==="latn"&&(S=!0)}return S?"latn":void 0}},getScriptTable:function(v,S){var M,C=this.getTable(S);if(C)return M=C.scripts,0<=(C=Yo(C.scripts,v=v||"DFLT"))?M[C].script:S?(M.splice(-1-C,0,S={tag:v,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),S.script):void 0},getLangSysTable:function(k,S,M){var C,k=this.getScriptTable(k,M);if(k)return S&&S!=="dflt"&&S!=="DFLT"?0<=(C=Yo(k.langSysRecords,S))?k.langSysRecords[C].langSys:M?(k.langSysRecords.splice(-1-C,0,M={tag:S,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),M.langSys):void 0:k.defaultLangSys},getFeatureTable:function(v,S,M,C){if(v=this.getLangSysTable(v,S,C),v){for(var k,B=v.featureIndexes,G=this.font.tables[this.tableName].features,ne=0;ne<B.length;ne++)if((k=G[B[ne]]).tag===M)return k.feature;if(C)return S=G.length,I.assert(S===0||M>=G[S-1].tag,"Features must be added in alphabetical order."),G.push(k={tag:M,feature:{params:0,lookupListIndexes:[]}}),B.push(S),k.feature}},getLookupTables:function(B,S,M,C,k){var B=this.getFeatureTable(B,S,M,k),G=[];if(B){for(var ne,fe=B.lookupListIndexes,he=this.font.tables[this.tableName].lookups,Te=0;Te<fe.length;Te++)(ne=he[fe[Te]]).lookupType===C&&G.push(ne);if(G.length===0&&k)return S=he.length,he.push(ne={lookupType:C,lookupFlag:0,subtables:[],markFilteringSet:void 0}),fe.push(S),[ne]}return G},getGlyphClass:function(v,S){switch(v.format){case 1:return v.startGlyph<=S&&S<v.startGlyph+v.classes.length?v.classes[S-v.startGlyph]:0;case 2:var M=Ul(v.ranges,S);return M?M.classId:0}},getCoverageIndex:function(v,S){switch(v.format){case 1:var M=Nl(v.glyphs,S);return 0<=M?M:-1;case 2:return M=Ul(v.ranges,S),M?M.index+S-M.start:-1}},expandCoverage:function(v){if(v.format===1)return v.glyphs;for(var S=[],M=v.ranges,C=0;C<M.length;C++)for(var k=M[C],B=k.start,G=k.end,ne=B;ne<=G;ne++)S.push(ne);return S}}).init=function(){var v=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(v)},Qs.prototype.getKerningValue=function(v,S,M){for(var C=0;C<v.length;C++)for(var k=v[C].subtables,B=0;B<k.length;B++){var G=k[B],ne=this.getCoverageIndex(G.coverage,S);if(!(ne<0))switch(G.posFormat){case 1:for(var fe=G.pairSets[ne],he=0;he<fe.length;he++){var Te=fe[he];if(Te.secondGlyph===M)return Te.value1&&Te.value1.xAdvance||0}break;case 2:var Re=this.getGlyphClass(G.classDef1,S),ke=this.getGlyphClass(G.classDef2,M),Re=G.classRecords[Re][ke];return Re.value1&&Re.value1.xAdvance||0}}return 0},Qs.prototype.getKerningTables=function(v,S){if(this.font.tables.gpos)return this.getLookupTables(v,S,"kern",2)},(gn.prototype=Js.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},gn.prototype.getSingle=function(v,S,M){for(var C=[],k=this.getLookupTables(S,M,v,1),B=0;B<k.length;B++)for(var G=k[B].subtables,ne=0;ne<G.length;ne++){var fe=G[ne],he=this.expandCoverage(fe.coverage),Te=void 0;if(fe.substFormat===1)for(var ke=fe.deltaGlyphId,Te=0;Te<he.length;Te++){var Re=he[Te];C.push({sub:Re,by:Re+ke})}else{var _e=fe.substitute;for(Te=0;Te<he.length;Te++)C.push({sub:he[Te],by:_e[Te]})}}return C},gn.prototype.getAlternates=function(v,S,M){for(var C=[],k=this.getLookupTables(S,M,v,3),B=0;B<k.length;B++)for(var G=k[B].subtables,ne=0;ne<G.length;ne++)for(var fe=G[ne],he=this.expandCoverage(fe.coverage),Te=fe.alternateSets,ke=0;ke<he.length;ke++)C.push({sub:he[ke],by:Te[ke]});return C},gn.prototype.getLigatures=function(v,S,M){for(var C=[],k=this.getLookupTables(S,M,v,4),B=0;B<k.length;B++)for(var G=k[B].subtables,ne=0;ne<G.length;ne++)for(var fe=G[ne],he=this.expandCoverage(fe.coverage),Te=fe.ligatureSets,ke=0;ke<he.length;ke++)for(var Re=he[ke],_e=Te[ke],et=0;et<_e.length;et++){var Ve=_e[et];C.push({sub:[Re].concat(Ve.components),by:Ve.ligGlyph})}return C},gn.prototype.addSingle=function(v,S,M,C){M=Fl(this.getLookupTables(M,C,v,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),I.assert(M.coverage.format===1,"Ligature: unable to modify coverage table format "+M.coverage.format),C=S.sub,v=this.binSearch(M.coverage.glyphs,C),v<0&&(M.coverage.glyphs.splice(v=-1-v,0,C),M.substitute.splice(v,0,0)),M.substitute[v]=S.by},gn.prototype.addAlternate=function(v,S,M,C){M=Fl(this.getLookupTables(M,C,v,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),I.assert(M.coverage.format===1,"Ligature: unable to modify coverage table format "+M.coverage.format),C=S.sub,v=this.binSearch(M.coverage.glyphs,C),v<0&&(M.coverage.glyphs.splice(v=-1-v,0,C),M.alternateSets.splice(v,0,0)),M.alternateSets[v]=S.by},gn.prototype.addLigature=function(B,fe,ne,k){var ne=this.getLookupTables(ne,k,B,4,!0)[0],k=ne.subtables[0],B=(k||(ne.subtables[0]=k={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),I.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format),fe.sub[0]),G=fe.sub.slice(1),ne={ligGlyph:fe.by,components:G},fe=this.binSearch(k.coverage.glyphs,B);if(0<=fe){for(var he=k.ligatureSets[fe],Te=0;Te<he.length;Te++)if(function(ke,Re){var _e=ke.length;if(_e===Re.length){for(var et=0;et<_e;et++)if(ke[et]!==Re[et])return;return 1}}(he[Te].components,G))return;he.push(ne)}else k.coverage.glyphs.splice(fe=-1-fe,0,B),k.ligatureSets.splice(fe,0,[ne])},gn.prototype.getFeature=function(v,S,M){if(/ss\d\d/.test(v))return this.getSingle(v,S,M);switch(v){case"aalt":case"salt":return this.getSingle(v,S,M).concat(this.getAlternates(v,S,M));case"dlig":case"liga":case"rlig":return this.getLigatures(v,S,M)}},gn.prototype.add=function(v,S,M,C){if(/ss\d\d/.test(v))return this.addSingle(v,S,M,C);switch(v){case"aalt":case"salt":return typeof S.by=="number"?this.addSingle(v,S,M,C):this.addAlternate(v,S,M,C);case"dlig":case"liga":case"rlig":return this.addLigature(v,S,M,C)}};var Vl={getPath:Gl,parse:function(v,S,M,C){for(var k=new ot.GlyphSet(C),B=0;B<M.length-1;B+=1){var G=M[B];G!==M[B+1]?k.push(B,ot.ttfGlyphLoader(C,B,kh,v,S+G,Ih)):k.push(B,ot.glyphLoader(C,B))}return k}};function Hl(v){this.font=v,this.getCommands=function(S){return Vl.getPath(S).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Oh(v){return v}function Wl(v){return Math.sign(v)*Math.round(Math.abs(v))}function Nh(v){return Math.sign(v)*Math.round(Math.abs(2*v))/2}function Uh(v){return Math.sign(v)*(Math.round(Math.abs(v)+.5)-.5)}function Fh(v){return Math.sign(v)*Math.ceil(Math.abs(v))}function Bh(v){return Math.sign(v)*Math.floor(Math.abs(v))}function ql(v){var S=this.srPeriod,M=this.srPhase,C=1;return v<0&&(v=-v,C=-1),v+=this.srThreshold-M,v=Math.trunc(v/S)*S,(v+=M)<0?M*C:v*C}var yn={x:1,y:0,axis:"x",distance:function(v,S,M,C){return(M?v.xo:v.x)-(C?S.xo:S.x)},interpolate:function(v,S,M,C){var k,B,G,ne,fe,he,Te;if(!C||C===this)return k=v.xo-S.xo,B=v.xo-M.xo,fe=S.x-S.xo,he=M.x-M.xo,(Te=(G=Math.abs(k))+(ne=Math.abs(B)))===0?void(v.x=v.xo+(fe+he)/2):void(v.x=v.xo+(fe*ne+he*G)/Te);k=C.distance(v,S,!0,!0),B=C.distance(v,M,!0,!0),fe=C.distance(S,S,!1,!0),he=C.distance(M,M,!1,!0),(Te=(G=Math.abs(k))+(ne=Math.abs(B)))===0?yn.setRelative(v,v,(fe+he)/2,C,!0):yn.setRelative(v,v,(fe*ne+he*G)/Te,C,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(v,S,M,C,k){var B,G;C&&C!==this?(B=k?S.xo:S.x,G=k?S.yo:S.y,B+=M*C.x,G+=M*C.y,v.x=B+(v.y-G)/C.normalSlope):v.x=(k?S.xo:S.x)+M},slope:0,touch:function(v){v.xTouched=!0},touched:function(v){return v.xTouched},untouch:function(v){v.xTouched=!1}},Sn={x:0,y:1,axis:"y",distance:function(v,S,M,C){return(M?v.yo:v.y)-(C?S.yo:S.y)},interpolate:function(v,S,M,C){var k,B,G,ne,fe,he,Te;if(!C||C===this)return k=v.yo-S.yo,B=v.yo-M.yo,fe=S.y-S.yo,he=M.y-M.yo,(Te=(G=Math.abs(k))+(ne=Math.abs(B)))===0?void(v.y=v.yo+(fe+he)/2):void(v.y=v.yo+(fe*ne+he*G)/Te);k=C.distance(v,S,!0,!0),B=C.distance(v,M,!0,!0),fe=C.distance(S,S,!1,!0),he=C.distance(M,M,!1,!0),(Te=(G=Math.abs(k))+(ne=Math.abs(B)))===0?Sn.setRelative(v,v,(fe+he)/2,C,!0):Sn.setRelative(v,v,(fe*ne+he*G)/Te,C,!0)},normalSlope:0,setRelative:function(v,S,M,C,k){var B,G;C&&C!==this?(B=k?S.xo:S.x,G=k?S.yo:S.y,B+=M*C.x,G+=M*C.y,v.y=G+C.normalSlope*(v.x-B)):v.y=(k?S.yo:S.y)+M},slope:Number.POSITIVE_INFINITY,touch:function(v){v.yTouched=!0},touched:function(v){return v.yTouched},untouch:function(v){v.yTouched=!1}};function ms(v,S){this.x=v,this.y=S,this.axis=void 0,this.slope=S/v,this.normalSlope=-v/S,Object.freeze(this)}function gs(v,S){var M=Math.sqrt(v*v+S*S);return S/=M,(v/=M)===1&&S===0?yn:v===0&&S===1?Sn:new ms(v,S)}function Mn(v,S,M,C){this.x=this.xo=Math.round(64*v)/64,this.y=this.yo=Math.round(64*S)/64,this.lastPointOfContour=M,this.onCurve=C,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(yn),Object.freeze(Sn),ms.prototype.distance=function(v,S,M,C){return this.x*yn.distance(v,S,M,C)+this.y*Sn.distance(v,S,M,C)},ms.prototype.interpolate=function(v,k,B,C){var G=C.distance(v,k,!0,!0),ne=C.distance(v,B,!0,!0),k=C.distance(k,k,!1,!0),B=C.distance(B,B,!1,!0),G=Math.abs(G),ne=Math.abs(ne),fe=G+ne;fe===0?this.setRelative(v,v,(k+B)/2,C,!0):this.setRelative(v,v,(k*ne+B*G)/fe,C,!0)},ms.prototype.setRelative=function(v,B,fe,he,ne){var G=ne?B.xo:B.x,ne=ne?B.yo:B.y,B=G+fe*(he=he||this).x,G=ne+fe*he.y,ne=he.normalSlope,fe=this.slope,he=v.x,Te=v.y;v.x=(fe*he-ne*B+G-Te)/(fe-ne),v.y=fe*(v.x-he)+Te},ms.prototype.touch=function(v){v.xTouched=!0,v.yTouched=!0},Mn.prototype.nextTouched=function(v){for(var S=this.nextPointOnContour;!v.touched(S)&&S!==this;)S=S.nextPointOnContour;return S},Mn.prototype.prevTouched=function(v){for(var S=this.prevPointOnContour;!v.touched(S)&&S!==this;)S=S.prevPointOnContour;return S};var ys=Object.freeze(new Mn(0,0)),zh={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Gn(v,S){switch(this.env=v,this.stack=[],this.prog=S,v){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=yn,this.round=Wl}}function $s(v){for(var S=v.tZone=new Array(v.gZone.length),M=0;M<S.length;M++)S[M]=new Mn(0,0)}function Xl(v,S){var M,C=v.prog,k=v.ip,B=1;do if((M=C[++k])===88)B++;else if(M===89)B--;else if(M===64)k+=C[k+1]+1;else if(M===65)k+=2*C[k+1]+1;else if(176<=M&&M<=183)k+=M-176+1;else if(184<=M&&M<=191)k+=2*(M-184+1);else if(S&&B===1&&M===27)break;while(0<B);v.ip=k}function Yl(v,S){a.DEBUG&&console.log(S.step,"SVTCA["+v.axis+"]"),S.fv=S.pv=S.dpv=v}function Zl(v,S){a.DEBUG&&console.log(S.step,"SPVTCA["+v.axis+"]"),S.pv=S.dpv=v}function Kl(v,S){a.DEBUG&&console.log(S.step,"SFVTCA["+v.axis+"]"),S.fv=v}function Jl(v,S){var M,k=S.stack,C=k.pop(),k=k.pop(),B=S.z2[C],G=S.z1[k];a.DEBUG&&console.log("SPVTL["+v+"]",C,k),C=v?(M=B.y-G.y,G.x-B.x):(M=G.x-B.x,G.y-B.y),S.pv=S.dpv=gs(M,C)}function Ql(v,S){var M,k=S.stack,C=k.pop(),k=k.pop(),B=S.z2[C],G=S.z1[k];a.DEBUG&&console.log("SFVTL["+v+"]",C,k),C=v?(M=B.y-G.y,G.x-B.x):(M=G.x-B.x,G.y-B.y),S.fv=gs(M,C)}function Ko(v){a.DEBUG&&console.log(v.step,"POP[]"),v.stack.pop()}function $l(v,S){var M=S.stack.pop(),C=S.z0[M],k=S.fv,B=S.pv,G=(a.DEBUG&&console.log(S.step,"MDAP["+v+"]",M),B.distance(C,ys));v&&(G=S.round(G)),k.setRelative(C,ys,G,B),k.touch(C),S.rp0=S.rp1=M}function ec(v,S){var M,C,k,B=S.z2,G=B.length-2;a.DEBUG&&console.log(S.step,"IUP["+v.axis+"]");for(var ne=0;ne<G;ne++)M=B[ne],v.touched(M)||(C=M.prevTouched(v))!==M&&(C===(k=M.nextTouched(v))&&v.setRelative(M,M,v.distance(C,C,!1,!0),v,!0),v.interpolate(M,C,k,v))}function tc(v,S){for(var M=S.stack,C=v?S.rp1:S.rp2,k=(v?S.z0:S.z1)[C],B=S.fv,G=S.pv,ne=S.loop,fe=S.z2;ne--;){var he=M.pop(),Te=fe[he],ke=G.distance(k,k,!1,!0);B.setRelative(Te,Te,ke,G),B.touch(Te),a.DEBUG&&console.log(S.step,(1<S.loop?"loop "+(S.loop-ne)+": ":"")+"SHP["+(v?"rp1":"rp2")+"]",he)}S.loop=1}function rc(v,S){for(var M=S.stack,G=v?S.rp1:S.rp2,C=(v?S.z0:S.z1)[G],k=S.fv,B=S.pv,G=M.pop(),ne=S.z2[S.contours[G]],fe=ne,he=(a.DEBUG&&console.log(S.step,"SHC["+v+"]",G),B.distance(C,C,!1,!0));fe!==C&&k.setRelative(fe,fe,he,B),(fe=fe.nextPointOnContour)!==ne;);}function nc(v,S){var M,C,ne=S.stack,k=v?S.rp1:S.rp2,k=(v?S.z0:S.z1)[k],B=S.fv,G=S.pv,ne=ne.pop();switch(a.DEBUG&&console.log(S.step,"SHZ["+v+"]",ne),ne){case 0:M=S.tZone;break;case 1:M=S.gZone;break;default:throw new Error("Invalid zone")}for(var fe=G.distance(k,k,!1,!0),he=M.length-2,Te=0;Te<he;Te++)C=M[Te],B.setRelative(C,C,fe,G)}function ic(v,S){var C=S.stack,M=C.pop()/64,C=C.pop(),k=S.z1[C],B=S.z0[S.rp0],G=S.fv,ne=S.pv;G.setRelative(k,B,M,ne),G.touch(k),a.DEBUG&&console.log(S.step,"MSIRP["+v+"]",M,C),S.rp1=S.rp0,S.rp2=C,v&&(S.rp0=C)}function sc(v,S){var M=S.stack,ne=M.pop(),M=M.pop(),C=S.z0[M],k=S.fv,B=S.pv,G=S.cvt[ne],ne=(a.DEBUG&&console.log(S.step,"MIAP["+v+"]",ne,"(",G,")",M),B.distance(C,ys));v&&(Math.abs(ne-G)<S.cvCutIn&&(ne=G),ne=S.round(ne)),k.setRelative(C,ys,ne,B),S.zp0===0&&(C.xo=C.x,C.yo=C.y),k.touch(C),S.rp0=S.rp1=M}function oc(v,S){var M=S.stack,C=M.pop(),k=S.z2[C];a.DEBUG&&console.log(S.step,"GC["+v+"]",C),M.push(64*S.dpv.distance(k,ys,v,!1))}function ac(v,S){var C=S.stack,M=C.pop(),C=C.pop(),k=S.z1[M],B=S.z0[C],B=S.dpv.distance(B,k,v,v);a.DEBUG&&console.log(S.step,"MD["+v+"]",M,C,"->",B),S.stack.push(Math.round(64*B))}function Jo(v,S){var M=S.stack,C=M.pop(),k=S.fv,B=S.pv,G=S.ppem,ne=S.deltaBase+16*(v-1),fe=S.deltaShift,he=S.z0;a.DEBUG&&console.log(S.step,"DELTAP["+v+"]",C,M);for(var Te=0;Te<C;Te++){var ke=M.pop(),Re=M.pop();ne+((240&Re)>>4)===G&&(0<=(Re=(15&Re)-8)&&Re++,a.DEBUG&&console.log(S.step,"DELTAPFIX",ke,"by",Re*fe),ke=he[ke],k.setRelative(ke,ke,Re*fe,B))}}function eo(v,S){var M=S.stack,C=M.pop();a.DEBUG&&console.log(S.step,"ROUND[]"),M.push(64*S.round(C/64))}function Qo(v,S){var M=S.stack,C=M.pop(),k=S.ppem,B=S.deltaBase+16*(v-1),G=S.deltaShift;a.DEBUG&&console.log(S.step,"DELTAC["+v+"]",C,M);for(var ne=0;ne<C;ne++){var fe=M.pop(),he=M.pop();B+((240&he)>>4)===k&&(0<=(he=(15&he)-8)&&he++,he=he*G,a.DEBUG&&console.log(S.step,"DELTACFIX",fe,"by",he),S.cvt[fe]+=he)}}function lc(v,S){var M,k=S.stack,C=k.pop(),k=k.pop(),B=S.z2[C],G=S.z1[k];a.DEBUG&&console.log(S.step,"SDPVTL["+v+"]",C,k),C=v?(M=B.y-G.y,G.x-B.x):(M=G.x-B.x,G.y-B.y),S.dpv=gs(M,C)}function Vn(v,S){var M=S.stack,C=S.prog,k=S.ip;a.DEBUG&&console.log(S.step,"PUSHB["+v+"]");for(var B=0;B<v;B++)M.push(C[++k]);S.ip=k}function Hn(v,S){var M=S.ip,C=S.prog,k=S.stack;a.DEBUG&&console.log(S.ip,"PUSHW["+v+"]");for(var B=0;B<v;B++){var G=C[++M]<<8|C[++M];32768&G&&(G=-(1+(65535^G))),k.push(G)}S.ip=M}function pt(v,S,M,C,k,B){var G,ne,he=B.stack,fe=v&&he.pop(),he=he.pop(),Te=B.rp0,Te=B.z0[Te],ke=B.z1[he],Re=B.minDis,_e=B.fv,et=B.dpv,Ve=G=et.distance(ke,Te,!0,!0),Ye=0<=Ve?1:-1;Ve=Math.abs(Ve),v&&(ne=B.cvt[fe],C&&Math.abs(Ve-ne)<B.cvCutIn&&(Ve=ne)),M&&Ve<Re&&(Ve=Re),C&&(Ve=B.round(Ve)),_e.setRelative(ke,Te,Ye*Ve,et),_e.touch(ke),a.DEBUG&&console.log(B.step,(v?"MIRP[":"MDRP[")+(S?"M":"m")+(M?">":"_")+(C?"R":"_")+(k===0?"Gr":k===1?"Bl":k===2?"Wh":"")+"]",v?fe+"("+B.cvt[fe]+","+ne+")":"",he,"(d =",G,"->",Ye*Ve,")"),B.rp1=B.rp0,B.rp2=he,S&&(B.rp0=he)}Hl.prototype.exec=function(v,S){if(typeof S!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var M=this.font,C=this._prepState;if(!C||C.ppem!==S){var k=this._fpgmState;if(!k){Gn.prototype=zh,(k=this._fpgmState=new Gn("fpgm",M.tables.fpgm)).funcs=[],k.font=M,a.DEBUG&&(console.log("---EXEC FPGM---"),k.step=-1);try{ji(k)}catch(he){return console.log("Hinting error in FPGM:"+he),void(this._errorState=3)}}Gn.prototype=k,(C=this._prepState=new Gn("prep",M.tables.prep)).ppem=S;var B=M.tables.cvt;if(B)for(var G=C.cvt=new Array(B.length),ne=S/M.unitsPerEm,fe=0;fe<B.length;fe++)G[fe]=B[fe]*ne;else C.cvt=[];a.DEBUG&&(console.log("---EXEC PREP---"),C.step=-1);try{ji(C)}catch(he){this._errorState<2&&console.log("Hinting error in PREP:"+he),this._errorState=2}}if(!(1<this._errorState))try{return Gh(v,C)}catch(he){this._errorState<1&&(console.log("Hinting error:"+he),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Gh=function(v,S){var M=S.ppem/S.font.unitsPerEm,C=M,k=v.components;if(Gn.prototype=S,k){for(var B=S.font,G=[],ne=[],fe=0;fe<k.length;fe++){var he=k[fe],Te=B.glyphs.get(he.glyphIndex),ke=new Gn("glyf",Te.instructions);a.DEBUG&&(console.log("---EXEC COMP "+fe+"---"),ke.step=-1),cc(Te,ke,M,C);for(var Re=Math.round(he.dx*M),_e=Math.round(he.dy*C),et=ke.gZone,Ve=ke.contours,Ye=0;Ye<et.length;Ye++){var Ne=et[Ye];Ne.xTouched=Ne.yTouched=!1,Ne.xo=Ne.x=Ne.x+Re,Ne.yo=Ne.y=Ne.y+_e}var Ue=G.length;G.push.apply(G,et);for(var gt=0;gt<Ve.length;gt++)ne.push(Ve[gt]+Ue)}v.instructions&&!ke.inhibitGridFit&&((ke=new Gn("glyf",v.instructions)).gZone=ke.z0=ke.z1=ke.z2=G,ke.contours=ne,G.push(new Mn(0,0),new Mn(Math.round(v.advanceWidth*M),0)),a.DEBUG&&(console.log("---EXEC COMPOSITE---"),ke.step=-1),ji(ke),G.length-=2)}else ke=new Gn("glyf",v.instructions),a.DEBUG&&(console.log("---EXEC GLYPH---"),ke.step=-1),cc(v,ke,M,C),G=ke.gZone;return G},cc=function(v,S,M,C){for(var k,B,G,ne=v.points||[],fe=ne.length,he=S.gZone=S.z0=S.z1=S.z2=[],Te=S.contours=[],ke=0;ke<fe;ke++)k=ne[ke],he[ke]=new Mn(k.x*M,k.y*C,k.lastPointOfContour,k.onCurve);for(var Re=0;Re<fe;Re++)k=he[Re],B||(B=k,Te.push(Re)),k.lastPointOfContour?((k.nextPointOnContour=B).prevPointOnContour=k,B=void 0):(G=he[Re+1],(k.nextPointOnContour=G).prevPointOnContour=k);if(!S.inhibitGridFit){if(a.DEBUG){console.log("PROCESSING GLYPH",S.stack);for(var _e=0;_e<fe;_e++)console.log(_e,he[_e].x,he[_e].y)}if(he.push(new Mn(0,0),new Mn(Math.round(v.advanceWidth*M),0)),ji(S),he.length-=2,a.DEBUG){console.log("FINISHED GLYPH",S.stack);for(var et=0;et<fe;et++)console.log(et,he[et].x,he[et].y)}}},ji=function(v){var S=v.prog;if(S){var M,C=S.length;for(v.ip=0;v.ip<C;v.ip++){if(a.DEBUG&&v.step++,!(M=Vh[S[v.ip]]))throw new Error("unknown instruction: 0x"+Number(S[v.ip]).toString(16));M(v)}}},Vh=[Yl.bind(void 0,Sn),Yl.bind(void 0,yn),Zl.bind(void 0,Sn),Zl.bind(void 0,yn),Kl.bind(void 0,Sn),Kl.bind(void 0,yn),Jl.bind(void 0,0),Jl.bind(void 0,1),Ql.bind(void 0,0),Ql.bind(void 0,1),function(v){var S=(M=v.stack).pop(),M=M.pop();a.DEBUG&&console.log(v.step,"SPVFS[]",S,M),v.pv=v.dpv=gs(M,S)},function(v){var S=(M=v.stack).pop(),M=M.pop();a.DEBUG&&console.log(v.step,"SPVFS[]",S,M),v.fv=gs(M,S)},function(v){var S=v.stack,M=v.pv;a.DEBUG&&console.log(v.step,"GPV[]"),S.push(16384*M.x),S.push(16384*M.y)},function(v){var S=v.stack,M=v.fv;a.DEBUG&&console.log(v.step,"GFV[]"),S.push(16384*M.x),S.push(16384*M.y)},function(v){v.fv=v.pv,a.DEBUG&&console.log(v.step,"SFVTPV[]")},function(S){var M=(G=S.stack).pop(),C=G.pop(),k=G.pop(),B=G.pop(),G=G.pop(),fe=S.z0,Te=S.z1,ne=fe[M],fe=fe[C],he=Te[k],Te=Te[B],S=S.z2[G],M=(a.DEBUG&&console.log("ISECT[], ",M,C,k,B,G),ne.x),C=ne.y,k=fe.x,B=fe.y,G=he.x,ne=he.y,fe=Te.x,he=Te.y,Te=(M-k)*(ne-he)-(C-B)*(G-fe),ke=M*B-C*k,Re=G*he-ne*fe;S.x=(ke*(G-fe)-Re*(M-k))/Te,S.y=(ke*(ne-he)-Re*(C-B))/Te},function(v){v.rp0=v.stack.pop(),a.DEBUG&&console.log(v.step,"SRP0[]",v.rp0)},function(v){v.rp1=v.stack.pop(),a.DEBUG&&console.log(v.step,"SRP1[]",v.rp1)},function(v){v.rp2=v.stack.pop(),a.DEBUG&&console.log(v.step,"SRP2[]",v.rp2)},function(v){var S=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"SZP0[]",S),v.zp0=S){case 0:v.tZone||$s(v),v.z0=v.tZone;break;case 1:v.z0=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var S=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"SZP1[]",S),v.zp1=S){case 0:v.tZone||$s(v),v.z1=v.tZone;break;case 1:v.z1=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var S=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"SZP2[]",S),v.zp2=S){case 0:v.tZone||$s(v),v.z2=v.tZone;break;case 1:v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){var S=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"SZPS[]",S),v.zp0=v.zp1=v.zp2=S){case 0:v.tZone||$s(v),v.z0=v.z1=v.z2=v.tZone;break;case 1:v.z0=v.z1=v.z2=v.gZone;break;default:throw new Error("Invalid zone pointer")}},function(v){v.loop=v.stack.pop(),a.DEBUG&&console.log(v.step,"SLOOP[]",v.loop)},function(v){a.DEBUG&&console.log(v.step,"RTG[]"),v.round=Wl},function(v){a.DEBUG&&console.log(v.step,"RTHG[]"),v.round=Uh},function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"SMD[]",S),v.minDis=S/64},function(v){a.DEBUG&&console.log(v.step,"ELSE[]"),Xl(v,!1)},function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"JMPR[]",S),v.ip+=S-1},function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"SCVTCI[]",S),v.cvCutIn=S/64},void 0,void 0,function(v){var S=v.stack;a.DEBUG&&console.log(v.step,"DUP[]"),S.push(S[S.length-1])},Ko,function(v){a.DEBUG&&console.log(v.step,"CLEAR[]"),v.stack.length=0},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"SWAP[]"),S.push(M),S.push(C)},function(v){var S=v.stack;a.DEBUG&&console.log(v.step,"DEPTH[]"),S.push(S.length)},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"CINDEX[]",M),S.push(S[S.length-M])},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"MINDEX[]",M),S.push(S.splice(S.length-M,1)[0])},void 0,void 0,void 0,function(v){var S=(C=v.stack).pop(),M=C.pop(),C=(a.DEBUG&&console.log(v.step,"LOOPCALL[]",S,M),v.ip),k=v.prog;v.prog=v.funcs[S];for(var B=0;B<M;B++)ji(v),a.DEBUG&&console.log(++v.step,B+1<M?"next loopcall":"done loopcall",B);v.ip=C,v.prog=k},function(v){var S=v.stack.pop(),M=(a.DEBUG&&console.log(v.step,"CALL[]",S),v.ip),C=v.prog;v.prog=v.funcs[S],ji(v),v.ip=M,v.prog=C,a.DEBUG&&console.log(++v.step,"returning from",S)},function(v){if(v.env!=="fpgm")throw new Error("FDEF not allowed here");var C=v.stack,S=v.prog,M=v.ip,C=C.pop(),k=M;for(a.DEBUG&&console.log(v.step,"FDEF[]",C);S[++M]!==45;);v.ip=M,v.funcs[C]=S.slice(k+1,M)},void 0,$l.bind(void 0,0),$l.bind(void 0,1),ec.bind(void 0,Sn),ec.bind(void 0,yn),tc.bind(void 0,0),tc.bind(void 0,1),rc.bind(void 0,0),rc.bind(void 0,1),nc.bind(void 0,0),nc.bind(void 0,1),function(v){for(var S=v.stack,M=v.loop,C=v.fv,k=S.pop()/64,B=v.z2;M--;){var G=S.pop(),ne=B[G];a.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-M)+": ":"")+"SHPIX[]",G,k),C.setRelative(ne,ne,k),C.touch(ne)}v.loop=1},function(v){for(var S=v.stack,M=v.rp1,C=v.rp2,k=v.loop,B=v.z0[M],G=v.z1[C],ne=v.fv,fe=v.dpv,he=v.z2;k--;){var Te=S.pop(),ke=he[Te];a.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-k)+": ":"")+"IP[]",Te,M,"<->",C),ne.interpolate(ke,B,G,fe),ne.touch(ke)}v.loop=1},ic.bind(void 0,0),ic.bind(void 0,1),function(v){for(var S=v.stack,M=v.rp0,C=v.z0[M],k=v.loop,B=v.fv,G=v.pv,ne=v.z1;k--;){var fe=S.pop(),he=ne[fe];a.DEBUG&&console.log(v.step,(1<v.loop?"loop "+(v.loop-k)+": ":"")+"ALIGNRP[]",fe),B.setRelative(he,C,0,G),B.touch(he)}v.loop=1},function(v){a.DEBUG&&console.log(v.step,"RTDG[]"),v.round=Nh},sc.bind(void 0,0),sc.bind(void 0,1),function(v){var S=v.prog,M=v.ip,C=v.stack,k=S[++M];a.DEBUG&&console.log(v.step,"NPUSHB[]",k);for(var B=0;B<k;B++)C.push(S[++M]);v.ip=M},function(v){var S=v.ip,M=v.prog,C=v.stack,k=M[++S];a.DEBUG&&console.log(v.step,"NPUSHW[]",k);for(var B=0;B<k;B++){var G=M[++S]<<8|M[++S];32768&G&&(G=-(1+(65535^G))),C.push(G)}v.ip=S},function(v){var C=v.stack,S=(S=v.store)||(v.store=[]),M=C.pop(),C=C.pop();a.DEBUG&&console.log(v.step,"WS",M,C),S[C]=M},function(k){var S=k.stack,M=k.store,C=S.pop(),k=(a.DEBUG&&console.log(k.step,"RS",C),M&&M[C]||0);S.push(k)},function(v){var S=(M=v.stack).pop(),M=M.pop();a.DEBUG&&console.log(v.step,"WCVTP",S,M),v.cvt[M]=S/64},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"RCVT",M),S.push(64*v.cvt[M])},oc.bind(void 0,0),oc.bind(void 0,1),void 0,ac.bind(void 0,0),ac.bind(void 0,1),function(v){a.DEBUG&&console.log(v.step,"MPPEM[]"),v.stack.push(v.ppem)},void 0,function(v){a.DEBUG&&console.log(v.step,"FLIPON[]"),v.autoFlip=!0},void 0,void 0,function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"LT[]",M,C),S.push(C<M?1:0)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"LTEQ[]",M,C),S.push(C<=M?1:0)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"GT[]",M,C),S.push(M<C?1:0)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"GTEQ[]",M,C),S.push(M<=C?1:0)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"EQ[]",M,C),S.push(M===C?1:0)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"NEQ[]",M,C),S.push(M!==C?1:0)},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"ODD[]",M),S.push(Math.trunc(M)%2?1:0)},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"EVEN[]",M),S.push(Math.trunc(M)%2?0:1)},function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"IF[]",S),S||(Xl(v,!0),a.DEBUG&&console.log(v.step,"EIF[]"))},function(v){a.DEBUG&&console.log(v.step,"EIF[]")},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"AND[]",M,C),S.push(M&&C?1:0)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"OR[]",M,C),S.push(M||C?1:0)},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"NOT[]",M),S.push(M?0:1)},Jo.bind(void 0,1),function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"SDB[]",S),v.deltaBase=S},function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"SDS[]",S),v.deltaShift=Math.pow(.5,S)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"ADD[]",M,C),S.push(C+M)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"SUB[]",M,C),S.push(C-M)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"DIV[]",M,C),S.push(64*C/M)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"MUL[]",M,C),S.push(C*M/64)},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"ABS[]",M),S.push(Math.abs(M))},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"NEG[]",M),S.push(-M)},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"FLOOR[]",M),S.push(64*Math.floor(M/64))},function(v){var S=v.stack,M=S.pop();a.DEBUG&&console.log(v.step,"CEILING[]",M),S.push(64*Math.ceil(M/64))},eo.bind(void 0,0),eo.bind(void 0,1),eo.bind(void 0,2),eo.bind(void 0,3),void 0,void 0,void 0,void 0,function(v){var S=(M=v.stack).pop(),M=M.pop();a.DEBUG&&console.log(v.step,"WCVTF[]",S,M),v.cvt[M]=S*v.ppem/v.font.unitsPerEm},Jo.bind(void 0,2),Jo.bind(void 0,3),Qo.bind(void 0,1),Qo.bind(void 0,2),Qo.bind(void 0,3),function(v){var S,M=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"SROUND[]",M),v.round=ql,192&M){case 0:S=.5;break;case 64:S=1;break;case 128:S=2;break;default:throw new Error("invalid SROUND value")}switch(v.srPeriod=S,48&M){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*S;break;case 32:v.srPhase=.5*S;break;case 48:v.srPhase=.75*S;break;default:throw new Error("invalid SROUND value")}v.srThreshold=(M&=15)===0?0:(M/8-.5)*S},function(v){var S,M=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"S45ROUND[]",M),v.round=ql,192&M){case 0:S=Math.sqrt(2)/2;break;case 64:S=Math.sqrt(2);break;case 128:S=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(v.srPeriod=S,48&M){case 0:v.srPhase=0;break;case 16:v.srPhase=.25*S;break;case 32:v.srPhase=.5*S;break;case 48:v.srPhase=.75*S;break;default:throw new Error("invalid S45ROUND value")}v.srThreshold=(M&=15)===0?0:(M/8-.5)*S},void 0,void 0,function(v){a.DEBUG&&console.log(v.step,"ROFF[]"),v.round=Oh},void 0,function(v){a.DEBUG&&console.log(v.step,"RUTG[]"),v.round=Fh},function(v){a.DEBUG&&console.log(v.step,"RDTG[]"),v.round=Bh},Ko,Ko,void 0,void 0,void 0,void 0,void 0,function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"SCANCTRL[]",S)},lc.bind(void 0,0),lc.bind(void 0,1),function(v){var S=v.stack,M=S.pop(),C=0;a.DEBUG&&console.log(v.step,"GETINFO[]",M),1&M&&(C=35),32&M&&(C|=4096),S.push(C)},void 0,function(v){var S=v.stack,M=S.pop(),C=S.pop(),k=S.pop();a.DEBUG&&console.log(v.step,"ROLL[]"),S.push(C),S.push(M),S.push(k)},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"MAX[]",M,C),S.push(Math.max(C,M))},function(v){var S=v.stack,M=S.pop(),C=S.pop();a.DEBUG&&console.log(v.step,"MIN[]",M,C),S.push(Math.min(C,M))},function(v){var S=v.stack.pop();a.DEBUG&&console.log(v.step,"SCANTYPE[]",S)},function(v){var S=v.stack.pop(),M=v.stack.pop();switch(a.DEBUG&&console.log(v.step,"INSTCTRL[]",S,M),S){case 1:return void(v.inhibitGridFit=!!M);case 2:return void(v.ignoreCvt=!!M);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Vn.bind(void 0,1),Vn.bind(void 0,2),Vn.bind(void 0,3),Vn.bind(void 0,4),Vn.bind(void 0,5),Vn.bind(void 0,6),Vn.bind(void 0,7),Vn.bind(void 0,8),Hn.bind(void 0,1),Hn.bind(void 0,2),Hn.bind(void 0,3),Hn.bind(void 0,4),Hn.bind(void 0,5),Hn.bind(void 0,6),Hn.bind(void 0,7),Hn.bind(void 0,8),pt.bind(void 0,0,0,0,0,0),pt.bind(void 0,0,0,0,0,1),pt.bind(void 0,0,0,0,0,2),pt.bind(void 0,0,0,0,0,3),pt.bind(void 0,0,0,0,1,0),pt.bind(void 0,0,0,0,1,1),pt.bind(void 0,0,0,0,1,2),pt.bind(void 0,0,0,0,1,3),pt.bind(void 0,0,0,1,0,0),pt.bind(void 0,0,0,1,0,1),pt.bind(void 0,0,0,1,0,2),pt.bind(void 0,0,0,1,0,3),pt.bind(void 0,0,0,1,1,0),pt.bind(void 0,0,0,1,1,1),pt.bind(void 0,0,0,1,1,2),pt.bind(void 0,0,0,1,1,3),pt.bind(void 0,0,1,0,0,0),pt.bind(void 0,0,1,0,0,1),pt.bind(void 0,0,1,0,0,2),pt.bind(void 0,0,1,0,0,3),pt.bind(void 0,0,1,0,1,0),pt.bind(void 0,0,1,0,1,1),pt.bind(void 0,0,1,0,1,2),pt.bind(void 0,0,1,0,1,3),pt.bind(void 0,0,1,1,0,0),pt.bind(void 0,0,1,1,0,1),pt.bind(void 0,0,1,1,0,2),pt.bind(void 0,0,1,1,0,3),pt.bind(void 0,0,1,1,1,0),pt.bind(void 0,0,1,1,1,1),pt.bind(void 0,0,1,1,1,2),pt.bind(void 0,0,1,1,1,3),pt.bind(void 0,1,0,0,0,0),pt.bind(void 0,1,0,0,0,1),pt.bind(void 0,1,0,0,0,2),pt.bind(void 0,1,0,0,0,3),pt.bind(void 0,1,0,0,1,0),pt.bind(void 0,1,0,0,1,1),pt.bind(void 0,1,0,0,1,2),pt.bind(void 0,1,0,0,1,3),pt.bind(void 0,1,0,1,0,0),pt.bind(void 0,1,0,1,0,1),pt.bind(void 0,1,0,1,0,2),pt.bind(void 0,1,0,1,0,3),pt.bind(void 0,1,0,1,1,0),pt.bind(void 0,1,0,1,1,1),pt.bind(void 0,1,0,1,1,2),pt.bind(void 0,1,0,1,1,3),pt.bind(void 0,1,1,0,0,0),pt.bind(void 0,1,1,0,0,1),pt.bind(void 0,1,1,0,0,2),pt.bind(void 0,1,1,0,0,3),pt.bind(void 0,1,1,0,1,0),pt.bind(void 0,1,1,0,1,1),pt.bind(void 0,1,1,0,1,2),pt.bind(void 0,1,1,0,1,3),pt.bind(void 0,1,1,1,0,0),pt.bind(void 0,1,1,1,0,1),pt.bind(void 0,1,1,1,0,2),pt.bind(void 0,1,1,1,0,3),pt.bind(void 0,1,1,1,1,0),pt.bind(void 0,1,1,1,1,1),pt.bind(void 0,1,1,1,1,2),pt.bind(void 0,1,1,1,1,3)],Hh=Array.from||function(v){return v.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Qt(v){(v=v||{}).empty||(Ei(v.familyName,"When creating a new Font object, familyName is required."),Ei(v.styleName,"When creating a new Font object, styleName is required."),Ei(v.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ei(v.ascender,"When creating a new Font object, ascender is required."),Ei(v.descender,"When creating a new Font object, descender is required."),Ei(v.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:v.familyName||" "},fontSubfamily:{en:v.styleName||" "},fullName:{en:v.fullName||v.familyName+" "+v.styleName},postScriptName:{en:v.postScriptName||(v.familyName+v.styleName).replace(/\s/g,"")},designer:{en:v.designer||" "},designerURL:{en:v.designerURL||" "},manufacturer:{en:v.manufacturer||" "},manufacturerURL:{en:v.manufacturerURL||" "},license:{en:v.license||" "},licenseURL:{en:v.licenseURL||" "},version:{en:v.version||"Version 0.1"},description:{en:v.description||" "},copyright:{en:v.copyright||" "},trademark:{en:v.trademark||" "}},this.unitsPerEm=v.unitsPerEm||1e3,this.ascender=v.ascender,this.descender=v.descender,this.createdTimestamp=v.createdTimestamp,this.tables={os2:{usWeightClass:v.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:v.widthClass||this.usWidthClasses.MEDIUM,fsSelection:v.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ot.GlyphSet(this,v.glyphs||[]),this.encoding=new je(this),this.position=new Qs(this),this.substitution=new gn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Hl(this):void 0)}})}function uc(v,S){var M,C=JSON.stringify(v),k=256;for(M in S){var B=parseInt(M);if(B&&!(B<256)){if(JSON.stringify(S[M])===C)return B;k<=B&&(k=B+1)}}return S[k]=v,k}Qt.prototype.hasChar=function(v){return this.encoding.charToGlyphIndex(v)!==null},Qt.prototype.charToGlyphIndex=function(v){return this.encoding.charToGlyphIndex(v)},Qt.prototype.charToGlyph=function(v){return v=this.charToGlyphIndex(v),this.glyphs.get(v)||this.glyphs.get(0)},Qt.prototype.stringToGlyphs=function(v,S){S=S||this.defaultRenderOptions;for(var M=Hh(v),C=[],k=0;k<M.length;k+=1){var B=M[k];C.push(this.charToGlyphIndex(B))}var G=C.length;if(S.features){var v=S.script||this.substitution.getDefaultScriptName(),ne=[];S.features.liga&&(ne=ne.concat(this.substitution.getFeature("liga",v,S.language))),S.features.rlig&&(ne=ne.concat(this.substitution.getFeature("rlig",v,S.language)));for(var fe=0;fe<G;fe+=1)for(var he=0;he<ne.length;he++){for(var Te=ne[he],ke=Te.sub,Re=ke.length,_e=0;_e<Re&&ke[_e]===C[fe+_e];)_e++;_e===Re&&(C.splice(fe,Re,Te.by),G=G-Re+1)}}for(var et=new Array(G),Ve=this.glyphs.get(0),Ye=0;Ye<G;Ye+=1)et[Ye]=this.glyphs.get(C[Ye])||Ve;return et},Qt.prototype.nameToGlyphIndex=function(v){return this.glyphNames.nameToGlyphIndex(v)},Qt.prototype.nameToGlyph=function(v){return v=this.nameToGlyphIndex(v),this.glyphs.get(v)||this.glyphs.get(0)},Qt.prototype.glyphIndexToName=function(v){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(v):""},Qt.prototype.getKerningValue=function(v,S){v=v.index||v,S=S.index||S;var M=this.position.defaultKerningTables;return M?this.position.getKerningValue(M,v,S):this.kerningPairs[v+","+S]||0},Qt.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Qt.prototype.forEachGlyph=function(v,S,M,C,k,B){S=S!==void 0?S:0,M=M!==void 0?M:0,k=k||this.defaultRenderOptions;var G,ne=1/this.unitsPerEm*(C=C!==void 0?C:72),fe=this.stringToGlyphs(v,k);k.kerning&&(v=k.script||this.position.getDefaultScriptName(),G=this.position.getKerningTables(v,k.language));for(var he=0;he<fe.length;he+=1){var Te=fe[he];B.call(this,Te,S,M,C,k),Te.advanceWidth&&(S+=Te.advanceWidth*ne),k.kerning&&he<fe.length-1&&(S+=(G?this.position.getKerningValue(G,Te.index,fe[he+1].index):this.getKerningValue(Te,fe[he+1]))*ne),k.letterSpacing?S+=k.letterSpacing*C:k.tracking&&(S+=k.tracking/1e3*C)}return S},Qt.prototype.getPath=function(v,S,M,C,k){var B=new q;return this.forEachGlyph(v,S,M,C,k,function(G,ne,fe,he){G=G.getPath(ne,fe,he,k,this),B.extend(G)}),B},Qt.prototype.getPaths=function(v,S,M,C,k){var B=[];return this.forEachGlyph(v,S,M,C,k,function(G,ne,fe,he){G=G.getPath(ne,fe,he,k,this),B.push(G)}),B},Qt.prototype.getAdvanceWidth=function(v,S,M){return this.forEachGlyph(v,0,0,S,M,function(){})},Qt.prototype.draw=function(v,S,M,C,k,B){this.getPath(S,M,C,k,B).draw(v)},Qt.prototype.drawPoints=function(v,S,M,C,k,B){this.forEachGlyph(S,M,C,k,B,function(G,ne,fe,he){G.drawPoints(v,ne,fe,he)})},Qt.prototype.drawMetrics=function(v,S,M,C,k,B){this.forEachGlyph(S,M,C,k,B,function(G,ne,fe,he){G.drawMetrics(v,ne,fe,he)})},Qt.prototype.getEnglishName=function(v){if(v=this.names[v],v)return v.en},Qt.prototype.validate=function(){var v=this;function S(M){M=v.getEnglishName(M),M&&M.trim().length}S("fontFamily"),S("weightName"),S("manufacturer"),S("copyright"),S("version"),this.unitsPerEm},Qt.prototype.toTables=function(){return Dh.fontToTable(this)},Qt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Qt.prototype.toArrayBuffer=function(){for(var v=this.toTables().encode(),S=new ArrayBuffer(v.length),M=new Uint8Array(S),C=0;C<v.length;C++)M[C]=v[C];return S},Qt.prototype.download=function(v){var S=this.getEnglishName("fontFamily"),M=this.getEnglishName("fontSubfamily"),C=(v=v||S.replace(/\s/g,"")+"-"+M+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,C.byteLength,function(k){k.root.getFile(v,{create:!0},function(B){B.createWriter(function(G){var ne=new DataView(C),ne=new Blob([ne],{type:"font/opentype"});G.write(ne),G.addEventListener("writeend",function(){location.href=B.toURL()},!1)})})},function(k){throw new Error(k.name+": "+k.message)})):(S=e("fs"),M=function(k){for(var B=new o(k.byteLength),G=new Uint8Array(k),ne=0;ne<B.length;++ne)B[ne]=G[ne];return B}(C),S.writeFileSync(v,M))},Qt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Qt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Qt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Wh={make:function(v,S){var M=new $.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:v.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:v.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*v.axes.length}]);M.offsetToData=M.sizeOf();for(var C,k,B,G=0;G<v.axes.length;G++)M.fields=M.fields.concat((C=G,k=v.axes[G],B=S,B=uc(k.name,S),[{name:"tag_"+C,type:"TAG",value:k.tag},{name:"minValue_"+C,type:"FIXED",value:k.minValue<<16},{name:"defaultValue_"+C,type:"FIXED",value:k.defaultValue<<16},{name:"maxValue_"+C,type:"FIXED",value:k.maxValue<<16},{name:"flags_"+C,type:"USHORT",value:0},{name:"nameID_"+C,type:"USHORT",value:B}]));for(var ne=0;ne<v.instances.length;ne++)M.fields=M.fields.concat(function(fe,he,Te,ke){for(var Re=[{name:"nameID_"+fe,type:"USHORT",value:uc(he.name,ke)},{name:"flags_"+fe,type:"USHORT",value:0}],_e=0;_e<Te.length;++_e){var et=Te[_e].tag;Re.push({name:"axis_"+fe+" "+et,type:"FIXED",value:he.coordinates[et]<<16})}return Re}(ne,v.instances[ne],v.axes,S));return M},parse:function(v,S,M){for(var C,k,B,G,ne=new ae.Parser(v,S),fe=ne.parseULong(),he=(I.argument(fe===65536,"Unsupported fvar table version."),ne.parseOffset16()),Te=(ne.skip("uShort",1),ne.parseUShort()),ke=ne.parseUShort(),Re=ne.parseUShort(),_e=ne.parseUShort(),et=[],Ve=0;Ve<Te;Ve++)et.push((C=v,k=S+he+Ve*ke,B=M,G={},C=new ae.Parser(C,k),G.tag=C.parseTag(),G.minValue=C.parseFixed(),G.defaultValue=C.parseFixed(),G.maxValue=C.parseFixed(),C.skip("uShort",1),G.name=B[C.parseUShort()]||{},G));for(var Ye=[],Ne=S+he+Te*ke,Ue=0;Ue<Re;Ue++)Ye.push(function(gt,Et,yt,vt){var Pt={},ir=new ae.Parser(gt,Et);Pt.name=vt[ir.parseUShort()]||{},ir.skip("uShort",1),Pt.coordinates={};for(var hr=0;hr<yt.length;++hr)Pt.coordinates[yt[hr].tag]=ir.parseFixed();return Pt}(v,Ne+Ue*_e,et,M));return{axes:et,instances:Ye}}},sn=new Array(10);sn[1]=function(){var v=this.offset+this.relativeOffset,S=this.parseUShort();return S===1?{posFormat:1,coverage:this.parsePointer(we.coverage),value:this.parseValueRecord()}:S===2?{posFormat:2,coverage:this.parsePointer(we.coverage),values:this.parseValueRecordList()}:void I.assert(!1,"0x"+v.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},sn[2]=function(){var v,S,M,C,B=this.offset+this.relativeOffset,k=this.parseUShort(),B=(I.assert(k===1||k===2,"0x"+B.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(we.coverage)),G=this.parseUShort(),ne=this.parseUShort();return k===1?{posFormat:k,coverage:B,valueFormat1:G,valueFormat2:ne,pairSets:this.parseList(we.pointer(we.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(G),value2:this.parseValueRecord(ne)}})))}:k===2?(v=this.parsePointer(we.classDef),S=this.parsePointer(we.classDef),M=this.parseUShort(),C=this.parseUShort(),{posFormat:k,coverage:B,valueFormat1:G,valueFormat2:ne,classDef1:v,classDef2:S,class1Count:M,class2Count:C,classRecords:this.parseList(M,we.list(C,function(){return{value1:this.parseValueRecord(G),value2:this.parseValueRecord(ne)}}))}):void 0},sn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},sn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},sn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},sn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},sn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},sn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},sn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var qh=new Array(10),Xh={parse:function(v,S){return S=(v=new we(v,S=S||0)).parseVersion(1),I.argument(S===1||S===1.1,"Unsupported GPOS table version "+S),S===1?{version:S,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(sn)}:{version:S,scripts:v.parseScriptList(),features:v.parseFeatureList(),lookups:v.parseLookupList(sn),variations:v.parseFeatureVariationsList()}},make:function(v){return new $.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new $.ScriptList(v.scripts)},{name:"features",type:"TABLE",value:new $.FeatureList(v.features)},{name:"lookups",type:"TABLE",value:new $.LookupList(v.lookups,qh)}])}},Yh={parse:function(v,S){if(v=new ae.Parser(v,S),(S=v.parseUShort())===0){var M=v,C={},ke=(M.skip("uShort"),M.parseUShort()),k=(I.argument(ke===0,"Unsupported kern sub-table version."),M.skip("uShort",2),M.parseUShort());M.skip("uShort",3);for(var B=0;B<k;B+=1){var G=M.parseUShort(),ne=M.parseUShort(),fe=M.parseShort();C[G+","+ne]=fe}return C}if(S!==1)throw new Error("Unsupported kern table version ("+S+").");var he=v,Te={},ke=(he.skip("uShort"),1<he.parseULong()&&console.warn("Only the first kern subtable is supported."),he.skip("uLong"),255&he.parseUShort());if(he.skip("uShort"),ke==0){var Re=he.parseUShort();he.skip("uShort",3);for(var _e=0;_e<Re;_e+=1){var et=he.parseUShort(),Ve=he.parseUShort(),Ye=he.parseShort();Te[et+","+Ve]=Ye}}return Te}},Zh={parse:function(v,S,M,C){for(var k=new ae.Parser(v,S),B=C?k.parseUShort:k.parseULong,G=[],ne=0;ne<M+1;ne+=1){var fe=B.call(k);C&&(fe*=2),G.push(fe)}return G}};function Kh(v,S){e("fs").readFile(v,function(M,C){if(M)return S(M.message);S(null,Bl(C))})}function Jh(v,S){var M=new XMLHttpRequest;M.open("get",v,!0),M.responseType="arraybuffer",M.onload=function(){return M.response?S(null,M.response):S("Font could not be loaded: "+M.statusText)},M.onerror=function(){S("Font could not be loaded")},M.send()}function dc(v,S){for(var M=[],C=12,k=0;k<S;k+=1){var B=ae.getTag(v,C),G=ae.getULong(v,C+4),ne=ae.getULong(v,C+8),fe=ae.getULong(v,C+12);M.push({tag:B,checksum:G,offset:ne,length:fe,compression:!1}),C+=16}return M}function gr(M,S){if(S.compression!=="WOFF")return{data:M,offset:S.offset};var M=new Uint8Array(M.buffer,S.offset+2,S.compressedLength-2),C=new Uint8Array(S.length);if(W(M,C),C.byteLength!==S.length)throw new Error("Decompression error: "+S.tag+" decompressed length doesn't match recorded length");return{data:new DataView(C.buffer,0),offset:0}}function $o(Ue){var S,M,C,k,B,G,ne,fe,he,Te,ke,Re,_e,et,Ve=new Qt({empty:!0}),Ye=new DataView(Ue,0),Ne=[],Ue=ae.getTag(Ye,0);if(Ue===String.fromCharCode(0,1,0,0)||Ue==="true"||Ue==="typ1")Ve.outlinesFormat="truetype",Ne=dc(Ye,C=ae.getUShort(Ye,4));else if(Ue==="OTTO")Ve.outlinesFormat="cff",Ne=dc(Ye,C=ae.getUShort(Ye,4));else{if(Ue!=="wOFF")throw new Error("Unsupported OpenType signature "+Ue);var gt=ae.getTag(Ye,4);if(gt===String.fromCharCode(0,1,0,0))Ve.outlinesFormat="truetype";else{if(gt!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ue);Ve.outlinesFormat="cff"}Ne=function(ar,Yt){for(var Fr=[],ur=44,Dr=0;Dr<Yt;Dr+=1){var lr=ae.getTag(ar,ur),Cr=ae.getULong(ar,ur+4),vs=ae.getULong(ar,ur+8),Ci=ae.getULong(ar,ur+12),hc=void 0,hc=vs<Ci&&"WOFF";Fr.push({tag:lr,offset:Cr,compression:hc,compressedLength:vs,length:Ci}),ur+=20}return Fr}(Ye,C=ae.getUShort(Ye,12))}for(var Et=0;Et<C;Et+=1){var yt=Ne[Et],vt=void 0;switch(yt.tag){case"cmap":vt=gr(Ye,yt),Ve.tables.cmap=K.parse(vt.data,vt.offset),Ve.encoding=new Pe(Ve.tables.cmap);break;case"cvt ":vt=gr(Ye,yt),et=new ae.Parser(vt.data,vt.offset),Ve.tables.cvt=et.parseShortList(yt.length/2);break;case"fvar":B=yt;break;case"fpgm":vt=gr(Ye,yt),et=new ae.Parser(vt.data,vt.offset),Ve.tables.fpgm=et.parseByteList(yt.length);break;case"head":vt=gr(Ye,yt),Ve.tables.head=jt.parse(vt.data,vt.offset),Ve.unitsPerEm=Ve.tables.head.unitsPerEm,S=Ve.tables.head.indexToLocFormat;break;case"hhea":vt=gr(Ye,yt),Ve.tables.hhea=ge.parse(vt.data,vt.offset),Ve.ascender=Ve.tables.hhea.ascender,Ve.descender=Ve.tables.hhea.descender,Ve.numberOfHMetrics=Ve.tables.hhea.numberOfHMetrics;break;case"hmtx":he=yt;break;case"ltag":vt=gr(Ye,yt),M=it.parse(vt.data,vt.offset);break;case"maxp":vt=gr(Ye,yt),Ve.tables.maxp=qe.parse(vt.data,vt.offset),Ve.numGlyphs=Ve.tables.maxp.numGlyphs;break;case"name":Re=yt;break;case"OS/2":vt=gr(Ye,yt),Ve.tables.os2=nr.parse(vt.data,vt.offset);break;case"post":vt=gr(Ye,yt),Ve.tables.post=Mi.parse(vt.data,vt.offset),Ve.glyphNames=new ve(Ve.tables.post);break;case"prep":vt=gr(Ye,yt),et=new ae.Parser(vt.data,vt.offset),Ve.tables.prep=et.parseByteList(yt.length);break;case"glyf":G=yt;break;case"loca":ke=yt;break;case"CFF ":k=yt;break;case"kern":Te=yt;break;case"GPOS":ne=yt;break;case"GSUB":fe=yt;break;case"meta":_e=yt}}if(gt=gr(Ye,Re),Ve.tables.name=Pr.parse(gt.data,gt.offset,M),Ve.names=Ve.tables.name,G&&ke)Ue=S===0,gt=gr(Ye,ke),gt=Zh.parse(gt.data,gt.offset,Ve.numGlyphs,Ue),Ue=gr(Ye,G),Ve.glyphs=Vl.parse(Ue.data,Ue.offset,gt,Ve);else{if(!k)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ue=gr(Ye,k),Tt.parse(Ue.data,Ue.offset,Ve)}for(var gt=gr(Ye,he),Pt=(Ze.parse(gt.data,gt.offset,Ve.numberOfHMetrics,Ve.numGlyphs,Ve.glyphs),Ve),ir=Pt.tables.cmap.glyphIndexMap,hr=Object.keys(ir),yr=0;yr<hr.length;yr+=1){var Nr,Ur=hr[yr],on=ir[Ur];(Nr=Pt.glyphs.get(on)).addUnicode(parseInt(Ur))}for(var $t=0;$t<Pt.glyphs.length;$t+=1)Nr=Pt.glyphs.get($t),Pt.cffEncoding?Pt.isCIDFont?Nr.name="gid"+$t:Nr.name=Pt.cffEncoding.charset[$t]:Pt.glyphNames.names&&(Nr.name=Pt.glyphNames.glyphIndexToName($t));return Te?(Ue=gr(Ye,Te),Ve.kerningPairs=Yh.parse(Ue.data,Ue.offset)):Ve.kerningPairs={},ne&&(gt=gr(Ye,ne),Ve.tables.gpos=Xh.parse(gt.data,gt.offset),Ve.position.init()),fe&&(Ue=gr(Ye,fe),Ve.tables.gsub=ps.parse(Ue.data,Ue.offset)),B&&(gt=gr(Ye,B),Ve.tables.fvar=Wh.parse(gt.data,gt.offset,Ve.names)),_e&&(Ue=gr(Ye,_e),Ve.tables.meta=Pl.parse(Ue.data,Ue.offset),Ve.metas=Ve.tables.meta),Ve}a.Font=Qt,a.Glyph=Be,a.Path=q,a.BoundingBox=Z,a._parse=ae,a.parse=$o,a.load=function(v,S){(typeof window>"u"?Kh:Jh)(v,function(M,C){if(M)return S(M);var k;try{k=$o(C)}catch(B){return S(B,null)}return S(null,k)})},a.loadSync=function(v){return $o(Bl(e("fs").readFileSync(v)))},Object.defineProperty(a,"__esModule",{value:!0})},n(typeof d=="object"&&u!==void 0?d:i.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],242:[function(e,u,d){(function(o){function i(f,p){for(var s=0,l=f.length-1;0<=l;l--){var c=f[l];c==="."?f.splice(l,1):c===".."?(f.splice(l,1),s++):s&&(f.splice(l,1),s--)}if(p)for(;s--;)f.unshift("..");return f}function n(f,p){if(f.filter)return f.filter(p);for(var s=[],l=0;l<f.length;l++)p(f[l],l,f)&&s.push(f[l]);return s}d.resolve=function(){for(var f="",p=!1,s=arguments.length-1;-1<=s&&!p;s--){var l=0<=s?arguments[s]:o.cwd();if(typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");l&&(f=l+"/"+f,p=l.charAt(0)==="/")}return(p?"/":"")+(f=i(n(f.split("/"),function(c){return!!c}),!p).join("/"))||"."},d.normalize=function(f){var p=d.isAbsolute(f),s=a(f,-1)==="/";return(f=(f=i(n(f.split("/"),function(l){return!!l}),!p).join("/"))||p?f:".")&&s&&(f+="/"),(p?"/":"")+f},d.isAbsolute=function(f){return f.charAt(0)==="/"},d.join=function(){var f=Array.prototype.slice.call(arguments,0);return d.normalize(n(f,function(p,s){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},d.relative=function(f,p){function s(_){for(var x=0;x<_.length&&_[x]==="";x++);for(var w=_.length-1;0<=w&&_[w]==="";w--);return w<x?[]:_.slice(x,w-x+1)}f=d.resolve(f).substr(1),p=d.resolve(p).substr(1);for(var l=s(f.split("/")),c=s(p.split("/")),h=Math.min(l.length,c.length),m=h,g=0;g<h;g++)if(l[g]!==c[g]){m=g;break}for(var y=[],g=m;g<l.length;g++)y.push("..");return(y=y.concat(c.slice(m))).join("/")},d.sep="/",d.delimiter=":",d.dirname=function(f){if(typeof f!="string"&&(f+=""),f.length===0)return".";for(var p=f.charCodeAt(0)===47,s=-1,l=!0,c=f.length-1;1<=c;--c)if(f.charCodeAt(c)===47){if(!l){s=c;break}}else l=!1;return s===-1?p?"/":".":p&&s===1?"/":f.slice(0,s)},d.basename=function(f,p){return f=function(s){typeof s!="string"&&(s+="");for(var l=0,c=-1,h=!0,m=s.length-1;0<=m;--m)if(s.charCodeAt(m)===47){if(!h){l=m+1;break}}else c===-1&&(h=!1,c=m+1);return c===-1?"":s.slice(l,c)}(f),f=p&&f.substr(-1*p.length)===p?f.substr(0,f.length-p.length):f},d.extname=function(f){typeof f!="string"&&(f+="");for(var p=-1,s=0,l=-1,c=!0,h=0,m=f.length-1;0<=m;--m){var g=f.charCodeAt(m);if(g===47){if(c)continue;s=m+1;break}l===-1&&(c=!1,l=m+1),g===46?p===-1?p=m:h!==1&&(h=1):p!==-1&&(h=-1)}return p===-1||l===-1||h===0||h===1&&p===l-1&&p===s+1?"":f.slice(p,l)};var a="ab".substr(-1)==="b"?function(f,p,s){return f.substr(p,s)}:function(f,p,s){return p<0&&(p=f.length+p),f.substr(p,s)}}).call(this,e("_process"))},{_process:243}],243:[function(e,n,d){var o,i,n=n.exports={};function a(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}try{o=typeof setTimeout=="function"?setTimeout:a}catch{o=a}try{i=typeof clearTimeout=="function"?clearTimeout:f}catch{i=f}function p(x){if(o===setTimeout)return setTimeout(x,0);if((o===a||!o)&&setTimeout)return(o=setTimeout)(x,0);try{return o(x,0)}catch{try{return o.call(null,x,0)}catch{return o.call(this,x,0)}}}var s,l=[],c=!1,h=-1;function m(){c&&s&&(c=!1,s.length?l=s.concat(l):h=-1,l.length&&g())}function g(){if(!c){for(var x=p(m),w=(c=!0,l.length);w;){for(s=l,l=[];++h<w;)s&&s[h].run();h=-1,w=l.length}s=null,c=!1,function(j){if(i===clearTimeout)return clearTimeout(j);if((i===f||!i)&&clearTimeout)return(i=clearTimeout)(j);try{i(j)}catch{try{return i.call(null,j)}catch{return i.call(this,j)}}}(x)}}function y(x,w){this.fun=x,this.array=w}function _(){}n.nextTick=function(x){var w=new Array(arguments.length-1);if(1<arguments.length)for(var j=1;j<arguments.length;j++)w[j-1]=arguments[j];l.push(new y(x,w)),l.length!==1||c||p(g)},y.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(x){return[]},n.binding=function(x){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(x){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],244:[function(e,u,d){u=function(o){var i,n=Object.prototype,a=n.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},f=E.iterator||"@@iterator",p=E.asyncIterator||"@@asyncIterator",s=E.toStringTag||"@@toStringTag";function l(H,F,X,V){var q,ee,L,I,F=F&&F.prototype instanceof x?F:x,F=Object.create(F.prototype),V=new D(V||[]);return F._invoke=(q=H,ee=X,L=V,I=h,function(J,le){if(I===g)throw new Error("Generator is already running");if(I===y){if(J==="throw")throw le;return Y()}for(L.method=J,L.arg=le;;){var ce=L.delegate;if(ce&&(ce=function ue(re,de){var be=re.iterator[de.method];if(be===i){if(de.delegate=null,de.method==="throw"){if(re.iterator.return&&(de.method="return",de.arg=i,ue(re,de),de.method==="throw"))return _;de.method="throw",de.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}if(be=c(be,re.iterator,de.arg),be.type==="throw")return de.method="throw",de.arg=be.arg,de.delegate=null,_;if(be=be.arg,!be)return de.method="throw",de.arg=new TypeError("iterator result is not an object"),de.delegate=null,_;{if(!be.done)return be;de[re.resultName]=be.value,de.next=re.nextLoc,de.method!=="return"&&(de.method="next",de.arg=i)}return de.delegate=null,_}(ce,L),ce)){if(ce===_)continue;return ce}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(I===h)throw I=y,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);if(I=g,ce=c(q,ee,L),ce.type==="normal"){if(I=L.done?y:m,ce.arg!==_)return{value:ce.arg,done:L.done}}else ce.type==="throw"&&(I=y,L.method="throw",L.arg=ce.arg)}}),F}function c(H,W,X){try{return{type:"normal",arg:H.call(W,X)}}catch(Z){return{type:"throw",arg:Z}}}o.wrap=l;var h="suspendedStart",m="suspendedYield",g="executing",y="completed",_={};function x(){}function w(){}function j(){}var E={},T=(E[f]=function(){return this},Object.getPrototypeOf),T=T&&T(T(U([]))),A=(T&&T!==n&&a.call(T,f)&&(E=T),j.prototype=x.prototype=Object.create(E));function R(H){["next","throw","return"].forEach(function(W){H[W]=function(X){return this._invoke(W,X)}})}function P(H){var W;this._invoke=function(X,Z){function q(){return new Promise(function(ee,L){(function I(ue,V,J,le){var ce,ue=c(H[ue],H,V);if(ue.type!=="throw")return(V=(ce=ue.arg).value)&&typeof V=="object"&&a.call(V,"__await")?Promise.resolve(V.__await).then(function(re){I("next",re,J,le)},function(re){I("throw",re,J,le)}):Promise.resolve(V).then(function(re){ce.value=re,J(ce)},function(re){return I("throw",re,J,le)});le(ue.arg)})(X,Z,ee,L)})}return W=W?W.then(q,q):q()}}function N(H){var W={tryLoc:H[0]};1 in H&&(W.catchLoc=H[1]),2 in H&&(W.finallyLoc=H[2],W.afterLoc=H[3]),this.tryEntries.push(W)}function O(H){var W=H.completion||{};W.type="normal",delete W.arg,H.completion=W}function D(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(N,this),this.reset(!0)}function U(H){if(H){var W,X=H[f];if(X)return X.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length))return W=-1,(X=function Z(){for(;++W<H.length;)if(a.call(H,W))return Z.value=H[W],Z.done=!1,Z;return Z.value=i,Z.done=!0,Z}).next=X}return{next:Y}}function Y(){return{value:i,done:!0}}return(w.prototype=A.constructor=j).constructor=w,j[s]=w.displayName="GeneratorFunction",o.isGeneratorFunction=function(H){return H=typeof H=="function"&&H.constructor,!!H&&(H===w||(H.displayName||H.name)==="GeneratorFunction")},o.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,j):(H.__proto__=j,s in H||(H[s]="GeneratorFunction")),H.prototype=Object.create(A),H},o.awrap=function(H){return{__await:H}},R(P.prototype),P.prototype[p]=function(){return this},o.AsyncIterator=P,o.async=function(H,W,X,Z){var q=new P(l(H,W,X,Z));return o.isGeneratorFunction(W)?q:q.next().then(function(ee){return ee.done?ee.value:q.next()})},R(A),A[s]="Generator",A[f]=function(){return this},A.toString=function(){return"[object Generator]"},o.keys=function(H){var W,X=[];for(W in H)X.push(W);return X.reverse(),function Z(){for(;X.length;){var q=X.pop();if(q in H)return Z.value=q,Z.done=!1,Z}return Z.done=!0,Z}},o.values=U,D.prototype={constructor:D,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(O),!H)for(var W in this)W.charAt(0)==="t"&&a.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=i)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var W=this;function X(F,V){return ee.type="throw",ee.arg=H,W.next=F,V&&(W.method="next",W.arg=i),!!V}for(var Z=this.tryEntries.length-1;0<=Z;--Z){var q=this.tryEntries[Z],ee=q.completion;if(q.tryLoc==="root")return X("end");if(q.tryLoc<=this.prev){var L=a.call(q,"catchLoc"),I=a.call(q,"finallyLoc");if(L&&I){if(this.prev<q.catchLoc)return X(q.catchLoc,!0);if(this.prev<q.finallyLoc)return X(q.finallyLoc)}else if(L){if(this.prev<q.catchLoc)return X(q.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<q.finallyLoc)return X(q.finallyLoc)}}}},abrupt:function(H,W){for(var X=this.tryEntries.length-1;0<=X;--X){var Z=this.tryEntries[X];if(Z.tryLoc<=this.prev&&a.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var q=Z;break}}var ee=(q=q&&(H==="break"||H==="continue")&&q.tryLoc<=W&&W<=q.finallyLoc?null:q)?q.completion:{};return ee.type=H,ee.arg=W,q?(this.method="next",this.next=q.finallyLoc,_):this.complete(ee)},complete:function(H,W){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&W&&(this.next=W),_},finish:function(H){for(var W=this.tryEntries.length-1;0<=W;--W){var X=this.tryEntries[W];if(X.finallyLoc===H)return this.complete(X.completion,X.afterLoc),O(X),_}},catch:function(H){for(var W=this.tryEntries.length-1;0<=W;--W){var X,Z,q=this.tryEntries[W];if(q.tryLoc===H)return(X=q.completion).type==="throw"&&(Z=X.arg,O(q)),Z}throw new Error("illegal catch attempt")},delegateYield:function(H,W,X){return this.delegate={iterator:U(H),resultName:W,nextLoc:X},this.method==="next"&&(this.arg=i),_}},o}(typeof u=="object"?u.exports:{});try{regeneratorRuntime=u}catch{Function("r","regeneratorRuntime = r")(u)}},{}],245:[function(e,u,d){(function(o){var i,n,a,f,p,s,l,c,h,m;function g(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function y(O){return O=typeof O!="string"?String(O):O}function _(O){var D={next:function(){var U=O.shift();return{done:U===void 0,value:U}}};return n&&(D[Symbol.iterator]=function(){return D}),D}function x(O){this.map={},O instanceof x?O.forEach(function(D,U){this.append(U,D)},this):Array.isArray(O)?O.forEach(function(D){this.append(D[0],D[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(D){this.append(D,O[D])},this)}function w(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function j(O){return new Promise(function(D,U){O.onload=function(){D(O.result)},O.onerror=function(){U(O.error)}})}function E(O){var D=new FileReader,U=j(D);return D.readAsArrayBuffer(O),U}function T(O){var D;return O.slice?O.slice(0):((D=new Uint8Array(O.byteLength)).set(new Uint8Array(O)),D.buffer)}function A(){return this.bodyUsed=!1,this._initBody=function(O){if(this._bodyInit=O)if(typeof O=="string")this._bodyText=O;else if(a&&Blob.prototype.isPrototypeOf(O))this._bodyBlob=O;else if(f&&FormData.prototype.isPrototypeOf(O))this._bodyFormData=O;else if(i&&URLSearchParams.prototype.isPrototypeOf(O))this._bodyText=O.toString();else if(p&&a&&l(O))this._bodyArrayBuffer=T(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(O)&&!c(O))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(O)}else this._bodyText="";this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var O=w(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var O,D,U=w(this);if(U)return U;if(this._bodyBlob)return U=this._bodyBlob,O=new FileReader,D=j(O),O.readAsText(U),D;if(this._bodyArrayBuffer)return Promise.resolve(function(Y){for(var H=new Uint8Array(Y),W=new Array(H.length),X=0;X<H.length;X++)W[X]=String.fromCharCode(H[X]);return W.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}function R(O,D){var U,Y=(D=D||{}).body;if(O instanceof R){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,D.headers||(this.headers=new x(O.headers)),this.method=O.method,this.mode=O.mode,Y||O._bodyInit==null||(Y=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=D.credentials||this.credentials||"omit",!D.headers&&this.headers||(this.headers=new x(D.headers)),this.method=(O=D.method||this.method||"GET",U=O.toUpperCase(),-1<h.indexOf(U)?U:O),this.mode=D.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Y)}function P(O){var D=new FormData;return O.trim().split("&").forEach(function(U){var Y;U&&(Y=(U=U.split("=")).shift().replace(/\+/g," "),U=U.join("=").replace(/\+/g," "),D.append(decodeURIComponent(Y),decodeURIComponent(U)))}),D}function N(O,D){D=D||{},this.type="default",this.status=D.status===void 0?200:D.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in D?D.statusText:"OK",this.headers=new x(D.headers),this.url=D.url||"",this._initBody(O)}o.fetch||(i="URLSearchParams"in o,n="Symbol"in o&&"iterator"in Symbol,a="FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),f="FormData"in o,(p="ArrayBuffer"in o)&&(s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=function(O){return O&&DataView.prototype.isPrototypeOf(O)},c=ArrayBuffer.isView||function(O){return O&&-1<s.indexOf(Object.prototype.toString.call(O))}),x.prototype.append=function(O,D){O=g(O),D=y(D);var U=this.map[O];this.map[O]=U?U+","+D:D},x.prototype.delete=function(O){delete this.map[g(O)]},x.prototype.get=function(O){return O=g(O),this.has(O)?this.map[O]:null},x.prototype.has=function(O){return this.map.hasOwnProperty(g(O))},x.prototype.set=function(O,D){this.map[g(O)]=y(D)},x.prototype.forEach=function(O,D){for(var U in this.map)this.map.hasOwnProperty(U)&&O.call(D,this.map[U],U,this)},x.prototype.keys=function(){var O=[];return this.forEach(function(D,U){O.push(U)}),_(O)},x.prototype.values=function(){var O=[];return this.forEach(function(D){O.push(D)}),_(O)},x.prototype.entries=function(){var O=[];return this.forEach(function(D,U){O.push([U,D])}),_(O)},n&&(x.prototype[Symbol.iterator]=x.prototype.entries),h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},A.call(R.prototype),A.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},N.error=function(){var O=new N(null,{status:0,statusText:""});return O.type="error",O},m=[301,302,303,307,308],N.redirect=function(O,D){if(m.indexOf(D)===-1)throw new RangeError("Invalid status code");return new N(null,{status:D,headers:{location:O}})},o.Headers=x,o.Request=R,o.Response=N,o.fetch=function(O,D){return new Promise(function(U,Y){var H=new R(O,D),W=new XMLHttpRequest;W.onload=function(){var X,Z={status:W.status,statusText:W.statusText,headers:(Z=W.getAllResponseHeaders()||"",X=new x,Z.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(L){var L=L.split(":"),I=L.shift().trim();I&&(L=L.join(":").trim(),X.append(I,L))}),X)},q=(Z.url="responseURL"in W?W.responseURL:Z.headers.get("X-Request-URL"),"response"in W?W.response:W.responseText);U(new N(q,Z))},W.onerror=function(){Y(new TypeError("Network request failed"))},W.ontimeout=function(){Y(new TypeError("Network request failed"))},W.open(H.method,H.url,!0),H.credentials==="include"?W.withCredentials=!0:H.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&a&&(W.responseType="blob"),H.headers.forEach(function(X,Z){W.setRequestHeader(Z,X)}),W.send(H._bodyInit===void 0?null:H._bodyInit)})},o.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],246:[function(e,u,d){e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o,i=a(e("../core/main")),n=a(e("../color/color_conversion"));function a(s){return s&&s.__esModule?s:{default:s}}var f=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];i.default.prototype._rgbColorName=function(h){var l,c,h=n.default._rgbaToHSBA(h),m=[(o=h)[0],h[1],h[2]];m[0]!==0&&(m[0]=Math.round(100*m[0]),(h=m[0].toString().split(""))[c=h.length-1]=parseInt(h[c]),h[c]<2.5?h[c]=0:2.5<=h[c]&&h[c]<7.5&&(h[c]=5),h.length===2?(h[0]=parseInt(h[0]),7.5<=h[c]&&(h[c]=0,h[0]=h[0]+1),m[0]=10*h[0]+h[1]):7.5<=h[c]?m[0]=10:m[0]=h[c]),m[2]=m[2]/255;for(var g=m.length-1;1<=g;g--)m[g]<=.25?m[g]=0:.25<m[g]&&m[g]<.75?m[g]=.5:m[g]=1;if(m[0]===0&&m[1]===0&&m[2]===1){for(var y=2;0<=y;y--)o[y]=Math.round(1e4*o[y])/1e4;for(var _=0;_<f.length;_++){if(f[_].h===o[0]&&f[_].s===o[1]&&f[_].b===o[2]){l=f[_].name;break}l="white"}}else for(var x=0;x<p.length;x++)if(p[x].h===m[0]&&p[x].s===m[1]&&p[x].b===m[2]){l=p[x].name;break}return l},e=i.default,d.default=e},{"../color/color_conversion":252,"../core/main":267,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],247:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e},i="_Description",n="_fallbackDesc",a="_fallbackTable",f="_Label",p="_labelDesc",s="_labelTable";function l(c){if(c==="label"||c==="fallback")throw new Error("description should not be LABEL or FALLBACK");return c.endsWith(".")||c.endsWith(";")||c.endsWith(",")||c.endsWith("?")||c.endsWith("!")||(c+="."),c}o.default.prototype.describe=function(c,h){var m;o.default._validateParameters("describe",arguments),typeof c=="string"&&(m=this.canvas.id,c=l(c),this.dummyDOM||(this.dummyDOM=document.getElementById(m).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==c&&(this.descriptions.fallback.innerHTML=c):this._describeHTML("fallback",c),h===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==c&&(this.descriptions.label.innerHTML=c):this._describeHTML("label",c)))},o.default.prototype.describeElement=function(c,h,m){var g,y;o.default._validateParameters("describeElement",arguments),typeof h=="string"&&typeof c=="string"&&(g=this.canvas.id,h=l(h),y=function(_){if(_==="label"||_==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return _.endsWith(".")||_.endsWith(";")||_.endsWith(",")?_=_.replace(/.$/,":"):_.endsWith(":")||(_+=":"),_}(c),c=c.replace(/[^a-zA-Z0-9]/g,""),y='<th scope="row">'.concat(y,"</th><td>").concat(h,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(g).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[c]?this.descriptions.fallbackElements[c].innerHTML!==y&&(this.descriptions.fallbackElements[c].innerHTML=y):this._describeElementHTML("fallback",c,y),m===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[c]?this.descriptions.labelElements[c].innerHTML!==y&&(this.descriptions.labelElements[c].innerHTML=y):this._describeElementHTML("label",c,y)))},o.default.prototype._describeHTML=function(c,h){var m,g=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(g+i))?this.dummyDOM.querySelector("#"+g+a).insertAdjacentHTML("beforebegin",'<p id="'.concat(g+n,'"></p>')):(m='<div id="'.concat(g).concat(i,'" role="region" aria-label="Canvas Description"><p id="').concat(g).concat(n,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutput")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#".concat(g)).innerHTML=m),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(g).concat(n)),this.descriptions.fallback.innerHTML=h):c==="label"&&(this.dummyDOM.querySelector("#".concat(g+f))?this.dummyDOM.querySelector("#".concat(g+s))&&this.dummyDOM.querySelector("#".concat(g+s)).insertAdjacentHTML("beforebegin",'<p id="'.concat(g).concat(p,'"></p>')):(m='<div id="'.concat(g).concat(f,'" class="p5Label"><p id="').concat(g).concat(p,'"></p></div>'),this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(g,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",m):this.dummyDOM.querySelector("#"+g).insertAdjacentHTML("afterend",m)),this.descriptions.label=this.dummyDOM.querySelector("#"+g+p),this.descriptions.label.innerHTML=h)},o.default.prototype._describeElementHTML=function(c,h,m){var g,y=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(y+i))?this.dummyDOM.querySelector("#"+y+a)||this.dummyDOM.querySelector("#"+y+n).insertAdjacentHTML("afterend",'<table id="'.concat(y).concat(a,'"><caption>Canvas elements and their descriptions</caption></table>')):(g='<div id="'.concat(y).concat(i,'" role="region" aria-label="Canvas Description"><table id="').concat(y).concat(a,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+y).innerHTML=g),(g=document.createElement("tr")).id=y+"_fte_"+h,this.dummyDOM.querySelector("#"+y+a).appendChild(g),this.descriptions.fallbackElements[h]=this.dummyDOM.querySelector("#".concat(y).concat("_fte_").concat(h)),this.descriptions.fallbackElements[h].innerHTML=m):c==="label"&&(this.dummyDOM.querySelector("#".concat(y+f))?this.dummyDOM.querySelector("#".concat(y+s))||this.dummyDOM.querySelector("#"+y+p).insertAdjacentHTML("afterend",'<table id="'.concat(y+s,'"></table>')):(g='<div id="'.concat(y).concat(f,'" class="p5Label"><table id="').concat(y).concat(s,'"></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",g):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",g)),(c=document.createElement("tr")).id=y+"_lte_"+h,this.dummyDOM.querySelector("#"+y+s).appendChild(c),this.descriptions.labelElements[h]=this.dummyDOM.querySelector("#".concat(y).concat("_lte_").concat(h)),this.descriptions.labelElements[h].innerHTML=m)},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],248:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype._updateGridOutput=function(o){var i,n,a,f;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(i=this._accessibleOutputs[o],a=function(p,s,l,c){return s="".concat(s," canvas, ").concat(l," by ").concat(c," pixels, contains ").concat(p[0]),s=(p[0]===1?"".concat(s," shape: "):"".concat(s," shapes: ")).concat(p[1]),s}((n=function(p,s){var l,c="",h="",m=0;for(l in s){var g,y=0;for(g in s[l]){var _='<li id="'.concat(p,"shape").concat(m,'">').concat(s[l][g].color," ").concat(l,",");l==="line"?_+=" location = ".concat(s[l][g].pos,", length = ").concat(s[l][g].length," pixels"):(_+=" location = ".concat(s[l][g].pos),l!=="point"&&(_+=", area = ".concat(s[l][g].area," %")),_+="</li>"),c+=_,y++,m++}h=1<y?"".concat(h," ").concat(y," ").concat(l,"s"):"".concat(h," ").concat(y," ").concat(l)}return{numShapes:[m,h],details:c}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(p,s){var l,c,h,m=0,g="",y=Array.apply(null,Array(10)).map(function(){});for(l in y)y[l]=Array.apply(null,Array(10)).map(function(){});for(c in s)for(var _ in s[c]){var x=void 0;x=c!=="line"?'<a href="#'.concat(p,"shape").concat(m,'">').concat(s[c][_].color," ").concat(c,"</a>"):'<a href="#'.concat(p,"shape").concat(m,'">').concat(s[c][_].color," ").concat(c," midpoint</a>"),y[s[c][_].loc.locY][s[c][_].loc.locX]?y[s[c][_].loc.locY][s[c][_].loc.locX]=y[s[c][_].loc.locY][s[c][_].loc.locX]+"  "+x:y[s[c][_].loc.locY][s[c][_].loc.locX]=x,m++}for(h in y){var w,j="<tr>";for(w in y[h])j+="<td>",y[h][w]!==void 0&&(j+=y[h][w]),j+="</td>";g=g+j+"</tr>"}return g}(o,this.ingredients.shapes),a!==i.summary.innerHTML&&(i.summary.innerHTML=a),f!==i.map.innerHTML&&(i.map.innerHTML=f),n.details!==i.shapeDetails.innerHTML&&(i.shapeDetails.innerHTML=n.details),this._accessibleOutputs[o]=i)},e=e.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],249:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(a,f,p){return a[0]<.4*f?a[1]<.4*p?"top left":a[1]>.6*p?"bottom left":"mid left":a[0]>.6*f?a[1]<.4*p?"top right":a[1]>.6*p?"bottom right":"mid right":a[1]<.4*p?"top middle":a[1]>.6*p?"bottom middle":"middle"}function n(a,f,p){return f=Math.floor(a[0]/f*10),a=Math.floor(a[1]/p*10),f===10&&(f-=1),a===10&&(a-=1),{locX:f,locY:a}}o.default.prototype.textOutput=function(a){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),a===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(a){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),a===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(a,f){var p,s,l,c=this.canvas.id,h=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(c).parentNode),"");f==="Fallback"?(p=c+a,this.dummyDOM.querySelector("#".concat(s=c+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(c,"_Description"))?this.dummyDOM.querySelector("#".concat(c,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(s,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(c)).innerHTML='<div id="'.concat(s,'" role="region" aria-label="Canvas Outputs"></div>'))):f==="Label"&&(p=c+a+(h=f),this.dummyDOM.querySelector("#".concat(s=c+"accessibleOutput"+f))||(this.dummyDOM.querySelector("#".concat(c,"_Label"))?this.dummyDOM.querySelector("#".concat(c,"_Label")):this.dummyDOM.querySelector("#".concat(c))).insertAdjacentHTML("afterend",'<div id="'.concat(s,'"></div>'))),this._accessibleOutputs[p]={},a==="textOutput"?(h="#".concat(c,"gridOutput").concat(h),l='<div id="'.concat(p,'">Text Output<div id="').concat(p,'Summary" aria-label="text output summary"><p id="').concat(p,'_summary"></p><ul id="').concat(p,'_list"></ul></div><table id="').concat(p,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(h)?this.dummyDOM.querySelector(h).insertAdjacentHTML("beforebegin",l):this.dummyDOM.querySelector("#".concat(s)).innerHTML=l,this._accessibleOutputs[p].list=this.dummyDOM.querySelector("#".concat(p,"_list"))):a==="gridOutput"&&(h="#".concat(c,"textOutput").concat(h),l='<div id="'.concat(p,'">Grid Output<p id="').concat(p,'_summary" aria-label="grid output summary"><table id="').concat(p,'_map" summary="grid output content"></table><ul id="').concat(p,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(h)?this.dummyDOM.querySelector(h).insertAdjacentHTML("afterend",l):this.dummyDOM.querySelector("#".concat(s)).innerHTML=l,this._accessibleOutputs[p].map=this.dummyDOM.querySelector("#".concat(p,"_map"))),this._accessibleOutputs[p].shapeDetails=this.dummyDOM.querySelector("#".concat(p,"_shapeDetails")),this._accessibleOutputs[p].summary=this.dummyDOM.querySelector("#".concat(p,"_summary"))},o.default.prototype._updateAccsOutput=function(){var a=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(a+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(a+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(a+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(a+"gridOutputLabel"))},o.default.prototype._accsBackground=function(a){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==a&&(this.ingredients.colors.backgroundRGBA=a,this.ingredients.colors.background=this._rgbColorName(a))},o.default.prototype._accsCanvasColors=function(a,f){a==="fill"?this.ingredients.colors.fillRGBA!==f&&(this.ingredients.colors.fillRGBA=f,this.ingredients.colors.fill=this._rgbColorName(f)):a==="stroke"&&this.ingredients.colors.strokeRGBA!==f&&(this.ingredients.colors.strokeRGBA=f,this.ingredients.colors.stroke=this._rgbColorName(f))},o.default.prototype._accsOutput=function(a,f){a==="ellipse"&&f[2]===f[3]?a="circle":a==="rectangle"&&f[2]===f[3]&&(a="square");var p,s,l={},c=!0,h=function(g,y){var _;return g=g==="rectangle"||g==="ellipse"||g==="arc"||g==="circle"||g==="square"?(_=Math.round(y[0]+y[2]/2),Math.round(y[1]+y[3]/2)):g==="triangle"?(_=(y[0]+y[2]+y[4])/3,(y[1]+y[3]+y[5])/3):g==="quadrilateral"?(_=(y[0]+y[2]+y[4]+y[6])/4,(y[1]+y[3]+y[5]+y[7])/4):g==="line"?(_=(y[0]+y[2])/2,(y[1]+y[3])/2):(_=y[0],y[1]),[_,g]}(a,f);if(a==="line"?(l.color=this.ingredients.colors.stroke,l.length=Math.round(this.dist(f[0],f[1],f[2],f[3])),p=i([f[0],[1]],this.width,this.height),s=i([f[2],[3]],this.width,this.height),l.loc=n(h,this.width,this.height),l.pos=p===s?"at ".concat(p):"from ".concat(p," to ").concat(s)):(a==="point"?l.color=this.ingredients.colors.stroke:(l.color=this.ingredients.colors.fill,l.area=function(g,y,_,x){var w=0;{var j,E,T,A,R,P,N;g==="arc"?(j=((y[5]-y[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI),w=j*y[2]*y[3]/8,y[6]!=="open"&&y[6]!=="chord"||(N=y[0],E=y[1],T=y[0]+y[2]/2*Math.cos(y[4]).toFixed(2),A=y[1]+y[3]/2*Math.sin(y[4]).toFixed(2),R=y[0]+y[2]/2*Math.cos(y[5]).toFixed(2),P=y[1]+y[3]/2*Math.sin(y[5]).toFixed(2),N=Math.abs(N*(A-P)+T*(P-E)+R*(E-A))/2,j>Math.PI?w+=N:w-=N)):g==="ellipse"||g==="circle"?w=3.14*y[2]/2*y[3]/2:g==="line"||g==="point"?w=0:g==="quadrilateral"?w=Math.abs((y[6]+y[0])*(y[7]-y[1])+(y[0]+y[2])*(y[1]-y[3])+(y[2]+y[4])*(y[3]-y[5])+(y[4]+y[6])*(y[5]-y[7]))/2:g==="rectangle"||g==="square"?w=y[2]*y[3]:g==="triangle"&&(w=Math.abs(y[0]*(y[3]-y[5])+y[2]*(y[5]-y[1])+y[4]*(y[1]-y[3]))/2)}return Math.round(100*w/(_*x))}(a,f,this.width,this.height)),l.pos=i(h,this.width,this.height),l.loc=n(h,this.width,this.height)),this.ingredients.shapes[a]){if(this.ingredients.shapes[a]!==[l]){for(var m in this.ingredients.shapes[a])JSON.stringify(this.ingredients.shapes[a][m])===JSON.stringify(l)&&(c=!1);c===!0&&this.ingredients.shapes[a].push(l)}}else this.ingredients.shapes[a]=[l]},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":171}],250:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype._updateTextOutput=function(o){var i,n,a,f;this.dummyDOM.querySelector("#".concat(o,"_summary"))&&(i=this._accessibleOutputs[o],a=function(p,s,l,c){return l="Your output is a, ".concat(l," by ").concat(c," pixels, ").concat(s," canvas containing the following"),l=p===1?"".concat(l," shape:"):"".concat(l," ").concat(p," shapes:"),l}((n=function(p,s){var l,c="",h=0;for(l in s)for(var m in s[l]){var g='<li><a href="#'.concat(p,"shape").concat(h,'">').concat(s[l][m].color," ").concat(l,"</a>");l==="line"?g+=", ".concat(s[l][m].pos,", ").concat(s[l][m].length," pixels long.</li>"):(g+=", at ".concat(s[l][m].pos),l!=="point"&&(g+=", covering ".concat(s[l][m].area,"% of the canvas")),g+=".</li>"),c+=g,h++}return{numShapes:h,listShapes:c}}(o,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),f=function(p,s){var l,c="",h=0;for(l in s)for(var m in s[l]){var g='<tr id="'.concat(p,"shape").concat(h,'"><th>').concat(s[l][m].color," ").concat(l,"</th>");l==="line"?g+="<td>location = ".concat(s[l][m].pos,"</td><td>length = ").concat(s[l][m].length," pixels</td></tr>"):(g+="<td>location = ".concat(s[l][m].pos,"</td>"),l!=="point"&&(g+="<td> area = ".concat(s[l][m].area,"%</td>")),g+="</tr>"),c+=g,h++}return c}(o,this.ingredients.shapes),a!==i.summary.innerHTML&&(i.summary.innerHTML=a),n.listShapes!==i.list.innerHTML&&(i.list.innerHTML=n.listShapes),f!==i.shapeDetails.innerHTML&&(i.shapeDetails.innerHTML=f),this._accessibleOutputs[o]=i)},e=e.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149}],251:[function(e,u,d){var o=(o=e("./core/main"))&&o.__esModule?o:{default:o};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),u.exports=o.default},{"./accessibility/color_namer":246,"./accessibility/describe":247,"./accessibility/gridOutput":248,"./accessibility/outputs":249,"./accessibility/textOutput":250,"./color/color_conversion":252,"./color/creating_reading":253,"./color/p5.Color":254,"./color/setting":255,"./core/constants":256,"./core/environment":257,"./core/friendly_errors/fes_core":258,"./core/friendly_errors/file_errors":259,"./core/friendly_errors/sketch_reader":260,"./core/friendly_errors/stacktrace":261,"./core/friendly_errors/validate_params":262,"./core/helpers":263,"./core/init":264,"./core/legacy":266,"./core/main":267,"./core/p5.Element":268,"./core/p5.Graphics":269,"./core/p5.Renderer":270,"./core/p5.Renderer2D":271,"./core/preload":272,"./core/rendering":273,"./core/shape/2d_primitives":274,"./core/shape/attributes":275,"./core/shape/curves":276,"./core/shape/vertex":277,"./core/shim":278,"./core/structure":279,"./core/transform":280,"./data/local_storage.js":281,"./data/p5.TypedDict":282,"./dom/dom":283,"./events/acceleration":284,"./events/keyboard":285,"./events/mouse":286,"./events/touch":287,"./image/filters":288,"./image/image":289,"./image/loading_displaying":290,"./image/p5.Image":291,"./image/pixels":292,"./io/files":293,"./io/p5.Table":294,"./io/p5.TableRow":295,"./io/p5.XML":296,"./math/calculation":297,"./math/math":298,"./math/noise":299,"./math/p5.Vector":300,"./math/random":301,"./math/trigonometry":302,"./typography/attributes":303,"./typography/loading_displaying":304,"./typography/p5.Font":305,"./utilities/array_functions":306,"./utilities/conversion":307,"./utilities/string_functions":308,"./utilities/time_date":309,"./webgl/3d_primitives":310,"./webgl/interaction":311,"./webgl/light":312,"./webgl/loading":313,"./webgl/material":314,"./webgl/p5.Camera":315,"./webgl/p5.Geometry":316,"./webgl/p5.Matrix":317,"./webgl/p5.RenderBuffer":318,"./webgl/p5.RendererGL":321,"./webgl/p5.RendererGL.Immediate":319,"./webgl/p5.RendererGL.Retained":320,"./webgl/p5.Shader":322,"./webgl/p5.Texture":323,"./webgl/text":324}],252:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.ColorConversion={},e.default.ColorConversion._hsbaToHSLA=function(o){var i=o[0],n=o[1],a=o[2],f=(2-n)*a/2;return f!=0&&(f==1?n=0:f<.5?n/=2-n:n=n*a/(2-2*f)),[i,n,f,o[3]]},e.default.ColorConversion._hsbaToRGBA=function(o){var i,n,a,f,p,s=6*o[0],l=o[1],c=o[2];return l===0?[c,c,c,o[3]]:(n=c*(1-l),a=c*(1-l*(s-(i=Math.floor(s)))),l=c*(1-l*(1+i-s)),s=i===1?(f=a,p=c,n):i===2?(f=n,p=c,l):i===3?(f=n,p=a,c):i===4?(f=l,p=n,c):i===5?(f=c,p=n,a):(f=c,p=l,n),[f,p,s,o[3]])},e.default.ColorConversion._hslaToHSBA=function(o){var i=o[0],n=o[1],a=o[2],f=a<.5?(1+n)*a:a+n-a*n;return[i,n=2*(f-a)/f,f,o[3]]},e.default.ColorConversion._hslaToRGBA=function(o){var i,n=6*o[0],a=o[1],f=o[2];return a===0?[f,f,f,o[3]]:[(i=function(p,s,l){return p<0?p+=6:6<=p&&(p-=6),p<1?s+(l-s)*p:p<3?l:p<4?s+(l-s)*(4-p):s})(2+n,a=2*f-(f=f<.5?(1+a)*f:f+a-f*a),f),i(n,a,f),i(n-2,a,f),o[3]]},e.default.ColorConversion._rgbaToHSBA=function(o){var i,n,a=o[0],f=o[1],p=o[2],s=Math.max(a,f,p),l=s-Math.min(a,f,p);return l==0?n=i=0:(n=l/s,a===s?i=(f-p)/l:f===s?i=2+(p-a)/l:p===s&&(i=4+(a-f)/l),i<0?i+=6:6<=i&&(i-=6)),[i/6,n,s,o[3]]},e.default.ColorConversion._rgbaToHSLA=function(o){var i,n,a=o[0],f=o[1],p=o[2],s=Math.max(a,f,p),c=Math.min(a,f,p),l=s+c,c=s-c;return c==0?n=i=0:(n=l<1?c/l:c/(2-l),a===s?i=(f-p)/c:f===s?i=2+(p-a)/c:p===s&&(i=4+(a-f)/c),i<0?i+=6:6<=i&&(i-=6)),[i/6,n,l/2,o[3]]},e=e.default.ColorConversion,d.default=e},{"../core/main":267}],253:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.alpha=function(s){return n.default._validateParameters("alpha",arguments),this.color(s)._getAlpha()},n.default.prototype.blue=function(s){return n.default._validateParameters("blue",arguments),this.color(s)._getBlue()},n.default.prototype.brightness=function(s){return n.default._validateParameters("brightness",arguments),this.color(s)._getBrightness()},n.default.prototype.color=function(){var s;return n.default._validateParameters("color",arguments),arguments[0]instanceof n.default.Color?arguments[0]:(s=arguments[0]instanceof Array?arguments[0]:arguments,new n.default.Color(this,s))},n.default.prototype.green=function(s){return n.default._validateParameters("green",arguments),this.color(s)._getGreen()},n.default.prototype.hue=function(s){return n.default._validateParameters("hue",arguments),this.color(s)._getHue()},n.default.prototype.lerpColor=function(s,l,c){n.default._validateParameters("lerpColor",arguments);var h,m,g,y=this._colorMode,_=this._colorMaxes;if(y===a.RGB)m=s.levels.map(function(x){return x/255}),g=l.levels.map(function(x){return x/255});else if(y===a.HSB)s._getBrightness(),l._getBrightness(),m=s.hsba,g=l.hsba;else{if(y!==a.HSL)throw new Error("".concat(y,"cannot be used for interpolation."));s._getLightness(),l._getLightness(),m=s.hsla,g=l.hsla}return c=Math.max(Math.min(c,1),0),this.lerp===void 0&&(this.lerp=function(x,w,j){return j*(w-x)+x}),s=this.lerp(m[0],g[0],c),l=this.lerp(m[1],g[1],c),h=this.lerp(m[2],g[2],c),m=this.lerp(m[3],g[3],c),s*=_[y][0],l*=_[y][1],h*=_[y][2],m*=_[y][3],this.color(s,l,h,m)},n.default.prototype.lightness=function(s){return n.default._validateParameters("lightness",arguments),this.color(s)._getLightness()},n.default.prototype.red=function(s){return n.default._validateParameters("red",arguments),this.color(s)._getRed()},n.default.prototype.saturation=function(s){return n.default._validateParameters("saturation",arguments),this.color(s)._getSaturation()};var p=n.default;d.default=p},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],254:[function(c,u,d){function o(_){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}function i(_){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(x){return o(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":o(x)})(_)}c("core-js/modules/es.symbol"),c("core-js/modules/es.symbol.description"),c("core-js/modules/es.symbol.iterator"),c("core-js/modules/es.array.iterator"),c("core-js/modules/es.array.join"),c("core-js/modules/es.array.map"),c("core-js/modules/es.array.slice"),c("core-js/modules/es.object.get-own-property-descriptor"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.regexp.constructor"),c("core-js/modules/es.regexp.exec"),c("core-js/modules/es.regexp.to-string"),c("core-js/modules/es.string.iterator"),c("core-js/modules/es.string.trim"),c("core-js/modules/es.weak-map"),c("core-js/modules/web.dom-collections.iterator"),c("core-js/modules/es.array.join"),c("core-js/modules/es.array.map"),c("core-js/modules/es.array.slice"),c("core-js/modules/es.object.to-string"),c("core-js/modules/es.regexp.constructor"),c("core-js/modules/es.regexp.exec"),c("core-js/modules/es.regexp.to-string"),c("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=s(c("../core/main")),a=function(_){if(_&&_.__esModule)return _;if(_===null||i(_)!=="object"&&typeof _!="function")return{default:_};var x=p();if(x&&x.has(_))return x.get(_);var w,j={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in _){var T;Object.prototype.hasOwnProperty.call(_,w)&&((T=E?Object.getOwnPropertyDescriptor(_,w):null)&&(T.get||T.set)?Object.defineProperty(j,w,T):j[w]=_[w])}return j.default=_,x&&x.set(_,j),j}(c("../core/constants")),f=s(c("./color_conversion"));function p(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,p=function(){return _},_)}function s(_){return _&&_.__esModule?_:{default:_}}n.default.Color=function(_,x){if(this._storeModeAndMaxes(_._colorMode,_._colorMaxes),this.mode!==a.RGB&&this.mode!==a.HSL&&this.mode!==a.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=n.default.Color._parseInputs.apply(this,x),this._calculateLevels(),this},n.default.Color.prototype.toString=function(_){var x=this.levels,w=this._array,j=w[3];switch(_){case"#rrggbb":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16));case"#rrggbbaa":return"#".concat(x[0]<16?"0".concat(x[0].toString(16)):x[0].toString(16),x[1]<16?"0".concat(x[1].toString(16)):x[1].toString(16),x[2]<16?"0".concat(x[2].toString(16)):x[2].toString(16),x[3]<16?"0".concat(x[3].toString(16)):x[3].toString(16));case"#rgb":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*w[0]).toString(16),Math.round(15*w[1]).toString(16),Math.round(15*w[2]).toString(16),Math.round(15*w[3]).toString(16));case"rgb":return"rgb(".concat(x[0],", ",x[1],", ",x[2],")");case"rgb%":return"rgb(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*w[0]).toPrecision(3),"%, ",(100*w[1]).toPrecision(3),"%, ",(100*w[2]).toPrecision(3),"%, ",(100*w[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],", ",j,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*j).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],", ",j,")");case"hsla%":return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*j).toPrecision(3),"%)");default:return"rgba(".concat(x[0],",",x[1],",",x[2],",",j,")")}},n.default.Color.prototype.setRed=function(_){this._array[0]=_/this.maxes[a.RGB][0],this._calculateLevels()},n.default.Color.prototype.setGreen=function(_){this._array[1]=_/this.maxes[a.RGB][1],this._calculateLevels()},n.default.Color.prototype.setBlue=function(_){this._array[2]=_/this.maxes[a.RGB][2],this._calculateLevels()},n.default.Color.prototype.setAlpha=function(_){this._array[3]=_/this.maxes[this.mode][3],this._calculateLevels()},n.default.Color.prototype._calculateLevels=function(){for(var _=this._array,x=this.levels=new Array(_.length),w=_.length-1;0<=w;--w)x[w]=Math.round(255*_[w]);this.hsla=null,this.hsba=null},n.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.default.Color.prototype._storeModeAndMaxes=function(_,x){this.mode=_,this.maxes=x},n.default.Color.prototype._getMode=function(){return this.mode},n.default.Color.prototype._getMaxes=function(){return this.maxes},n.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[a.RGB][2]},n.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]},n.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[a.RGB][1]},n.default.Color.prototype._getHue=function(){return this.mode===a.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])},n.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]},n.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[a.RGB][0]},n.default.Color.prototype._getSaturation=function(){return this.mode===a.HSB?(this.hsba||(this.hsba=f.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=f.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])};var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},c=/\s*/,y=/(\d{1,3})/,h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,m=new RegExp("".concat(h.source,"%")),g={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",y.source,",",y.source,",",y.source,"\\)$"].join(c.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",m.source,",",m.source,",",m.source,"\\)$"].join(c.source),"i"),RGBA:new RegExp(["^rgba\\(",y.source,",",y.source,",",y.source,",",h.source,"\\)$"].join(c.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",m.source,",",m.source,",",m.source,",",h.source,"\\)$"].join(c.source),"i"),HSL:new RegExp(["^hsl\\(",y.source,",",m.source,",",m.source,"\\)$"].join(c.source),"i"),HSLA:new RegExp(["^hsla\\(",y.source,",",m.source,",",m.source,",",h.source,"\\)$"].join(c.source),"i"),HSB:new RegExp(["^hsb\\(",y.source,",",m.source,",",m.source,"\\)$"].join(c.source),"i"),HSBA:new RegExp(["^hsba\\(",y.source,",",m.source,",",m.source,",",h.source,"\\)$"].join(c.source),"i")},y=(n.default.Color._parseInputs=function(_,x,w,j){var E,T=arguments.length,A=this.mode,R=this.maxes[A],P=[];if(3<=T){for(P[0]=_/R[0],P[1]=x/R[1],P[2]=w/R[2],P[3]=typeof j=="number"?j/R[3]:1,E=P.length-1;0<=E;--E){var N=P[E];N<0?P[E]=0:1<N&&(P[E]=1)}return A===a.HSL?f.default._hslaToRGBA(P):A===a.HSB?f.default._hsbaToRGBA(P):P}if(T===1&&typeof _=="string"){if(w=_.trim().toLowerCase(),l[w])return n.default.Color._parseInputs.call(this,l[w]);if(g.HEX3.test(w))return(P=g.HEX3.exec(w).slice(1).map(function(O){return parseInt(O+O,16)/255}))[3]=1,P;if(g.HEX6.test(w))return(P=g.HEX6.exec(w).slice(1).map(function(O){return parseInt(O,16)/255}))[3]=1,P;if(g.HEX4.test(w))return P=g.HEX4.exec(w).slice(1).map(function(O){return parseInt(O+O,16)/255});if(g.HEX8.test(w))return P=g.HEX8.exec(w).slice(1).map(function(O){return parseInt(O,16)/255});if(g.RGB.test(w))return(P=g.RGB.exec(w).slice(1).map(function(O){return O/255}))[3]=1,P;if(g.RGB_PERCENT.test(w))return(P=g.RGB_PERCENT.exec(w).slice(1).map(function(O){return parseFloat(O)/100}))[3]=1,P;if(g.RGBA.test(w))return P=g.RGBA.exec(w).slice(1).map(function(O,D){return D===3?parseFloat(O):O/255});if(g.RGBA_PERCENT.test(w))return P=g.RGBA_PERCENT.exec(w).slice(1).map(function(O,D){return D===3?parseFloat(O):parseFloat(O)/100});if(g.HSL.test(w)?(P=g.HSL.exec(w).slice(1).map(function(O,D){return D===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:g.HSLA.test(w)&&(P=g.HSLA.exec(w).slice(1).map(function(O,D){return D===0?parseInt(O,10)/360:D===3?parseFloat(O):parseInt(O,10)/100})),(P=P.map(function(O){return Math.max(Math.min(O,1),0)})).length)return f.default._hslaToRGBA(P);if(g.HSB.test(w)?(P=g.HSB.exec(w).slice(1).map(function(O,D){return D===0?parseInt(O,10)/360:parseInt(O,10)/100}))[3]=1:g.HSBA.test(w)&&(P=g.HSBA.exec(w).slice(1).map(function(O,D){return D===0?parseInt(O,10)/360:D===3?parseFloat(O):parseInt(O,10)/100})),P.length){for(E=P.length-1;0<=E;--E)P[E]=Math.max(Math.min(P[E],1),0);return f.default._hsbaToRGBA(P)}P=[1,1,1,1]}else{if(T!==1&&T!==2||typeof _!="number")throw new Error("".concat(arguments,"is not a valid color representation."));P[0]=_/R[2],P[1]=_/R[2],P[2]=_/R[2],P[3]=typeof x=="number"?x/R[3]:1,P=P.map(function(O){return Math.max(Math.min(O,1),0)})}return P},n.default.Color);d.default=y},{"../core/constants":256,"../core/main":267,"./color_conversion":252,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],255:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}e("./p5.Color"),n.default.prototype.background=function(){var s;return(s=this._renderer).background.apply(s,arguments),this},n.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},n.default.prototype.colorMode=function(s,l,c,h,m){return n.default._validateParameters("colorMode",arguments),s!==a.RGB&&s!==a.HSB&&s!==a.HSL||(this._colorMode=s,s=this._colorMaxes[s],arguments.length===2?(s[0]=l,s[1]=l,s[2]=l,s[3]=l):arguments.length===4?(s[0]=l,s[1]=c,s[2]=h):arguments.length===5&&(s[0]=l,s[1]=c,s[2]=h,s[3]=m)),this},n.default.prototype.fill=function(){var s;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(s=this._renderer).fill.apply(s,arguments),this},n.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},n.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},n.default.prototype.stroke=function(){var s;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(s=this._renderer).stroke.apply(s,arguments),this},n.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},n.default.prototype.noErase=function(){return this._renderer.noErase(),this};var p=n.default;d.default=p},{"../core/constants":256,"../core/main":267,"./p5.Color":254,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],256:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.BEZIER=d.QUADRATIC=d.LINEAR=d._CTX_MIDDLE=d._DEFAULT_LEADMULT=d._DEFAULT_TEXT_FILL=d.WORD=d.CHAR=d.BOLDITALIC=d.BOLD=d.ITALIC=d.NORMAL=d.BLUR=d.ERODE=d.DILATE=d.POSTERIZE=d.INVERT=d.OPAQUE=d.GRAY=d.THRESHOLD=d.BURN=d.DODGE=d.SOFT_LIGHT=d.HARD_LIGHT=d.OVERLAY=d.REPLACE=d.SCREEN=d.MULTIPLY=d.EXCLUSION=d.SUBTRACT=d.DIFFERENCE=d.LIGHTEST=d.DARKEST=d.ADD=d.REMOVE=d.BLEND=d.UP_ARROW=d.TAB=d.SHIFT=d.RIGHT_ARROW=d.RETURN=d.OPTION=d.LEFT_ARROW=d.ESCAPE=d.ENTER=d.DOWN_ARROW=d.DELETE=d.CONTROL=d.BACKSPACE=d.ALT=d.AUTO=d.HSL=d.HSB=d.RGB=d.MITER=d.BEVEL=d.ROUND=d.SQUARE=d.PROJECT=d.PIE=d.CHORD=d.OPEN=d.CLOSE=d.TESS=d.QUAD_STRIP=d.QUADS=d.TRIANGLE_STRIP=d.TRIANGLE_FAN=d.TRIANGLES=d.LINE_LOOP=d.LINE_STRIP=d.LINES=d.POINTS=d.BASELINE=d.BOTTOM=d.TOP=d.CENTER=d.LEFT=d.RIGHT=d.RADIUS=d.CORNERS=d.CORNER=d.RAD_TO_DEG=d.DEG_TO_RAD=d.RADIANS=d.DEGREES=d.TWO_PI=d.TAU=d.QUARTER_PI=d.PI=d.HALF_PI=d.WAIT=d.TEXT=d.MOVE=d.HAND=d.CROSS=d.ARROW=d.WEBGL=d.P2D=d.VERSION=void 0,d.COVER=d.CONTAIN=d.FALLBACK=d.LABEL=d.AXES=d.GRID=d._DEFAULT_FILL=d._DEFAULT_STROKE=d.PORTRAIT=d.LANDSCAPE=d.MIRROR=d.CLAMP=d.REPEAT=d.NEAREST=d.IMAGE=d.IMMEDIATE=d.TEXTURE=d.FILL=d.STROKE=d.CURVE=void 0;var o=Math.PI,i=(d.VERSION="1.5.0",d.P2D="p2d",d.WEBGL="webgl",d.ARROW="default",d.CROSS="crosshair",d.HAND="pointer",d.MOVE="move",d.TEXT="text",d.WAIT="wait",o/2),i=(d.HALF_PI=i,o),i=(d.PI=i,o/4),i=(d.QUARTER_PI=i,2*o),i=(d.TAU=i,2*o),i=(d.TWO_PI=i,d.DEGREES="degrees",d.RADIANS="radians",o/180),i=(d.DEG_TO_RAD=i,180/o);d.RAD_TO_DEG=i,d.CORNER="corner",d.CORNERS="corners",d.RADIUS="radius",d.RIGHT="right",d.LEFT="left",d.CENTER="center",d.TOP="top",d.BOTTOM="bottom",d.BASELINE="alphabetic",d.POINTS=0,d.LINES=1,d.LINE_STRIP=3,d.LINE_LOOP=2,d.TRIANGLES=4,d.TRIANGLE_FAN=6,d.TRIANGLE_STRIP=5,d.QUADS="quads",d.QUAD_STRIP="quad_strip",d.TESS="tess",d.CLOSE="close",d.OPEN="open",d.CHORD="chord",d.PIE="pie",d.PROJECT="square",d.SQUARE="butt",d.ROUND="round",d.BEVEL="bevel",d.MITER="miter",d.RGB="rgb",d.HSB="hsb",d.HSL="hsl",d.AUTO="auto",d.ALT=18,d.BACKSPACE=8,d.CONTROL=17,d.DELETE=46,d.DOWN_ARROW=40,d.ENTER=13,d.ESCAPE=27,d.LEFT_ARROW=37,d.OPTION=18,d.RETURN=13,d.RIGHT_ARROW=39,d.SHIFT=16,d.TAB=9,d.UP_ARROW=38,d.BLEND="source-over",d.REMOVE="destination-out",d.ADD="lighter",d.DARKEST="darken",d.LIGHTEST="lighten",d.DIFFERENCE="difference",d.SUBTRACT="subtract",d.EXCLUSION="exclusion",d.MULTIPLY="multiply",d.SCREEN="screen",d.REPLACE="copy",d.OVERLAY="overlay",d.HARD_LIGHT="hard-light",d.SOFT_LIGHT="soft-light",d.DODGE="color-dodge",d.BURN="color-burn",d.THRESHOLD="threshold",d.GRAY="gray",d.OPAQUE="opaque",d.INVERT="invert",d.POSTERIZE="posterize",d.DILATE="dilate",d.ERODE="erode",d.BLUR="blur",d.NORMAL="normal",d.ITALIC="italic",d.BOLD="bold",d.BOLDITALIC="bold italic",d.CHAR="CHAR",d.WORD="WORD",d._DEFAULT_TEXT_FILL="#000000",d._DEFAULT_LEADMULT=1.25,d._CTX_MIDDLE="middle",d.LINEAR="linear",d.QUADRATIC="quadratic",d.BEZIER="bezier",d.CURVE="curve",d.STROKE="stroke",d.FILL="fill",d.TEXTURE="texture",d.IMMEDIATE="immediate",d.IMAGE="image",d.NEAREST="nearest",d.REPEAT="repeat",d.CLAMP="clamp",d.MIRROR="mirror",d.LANDSCAPE="landscape",d.PORTRAIT="portrait",d._DEFAULT_STROKE="#000000",d._DEFAULT_FILL="#FFFFFF",d.GRID="grid",d.AXES="axes",d.LABEL="label",d.FALLBACK="fallback",d.CONTAIN="contain",d.COVER="cover"},{}],257:[function(e,u,d){function o(h){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(h)}function i(h){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(m){return o(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":o(m)})(h)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(a=e("./main"))&&a.__esModule?a:{default:a},a=function(h){if(h&&h.__esModule)return h;if(h===null||i(h)!=="object"&&typeof h!="function")return{default:h};var m=f();if(m&&m.has(h))return m.get(h);var g,y={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in h){var x;Object.prototype.hasOwnProperty.call(h,g)&&((x=_?Object.getOwnPropertyDescriptor(h,g):null)&&(x.get||x.set)?Object.defineProperty(y,g,x):y[g]=h[g])}return y.default=h,m&&m.set(h,y),y}(e("./constants"));function f(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,f=function(){return h},h)}var p=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT],s=(n.default.prototype._frameRate=0,n.default.prototype._lastFrameTime=window.performance.now(),n.default.prototype._targetFrameRate=60,window.print);function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function c(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}n.default.prototype.print=function(){var h;arguments.length?(h=console).log.apply(h,arguments):s()},n.default.prototype.frameCount=0,n.default.prototype.deltaTime=0,n.default.prototype.focused=document.hasFocus(),n.default.prototype.cursor=function(h,m,g){var y,_="auto",x=this._curElement.elt;p.includes(h)?_=h:typeof h=="string"&&(y="",m&&g&&typeof m=="number"&&typeof g=="number"&&(y="".concat(m," ").concat(g)),_=h.substring(0,7)==="http://"||h.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(h)?"url(".concat(h,") ").concat(y,", auto"):h),x.style.cursor=_},n.default.prototype.frameRate=function(h){return n.default._validateParameters("frameRate",arguments),typeof h!="number"||h<0?this._frameRate:(this._setProperty("_targetFrameRate",h),h===0&&this._setProperty("_frameRate",h),this)},n.default.prototype.getFrameRate=function(){return this.frameRate()},n.default.prototype.setFrameRate=function(h){return this.frameRate(h)},n.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},n.default.prototype.displayWidth=screen.width,n.default.prototype.displayHeight=screen.height,n.default.prototype.windowWidth=l(),n.default.prototype.windowHeight=c(),n.default.prototype._onresize=function(h){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",c());var m=this._isGlobal?window:this;typeof m.windowResized!="function"||(m=m.windowResized(h))===void 0||m||h.preventDefault()},n.default.prototype.width=0,n.default.prototype.height=0,n.default.prototype.fullscreen=function(h){if(n.default._validateParameters("fullscreen",arguments),h===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(h){if(h=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");h.requestFullscreen?h.requestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},n.default.prototype.pixelDensity=function(h){var m;return n.default._validateParameters("pixelDensity",arguments),typeof h=="number"?(h!==this._pixelDensity&&(this._pixelDensity=h),(m=this).resizeCanvas(this.width,this.height,!0)):m=this._pixelDensity,m},n.default.prototype.displayDensity=function(){return window.devicePixelRatio},n.default.prototype.getURL=function(){return location.href},n.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(h){return h!==""})},n.default.prototype.getURLParams=function(){for(var h,m=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,g={};(h=m.exec(location.search))!=null;)h.index===m.lastIndex&&m.lastIndex++,g[h[1]]=h[2];return g},e=n.default,d.default=e},{"./constants":256,"./main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],258:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(p=e("../main"))&&p.__esModule?p:{default:p};e("../internationalization");function i(s,l){l=l||console.log.bind(console),n||f(),n.some(function(c){var h;if(s.message&&s.message.match("\\W?".concat(c.name,"\\W"))!==null)return h=c.type==="function"?"".concat(c.name,"()"):c.name,l("Did you just try to use p5.js's ".concat(h," ").concat(c.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(a)),!0})}var n=null,f=null,a=(o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},n=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),f=function(){function s(c){return Object.getOwnPropertyNames(c).filter(function(h){return h[0]!=="_"&&!(h in l)&&(l[h]=!0)}).map(function(h){var m=typeof c[h]=="function"?"function":h===h.toUpperCase()?"constant":"variable";return{name:h,type:m}})}var l={};(n=[].concat(s(o.default.prototype),s(e("../constants")))).sort(function(c,h){return h.name.length-c.name.length})},p=(o.default.prototype._helpForMisusedAtTopLevelCode=i,document.readyState!=="complete"&&(window.addEventListener("error",i,!1),window.addEventListener("load",function(){window.removeEventListener("error",i,!1)})),o.default);d.default=p},{"../constants":256,"../internationalization":265,"../main":267,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":165,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],259:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(o=e("../main"))&&o.__esModule?o:{default:o};e("../internationalization"),o.default._friendlyFileLoadError=function(){},e=o.default,d.default=e},{"../internationalization":265,"../main":267}],260:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=p(e("../main"));e("../internationalization"),f(e("../constants"));function a(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,a=function(){return l},l)}function f(l){if(l&&l.__esModule)return l;if(l===null||i(l)!=="object"&&typeof l!="function")return{default:l};var c=a();if(c&&c.has(l))return c.get(l);var h,m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l)Object.prototype.hasOwnProperty.call(l,h)&&((m=y?Object.getOwnPropertyDescriptor(l,h):null)&&(m.get||m.set)?Object.defineProperty(g,h,m):g[h]=l[h]);return g.default=l,c&&c.set(l,g),g}function p(l){return l&&l.__esModule?l:{default:l}}n.default._fesCodeReader=function(){};var s=n.default;d.default=s},{"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],261:[function(e,u,d){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../main"))&&e.__esModule?e:{default:e};function o(){var i=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/;return{parse:function(f){return f.stacktrace!==void 0||f["opera#sourceloc"]!==void 0?this.parseOpera(f):f.stack&&f.stack.match(n)?this.parseV8OrIE(f):f.stack?this.parseFFOrSafari(f):void 0},extractLocation:function(f){return f.indexOf(":")===-1?[f]:[(f=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(f.replace(/[()]/g,"")))[1],f[2]||void 0,f[3]||void 0]},parseV8OrIE:function(f){return f.stack.split(`
`).filter(function(p){return!!p.match(n)},this).map(function(p){var s=(p=-1<p.indexOf("(eval ")?p.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):p).replace(/^\s+/,"").replace(/\(eval code/g,"("),l=s.match(/ (\((.+):(\d+):(\d+)\)$)/),s=(s=l?s.replace(l[0],""):s).split(/\s+/).slice(1),l=this.extractLocation(l?l[1]:s.pop());return{functionName:s.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(l[0])?void 0:l[0],lineNumber:l[1],columnNumber:l[2],source:p}},this)},parseFFOrSafari:function(f){return f.stack.split(`
`).filter(function(p){return!p.match(a)},this).map(function(p){var s,l;return(p=-1<p.indexOf(" > eval")?p.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):p).indexOf("@")===-1&&p.indexOf(":")===-1?{functionName:p}:{functionName:(l=p.match(s=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&l[1]?l[1]:void 0,fileName:(l=this.extractLocation(p.replace(s,"")))[0],lineNumber:l[1],columnNumber:l[2],source:p}},this)},parseOpera:function(f){return!f.stacktrace||-1<f.message.indexOf(`
`)&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,s=f.message.split(`
`),l=[],c=2,h=s.length;c<h;c+=2){var m=p.exec(s[c]);m&&l.push({fileName:m[2],lineNumber:m[1],source:s[c]})}return l},parseOpera10:function(f){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,s=f.stacktrace.split(`
`),l=[],c=0,h=s.length;c<h;c+=2){var m=p.exec(s[c]);m&&l.push({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:s[c]})}return l},parseOpera11:function(f){return f.stack.split(`
`).filter(function(p){return!!p.match(i)&&!p.match(/^Error created at/)},this).map(function(p){var s,c=p.split("@"),l=this.extractLocation(c.pop()),c=c.shift()||"";return{functionName:c.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(s=c.match(/\(([^)]*)\)/)?c.replace(/^[^(]+\(([^)]*)\)$/,"$1"):s)===void 0||s==="[arguments not available]"?void 0:s.split(","),fileName:l[0],lineNumber:l[1],columnNumber:l[2],source:p}},this)}}}e.default._getErrorStackParser=function(){return new o},e=e.default,d.default=e},{"../main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],262:[function(e,u,d){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=(i=e("../main"))&&i.__esModule?i:{default:i};(function(f){if(!(f&&f.__esModule)&&!(f===null||a(f)!=="object"&&typeof f!="function")){var p=n();if(p&&p.has(f))return p.get(f);var s,l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in f){var h;Object.prototype.hasOwnProperty.call(f,s)&&((h=c?Object.getOwnPropertyDescriptor(f,s):null)&&(h.get||h.set)?Object.defineProperty(l,s,h):l[s]=f[s])}l.default=f,p&&p.set(f,l)}})(e("../constants")),e("../internationalization");function n(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,n=function(){return f},f)}function a(f){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(f)}i.default._validateParameters=i.default._clearValidateParamsCache=function(){},e=i.default,d.default=e},{"../../../docs/parameterData.json":void 0,"../constants":256,"../internationalization":265,"../main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.map":166,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],263:[function(e,u,d){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}function i(f){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=function(f){if(f&&f.__esModule)return f;if(f===null||i(f)!=="object"&&typeof f!="function")return{default:f};var p=a();if(p&&p.has(f))return p.get(f);var s,l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(s in f){var h;Object.prototype.hasOwnProperty.call(f,s)&&((h=c?Object.getOwnPropertyDescriptor(f,s):null)&&(h.get||h.set)?Object.defineProperty(l,s,h):l[s]=f[s])}return l.default=f,p&&p.set(f,l),l}(e("./constants"));function a(){var f;return typeof WeakMap!="function"?null:(f=new WeakMap,a=function(){return f},f)}d.default={modeAdjust:function(f,p,s,l,c){return c===n.CORNER?{x:f,y:p,w:s,h:l}:c===n.CORNERS?{x:f,y:p,w:s-f,h:l-p}:c===n.RADIUS?{x:f-s,y:p-l,w:2*s,h:2*l}:c===n.CENTER?{x:f-.5*s,y:p-.5*l,w:s,h:l}:void 0}}},{"./constants":256,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],264:[function(e,u,d){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var o=(i=e("../core/main"))&&i.__esModule?i:{default:i};e("./internationalization");var i=Promise.resolve();Promise.all([new Promise(function(n,a){document.readyState==="complete"?n():window.addEventListener("load",n,!1)}),i]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!o.default.instance&&new o.default})},{"../core/main":267,"./internationalization":265,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":230}],265:[function(e,u,d){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.setTranslatorLanguage=d.currentTranslatorLanguage=d.availableTranslatorLanguages=d.initialize=d.translator=void 0;var o,i,n=f(e("i18next")),a=f(e("i18next-browser-languagedetector"));function f(l){return l&&l.__esModule?l:{default:l}}function p(l,c){for(var h=0;h<c.length;h++){var m=c[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var s=function(){function l(m,g){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.init(m,g)}var c,h;return c=l,(h=[{key:"fetchWithTimeout",value:function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(m,g),new Promise(function(_,x){return setTimeout(function(){return x(new Error("timeout"))},y)})])}},{key:"init",value:function(m){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=m,this.options=g}},{key:"read",value:function(m,g,y){var _=this.options.loadPath;m===this.options.fallback?y(null,o[m][g]):i.includes(m)?(_=this.services.interpolator.interpolate(_,{lng:m,ns:g}),this.loadUrl(_,y)):y("Not found",!1)}},{key:"loadUrl",value:function(m,g){this.fetchWithTimeout(m).then(function(y){if(y.ok)return y.json();throw new Error("failed loading ".concat(m))},function(){throw new Error("failed loading ".concat(m))}).then(function(y){return g(null,y)}).catch(g)}}])&&p(c.prototype,h),l}();s.type="backend",d.translator=function(l,c){console.debug("p5.js translator called before translations were loaded"),n.default.t(l,c)},d.initialize=function(){return n.default.use(a.default).use(s).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:o}).then(function(l){d.translator=l},function(l){return console.debug("Translations failed to load (".concat(l,")"))})},d.availableTranslatorLanguages=function(){return n.default.languages},d.currentTranslatorLanguage=function(l){return n.default.language},d.setTranslatorLanguage=function(l){return n.default.changeLanguage(l||void 0,function(c){return console.debug("Translations failed to load (".concat(c,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":230,i18next:3,"i18next-browser-languagedetector":3}],266:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("./main"))&&e.__esModule?e:{default:e},e.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},e=e.default,d.default=e},{"./main":267}],267:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e("./shim");var n=function(l){if(l&&l.__esModule)return l;if(l===null||i(l)!=="object"&&typeof l!="function")return{default:l};var c=a();if(c&&c.has(l))return c.get(l);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l){var y;Object.prototype.hasOwnProperty.call(l,h)&&((y=g?Object.getOwnPropertyDescriptor(l,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=l[h])}return m.default=l,c&&c.set(l,m),m}(e("./constants"));function a(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,a=function(){return l},l)}function f(l,c){for(var h=0;h<c.length;h++){var m=c[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(l,m.key,m)}}var p,s=function(){function l(m,x,y){var _=this;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=x,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var x=Object.getOwnPropertyNames(l.prototype._registeredMethods),w=!0,j=!1,E=void 0;try{for(var T,A=x[Symbol.iterator]();!(w=(T=A.next()).done);w=!0){var R=T.value;this._registeredMethods[R]=l.prototype._registeredMethods[R].slice()}}catch(X){j=!0,E=X}finally{try{w||A.return==null||A.return()}finally{if(j)throw E}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){_._userNode&&typeof _._userNode=="string"&&(_._userNode=document.getElementById(_._userNode));var X=_._isGlobal?window:_;if(X.preload){var Z,q=document.getElementById(_._loadingScreenId),ee=(q||((q=document.createElement("div")).innerHTML="Loading...",q.style.position="absolute",q.id=_._loadingScreenId,(_._userNode||document.body).appendChild(q)),_._preloadMethods);for(Z in ee){ee[Z]=ee[Z]||l;var L=ee[Z];L!==l.prototype&&L!==l||(_._isGlobal&&(window[Z]=_._wrapPreload(_,Z)),L=_),_._registeredPreloadMethods[Z]=L[Z],L[Z]=_._wrapPreload(L,Z)}X.preload(),_._runIfPreloadsAreDone()}else _._setup(),_._draw()},this._runIfPreloadsAreDone=function(){var X,Z=this._isGlobal?window:this;Z._preloadCount===0&&((X=document.getElementById(Z._loadingScreenId))&&X.parentNode.removeChild(X),this._setupDone||(this._lastFrameTime=window.performance.now(),Z._setup(),Z._draw()))},this._decrementPreload=function(){var X=this._isGlobal?window:this;X._preloadDone||typeof X.preload!="function"||(X._setProperty("_preloadCount",X._preloadCount-1),X._runIfPreloadsAreDone())},this._wrapPreload=function(X,Z){var q=this;return function(){q._incrementPreload();for(var ee=arguments.length,L=new Array(ee),I=0;I<ee;I++)L[I]=arguments[I];return q._registeredPreloadMethods[Z].apply(X,L)}},this._incrementPreload=function(){var X=this._isGlobal?window:this;X._preloadDone||X._setProperty("_preloadCount",X._preloadCount+1)},this._setup=function(){_.createCanvas(_._defaultCanvasSize.width,_._defaultCanvasSize.height,"p2d");var X=_._isGlobal?window:_;if(typeof X.preload=="function")for(var Z in _._preloadMethods)X[Z]=_._preloadMethods[Z][Z],X[Z]&&_&&(X[Z]=X[Z].bind(_));_._millisStart=window.performance.now(),X._preloadDone=!0,typeof X.setup=="function"&&X.setup();var q=document.getElementsByTagName("canvas"),ee=!0,L=!1,I=void 0;try{for(var F,V=q[Symbol.iterator]();!(ee=(F=V.next()).done);ee=!0){var J=F.value;J.dataset.hidden==="true"&&(J.style.visibility="",delete J.dataset.hidden)}}catch(le){L=!0,I=le}finally{try{ee||V.return==null||V.return()}finally{if(L)throw I}}_._lastFrameTime=window.performance.now(),_._setupDone=!0,(_._accessibleOutputs.grid||_._accessibleOutputs.text)&&_._updateAccsOutput()},this._draw=function(){var X=window.performance.now(),Z=X-_._lastFrameTime,q=1e3/_._targetFrameRate;(!_._loop||q-5<=Z)&&(_.redraw(),_._frameRate=1e3/(X-_._lastFrameTime),_.deltaTime=X-_._lastFrameTime,_._setProperty("deltaTime",_.deltaTime),_._lastFrameTime=X,_._updateMouseCoords!==void 0&&(_._updateMouseCoords(),_._setProperty("movedX",0),_._setProperty("movedY",0))),_._loop&&(_._requestAnimId=window.requestAnimationFrame(_._draw))},this._setProperty=function(X,Z){_[X]=Z,_._isGlobal&&(window[X]=Z)},this.remove=function(){var X=document.getElementById(_._loadingScreenId);if(X&&(X.parentNode.removeChild(X),_._incrementPreload()),_._curElement){for(var Z in _._loop=!1,_._requestAnimId&&window.cancelAnimationFrame(_._requestAnimId),_._events)window.removeEventListener(Z,_._events[Z]);var q=!0,X=!1,ee=void 0;try{for(var L,I=_._elements[Symbol.iterator]();!(q=(L=I.next()).done);q=!0){var F,V=L.value;for(F in V.elt&&V.elt.parentNode&&V.elt.parentNode.removeChild(V.elt),V._events)V.elt.removeEventListener(F,V._events[F])}}catch(re){X=!0,ee=re}finally{try{q||I.return==null||I.return()}finally{if(X)throw ee}}var J=_;_._registeredMethods.remove.forEach(function(re){re!==void 0&&re.call(J)})}if(_._isGlobal){for(var le in l.prototype)try{delete window[le]}catch{window[le]=void 0}for(var ce in _)if(_.hasOwnProperty(ce))try{delete window[ce]}catch{window[ce]=void 0}l.instance=null}},this._registeredMethods.init.forEach(function(X){X!==void 0&&X.call(this)},this),this._setupPromisePreloads();var P,N,O=this._createFriendlyGlobalFunctionBinder();if(m)m(this),l._checkForUserDefinedFunctions(this);else{for(var D in this._isGlobal=!0,l.instance=this,l.prototype)typeof l.prototype[D]=="function"?(P=D.substring(2),this._events.hasOwnProperty(P)||(Math.hasOwnProperty(D)&&Math[D]===l.prototype[D]?O(D,l.prototype[D]):O(D,l.prototype[D].bind(this)))):O(D,l.prototype[D]);for(var U in this)this.hasOwnProperty(U)&&O(U,this[U])}for(N in this._events){var Y=this["_on".concat(N)];Y&&(Y=Y.bind(this),window.addEventListener(N,Y,{passive:!1}),this._events[N]=Y)}function H(){_._setProperty("focused",!0)}function W(){_._setProperty("focused",!1)}window.addEventListener("focus",H),window.addEventListener("blur",W),this.registerMethod("remove",function(){window.removeEventListener("focus",H),window.removeEventListener("blur",W)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var c,h;return c=l,(h=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=n.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(m,g){l.prototype._preloadMethods.hasOwnProperty(m)||(l.prototype._preloadMethods[m]=g)}},{key:"registerMethod",value:function(m,g){var y=this||l.prototype;y._registeredMethods.hasOwnProperty(m)||(y._registeredMethods[m]=[]),y._registeredMethods[m].push(g)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=m.globalObject||window;return m.log||console.log.bind(console),function(y,_){l.disableFriendlyErrors,g[y]=_}}}])&&f(c.prototype,h),l}();for(p in s.instance=null,s.disableFriendlyErrors=!1,n)s.prototype[p]=n[p];s.VERSION=n.VERSION,s.prototype._preloadMethods={loadJSON:s.prototype,loadImage:s.prototype,loadStrings:s.prototype,loadXML:s.prototype,loadBytes:s.prototype,loadTable:s.prototype,loadFont:s.prototype,loadModel:s.prototype,loadShader:s.prototype},s.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},s.prototype._registeredPreloadMethods={},d.default=s},{"./constants":256,"./shim":278,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230}],268:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("./main"))&&e.__esModule?e:{default:e};o.default.Element=function(i,n){this.elt=i,this._pInst=this._pixelsState=n,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},o.default.Element.prototype.parent=function(i){return i===void 0?this.elt.parentNode:(typeof i=="string"?(i[0]==="#"&&(i=i.substring(1)),i=document.getElementById(i)):i instanceof o.default.Element&&(i=i.elt),i.appendChild(this.elt),this)},o.default.Element.prototype.id=function(i){return i===void 0?this.elt.id:(this.elt.id=i,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},o.default.Element.prototype.class=function(i){return i===void 0?this.elt.className:(this.elt.className=i,this)},o.default.Element.prototype.mousePressed=function(i){return o.default.Element._adjustListener("mousedown",function(n){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(n),i.call(this,n)},this),this},o.default.Element.prototype.doubleClicked=function(i){return o.default.Element._adjustListener("dblclick",i,this),this},o.default.Element.prototype.mouseWheel=function(i){return o.default.Element._adjustListener("wheel",i,this),this},o.default.Element.prototype.mouseReleased=function(i){return o.default.Element._adjustListener("mouseup",i,this),this},o.default.Element.prototype.mouseClicked=function(i){return o.default.Element._adjustListener("click",i,this),this},o.default.Element.prototype.mouseMoved=function(i){return o.default.Element._adjustListener("mousemove",i,this),this},o.default.Element.prototype.mouseOver=function(i){return o.default.Element._adjustListener("mouseover",i,this),this},o.default.Element.prototype.mouseOut=function(i){return o.default.Element._adjustListener("mouseout",i,this),this},o.default.Element.prototype.touchStarted=function(i){return o.default.Element._adjustListener("touchstart",i,this),this},o.default.Element.prototype.touchMoved=function(i){return o.default.Element._adjustListener("touchmove",i,this),this},o.default.Element.prototype.touchEnded=function(i){return o.default.Element._adjustListener("touchend",i,this),this},o.default.Element.prototype.dragOver=function(i){return o.default.Element._adjustListener("dragover",i,this),this},o.default.Element.prototype.dragLeave=function(i){return o.default.Element._adjustListener("dragleave",i,this),this},o.default.Element._adjustListener=function(i,n,a){return n===!1?o.default.Element._detachListener(i,a):o.default.Element._attachListener(i,n,a),this},o.default.Element._attachListener=function(i,n,a){a._events[i]&&o.default.Element._detachListener(i,a),n=n.bind(a),a.elt.addEventListener(i,n,!1),a._events[i]=n},o.default.Element._detachListener=function(i,n){var a=n._events[i];n.elt.removeEventListener(i,a,!1),n._events[i]=null},o.default.Element.prototype._setProperty=function(i,n){this[i]=n},e=o.default.Element,d.default=e},{"./main":267}],269:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("./main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("./constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}n.default.Graphics=function(s,l,g,h){var m,g=g||a.P2D;for(m in this.canvas=document.createElement("canvas"),(h._userNode||document.body).appendChild(this.canvas),n.default.Element.call(this,this.canvas,h),n.default.prototype)this[m]||(typeof n.default.prototype[m]=="function"?this[m]=n.default.prototype[m].bind(this):this[m]=n.default.prototype[m]);return n.default.prototype._initializeInstanceVariables.apply(this),this.width=s,this.height=l,this._pixelDensity=h._pixelDensity,g===a.WEBGL?this._renderer=new n.default.RendererGL(this.canvas,this,!1):this._renderer=new n.default.Renderer2D(this.canvas,this,!1),h._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(s,l),this._renderer._applyDefaults(),this},n.default.Graphics.prototype=Object.create(n.default.Element.prototype),n.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},n.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var s,l=this._pInst._elements.indexOf(this);for(s in l!==-1&&this._pInst._elements.splice(l,1),this._events)this.elt.removeEventListener(s,this._events[s])};var p=n.default.Graphics;d.default=p},{"./constants":256,"./main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],270:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=(s=e("./main"))&&s.__esModule?s:{default:s},n=function(l){if(l&&l.__esModule)return l;if(l===null||f(l)!=="object"&&typeof l!="function")return{default:l};var c=a();if(c&&c.has(l))return c.get(l);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l){var y;Object.prototype.hasOwnProperty.call(l,h)&&((y=g?Object.getOwnPropertyDescriptor(l,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=l[h])}return m.default=l,c&&c.set(l,m),m}(e("../core/constants"));function a(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,a=function(){return l},l)}function f(l){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}function p(l){var c=0,h=0;if(l.offsetParent)for(;c+=l.offsetLeft,h+=l.offsetTop,l=l.offsetParent;);else c+=l.offsetLeft,h+=l.offsetTop;return[c,h]}i.default.Renderer=function(l,c,h){i.default.Element.call(this,l,c),this.canvas=l,this._pixelsState=c,h?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=n.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=n.LEFT,this._textBaseline=n.BASELINE,this._textWrap=n.WORD,this._rectMode=n.CORNER,this._ellipseMode=n.CENTER,this._curveTightness=0,this._imageMode=n.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},i.default.Renderer.prototype=Object.create(i.default.Element.prototype),i.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},i.default.Renderer.prototype.pop=function(l){l.properties&&Object.assign(this,l.properties)},i.default.Renderer.prototype.resize=function(l,c){this.width=l,this.height=c,this.elt.width=l*this._pInst._pixelDensity,this.elt.height=c*this._pInst._pixelDensity,this.elt.style.width="".concat(l,"px"),this.elt.style.height="".concat(c,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},i.default.Renderer.prototype.get=function(l,c,h,m){var g=this._pixelsState,y=g._pixelDensity,_=this.canvas;if(l===void 0&&c===void 0)l=c=0,h=g.width,m=g.height;else if(l*=y,c*=y,h===void 0&&m===void 0)return l<0||c<0||l>=_.width||c>=_.height?[0,0,0,0]:this._getPixel(l,c);return g=new i.default.Image(h,m),g.canvas.getContext("2d").drawImage(_,l,c,h*y,m*y,0,0,h,m),g},i.default.Renderer.prototype.textLeading=function(l){return typeof l=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",l),this._pInst):this._textLeading},i.default.Renderer.prototype.textSize=function(l){return typeof l=="number"?(this._setProperty("_textSize",l),this._leadingSet||this._setProperty("_textLeading",l*n._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},i.default.Renderer.prototype.textStyle=function(l){return l?(l!==n.NORMAL&&l!==n.ITALIC&&l!==n.BOLD&&l!==n.BOLDITALIC||this._setProperty("_textStyle",l),this._applyTextProperties()):this._textStyle},i.default.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent},i.default.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent},i.default.Renderer.prototype.textAlign=function(l,c){return l!==void 0?(this._setProperty("_textAlign",l),c!==void 0&&this._setProperty("_textBaseline",c),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},i.default.Renderer.prototype.textWrap=function(l){return this._setProperty("_textWrap",l),this._textWrap},i.default.Renderer.prototype.text=function(l,c,h,m,g){var y,_,x,w,j=this._pInst,E=this._textWrap,T=Number.MAX_VALUE,A=h;if((this._doFill||this._doStroke)&&l!==void 0){if(y=(l=(l=typeof l!="string"?l.toString():l).replace(/(\t)/g,"  ")).split(`
`),m!==void 0){switch(this._rectMode===n.CENTER&&(c-=m/2),this._textAlign){case n.CENTER:c+=m/2;break;case n.RIGHT:c+=m}if(g!==void 0){this._rectMode===n.CENTER&&(h-=g/2);var l=h,R=j.textAscent();switch(this._textBaseline){case n.BOTTOM:w=h+g,h=Math.max(w,h),A+=R;break;case n.CENTER:w=h+g/2,h=Math.max(w,h),A+=R/2}T=h+g-R,this._textBaseline===n.CENTER&&(T=l+g-R/2)}else{if(this._textBaseline===n.BOTTOM)return console.warn("textAlign(*, BOTTOM) requires x, y, width and height");if(this._textBaseline===n.CENTER)return console.warn("textAlign(*, CENTER) requires x, y, width and height")}if(E===n.WORD){for(var P=[],N=0;N<y.length;N++){for(var O="",D=y[N].split(" "),U=0;U<D.length;U++)_="".concat(O+D[U])+" ",O=m<(x=this.textWidth(_))&&0<O.length?(P.push(O),"".concat(D[U])+" "):_;P.push(O)}var Y=0;this._textBaseline===n.CENTER?Y=(P.length-1)*j.textLeading()/2:this._textBaseline===n.BOTTOM&&(Y=(P.length-1)*j.textLeading());for(var H=0;H<y.length;H++){O="",D=y[H].split(" ");for(var W=0;W<D.length;W++)_="".concat(O+D[W])+" ",m<(x=this.textWidth(_))&&0<O.length?(this._renderText(j,O.trim(),c,h-Y,T,A),O="".concat(D[W])+" ",h+=j.textLeading()):O=_;this._renderText(j,O.trim(),c,h-Y,T,A),h+=j.textLeading()}}else{for(var X=[],Z=0;Z<y.length;Z++)for(var q=y[Z].split(O=""),ee=0;ee<q.length;ee++)_="".concat(O+q[ee]),(x=this.textWidth(_))<=m?O+=q[ee]:m<x&&0<O.length&&(X.push(O),O="".concat(q[ee]));X.push(O);var L=0;this._textBaseline===n.CENTER?L=(X.length-1)*j.textLeading()/2:this._textBaseline===n.BOTTOM&&(L=(X.length-1)*j.textLeading());for(var I=0;I<y.length;I++){q=y[I].split(O="");for(var F=0;F<q.length;F++)_="".concat(O+q[F]),(x=this.textWidth(_))<=m?O+=q[F]:m<x&&0<O.length&&(this._renderText(j,O.trim(),c,h-L,T,A),h+=j.textLeading(),O="".concat(q[F]))}this._renderText(j,O.trim(),c,h-L,T,A),h+=j.textLeading()}}else{var V=0;this._textBaseline===n.CENTER?V=(y.length-1)*j.textLeading()/2:this._textBaseline===n.BOTTOM&&(V=(y.length-1)*j.textLeading());for(var J=0;J<y.length;J++)this._renderText(j,y[J],c,h-V,T,A),h+=j.textLeading()}return j}},i.default.Renderer.prototype._applyDefaults=function(){return this},i.default.Renderer.prototype._isOpenType=function(){var l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return f(l)==="object"&&l.font&&l.font.supported},i.default.Renderer.prototype._updateTextMetrics=function(){var l,c,h,m,g,y;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((l=document.createElement("span")).style.fontFamily=this._textFont,l.style.fontSize="".concat(this._textSize,"px"),l.innerHTML="ABCjgq|",(y=document.createElement("div")).style.display="inline-block",y.style.width="1px",y.style.height="0px",m=((c=document.createElement("div")).appendChild(l),c.appendChild(y),c.style.height="0px",c.style.overflow="hidden",document.body.appendChild(c),y.style.verticalAlign="baseline",p(y)),g=p(l),h=m[1]-g[1],m=(y.style.verticalAlign="bottom",p(y)),g=p(l),y=m[1]-g[1]-h,document.body.removeChild(c),this._setProperty("_textAscent",h),this._setProperty("_textDescent",y)),this};var s=i.default.Renderer;d.default=s},{"../core/constants":256,"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],271:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(s=e("./main"))&&s.__esModule?s:{default:s},a=function(l){if(l&&l.__esModule)return l;if(l===null||i(l)!=="object"&&typeof l!="function")return{default:l};var c=f();if(c&&c.has(l))return c.get(l);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l){var y;Object.prototype.hasOwnProperty.call(l,h)&&((y=g?Object.getOwnPropertyDescriptor(l,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=l[h])}return m.default=l,c&&c.set(l,m),m}(e("./constants"));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}e("./p5.Renderer");var p="rgba(0,0,0,0)",s=(n.default.Renderer2D=function(l,c,h){return n.default.Renderer.call(this,l,c,h),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.default.Renderer2D.prototype=Object.create(n.default.Renderer.prototype),n.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=a.BLEND,this._setFill(a._DEFAULT_FILL),this._setStroke(a._DEFAULT_STROKE),this.drawingContext.lineCap=a.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.default.Renderer2D.prototype.resize=function(l,c){n.default.Renderer.prototype.resize.call(this,l,c),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.default.Renderer2D.prototype.background=function(){var l,c;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof n.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(l=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(l,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(l=this._getFill(),c=(c=this._pInst).color.apply(c,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(c.levels),c=c.toString(),this._setFill(c),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(l),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()},n.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},n.default.Renderer2D.prototype.fill=function(){var l=(l=this._pInst).color.apply(l,arguments);this._setFill(l.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",l.levels)},n.default.Renderer2D.prototype.stroke=function(){var l=(l=this._pInst).color.apply(l,arguments);this._setStroke(l.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",l.levels)},n.default.Renderer2D.prototype.erase=function(l,c){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,l=this._pInst.color(255,l).toString(),this.drawingContext.fillStyle=l,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l=this._pInst.color(255,c).toString(),this.drawingContext.strokeStyle=l,c=this._cachedBlendMode,this.blendMode(a.REMOVE),this._cachedBlendMode=c,this._isErasing=!0)},n.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},n.default.Renderer2D.prototype.image=function(l,c,h,m,g,y,_,x,w){l.gifProperties&&l._animateGif(this._pInst);try{var j=(j=this._tint&&l.canvas?this._getTintedImageCanvas(l):j)||l.canvas||l.elt,E=1;l.width&&0<l.width&&(E=j.width/l.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(j,E*c,E*h,E*m,E*g,y,_,x,w),this._isErasing&&this._pInst.erase()}catch(T){if(T.name!=="NS_ERROR_NOT_AVAILABLE")throw T}},n.default.Renderer2D.prototype._getTintedImageCanvas=function(l){if(!l.canvas)return l;l.tintCanvas||(l.tintCanvas=document.createElement("canvas")),l.tintCanvas.width!==l.canvas.width&&(l.tintCanvas.width=l.canvas.width),l.tintCanvas.height!==l.canvas.height&&(l.tintCanvas.height=l.canvas.height);var c=l.tintCanvas.getContext("2d");return c.save(),c.clearRect(0,0,l.canvas.width,l.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(c.drawImage(l.canvas,0,0),c.globalCompositeOperation="luminosity",c.drawImage(l.canvas,0,0),c.globalCompositeOperation="color",c.drawImage(l.canvas,0,0),c.globalCompositeOperation="multiply",c.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),c.fillRect(0,0,l.canvas.width,l.canvas.height),c.globalCompositeOperation="destination-in"),c.globalAlpha=this._tint[3]/255,c.drawImage(l.canvas,0,0),c.restore(),l.tintCanvas},n.default.Renderer2D.prototype.blendMode=function(l){if(l===a.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(l!==a.BLEND&&l!==a.REMOVE&&l!==a.DARKEST&&l!==a.LIGHTEST&&l!==a.DIFFERENCE&&l!==a.MULTIPLY&&l!==a.EXCLUSION&&l!==a.SCREEN&&l!==a.REPLACE&&l!==a.OVERLAY&&l!==a.HARD_LIGHT&&l!==a.SOFT_LIGHT&&l!==a.DODGE&&l!==a.BURN&&l!==a.ADD)throw new Error("Mode ".concat(l," not recognized."));this._cachedBlendMode=l,this.drawingContext.globalCompositeOperation=l}},n.default.Renderer2D.prototype.blend=function(){for(var l=this.drawingContext.globalCompositeOperation,c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];var g=h[h.length-1],y=Array.prototype.slice.call(h,0,h.length-1);this.drawingContext.globalCompositeOperation=g,n.default.prototype.copy.apply(this,y),this.drawingContext.globalCompositeOperation=l},n.default.Renderer2D.prototype._getPixel=function(l,c){return l=this.drawingContext.getImageData(l,c,1,1).data,[l[0],l[1],l[2],l[3]]},n.default.Renderer2D.prototype.loadPixels=function(){var l=this._pixelsState,c=l._pixelDensity,h=this.width*c,c=this.height*c,h=this.drawingContext.getImageData(0,0,h,c);l._setProperty("imageData",h),l._setProperty("pixels",h.data)},n.default.Renderer2D.prototype.set=function(l,c,h){l=Math.floor(l),c=Math.floor(c);var m=this._pixelsState;if(h instanceof n.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(m._pixelDensity,m._pixelDensity),this.drawingContext.clearRect(l,c,h.width,h.height),this.drawingContext.drawImage(h.canvas,l,c),this.drawingContext.restore();else{var g=0,y=0,_=0,x=0,w=4*(c*m._pixelDensity*(this.width*m._pixelDensity)+l*m._pixelDensity);if(m.imageData||m.loadPixels.call(m),typeof h=="number")w<m.pixels.length&&(_=y=g=h,x=255);else if(h instanceof Array){if(h.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");w<m.pixels.length&&(g=h[0],y=h[1],_=h[2],x=h[3])}else h instanceof n.default.Color&&w<m.pixels.length&&(g=h.levels[0],y=h.levels[1],_=h.levels[2],x=h.levels[3]);for(var j=0;j<m._pixelDensity;j++)for(var E=0;E<m._pixelDensity;E++)w=4*((c*m._pixelDensity+E)*this.width*m._pixelDensity+(l*m._pixelDensity+j)),m.pixels[w]=g,m.pixels[w+1]=y,m.pixels[w+2]=_,m.pixels[w+3]=x}},n.default.Renderer2D.prototype.updatePixels=function(l,c,h,m){var g=this._pixelsState,y=g._pixelDensity;l===void 0&&c===void 0&&h===void 0&&m===void 0&&(c=l=0,h=this.width,m=this.height),l*=y,c*=y,h*=y,m*=y,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=g.imageData),this.drawingContext.putImageData(g.imageData,l,c,0,0,h,m)},n.default.Renderer2D.prototype._acuteArcToBezier=function(l,c){var y=c/2,h=Math.cos(y),x=Math.sin(y),m=1/Math.tan(y),y=l+y,g=Math.cos(y),y=Math.sin(y),_=(4-h)/3,x=x+(h-_)*m;return{ax:Math.cos(l).toFixed(7),ay:Math.sin(l).toFixed(7),bx:(_*g+x*y).toFixed(7),by:(_*y-x*g).toFixed(7),cx:(_*g-x*y).toFixed(7),cy:(_*y+x*g).toFixed(7),dx:Math.cos(l+c).toFixed(7),dy:Math.sin(l+c).toFixed(7)}},n.default.Renderer2D.prototype.arc=function(l,c,h,m,g,y,_){var x,w=this.drawingContext,j=h/2,E=m/2,T=[];for(l+=j,c+=E;1e-5<=y-g;)x=Math.min(y-g,a.HALF_PI),T.push(this._acuteArcToBezier(g,x)),g+=x;return this._doFill&&(w.beginPath(),T.forEach(function(A,R){R===0&&w.moveTo(l+A.ax*j,c+A.ay*E),w.bezierCurveTo(l+A.bx*j,c+A.by*E,l+A.cx*j,c+A.cy*E,l+A.dx*j,c+A.dy*E)}),_!==a.PIE&&_!=null||w.lineTo(l,c),w.closePath(),w.fill()),this._doStroke&&(w.beginPath(),T.forEach(function(A,R){R===0&&w.moveTo(l+A.ax*j,c+A.ay*E),w.bezierCurveTo(l+A.bx*j,c+A.by*E,l+A.cx*j,c+A.cy*E,l+A.dx*j,c+A.dy*E)}),_===a.PIE?(w.lineTo(l,c),w.closePath()):_===a.CHORD&&w.closePath(),w.stroke()),this},n.default.Renderer2D.prototype.ellipse=function(T){var c=this.drawingContext,h=this._doFill,m=this._doStroke,g=parseFloat(T[0]),y=parseFloat(T[1]),E=parseFloat(T[2]),T=parseFloat(T[3]);if(h&&!m){if(this._getFill()===p)return this}else if(!h&&m&&this._getStroke()===p)return this;var _=E/2*.5522847498,x=T/2*.5522847498,w=g+E,j=y+T,E=g+E/2,T=y+T/2;c.beginPath(),c.moveTo(g,T),c.bezierCurveTo(g,T-x,E-_,y,E,y),c.bezierCurveTo(E+_,y,w,T-x,w,T),c.bezierCurveTo(w,T+x,E+_,j,E,j),c.bezierCurveTo(E-_,j,g,T+x,g,T),h&&c.fill(),m&&c.stroke()},n.default.Renderer2D.prototype.line=function(l,c,h,m){var g=this.drawingContext;return this._doStroke&&this._getStroke()!==p&&(g.beginPath(),g.moveTo(l,c),g.lineTo(h,m),g.stroke()),this},n.default.Renderer2D.prototype.point=function(l,c){var h,m,g=this.drawingContext;return!this._doStroke||this._getStroke()===p?this:(h=this._getStroke(),m=this._getFill(),this._setFill(h),g.beginPath(),g.arc(l,c,g.lineWidth/2,0,a.TWO_PI,!1),g.fill(),void this._setFill(m))},n.default.Renderer2D.prototype.quad=function(l,c,h,m,g,y,_,x){var w=this.drawingContext,j=this._doFill,E=this._doStroke;if(j&&!E){if(this._getFill()===p)return this}else if(!j&&E&&this._getStroke()===p)return this;return w.beginPath(),w.moveTo(l,c),w.lineTo(h,m),w.lineTo(g,y),w.lineTo(_,x),w.closePath(),j&&w.fill(),E&&w.stroke(),this},n.default.Renderer2D.prototype.rect=function(E){var c,h,m=E[0],g=E[1],y=E[2],_=E[3],x=E[4],w=E[5],j=E[6],E=E[7],T=this.drawingContext,A=this._doFill,R=this._doStroke;if(A&&!R){if(this._getFill()===p)return this}else if(!A&&R&&this._getStroke()===p)return this;return T.beginPath(),x===void 0?T.rect(m,g,y,_):(w===void 0&&(w=x),j===void 0&&(j=w),E===void 0&&(E=j),R=(A=Math.abs(y))/2,h=(c=Math.abs(_))/2,c<2*(x=A<2*x?R:x)&&(x=h),c<2*(w=A<2*w?R:w)&&(w=h),c<2*(j=A<2*j?R:j)&&(j=h),c<2*(E=A<2*E?R:E)&&(E=h),T.beginPath(),T.moveTo(m+x,g),T.arcTo(m+y,g,m+y,g+_,w),T.arcTo(m+y,g+_,m,g+_,j),T.arcTo(m,g+_,m,g,E),T.arcTo(m,g,m+y,g,x),T.closePath()),this._doFill&&T.fill(),this._doStroke&&T.stroke(),this},n.default.Renderer2D.prototype.triangle=function(j){var c=this.drawingContext,h=this._doFill,m=this._doStroke,g=j[0],y=j[1],_=j[2],x=j[3],w=j[4],j=j[5];if(h&&!m){if(this._getFill()===p)return this}else if(!h&&m&&this._getStroke()===p)return this;c.beginPath(),c.moveTo(g,y),c.lineTo(_,x),c.lineTo(w,j),c.closePath(),h&&c.fill(),m&&c.stroke()},n.default.Renderer2D.prototype.endShape=function(l,c,h,m,g,y,_){if(c.length!==0&&(this._doStroke||this._doFill)){var x,w,j,E=l===a.CLOSE,T=(E&&!y&&c.push(c[0]),c.length);if(!h||_!==a.POLYGON&&_!==null)if(!m||_!==a.POLYGON&&_!==null)if(!g||_!==a.POLYGON&&_!==null)if(_===a.POINTS)for(w=0;w<T;w++)x=c[w],this._doStroke&&this._pInst.stroke(x[6]),this._pInst.point(x[0],x[1]);else if(_===a.LINES)for(w=0;w+1<T;w+=2)x=c[w],this._doStroke&&this._pInst.stroke(c[w+1][6]),this._pInst.line(x[0],x[1],c[w+1][0],c[w+1][1]);else if(_===a.TRIANGLES)for(w=0;w+2<T;w+=3)x=c[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(x[0],x[1]),this.drawingContext.lineTo(c[w+1][0],c[w+1][1]),this.drawingContext.lineTo(c[w+2][0],c[w+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(c[w+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(c[w+2][6]),this.drawingContext.stroke());else if(_===a.TRIANGLE_STRIP)for(w=0;w+1<T;w++)x=c[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(c[w+1][0],c[w+1][1]),this.drawingContext.lineTo(x[0],x[1]),this._doStroke&&this._pInst.stroke(c[w+1][6]),this._doFill&&this._pInst.fill(c[w+1][5]),w+2<T&&(this.drawingContext.lineTo(c[w+2][0],c[w+2][1]),this._doStroke&&this._pInst.stroke(c[w+2][6]),this._doFill&&this._pInst.fill(c[w+2][5])),this._doFillStrokeClose(E);else if(_===a.TRIANGLE_FAN){if(2<T){for(this.drawingContext.beginPath(),w=2;w<T;w++)x=c[w],this.drawingContext.moveTo(c[0][0],c[0][1]),this.drawingContext.lineTo(c[w-1][0],c[w-1][1]),this.drawingContext.lineTo(x[0],x[1]),this.drawingContext.lineTo(c[0][0],c[0][1]),w<T-1&&(this._doFill&&x[5]!==c[w+1][5]||this._doStroke&&x[6]!==c[w+1][6])&&(this._doFill&&(this._pInst.fill(x[5]),this.drawingContext.fill(),this._pInst.fill(c[w+1][5])),this._doStroke&&(this._pInst.stroke(x[6]),this.drawingContext.stroke(),this._pInst.stroke(c[w+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(E)}}else if(_===a.QUADS)for(w=0;w+3<T;w+=4){for(x=c[w],this.drawingContext.beginPath(),this.drawingContext.moveTo(x[0],x[1]),j=1;j<4;j++)this.drawingContext.lineTo(c[w+j][0],c[w+j][1]);this.drawingContext.lineTo(x[0],x[1]),this._doFill&&this._pInst.fill(c[w+3][5]),this._doStroke&&this._pInst.stroke(c[w+3][6]),this._doFillStrokeClose(E)}else if(_===a.QUAD_STRIP){if(3<T)for(w=0;w+1<T;w+=2)x=c[w],this.drawingContext.beginPath(),w+3<T?(this.drawingContext.moveTo(c[w+2][0],c[w+2][1]),this.drawingContext.lineTo(x[0],x[1]),this.drawingContext.lineTo(c[w+1][0],c[w+1][1]),this.drawingContext.lineTo(c[w+3][0],c[w+3][1]),this._doFill&&this._pInst.fill(c[w+3][5]),this._doStroke&&this._pInst.stroke(c[w+3][6])):(this.drawingContext.moveTo(x[0],x[1]),this.drawingContext.lineTo(c[w+1][0],c[w+1][1])),this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(c[0][0],c[0][1]),w=1;w<T;w++)(x=c[w]).isVert&&(x.moveTo?this.drawingContext.moveTo(x[0],x[1]):this.drawingContext.lineTo(x[0],x[1]));this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),w=0;w<T;w++)c[w].isVert?c[w].moveTo?this.drawingContext.moveTo(c[w][0],c[w][1]):this.drawingContext.lineTo(c[w][0],c[w][1]):this.drawingContext.quadraticCurveTo(c[w][0],c[w][1],c[w][2],c[w][3]);this._doFillStrokeClose(E)}else{for(this.drawingContext.beginPath(),w=0;w<T;w++)c[w].isVert?c[w].moveTo?this.drawingContext.moveTo(c[w][0],c[w][1]):this.drawingContext.lineTo(c[w][0],c[w][1]):this.drawingContext.bezierCurveTo(c[w][0],c[w][1],c[w][2],c[w][3],c[w][4],c[w][5]);this._doFillStrokeClose(E)}else if(3<T){var A=[],R=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(c[1][0],c[1][1]),w=1;w+2<T;w++)x=c[w],A[0]=[x[0],x[1]],A[1]=[x[0]+(R*c[w+1][0]-R*c[w-1][0])/6,x[1]+(R*c[w+1][1]-R*c[w-1][1])/6],A[2]=[c[w+1][0]+(R*c[w][0]-R*c[w+2][0])/6,c[w+1][1]+(R*c[w][1]-R*c[w+2][1])/6],A[3]=[c[w+1][0],c[w+1][1]],this.drawingContext.bezierCurveTo(A[1][0],A[1][1],A[2][0],A[2][1],A[3][0],A[3][1]);E&&this.drawingContext.lineTo(c[w+1][0],c[w+1][1]),this._doFillStrokeClose(E)}y=g=m=h=!1,E&&c.pop()}return this},n.default.Renderer2D.prototype.strokeCap=function(l){return l!==a.ROUND&&l!==a.SQUARE&&l!==a.PROJECT||(this.drawingContext.lineCap=l),this},n.default.Renderer2D.prototype.strokeJoin=function(l){return l!==a.ROUND&&l!==a.BEVEL&&l!==a.MITER||(this.drawingContext.lineJoin=l),this},n.default.Renderer2D.prototype.strokeWeight=function(l){return this.drawingContext.lineWidth=l===void 0||l===0?1e-4:l,this},n.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},n.default.Renderer2D.prototype._setFill=function(l){l!==this._cachedFillStyle&&(this.drawingContext.fillStyle=l,this._cachedFillStyle=l)},n.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},n.default.Renderer2D.prototype._setStroke=function(l){l!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=l,this._cachedStrokeStyle=l)},n.default.Renderer2D.prototype.bezier=function(l,c,h,m,g,y,_,x){return this._pInst.beginShape(),this._pInst.vertex(l,c),this._pInst.bezierVertex(h,m,g,y,_,x),this._pInst.endShape(),this},n.default.Renderer2D.prototype.curve=function(l,c,h,m,g,y,_,x){return this._pInst.beginShape(),this._pInst.curveVertex(l,c),this._pInst.curveVertex(h,m),this._pInst.curveVertex(g,y),this._pInst.curveVertex(_,x),this._pInst.endShape(),this},n.default.Renderer2D.prototype._doFillStrokeClose=function(l){l&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},n.default.Renderer2D.prototype.applyMatrix=function(l,c,h,m,g,y){this.drawingContext.transform(l,c,h,m,g,y)},n.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.default.Renderer2D.prototype.rotate=function(l){this.drawingContext.rotate(l)},n.default.Renderer2D.prototype.scale=function(l,c){return this.drawingContext.scale(l,c),this},n.default.Renderer2D.prototype.translate=function(l,c){return l instanceof n.default.Vector&&(c=l.y,l=l.x),this.drawingContext.translate(l,c),this},n.default.Renderer2D.prototype.text=function(l,c,h,_,g){_!==void 0&&this.drawingContext.textBaseline===a.BASELINE&&(y=!0,this.drawingContext.textBaseline=a.TOP);var y,_=n.default.Renderer.prototype.text.apply(this,arguments);return y&&(this.drawingContext.textBaseline=a.BASELINE),_},n.default.Renderer2D.prototype._renderText=function(l,c,h,m,g,y){if(!(m<y||g<=m))return l.push(),this._isOpenType()?this._textFont._renderPath(c,h,m,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(c,h,m),this._doFill&&(this._fillSet||this._setFill(a._DEFAULT_TEXT_FILL),this.drawingContext.fillText(c,h,m))),l.pop(),l},n.default.Renderer2D.prototype.textWidth=function(l){return this._isOpenType()?this._textFont._textWidth(l,this._textSize):this.drawingContext.measureText(l).width},n.default.Renderer2D.prototype._applyTextProperties=function(){var l,c=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),l=this._textFont,this._isOpenType()&&(l=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(l||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===a.CENTER?this.drawingContext.textBaseline=a._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,c},n.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),n.default.Renderer.prototype.push.apply(this)},n.default.Renderer2D.prototype.pop=function(l){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,n.default.Renderer.prototype.pop.call(this,l)},n.default.Renderer2D);d.default=s},{"./constants":256,"./main":267,"./p5.Renderer":270,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],272:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var o=(e=e("./main"))&&e.__esModule?e:{default:e};o.default.prototype._promisePreloads=[];function i(){return{}}var n=!(o.default.prototype.registerPromisePreload=function(a){o.default.prototype._promisePreloads.push(a)});o.default.prototype._setupPromisePreloads=function(){var a=!0,f=!1,p=void 0;try{for(var s,l=this._promisePreloads[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,h=this,m=c.method,g=c.addCallbacks,y=c.legacyPreloadSetup,_=c.target||this,x=_[m].bind(_);if(_===o.default.prototype){if(n)continue;h=null,x=_[m]}_[m]=this._wrapPromisePreload(h,x,g),y&&(_[y.method]=this._legacyPreloadGenerator(h,y,_[m]))}}catch(w){f=!0,p=w}finally{try{a||l.return==null||l.return()}finally{if(f)throw p}}n=!0},o.default.prototype._wrapPromisePreload=function(a,f,p){var s=function(){for(var l=this,c=(this._incrementPreload(),null),h=null,m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];if(p)for(var _=g.length-1;0<=_&&!h&&typeof g[_]=="function";_--)h=c,c=g.pop();var x=Promise.resolve(f.apply(this,g));return c&&x.then(c),h&&x.catch(h),x.then(function(){return l._decrementPreload()}),x};return s=a?s.bind(a):s},o.default.prototype._legacyPreloadGenerator=function(a,l,p){var s=l.createBaseObject||i,l=function(){var c=this,h=(this._incrementPreload(),s.apply(this,arguments));return p.apply(this,arguments).then(function(m){Object.assign(h,m),c._decrementPreload()}),h};return l=a?l.bind(a):l}},{"./main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],273:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=(s=e("./main"))&&s.__esModule?s:{default:s},n=function(l){if(l&&l.__esModule)return l;if(l===null||f(l)!=="object"&&typeof l!="function")return{default:l};var c=a();if(c&&c.has(l))return c.get(l);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l){var y;Object.prototype.hasOwnProperty.call(l,h)&&((y=g?Object.getOwnPropertyDescriptor(l,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=l[h])}return m.default=l,c&&c.set(l,m),m}(e("./constants"));function a(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,a=function(){return l},l)}function f(l){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var p="defaultCanvas0",s=(i.default.prototype.createCanvas=function(l,c,_){i.default._validateParameters("createCanvas",arguments);var m,g,y,_=_||n.P2D;if(_===n.WEBGL)(g=document.getElementById(p))&&(g.parentNode.removeChild(g),m=this._renderer,this._elements=this._elements.filter(function(w){return w!==m})),(g=document.createElement("canvas")).id=p,g.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)g=this.canvas;else{g=document.createElement("canvas");for(var x=0;document.getElementById("defaultCanvas".concat(x));)x++;p="defaultCanvas".concat(x),g.id=p,g.classList.add("p5Canvas")}return this._setupDone||(g.dataset.hidden=!0,g.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(y=document.createElement("main"),document.body.appendChild(y)),document.getElementsByTagName("main")[0])).appendChild(g),_===n.WEBGL?(this._setProperty("_renderer",new i.default.RendererGL(g,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new i.default.Renderer2D(g,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(l,c),this._renderer._applyDefaults(),this._renderer},i.default.prototype.resizeCanvas=function(l,c,h){if(i.default._validateParameters("resizeCanvas",arguments),this._renderer){var m,g,y={};for(m in this.drawingContext){var _=this.drawingContext[m];f(_)!=="object"&&typeof _!="function"&&(y[m]=_)}for(g in this._renderer.resize(l,c),this.width=l,this.height=c,y)try{this.drawingContext[g]=y[g]}catch{}h||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},i.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},i.default.prototype.createGraphics=function(l,c,h){return i.default._validateParameters("createGraphics",arguments),new i.default.Graphics(l,c,h,this)},i.default.prototype.blendMode=function(l){i.default._validateParameters("blendMode",arguments),l===n.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),l=n.BLEND),this._renderer.blendMode(l)},i.default);d.default=s},{"../webgl/p5.RendererGL":321,"./constants":256,"./main":267,"./p5.Graphics":269,"./p5.Renderer2D":271,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],274:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=s(e("../main")),a=function(l){if(l&&l.__esModule)return l;if(l===null||i(l)!=="object"&&typeof l!="function")return{default:l};var c=p();if(c&&c.has(l))return c.get(l);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l){var y;Object.prototype.hasOwnProperty.call(l,h)&&((y=g?Object.getOwnPropertyDescriptor(l,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=l[h])}return m.default=l,c&&c.set(l,m),m}(e("../constants")),f=s(e("../helpers"));function p(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,p=function(){return l},l)}function s(l){return l&&l.__esModule?l:{default:l}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),n.default.prototype._normalizeArcAngles=function(l,c,h,m,g){var y;return l-=a.TWO_PI*Math.floor(l/a.TWO_PI),c-=a.TWO_PI*Math.floor(c/a.TWO_PI),y=Math.min(Math.abs(l-c),a.TWO_PI-Math.abs(l-c)),g&&(l=l<=a.HALF_PI?Math.atan(h/m*Math.tan(l)):l>a.HALF_PI&&l<=3*a.HALF_PI?Math.atan(h/m*Math.tan(l))+a.PI:Math.atan(h/m*Math.tan(l))+a.TWO_PI,c=c<=a.HALF_PI?Math.atan(h/m*Math.tan(c)):c>a.HALF_PI&&c<=3*a.HALF_PI?Math.atan(h/m*Math.tan(c))+a.PI:Math.atan(h/m*Math.tan(c))+a.TWO_PI),c<l&&(c+=a.TWO_PI),{start:l,stop:c,correspondToSamePoint:y<1e-5}},n.default.prototype.arc=function(l,c,h,m,g,y,_,x){return n.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&g!==y&&(g=this._toRadians(g),y=this._toRadians(y),h=Math.abs(h),m=Math.abs(m),l=f.default.modeAdjust(l,c,h,m,this._renderer._ellipseMode),(c=this._normalizeArcAngles(g,y,l.w,l.h,!0)).correspondToSamePoint?this._renderer.ellipse([l.x,l.y,l.w,l.h,x]):(this._renderer.arc(l.x,l.y,l.w,l.h,c.start,c.stop,_,x),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[l.x,l.y,l.w,l.h,c.start,c.stop,_]))),this},n.default.prototype.ellipse=function(l,c,h,m,g){return n.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},n.default.prototype.circle=function(){n.default._validateParameters("circle",arguments);var l=Array.prototype.slice.call(arguments,0,2);return l.push(arguments[2]),l.push(arguments[2]),this._renderEllipse.apply(this,l)},n.default.prototype._renderEllipse=function(l,c,h,m,g){return(this._renderer._doStroke||this._renderer._doFill)&&(h<0&&(h=Math.abs(h)),m===void 0?m=h:m<0&&(m=Math.abs(m)),l=f.default.modeAdjust(l,c,h,m,this._renderer._ellipseMode),this._renderer.ellipse([l.x,l.y,l.w,l.h,g]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[l.x,l.y,l.w,l.h])),this},n.default.prototype.line=function(){for(var l,c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return n.default._validateParameters("line",h),this._renderer._doStroke&&(l=this._renderer).line.apply(l,h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",h),this},n.default.prototype.point=function(){for(var l,c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return n.default._validateParameters("point",h),this._renderer._doStroke&&(h.length===1&&h[0]instanceof n.default.Vector?this._renderer.point.call(this._renderer,h[0].x,h[0].y,h[0].z):((l=this._renderer).point.apply(l,h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",h))),this},n.default.prototype.quad=function(){for(var l,c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return n.default._validateParameters("quad",h),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&h.length<=12?this._renderer.quad.call(this._renderer,h[0],h[1],0,h[2],h[3],0,h[4],h[5],0,h[6],h[7],0,h[8],h[9]):((l=this._renderer).quad.apply(l,h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",h))),this},n.default.prototype.rect=function(){return n.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},n.default.prototype.square=function(l,c,h,m,g,y,_){return n.default._validateParameters("square",arguments),this._renderRect.call(this,l,c,h,h,m,g,y,_)},n.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var l=f.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),c=[l.x,l.y,l.w,l.h],h=4;h<arguments.length;h++)c[h]=arguments[h];this._renderer.rect(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[l.x,l.y,l.w,l.h])}return this},n.default.prototype.triangle=function(){for(var l=arguments.length,c=new Array(l),h=0;h<l;h++)c[h]=arguments[h];return n.default._validateParameters("triangle",c),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",c),this},e=n.default,d.default=e},{"../constants":256,"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../helpers":263,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],275:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}n.default.prototype.ellipseMode=function(s){return n.default._validateParameters("ellipseMode",arguments),s!==a.CORNER&&s!==a.CORNERS&&s!==a.RADIUS&&s!==a.CENTER||(this._renderer._ellipseMode=s),this},n.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},n.default.prototype.rectMode=function(s){return n.default._validateParameters("rectMode",arguments),s!==a.CORNER&&s!==a.CORNERS&&s!==a.RADIUS&&s!==a.CENTER||(this._renderer._rectMode=s),this},n.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},n.default.prototype.strokeCap=function(s){return n.default._validateParameters("strokeCap",arguments),s!==a.ROUND&&s!==a.SQUARE&&s!==a.PROJECT||this._renderer.strokeCap(s),this},n.default.prototype.strokeJoin=function(s){return n.default._validateParameters("strokeJoin",arguments),s!==a.ROUND&&s!==a.BEVEL&&s!==a.MITER||this._renderer.strokeJoin(s),this},n.default.prototype.strokeWeight=function(s){return n.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(s),this};var p=n.default;d.default=p},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],276:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(i=e("../main"))&&i.__esModule?i:{default:i};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var n,a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return o.default._validateParameters("bezier",f),(this._renderer._doStroke||this._renderer._doFill)&&(n=this._renderer).bezier.apply(n,f),this},o.default.prototype.bezierDetail=function(n){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=n,this},o.default.prototype.bezierPoint=function(n,a,f,p,s){o.default._validateParameters("bezierPoint",arguments);var l=1-s;return Math.pow(l,3)*n+3*Math.pow(l,2)*s*a+3*l*Math.pow(s,2)*f+Math.pow(s,3)*p},o.default.prototype.bezierTangent=function(n,a,f,p,s){o.default._validateParameters("bezierTangent",arguments);var l=1-s;return 3*p*Math.pow(s,2)-3*f*Math.pow(s,2)+6*f*l*s-6*a*l*s+3*a*Math.pow(l,2)-3*n*Math.pow(l,2)},o.default.prototype.curve=function(){for(var n,a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];return o.default._validateParameters("curve",f),this._renderer._doStroke&&(n=this._renderer).curve.apply(n,f),this},o.default.prototype.curveDetail=function(n){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=n<3?3:n,this},o.default.prototype.curveTightness=function(n){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=n,this},o.default.prototype.curvePoint=function(n,a,f,p,s){o.default._validateParameters("curvePoint",arguments);var l=s*s*s,c=s*s;return n*(-.5*l+c-.5*s)+a*(1.5*l-2.5*c+1)+f*(-1.5*l+2*c+.5*s)+p*(.5*l-.5*c)},o.default.prototype.curveTangent=function(n,a,f,p,s){o.default._validateParameters("curveTangent",arguments);var l=s*s;return n*(-3*l/2+2*s-.5)+a*(9*l/2-5*s)+f*(-9*l/2+4*s+.5)+p*(3*l/2-s)};var i=o.default;d.default=i},{"../friendly_errors/fes_core":258,"../friendly_errors/file_errors":259,"../friendly_errors/validate_params":262,"../main":267}],277:[function(e,u,d){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}function i(x){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(w){return o(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":o(w)})(x)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(_=e("../main"))&&_.__esModule?_:{default:_},a=function(x){if(x&&x.__esModule)return x;if(x===null||i(x)!=="object"&&typeof x!="function")return{default:x};var w=f();if(w&&w.has(x))return w.get(x);var j,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in x){var A;Object.prototype.hasOwnProperty.call(x,j)&&((A=T?Object.getOwnPropertyDescriptor(x,j):null)&&(A.get||A.set)?Object.defineProperty(E,j,A):E[j]=x[j])}return E.default=x,w&&w.set(x,E),E}(e("../constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}var p=null,s=[],l=[],c=!1,h=!1,m=!1,g=!1,y=!0,_=(n.default.prototype.beginContour=function(){return l=[],g=!0,this},n.default.prototype.beginShape=function(x){var w;return n.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(w=this._renderer).beginShape.apply(w,arguments):(p=x===a.POINTS||x===a.LINES||x===a.TRIANGLES||x===a.TRIANGLE_FAN||x===a.TRIANGLE_STRIP||x===a.QUADS||x===a.QUAD_STRIP?x:null,s=[],l=[]),this},n.default.prototype.bezierVertex=function(){for(var x,w=arguments.length,j=new Array(w),E=0;E<w;E++)j[E]=arguments[E];if(n.default._validateParameters("bezierVertex",j),this._renderer.isP3D)(x=this._renderer).bezierVertex.apply(x,j);else if(s.length===0)n.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{c=!0;for(var T=[],A=0;A<j.length;A++)T[A]=j[A];T.isVert=!1,(g?l:s).push(T)}return this},n.default.prototype.curveVertex=function(){for(var x,w=arguments.length,j=new Array(w),E=0;E<w;E++)j[E]=arguments[E];return n.default._validateParameters("curveVertex",j),this._renderer.isP3D?(x=this._renderer).curveVertex.apply(x,j):(h=!0,this.vertex(j[0],j[1])),this},n.default.prototype.endContour=function(){var x=l[0].slice();x.isVert=l[0].isVert,x.moveTo=!1,l.push(x),y&&(s.push(s[0]),y=!1);for(var w=0;w<l.length;w++)s.push(l[w]);return this},n.default.prototype.endShape=function(x){if(n.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(x,h,c,m,g,p);else{if(s.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var w=x===a.CLOSE;w&&!g&&s.push(s[0]),this._renderer.endShape(x,s,h,c,m,g,p),y=!(g=m=c=h=!1),w&&s.pop()}return this},n.default.prototype.quadraticVertex=function(){for(var x,w=arguments.length,j=new Array(w),E=0;E<w;E++)j[E]=arguments[E];if(n.default._validateParameters("quadraticVertex",j),this._renderer.isP3D)(x=this._renderer).quadraticVertex.apply(x,j);else{if(this._contourInited)return(x={}).x=j[0],x.y=j[1],x.x3=j[2],x.y3=j[3],x.type=a.QUADRATIC,this._contourVertices.push(x),this;if(0<s.length){m=!0;for(var T=[],A=0;A<j.length;A++)T[A]=j[A];T.isVert=!1,(g?l:s).push(T)}else n.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},n.default.prototype.vertex=function(x,w,j,E,T){var A;return this._renderer.isP3D?(A=this._renderer).vertex.apply(A,arguments):((A=[]).isVert=!0,A[0]=x,A[1]=w,A[2]=0,A[3]=0,A[4]=0,A[5]=this._renderer._getFill(),A[6]=this._renderer._getStroke(),j&&(A.moveTo=j),(g?(l.length===0&&(A.moveTo=!0),l):s).push(A)),this},n.default.prototype.normal=function(x,w,j){var E;return this._assert3d("normal"),n.default._validateParameters("normal",arguments),(E=this._renderer).normal.apply(E,arguments),this},n.default);d.default=_},{"../constants":256,"../main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],278:[function(e,u,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(p)}function i(p){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(s){return o(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":o(s)})(p)}var n,a,f;e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p,s){window.setTimeout(p,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(n=Object.keys,e=Object.defineProperty,a=typeof Symbol=="function"&&i(Symbol())==="symbol",f=Object.prototype.propertyIsEnumerable,e(Object,"assign",{value:function(p,s){if(p==null)throw new TypeError("target must be an object");for(var l,c,h,m=Object(p),g=1;g<arguments.length;++g)for(l=Object(arguments[g]),h=n(l),a&&Object.getOwnPropertySymbols&&h.push.apply(h,Object.getOwnPropertySymbols(l).filter(function(y){return function(_){return f.call(y,_)}}(l))),c=0;c<h.length;++c)m[h[c]]=l[h[c]];return m},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":230}],279:[function(e,u,d){e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("./main"))&&e.__esModule?e:{default:e},e.default.prototype.noLoop=function(){this._loop=!1},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},e.default.prototype.pop=function(){var o=this._styles.pop();o?(this._renderer.pop(o.renderer),Object.assign(this,o.props)):console.warn("pop() was called without matching push()")},e.default.prototype.redraw=function(o){if(!this._inUserDraw&&this._setupDone){var i=parseInt(o),n=((isNaN(i)||i<1)&&(i=1),this._isGlobal?window:this);if(typeof n.draw=="function"){n.setup===void 0&&n.scale(n._pixelDensity,n._pixelDensity);for(var a=function(p){p.call(n)},f=0;f<i;f++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(a),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(a)}}}},e=e.default,d.default=e},{"./main":267,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":172,"core-js/modules/web.dom-collections.for-each":229}],280:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("./main"))&&e.__esModule?e:{default:e};function i(n){return function(a){if(Array.isArray(a)){for(var f=0,p=new Array(a.length);f<a.length;f++)p[f]=a[f];return p}}(n)||function(a){if(Symbol.iterator in Object(a)||Object.prototype.toString.call(a)==="[object Arguments]")return Array.from(a)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.applyMatrix=function(){var n=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||n?(n=this._renderer).applyMatrix.apply(n,i(arguments[0])):(n=this._renderer).applyMatrix.apply(n,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(n,a){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(n),a),this},o.default.prototype.rotateX=function(n){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(n)),this},o.default.prototype.rotateY=function(n){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(n)),this},o.default.prototype.rotateZ=function(n){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(n)),this},o.default.prototype.scale=function(n,a,f){var p;return o.default._validateParameters("scale",arguments),n instanceof o.default.Vector?(n=(p=n).x,a=p.y,f=p.z):n instanceof Array&&(n=(p=n)[0],a=p[1],f=p[2]||1),isNaN(a)?a=f=n:isNaN(f)&&(f=1),this._renderer.scale.call(this._renderer,n,a,f),this},o.default.prototype.shearX=function(n){return o.default._validateParameters("shearX",arguments),n=this._toRadians(n),this._renderer.applyMatrix(1,0,Math.tan(n),1,0,0),this},o.default.prototype.shearY=function(n){return o.default._validateParameters("shearY",arguments),n=this._toRadians(n),this._renderer.applyMatrix(1,Math.tan(n),0,1,0,0),this},o.default.prototype.translate=function(n,a,f){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(n,a,f):this._renderer.translate(n,a),this},e=o.default,d.default=e},{"./main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230}],281:[function(e,u,d){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(f)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var i=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(f){return function(p){if(Array.isArray(p)){for(var s=0,l=new Array(p.length);s<p.length;s++)l[s]=p[s];return l}}(f)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(f){return(a=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(p){return o(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":o(p)})(f)}i.default.prototype.storeItem=function(f,p){typeof f!="string"&&console.log("The argument that you passed to storeItem() - ".concat(f," is not a string.")),f.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(f," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var s=a(p);switch(s){case"number":case"boolean":p=p.toString();break;case"object":p instanceof i.default.Color?s="p5.Color":p instanceof i.default.Vector&&(s="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(f,p),f="".concat(f,"p5TypeID"),localStorage.setItem(f,s)},i.default.prototype.getItem=function(f){var p=localStorage.getItem(f),s=localStorage.getItem("".concat(f,"p5TypeID"));if(s===void 0)console.log("Unable to determine type of item stored under ".concat(f,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(s){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,n(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,n(p))}return p},i.default.prototype.clearStorage=function(){localStorage.clear()},i.default.prototype.removeItem=function(f){typeof f!="string"&&console.log("The argument that you passed to removeItem() - ".concat(f," is not a string.")),localStorage.removeItem(f),localStorage.removeItem("".concat(f,"p5TypeID"))}},{"../core/main":267,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],282:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.createStringDict=function(i,n){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(i,n)},o.default.prototype.createNumberDict=function(i,n){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(i,n)},o.default.TypedDict=function(i,n){return i instanceof Object?this.data=i:(this.data={},this.data[i]=n),this},o.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},o.default.TypedDict.prototype.hasKey=function(i){return this.data.hasOwnProperty(i)},o.default.TypedDict.prototype.get=function(i){if(this.data.hasOwnProperty(i))return this.data[i];console.log("".concat(i," does not exist in this Dictionary"))},o.default.TypedDict.prototype.set=function(i,n){this._validate(n)?this.data[i]=n:console.log("Those values dont work for this dictionary type.")},o.default.TypedDict.prototype._addObj=function(i){for(var n in i)this.set(n,i[n])},o.default.TypedDict.prototype.create=function(i,n){i instanceof Object&&n===void 0?this._addObj(i):i!==void 0?this.set(i,n):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},o.default.TypedDict.prototype.clear=function(){this.data={}},o.default.TypedDict.prototype.remove=function(i){if(!this.data.hasOwnProperty(i))throw new Error("".concat(i," does not exist in this Dictionary"));delete this.data[i]},o.default.TypedDict.prototype.print=function(){for(var i in this.data)console.log("key:".concat(i," value:").concat(this.data[i]))},o.default.TypedDict.prototype.saveTable=function(i){var n,a="";for(n in this.data)a+="".concat(n,",").concat(this.data[n],`
`);var f=new Blob([a],{type:"text/csv"});o.default.prototype.downloadFile(f,i||"mycsv","csv")},o.default.TypedDict.prototype.saveJSON=function(i,n){o.default.prototype.saveJSON(this.data,i,n)},o.default.TypedDict.prototype._validate=function(i){return!0},o.default.StringDict=function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];o.default.TypedDict.apply(this,n)},o.default.StringDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.StringDict.prototype._validate=function(i){return typeof i=="string"},o.default.NumberDict=function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];o.default.TypedDict.apply(this,n)},o.default.NumberDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.NumberDict.prototype._validate=function(i){return typeof i=="number"},o.default.NumberDict.prototype.add=function(i,n){this.data.hasOwnProperty(i)?this.data[i]+=n:console.log("The key - ".concat(i," does not exist in this dictionary."))},o.default.NumberDict.prototype.sub=function(i,n){this.add(i,-n)},o.default.NumberDict.prototype.mult=function(i,n){this.data.hasOwnProperty(i)?this.data[i]*=n:console.log("The key - ".concat(i," does not exist in this dictionary."))},o.default.NumberDict.prototype.div=function(i,n){this.data.hasOwnProperty(i)?this.data[i]/=n:console.log("The key - ".concat(i," does not exist in this dictionary."))},o.default.NumberDict.prototype._valueTest=function(i){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var n,a=this.data[Object.keys(this.data)[0]];for(n in this.data)this.data[n]*i<a*i&&(a=this.data[n]);return a},o.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},o.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},o.default.NumberDict.prototype._keyTest=function(i){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var n=Object.keys(this.data)[0],a=1;a<Object.keys(this.data).length;a++)Object.keys(this.data)[a]*i<n*i&&(n=Object.keys(this.data)[a]);return n},o.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},o.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},e=o.default.TypedDict,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],283:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=(e=e("../core/main"))&&e.__esModule?e:{default:e};function n(s){return(n=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}function a(s,l,c){return(l._userNode||document.body).appendChild(s),c=new(c?i.default.MediaElement:i.default.Element)(s,l),l._elements.push(c),c}function f(s,y,c,h){var m=document.createElement(y),g=(typeof(c=c||"")=="string"&&(c=[c]),!0),y=!1,_=void 0;try{for(var x,w=c[Symbol.iterator]();!(g=(x=w.next()).done);g=!0){var j=x.value,E=document.createElement("source");E.setAttribute("src",j),m.appendChild(E)}}catch(A){y=!0,_=A}finally{try{g||w.return==null||w.return()}finally{if(y)throw _}}typeof h=="function"&&m.addEventListener("canplaythrough",function A(){h(),m.removeEventListener("canplaythrough",A)});var T=a(m,s,!0);return T.loadedmetadata=!1,m.addEventListener("loadedmetadata",function(){T.width=m.videoWidth,T.height=m.videoHeight,T.elt.width===0&&(T.elt.width=m.videoWidth),T.elt.height===0&&(T.elt.height=m.videoHeight),T.presetPlaybackRate&&(T.elt.playbackRate=T.presetPlaybackRate,delete T.presetPlaybackRate),T.loadedmetadata=!0}),T}i.default.prototype.select=function(s,l){return i.default._validateParameters("select",arguments),l=this._getContainer(l).querySelector(s),l?this._wrapElement(l):null},i.default.prototype.selectAll=function(s,l){i.default._validateParameters("selectAll",arguments);var c=[],h=this._getContainer(l).querySelectorAll(s);if(h)for(var m=0;m<h.length;m++){var g=this._wrapElement(h[m]);c.push(g)}return c},i.default.prototype._getContainer=function(s){var l=document;return typeof s=="string"?l=document.querySelector(s)||document:s instanceof i.default.Element?l=s.elt:s instanceof HTMLElement&&(l=s),l},i.default.prototype._wrapElement=function(s){var l,c=Array.prototype.slice.call(s.children);return s.tagName==="INPUT"&&s.type==="checkbox"?((l=new i.default.Element(s,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!!arguments[0],this)},l):s.tagName==="VIDEO"||s.tagName==="AUDIO"?new i.default.MediaElement(s,this):s.tagName==="SELECT"?this.createSelect(new i.default.Element(s,this)):0<c.length&&c.every(function(h){return h.tagName==="INPUT"||h.tagName==="LABEL"})?this.createRadio(new i.default.Element(s,this)):new i.default.Element(s,this)},i.default.prototype.removeElements=function(s){i.default._validateParameters("removeElements",arguments),this._elements.filter(function(l){return!(l.elt instanceof HTMLCanvasElement)}).map(function(l){return l.remove()})},i.default.Element.prototype.changed=function(s){return i.default.Element._adjustListener("change",s,this),this},i.default.Element.prototype.input=function(s){return i.default.Element._adjustListener("input",s,this),this},i.default.prototype.createDiv=function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("div");return l.innerHTML=s,a(l,this)},i.default.prototype.createP=function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("p");return l.innerHTML=s,a(l,this)},i.default.prototype.createSpan=function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=document.createElement("span");return l.innerHTML=s,a(l,this)},i.default.prototype.createImg=function(){i.default._validateParameters("createImg",arguments);var s,l=document.createElement("img"),c=arguments;return 1<c.length&&typeof c[1]=="string"&&(l.alt=c[1]),2<c.length&&typeof c[2]=="string"&&(l.crossOrigin=c[2]),l.src=c[0],s=a(l,this),l.addEventListener("load",function(){s.width=l.offsetWidth||l.width,s.height=l.offsetHeight||l.height;var h=c[c.length-1];typeof h=="function"&&h(s)}),s},i.default.prototype.createA=function(s,l,c){i.default._validateParameters("createA",arguments);var h=document.createElement("a");return h.href=s,h.innerHTML=l,c&&(h.target=c),a(h,this)},i.default.prototype.createSlider=function(s,l,c,h){i.default._validateParameters("createSlider",arguments);var m=document.createElement("input");return m.type="range",m.min=s,m.max=l,h===0?m.step=1e-18:h&&(m.step=h),typeof c=="number"&&(m.value=c),a(m,this)},i.default.prototype.createButton=function(s,l){i.default._validateParameters("createButton",arguments);var c=document.createElement("button");return c.innerHTML=s,l&&(c.value=l),a(c,this)},i.default.prototype.createCheckbox=function(){i.default._validateParameters("createCheckbox",arguments);var s=document.createElement("div"),l=document.createElement("input"),c=(l.type="checkbox",document.createElement("label")),h=(c.appendChild(l),s.appendChild(c),a(s,this));return h.checked=function(){var m=h.elt.firstElementChild.getElementsByTagName("input")[0];if(m){if(arguments.length===0)return m.checked;m.checked=!!arguments[0]}return h},this.value=function(m){return h.value=m,this},arguments[0]&&(h.value(arguments[0]),(s=document.createElement("span")).innerHTML=arguments[0],c.appendChild(s)),arguments[1]&&(l.checked=!0),h},i.default.prototype.createSelect=function(){i.default._validateParameters("createSelect",arguments);var s,l,c=arguments[0];return c instanceof i.default.Element&&c.elt instanceof HTMLSelectElement?this.elt=(s=c).elt:c instanceof HTMLSelectElement?(s=a(c,this),this.elt=c):(l=document.createElement("select"),c&&typeof c=="boolean"&&l.setAttribute("multiple","true"),s=a(l,this),this.elt=l),s.option=function(h,m){var g;if(h!==void 0){for(var y,_=0;_<this.elt.length;_+=1)if(this.elt[_].textContent===h){g=_;break}g!==void 0?m===!1?this.elt.remove(g):this.elt[g].value=m:((y=document.createElement("option")).textContent=h,y.value=m===void 0?h:m,this.elt.appendChild(y),this._pInst._elements.push(y))}},s.selected=function(h){if(h!==void 0){for(var m=0;m<this.elt.length;m+=1)this.elt[m].value.toString()===h.toString()&&(this.elt.selectedIndex=m);return this}if(this.elt.getAttribute("multiple")){var g=[],y=!0,_=!1,x=void 0;try{for(var w,j=this.elt.selectedOptions[Symbol.iterator]();!(y=(w=j.next()).done);y=!0){var E=w.value;g.push(E.value)}}catch(T){_=!0,x=T}finally{try{y||j.return==null||j.return()}finally{if(_)throw x}}return g}return this.elt.value},s.disable=function(h){if(typeof h=="string")for(var m=0;m<this.elt.length;m++)this.elt[m].value.toString()===h&&(this.elt[m].disabled=!0,this.elt[m].selected=!1);else this.elt.disabled=!0;return this},s},i.default.prototype.createRadio=function(){function s(y){return y instanceof HTMLInputElement&&y.type==="radio"}function l(y){return y instanceof HTMLLabelElement}var c,h,m,g=arguments[0];return g instanceof i.default.Element&&(g.elt instanceof HTMLDivElement||g.elt instanceof HTMLSpanElement)?(c=g,this.elt=g.elt):g instanceof HTMLDivElement||g instanceof HTMLSpanElement?(c=a(g,this),h=this.elt=g,typeof arguments[1]=="string"&&(m=arguments[1])):(typeof g=="string"&&(m=g),h=document.createElement("div"),c=a(h,this),this.elt=h),c._name=m||"radioOption",c._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(y){return s(y)||l(y)&&s(y.firstElementChild)}).map(function(y){return s(y)?y:y.firstElementChild})},c.option=function(y,_){var x,w,j,E=!0,T=!1,A=void 0;try{for(var R,P=c._getOptionsArray()[Symbol.iterator]();!(E=(R=P.next()).done);E=!0){var N=R.value;if(N.value===y){x=N;break}}}catch(O){T=!0,A=O}finally{try{E||P.return==null||P.return()}finally{if(T)throw A}}return x===void 0&&((x=document.createElement("input")).setAttribute("type","radio"),x.setAttribute("value",y)),x.setAttribute("name",c._name),l(x.parentElement)?w=x.parentElement:(w=document.createElement("label")).insertAdjacentElement("afterbegin",x),w.lastElementChild instanceof HTMLSpanElement?j=w.lastElementChild:(j=document.createElement("span"),x.insertAdjacentElement("afterend",j)),j.innerHTML=_===void 0?y:_,this.elt.appendChild(w),x},c.remove=function(y){var _=!0,x=!1,w=void 0;try{for(var j,E=c._getOptionsArray()[Symbol.iterator]();!(_=(j=E.next()).done);_=!0){var T=j.value;if(T.value===y)return void(l(T.parentElement)?T.parentElement:T).remove()}}catch(A){x=!0,w=A}finally{try{_||E.return==null||E.return()}finally{if(x)throw w}}},c.value=function(){var y="",_=!0,x=!1,w=void 0;try{for(var j,E=c._getOptionsArray()[Symbol.iterator]();!(_=(j=E.next()).done);_=!0){var T=j.value;if(T.checked){y=T.value;break}}}catch(A){x=!0,w=A}finally{try{_||E.return==null||E.return()}finally{if(x)throw w}}return y},c.selected=function(y){var _=null;if(y===void 0){var x=!0,w=!1,j=void 0;try{for(var E,T=c._getOptionsArray()[Symbol.iterator]();!(x=(E=T.next()).done);x=!0){var A=E.value;if(A.checked){_=A;break}}}catch(D){w=!0,j=D}finally{try{x||T.return==null||T.return()}finally{if(w)throw j}}}else{c._getOptionsArray().forEach(function(Y){Y.checked=!1,Y.removeAttribute("checked")});var R=!0,w=!1,j=void 0;try{for(var P,N=c._getOptionsArray()[Symbol.iterator]();!(R=(P=N.next()).done);R=!0){var O=P.value;O.value===y&&(O.setAttribute("checked",!0),O.checked=!0,_=O)}}catch(Y){w=!0,j=Y}finally{try{R||N.return==null||N.return()}finally{if(w)throw j}}}return _},c.disable=function(){var y=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],_=!0,x=!1,w=void 0;try{for(var j,E=c._getOptionsArray()[Symbol.iterator]();!(_=(j=E.next()).done);_=!0)j.value.setAttribute("disabled",y)}catch(T){x=!0,w=T}finally{try{_||E.return==null||E.return()}finally{if(x)throw w}}},c},i.default.prototype.createColorPicker=function(s){i.default._validateParameters("createColorPicker",arguments);var l=document.createElement("input");return l.type="color",s?s instanceof i.default.Color?l.value=s.toString("#rrggbb"):(i.default.prototype._colorMode="rgb",i.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},l.value=i.default.prototype.color(s).toString("#rrggbb")):l.value="#000000",(l=a(l,this)).color=function(){return s&&(s.mode&&(i.default.prototype._colorMode=s.mode),s.maxes&&(i.default.prototype._colorMaxes=s.maxes)),i.default.prototype.color(this.elt.value)},l},i.default.prototype.createInput=function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",c=(i.default._validateParameters("createInput",arguments),document.createElement("input"));return c.setAttribute("value",s),c.setAttribute("type",l),a(c,this)},i.default.prototype.createFileInput=function(s){var l,c=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(i.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(l=document.createElement("input")).setAttribute("type","file"),c&&l.setAttribute("multiple",!0),l.addEventListener("change",function(h){var m=!0,g=!1,y=void 0;try{for(var _,x=h.target.files[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var w=_.value;i.default.File._load(w,s)}}catch(j){g=!0,y=j}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}},!1),a(l,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},i.default.prototype.createVideo=function(s,l){return i.default._validateParameters("createVideo",arguments),f(this,"video",s,l)},i.default.prototype.createAudio=function(s,l){return i.default._validateParameters("createAudio",arguments),f(this,"audio",s,l)},i.default.prototype.VIDEO="video",i.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(s){var l=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return l?new Promise(function(c,h){l.call(navigator,s,c,h)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),i.default.prototype.createCapture=function(){if(i.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var s,l=!0,c=!0,h=!0,m=!1,g=void 0;try{for(var y,_=arguments[Symbol.iterator]();!(h=(y=_.next()).done);h=!0){var x=y.value;x===i.default.prototype.VIDEO?c=!1:x===i.default.prototype.AUDIO?l=!1:n(x)==="object"?w=x:typeof x=="function"&&(s=x)}}catch(T){m=!0,g=T}finally{try{h||_.return==null||_.return()}finally{if(m)throw g}}var w=w||{video:l,audio:c},j=document.createElement("video"),E=(j.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(w).then(function(T){try{"srcObject"in j?j.srcObject=T:j.src=window.URL.createObjectURL(T)}catch{j.src=T}},console.log),a(j,this,!0));return E.loadedmetadata=!1,j.addEventListener("loadedmetadata",function(){j.play(),j.width?(E.width=j.width,E.height=j.height):(E.width=E.elt.width=j.videoWidth,E.height=E.elt.height=j.videoHeight),E.loadedmetadata=!0,s&&s(j.srcObject)}),E},i.default.prototype.createElement=function(s,l){return i.default._validateParameters("createElement",arguments),s=document.createElement(s),l!==void 0&&(s.innerHTML=l),a(s,this)},i.default.Element.prototype.addClass=function(s){return this.elt.className?this.hasClass(s)||(this.elt.className=this.elt.className+" "+s):this.elt.className=s,this},i.default.Element.prototype.removeClass=function(s){return this.elt.classList.remove(s),this},i.default.Element.prototype.hasClass=function(s){return this.elt.classList.contains(s)},i.default.Element.prototype.toggleClass=function(s){return this.elt.classList.contains(s)?this.elt.classList.remove(s):this.elt.classList.add(s),this},i.default.Element.prototype.child=function(s){return s===void 0?this.elt.childNodes:(typeof s=="string"?(s[0]==="#"&&(s=s.substring(1)),s=document.getElementById(s)):s instanceof i.default.Element&&(s=s.elt),s instanceof HTMLElement&&this.elt.appendChild(s),this)},i.default.Element.prototype.center=function(s){var l=this.elt.style.display,c=this.elt.style.display==="none",h=this.parent().style.display==="none",m={x:this.elt.offsetLeft,y:this.elt.offsetTop},g=(c&&this.show(),h&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),y=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return s==="both"||s===void 0?this.position(g/2+this.parent().offsetLeft,y/2+this.parent().offsetTop):s==="horizontal"?this.position(g/2+this.parent().offsetLeft,m.y):s==="vertical"&&this.position(m.x,y/2+this.parent().offsetTop),this.style("display",l),c&&this.hide(),h&&this.parent().hide(),this},i.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},i.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=arguments[2]!=="static"&&arguments[2]!=="fixed"&&arguments[2]!=="relative"&&arguments[2]!=="sticky"&&arguments[2]!=="initial"&&arguments[2]!=="inherit"?"absolute":arguments[2],this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},i.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var s="";return this.elt.style.transform&&(s=(s=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=s,this},i.default.Element.prototype._rotate=function(){var s="";return this.elt.style.transform&&(s=(s=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=s,this},i.default.Element.prototype.style=function(s,l){if((l=l instanceof i.default.Color?"rgba("+l.levels[0]+","+l.levels[1]+","+l.levels[2]+","+l.levels[3]/255+")":l)===void 0){if(s.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(s);for(var c=s.split(";"),h=0;h<c.length;h++){var m=c[h].split(":");m[0]&&m[1]&&(this.elt.style[m[0].trim()]=m[1].trim())}}else this.elt.style[s]=l,s!=="width"&&s!=="height"&&s!=="left"&&s!=="top"||(l=window.getComputedStyle(this.elt).getPropertyValue(s).replace(/[^\d.]/g,""),this[s]=Math.round(parseFloat(l,10)));return this},i.default.Element.prototype.attribute=function(s,l){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return l===void 0?this.elt.getAttribute(s):(this.elt.setAttribute(s,l),this);if(l===void 0)return this.elt.firstChild.getAttribute(s);for(var c=0;c<this.elt.childNodes.length;c++)this.elt.childNodes[c].setAttribute(s,l)},i.default.Element.prototype.removeAttribute=function(s){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var l=0;l<this.elt.childNodes.length;l++)this.elt.childNodes[l].removeAttribute(s);return this.elt.removeAttribute(s),this},i.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},i.default.Element.prototype.show=function(){return this.elt.style.display="block",this},i.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},i.default.Element.prototype.size=function(s,l){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var c=s,h=l,m=i.default.prototype.AUTO;if(c!==m||h!==m){if(c===m?c=l*this.width/this.height:h===m&&(h=s*this.height/this.width),this.elt instanceof HTMLCanvasElement){var g,y={},_=this.elt.getContext("2d");for(g in _)y[g]=_[g];for(g in this.elt.setAttribute("width",c*this._pInst._pixelDensity),this.elt.setAttribute("height",h*this._pInst._pixelDensity),this.elt.style.width=c+"px",this.elt.style.height=h+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),y)this.elt.getContext("2d")[g]=y[g]}else this.elt.style.width=c+"px",this.elt.style.height=h+"px",this.elt.width=c,this.elt.height=h;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},i.default.Element.prototype.remove=function(){this instanceof i.default.MediaElement&&(this.stop(),(l=this.elt.srcObject)!==null&&l.getTracks().forEach(function(c){c.stop()}));var s,l=this._pInst._elements.indexOf(this);for(s in l!==-1&&this._pInst._elements.splice(l,1),this._events)this.elt.removeEventListener(s,this._events[s]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},i.default.Element.prototype.drop=function(s,l){var c;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",c=function(h){h.preventDefault()}),this.elt.addEventListener("dragleave",c)),i.default.Element._attachListener("drop",function(h){h.preventDefault(),typeof l=="function"&&l.call(this,h);for(var m=h.dataTransfer.files,g=0;g<m.length;g++){var y=m[g];i.default.File._load(y,s)}},this)):console.log("The File APIs are not fully supported in this browser."),this},i.default.MediaElement=function(s,l){i.default.Element.call(this,s,l);var c=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(c,"src",{get:function(){var h=c.elt.children[0].src,m=c.elt.src===window.location.href?"":c.elt.src;return h===window.location.href?m:h},set:function(h){for(var m=0;m<c.elt.children.length;m++)c.elt.removeChild(c.elt.children[m]);var g=document.createElement("source");g.src=h,s.appendChild(g),c.elt.src=h,c.modified=!0}}),c._onended=function(){},c.elt.onended=function(){c._onended(c)}},i.default.MediaElement.prototype=Object.create(i.default.Element.prototype),i.default.MediaElement.prototype.play=function(){var s,l=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(s=this.elt.play())&&s.catch&&s.catch(function(c){c.name==="NotAllowedError"?i.default._friendlyAutoplayError(l.src):console.error("Media play method encountered an unexpected error",c)}),this},i.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},i.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},i.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},i.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},i.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var s=this,l=setTimeout(function(){return i.default._friendlyAutoplayError(s.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(l)},{passive:!0,once:!0})},i.default.MediaElement.prototype.autoplay=function(s){var l=this,c=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",s),s&&!c&&(s=function(){return l._setupAutoplayFailDetection()},this.elt.readyState===4?s():this.elt.addEventListener("canplay",s,{passive:!0,once:!0})),this},i.default.MediaElement.prototype.volume=function(s){if(s===void 0)return this.elt.volume;this.elt.volume=s},i.default.MediaElement.prototype.speed=function(s){if(s===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=s:this.presetPlaybackRate=s},i.default.MediaElement.prototype.time=function(s){return s===void 0?this.elt.currentTime:(this.elt.currentTime=s,this)},i.default.MediaElement.prototype.duration=function(){return this.elt.duration},i.default.MediaElement.prototype.pixels=[],i.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},i.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),i.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},i.default.MediaElement.prototype.updatePixels=function(s,l,c,h){return this.loadedmetadata&&(this._ensureCanvas(),i.default.Renderer2D.prototype.updatePixels.call(this,s,l,c,h)),this.setModified(!0),this},i.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),i.default.Renderer2D.prototype.get.apply(this,arguments)},i.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),i.default.Renderer2D.prototype._getPixel.apply(this,arguments)},i.default.MediaElement.prototype.set=function(s,l,c){this.loadedmetadata&&(this._ensureCanvas(),i.default.Renderer2D.prototype.set.call(this,s,l,c),this.setModified(!0))},i.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),i.default.prototype.copy.apply(this,arguments)},i.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),i.default.Image.prototype.mask.apply(this,arguments)},i.default.MediaElement.prototype.isModified=function(){return this._modified},i.default.MediaElement.prototype.setModified=function(s){this._modified=s},i.default.MediaElement.prototype.onended=function(s){return this._onended=s,this},i.default.MediaElement.prototype.connect=function(s){var l,c;if(typeof i.default.prototype.getAudioContext=="function")l=i.default.prototype.getAudioContext(),c=i.default.soundOut.input;else try{c=(l=s.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=l.createMediaElementSource(this.elt),this.audioSourceNode.connect(c)),s?s.input?this.audioSourceNode.connect(s.input):this.audioSourceNode.connect(s):this.audioSourceNode.connect(c)},i.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},i.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},i.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};function p(s,l,c,h){this.callback=s,this.time=l,this.id=c,this.val=h}i.default.MediaElement.prototype.addCue=function(s,m,c){var h=this._cueIDCounter++,m=new p(m,s,h,c);return this._cues.push(m),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),h},i.default.MediaElement.prototype.removeCue=function(s){for(var l=0;l<this._cues.length;l++)this._cues[l].id===s&&(console.log(s),this._cues.splice(l,1));this._cues.length===0&&(this.elt.ontimeupdate=null)},i.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},i.default.MediaElement.prototype._onTimeUpdate=function(){for(var s=this.time(),l=0;l<this._cues.length;l++){var c=this._cues[l].time,h=this._cues[l].val;this._prevTime<c&&c<=s&&this._cues[l].callback(h)}this._prevTime=s},i.default.File=function(s,l){this.file=s,this._pInst=l,l=s.type.split("/"),this.type=l[0],this.subtype=l[1],this.name=s.name,this.size=s.size,this.data=void 0},i.default.File._createLoader=function(s,l){var c=new FileReader;return c.onload=function(h){var m,g=new i.default.File(s);g.file.type==="application/json"?g.data=JSON.parse(h.target.result):g.file.type==="text/xml"?(m=new DOMParser().parseFromString(h.target.result,"text/xml"),g.data=new i.default.XML(m.documentElement)):g.data=h.target.result,l(g)},c},i.default.File._load=function(s,l){var c;/^text\//.test(s.type)||s.type==="application/json"?i.default.File._createLoader(s,l).readAsText(s):/^(video|audio)\//.test(s.type)?((c=new i.default.File(s)).data=URL.createObjectURL(s),l(c)):i.default.File._createLoader(s,l).readAsDataURL(s)},e=i.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.every":151,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":229,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232}],284:[function(e,u,d){function o(x){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(x)}function i(x){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(w){return o(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":o(w)})(x)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(_=e("../core/main"))&&_.__esModule?_:{default:_},a=function(x){if(x&&x.__esModule)return x;if(x===null||i(x)!=="object"&&typeof x!="function")return{default:x};var w=f();if(w&&w.has(x))return w.get(x);var j,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in x){var A;Object.prototype.hasOwnProperty.call(x,j)&&((A=T?Object.getOwnPropertyDescriptor(x,j):null)&&(A.get||A.set)?Object.defineProperty(E,j,A):E[j]=x[j])}return E.default=x,w&&w.set(x,E),E}(e("../core/constants"));function f(){var x;return typeof WeakMap!="function"?null:(x=new WeakMap,f=function(){return x},x)}n.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",n.default.prototype.accelerationX=0,n.default.prototype.accelerationY=0,n.default.prototype.accelerationZ=0,n.default.prototype.pAccelerationX=0,n.default.prototype.pAccelerationY=0,n.default.prototype.pAccelerationZ=0,n.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},n.default.prototype.rotationX=0,n.default.prototype.rotationY=0,n.default.prototype.rotationZ=0,n.default.prototype.pRotationX=0,n.default.prototype.pRotationY=0;var p=n.default.prototype.pRotationZ=0,s=0,l=0,c="clockwise",h="clockwise",m="clockwise",g=(n.default.prototype.pRotateDirectionX=void 0,n.default.prototype.pRotateDirectionY=void 0,n.default.prototype.pRotateDirectionZ=void 0,n.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},n.default.prototype.turnAxis=void 0,.5),y=30,_=(n.default.prototype.setMoveThreshold=function(x){n.default._validateParameters("setMoveThreshold",arguments),g=x},n.default.prototype.setShakeThreshold=function(x){n.default._validateParameters("setShakeThreshold",arguments),y=x},n.default.prototype._ondeviceorientation=function(x){this._updatePRotations(),this._angleMode===a.radians&&(x.beta=x.beta*(_PI/180),x.gamma=x.gamma*(_PI/180),x.alpha=x.alpha*(_PI/180)),this._setProperty("rotationX",x.beta),this._setProperty("rotationY",x.gamma),this._setProperty("rotationZ",x.alpha),this._handleMotion()},n.default.prototype._ondevicemotion=function(x){this._updatePAccelerations(),this._setProperty("accelerationX",2*x.acceleration.x),this._setProperty("accelerationY",2*x.acceleration.y),this._setProperty("accelerationZ",2*x.acceleration.z),this._handleMotion()},n.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var x,w,j,E,T,A=this._isGlobal?window:this;typeof A.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>g||Math.abs(this.accelerationY-this.pAccelerationY)>g||Math.abs(this.accelerationZ-this.pAccelerationZ)>g)&&A.deviceMoved(),typeof A.deviceTurned=="function"&&(w=this.rotationX+180,x=this.pRotationX+180,j=p+180,0<w-x&&w-x<270||w-x<-270?c="clockwise":(w-x<0||270<w-x)&&(c="counter-clockwise"),c!==this.pRotateDirectionX&&(j=w),90<Math.abs(w-j)&&Math.abs(w-j)<270&&(j=w,this._setProperty("turnAxis","X"),A.deviceTurned()),this.pRotateDirectionX=c,p=j-180,x=this.rotationY+180,w=this.pRotationY+180,j=s+180,0<x-w&&x-w<270||x-w<-270?h="clockwise":(x-w<0||270<x-this.pRotationY)&&(h="counter-clockwise"),h!==this.pRotateDirectionY&&(j=x),90<Math.abs(x-j)&&Math.abs(x-j)<270&&(j=x,this._setProperty("turnAxis","Y"),A.deviceTurned()),this.pRotateDirectionY=h,s=j-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?m="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(m="counter-clockwise"),m!==this.pRotateDirectionZ&&(l=this.rotationZ),90<Math.abs(this.rotationZ-l)&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),A.deviceTurned()),this.pRotateDirectionZ=m,this._setProperty("turnAxis",void 0)),typeof A.deviceShaken=="function"&&(this.pAccelerationX!==null&&(E=Math.abs(this.accelerationX-this.pAccelerationX),T=Math.abs(this.accelerationY-this.pAccelerationY)),y<E+T&&A.deviceShaken())},n.default);d.default=_},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],285:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(i){var n;this._downKeys[i.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",i.which),this._downKeys[i.which]=!0,this._setProperty("key",i.key||String.fromCharCode(i.which)||i.which),typeof(n=this._isGlobal?window:this).keyPressed!="function"||i.charCode||n.keyPressed(i)===!1&&i.preventDefault())},o.default.prototype._onkeyup=function(i){this._downKeys[i.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",i.key||String.fromCharCode(i.which)||i.which),this._setProperty("keyCode",i.which);var n=this._isGlobal?window:this;typeof n.keyReleased=="function"&&n.keyReleased(i)===!1&&i.preventDefault()},o.default.prototype._onkeypress=function(i){var n;i.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",i.which),this._setProperty("key",i.key||String.fromCharCode(i.which)||i.which),typeof(n=this._isGlobal?window:this).keyTyped=="function"&&n.keyTyped(i)===!1&&i.preventDefault())},o.default.prototype._onblur=function(i){this._downKeys={}},o.default.prototype.keyIsDown=function(i){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[i]||!1},o.default.prototype._areDownKeys=function(){for(var i in this._downKeys)if(this._downKeys.hasOwnProperty(i)&&this._downKeys[i]===!0)return!0;return!1},e=o.default,d.default=e},{"../core/main":267}],286:[function(e,u,d){function o(p){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(p)}function i(p){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(s){return o(s)}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":o(s)})(p)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(n=e("../core/main"))&&n.__esModule?n:{default:n},a=function(p){if(p&&p.__esModule)return p;if(p===null||i(p)!=="object"&&typeof p!="function")return{default:p};var s=f();if(s&&s.has(p))return s.get(p);var l,c={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(l in p){var m;Object.prototype.hasOwnProperty.call(p,l)&&((m=h?Object.getOwnPropertyDescriptor(p,l):null)&&(m.get||m.set)?Object.defineProperty(c,l,m):c[l]=p[l])}return c.default=p,s&&s.set(p,c),c}(e("../core/constants"));function f(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,f=function(){return p},p)}n.default.prototype.movedX=0,n.default.prototype.movedY=0,n.default.prototype._hasMouseInteracted=!1,n.default.prototype.mouseX=0,n.default.prototype.mouseY=0,n.default.prototype.pmouseX=0,n.default.prototype.pmouseY=0,n.default.prototype.winMouseX=0,n.default.prototype.winMouseY=0,n.default.prototype.pwinMouseX=0,n.default.prototype.pwinMouseY=0,n.default.prototype.mouseButton=0,n.default.prototype.mouseIsPressed=!1,n.default.prototype._updateNextMouseCoords=function(p){var s,l,c,h,m;this._curElement!==null&&(!p.touches||0<p.touches.length)&&(s=this._curElement.elt,l=this.width,c=this.height,(h=p)&&!h.clientX&&(h.touches?h=h.touches[0]:h.changedTouches&&(h=h.changedTouches[0])),m=s.getBoundingClientRect(),l=s.scrollWidth/l||1,s=s.scrollHeight/c||1,c={x:(h.clientX-m.left)/l,y:(h.clientY-m.top)/s,winX:h.clientX,winY:h.clientY,id:h.identifier},this._setProperty("movedX",p.movementX),this._setProperty("movedY",p.movementY),this._setProperty("mouseX",c.x),this._setProperty("mouseY",c.y),this._setProperty("winMouseX",c.winX),this._setProperty("winMouseY",c.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},n.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},n.default.prototype._setMouseButton=function(p){p.button===1?this._setProperty("mouseButton",a.CENTER):p.button===2?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},n.default.prototype._onmousemove=function(p){var s=this._isGlobal?window:this;this._updateNextMouseCoords(p),this.mouseIsPressed?typeof s.mouseDragged=="function"?s.mouseDragged(p)===!1&&p.preventDefault():typeof s.touchMoved=="function"&&s.touchMoved(p)===!1&&p.preventDefault():typeof s.mouseMoved=="function"&&s.mouseMoved(p)===!1&&p.preventDefault()},n.default.prototype._onmousedown=function(p){var s=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(p),this._updateNextMouseCoords(p),typeof s.mousePressed=="function"?s.mousePressed(p)===!1&&p.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof s.touchStarted=="function"&&s.touchStarted(p)===!1&&p.preventDefault()},n.default.prototype._onmouseup=function(p){var s=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof s.mouseReleased=="function"?s.mouseReleased(p)===!1&&p.preventDefault():typeof s.touchEnded=="function"&&s.touchEnded(p)===!1&&p.preventDefault()},n.default.prototype._ondragend=n.default.prototype._onmouseup,n.default.prototype._ondragover=n.default.prototype._onmousemove,n.default.prototype._onclick=function(p){var s=this._isGlobal?window:this;typeof s.mouseClicked=="function"&&s.mouseClicked(p)===!1&&p.preventDefault()},n.default.prototype._ondblclick=function(p){var s=this._isGlobal?window:this;typeof s.doubleClicked=="function"&&s.doubleClicked(p)===!1&&p.preventDefault()},n.default.prototype._mouseWheelDeltaY=0,n.default.prototype._pmouseWheelDeltaY=0,n.default.prototype._onwheel=function(p){var s=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",p.deltaY),typeof s.mouseWheel=="function"&&(p.delta=p.deltaY,s.mouseWheel(p)===!1&&p.preventDefault())},n.default.prototype.requestPointerLock=function(){var p=this._curElement.elt;return p.requestPointerLock=p.requestPointerLock||p.mozRequestPointerLock,p.requestPointerLock?(p.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},n.default.prototype.exitPointerLock=function(){document.exitPointerLock()},e=n.default,d.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],287:[function(e,u,d){e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(o){if(this._curElement!==null){for(var i=[],n=0;n<o.touches.length;n++)i[n]=function(m,h,g,s){var l=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,c=m.getBoundingClientRect(),h=m.scrollWidth/h||1,m=m.scrollHeight/g||1,g=s.touches[l]||s.changedTouches[l];return{x:(g.clientX-c.left)/h,y:(g.clientY-c.top)/m,winX:g.clientX,winY:g.clientY,id:g.identifier}}(this._curElement.elt,this.width,this.height,o,n);this._setProperty("touches",i)}},e.default.prototype._ontouchstart=function(o){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(o),this._updateNextMouseCoords(o),this._updateMouseCoords(),typeof i.touchStarted=="function"?i.touchStarted(o)===!1&&o.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof i.mousePressed=="function"&&i.mousePressed(o)===!1&&o.preventDefault()},e.default.prototype._ontouchmove=function(o){var i=this._isGlobal?window:this;this._updateTouchCoords(o),this._updateNextMouseCoords(o),typeof i.touchMoved=="function"?i.touchMoved(o)===!1&&o.preventDefault():typeof i.mouseDragged=="function"&&i.mouseDragged(o)===!1&&o.preventDefault()},e.default.prototype._ontouchend=function(o){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(o),this._updateNextMouseCoords(o);var i=this._isGlobal?window:this;typeof i.touchEnded=="function"?i.touchEnded(o)===!1&&o.preventDefault():typeof i.mouseReleased=="function"&&i.mouseReleased(o)===!1&&o.preventDefault()},e=e.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],288:[function(e,u,d){e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o,i,n,a,f={};function p(s,l){for(var c,h,m,g,y,_,x,w,j,E,T=f._toPixels(s),A=s.width,R=s.height,P=A*R,N=new Int32Array(P),O=0;O<P;O++)N[O]=f._getARGB(T,O);var D,U,Y,H=new Int32Array(P),W=new Int32Array(P),X=new Int32Array(P),Z=new Int32Array(P),q=0,ee=3.5*l|0;if(o!==(ee=ee<1?1:ee<248?ee:248)){i=1+(o=ee)<<1,n=new Int32Array(i),a=new Array(i);for(var L,I,F=0;F<i;F++)a[F]=new Int32Array(256);for(var V=1,J=ee-1;V<ee;V++){n[ee+V]=n[J]=I=J*J;for(var le=a[ee+V],ce=a[J--],ue=0;ue<256;ue++)le[ue]=ce[ue]=I*ue}L=n[ee]=ee*ee,le=a[ee];for(var re=0;re<256;re++)le[re]=L*re}for(U=0;U<R;U++){for(D=0;D<A;D++){if(g=m=h=y=c=0,(_=D-o)<0)E=-_,_=0;else{if(A<=_)break;E=0}for(Y=E;Y<i&&!(A<=_);Y++){var de,be=N[_+q];y+=(de=a[Y])[(-16777216&be)>>>24],h+=de[(16711680&be)>>16],m+=de[(65280&be)>>8],g+=de[255&be],c+=n[Y],_++}H[x=q+D]=y/c,W[x]=h/c,X[x]=m/c,Z[x]=g/c}q+=A}for(j=(w=-o)*A,U=q=0;U<R;U++){for(D=0;D<A;D++){if(w<(g=m=h=y=c=0))E=x=-w,_=D;else{if(R<=w)break;E=0,x=w,_=D+j}for(Y=E;Y<i&&!(R<=x);Y++)y+=(de=a[Y])[H[_]],h+=de[W[_]],m+=de[X[_]],g+=de[Z[_]],c+=n[Y],x++,_+=A;N[D+q]=y/c<<24|h/c<<16|m/c<<8|g/c}q+=A,j+=A,w++}f._setPixels(T,N)}f._toPixels=function(s){var l,c;return s instanceof ImageData?s.data:s.getContext("2d")?s.getContext("2d").getImageData(0,0,s.width,s.height).data:s.getContext("webgl")?(c=(l=s.getContext("webgl")).drawingBufferWidth*l.drawingBufferHeight*4,c=new Uint8Array(c),l.readPixels(0,0,s.width,s.height,l.RGBA,l.UNSIGNED_BYTE,c),c):void 0},f._getARGB=function(s,l){return l*=4,s[3+l]<<24&4278190080|s[l]<<16&16711680|s[1+l]<<8&65280|255&s[2+l]},f._setPixels=function(s,l){for(var c,h=0,m=s.length;h<m;h++)s[0+(c=4*h)]=(16711680&l[h])>>>16,s[1+c]=(65280&l[h])>>>8,s[2+c]=255&l[h],s[3+c]=(4278190080&l[h])>>>24},f._toImageData=function(s){return s instanceof ImageData?s:s.getContext("2d").getImageData(0,0,s.width,s.height)},f._createImageData=function(s,l){return f._tmpCanvas=document.createElement("canvas"),f._tmpCtx=f._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(s,l)},f.apply=function(s,g,c){var h=s.getContext("2d"),m=h.getImageData(0,0,s.width,s.height),g=g(m,c);g instanceof ImageData?h.putImageData(g,0,0,0,0,s.width,s.height):h.putImageData(m,0,0,0,0,s.width,s.height)},f.threshold=function(s,l){for(var c=f._toPixels(s),h=(l===void 0&&(l=.5),Math.floor(255*l)),m=0;m<c.length;m+=4){var g=void 0,g=h<=.2126*c[m]+.7152*c[m+1]+.0722*c[m+2]?255:0;c[m]=c[m+1]=c[m+2]=g}},f.gray=function(s){for(var l=f._toPixels(s),c=0;c<l.length;c+=4){var h=l[c],m=l[c+1],g=l[c+2];l[c]=l[c+1]=l[c+2]=.2126*h+.7152*m+.0722*g}},f.opaque=function(s){for(var l=f._toPixels(s),c=0;c<l.length;c+=4)l[c+3]=255;return l},f.invert=function(s){for(var l=f._toPixels(s),c=0;c<l.length;c+=4)l[c]=255-l[c],l[c+1]=255-l[c+1],l[c+2]=255-l[c+2]},f.posterize=function(s,l){var c=f._toPixels(s);if(l<2||255<l)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var h=l-1,m=0;m<c.length;m+=4){var g=c[m],y=c[m+1],_=c[m+2];c[m]=255*(g*l>>8)/h,c[m+1]=255*(y*l>>8)/h,c[m+2]=255*(_*l>>8)/h}},f.dilate=function(s){for(var l,c,h,m,g,y,_,x,w,j=f._toPixels(s),E=0,T=j.length?j.length/4:0,A=new Int32Array(T);E<T;)for(c=(l=E)+s.width;E<c;)m=h=f._getARGB(j,E),(w=E-1)<l&&(w=E),c<=(x=E+1)&&(x=E),(g=E-s.width)<0&&(g=0),T<=(y=E+s.width)&&(y=E),g=f._getARGB(j,g),w=f._getARGB(j,w),y=f._getARGB(j,y),(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<(_=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(h=w,m=_),m<(_=77*((w=f._getARGB(j,x))>>16&255)+151*(w>>8&255)+28*(255&w))&&(h=w,m=_),m<(x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))&&(h=g,m=x),m<(w=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))&&(h=y,m=w),A[E++]=h;f._setPixels(j,A)},f.erode=function(s){for(var l,c,h,m,g,y,_,x,w,j=f._toPixels(s),E=0,T=j.length?j.length/4:0,A=new Int32Array(T);E<T;)for(c=(l=E)+s.width;E<c;)m=h=f._getARGB(j,E),(w=E-1)<l&&(w=E),c<=(x=E+1)&&(x=E),(g=E-s.width)<0&&(g=0),T<=(y=E+s.width)&&(y=E),g=f._getARGB(j,g),w=f._getARGB(j,w),y=f._getARGB(j,y),(_=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(h=w,m=_),(_=77*((w=f._getARGB(j,x))>>16&255)+151*(w>>8&255)+28*(255&w))<m&&(h=w,m=_),(x=77*(g>>16&255)+151*(g>>8&255)+28*(255&g))<m&&(h=g,m=x),(w=77*(y>>16&255)+151*(y>>8&255)+28*(255&y))<m&&(h=y,m=w),A[E++]=h;f._setPixels(j,A)},f.blur=function(s,l){p(s,l)},d.default=f},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],289:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=n(e("../core/main")),i=n(e("omggif"));function n(f){return f&&f.__esModule?f:{default:f}}function a(f){return function(p){if(Array.isArray(p)){for(var s=0,l=new Array(p.length);s<p.length;s++)l[s]=p[s];return l}}(f)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o.default.prototype.createImage=function(f,p){return o.default._validateParameters("createImage",arguments),new o.default.Image(f,p)},o.default.prototype.saveCanvas=function(){o.default._validateParameters("saveCanvas",arguments);var f,p,s,l,c=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(f=arguments[0],c.shift()):arguments[0]instanceof o.default.Element?(f=arguments[0].elt,c.shift()):f=this._curElement&&this._curElement.elt,1<=c.length&&(p=c[0]),s=(s=2<=c.length?c[1]:s)||o.default.prototype._checkFileExtension(p,s)[1]||"png"){default:l="image/png";break;case"jpeg":case"jpg":l="image/jpeg"}f.toBlob(function(h){o.default.prototype.downloadFile(h,p,s)},l)},o.default.prototype.encodeAndDownloadGif=function(f,p){for(var s=f.gifProperties,l=s.loopLimit,c=(l===1?l=null:l===null&&(l=0),new Uint8Array(f.width*f.height*s.numFrames)),h=[],m={},g=0;g<s.numFrames;g++){for(var y=new Set,_=s.frames[g].image.data,x=_.length,w=new Uint32Array(f.width*f.height),j=0,E=0;j<x;j+=4,E++){var T=_[j+0]<<16|_[j+1]<<8|_[j+2]<<0;y.add(T),w[E]=T}var A=a(y).sort().toString();m[A]===void 0?m[A]={freq:1,frames:[g]}:(m[A].freq+=1,m[A].frames.push(g)),h.push(w)}for(var N=[],R=Object.keys(m).sort(function(L,I){return m[I].freq-m[L].freq}),P=R[0].split(",").map(function(L){return parseInt(L)}),N=N.concat(m[P].frames),O=new Set(P),D=1;D<R.length;D++){var U=R[D].split(",").map(function(L){return parseInt(L)}).filter(function(L){return!O.has(L)});if(P.length+U.length<=256){for(var Y=0;Y<U.length;Y++)P.push(U[Y]),O.add(U[Y]);N=N.concat(m[R[D]].frames)}}N=new Set(N);for(var H={},W=0;W<P.length;W++)H[P[W]]||(H[P[W]]=W);for(var X=1;X<P.length;)X<<=1;P.length=X;for(var l={loop:l,palette:new Uint32Array(P)},Z=new i.default.GifWriter(c,f.width,f.height,l),q={},ee=0;ee<s.numFrames;ee++)(function(I){for(var F=!N.has(I),V=F?[]:P,J=new Uint8Array(f.width*f.height),le={},ce=new Set,ue=0;ue<h[I].length;ue++){var re=h[I][ue];F?(le[re]===void 0&&(le[re]=V.length,V.push(re)),J[ue]=le[re]):J[ue]=H[re],0<I&&h[I-1][ue]!==re&&ce.add(re)}var de={},be=V.filter(function(Ee){return!ce.has(Ee)});if(0<be.length){var be=be[0],ie=(F?le:H)[be];if(0<I){for(var xe=0;xe<h[I].length;xe++)h[I-1][xe]===h[I][xe]&&(J[xe]=ie);de.transparent=ie,q.frameOpts.disposal=1}}if(de.delay=s.frames[I].delay/10,F){for(var Me=1;Me<V.length;)Me<<=1;V.length=Me,de.palette=new Uint32Array(V)}0<I&&Z.addFrame(0,0,f.width,f.height,q.pixelPaletteIndex,q.frameOpts),q={pixelPaletteIndex:J,frameOpts:de}})(ee);q.frameOpts.disposal=1,Z.addFrame(0,0,f.width,f.height,q.pixelPaletteIndex,q.frameOpts),l=new Blob([c.slice(0,Z.end())],{type:"image/gif"}),o.default.prototype.downloadFile(l,p,"gif")},o.default.prototype.saveFrames=function(f,p,s,h,c){o.default._validateParameters("saveFrames",arguments),s=o.default.prototype.constrain(s=s||3,0,15),s*=1e3;var h=o.default.prototype.constrain(h||15,0,22),m=0,g=o.default.prototype._makeFrame,y=this._curElement.elt,_=[],x=setInterval(function(){_.push(g(f+m,p,y)),m++},1e3/h);setTimeout(function(){if(clearInterval(x),c)c(_);else{var w=!0,j=!1,E=void 0;try{for(var T,A=_[Symbol.iterator]();!(w=(T=A.next()).done);w=!0){var R=T.value;o.default.prototype.downloadFile(R.imageData,R.filename,R.ext)}}catch(P){j=!0,E=P}finally{try{w||A.return==null||A.return()}finally{if(j)throw E}}}_=[]},.01+s)},o.default.prototype._makeFrame=function(f,p,c){var l,c=this?this._curElement.elt:c;if(p)switch(p.toLowerCase()){case"png":l="image/png";break;case"jpeg":case"jpg":l="image/jpeg";break;default:l="image/png"}else p="png",l="image/png";var c=(c=c.toDataURL(l)).replace(l,"image/octet-stream"),h={};return h.imageData=c,h.filename=f,h.ext=p,h},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,omggif:240}],290:[function(e,u,d){function o(y){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(y)}function i(y){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(_){return o(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":o(_)})(y)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e("regenerator-runtime/runtime");var n=c(e("../core/main")),a=c(e("../core/helpers")),f=function(y){if(y&&y.__esModule)return y;if(y===null||i(y)!=="object"&&typeof y!="function")return{default:y};var _=l();if(_&&_.has(y))return _.get(y);var x,w={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(x in y){var E;Object.prototype.hasOwnProperty.call(y,x)&&((E=j?Object.getOwnPropertyDescriptor(y,x):null)&&(E.get||E.set)?Object.defineProperty(w,x,E):w[x]=y[x])}return w.default=y,_&&_.set(y,w),w}(e("../core/constants")),p=c(e("omggif")),s=e("gifenc");function l(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,l=function(){return y},y)}function c(y){return y&&y.__esModule?y:{default:y}}function h(y,_,x,w,j,E,T){try{var A=y[E](T),R=A.value}catch(P){return void x(P)}A.done?_(R):Promise.resolve(R).then(w,j)}function m(y,_,x,w,j,E,T,A,R,P,N){var O,D,U,Y,H,W,X,Z,q;return y===f.COVER&&(O=_,U=x,X=E,Z=T,W=A,q=R,D=P,Y=N,H=Math.max(X/D,Z/Y),X/=H,Z/=H,H=W,W=q,O===f.CENTER?H+=(D-X)/2:O===f.RIGHT&&(H+=D-X),U===f.CENTER?W+=(Y-Z)/2:U===f.BOTTOM&&(W+=Y-Z),A=(q={x:H,y:W,w:X,h:Z}).x,R=q.y,P=q.w,N=q.h),y===f.CONTAIN&&(O=_,D=x,U=w,Y=j,H=E,W=T,X=P,Z=N,q=Math.max(X/H,Z/W),X/=q,Z/=q,q=U,U=Y,O===f.CENTER?q+=(H-X)/2:O===f.RIGHT&&(q+=H-X),D===f.CENTER?U+=(W-Z)/2:D===f.BOTTOM&&(U+=W-Z),w=(y={x:q,y:U,w:X,h:Z}).x,j=y.y,E=y.w,T=y.h),{sx:A,sy:R,sw:P,sh:N,dx:w,dy:j,dw:E,dh:T}}function g(y,_){return 0<y&&y<_?y:_}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.loadImage=function(y,_,x){n.default._validateParameters("loadImage",arguments);var w=new n.default.Image(1,1,this),j=this,E=new Request(y,{method:"GET",mode:"cors"});return fetch(y,E).then(function(T){var A,R=T.headers.get("content-type");R===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),R&&R.includes("image/gif")?T.arrayBuffer().then(function(P){if(P){var P=new Uint8Array(P),N=w,O=_,D=x,U=function(F){j._decrementPreload()}.bind(j),Y=new p.default.GifReader(P),H=(N.width=N.canvas.width=Y.width,N.height=N.canvas.height=Y.height,[]),W=Y.numFrames(),X=new Uint8ClampedArray(N.width*N.height*4);if(1<W){for(var Z=0;Z<W;Z++){var q=Y.frameInfo(Z),ee=N.drawingContext.getImageData(0,0,N.width,N.height),L=(X=ee.data.slice(),function(F,V){try{V.decodeAndBlitFrameRGBA(F,X)}catch(J){n.default._friendlyFileLoadError(8,N.src),typeof D=="function"?D(J):console.error(J)}}(Z,Y),new ImageData(X,N.width,N.height)),L=(N.drawingContext.putImageData(L,0,0),q.delay);L===0&&(L=10),H.push({image:N.drawingContext.getImageData(0,0,N.width,N.height),delay:10*L}),q.disposal===2?N.drawingContext.clearRect(q.x,q.y,q.width,q.height):q.disposal===3&&N.drawingContext.putImageData(ee,0,0,q.x,q.y,q.width,q.height)}P=Y.loopCount(),P===null?P=1:P===0&&(P=null),N.drawingContext.putImageData(H[0].image,0,0),N.gifProperties={displayIndex:0,loopLimit:P,loopCount:0,frames:H,numFrames:W,playing:!0,timeDisplayed:0,lastChangeTime:0}}typeof O=="function"&&O(N),U()}},function(P){typeof x=="function"?x(P):console.error(P)}):((A=new Image).onload=function(){w.width=w.canvas.width=A.width,w.height=w.canvas.height=A.height,w.drawingContext.drawImage(A,0,0),w.modified=!0,typeof _=="function"&&_(w),j._decrementPreload()},A.onerror=function(P){n.default._friendlyFileLoadError(0,A.src),typeof x=="function"?x(P):console.error(P)},y.indexOf("data:image/")!==0&&(A.crossOrigin="Anonymous"),A.src=y),w.modified=!0}).catch(function(T){n.default._friendlyFileLoadError(0,y),typeof x=="function"?x(T):console.error(T)}),w},n.default.prototype.saveGif=function(){y=regeneratorRuntime.mark(function x(w,j){var E,T,A,R,P,N,O,D,U,Y,H,W,X,Z,q,ee,L,I,F,V,J,le,ce,ue,re,de=arguments;return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(E=2<de.length&&de[2]!==void 0?de[2]:{delay:0,units:"seconds"},typeof w!="string")throw TypeError("fileName parameter must be a string");be.next=3;break;case 3:if(typeof j!="number")throw TypeError("Duration parameter must be a number");be.next=5;break;case 5:if(typeof E.delay!="number")throw TypeError("Delay parameter must be a number");be.next=7;break;case 7:if(E.units!=="seconds"&&E.units!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');be.next=9;break;case 9:N=E.units,P=E.delay,R=this._targetFrameRate,T=(T=1/(R=R!==1/0&&R!==void 0&&R!==0?R:60)*1e3)<20?20:T,R=(A=N==="seconds"?j*R:j)+(N=N==="seconds"?P*R:P),P=N,this.frameCount=P,N=this._pixelDensity,this.pixelDensity(1),O=[],D="p5.gif.progressBar",document.getElementById(D)!==null&&document.getElementById(D).remove(),(D=this.createP("")).id("progressBar"),D.style("font-size","16px"),D.style("font-family","Montserrat"),D.style("background-color","#ffffffa0"),D.style("padding","8px"),D.style("border-radius","10px"),D.position(0,0),this.drawingContext instanceof WebGLRenderingContext&&(Y=document.getElementById("defaultCanvas0").getContext("webgl"),U=new Uint8Array(Y.drawingBufferWidth*Y.drawingBufferHeight*4)),this.noLoop();case 35:if(P<R)return this.redraw(),q=void 0,q=this.drawingContext instanceof WebGLRenderingContext?(U=new Uint8Array(Y.drawingBufferWidth*Y.drawingBufferHeight*4),Y.readPixels(0,0,Y.drawingBufferWidth,Y.drawingBufferHeight,Y.RGBA,Y.UNSIGNED_BYTE,U),function(ie){for(var xe=parseInt(height/2),Me=4*width,Ee=new Uint8Array(4*width),Se=0;Se<xe;++Se){var Ie=Se*Me,Oe=(height-Se-1)*Me;Ee.set(ie.subarray(Ie,Ie+Me)),ie.copyWithin(Ie,Oe,Oe+Me),ie.set(Ee,Oe)}return ie}(U)):this.drawingContext.getImageData(0,0,this.width,this.height).data,O.push(q),P++,D.html("Saved frame <b>"+O.length.toString()+"</b> out of "+A.toString()),be.next=44,new Promise(function(ie){return setTimeout(ie,0)});be.next=46;break;case 44:be.next=35;break;case 46:D.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(N),H=(0,s.GIFEncoder)(),W=function(ie){for(var xe=new Uint8Array(ie.length*ie[0].length),Me=0;Me<ie.length;Me++)xe.set(ie[0],Me*ie[0].length);var Ee=(0,s.quantize)(xe,256,{format:"rgba444",oneBitAlpha:!0});return Ee.length===256?Ee[Ee.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Ee.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Ee}(O),X=W.length-1,Z=0;case 53:if(Z<O.length){if(Z===0)return q=(0,s.applyPalette)(O[Z],W,{format:"rgba4444"}),H.writeFrame(q,this.width,this.height,{palette:W,delay:T,dispose:1}),be.abrupt("continue",68);be.next=58}else be.next=71;break;case 58:for(ee=O[Z],L=O[Z-1],I=[],F=0;F<ee.length;F+=4)V=[ee[F],ee[F+1],ee[F+2],ee[F+3]],J=[L[F],L[F+1],L[F+2],L[F+3]],!function(ie,xe){return Array.isArray(ie)&&Array.isArray(xe)&&ie.length===xe.length&&ie.every(function(Me,Ee){return Me===xe[Ee]})}(V,J)||I.push(F/4);for(le=(0,s.applyPalette)(ee,W,{format:"rgba4444"}),ce=0;ce<I.length;ce++)ue=I[ce],le[ue]=X;return H.writeFrame(le,this.width,this.height,{delay:T,transparent:!0,transparentIndex:X,dispose:1}),D.html("Rendered frame <b>"+Z.toString()+"</b> out of "+A.toString()),be.next=68,new Promise(function(ie){return setTimeout(ie,0)});case 68:Z++,be.next=53;break;case 71:H.finish(),re=H.bytesView(),re=new Blob([re],{type:"image/gif"}),O=[],this.loop(),D.html("Done. Downloading your gif!🌸"),n.default.prototype.downloadFile(re,w,"gif");case 79:case"end":return be.stop()}},x,this)});var y,_=function(){var x=this,w=arguments;return new Promise(function(j,E){var T=y.apply(x,w);function A(P){h(T,j,E,A,R,"next",P)}function R(P){h(T,j,E,A,R,"throw",P)}A(void 0)})};return function(x,w){return _.apply(this,arguments)}}(),n.default.prototype.image=function(y,_,x,w,Y,H,W,X,q,P,N,O){n.default._validateParameters("image",arguments);var Z=y.width,D=y.height,U=(O=O||f.CENTER,N=N||f.CENTER,y.elt&&y.elt.videoWidth&&!y.canvas&&(Z=y.elt.videoWidth,D=y.elt.videoHeight),w||Z),Y=Y||D,H=H||0,W=W||0,X=g(X||Z,Z),Z=g(q||D,D),q=1;y.elt&&!y.canvas&&y.elt.style.width&&(q=y.elt.videoWidth&&!w?y.elt.videoWidth:y.elt.width,q/=parseInt(y.elt.style.width,10)),H*=q,W*=q,Z*=q,X*=q,D=m(P,N,O,(D=a.default.modeAdjust(_,x,U,Y,this._renderer._imageMode)).x,D.y,D.w,D.h,H,W,X,Z),this._renderer.image(y,D.sx,D.sy,D.sw,D.sh,D.dx,D.dy,D.dw,D.dh)},n.default.prototype.tint=function(){for(var y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];n.default._validateParameters("tint",_);var w=this.color.apply(this,_);this._renderer._tint=w.levels},n.default.prototype.noTint=function(){this._renderer._tint=null},n.default.prototype._getTintedImageCanvas=n.default.Renderer2D.prototype._getTintedImageCanvas,n.default.prototype.imageMode=function(y){n.default._validateParameters("imageMode",arguments),y!==f.CORNER&&y!==f.CORNERS&&y!==f.CENTER||(this._renderer._imageMode=y)},e=n.default,d.default=e},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/helpers":263,"../core/main":267,"core-js/modules/es.array.copy-within":150,"core-js/modules/es.array.every":151,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,gifenc:237,omggif:240,"regenerator-runtime/runtime":244}],291:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=n(e("../core/main")),i=n(e("./filters"));function n(a){return a&&a.__esModule?a:{default:a}}o.default.Image=function(a,f){this.width=a,this.height=f,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},o.default.Image.prototype._animateGif=function(s){var f,p=this.gifProperties,s=s._lastFrameTime;p.lastChangeTime===0&&(p.lastChangeTime=s),p.playing&&(p.timeDisplayed=s-p.lastChangeTime,f=p.frames[p.displayIndex].delay,p.timeDisplayed>=f&&(f=Math.floor(p.timeDisplayed/f),p.timeDisplayed=0,p.lastChangeTime=s,p.displayIndex+=f,p.loopCount=Math.floor(p.displayIndex/p.numFrames),p.loopLimit!==null&&p.loopCount>=p.loopLimit?p.playing=!1:(s=p.displayIndex%p.numFrames,this.drawingContext.putImageData(p.frames[s].image,0,0),p.displayIndex=s,this.setModified(!0))))},o.default.Image.prototype._setProperty=function(a,f){this[a]=f,this.setModified(!0)},o.default.Image.prototype.loadPixels=function(){o.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},o.default.Image.prototype.updatePixels=function(a,f,p,s){o.default.Renderer2D.prototype.updatePixels.call(this,a,f,p,s),this.setModified(!0)},o.default.Image.prototype.get=function(a,f,p,s){return o.default._validateParameters("p5.Image.get",arguments),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.Image.prototype._getPixel=o.default.Renderer2D.prototype._getPixel,o.default.Image.prototype.set=function(a,f,p){o.default.Renderer2D.prototype.set.call(this,a,f,p),this.setModified(!0)},o.default.Image.prototype.resize=function(a,f){a===0&&f===0?(a=this.canvas.width,f=this.canvas.height):a===0?a=this.canvas.width*f/this.canvas.height:f===0&&(f=this.canvas.height*a/this.canvas.width),a=Math.floor(a),f=Math.floor(f);var p=document.createElement("canvas");if(p.width=a,p.height=f,this.gifProperties)for(var s=this.gifProperties,l=0;l<s.numFrames;l++){for(var c=this.drawingContext.createImageData(a,f),h=(x=x=_=y=g=void 0,s.frames[l].image),m=c,g=0,y=0;y<m.height;y++)for(var _=0;_<m.width;_++){var x=Math.floor(_*h.width/m.width),x=4*(Math.floor(y*h.height/m.height)*h.width+x);m.data[g++]=h.data[x++],m.data[g++]=h.data[x++],m.data[g++]=h.data[x++],m.data[g++]=h.data[+x]}s.frames[l].image=c}p.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,p.width,p.height),this.canvas.width=this.width=a,this.canvas.height=this.height=f,this.drawingContext.drawImage(p,0,0,a,f,0,0,a,f),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},o.default.Image.prototype.copy=function(){for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];o.default.prototype.copy.apply(this,f)},o.default.Image.prototype.mask=function(a){var f=this.drawingContext.globalCompositeOperation,p=1,s=[a=a===void 0?this:a,0,0,(p=a instanceof o.default.Renderer?a._pInst._pixelDensity:p)*a.width,p*a.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var l=0;l<this.gifProperties.frames.length;l++)this.drawingContext.putImageData(this.gifProperties.frames[l].image,0,0),o.default.Image.prototype.copy.apply(this,s),this.gifProperties.frames[l].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else o.default.Image.prototype.copy.apply(this,s);this.drawingContext.globalCompositeOperation=f,this.setModified(!0)},o.default.Image.prototype.filter=function(a,f){i.default.apply(this.canvas,i.default[a],f),this.setModified(!0)},o.default.Image.prototype.blend=function(){for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];o.default._validateParameters("p5.Image.blend",arguments),o.default.prototype.blend.apply(this,f),this.setModified(!0)},o.default.Image.prototype.setModified=function(a){this._modified=a},o.default.Image.prototype.isModified=function(){return this._modified},o.default.Image.prototype.save=function(a,f){this.gifProperties?o.default.prototype.encodeAndDownloadGif(this,a):o.default.prototype.saveCanvas(this.canvas,a,f)},o.default.Image.prototype.reset=function(){var a;this.gifProperties&&((a=this.gifProperties).playing=!0,a.timeSinceStart=0,a.timeDisplayed=0,a.lastChangeTime=0,a.loopCount=0,a.displayIndex=0,this.drawingContext.putImageData(a.frames[0].image,0,0))},o.default.Image.prototype.getCurrentFrame=function(){var a;if(this.gifProperties)return(a=this.gifProperties).displayIndex%a.numFrames},o.default.Image.prototype.setFrame=function(a){var f;this.gifProperties&&(a<(f=this.gifProperties).numFrames&&0<=a?(f.timeDisplayed=0,f.lastChangeTime=0,f.displayIndex=a,this.drawingContext.putImageData(f.frames[a].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))},o.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},o.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},o.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},o.default.Image.prototype.delay=function(a,f){if(this.gifProperties){var p=this.gifProperties;if(f<p.numFrames&&0<=f)p.frames[f].delay=a;else{var s=!0,f=!1,l=void 0;try{for(var c,h=p.frames[Symbol.iterator]();!(s=(c=h.next()).done);s=!0)c.value.delay=a}catch(g){f=!0,l=g}finally{try{s||h.return==null||h.return()}finally{if(f)throw l}}}}},e=o.default.Image,d.default=e},{"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],292:[function(e,u,d){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=n(e("../core/main")),i=n(e("./filters"));function n(a){return a&&a.__esModule?a:{default:a}}e("../color/p5.Color"),o.default.prototype.pixels=[],o.default.prototype.blend=function(){for(var a,f=arguments.length,p=new Array(f),s=0;s<f;s++)p[s]=arguments[s];o.default._validateParameters("blend",p),this._renderer?(a=this._renderer).blend.apply(a,p):o.default.Renderer2D.prototype.blend.apply(this,p)},o.default.prototype.copy=function(){for(var a,f,p,s,l,c,h,m,g,y=arguments.length,_=new Array(y),x=0;x<y;x++)_[x]=arguments[x];if(o.default._validateParameters("copy",_),_.length===9)a=_[0],f=_[1],p=_[2],s=_[3],l=_[4],c=_[5],h=_[6],m=_[7],g=_[8];else{if(_.length!==8)throw new Error("Signature not supported");a=this,f=_[0],p=_[1],s=_[2],l=_[3],c=_[4],h=_[5],m=_[6],g=_[7]}o.default.prototype._copyHelper(this,a,f,p,s,l,c,h,m,g)},o.default.prototype._copyHelper=function(a,f,p,s,l,c,h,m,g,y){f.loadPixels();var _=f.canvas.width/f.width,x=0,w=0;f._renderer&&f._renderer.isP3D&&(x=f.width/2,w=f.height/2),a._renderer&&a._renderer.isP3D?o.default.RendererGL.prototype.image.call(a._renderer,f,p+x,s+w,l,c,h,m,g,y):a.drawingContext.drawImage(f.canvas,_*(p+x),_*(s+w),_*l,_*c,h,m,g,y)},o.default.prototype.filter=function(a,f){o.default._validateParameters("filter",arguments),this.canvas!==void 0?i.default.apply(this.canvas,i.default[a],f):i.default.apply(this.elt,i.default[a],f)},o.default.prototype.get=function(a,f,p,s){var l;return o.default._validateParameters("get",arguments),(l=this._renderer).get.apply(l,arguments)},o.default.prototype.loadPixels=function(){for(var a=arguments.length,f=new Array(a),p=0;p<a;p++)f[p]=arguments[p];o.default._validateParameters("loadPixels",f),this._renderer.loadPixels()},o.default.prototype.set=function(a,f,p){this._renderer.set(a,f,p)},o.default.prototype.updatePixels=function(a,f,p,s){o.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(a,f,p,s)},e=o.default,d.default=e},{"../color/p5.Color":254,"../core/main":267,"./filters":288,"core-js/modules/es.array.filter":153}],293:[function(e,u,d){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=f(e("../core/main")),n=(e("whatwg-fetch"),e("es6-promise/auto"),f(e("fetch-jsonp"))),a=f(e("file-saver"));function f(c){return c&&c.__esModule?c:{default:c}}function p(c){return(p=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(c)}function s(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function l(c,h){h&&h!==!0&&h!=="true"||(h="");var m="";return(c=c||"untitled")&&c.includes(".")&&(m=c.split(".").pop()),h&&m!==h&&(m=h,c="".concat(c,".").concat(m)),[c,m]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadJSON=function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];i.default._validateParameters("loadJSON",h);for(var g,y,_,x=h[0],w={},j="json",E=1;E<h.length;E++){var T=h[E];typeof T=="string"?T!=="jsonp"&&T!=="json"||(j=T):typeof T=="function"?g?y=T:g=T:p(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(j="jsonp",_=T)}var A=this;return this.httpDo(x,"GET",_,j,function(R){for(var P in R)w[P]=R[P];g!==void 0&&g(R),A._decrementPreload()},function(R){if(i.default._friendlyFileLoadError(5,x),!y)throw R;y(R)}),w},i.default.prototype.loadStrings=function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];i.default._validateParameters("loadStrings",h);for(var g,y,_=[],x=1;x<h.length;x++){var w=h[x];typeof w=="function"&&(g===void 0?g=w:y===void 0&&(y=w))}var j=this;return i.default.prototype.httpDo.call(this,h[0],"GET","text",function(E){for(var T=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),A=0,R=T.length;A<R;A+=32768)Array.prototype.push.apply(_,T.slice(A,Math.min(A+32768,R)));g!==void 0&&g(_),j._decrementPreload()},function(E){if(i.default._friendlyFileLoadError(3,E),!y)throw E;y(E)}),_},i.default.prototype.loadTable=function(c){var h,m,g,y=!1,_=c.substring(c.lastIndexOf(".")+1,c.length);_==="csv"?g=",":_==="ssv"?g=";":_==="tsv"&&(g="	");for(var x=1;x<arguments.length;x++)typeof arguments[x]=="function"?h===void 0?h=arguments[x]:m===void 0&&(m=arguments[x]):typeof arguments[x]=="string"&&(arguments[x]==="header"&&(y=!0),arguments[x]==="csv"?g=",":arguments[x]==="ssv"?g=";":arguments[x]==="tsv"&&(g="	"));var w=new i.default.Table,j=this;return this.httpDo(c,"GET","table",function(E){for(var T,A,R={},P=0,N=[],O=0,D=null,U=function(){R.currentState=P,R.token=""},Y=function(){D.push(R.token),U()},H=function(){R.currentState=4,N.push(D),D=null};;){if((T=E[O++])==null){if(R.escaped)throw new Error("Unclosed quote in file.");if(D){Y(),H();break}}if(D===null&&(R.escaped=!1,D=[],U()),R.currentState===P){if(T==='"'){R.escaped=!0,R.currentState=1;continue}R.currentState=1}if(R.currentState===1&&R.escaped)if(T==='"')E[O]==='"'?(R.token+='"',O++):(R.escaped=!1,R.currentState=2);else{if(T==="\r")continue;R.token+=T}else T==="\r"?(E[O]===`
`&&O++,Y(),H()):T===`
`?(Y(),H()):T===g?Y():R.currentState===1&&(R.token+=T)}if(y)w.columns=N.shift();else for(var W=0;W<N[0].length;W++)w.columns[W]="null";for(var X=0;X<N.length;X++)(N[X].length!==1||N[X][0]!=="undefined"&&N[X][0]!=="")&&((A=new i.default.TableRow).arr=N[X],A.obj=function(Z,q){var ee={};if((q=q||[])===void 0)for(var L=0;L<Z.length;L++)q[L.toString()]=L;for(var I=0;I<q.length;I++){var F=q[I],V=Z[I];ee[F]=V}return ee}(N[X],w.columns),w.addRow(A));typeof h=="function"&&h(w),j._decrementPreload()},function(E){i.default._friendlyFileLoadError(2,c),m?m(E):console.error(E)}),w},i.default.prototype.loadXML=function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];for(var g,y,_=new i.default.XML,x=1;x<h.length;x++){var w=h[x];typeof w=="function"&&(g===void 0?g=w:y===void 0&&(y=w))}var j=this;return this.httpDo(h[0],"GET","xml",function(E){for(var T in E)_[T]=E[T];g!==void 0&&g(_),j._decrementPreload()},function(E){if(i.default._friendlyFileLoadError(1,E),!y)throw E;y(E)}),_},i.default.prototype.loadBytes=function(c,h,m){var g={},y=this;return this.httpDo(c,"GET","arrayBuffer",function(_){g.bytes=new Uint8Array(_),typeof h=="function"&&h(g),y._decrementPreload()},function(_){if(i.default._friendlyFileLoadError(6,c),!m)throw _;m(_)}),g},i.default.prototype.httpGet=function(){i.default._validateParameters("httpGet",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"GET"),i.default.prototype.httpDo.apply(this,c)},i.default.prototype.httpPost=function(){i.default._validateParameters("httpPost",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"POST"),i.default.prototype.httpDo.apply(this,c)},i.default.prototype.httpDo=function(){for(var c,h,m,g={},y=0,_="text/plain",x=arguments.length-1;0<x&&typeof(x<0||arguments.length<=x?void 0:arguments[x])=="function";x--)y++;var w=arguments.length-y,j=arguments.length<=0?void 0:arguments[0];if(w==2&&typeof j=="string"&&p(arguments.length<=1?void 0:arguments[1])==="object")N=new Request(j,arguments.length<=1?void 0:arguments[1]),h=arguments.length<=2?void 0:arguments[2],m=arguments.length<=3?void 0:arguments[3];else{for(var E,T="GET",A=1;A<arguments.length;A++){var R=A<0||arguments.length<=A?void 0:arguments[A];if(typeof R=="string")R==="GET"||R==="POST"||R==="PUT"||R==="DELETE"?T=R:R==="json"||R==="jsonp"||R==="binary"||R==="arrayBuffer"||R==="xml"||R==="text"||R==="table"?c=R:E=R;else if(typeof R=="number")E=R.toString();else if(p(R)==="object")if(R.hasOwnProperty("jsonpCallback")||R.hasOwnProperty("jsonpCallbackFunction"))for(var P in R)g[P]=R[P];else _=R instanceof i.default.XML?(E=R.serialize(),"application/xml"):(E=JSON.stringify(R),"application/json");else typeof R=="function"&&(h?m=R:h=R)}var w=T==="GET"?new Headers:new Headers({"Content-Type":_}),N=new Request(j,{method:T,mode:"cors",body:E,headers:w})}return(w=(w=(c=c||(j.includes("json")?"json":j.includes("xml")?"xml":"text"))==="jsonp"?(0,n.default)(j,g):fetch(N)).then(function(O){if(!O.ok)throw(D=new Error(O.body)).status=O.status,D.ok=!1,D;var D=0;switch((D=c!=="jsonp"?O.headers.get("content-length"):D)&&64e6<D&&i.default._friendlyFileLoadError(7,j),c){case"json":case"jsonp":return O.json();case"binary":return O.blob();case"arrayBuffer":return O.arrayBuffer();case"xml":return O.text().then(function(U){return U=new DOMParser().parseFromString(U,"text/xml"),new i.default.XML(U.documentElement)});default:return O.text()}})).then(h||function(){}),w.catch(m||console.error),w},window.URL=window.URL||window.webkitURL,i.default.prototype._pWriters=[],i.default.prototype.createWriter=function(c,h){var m,g;for(g in i.default.prototype._pWriters)if(i.default.prototype._pWriters[g].name===c)return m=new i.default.PrintWriter(c+this.millis(),h),i.default.prototype._pWriters.push(m),m;return m=new i.default.PrintWriter(c,h),i.default.prototype._pWriters.push(m),m},i.default.PrintWriter=function(c,h){var m=this;this.name=c,this.content="",this.write=function(g){this.content+=g},this.print=function(g){this.content+="".concat(g,`
`)},this.clear=function(){this.content=""},this.close=function(){var g,y=[];for(g in y.push(this.content),i.default.prototype.writeFile(y,c,h),i.default.prototype._pWriters)i.default.prototype._pWriters[g].name===this.name&&i.default.prototype._pWriters.splice(g,1);m.clear(),m={}}},i.default.prototype.save=function(c,h,m){var g=arguments,y=(this._curElement||this).elt;if(g.length===0)i.default.prototype.saveCanvas(y);else if(g[0]instanceof i.default.Renderer||g[0]instanceof i.default.Graphics)i.default.prototype.saveCanvas(g[0].elt,g[1],g[2]);else if(g.length===1&&typeof g[0]=="string")i.default.prototype.saveCanvas(y,g[0]);else switch(l(g[1],g[2])[1]){case"json":return void i.default.prototype.saveJSON(g[0],g[1],g[2]);case"txt":return void i.default.prototype.saveStrings(g[0],g[1],g[2]);default:g[0]instanceof Array?i.default.prototype.saveStrings(g[0],g[1],g[2]):g[0]instanceof i.default.Table?i.default.prototype.saveTable(g[0],g[1],g[2]):g[0]instanceof i.default.Image?i.default.prototype.saveCanvas(g[0].canvas,g[1]):g[0]instanceof i.default.SoundFile&&i.default.prototype.saveSound(g[0],g[1],g[2],g[3])}},i.default.prototype.saveJSON=function(c,h,m){i.default._validateParameters("saveJSON",arguments),m=m?JSON.stringify(c):JSON.stringify(c,void 0,2),this.saveStrings(m.split(`
`),h,"json")},i.default.prototype.saveJSONObject=i.default.prototype.saveJSON,i.default.prototype.saveJSONArray=i.default.prototype.saveJSON,i.default.prototype.saveStrings=function(c,h,m,g){i.default._validateParameters("saveStrings",arguments);for(var y=this.createWriter(h,m||"txt"),_=0;_<c.length;_++)g?y.write(c[_]+`\r
`):y.write(c[_]+`
`);y.close(),y.clear()},i.default.prototype.saveTable=function(c,h,m){i.default._validateParameters("saveTable",arguments),g=m===void 0?h.substring(h.lastIndexOf(".")+1,h.length):m;var g,y=this.createWriter(h,g),_=c.columns,x=g==="tsv"?"	":",";if(g!=="html"){if(_[0]!=="0"){for(var w=0;w<_.length;w++)w<_.length-1?y.write(_[w]+x):y.write(_[w]);y.write(`
`)}for(var j=0;j<c.rows.length;j++){for(var E=void 0,E=0;E<c.rows[j].arr.length;E++)E<c.rows[j].arr.length-1?g==="csv"&&String(c.rows[j].arr[E]).includes(",")?y.write('"'+c.rows[j].arr[E]+'"'+x):y.write(c.rows[j].arr[E]+x):g==="csv"&&String(c.rows[j].arr[E]).includes(",")?y.write('"'+c.rows[j].arr[E]+'"'):y.write(c.rows[j].arr[E]);y.write(`
`)}}else{if(y.print("<html>"),y.print("<head>"),y.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),y.print("</head>"),y.print("<body>"),y.print("  <table>"),_[0]!=="0"){y.print("    <tr>");for(var T=0;T<_.length;T++){var A=s(_[T]);y.print("      <td>".concat(A)),y.print("      </td>")}y.print("    </tr>")}for(var R=0;R<c.rows.length;R++){y.print("    <tr>");for(var P=0;P<c.columns.length;P++){var N=s(c.rows[R].getString(P));y.print("      <td>".concat(N)),y.print("      </td>")}y.print("    </tr>")}y.print("  </table>"),y.print("</body>"),y.print("</html>")}y.close(),y.clear()},i.default.prototype.writeFile=function(y,h,m){var g="application/octet-stream",y=(i.default.prototype._isSafari()&&(g="text/plain"),new Blob(y,{type:g}));i.default.prototype.downloadFile(y,h,m)},i.default.prototype.downloadFile=function(c,y,_){var g,y=l(y,_),_=y[0];c instanceof Blob?a.default.saveAs(c,_):((g=document.createElement("a")).href=c,g.download=_,g.onclick=function(x){document.body.removeChild(x.target),x.stopPropagation()},g.style.display="none",document.body.appendChild(g),i.default.prototype._isSafari()&&(c=(c=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(y[1],'"'),alert(c)),g.click())},i.default.prototype._checkFileExtension=l,i.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},e=i.default,d.default=e},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":230,"core-js/modules/web.url":232,"es6-promise/auto":233,"fetch-jsonp":235,"file-saver":236,"whatwg-fetch":245}],294:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.Table=function(i){this.columns=[],this.rows=[]},o.default.Table.prototype.addRow=function(i){if(i=i||new o.default.TableRow,i.arr===void 0||i.obj===void 0)throw new Error("invalid TableRow: ".concat(i));return(i.table=this).rows.push(i),i},o.default.Table.prototype.removeRow=function(i){this.rows[i].table=null,i=this.rows.splice(i+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(i)},o.default.Table.prototype.getRow=function(i){return this.rows[i]},o.default.Table.prototype.getRows=function(){return this.rows},o.default.Table.prototype.findRow=function(i,n){if(typeof n=="string"){for(var a=0;a<this.rows.length;a++)if(this.rows[a].obj[n]===i)return this.rows[a]}else for(var f=0;f<this.rows.length;f++)if(this.rows[f].arr[n]===i)return this.rows[f];return null},o.default.Table.prototype.findRows=function(i,n){var a=[];if(typeof n=="string")for(var f=0;f<this.rows.length;f++)this.rows[f].obj[n]===i&&a.push(this.rows[f]);else for(var p=0;p<this.rows.length;p++)this.rows[p].arr[n]===i&&a.push(this.rows[p]);return a},o.default.Table.prototype.matchRow=function(i,n){if(typeof n=="number"){for(var a=0;a<this.rows.length;a++)if(this.rows[a].arr[n].match(i))return this.rows[a]}else for(var f=0;f<this.rows.length;f++)if(this.rows[f].obj[n].match(i))return this.rows[f];return null},o.default.Table.prototype.matchRows=function(i,n){var a=[];if(typeof n=="number")for(var f=0;f<this.rows.length;f++)this.rows[f].arr[n].match(i)&&a.push(this.rows[f]);else for(var p=0;p<this.rows.length;p++)this.rows[p].obj[n].match(i)&&a.push(this.rows[p]);return a},o.default.Table.prototype.getColumn=function(i){var n=[];if(typeof i=="string")for(var a=0;a<this.rows.length;a++)n.push(this.rows[a].obj[i]);else for(var f=0;f<this.rows.length;f++)n.push(this.rows[f].arr[i]);return n},o.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},o.default.Table.prototype.addColumn=function(i){this.columns.push(i||null)},o.default.Table.prototype.getColumnCount=function(){return this.columns.length},o.default.Table.prototype.getRowCount=function(){return this.rows.length},o.default.Table.prototype.removeTokens=function(i,n){for(var a=[],f=0;f<i.length;f++)a.push(i.charAt(f).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var p=new RegExp(a.join("|"),"g");if(n===void 0)for(var s=0;s<this.columns.length;s++)for(var l=0;l<this.rows.length;l++){var c=(c=this.rows[l].arr[s]).replace(p,"");this.rows[l].arr[s]=c,this.rows[l].obj[this.columns[s]]=c}else if(typeof n=="string")for(var h=0;h<this.rows.length;h++){var m=(m=this.rows[h].obj[n]).replace(p,""),g=(this.rows[h].obj[n]=m,this.columns.indexOf(n));this.rows[h].arr[g]=m}else for(var y=0;y<this.rows.length;y++){var _=(_=this.rows[y].arr[n]).replace(p,"");this.rows[y].arr[n]=_,this.rows[y].obj[this.columns[n]]=_}},o.default.Table.prototype.trim=function(i){var n=new RegExp(" ","g");if(i===void 0)for(var a=0;a<this.columns.length;a++)for(var f=0;f<this.rows.length;f++){var p=(p=this.rows[f].arr[a]).replace(n,"");this.rows[f].arr[a]=p,this.rows[f].obj[this.columns[a]]=p}else if(typeof i=="string")for(var s=0;s<this.rows.length;s++){var l=(l=this.rows[s].obj[i]).replace(n,""),c=(this.rows[s].obj[i]=l,this.columns.indexOf(i));this.rows[s].arr[c]=l}else for(var h=0;h<this.rows.length;h++){var m=(m=this.rows[h].arr[i]).replace(n,"");this.rows[h].arr[i]=m,this.rows[h].obj[this.columns[i]]=m}},o.default.Table.prototype.removeColumn=function(f){typeof f=="string"?a=this.columns.indexOf(n=f):n=this.columns[a=f];var n,a,f=this.columns.splice(a+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(f);for(var p=0;p<this.rows.length;p++){var s=this.rows[p].arr,l=s.splice(a+1,s.length);s.pop(),this.rows[p].arr=s.concat(l),delete this.rows[p].obj[n]}},o.default.Table.prototype.set=function(i,n,a){this.rows[i].set(n,a)},o.default.Table.prototype.setNum=function(i,n,a){this.rows[i].setNum(n,a)},o.default.Table.prototype.setString=function(i,n,a){this.rows[i].setString(n,a)},o.default.Table.prototype.get=function(i,n){return this.rows[i].get(n)},o.default.Table.prototype.getNum=function(i,n){return this.rows[i].getNum(n)},o.default.Table.prototype.getString=function(i,n){return this.rows[i].getString(n)},o.default.Table.prototype.getObject=function(i){for(var n,a={},f=0;f<this.rows.length;f++)if(n=this.rows[f].obj,typeof i=="string"){if(!(0<=this.columns.indexOf(i)))throw new Error('This table has no column named "'.concat(i,'"'));a[n[i]]=n}else a[f]=this.rows[f].obj;return a},o.default.Table.prototype.getArray=function(){for(var i=[],n=0;n<this.rows.length;n++)i.push(this.rows[n].arr);return i},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],295:[function(e,u,d){e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.TableRow=function(o,i){var n=[],a={};o&&(n=o.split(i=i||","));for(var f=0;f<n.length;f++){var p=f,s=n[f];a[p]=s}this.arr=n,this.obj=a,this.table=null},e.default.TableRow.prototype.set=function(o,i){if(typeof o=="string"){var n=this.table.columns.indexOf(o);if(!(0<=n))throw new Error('This table has no column named "'.concat(o,'"'));this.obj[o]=i,this.arr[n]=i}else{if(!(o<this.table.columns.length))throw new Error("Column #".concat(o," is out of the range of this table"));this.arr[o]=i,n=this.table.columns[o],this.obj[n]=i}},e.default.TableRow.prototype.setNum=function(o,i){i=parseFloat(i),this.set(o,i)},e.default.TableRow.prototype.setString=function(o,i){i=i.toString(),this.set(o,i)},e.default.TableRow.prototype.get=function(o){return(typeof o=="string"?this.obj:this.arr)[o]},e.default.TableRow.prototype.getNum=function(o){var i=parseFloat(typeof o=="string"?this.obj[o]:this.arr[o]);if(i.toString()==="NaN")throw"Error: ".concat(this.obj[o]," is NaN (Not a Number)");return i},e.default.TableRow.prototype.getString=function(o){return(typeof o=="string"?this.obj:this.arr)[o].toString()},e=e.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],296:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(n){for(var a=[],f=0;f<n.length;f++)a.push(new o.default.XML(n[f]));return a}o.default.XML=function(n){n?this.DOM=n:(n=document.implementation.createDocument(null,"doc"),this.DOM=n.createElement("root"))},o.default.XML.prototype.getParent=function(){return new o.default.XML(this.DOM.parentElement)},o.default.XML.prototype.getName=function(){return this.DOM.tagName},o.default.XML.prototype.setName=function(n){var a=this.DOM.innerHTML,f=this.DOM.attributes,p=document.implementation.createDocument(null,"default").createElement(n);p.innerHTML=a;for(var s=0;s<f.length;s++)p.setAttribute(f[s].nodeName,f.nodeValue);this.DOM=p},o.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},o.default.XML.prototype.listChildren=function(){for(var n=[],a=0;a<this.DOM.childNodes.length;a++)n.push(this.DOM.childNodes[a].nodeName);return n},o.default.XML.prototype.getChildren=function(n){return i(n?this.DOM.getElementsByTagName(n):this.DOM.children)},o.default.XML.prototype.getChild=function(n){if(typeof n!="string")return new o.default.XML(this.DOM.children[n]);var a=!0,f=!1,p=void 0;try{for(var s,l=this.DOM.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;if(c.tagName===n)return new o.default.XML(c)}}catch(h){f=!0,p=h}finally{try{a||l.return==null||l.return()}finally{if(f)throw p}}},o.default.XML.prototype.addChild=function(n){n instanceof o.default.XML&&this.DOM.appendChild(n.DOM)},o.default.XML.prototype.removeChild=function(n){var a=-1;if(typeof n=="string"){for(var f=0;f<this.DOM.children.length;f++)if(this.DOM.children[f].tagName===n){a=f;break}}else a=n;a!==-1&&this.DOM.removeChild(this.DOM.children[a])},o.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},o.default.XML.prototype.listAttributes=function(){var n=[],a=!0,f=!1,p=void 0;try{for(var s,l=this.DOM.attributes[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;n.push(c.nodeName)}}catch(h){f=!0,p=h}finally{try{a||l.return==null||l.return()}finally{if(f)throw p}}return n},o.default.XML.prototype.hasAttribute=function(n){var a={},f=!0,p=!1,s=void 0;try{for(var l,c=this.DOM.attributes[Symbol.iterator]();!(f=(l=c.next()).done);f=!0){var h=l.value;a[h.nodeName]=h.nodeValue}}catch(m){p=!0,s=m}finally{try{f||c.return==null||c.return()}finally{if(p)throw s}}return!!a[n]},o.default.XML.prototype.getNum=function(n,a){var f={},p=!0,s=!1,l=void 0;try{for(var c,h=this.DOM.attributes[Symbol.iterator]();!(p=(c=h.next()).done);p=!0){var m=c.value;f[m.nodeName]=m.nodeValue}}catch(g){s=!0,l=g}finally{try{p||h.return==null||h.return()}finally{if(s)throw l}}return Number(f[n])||a||0},o.default.XML.prototype.getString=function(n,a){var f={},p=!0,s=!1,l=void 0;try{for(var c,h=this.DOM.attributes[Symbol.iterator]();!(p=(c=h.next()).done);p=!0){var m=c.value;f[m.nodeName]=m.nodeValue}}catch(g){s=!0,l=g}finally{try{p||h.return==null||h.return()}finally{if(s)throw l}}return f[n]?String(f[n]):a||null},o.default.XML.prototype.setAttribute=function(n,a){this.DOM.setAttribute(n,a)},o.default.XML.prototype.getContent=function(n){var a=this.DOM.textContent;return(a=a.replace(/\s\s+/g,","))||n||null},o.default.XML.prototype.setContent=function(n){this.DOM.children.length||(this.DOM.textContent=n)},o.default.XML.prototype.serialize=function(){return new XMLSerializer().serializeToString(this.DOM)},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],297:[function(e,u,d){e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var n=arguments.length,a=[],f=0,p=0;p<n;p++){var s=arguments[p];if((s=+s)===1/0||s===-1/0)return 1/0;f<(s=Math.abs(s))&&(f=s),a[p]=s}f===0&&(f=1);for(var g=0,m=0,l=0;l<n;l++)var c=a[l]/f,c=c*c-m,h=g+c,m=h-g-c,g=h;return Math.sqrt(g)*f}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(n,a,f){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(n,f),a)},o.default.prototype.dist=function(){for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return o.default._validateParameters("dist",a),a.length===4?i(a[2]-a[0],a[3]-a[1]):a.length===6?i(a[3]-a[0],a[4]-a[1],a[5]-a[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(n,a,f){return o.default._validateParameters("lerp",arguments),f*(a-n)+n},o.default.prototype.log=Math.log,o.default.prototype.mag=function(n,a){return o.default._validateParameters("mag",arguments),i(n,a)},o.default.prototype.map=function(n,a,f,p,s,l){return o.default._validateParameters("map",arguments),n=(n-a)/(f-a)*(s-p)+p,l?p<s?this.constrain(n,p,s):this.constrain(n,s,p):n},o.default.prototype.max=function(){for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return a[0]instanceof Array?Math.max.apply(null,a[0]):Math.max.apply(null,a)},o.default.prototype.min=function(){for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return a[0]instanceof Array?Math.min.apply(null,a[0]):Math.min.apply(null,a)},o.default.prototype.norm=function(n,a,f){return o.default._validateParameters("norm",arguments),this.map(n,a,f,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(n,a){return a?(a=Math.pow(10,a),Math.round(n*a)/a):Math.round(n)},o.default.prototype.sq=function(n){return n*n},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(p){o.default._validateParameters("fract",arguments);var a,f=0,p=Number(p);return isNaN(p)||Math.abs(p)===1/0?p:(p<0&&(p=-p,f=1),String(p).includes(".")&&!String(p).includes("e")?(a=String(p),a=Number("0"+a.slice(a.indexOf("."))),Math.abs(f-a)):p<1?Math.abs(f-p):0)},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":167,"core-js/modules/es.number.constructor":169,"core-js/modules/es.string.includes":185}],298:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(a,f,p){return(i=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(s,l,c){var h=[null];return h.push.apply(h,l),l=new(Function.bind.apply(s,h)),c&&n(l,c.prototype),l}).apply(null,arguments)}function n(a,f){return(n=Object.setPrototypeOf||function(p,s){return p.__proto__=s,p})(a,f)}o.default.prototype.createVector=function(a,f,p){return this instanceof o.default?i(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(a,f,p)},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],299:[function(p,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,p=(p=p("../core/main"))&&p.__esModule?p:{default:p};function o(s){return .5*(1-Math.cos(s*Math.PI))}var i,n=4095,a=4,f=.5,p=(p.default.prototype.noise=function(s){var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(i==null){i=new Array(4096);for(var h=0;h<4096;h++)i[h]=Math.random()}s<0&&(s=-s),l<0&&(l=-l),c<0&&(c=-c);for(var m,g,y=Math.floor(s),_=Math.floor(l),x=Math.floor(c),w=s-y,j=l-_,E=c-x,T=0,A=.5,R=0;R<a;R++){var P=y+(_<<4)+(x<<8),N=o(w),O=o(j),D=i[P&n];D+=N*(i[P+1&n]-D),m=i[P+16&n],D+=O*((m+=N*(i[P+16+1&n]-m))-D),m=i[(P+=256)&n],m+=N*(i[P+1&n]-m),g=i[P+16&n],m+=O*((g+=N*(i[P+16+1&n]-g))-m),T+=(D+=o(E)*(m-D))*A,A*=f,y<<=1,_<<=1,x<<=1,1<=(w*=2)&&(y++,w--),1<=(j*=2)&&(_++,j--),1<=(E*=2)&&(x++,E--)}return T},p.default.prototype.noiseDetail=function(s,l){0<s&&(a=s),0<l&&(f=l)},p.default.prototype.noiseSeed=function(s){h=4294967296;var l,c,h,m={setSeed:function(y){c=l=(y??Math.random()*h)>>>0},getSeed:function(){return l},rand:function(){return(c=(1664525*c+1013904223)%h)/h}};m.setSeed(s),i=new Array(4096);for(var g=0;g<4096;g++)i[g]=m.rand()},p.default);d.default=p},{"../core/main":267}],300:[function(e,u,d){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(c)}function i(c){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(c){if(c&&c.__esModule)return c;if(c===null||i(c)!=="object"&&typeof c!="function")return{default:c};var h=f();if(h&&h.has(c))return h.get(c);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var _;Object.prototype.hasOwnProperty.call(c,m)&&((_=y?Object.getOwnPropertyDescriptor(c,m):null)&&(_.get||_.set)?Object.defineProperty(g,m,_):g[m]=c[m])}return g.default=c,h&&h.set(c,g),g}(e("../core/constants"));function f(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,f=function(){return c},c)}n.default.Vector=function(){var c,h,m={}.toString.call(arguments[0])==="[object Function]"?(this.isPInst=!0,this._fromRadians=arguments[0],this._toRadians=arguments[1],c=arguments[2]||0,h=arguments[3]||0,arguments[4]||0):(c=arguments[0]||0,h=arguments[1]||0,arguments[2]||0);this.x=c,this.y=h,this.z=m},n.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},n.default.Vector.prototype.set=function(c,h,m){return c instanceof n.default.Vector?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):c instanceof Array?(this.x=c[0]||0,this.y=c[1]||0,this.z=c[2]||0):(this.x=c||0,this.y=h||0,this.z=m||0),this},n.default.Vector.prototype.copy=function(){return this.isPInst?new n.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new n.default.Vector(this.x,this.y,this.z)},n.default.Vector.prototype.add=function(c,h,m){return c instanceof n.default.Vector?(this.x+=c.x||0,this.y+=c.y||0,this.z+=c.z||0):c instanceof Array?(this.x+=c[0]||0,this.y+=c[1]||0,this.z+=c[2]||0):(this.x+=c||0,this.y+=h||0,this.z+=m||0),this};function p(c,h){return c!==0&&(this.x=this.x%c),h!==0&&(this.y=this.y%h),this}function s(c,h,m){return c!==0&&(this.x=this.x%c),h!==0&&(this.y=this.y%h),m!==0&&(this.z=this.z%m),this}n.default.Vector.prototype.rem=function(c,h,m){var g;if(c instanceof n.default.Vector){if(Number.isFinite(c.x)&&Number.isFinite(c.y)&&Number.isFinite(c.z))return y=parseFloat(c.x),_=parseFloat(c.y),g=parseFloat(c.z),s.call(this,y,_,g)}else if(c instanceof Array){if(c.every(function(x){return Number.isFinite(x)}))return c.length===2?p.call(this,c[0],c[1]):c.length===3?s.call(this,c[0],c[1],c[2]):void 0}else if(arguments.length===1){if(Number.isFinite(c)&&c!==0)return this.x=this.x%c,this.y=this.y%c,this.z=this.z%c,this}else if(arguments.length===2){var y=Array.prototype.slice.call(arguments);if(y.every(function(x){return Number.isFinite(x)})&&y.length===2)return p.call(this,y[0],y[1])}else if(arguments.length===3){var _=Array.prototype.slice.call(arguments);if(_.every(function(x){return Number.isFinite(x)})&&_.length===3)return s.call(this,_[0],_[1],_[2])}},n.default.Vector.prototype.sub=function(c,h,m){return c instanceof n.default.Vector?(this.x-=c.x||0,this.y-=c.y||0,this.z-=c.z||0):c instanceof Array?(this.x-=c[0]||0,this.y-=c[1]||0,this.z-=c[2]||0):(this.x-=c||0,this.y-=h||0,this.z-=m||0),this},n.default.Vector.prototype.mult=function(c,h,m){var g;return c instanceof n.default.Vector?Number.isFinite(c.x)&&Number.isFinite(c.y)&&Number.isFinite(c.z)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.z=="number"?(this.x*=c.x,this.y*=c.y,this.z*=c.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):c instanceof Array?c.every(function(y){return Number.isFinite(y)})&&c.every(function(y){return typeof y=="number"})?c.length===1?(this.x*=c[0],this.y*=c[0],this.z*=c[0]):c.length===2?(this.x*=c[0],this.y*=c[1]):c.length===3&&(this.x*=c[0],this.y*=c[1],this.z*=c[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(g=Array.prototype.slice.call(arguments)).every(function(y){return Number.isFinite(y)})&&g.every(function(y){return typeof y=="number"})?(arguments.length===1&&(this.x*=c,this.y*=c,this.z*=c),arguments.length===2&&(this.x*=c,this.y*=h),arguments.length===3&&(this.x*=c,this.y*=h,this.z*=m)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},n.default.Vector.prototype.div=function(c,h,m){if(c instanceof n.default.Vector)if(Number.isFinite(c.x)&&Number.isFinite(c.y)&&Number.isFinite(c.z)&&typeof c.x=="number"&&typeof c.y=="number"&&typeof c.z=="number"){if(c.x===0||c.y===0||c.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=c.x,this.y/=c.y,this.z/=c.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(c instanceof Array)if(c.every(function(y){return Number.isFinite(y)})&&c.every(function(y){return typeof y=="number"})){if(c.some(function(y){return y===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;c.length===1?(this.x/=c[0],this.y/=c[0],this.z/=c[0]):c.length===2?(this.x/=c[0],this.y/=c[1]):c.length===3&&(this.x/=c[0],this.y/=c[1],this.z/=c[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else{var g=Array.prototype.slice.call(arguments);if(g.every(function(y){return Number.isFinite(y)})&&g.every(function(y){return typeof y=="number"})){if(g.some(function(y){return y===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=c,this.y/=c,this.z/=c),arguments.length===2&&(this.x/=c,this.y/=h),arguments.length===3&&(this.x/=c,this.y/=h,this.z/=m)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number")}return this},n.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},n.default.Vector.prototype.magSq=function(){var c=this.x,h=this.y,m=this.z;return c*c+h*h+m*m},n.default.Vector.prototype.dot=function(c,h,m){return c instanceof n.default.Vector?this.dot(c.x,c.y,c.z):this.x*(c||0)+this.y*(h||0)+this.z*(m||0)},n.default.Vector.prototype.cross=function(g){var h=this.y*g.z-this.z*g.y,m=this.z*g.x-this.x*g.z,g=this.x*g.y-this.y*g.x;return this.isPInst?new n.default.Vector(this._fromRadians,this._toRadians,h,m,g):new n.default.Vector(h,m,g)},n.default.Vector.prototype.dist=function(c){return c.copy().sub(this).mag()},n.default.Vector.prototype.normalize=function(){var c=this.mag();return c!==0&&this.mult(1/c),this},n.default.Vector.prototype.limit=function(c){var h=this.magSq();return c*c<h&&this.div(Math.sqrt(h)).mult(c),this},n.default.Vector.prototype.setMag=function(c){return this.normalize().mult(c)},n.default.Vector.prototype.heading=function(){var c=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(c):c},n.default.Vector.prototype.setHeading=function(c){this.isPInst&&(c=this._toRadians(c));var h=this.mag();return this.x=h*Math.cos(c),this.y=h*Math.sin(c),this},n.default.Vector.prototype.rotate=function(h){var h=this.heading()+h,m=(this.isPInst&&(h=this._toRadians(h)),this.mag());return this.x=Math.cos(h)*m,this.y=Math.sin(h)*m,this},n.default.Vector.prototype.angleBetween=function(c){var h=this.dot(c)/(this.mag()*c.mag()),h=Math.acos(Math.min(1,Math.max(-1,h)));return h*=Math.sign(this.cross(c).z||1),h=this.isPInst?this._fromRadians(h):h},n.default.Vector.prototype.lerp=function(c,h,m,g){return c instanceof n.default.Vector?this.lerp(c.x,c.y,c.z,h):(this.x+=(c-this.x)*g||0,this.y+=(h-this.y)*g||0,this.z+=(m-this.z)*g||0,this)},n.default.Vector.prototype.reflect=function(c){return c.normalize(),this.sub(c.mult(2*this.dot(c)))},n.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},n.default.Vector.prototype.equals=function(_,h,m){var g,y,_=_ instanceof n.default.Vector?(g=_.x||0,y=_.y||0,_.z||0):_ instanceof Array?(g=_[0]||0,y=_[1]||0,_[2]||0):(g=_||0,y=h||0,m||0);return this.x===g&&this.y===y&&this.z===_},n.default.Vector.fromAngle=function(c,h){return new n.default.Vector((h=h===void 0?1:h)*Math.cos(c),h*Math.sin(c),0)},n.default.Vector.fromAngles=function(x,y,m){m===void 0&&(m=1);var g=Math.cos(y),y=Math.sin(y),_=Math.cos(x),x=Math.sin(x);return new n.default.Vector(m*x*y,-m*_,m*x*g)},n.default.Vector.random2D=function(){return this.fromAngle(Math.random()*a.TWO_PI)},n.default.Vector.random3D=function(){var c=Math.random()*a.TWO_PI,h=2*Math.random()-1,g=Math.sqrt(1-h*h),m=g*Math.cos(c),g=g*Math.sin(c);return new n.default.Vector(m,g,h)},n.default.Vector.add=function(c,h,m){return m?m.set(c):(m=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),m.add(h),m},n.default.Vector.rem=function(c,h){if(c instanceof n.default.Vector&&h instanceof n.default.Vector)return(c=c.copy()).rem(h),c},n.default.Vector.sub=function(c,h,m){return m?m.set(c):(m=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),m.sub(h),m},n.default.Vector.mult=function(c,h,m){return m?m.set(c):(m=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),m.mult(h),m},n.default.Vector.rotate=function(c,h,m){return arguments.length===2?m=c.copy():(m instanceof n.default.Vector||n.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),m.set(c)),m.rotate(h),m},n.default.Vector.div=function(c,h,m){return m?m.set(c):(m=c.copy(),arguments.length===3&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),m.div(h),m},n.default.Vector.dot=function(c,h){return c.dot(h)},n.default.Vector.cross=function(c,h){return c.cross(h)},n.default.Vector.dist=function(c,h){return c.dist(h)},n.default.Vector.lerp=function(c,h,m,g){return g?g.set(c):(g=c.copy(),arguments.length===4&&n.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),g.lerp(h,m),g},n.default.Vector.mag=function(g){var h=g.x,m=g.y,g=g.z;return Math.sqrt(h*h+m*m+g*g)},n.default.Vector.normalize=function(c,h){return arguments.length<2?h=c.copy():(h instanceof n.default.Vector||n.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),h.set(c)),h.normalize()};var l=n.default.Vector;d.default=l},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":168,"core-js/modules/es.number.constructor":169,"core-js/modules/es.number.is-finite":170,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],301:[function(f,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(f=f("../core/main"))&&f.__esModule?f:{default:f},i="_lcg_random_state",n=4294967296,a=0,f=(o.default.prototype._lcg=function(p){return this[p]=(1664525*this[p]+1013904223)%n,this[p]/n},o.default.prototype._lcgSetSeed=function(p,s){this[p]=(s??Math.random()*n)>>>0},o.default.prototype.randomSeed=function(p){this._lcgSetSeed(i,p),this._gaussian_previous=!1},o.default.prototype.random=function(p,s){var l,c;return o.default._validateParameters("random",arguments),l=this[i]!=null?this._lcg(i):Math.random(),p===void 0?l:s===void 0?p instanceof Array?p[Math.floor(l*p.length)]:l*p:(s<p&&(c=p,p=s,s=c),l*(s-p)+p)},o.default.prototype.randomGaussian=function(p){var s,l,c,h,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)s=a,this._gaussian_previous=!1;else{for(;1<=(h=(l=this.random(2)-1)*l+(c=this.random(2)-1)*c););s=l*(h=Math.sqrt(-2*Math.log(h)/h)),a=c*h,this._gaussian_previous=!0}return s*m+(p||0)},o.default);d.default=f},{"../core/main":267}],302:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}n.default.prototype._angleMode=a.RADIANS,n.default.prototype.acos=function(s){return this._fromRadians(Math.acos(s))},n.default.prototype.asin=function(s){return this._fromRadians(Math.asin(s))},n.default.prototype.atan=function(s){return this._fromRadians(Math.atan(s))},n.default.prototype.atan2=function(s,l){return this._fromRadians(Math.atan2(s,l))},n.default.prototype.cos=function(s){return Math.cos(this._toRadians(s))},n.default.prototype.sin=function(s){return Math.sin(this._toRadians(s))},n.default.prototype.tan=function(s){return Math.tan(this._toRadians(s))},n.default.prototype.degrees=function(s){return s*a.RAD_TO_DEG},n.default.prototype.radians=function(s){return s*a.DEG_TO_RAD},n.default.prototype.angleMode=function(s){if(n.default._validateParameters("angleMode",arguments),s===void 0)return this._angleMode;s!==a.DEGREES&&s!==a.RADIANS||(this._angleMode=s)},n.default.prototype._toRadians=function(s){return this._angleMode===a.DEGREES?s*a.DEG_TO_RAD:s},n.default.prototype._toDegrees=function(s){return this._angleMode===a.RADIANS?s*a.RAD_TO_DEG:s},n.default.prototype._fromRadians=function(s){return this._angleMode===a.DEGREES?s*a.RAD_TO_DEG:s};var p=n.default;d.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],303:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.textAlign=function(i,n){var a;return o.default._validateParameters("textAlign",arguments),(a=this._renderer).textAlign.apply(a,arguments)},o.default.prototype.textLeading=function(i){var n;return o.default._validateParameters("textLeading",arguments),(n=this._renderer).textLeading.apply(n,arguments)},o.default.prototype.textSize=function(i){var n;return o.default._validateParameters("textSize",arguments),(n=this._renderer).textSize.apply(n,arguments)},o.default.prototype.textStyle=function(i){var n;return o.default._validateParameters("textStyle",arguments),(n=this._renderer).textStyle.apply(n,arguments)},o.default.prototype.textWidth=function(){for(var i,n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return a[0]+="",o.default._validateParameters("textWidth",a),a[0].length===0?0:(i=this._renderer).textWidth.apply(i,a)},o.default.prototype.textAscent=function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return o.default._validateParameters("textAscent",n),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return o.default._validateParameters("textDescent",n),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(i){if(i!=="WORD"&&i!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(i)},e=o.default,d.default=e},{"../core/main":267}],304:[function(e,u,d){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(c)}function i(c){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=s(e("../core/constants")),f=s(e("opentype.js"));function p(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,p=function(){return c},c)}function s(c){if(c&&c.__esModule)return c;if(c===null||i(c)!=="object"&&typeof c!="function")return{default:c};var h=p();if(h&&h.has(c))return h.get(c);var m,g,y={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c)Object.prototype.hasOwnProperty.call(c,m)&&((g=_?Object.getOwnPropertyDescriptor(c,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=c[m]);return y.default=c,h&&h.set(c,y),y}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.loadFont=function(c,h,m){n.default._validateParameters("loadFont",arguments);var g=new n.default.Font(this),y=this;return f.load(c,function(w,j){if(w)return n.default._friendlyFileLoadError(4,c),m!==void 0?m(w):void console.error(w,c);g.font=j,h!==void 0&&h(g),y._decrementPreload();var w=c.split("\\").pop().split("/").pop(),j=w.lastIndexOf("."),E=j<1?null:w.slice(j+1);["ttf","otf","woff","woff2"].includes(E)&&(E=w.slice(0,j!==-1?j:0),(w=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(E,`;
src: url(`).concat(c,`);
}
`))),document.head.appendChild(w))}),g},n.default.prototype.text=function(c,h,m,g,y){var _;return n.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(_=this._renderer).text.apply(_,arguments):this},n.default.prototype.textFont=function(c,h){if(n.default._validateParameters("textFont",arguments),arguments.length){if(c)return this._renderer._setProperty("_textFont",c),h&&(this._renderer._setProperty("_textSize",h),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",h*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var l=n.default;d.default=l},{"../core/constants":256,"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,"opentype.js":241}],305:[function(e,u,d){function o(E){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(E)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var i=(i=e("../core/main"))&&i.__esModule?i:{default:i},n=function(E){if(E&&E.__esModule)return E;if(E===null||f(E)!=="object"&&typeof E!="function")return{default:E};var T=a();if(T&&T.has(E))return T.get(E);var A,R={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in E){var N;Object.prototype.hasOwnProperty.call(E,A)&&((N=P?Object.getOwnPropertyDescriptor(E,A):null)&&(N.get||N.set)?Object.defineProperty(R,A,N):R[A]=E[A])}return R.default=E,T&&T.set(E,R),R}(e("../core/constants"));function a(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,a=function(){return E},E)}function f(E){return(f=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(T){return o(T)}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":o(T)})(E)}function p(E,T){var A=E.length;return E[T<0?T%A+A:T%A]}function s(E,T,A,R){var P,N,O;return R?(s.tmpPoint1===void 0&&(s.tmpPoint1=[],s.tmpPoint2=[]),N=s.tmpPoint1,O=s.tmpPoint2,N.x=T.x-E.x,N.y=T.y-E.y,O.x=A.x-T.x,O.y=A.y-T.y,P=N.x*O.x+N.y*O.y,N=Math.sqrt(N.x*N.x+N.y*N.y),O=Math.sqrt(O.x*O.x+O.y*O.y),Math.acos(P/(N*O))<R):(T[0]-E[0])*(A[1]-E[1])-(A[0]-E[0])*(T[1]-E[1])==0}function l(L,F,I,V,J,N,O,D,U){var Y=1-U,W=Math.pow(Y,3),X=Math.pow(Y,2),ee=U*U,Z=ee*U,H=W*L+3*X*U*I+3*Y*U*U*J+Z*O,W=W*F+3*X*U*V+3*Y*U*U*N+Z*D,X=L+2*U*(I-L)+ee*(J-2*I+L),Z=F+2*U*(V-F)+ee*(N-2*V+F),q=I+2*U*(J-I)+ee*(O-2*J+I),ee=V+2*U*(N-V)+ee*(D-2*N+V),L=Y*L+U*I,I=Y*F+U*V,F=Y*J+U*O,V=Y*N+U*D,J=90-180*Math.atan2(X-q,Z-ee)/Math.PI;return(q<X||Z<ee)&&(J+=180),{x:H,y:W,m:{x:X,y:Z},n:{x:q,y:ee},start:{x:L,y:I},end:{x:F,y:V},alpha:J}}function c(E,T,A,R,P,N,O,D,U){return U==null?w(E,T,A,R,P,N,O,D):l(E,T,A,R,P,N,O,D,function(Y,H,W,X,Z,q,ee,L,I){if(!(I<0||w(Y,H,W,X,Z,q,ee,L)<I)){var F,V=.5,J=1-V;for(F=w(Y,H,W,X,Z,q,ee,L,J);.01<Math.abs(F-I);)F=w(Y,H,W,X,Z,q,ee,L,J+=(F<I?1:-1)*(V/=2));return J}}(E,T,A,R,P,N,O,D,U))}function h(E,T,A){for(var R,P,N,O,D,U=0,Y=0,H=(E=function(W,X){function Z(Ee,Se,Ie){var Oe,Xe;if(!Ee)return["C",Se.x,Se.y,Se.x,Se.y,Se.x,Se.y];switch(Ee[0]in{T:1,Q:1}||(Se.qx=Se.qy=null),Ee[0]){case"M":Se.X=Ee[1],Se.Y=Ee[2];break;case"A":Ee=["C"].concat(g.apply(0,[Se.x,Se.y].concat(Ee.slice(1))));break;case"S":Xe=Ie==="C"||Ie==="S"?(Oe=2*Se.x-Se.bx,2*Se.y-Se.by):(Oe=Se.x,Se.y),Ee=["C",Oe,Xe].concat(Ee.slice(1));break;case"T":Ie==="Q"||Ie==="T"?(Se.qx=2*Se.x-Se.qx,Se.qy=2*Se.y-Se.qy):(Se.qx=Se.x,Se.qy=Se.y),Ee=["C"].concat(x(Se.x,Se.y,Se.qx,Se.qy,Ee[1],Ee[2]));break;case"Q":Se.qx=Ee[1],Se.qy=Ee[2],Ee=["C"].concat(x(Se.x,Se.y,Ee[1],Ee[2],Ee[3],Ee[4]));break;case"L":Ee=["C"].concat(_(Se.x,Se.y,Ee[1],Ee[2]));break;case"H":Ee=["C"].concat(_(Se.x,Se.y,Ee[1],Se.y));break;case"V":Ee=["C"].concat(_(Se.x,Se.y,Se.x,Ee[1]));break;case"Z":Ee=["C"].concat(_(Se.x,Se.y,Se.X,Se.Y))}return Ee}function q(Ee,Se){if(7<Ee[Se].length){Ee[Se].shift();for(var Ie=Ee[Se];Ie.length;)le[Se]="A",F&&(ce[Se]="A"),Ee.splice(Se++,0,["C"].concat(Ie.splice(0,6)));Ee.splice(Se,1),L=Math.max(I.length,F&&F.length||0)}}function ee(Ee,Se,Ie,Oe,Xe){Ee&&Se&&Ee[Xe][0]==="M"&&Se[Xe][0]!=="M"&&(Se.splice(Xe,0,["M",Oe.x,Oe.y]),Ie.bx=0,Ie.by=0,Ie.x=Ee[Xe][1],Ie.y=Ee[Xe][2],L=Math.max(I.length,F&&F.length||0))}var L,I=m(W),F=X&&m(X),V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},J={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},le=[],ce=[],ue="",re="";L=Math.max(I.length,F&&F.length||0);for(var de=0;de<L;de++){(ue=I[de]?I[de][0]:ue)!=="C"&&(le[de]=ue,de&&(re=le[de-1])),I[de]=Z(I[de],V,re),le[de]!=="A"&&ue==="C"&&(le[de]="C"),q(I,de),F&&((ue=F[de]?F[de][0]:ue)!=="C"&&(ce[de]=ue,de&&(re=ce[de-1])),F[de]=Z(F[de],J,re),ce[de]!=="A"&&ue==="C"&&(ce[de]="C"),q(F,de)),ee(I,F,V,J,de),ee(F,I,J,V,de);var be=I[de],ie=F&&F[de],xe=be.length,Me=F&&ie.length;V.x=be[xe-2],V.y=be[xe-1],V.bx=parseFloat(be[xe-4])||V.x,V.by=parseFloat(be[xe-3])||V.y,J.bx=F&&(parseFloat(ie[Me-4])||J.x),J.by=F&&(parseFloat(ie[Me-3])||J.y),J.x=F&&ie[Me-2],J.y=F&&ie[Me-1]}return F?[I,F]:I}(E)).length;Y<H;Y++){if((N=E[Y])[0]==="M")R=+N[1],P=+N[2];else{if(T<U+(O=c(R,P,N[1],N[2],N[3],N[4],N[5],N[6]))&&!A)return{x:(D=c(R,P,N[1],N[2],N[3],N[4],N[5],N[6],T-U)).x,y:D.y,alpha:D.alpha};U+=O,R=+N[5],P=+N[6]}N.shift()}return D=(D=A?U:l(R,P,N[0],N[1],N[2],N[3],N[4],N[5],1)).alpha?{x:D.x,y:D.y,alpha:D.alpha}:D}function m(E){var T=[],A=0,R=0,P=0,N=0,O=0;if(E){E[0][0]==="M"&&(P=A=+E[0][1],N=R=+E[0][2],O++,T[0]=["M",A,R]);for(var D,U,Y=E.length===3&&E[0][0]==="M"&&E[1][0].toUpperCase()==="R"&&E[2][0].toUpperCase()==="Z",H=O,W=E.length;H<W;H++){if(T.push(D=[]),(U=E[H])[0]!==String.prototype.toUpperCase.call(U[0]))switch(D[0]=String.prototype.toUpperCase.call(U[0]),D[0]){case"A":D[1]=U[1],D[2]=U[2],D[3]=U[3],D[4]=U[4],D[5]=U[5],D[6]=+(U[6]+A),D[7]=+(U[7]+R);break;case"V":D[1]=+U[1]+R;break;case"H":D[1]=+U[1]+A;break;case"R":for(var X,Z=2,q=(X=[A,R].concat(U.slice(1))).length;Z<q;Z++)X[Z]=+X[Z]+A,X[++Z]=+X[Z]+R;T.pop(),T=T.concat(y(X,Y));break;case"M":P=+U[1]+A,N=+U[2]+R;break;default:for(var ee=1,L=U.length;ee<L;ee++)D[ee]=+U[ee]+(ee%2?A:R)}else if(U[0]==="R")X=[A,R].concat(U.slice(1)),T.pop(),T=T.concat(y(X,Y)),D=["R"].concat(U.slice(-2));else for(var I=0,F=U.length;I<F;I++)D[I]=U[I];switch(D[0]){case"Z":A=P,R=N;break;case"H":A=D[1];break;case"V":R=D[1];break;case"M":P=D[D.length-2],N=D[D.length-1];break;default:A=D[D.length-2],R=D[D.length-1]}}}return T}function g(E,T,A,R,F,le,V,D,U,Y){function H(Me,Ee,Se){return{x:Me*Math.cos(Se)-Ee*Math.sin(Se),y:Me*Math.sin(Se)+Ee*Math.cos(Se)}}var W,L=Math.PI,I=120*L/180,X=L/180*(+F||0),Z=[],q=(Y?(de=Y[0],W=Y[1],ue=Y[2],re=Y[3]):(E=(J=H(E,T,-X)).x,T=J.y,1<(q=(ee=(E-(D=(J=H(D,U,-X)).x))/2)*ee/(A*A)+(J=(T-(U=J.y))/2)*J/(R*R))&&(A*=q=Math.sqrt(q),R*=q),q=A*A,ce=R*R,ue=(le=(le===V?-1:1)*Math.sqrt(Math.abs((q*ce-q*J*J-ce*ee*ee)/(q*J*J+ce*ee*ee))))*A*J/R+(E+D)/2,re=le*-R*ee/A+(T+U)/2,de=Math.asin(((T-re)/R).toFixed(9)),W=Math.asin(((U-re)/R).toFixed(9)),(de=E<ue?L-de:de)<0&&(de=2*L+de),(W=D<ue?L-W:W)<0&&(W=2*L+W),V&&W<de&&(de-=2*L),!V&&de<W&&(W-=2*L)),W-de),ee=(Math.abs(q)>I&&(ce=W,J=D,le=U,W=de+I*(V&&de<W?1:-1),Z=g(D=ue+A*Math.cos(W),U=re+R*Math.sin(W),A,R,F,0,V,J,le,[W,ce,ue,re])),q=W-de,Math.cos(de)),L=Math.sin(de),I=Math.cos(W),F=Math.sin(W),V=Math.tan(q/4),J=4/3*A*V,le=4/3*R*V,ce=[E,T],ue=[E+J*L,T-le*ee],re=[D+J*F,U-le*I],de=[D,U];if(ue[0]=2*ce[0]-ue[0],ue[1]=2*ce[1]-ue[1],Y)return[ue,re,de].concat(Z);for(var be=[],ie=0,xe=(Z=[ue,re,de].concat(Z).join().split(",")).length;ie<xe;ie++)be[ie]=ie%2?H(Z[ie-1],Z[ie],X).y:H(Z[ie],Z[ie+1],X).x;return be}function y(E,T){for(var A=[],R=0,P=E.length;R<P-2*!T;R+=2){var N=[{x:+E[R-2],y:+E[R-1]},{x:+E[R],y:+E[R+1]},{x:+E[R+2],y:+E[R+3]},{x:+E[R+4],y:+E[R+5]}];T?R?P-4===R?N[3]={x:+E[0],y:+E[1]}:P-2===R&&(N[2]={x:+E[0],y:+E[1]},N[3]={x:+E[2],y:+E[3]}):N[0]={x:+E[P-2],y:+E[P-1]}:P-4===R?N[3]=N[2]:R||(N[0]={x:+E[R],y:+E[R+1]}),A.push(["C",(-N[0].x+6*N[1].x+N[2].x)/6,(-N[0].y+6*N[1].y+N[2].y)/6,(N[1].x+6*N[2].x-N[3].x)/6,(N[1].y+6*N[2].y-N[3].y)/6,N[2].x,N[2].y])}return A}function _(E,T,A,R){return[E,T,A,R,A,R]}function x(E,T,A,R,P,N){return[1/3*E+2/3*A,1/3*T+2/3*R,1/3*P+2/3*A,1/3*N+2/3*R,P,N]}function w(E,T,A,R,P,N,O,D,U){for(var Y=(U=1<(U=U??1)?1:U<0?0:U)/2,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],W=0,X=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Z=0;Z<12;Z++){var ee=Y*H[Z]+Y,q=j(ee,E,A,P,O),ee=j(ee,T,R,N,D);W+=X[Z]*Math.sqrt(q*q+ee*ee)}return Y*W}function j(E,T,A,R,P){return E*(E*(-3*T+9*A-9*R+3*P)+6*T-12*A+6*R)-3*T+3*A}i.default.Font=function(E){this.parent=E,this.cache={},this.font=void 0},i.default.Font.prototype.textBounds=function(E){var T=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,O=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,P=R&&R.renderer&&R.renderer._pInst||this.parent,N=P._renderer.drawingContext,O=(N.textAlign||n.LEFT,N.textBaseline||n.BASELINE,O||P._renderer._textSize);if(!I){for(var D=[],U=[],Y=[],H=(Y[0]=[],[]),W=this._scale(O),X=P._renderer.textLeading(),Z=0,q=(this.font.forEachGlyph(E,T,A,O,R,function(J,le,ce,ue){var re=J.getMetrics();J.index===0||J.index===10?Y[Z+=1]=[]:(Y[Z].push(le+re.xMin*W),Y[Z].push(le+re.xMax*W),H.push(ce+Z*X+-re.yMin*W),H.push(ce+Z*X+-re.yMax*W))}),0<Y[Z].length&&(D[Z]=Math.min.apply(null,Y[Z]),U[Z]=Math.max.apply(null,Y[Z])),0),ee=0;ee<=Z;ee++){D[ee]=Math.min.apply(null,Y[ee]),U[ee]=Math.max.apply(null,Y[ee]);var L=U[ee]-D[ee];q<L&&(q=L)}var N=Math.min.apply(null,D),I={x:N,y:A=Math.min.apply(null,H),h:Math.max.apply(null,H)-A,w:q,advance:N-T},O=this._handleAlignment(P._renderer,E,I.x,I.y,I.w+I.advance);I.x=O.x,I.y=O.y}return I},i.default.Font.prototype.textToPoints=function(E,T,A,R,P){var N=0,O=[],D=this._getGlyphs(E);R=R||this.parent._renderer._textSize;for(var U,Y=0;Y<D.length;Y++){if(!(D[U=Y].name&&D[U].name==="space"||E.length===D.length&&E[U]===" "))for(var H=function(q){for(var ee,L=[],I=0;I<q.length;I++)q[I].type==="M"&&(ee&&L.push(ee),ee=[]),ee.push(function(F){var V=[F.type];return F.type==="M"||F.type==="L"?V.push(F.x,F.y):F.type==="C"?V.push(F.x1,F.y1,F.x2,F.y2,F.x,F.y):F.type==="Q"&&V.push(F.x1,F.y1,F.x,F.y),V}(q[I]));return L.push(ee),L}(D[Y].getPath(T,A,R).commands),W=0;W<H.length;W++)for(var X=function(q,ee){for(var ee=function(le,ce){if(f(le)!=="object")le=ce;else for(var ue in ce)le[ue]===void 0&&(le[ue]=ce[ue]);return le}(ee,{sampleFactor:.1,simplifyThreshold:0}),L=h(q,0,1),I=L/(L*ee.sampleFactor),F=[],V=0;V<L;V+=I)F.push(h(q,V));return ee.simplifyThreshold&&function(J){for(var le=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ce=0,ue=J.length-1;3<J.length&&0<=ue;--ue)s(p(J,ue-1),p(J,ue),p(J,ue+1),le)&&(J.splice(ue%J.length,1),ce++)}(F,ee.simplifyThreshold),F}(H[W],P),Z=0;Z<X.length;Z++)X[Z].x+=N,O.push(X[Z]);N+=D[Y].advanceWidth*this._scale(R)}return O},i.default.Font.prototype._getGlyphs=function(E){return this.font.stringToGlyphs(E)},i.default.Font.prototype._getPath=function(E,N,A,R){var P=(R&&R.renderer&&R.renderer._pInst||this.parent)._renderer,N=this._handleAlignment(P,E,N,A);return this.font.getPath(E,N.x,N.y,P._textSize,R)},i.default.Font.prototype._getPathData=function(E,T,A,R){var P=3;return typeof E=="string"&&2<arguments.length?E=this._getPath(E,T,A,R):f(T)==="object"&&(R=T),R&&typeof R.decimals=="number"&&(P=R.decimals),E.toPathData(P)},i.default.Font.prototype._getSVG=function(E,T,A,R){var P=3;return typeof E=="string"&&2<arguments.length?E=this._getPath(E,T,A,R):f(T)==="object"&&(R=T),R&&(typeof R.decimals=="number"&&(P=R.decimals),typeof R.strokeWidth=="number"&&(E.strokeWidth=R.strokeWidth),R.fill!==void 0&&(E.fill=R.fill),R.stroke!==void 0&&(E.stroke=R.stroke)),E.toSVG(P)},i.default.Font.prototype._renderPath=function(O,U,Y,R){var P=R&&R.renderer||this.parent._renderer,N=P.drawingContext,O=(f(O)==="object"&&O.commands?O:this._getPath(O,U,Y,R)).commands,D=(N.beginPath(),!0),U=!1,Y=void 0;try{for(var H,W=O[Symbol.iterator]();!(D=(H=W.next()).done);D=!0){var X=H.value;X.type==="M"?N.moveTo(X.x,X.y):X.type==="L"?N.lineTo(X.x,X.y):X.type==="C"?N.bezierCurveTo(X.x1,X.y1,X.x2,X.y2,X.x,X.y):X.type==="Q"?N.quadraticCurveTo(X.x1,X.y1,X.x,X.y):X.type==="Z"&&N.closePath()}}catch(Z){U=!0,Y=Z}finally{try{D||W.return==null||W.return()}finally{if(U)throw Y}}return P._doStroke&&P._strokeSet&&N.stroke(),P._doFill&&(P._fillSet||P._setFill(n._DEFAULT_TEXT_FILL),N.fill()),this},i.default.Font.prototype._textWidth=function(E,T){return this.font.getAdvanceWidth(E,T)},i.default.Font.prototype._textAscent=function(E){return this.font.ascender*this._scale(E)},i.default.Font.prototype._textDescent=function(E){return-this.font.descender*this._scale(E)},i.default.Font.prototype._scale=function(E){return 1/this.font.unitsPerEm*(E||this.parent._renderer._textSize)},i.default.Font.prototype._handleAlignment=function(E,T,A,R,P){var N=E._textSize;switch(P===void 0&&(P=this._textWidth(T,N)),E._textAlign){case n.CENTER:A-=P/2;break;case n.RIGHT:A-=P}switch(E._textBaseline){case n.TOP:R+=this._textAscent(N);break;case n.CENTER:R+=this._textAscent(N)/2;break;case n.BOTTOM:R-=this._textDescent(N)}return{x:A,y:R}},e=i.default,d.default=e},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":165,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],306:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.append=function(o,i){return o.push(i),o},e.default.prototype.arrayCopy=function(o,i,n,a,f){var p,s;o=f!==void 0?(s=Math.min(f,o.length),p=a,o.slice(i,s+i)):(s=n!==void 0?(s=n,Math.min(s,o.length)):o.length,n=i,o.slice(p=0,s)),Array.prototype.splice.apply(n,[p,s].concat(o))},e.default.prototype.concat=function(o,i){return o.concat(i)},e.default.prototype.reverse=function(o){return o.reverse()},e.default.prototype.shorten=function(o){return o.pop(),o},e.default.prototype.shuffle=function(o,i){for(var n,a,f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o),p=(o=i||f?o:o.slice()).length;1<p;)n=this.random(0,1)*p|0,a=o[--p],o[p]=o[n],o[n]=a;return o},e.default.prototype.sort=function(o,a){var n=a?o.slice(0,Math.min(a,o.length)):o,a=a?o.slice(Math.min(a,o.length)):[];return(n=typeof n[0]=="string"?n.sort():n.sort(function(f,p){return f-p})).concat(a)},e.default.prototype.splice=function(o,i,n){return Array.prototype.splice.apply(o,[n,0].concat(i)),o},e.default.prototype.subset=function(o,i,n){return n!==void 0?o.slice(i,i+n):o.slice(i,o.length)},e=e.default,d.default=e},{"../core/main":267,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],307:[function(e,u,d){e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.float=function(i){return i instanceof Array?i.map(parseFloat):parseFloat(i)},o.default.prototype.int=function(i){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return i===1/0||i==="Infinity"?1/0:i===-1/0||i==="-Infinity"?-1/0:typeof i=="string"?parseInt(i,n):typeof i=="number"?0|i:typeof i=="boolean"?i?1:0:i instanceof Array?i.map(function(a){return o.default.prototype.int(a,n)}):void 0},o.default.prototype.str=function(i){return i instanceof Array?i.map(o.default.prototype.str):String(i)},o.default.prototype.boolean=function(i){return typeof i=="number"?i!==0:typeof i=="string"?i.toLowerCase()==="true":typeof i=="boolean"?i:i instanceof Array?i.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(i){return i=o.default.prototype.int(i,10),typeof i=="number"?(i+128)%256-128:i instanceof Array?i.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(i){return typeof i!="number"||isNaN(i)?i instanceof Array?i.map(o.default.prototype.char):typeof i=="string"?o.default.prototype.char(parseInt(i,10)):void 0:String.fromCharCode(i)},o.default.prototype.unchar=function(i){return typeof i=="string"&&i.length===1?i.charCodeAt(0):i instanceof Array?i.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(i,n){if(n=n??8,i instanceof Array)return i.map(function(f){return o.default.prototype.hex(f,n)});if(i===1/0||i===-1/0)return(i===1/0?"F":"0").repeat(n);if(typeof i=="number"){i<0&&(i=4294967295+i+1);for(var a=Number(i).toString(16).toUpperCase();a.length<n;)a="0".concat(a);return a=a.length>=n?a.substring(a.length-n,a.length):a}},o.default.prototype.unhex=function(i){return i instanceof Array?i.map(o.default.prototype.unhex):parseInt("0x".concat(i),16)},e=o.default,d.default=e},{"../core/main":267,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":169,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],308:[function(e,u,d){e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(p=e("../core/main"))&&p.__esModule?p:{default:p};function i(m,l,c){var h=m<0,m=h?m.toString().substring(1):m.toString(),g=m.indexOf("."),y=g!==-1?m.substring(0,g):m,_=g!==-1?m.substring(g+1):"",x=h?"-":"";if(c!==void 0){h="",(g!==-1||0<c-_.length)&&(h="."),_.length>c&&(_=_.substring(0,c));for(var w=0;w<l-y.length;w++)x+="0";for(var x=(x+=y)+h+_,j=0;j<c-_.length;j++)x+="0";return x}for(var E=0;E<Math.max(l-y.length,0);E++)x+="0";return x+=m}function n(m,l){var c=(m=m.toString()).indexOf("."),h=c!==-1?m.substring(c):"",m=(m=c!==-1?m.substring(0,c):m).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(l===0)h="";else if(l!==void 0)if(l>h.length)for(var g=l-(h+=c===-1?".":"").length+1,y=0;y<g;y++)h+="0";else h=h.substring(0,l+1);return m+h}function a(s){return 0<parseFloat(s)?"+".concat(s.toString()):s.toString()}function f(s){return 0<=parseFloat(s)?" ".concat(s.toString()):s.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.join=function(s,l){return o.default._validateParameters("join",arguments),s.join(l)},o.default.prototype.match=function(s,l){return o.default._validateParameters("match",arguments),s.match(l)},o.default.prototype.matchAll=function(s,l){o.default._validateParameters("matchAll",arguments);for(var c=new RegExp(l,"g"),h=c.exec(s),m=[];h!==null;)m.push(h),h=c.exec(s);return m},o.default.prototype.nf=function(s,l,c){return o.default._validateParameters("nf",arguments),s instanceof Array?s.map(function(h){return i(h,l,c)}):Object.prototype.toString.call(s)==="[object Arguments]"?s.length===3?this.nf(s[0],s[1],s[2]):s.length===2?this.nf(s[0],s[1]):this.nf(s[0]):i(s,l,c)},o.default.prototype.nfc=function(s,l){return o.default._validateParameters("nfc",arguments),s instanceof Array?s.map(function(c){return n(c,l)}):n(s,l)},o.default.prototype.nfp=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];o.default._validateParameters("nfp",l);var h=o.default.prototype.nf.apply(this,l);return h instanceof Array?h.map(a):a(h)},o.default.prototype.nfs=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];o.default._validateParameters("nfs",l);var h=o.default.prototype.nf.apply(this,l);return h instanceof Array?h.map(f):f(h)},o.default.prototype.split=function(s,l){return o.default._validateParameters("split",arguments),s.split(l)},o.default.prototype.splitTokens=function(s,l){var c,h;return o.default._validateParameters("splitTokens",arguments),h=l!==void 0?(h=/\]/g.exec(l=l),(c=/\[/g.exec(l))&&h?(l=l.slice(0,h.index)+l.slice(h.index+1),c=/\[/g.exec(l),l=l.slice(0,c.index)+l.slice(c.index+1),new RegExp("[\\[".concat(l,"\\]]"),"g")):h?(l=l.slice(0,h.index)+l.slice(h.index+1),new RegExp("[".concat(l,"\\]]"),"g")):c?(l=l.slice(0,c.index)+l.slice(c.index+1),new RegExp("[".concat(l,"\\[]"),"g")):new RegExp("[".concat(l,"]"),"g")):/\s/g,s.split(h).filter(function(m){return m})},o.default.prototype.trim=function(s){return o.default._validateParameters("trim",arguments),s instanceof Array?s.map(this.trim):s.trim()};var p=o.default;d.default=p},{"../core/friendly_errors/fes_core":258,"../core/friendly_errors/file_errors":259,"../core/friendly_errors/validate_params":262,"../core/main":267,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],309:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.prototype.day=function(){return new Date().getDate()},e.default.prototype.hour=function(){return new Date().getHours()},e.default.prototype.minute=function(){return new Date().getMinutes()},e.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return new Date().getMonth()+1},e.default.prototype.second=function(){return new Date().getSeconds()},e.default.prototype.year=function(){return new Date().getFullYear()},e=e.default,d.default=e},{"../core/main":267}],310:[function(e,u,d){function o(l){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(l)}function i(l){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(c){return o(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":o(c)})(l)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(s=e("../core/main"))&&s.__esModule?s:{default:s},a=(e("./p5.Geometry"),function(l){if(l&&l.__esModule)return l;if(l===null||i(l)!=="object"&&typeof l!="function")return{default:l};var c=f();if(c&&c.has(l))return c.get(l);var h,m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in l){var y;Object.prototype.hasOwnProperty.call(l,h)&&((y=g?Object.getOwnPropertyDescriptor(l,h):null)&&(y.get||y.set)?Object.defineProperty(m,h,y):m[h]=l[h])}return m.default=l,c&&c.set(l,m),m}(e("../core/constants")));function f(){var l;return typeof WeakMap!="function"?null:(l=new WeakMap,f=function(){return l},l)}n.default.prototype.plane=function(l,c,h,m){this._assert3d("plane"),n.default._validateParameters("plane",arguments),l===void 0&&(l=50),c===void 0&&(c=l),m===void 0&&(m=1);var g,y="plane|".concat(h=h===void 0?1:h,"|").concat(m);return this._renderer.geometryInHash(y)||((g=new n.default.Geometry(h,m,function(){for(var _,x,w=0;w<=this.detailY;w++)for(var j=w/this.detailY,E=0;E<=this.detailX;E++)_=E/this.detailX,x=new n.default.Vector(_-.5,j-.5,0),this.vertices.push(x),this.uvs.push(_,j)})).computeFaces().computeNormals(),h<=1&&m<=1?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,g)),this._renderer.drawBuffersScaled(y,l,c,1),this},n.default.prototype.box=function(l,c,h,m,g){this._assert3d("box"),n.default._validateParameters("box",arguments),l===void 0&&(l=50),c===void 0&&(c=l),h===void 0&&(h=c);var y,_=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,_=(g===void 0&&(g=_?1:4),"box|".concat(m=m===void 0?_?1:4:m,"|").concat(g));return this._renderer.geometryInHash(_)||((y=new n.default.Geometry(m,g,function(){var x=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var w=0;w<x.length;w++){for(var j=x[w],E=4*w,T=0;T<4;T++){var A=j[T],A=new n.default.Vector((2*(1&A)-1)/2,((2&A)-1)/2,((4&A)/2-1)/2);this.vertices.push(A),this.uvs.push(1&T,(2&T)/2)}this.faces.push([E,1+E,2+E]),this.faces.push([2+E,1+E,3+E])}})).computeNormals(),m<=4&&g<=4?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(_,y)),this._renderer.drawBuffersScaled(_,l,c,h),this},n.default.prototype.sphere=function(l,c,h){return this._assert3d("sphere"),n.default._validateParameters("sphere",arguments),this.ellipsoid(l=l===void 0?50:l,l,l,c=c===void 0?24:c,h=h===void 0?16:h),this};function p(l,c,h,m,g,y,_){l=l<=0?1:l,c=c<0?0:c,h=h<=0?l:h,m=m<3?3:m;for(var x,w,j=(y=y===void 0||y)?-2:0,E=(g=g<1?1:g)+((_=_===void 0?c!==0:_)?2:0),T=Math.atan2(l-c,h),A=Math.sin(T),R=Math.cos(T),P=j;P<=E;++P){var N=P/g,O=h*N,D=void 0,D=P<0?(N=O=0,l):g<P?(O=h,N=1,c):l+(c-l)*N;for(P!==-2&&P!==g+2||(D=0),O-=h/2,x=0;x<m;++x){var U=x/(m-1),H=2*Math.PI*U,Y=Math.sin(H),H=Math.cos(H),W=(this.vertices.push(new n.default.Vector(Y*D,O,H*D)),void 0),W=P<0?new n.default.Vector(0,-1,0):g<P&&c?new n.default.Vector(0,1,0):new n.default.Vector(Y*R,A,H*R);this.vertexNormals.push(W),this.uvs.push(U,N)}}var X=0;if(y){for(w=0;w<m;++w)this.faces.push([X+w,X+m+(w+1)%m,X+m+w]);X+=2*m}for(P=0;P<g;++P){for(x=0;x<m;++x){var Z=(x+1)%m;this.faces.push([X+x,X+Z,X+m+Z]),this.faces.push([X+x,X+m+Z,X+m+x])}X+=m}if(_)for(X+=m,x=0;x<m;++x)this.faces.push([X+x,X+(x+1)%m,X+m])}n.default.prototype.cylinder=function(l,c,h,m,g,y){this._assert3d("cylinder"),n.default._validateParameters("cylinder",arguments),l===void 0&&(l=50),c===void 0&&(c=l),m===void 0&&(m=1),y===void 0&&(y=!0),g===void 0&&(g=!0);var _,x="cylinder|".concat(h=h===void 0?24:h,"|").concat(m,"|").concat(g,"|").concat(y);return this._renderer.geometryInHash(x)||(_=new n.default.Geometry(h,m),p.call(_,1,1,1,h,m,g,y),h<=24&&m<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(x,_)),this._renderer.drawBuffersScaled(x,l,c,l),this},n.default.prototype.cone=function(l,c,h,m,g){this._assert3d("cone"),n.default._validateParameters("cone",arguments),l===void 0&&(l=50),c===void 0&&(c=l),m===void 0&&(m=1),g===void 0&&(g=!0);var y,_="cone|".concat(h=h===void 0?24:h,"|").concat(m,"|").concat(g);return this._renderer.geometryInHash(_)||(y=new n.default.Geometry(h,m),p.call(y,1,0,1,h,m,g,!1),h<=24&&m<=16?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,y)),this._renderer.drawBuffersScaled(_,l,c,l),this},n.default.prototype.ellipsoid=function(l,c,h,m,g){this._assert3d("ellipsoid"),n.default._validateParameters("ellipsoid",arguments),l===void 0&&(l=50),c===void 0&&(c=l),h===void 0&&(h=l),g===void 0&&(g=16);var y,_="ellipsoid|".concat(m=m===void 0?24:m,"|").concat(g);return this._renderer.geometryInHash(_)||((y=new n.default.Geometry(m,g,function(){for(var x=0;x<=this.detailY;x++)for(var w=x/this.detailY,j=Math.PI*w-Math.PI/2,E=Math.cos(j),T=Math.sin(j),A=0;A<=this.detailX;A++){var R=A/this.detailX,N=2*Math.PI*R,P=Math.cos(N),N=Math.sin(N),N=new n.default.Vector(E*N,T,E*P);this.vertices.push(N),this.vertexNormals.push(N),this.uvs.push(R,w)}})).computeFaces(),m<=24&&g<=24?y._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(_,y)),this._renderer.drawBuffersScaled(_,l,c,h),this},n.default.prototype.torus=function(l,_,h,m){if(this._assert3d("torus"),n.default._validateParameters("torus",arguments),l===void 0)l=50;else if(!l)return;if(_===void 0)_=10;else if(!_)return;h===void 0&&(h=24),m===void 0&&(m=16);var g,y=(_/l).toPrecision(4),_="torus|".concat(y,"|").concat(h,"|").concat(m);return this._renderer.geometryInHash(_)||((g=new n.default.Geometry(h,m,function(){for(var x=0;x<=this.detailY;x++)for(var w=x/this.detailY,j=2*Math.PI*w,E=Math.cos(j),T=Math.sin(j),A=1+y*E,R=0;R<=this.detailX;R++){var P=R/this.detailX,N=2*Math.PI*P,D=Math.cos(N),N=Math.sin(N),O=new n.default.Vector(A*D,A*N,y*T),D=new n.default.Vector(E*D,E*N,T);this.vertices.push(O),this.vertexNormals.push(D),this.uvs.push(P,w)}})).computeFaces(),h<=24&&m<=16?g._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(_,g)),this._renderer.drawBuffersScaled(_,l,l,l),this},n.default.RendererGL.prototype.point=function(l,c,h){var m=[];return m.push(new n.default.Vector(l,c,h=h===void 0?0:h)),this._drawPoints(m,this.immediateMode.buffers.point),this},n.default.RendererGL.prototype.triangle=function(_){var c=_[0],h=_[1],m=_[2],g=_[3],y=_[4],_=_[5],x=(this.geometryInHash("tri")||((x=new n.default.Geometry(1,1,function(){var j=[];j.push(new n.default.Vector(0,0,0)),j.push(new n.default.Vector(0,1,0)),j.push(new n.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=j,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}))._makeTriangleEdges()._edgesToVertices(),x.computeNormals(),this.createBuffers("tri",x)),this.uMVMatrix.copy());try{var w=new n.default.Matrix([m-c,g-h,0,0,y-c,_-h,0,0,0,0,1,0,c,h,0,1]).mult(this.uMVMatrix);this.uMVMatrix=w,this.drawBuffers("tri")}finally{this.uMVMatrix=x}return this},n.default.RendererGL.prototype.ellipse=function(l){this.arc(l[0],l[1],l[2],l[3],0,a.TWO_PI,a.OPEN,l[4])},n.default.RendererGL.prototype.arc=function(l){var c,h=arguments[1],m=arguments[2],g=arguments[3],y=arguments[4],_=arguments[5],x=arguments[6],w=arguments[7]||25,j=(Math.abs(_-y)>=a.TWO_PI?"".concat(E="ellipse","|"):"".concat(E="arc","|").concat(y,"|").concat(_,"|").concat(x,"|")).concat(w,"|"),E=(this.geometryInHash(j)||((c=new n.default.Geometry(w,1,function(){if(this.strokeIndices=[],y.toFixed(10)!==_.toFixed(10)){x!==a.PIE&&x!==void 0||(this.vertices.push(new n.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=w;T++){var R=(_-y)*(T/w)+y,A=.5+Math.cos(R)/2,R=.5+Math.sin(R)/2;this.vertices.push(new n.default.Vector(A,R,0)),this.uvs.push([A,R]),T<w-1&&(this.faces.push([0,T+1,T+2]),this.strokeIndices.push([T+1,T+2]))}switch(x){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),w<=50?c._makeTriangleEdges()._edgesToVertices(c):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(E," with more than 50 detail")),this.createBuffers(j,c)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([l,h,0]),this.uMVMatrix.scale(m,g,1),this.drawBuffers(j)}finally{this.uMVMatrix=E}return this},n.default.RendererGL.prototype.rect=function(l){var c=l[0],h=l[1],m=l[2],g=l[3];if(l[4]===void 0){var x=this._pInst._glAttributes.perPixelLighting,y=l[4]||(x?1:24),_=l[5]||(x?1:16),x="rect|".concat(y,"|").concat(_),w=(this.geometryInHash(x)||((w=new n.default.Geometry(y,_,function(){for(var W=0;W<=this.detailY;W++)for(var X=W/this.detailY,Z=0;Z<=this.detailX;Z++){var q=Z/this.detailX,ee=new n.default.Vector(q,X,0);this.vertices.push(ee),this.uvs.push(q,X)}0<y&&0<_&&(this.strokeIndices=[[0,y],[y,(y+1)*(_+1)-1],[(y+1)*(_+1)-1,(y+1)*_],[(y+1)*_,0]])})).computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(x,w)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([c,h,0]),this.uMVMatrix.scale(m,g,1),this.drawBuffers(x)}finally{this.uMVMatrix=w}}else{var x=l[4],w=l[5]===void 0?x:l[5],j=l[6]===void 0?w:l[6],l=l[7]===void 0?j:l[7],N=m,E=g,R=((N+=c)<c&&(R=c,c=N,N=R),(E+=h)<h&&(R=h,h=E,E=R),Math.min((N-c)/2,(E-h)/2)),T=(R<x&&(x=R),R<w&&(w=R),R<j&&(j=R),R<l&&(l=R),c),A=h,R=N,c=E,P=(this.beginShape(),w!==0?(this.vertex(R-w,A),this.quadraticVertex(R,A,R,A+w)):this.vertex(R,A),j!==0?(this.vertex(R,c-j),this.quadraticVertex(R,c,R-j,c)):this.vertex(R,c),l!==0?(this.vertex(T+l,c),this.quadraticVertex(T,c,T,c-l)):this.vertex(T,c),x!==0?(this.vertex(T,A+x),this.quadraticVertex(T,A,T+x,A)):this.vertex(T,A),!(this.immediateMode.geometry.uvs.length=0)),h=!1,N=void 0;try{for(var O,D=this.immediateMode.geometry.vertices[Symbol.iterator]();!(P=(O=D.next()).done);P=!0){var U=O.value,Y=(U.x-T)/m,H=(U.y-A)/g;this.immediateMode.geometry.uvs.push(Y,H)}}catch(L){h=!0,N=L}finally{try{P||D.return==null||D.return()}finally{if(h)throw N}}this.endShape(a.CLOSE)}return this},n.default.RendererGL.prototype.quad=function(l,c,h,m,g,y,_,x,w,j,E,T,A,R){A===void 0&&(A=2),R===void 0&&(R=2);var P="quad|".concat(l,"|").concat(c,"|").concat(h,"|").concat(m,"|").concat(g,"|").concat(y,"|").concat(_,"|").concat(x,"|").concat(w,"|").concat(j,"|").concat(E,"|").concat(T,"|").concat(A,"|").concat(R);if(!this.geometryInHash(P)){var N=new n.default.Geometry(A,R,function(){for(var W=1/(this.detailX-1),X=1/(this.detailY-1),Z=0;Z<this.detailY;Z++)for(var q=0;q<this.detailX;q++){var ee=q*W,L=Z*X;this.vertices.push(new n.default.Vector((1-ee)*((1-L)*l+L*j)+ee*((1-L)*m+L*_),(1-ee)*((1-L)*c+L*E)+ee*((1-L)*g+L*x),(1-ee)*((1-L)*h+L*T)+ee*((1-L)*y+L*w))),this.uvs.push([ee,L])}});N.faces=[];for(var O=0;O<R-1;O++)for(var D=0;D<A-1;D++){var U=D+O*A,Y=D+1+(O+1)*A,H=D+(O+1)*A;N.faces.push([U,D+1+O*A,Y]),N.faces.push([U,Y,H])}N.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(P,N)}return this.drawBuffers(P),this},n.default.RendererGL.prototype.bezier=function(l,c,h,m,g,y,_,x,w,j,E,T){arguments.length===8&&(E=x,j=_,x=y,_=g,g=m,m=h,h=y=w=T=0);var A=this._pInst._bezierDetail||20;this.beginShape();for(var R=0;R<=A;R++){var P=Math.pow(1-R/A,3),N=R/A*3*Math.pow(1-R/A,2),O=3*Math.pow(R/A,2)*(1-R/A),D=Math.pow(R/A,3);this.vertex(l*P+m*N+_*O+j*D,c*P+g*N+x*O+E*D,h*P+y*N+w*O+T*D)}return this.endShape(),this},n.default.RendererGL.prototype.curve=function(l,c,h,m,g,y,_,x,w,j,E,T){arguments.length===8&&(j=_,E=x,_=g,x=m,g=m=h,h=y=w=T=0);var A=this._pInst._curveDetail;this.beginShape();for(var R=0;R<=A;R++){var P=.5*Math.pow(R/A,3),N=.5*Math.pow(R/A,2),O=R/A*.5;this.vertex(P*(3*m-l-3*_+j)+N*(2*l-5*m+4*_-j)+O*(-l+_)+2*m*.5,P*(3*g-c-3*x+E)+N*(2*c-5*g+4*x-E)+O*(-c+x)+2*g*.5,P*(3*y-h-3*w+T)+N*(2*h-5*y+4*w-T)+O*(-h+w)+2*y*.5)}return this.endShape(),this},n.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},n.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var l,c,h,m,g,y,_=[],x=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,E=0,T=1,A=0;E<1;){if(y=parseFloat(E.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(y),T.toFixed(6)===j.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(y);break}E+=j,T-=j,++A}}var R=this._lookUpTableBezier.length;if(w===6){for(this.isBezier=!0,_=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],g=0;g<R;g++)c=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],h=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],this.vertex(c,h);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(w===9){for(this.isBezier=!0,_=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],x=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],l=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],g=0;g<R;g++)c=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],h=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],m=l[0]*this._lookUpTableBezier[g][0]+l[1]*this._lookUpTableBezier[g][1]+l[2]*this._lookUpTableBezier[g][2]+l[3]*this._lookUpTableBezier[g][3],this.vertex(c,h,m);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},n.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var l,c,h,m,g,y,_=[],x=[],w=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var j=1/this._lutQuadraticDetail,E=0,T=1,A=0;E<1;){if(y=parseFloat(E.toFixed(6)),this._lookUpTableQuadratic[A]=this._quadraticCoefficients(y),T.toFixed(6)===j.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++A,this._lookUpTableQuadratic[A]=this._quadraticCoefficients(y);break}E+=j,T-=j,++A}}var R=this._lookUpTableQuadratic.length;if(w===4){for(this.isQuadratic=!0,_=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],g=0;g<R;g++)c=_[0]*this._lookUpTableQuadratic[g][0]+_[1]*this._lookUpTableQuadratic[g][1]+_[2]*this._lookUpTableQuadratic[g][2],h=x[0]*this._lookUpTableQuadratic[g][0]+x[1]*this._lookUpTableQuadratic[g][1]+x[2]*this._lookUpTableQuadratic[g][2],this.vertex(c,h);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(w===6){for(this.isQuadratic=!0,_=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],x=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],l=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],g=0;g<R;g++)c=_[0]*this._lookUpTableQuadratic[g][0]+_[1]*this._lookUpTableQuadratic[g][1]+_[2]*this._lookUpTableQuadratic[g][2],h=x[0]*this._lookUpTableQuadratic[g][0]+x[1]*this._lookUpTableQuadratic[g][1]+x[2]*this._lookUpTableQuadratic[g][2],m=l[0]*this._lookUpTableQuadratic[g][0]+l[1]*this._lookUpTableQuadratic[g][1]+l[2]*this._lookUpTableQuadratic[g][2],this.vertex(c,h,m);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},n.default.RendererGL.prototype.curveVertex=function(){var l,c,h,m,g,y,_=[],x=[],w=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var j=1/this._lutBezierDetail,E=0,T=1,A=0;E<1;){if(y=parseFloat(E.toFixed(6)),this._lookUpTableBezier[A]=this._bezierCoefficients(y),T.toFixed(6)===j.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++A,this._lookUpTableBezier[A]=this._bezierCoefficients(y);break}E+=j,T-=j,++A}}var R=this._lookUpTableBezier.length;if(w===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),g=0;g<R;g++)c=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],h=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],this.vertex(c,h);for(g=0;g<w;g++)this.immediateMode._curveVertex.shift()}}else if(w===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,_=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),x=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),l=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),g=0;g<R;g++)c=_[0]*this._lookUpTableBezier[g][0]+_[1]*this._lookUpTableBezier[g][1]+_[2]*this._lookUpTableBezier[g][2]+_[3]*this._lookUpTableBezier[g][3],h=x[0]*this._lookUpTableBezier[g][0]+x[1]*this._lookUpTableBezier[g][1]+x[2]*this._lookUpTableBezier[g][2]+x[3]*this._lookUpTableBezier[g][3],m=l[0]*this._lookUpTableBezier[g][0]+l[1]*this._lookUpTableBezier[g][1]+l[2]*this._lookUpTableBezier[g][2]+l[3]*this._lookUpTableBezier[g][3],this.vertex(c,h,m);for(g=0;g<w;g++)this.immediateMode._curveVertex.shift()}},n.default.RendererGL.prototype.image=function(l,T,h,A,g,y,_,x,w){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(l),this._pInst.textureMode(a.NORMAL);var j=0,E=(T<=l.width&&(j=T/l.width),1),T=(T+A<=l.width&&(E=(T+A)/l.width),0),A=(h<=l.height&&(T=h/l.height),1);h+g<=l.height&&(A=(h+g)/l.height),this.beginShape(),this.vertex(y,_,0,j,T),this.vertex(y+x,_,0,E,T),this.vertex(y+x,_+w,0,E,A),this.vertex(y,_+w,0,j,A),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var s=n.default;d.default=s},{"../core/constants":256,"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.to-fixed":171,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],311:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}n.default.prototype.orbitControl=function(s,l,c){var h,m;if(this._assert3d("orbitControl"),n.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY)return h=this._renderer._curCamera,s===void 0&&(s=1),l===void 0&&(l=s),c===void 0&&(c=.5),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0)),m=this.height<this.width?this.height:this.width,this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,c*m):this._renderer._curCamera._orbit(0,0,-c*m)),this.mouseIsPressed&&(this.mouseButton===this.LEFT?(c=-s*(this.mouseX-this.pmouseX)/m,m=l*(this.mouseY-this.pmouseY)/m,this._renderer._curCamera._orbit(c,m,0)):this.mouseButton===this.RIGHT&&(c=h._getLocalAxes(),(m=Math.sqrt(c.x[0]*c.x[0]+c.x[2]*c.x[2]))!==0&&(c.x[0]/=m,c.x[2]/=m),(m=Math.sqrt(c.y[0]*c.y[0]+c.y[2]*c.y[2]))!==0&&(c.y[0]/=m,c.y[2]/=m),m=-1*s*(this.mouseX-this.pmouseX),s=-1*l*(this.mouseY-this.pmouseY),h.setPosition(h.eyeX+m*c.x[0]+s*c.z[0],h.eyeY,h.eyeZ+m*c.x[2]+s*c.z[2]))),this},n.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];n.default._validateParameters("debugMode",l);for(var h=this._registeredMethods.post.length-1;0<=h;h--)this._registeredMethods.post[h].toString()!==this._grid().toString()&&this._registeredMethods.post[h].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(h,1);l[0]===a.GRID?this.registerMethod("post",this._grid.call(this,l[1],l[2],l[3],l[4],l[5])):l[0]===a.AXES?this.registerMethod("post",this._axesIcon.call(this,l[1],l[2],l[3],l[4])):(this.registerMethod("post",this._grid.call(this,l[0],l[1],l[2],l[3],l[4])),this.registerMethod("post",this._axesIcon.call(this,l[5],l[6],l[7],l[8])))},n.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var s=this._registeredMethods.post.length-1;0<=s;s--)this._registeredMethods.post[s].toString()!==this._grid().toString()&&this._registeredMethods.post[s].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(s,1)},n.default.prototype._grid=function(s,l,c,h,m){s===void 0&&(s=this.width/2),l===void 0&&(l=Math.round(s/30)<4?4:Math.round(s/30)),c===void 0&&(c=0),h===void 0&&(h=0),m===void 0&&(m=0);var g=s/l,y=s/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var _=0;_<=l;_++)this.beginShape(this.LINES),this.vertex(-y+c,h,_*g-y+m),this.vertex(y+c,h,_*g-y+m),this.endShape();for(var x=0;x<=l;x++)this.beginShape(this.LINES),this.vertex(x*g-y+c,h,-y+m),this.vertex(x*g-y+c,h,y+m),this.endShape();this.pop()}},n.default.prototype._axesIcon=function(s,l,c,h){return s===void 0&&(s=40<this.width/20?this.width/20:40),l===void 0&&(l=-this.width/4),c===void 0&&(c=l),h===void 0&&(h=l),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(l,c,h),this.vertex(l+s,c,h),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(l,c,h),this.vertex(l,c+s,h),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(l,c,h),this.vertex(l,c,h+s),this.endShape(),this.pop()}};var p=n.default;d.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],312:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}n.default.prototype.ambientLight=function(s,l,c,h){this._assert3d("ambientLight"),n.default._validateParameters("ambientLight",arguments);var m=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(m._array[0],m._array[1],m._array[2]),this._renderer._enableLighting=!0,this},n.default.prototype.specularColor=function(s,l,c){this._assert3d("specularColor"),n.default._validateParameters("specularColor",arguments);var h=this.color.apply(this,arguments);return this._renderer.specularColors=[h._array[0],h._array[1],h._array[2]],this},n.default.prototype.directionalLight=function(s,w,x,h,m,g){this._assert3d("directionalLight"),n.default._validateParameters("directionalLight",arguments),s=s instanceof n.default.Color?s:this.color(s,w,x);var y,_,w=arguments[arguments.length-1],x=typeof w=="number"?(y=arguments[arguments.length-3],_=arguments[arguments.length-2],arguments[arguments.length-1]):(y=w.x,_=w.y,w.z),w=Math.sqrt(y*y+_*_+x*x);return this._renderer.directionalLightDirections.push(y/w,_/w,x/w),this._renderer.directionalLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.pointLight=function(s,x,w,h,m,g){this._assert3d("pointLight"),n.default._validateParameters("pointLight",arguments),s=s instanceof n.default.Color?s:this.color(s,x,w);var y,_,x=arguments[arguments.length-1],w=typeof x=="number"?(y=arguments[arguments.length-3],_=arguments[arguments.length-2],arguments[arguments.length-1]):(y=x.x,_=x.y,x.z);return this._renderer.pointLightPositions.push(y,_,w),this._renderer.pointLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},n.default.prototype.lights=function(){var s;return this._assert3d("lights"),this._colorMode===a.RGB?(this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1)):(s=this._colorMaxes[this._colorMode][2],this.ambientLight(0,0,s),this.directionalLight(0,0,s,0,0,-1)),this},n.default.prototype.lightFalloff=function(s,l,c){return this._assert3d("lightFalloff"),n.default._validateParameters("lightFalloff",arguments),s<0&&(s=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),l<0&&(l=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),c<0&&(c=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),s===0&&l===0&&c===0&&(s=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=s,this._renderer.linearAttenuation=l,this._renderer.quadraticAttenuation=c,this},n.default.prototype.spotLight=function(s,l,c,h,m,g,y,_,x,w,j){this._assert3d("spotLight"),n.default._validateParameters("spotLight",arguments);var E,T,A,R=arguments.length;switch(R){case 11:case 10:E=this.color(s,l,c),T=new n.default.Vector(h,m,g),A=new n.default.Vector(y,_,x);break;case 9:s instanceof n.default.Color?(E=s,T=new n.default.Vector(l,c,h),A=new n.default.Vector(m,g,y),w=_,j=x):h instanceof n.default.Vector?(E=this.color(s,l,c),T=h,A=new n.default.Vector(m,g,y),w=_,j=x):y instanceof n.default.Vector?(E=this.color(s,l,c),T=new n.default.Vector(h,m,g),A=y,w=_,j=x):(E=this.color(s,l,c),T=new n.default.Vector(h,m,g),A=new n.default.Vector(y,_,x));break;case 8:w=(A=s instanceof n.default.Color?(E=s,T=new n.default.Vector(l,c,h),new n.default.Vector(m,g,y)):h instanceof n.default.Vector?(E=this.color(s,l,c),T=h,new n.default.Vector(m,g,y)):(E=this.color(s,l,c),T=new n.default.Vector(h,m,g),y),_);break;case 7:s instanceof n.default.Color&&l instanceof n.default.Vector?(E=s,T=l,A=new n.default.Vector(c,h,m),w=g,j=y):s instanceof n.default.Color&&m instanceof n.default.Vector?(E=s,T=new n.default.Vector(l,c,h),A=m,w=g,j=y):h instanceof n.default.Vector&&m instanceof n.default.Vector?(E=this.color(s,l,c),T=h,A=m,w=g,j=y):A=s instanceof n.default.Color?(E=s,T=new n.default.Vector(l,c,h),new n.default.Vector(m,g,y)):h instanceof n.default.Vector?(E=this.color(s,l,c),T=h,new n.default.Vector(m,g,y)):(E=this.color(s,l,c),T=new n.default.Vector(h,m,g),y);break;case 6:h instanceof n.default.Vector&&m instanceof n.default.Vector?(E=this.color(s,l,c),T=h,A=m,w=g):s instanceof n.default.Color&&m instanceof n.default.Vector?(E=s,T=new n.default.Vector(l,c,h),A=m,w=g):s instanceof n.default.Color&&l instanceof n.default.Vector&&(E=s,T=l,A=new n.default.Vector(c,h,m),w=g);break;case 5:s instanceof n.default.Color&&l instanceof n.default.Vector&&c instanceof n.default.Vector?(E=s,T=l,A=c,w=h,j=m):h instanceof n.default.Vector&&m instanceof n.default.Vector?(E=this.color(s,l,c),T=h,A=m):s instanceof n.default.Color&&m instanceof n.default.Vector?(E=s,T=new n.default.Vector(l,c,h),A=m):s instanceof n.default.Color&&l instanceof n.default.Vector&&(E=s,T=l,A=new n.default.Vector(c,h,m));break;case 4:E=s,T=l,A=c,w=h;break;case 3:E=s,T=l,A=c;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(R<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(E._array[0],E._array[1],E._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(T.x,T.y,T.z),A.normalize(),this._renderer.spotLightDirections.push(A.x,A.y,A.z),w===void 0&&(w=Math.PI/3),j!==void 0&&j<1?(j=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):j===void 0&&(j=100),w=this._renderer._pInst._toRadians(w),this._renderer.spotLightAngle.push(Math.cos(w)),this._renderer.spotLightConc.push(j),this._renderer._enableLighting=!0,this},n.default.prototype.noLights=function(){return this._assert3d("noLights"),n.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var p=n.default;d.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],313:[function(e,u,d){e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(i=e("../core/main"))&&i.__esModule?i:{default:i};e("./p5.Geometry"),o.default.prototype.loadModel=function(n){o.default._validateParameters("loadModel",arguments);var a,f,p,s=n.slice(-4),l=(typeof arguments[1]=="boolean"?(a=arguments[1],f=arguments[2],p=arguments[3],arguments[4]!==void 0&&(s=arguments[4])):(a=!1,f=arguments[1],p=arguments[2],arguments[3]!==void 0&&(s=arguments[3])),new o.default.Geometry),c=(l.gid="".concat(n,"|").concat(a),this);return s.match(/\.stl$/i)?this.httpDo(n,"GET","arrayBuffer",function(h){(function(m,g){if(function(y){for(var _=new DataView(y),x=[115,111,108,105,100],w=0;w<5;w++)if(function(j,E,T){for(var A=0,R=j.length;A<R;A++)if(j[A]!==E.getUint8(T+A,!1))return;return 1}(x,_,w))return;return 1}(g))(function(y,_){for(var x,w,j,E,T,A,R,P=new DataView(_),N=P.getUint32(80,!0),O=!1,D=0;D<70;D++)P.getUint32(D,!1)===1129270351&&P.getUint8(D+4)===82&&P.getUint8(D+5)===61&&(O=!0,E=[],T=P.getUint8(D+6)/255,A=P.getUint8(D+7)/255,R=P.getUint8(D+8)/255);for(var U=0;U<N;U++){for(var Y,H=84+50*U,W=P.getFloat32(H,!0),X=P.getFloat32(4+H,!0),Z=P.getFloat32(8+H,!0),q=(O&&(Y=P.getUint16(48+H,!0),j=32768&Y?(x=T,w=A,R):(x=(31&Y)/31,w=(Y>>5&31)/31,(Y>>10&31)/31)),new o.default.Vector(W,X,Z)),ee=1;ee<=3;ee++){var L=H+12*ee,L=new o.default.Vector(P.getFloat32(L,!0),P.getFloat32(4+L,!0),P.getFloat32(8+L,!0));y.vertices.push(L),y.vertexNormals.push(q),O&&E.push(x,w,j)}y.faces.push([3*U,3*U+1,3*U+2]),y.uvs.push([0,0],[0,0],[0,0])}})(m,g);else{if(g=new DataView(g),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");g=new TextDecoder("utf-8").decode(g).split(`
`),function(y,_){for(var x,w,j="",E=[],T=0;T<_.length;++T){for(var A=_[T].trim(),R=A.split(" "),P=0;P<R.length;++P)R[P]===""&&R.splice(P,1);if(R.length!==0)switch(j){case"":if(R[0]!=="solid")return console.error(A),console.error('Invalid state "'.concat(R[0],'", should be "solid"'));j="solid";break;case"solid":if(R[0]!=="facet"||R[1]!=="normal")return console.error(A),console.error('Invalid state "'.concat(R[0],'", should be "facet normal"'));x=new o.default.Vector(parseFloat(R[2]),parseFloat(R[3]),parseFloat(R[4])),y.vertexNormals.push(x,x,x),j="facet normal";break;case"facet normal":if(R[0]!=="outer"||R[1]!=="loop")return console.error(A),console.error('Invalid state "'.concat(R[0],'", should be "outer loop"'));j="vertex";break;case"vertex":if(R[0]==="vertex")w=new o.default.Vector(parseFloat(R[1]),parseFloat(R[2]),parseFloat(R[3])),y.vertices.push(w),y.uvs.push([0,0]),E.push(y.vertices.indexOf(w));else{if(R[0]!=="endloop")return console.error(A),console.error('Invalid state "'.concat(R[0],'", should be "vertex" or "endloop"'));y.faces.push(E),E=[],j="endloop"}break;case"endloop":if(R[0]!=="endfacet")return console.error(A),console.error('Invalid state "'.concat(R[0],'", should be "endfacet"'));j="endfacet";break;case"endfacet":if(R[0]!=="endsolid"){if(R[0]!=="facet"||R[1]!=="normal")return console.error(A),console.error('Invalid state "'.concat(R[0],'", should be "endsolid" or "facet normal"'));x=new o.default.Vector(parseFloat(R[2]),parseFloat(R[3]),parseFloat(R[4])),y.vertexNormals.push(x,x,x),j="facet normal"}break;default:console.error('Invalid state "'.concat(j,'"'))}}}(m,g)}})(l,h),a&&l.normalize(),c._decrementPreload(),typeof f=="function"&&f(l)},p):s.match(/\.obj$/i)?this.loadStrings(n,function(h){for(var m=l,g=h,y={v:[],vt:[],vn:[]},_={},x=0;x<g.length;++x){var w=g[x].trim().split(/\b\s+/);if(0<w.length){if(w[0]==="v"||w[0]==="vn"){var j=new o.default.Vector(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));y[w[0]].push(j)}else if(w[0]==="vt")j=[parseFloat(w[1]),1-parseFloat(w[2])],y[w[0]].push(j);else if(w[0]==="f")for(var E=3;E<w.length;++E){for(var T=[],A=[1,E-1,E],R=0;R<A.length;++R){var P=w[A[R]],N=0;if(_[P]!==void 0)N=_[P];else{for(var O=P.split("/"),D=0;D<O.length;D++)O[D]=parseInt(O[D])-1;N=_[P]=m.vertices.length,m.vertices.push(y.v[O[0]].copy()),y.vt[O[1]]?m.uvs.push(y.vt[O[1]].slice()):m.uvs.push([0,0]),y.vn[O[2]]&&m.vertexNormals.push(y.vn[O[2]].copy())}T.push(N)}T[0]!==T[1]&&T[0]!==T[2]&&T[1]!==T[2]&&m.faces.push(T)}}}m.vertexNormals.length===0&&m.computeNormals(),a&&l.normalize(),c._decrementPreload(),typeof f=="function"&&f(l)},p):(o.default._friendlyFileLoadError(3,n),p?p():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),l},o.default.prototype.model=function(n){this._assert3d("model"),o.default._validateParameters("model",arguments),0<n.vertices.length&&(this._renderer.geometryInHash(n.gid)||(n._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(n.gid,n)),this._renderer.drawBuffers(n.gid))};var i=o.default;d.default=i},{"../core/main":267,"./p5.Geometry":316,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],314:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.join"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}e("./p5.Texture"),n.default.prototype.loadShader=function(s,l,c,h){n.default._validateParameters("loadShader",arguments),h=h||console.error;function m(){y._decrementPreload(),c&&c(g)}var g=new n.default.Shader,y=this,_=!1,x=!1;return this.loadStrings(s,function(w){g._vertSrc=w.join(`
`),x=!0,_&&m()},h),this.loadStrings(l,function(w){g._fragSrc=w.join(`
`),_=!0,x&&m()},h),g},n.default.prototype.createShader=function(s,l){return this._assert3d("createShader"),n.default._validateParameters("createShader",arguments),new n.default.Shader(this._renderer,s,l)},n.default.prototype.shader=function(s){return this._assert3d("shader"),n.default._validateParameters("shader",arguments),s._renderer===void 0&&(s._renderer=this._renderer),s.init(),s.isStrokeShader()?this._renderer.userStrokeShader=s:(this._renderer.userFillShader=s,this._renderer._useNormalMaterial=!1),this},n.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},n.default.prototype.texture=function(s){return this._assert3d("texture"),n.default._validateParameters("texture",arguments),s.gifProperties&&s._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=s,this._renderer._setProperty("_doFill",!0),this},n.default.prototype.textureMode=function(s){s!==a.IMAGE&&s!==a.NORMAL?console.warn("You tried to set ".concat(s," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=s},n.default.prototype.textureWrap=function(s){for(var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s,c=(this._renderer.textureWrapX=s,this._renderer.textureWrapY=l,this._renderer.textures),h=0;h<c.length;h++)c[h].setWrapMode(s,l)},n.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return n.default._validateParameters("normalMaterial",l),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},n.default.prototype.ambientMaterial=function(s,l,c){this._assert3d("ambientMaterial"),n.default._validateParameters("ambientMaterial",arguments);var h=n.default.prototype.color.apply(this,arguments);return this._renderer.curAmbientColor=h._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},n.default.prototype.emissiveMaterial=function(s,l,c,h){this._assert3d("emissiveMaterial"),n.default._validateParameters("emissiveMaterial",arguments);var m=n.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=m._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},n.default.prototype.specularMaterial=function(s,l,c,h){this._assert3d("specularMaterial"),n.default._validateParameters("specularMaterial",arguments);var m=n.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=m._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},n.default.prototype.shininess=function(s){return this._assert3d("shininess"),n.default._validateParameters("shininess",arguments),this._renderer._useShininess=s=s<1?1:s,this},n.default.RendererGL.prototype._applyColorBlend=function(s){var l=this.GL,c=this.drawMode===a.TEXTURE||this.curBlendMode!==a.BLEND||s[s.length-1]<1||this._isErasing;return c!==this._isBlending&&(c||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?l.enable(l.BLEND):l.disable(l.BLEND),l.depthMask(!0),this._isBlending=c),this._applyBlendMode(),s},n.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var s=this.GL;switch(this.curBlendMode){case a.BLEND:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA);break;case a.ADD:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.SRC_ALPHA,s.ONE);break;case a.REMOVE:s.blendEquation(s.FUNC_REVERSE_SUBTRACT),s.blendFunc(s.SRC_ALPHA,s.DST_ALPHA);break;case a.MULTIPLY:s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ONE,s.ONE);break;case a.SCREEN:s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.ONE_MINUS_DST_COLOR,s.ONE,s.ONE,s.ONE);break;case a.EXCLUSION:s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD),s.blendFuncSeparate(s.ONE_MINUS_DST_COLOR,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE);break;case a.REPLACE:s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO);break;case a.SUBTRACT:s.blendEquationSeparate(s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE,s.ONE,s.ONE);break;case a.DARKEST:this.blendExt?(s.blendEquationSeparate(this.blendExt.MIN_EXT,s.FUNC_ADD),s.blendFuncSeparate(s.ONE,s.ONE,s.ONE,s.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(s.blendEquationSeparate(this.blendExt.MAX_EXT,s.FUNC_ADD),s.blendFuncSeparate(s.ONE,s.ONE,s.ONE,s.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var p=n.default;d.default=p},{"../core/constants":256,"../core/main":267,"./p5.Texture":323,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],315:[function(e,u,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.prototype.camera=function(){var i;this._assert3d("camera");for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return o.default._validateParameters("camera",a),(i=this._renderer._curCamera).camera.apply(i,a),this},o.default.prototype.perspective=function(){var i;this._assert3d("perspective");for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return o.default._validateParameters("perspective",a),(i=this._renderer._curCamera).perspective.apply(i,a),this},o.default.prototype.ortho=function(){var i;this._assert3d("ortho");for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return o.default._validateParameters("ortho",a),(i=this._renderer._curCamera).ortho.apply(i,a),this},o.default.prototype.frustum=function(){var i;this._assert3d("frustum");for(var n=arguments.length,a=new Array(n),f=0;f<n;f++)a[f]=arguments[f];return o.default._validateParameters("frustum",a),(i=this._renderer._curCamera).frustum.apply(i,a),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var i=new o.default.Camera(this._renderer);return i._computeCameraDefaultSettings(),i._setDefaultCamera(),this._renderer._curCamera=i},o.default.Camera=function(i){this._renderer=i,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix},o.default.Camera.prototype.perspective=function(p,n,a,f){this.cameraType=0<arguments.length?"custom":"default",p===void 0?(p=this.defaultCameraFOV,this.cameraFOV=p):this.cameraFOV=this._renderer._pInst._toRadians(p),n===void 0&&(n=this.defaultAspectRatio),a===void 0&&(a=this.defaultCameraNear),f===void 0&&(f=this.defaultCameraFar),a<=1e-4&&(a=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),f<a&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=n,this.cameraNear=a,this.cameraFar=f,this.projMatrix=o.default.Matrix.identity();var p=1/Math.tan(this.cameraFOV/2),s=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(p/n,0,0,0,0,-p,0,0,0,0,(f+a)*s,-1,0,0,2*f*a*s,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},o.default.Camera.prototype.ortho=function(_,y,a,f,p,s){_===void 0&&(_=-this._renderer.width/2),y===void 0&&(y=+this._renderer.width/2),a===void 0&&(a=-this._renderer.height/2),p===void 0&&(p=0);var x=y-_,l=(f=f===void 0?+this._renderer.height/2:f)-a,c=(s=s===void 0?Math.max(this._renderer.width,this._renderer.height):s)-p,h=2/x,m=2/l,g=-2/c,y=-(y+_)/x,_=-(f+a)/l,x=-(s+p)/c;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(h,0,0,0,0,-m,0,0,0,0,g,0,y,_,x,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype.frustum=function(_,y,a,f,p,s){_===void 0&&(_=-this._renderer.width/2),y===void 0&&(y=+this._renderer.width/2),a===void 0&&(a=-this._renderer.height/2),p===void 0&&(p=0);var x=y-_,l=(f=f===void 0?+this._renderer.height/2:f)-a,c=(s=s===void 0?Math.max(this._renderer.width,this._renderer.height):s)-p,h=2*p/x,m=2*p/l,g=-2*s*p/c,y=(y+_)/x,_=(f+a)/l,x=-(s+p)/c;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(h,0,0,0,0,m,0,0,y,_,x,-1,0,0,g,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype._rotateView=function(h,n,a,f){var p=this.centerX,s=this.centerY,l=this.centerZ,c=(p-=this.eyeX,s-=this.eyeY,l-=this.eyeZ,o.default.Matrix.identity(this._renderer._pInst)),h=(c.rotate(this._renderer._pInst._toRadians(h),n,a,f),[p*c.mat4[0]+s*c.mat4[4]+l*c.mat4[8],p*c.mat4[1]+s*c.mat4[5]+l*c.mat4[9],p*c.mat4[2]+s*c.mat4[6]+l*c.mat4[10]]);h[0]+=this.eyeX,h[1]+=this.eyeY,h[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,h[0],h[1],h[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.pan=function(i){var n=this._getLocalAxes();this._rotateView(i,n.y[0],n.y[1],n.y[2])},o.default.Camera.prototype.tilt=function(i){var n=this._getLocalAxes();this._rotateView(i,n.x[0],n.x[1],n.x[2])},o.default.Camera.prototype.lookAt=function(i,n,a){this.camera(this.eyeX,this.eyeY,this.eyeZ,i,n,a,this.upX,this.upY,this.upZ)},o.default.Camera.prototype.camera=function(i,n,a,f,p,s,l,c,h){return i===void 0&&(i=this.defaultEyeX,n=this.defaultEyeY,a=this.defaultEyeZ,f=i,p=n,c=1,h=l=s=0),this.eyeX=i,this.eyeY=n,this.eyeZ=a,f!==void 0&&(this.centerX=f,this.centerY=p,this.centerZ=s),l!==void 0&&(this.upX=l,this.upY=c,this.upZ=h),f=this._getLocalAxes(),this.cameraMatrix.set(f.x[0],f.y[0],f.z[0],0,f.x[1],f.y[1],f.z[1],0,f.x[2],f.y[2],f.z[2],0,0,0,0,1),p=-i,this.cameraMatrix.translate([p,-n,-a]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},o.default.Camera.prototype.move=function(f,p,a){var s=this._getLocalAxes(),f=[s.x[0]*f,s.x[1]*f,s.x[2]*f],p=[s.y[0]*p,s.y[1]*p,s.y[2]*p],s=[s.z[0]*a,s.z[1]*a,s.z[2]*a];this.camera(this.eyeX+f[0]+p[0]+s[0],this.eyeY+f[1]+p[1]+s[1],this.eyeZ+f[2]+p[2]+s[2],this.centerX+f[0]+p[0]+s[0],this.centerY+f[1]+p[1]+s[1],this.centerZ+f[2]+p[2]+s[2],0,1,0)},o.default.Camera.prototype.setPosition=function(i,n,a){var f=i-this.eyeX,p=n-this.eyeY,s=a-this.eyeZ;this.camera(i,n,a,this.centerX+f,this.centerY+p,this.centerZ+s,0,1,0)},o.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},o.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},o.default.Camera.prototype._resize=function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},o.default.Camera.prototype.copy=function(){var i=new o.default.Camera(this._renderer);return i.cameraFOV=this.cameraFOV,i.aspectRatio=this.aspectRatio,i.eyeX=this.eyeX,i.eyeY=this.eyeY,i.eyeZ=this.eyeZ,i.centerX=this.centerX,i.centerY=this.centerY,i.centerZ=this.centerZ,i.cameraNear=this.cameraNear,i.cameraFar=this.cameraFar,i.cameraType=this.cameraType,i.cameraMatrix=this.cameraMatrix.copy(),i.projMatrix=this.projMatrix.copy(),i},o.default.Camera.prototype._getLocalAxes=function(){var i=this.eyeX-this.centerX,n=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,l=Math.sqrt(i*i+n*n+a*a),l=(l!==0&&(i/=l,n/=l,a/=l),this.upX),f=(c=this.upY)*a-(h=this.upZ)*n,p=-l*a+h*i,s=l*n-c*i,l=n*s-a*p,c=-i*s+a*f,h=i*p-n*f,m=Math.sqrt(f*f+p*p+s*s),m=(m!==0&&(f/=m,p/=m,s/=m),Math.sqrt(l*l+c*c+h*h));return m!==0&&(l/=m,c/=m,h/=m),{x:[f,p,s],y:[l,c,h],z:[i,n,a]}},o.default.Camera.prototype._orbit=function(c,n,h){var p=this.eyeX-this.centerX,l=this.eyeY-this.centerY,s=this.eyeZ-this.centerZ,f=Math.sqrt(p*p+l*l+s*s),p=Math.atan2(p,s),s=Math.acos(Math.max(-1,Math.min(1,l/f))),l=(p+=c,(f+=h)<0&&(f=.1),(s+=n)>Math.PI?s=Math.PI:s<=0&&(s=.001),Math.sin(s)*f*Math.sin(p)),c=Math.cos(s)*f,h=Math.sin(s)*f*Math.cos(p);this.camera(l+this.centerX,c+this.centerY,h+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},o.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},o.default.prototype.setCamera=function(i){this._renderer._curCamera=i,this._renderer.uPMatrix.set(i.projMatrix.mat4[0],i.projMatrix.mat4[1],i.projMatrix.mat4[2],i.projMatrix.mat4[3],i.projMatrix.mat4[4],i.projMatrix.mat4[5],i.projMatrix.mat4[6],i.projMatrix.mat4[7],i.projMatrix.mat4[8],i.projMatrix.mat4[9],i.projMatrix.mat4[10],i.projMatrix.mat4[11],i.projMatrix.mat4[12],i.projMatrix.mat4[13],i.projMatrix.mat4[14],i.projMatrix.mat4[15])},e=o.default.Camera,d.default=e},{"../core/main":267}],316:[function(e,u,d){e("core-js/modules/es.string.sub"),e("core-js/modules/es.string.sub"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.Geometry=function(i,n,a){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=i!==void 0?i:1,this.detailY=n!==void 0?n:1,this.dirtyFlags={},a instanceof Function&&a.call(this),this},o.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},o.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var i,n,a,f=this.detailX+1,p=0;p<this.detailY;p++)for(var s=0;s<this.detailX;s++)n=(p+1)*f+s+1,this.faces.push([p*f+s,i=p*f+s+1,a=(p+1)*f+s]),this.faces.push([a,i,n]);return this},o.default.Geometry.prototype._getFaceNormal=function(n){var n=this.faces[n],a=this.vertices[n[0]],p=this.vertices[n[1]],n=this.vertices[n[2]],p=o.default.Vector.sub(p,a),n=o.default.Vector.sub(n,a),a=o.default.Vector.cross(p,n),f=o.default.Vector.mag(a),p=f/(o.default.Vector.mag(p)*o.default.Vector.mag(n));return p===0||isNaN(p)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),a):(1<p&&(p=1),a.mult(Math.asin(p)/f))},o.default.Geometry.prototype.computeNormals=function(){for(var i=this.vertexNormals,n=this.vertices,a=this.faces,f=i.length=0;f<n.length;++f)i.push(new o.default.Vector);for(var p=0;p<a.length;++p)for(var s=a[p],l=this._getFaceNormal(p),c=0;c<3;++c)i[s[c]].add(l);for(f=0;f<n.length;++f)i[f].normalize();return this},o.default.Geometry.prototype.averageNormals=function(){for(var i=0;i<=this.detailY;i++){var n=this.detailX+1,a=o.default.Vector.add(this.vertexNormals[i*n],this.vertexNormals[i*n+this.detailX]),a=o.default.Vector.div(a,2);this.vertexNormals[i*n]=a,this.vertexNormals[i*n+this.detailX]=a}return this},o.default.Geometry.prototype.averagePoleNormals=function(){for(var i=new o.default.Vector(0,0,0),n=0;n<this.detailX;n++)i.add(this.vertexNormals[n]);for(var i=o.default.Vector.div(i,this.detailX),a=0;a<this.detailX;a++)this.vertexNormals[a]=i;i=new o.default.Vector(0,0,0);for(var f=this.vertices.length-1;f>this.vertices.length-1-this.detailX;f--)i.add(this.vertexNormals[f]);i=o.default.Vector.div(i,this.detailX);for(var p=this.vertices.length-1;p>this.vertices.length-1-this.detailX;p--)this.vertexNormals[p]=i;return this},o.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var i=0,n=this.strokeIndices.length;i<n;i++)this.edges.push(this.strokeIndices[i]);else for(var a=0;a<this.faces.length;a++)this.edges.push([this.faces[a][0],this.faces[a][1]]),this.edges.push([this.faces[a][1],this.faces[a][2]]),this.edges.push([this.faces[a][2],this.faces[a][0]]);return this},o.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var i=this.lineNormals.length=0;i<this.edges.length;i++){var a=this.vertices[this.edges[i][0]],p=this.vertices[this.edges[i][1]],l=p.copy().sub(a).normalize(),n=a.array(),a=a.array(),f=p.array(),p=p.array(),s=l.array(),l=l.array();s.push(1),l.push(-1),this.lineNormals.push(s,l,s,s,l,l),this.lineVertices.push(n,a,f,f,a,p)}return this},o.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var i=this.vertices[0].copy(),n=this.vertices[0].copy(),a=0;a<this.vertices.length;a++)i.x=Math.max(i.x,this.vertices[a].x),n.x=Math.min(n.x,this.vertices[a].x),i.y=Math.max(i.y,this.vertices[a].y),n.y=Math.min(n.y,this.vertices[a].y),i.z=Math.max(i.z,this.vertices[a].z),n.z=Math.min(n.z,this.vertices[a].z);for(var f=o.default.Vector.lerp(i,n,.5),p=o.default.Vector.sub(i,n),s=200/Math.max(Math.max(p.x,p.y),p.z),l=0;l<this.vertices.length;l++)this.vertices[l].sub(f),this.vertices[l].mult(s)}return this},e=o.default.Geometry,d.default=e},{"../core/main":267,"core-js/modules/es.string.sub":192}],317:[function(a,u,d){a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),a("core-js/modules/es.array.iterator"),a("core-js/modules/es.object.to-string"),a("core-js/modules/es.typed-array.float32-array"),a("core-js/modules/es.typed-array.copy-within"),a("core-js/modules/es.typed-array.every"),a("core-js/modules/es.typed-array.fill"),a("core-js/modules/es.typed-array.filter"),a("core-js/modules/es.typed-array.find"),a("core-js/modules/es.typed-array.find-index"),a("core-js/modules/es.typed-array.for-each"),a("core-js/modules/es.typed-array.includes"),a("core-js/modules/es.typed-array.index-of"),a("core-js/modules/es.typed-array.iterator"),a("core-js/modules/es.typed-array.join"),a("core-js/modules/es.typed-array.last-index-of"),a("core-js/modules/es.typed-array.map"),a("core-js/modules/es.typed-array.reduce"),a("core-js/modules/es.typed-array.reduce-right"),a("core-js/modules/es.typed-array.reverse"),a("core-js/modules/es.typed-array.set"),a("core-js/modules/es.typed-array.slice"),a("core-js/modules/es.typed-array.some"),a("core-js/modules/es.typed-array.sort"),a("core-js/modules/es.typed-array.subarray"),a("core-js/modules/es.typed-array.to-locale-string"),a("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(a=a("../core/main"))&&a.__esModule?a:{default:a},i=Array,n=function(f){return f instanceof Array},a=(typeof Float32Array<"u"&&(i=Float32Array,n=function(f){return f instanceof Array||f instanceof Float32Array}),o.default.Matrix=function(){for(var f=new Array(arguments.length),p=0;p<f.length;++p)f[p]=arguments[p];return f.length&&f[f.length-1]instanceof o.default&&(this.p5=f[f.length-1]),f[0]==="mat3"?this.mat3=Array.isArray(f[1])?f[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(f[0])?f[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},o.default.Matrix.prototype.set=function(f){return f instanceof o.default.Matrix?this.mat4=f.mat4:n(f)?this.mat4=f:arguments.length===16&&(this.mat4[0]=f,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},o.default.Matrix.prototype.get=function(){return new o.default.Matrix(this.mat4,this.p5)},o.default.Matrix.prototype.copy=function(){var f=new o.default.Matrix(this.p5);return f.mat4[0]=this.mat4[0],f.mat4[1]=this.mat4[1],f.mat4[2]=this.mat4[2],f.mat4[3]=this.mat4[3],f.mat4[4]=this.mat4[4],f.mat4[5]=this.mat4[5],f.mat4[6]=this.mat4[6],f.mat4[7]=this.mat4[7],f.mat4[8]=this.mat4[8],f.mat4[9]=this.mat4[9],f.mat4[10]=this.mat4[10],f.mat4[11]=this.mat4[11],f.mat4[12]=this.mat4[12],f.mat4[13]=this.mat4[13],f.mat4[14]=this.mat4[14],f.mat4[15]=this.mat4[15],f},o.default.Matrix.identity=function(f){return new o.default.Matrix(f)},o.default.Matrix.prototype.transpose=function(f){var p,s,l,c,h,m;return f instanceof o.default.Matrix?(p=f.mat4[1],s=f.mat4[2],l=f.mat4[3],c=f.mat4[6],h=f.mat4[7],m=f.mat4[11],this.mat4[0]=f.mat4[0],this.mat4[1]=f.mat4[4],this.mat4[2]=f.mat4[8],this.mat4[3]=f.mat4[12],this.mat4[4]=p,this.mat4[5]=f.mat4[5],this.mat4[6]=f.mat4[9],this.mat4[7]=f.mat4[13],this.mat4[8]=s,this.mat4[9]=c,this.mat4[10]=f.mat4[10],this.mat4[11]=f.mat4[14],this.mat4[12]=l,this.mat4[13]=h,this.mat4[14]=m,this.mat4[15]=f.mat4[15]):n(f)&&(p=f[1],s=f[2],l=f[3],c=f[6],h=f[7],m=f[11],this.mat4[0]=f[0],this.mat4[1]=f[4],this.mat4[2]=f[8],this.mat4[3]=f[12],this.mat4[4]=p,this.mat4[5]=f[5],this.mat4[6]=f[9],this.mat4[7]=f[13],this.mat4[8]=s,this.mat4[9]=c,this.mat4[10]=f[10],this.mat4[11]=f[14],this.mat4[12]=l,this.mat4[13]=h,this.mat4[14]=m,this.mat4[15]=f[15]),this},o.default.Matrix.prototype.invert=function(P){P instanceof o.default.Matrix?(p=P.mat4[0],s=P.mat4[1],l=P.mat4[2],c=P.mat4[3],h=P.mat4[4],m=P.mat4[5],g=P.mat4[6],y=P.mat4[7],_=P.mat4[8],x=P.mat4[9],w=P.mat4[10],j=P.mat4[11],E=P.mat4[12],T=P.mat4[13],A=P.mat4[14],R=P.mat4[15]):n(P)&&(p=P[0],s=P[1],l=P[2],c=P[3],h=P[4],m=P[5],g=P[6],y=P[7],_=P[8],x=P[9],w=P[10],j=P[11],E=P[12],T=P[13],A=P[14],R=P[15]);var p,s,l,c,h,m,g,y,_,x,w,j,E,T,A,R,P=p*m-s*h,N=p*g-l*h,O=p*y-c*h,D=s*g-l*m,U=s*y-c*m,Y=l*y-c*g,H=_*T-x*E,W=_*A-w*E,X=_*R-j*E,Z=x*A-w*T,q=x*R-j*T,ee=w*R-j*A,L=P*ee-N*q+O*Z+D*X-U*W+Y*H;return L?(this.mat4[0]=(m*ee-g*q+y*Z)*(L=1/L),this.mat4[1]=(l*q-s*ee-c*Z)*L,this.mat4[2]=(T*Y-A*U+R*D)*L,this.mat4[3]=(w*U-x*Y-j*D)*L,this.mat4[4]=(g*X-h*ee-y*W)*L,this.mat4[5]=(p*ee-l*X+c*W)*L,this.mat4[6]=(A*O-E*Y-R*N)*L,this.mat4[7]=(_*Y-w*O+j*N)*L,this.mat4[8]=(h*q-m*X+y*H)*L,this.mat4[9]=(s*X-p*q-c*H)*L,this.mat4[10]=(E*U-T*O+R*P)*L,this.mat4[11]=(x*O-_*U-j*P)*L,this.mat4[12]=(m*W-h*Z-g*H)*L,this.mat4[13]=(p*Z-s*W+l*H)*L,this.mat4[14]=(T*N-E*D-A*P)*L,this.mat4[15]=(_*D-x*N+w*P)*L,this):null},o.default.Matrix.prototype.invert3x3=function(){var f=this.mat3[0],p=this.mat3[1],s=this.mat3[2],l=this.mat3[3],c=this.mat3[4],h=this.mat3[5],m=this.mat3[6],g=this.mat3[7],y=this.mat3[8],_=y*c-h*g,x=-y*l+h*m,w=g*l-c*m,j=f*_+p*x+s*w;return j?(this.mat3[0]=_*(j=1/j),this.mat3[1]=(-y*p+s*g)*j,this.mat3[2]=(h*p-s*c)*j,this.mat3[3]=x*j,this.mat3[4]=(y*f-s*m)*j,this.mat3[5]=(-h*f+s*l)*j,this.mat3[6]=w*j,this.mat3[7]=(-g*f+p*m)*j,this.mat3[8]=(c*f-p*l)*j,this):null},o.default.Matrix.prototype.transpose3x3=function(f){var p=f[1],s=f[2],l=f[5];return this.mat3[1]=f[3],this.mat3[2]=f[6],this.mat3[3]=p,this.mat3[5]=f[7],this.mat3[6]=s,this.mat3[7]=l,this},o.default.Matrix.prototype.inverseTranspose=function(f){if(this.mat3===void 0?console.error("sorry, this function only works with mat3"):(this.mat3[0]=f.mat4[0],this.mat3[1]=f.mat4[1],this.mat3[2]=f.mat4[2],this.mat3[3]=f.mat4[4],this.mat3[4]=f.mat4[5],this.mat3[5]=f.mat4[6],this.mat3[6]=f.mat4[8],this.mat3[7]=f.mat4[9],this.mat3[8]=f.mat4[10]),f=this.invert3x3(),f)f.transpose3x3(this.mat3);else for(var p=0;p<9;p++)this.mat3[p]=0;return this},o.default.Matrix.prototype.determinant=function(){var f=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],p=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],s=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],l=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],c=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],h=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],m=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],g=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],y=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],_=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],x=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return f*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-p*x+s*_+l*y-c*g+h*m},o.default.Matrix.prototype.mult=function(s){var p;if(s===this||s===this.mat4)p=this.copy().mat4;else if(s instanceof o.default.Matrix)p=s.mat4;else if(n(s))p=s;else{if(arguments.length!==16)return;p=arguments}var s=this.mat4[0],l=this.mat4[1],c=this.mat4[2],h=this.mat4[3];return this.mat4[0]=s*p[0]+l*p[4]+c*p[8]+h*p[12],this.mat4[1]=s*p[1]+l*p[5]+c*p[9]+h*p[13],this.mat4[2]=s*p[2]+l*p[6]+c*p[10]+h*p[14],this.mat4[3]=s*p[3]+l*p[7]+c*p[11]+h*p[15],s=this.mat4[4],l=this.mat4[5],c=this.mat4[6],h=this.mat4[7],this.mat4[4]=s*p[0]+l*p[4]+c*p[8]+h*p[12],this.mat4[5]=s*p[1]+l*p[5]+c*p[9]+h*p[13],this.mat4[6]=s*p[2]+l*p[6]+c*p[10]+h*p[14],this.mat4[7]=s*p[3]+l*p[7]+c*p[11]+h*p[15],s=this.mat4[8],l=this.mat4[9],c=this.mat4[10],h=this.mat4[11],this.mat4[8]=s*p[0]+l*p[4]+c*p[8]+h*p[12],this.mat4[9]=s*p[1]+l*p[5]+c*p[9]+h*p[13],this.mat4[10]=s*p[2]+l*p[6]+c*p[10]+h*p[14],this.mat4[11]=s*p[3]+l*p[7]+c*p[11]+h*p[15],s=this.mat4[12],l=this.mat4[13],c=this.mat4[14],h=this.mat4[15],this.mat4[12]=s*p[0]+l*p[4]+c*p[8]+h*p[12],this.mat4[13]=s*p[1]+l*p[5]+c*p[9]+h*p[13],this.mat4[14]=s*p[2]+l*p[6]+c*p[10]+h*p[14],this.mat4[15]=s*p[3]+l*p[7]+c*p[11]+h*p[15],this},o.default.Matrix.prototype.apply=function(s){var p;if(s===this||s===this.mat4)p=this.copy().mat4;else if(s instanceof o.default.Matrix)p=s.mat4;else if(n(s))p=s;else{if(arguments.length!==16)return;p=arguments}var s=this.mat4,l=s[0],c=s[4],h=s[8],m=s[12],l=(s[0]=p[0]*l+p[1]*c+p[2]*h+p[3]*m,s[4]=p[4]*l+p[5]*c+p[6]*h+p[7]*m,s[8]=p[8]*l+p[9]*c+p[10]*h+p[11]*m,s[12]=p[12]*l+p[13]*c+p[14]*h+p[15]*m,s[1]),c=s[5],h=s[9],m=s[13],l=(s[1]=p[0]*l+p[1]*c+p[2]*h+p[3]*m,s[5]=p[4]*l+p[5]*c+p[6]*h+p[7]*m,s[9]=p[8]*l+p[9]*c+p[10]*h+p[11]*m,s[13]=p[12]*l+p[13]*c+p[14]*h+p[15]*m,s[2]),c=s[6],h=s[10],m=s[14],l=(s[2]=p[0]*l+p[1]*c+p[2]*h+p[3]*m,s[6]=p[4]*l+p[5]*c+p[6]*h+p[7]*m,s[10]=p[8]*l+p[9]*c+p[10]*h+p[11]*m,s[14]=p[12]*l+p[13]*c+p[14]*h+p[15]*m,s[3]),c=s[7],h=s[11],m=s[15];return s[3]=p[0]*l+p[1]*c+p[2]*h+p[3]*m,s[7]=p[4]*l+p[5]*c+p[6]*h+p[7]*m,s[11]=p[8]*l+p[9]*c+p[10]*h+p[11]*m,s[15]=p[12]*l+p[13]*c+p[14]*h+p[15]*m,this},o.default.Matrix.prototype.scale=function(f,p,s){return f instanceof o.default.Vector?(p=f.y,s=f.z,f=f.x):f instanceof Array&&(p=f[1],s=f[2],f=f[0]),this.mat4[0]*=f,this.mat4[1]*=f,this.mat4[2]*=f,this.mat4[3]*=f,this.mat4[4]*=p,this.mat4[5]*=p,this.mat4[6]*=p,this.mat4[7]*=p,this.mat4[8]*=s,this.mat4[9]*=s,this.mat4[10]*=s,this.mat4[11]*=s,this},o.default.Matrix.prototype.rotate=function(P,q,Z,l){q instanceof o.default.Vector?(Z=q.y,l=q.z,q=q.x):q instanceof Array&&(Z=q[1],l=q[2],q=q[0]);var c=Math.sqrt(q*q+Z*Z+l*l),c=(q*=1/c,Z*=1/c,l*=1/c,this.mat4[0]),h=this.mat4[1],m=this.mat4[2],g=this.mat4[3],y=this.mat4[4],_=this.mat4[5],x=this.mat4[6],w=this.mat4[7],j=this.mat4[8],E=this.mat4[9],T=this.mat4[10],A=this.mat4[11],R=Math.sin(P),P=Math.cos(P),N=1-P,O=q*q*N+P,D=Z*q*N+l*R,U=l*q*N-Z*R,Y=q*Z*N-l*R,H=Z*Z*N+P,W=l*Z*N+q*R,X=q*l*N+Z*R,Z=Z*l*N-q*R,q=l*l*N+P;return this.mat4[0]=c*O+y*D+j*U,this.mat4[1]=h*O+_*D+E*U,this.mat4[2]=m*O+x*D+T*U,this.mat4[3]=g*O+w*D+A*U,this.mat4[4]=c*Y+y*H+j*W,this.mat4[5]=h*Y+_*H+E*W,this.mat4[6]=m*Y+x*H+T*W,this.mat4[7]=g*Y+w*H+A*W,this.mat4[8]=c*X+y*Z+j*q,this.mat4[9]=h*X+_*Z+E*q,this.mat4[10]=m*X+x*Z+T*q,this.mat4[11]=g*X+w*Z+A*q,this},o.default.Matrix.prototype.translate=function(l){var p=l[0],s=l[1],l=l[2]||0;this.mat4[12]+=this.mat4[0]*p+this.mat4[4]*s+this.mat4[8]*l,this.mat4[13]+=this.mat4[1]*p+this.mat4[5]*s+this.mat4[9]*l,this.mat4[14]+=this.mat4[2]*p+this.mat4[6]*s+this.mat4[10]*l,this.mat4[15]+=this.mat4[3]*p+this.mat4[7]*s+this.mat4[11]*l},o.default.Matrix.prototype.rotateX=function(f){this.rotate(f,1,0,0)},o.default.Matrix.prototype.rotateY=function(f){this.rotate(f,0,1,0)},o.default.Matrix.prototype.rotateZ=function(f){this.rotate(f,0,0,1)},o.default.Matrix.prototype.perspective=function(c,p,s,l){var c=1/Math.tan(c/2),h=1/(s-l);return this.mat4[0]=c/p,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=c,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(l+s)*h,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*l*s*h,this.mat4[15]=0,this},o.default.Matrix.prototype.ortho=function(f,p,s,l,c,h){var m=1/(f-p),g=1/(s-l),y=1/(c-h);return this.mat4[0]=-2*m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*y,this.mat4[11]=0,this.mat4[12]=(f+p)*m,this.mat4[13]=(l+s)*g,this.mat4[14]=(h+c)*y,this.mat4[15]=1,this},o.default.Matrix);d.default=a},{"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],318:[function(e,u,d){e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e},e.default.RenderBuffer=function(o,i,n,a,f,p){this.size=o,this.src=i,this.dst=n,this.attr=a,this._renderer=f,this.map=p},e.default.RenderBuffer.prototype._prepareBuffer=function(o,i){var n,a,f,l=i.attributes,p=this._renderer.GL,s=o.model||o,l=l[this.attr];l&&(n=o[this.dst],0<(a=s[this.src]).length&&((f=!n)&&(o[this.dst]=n=p.createBuffer()),p.bindBuffer(p.ARRAY_BUFFER,n),!f&&s.dirtyFlags[this.src]===!1||(f=(o=this.map)?o(a):a,this._renderer._bindBuffer(n,p.ARRAY_BUFFER,f),s.dirtyFlags[this.src]=!1),i.enableAttrib(l,this.size)))},e=e.default.RenderBuffer,d.default=e},{"../core/main":267,"core-js/modules/es.array.map":161}],319:[function(e,u,d){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(c)}function i(c){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(h){return o(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":o(h)})(c)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(c){if(c&&c.__esModule)return c;if(c===null||i(c)!=="object"&&typeof c!="function")return{default:c};var h=f();if(h&&h.has(c))return h.get(c);var m,g={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in c){var _;Object.prototype.hasOwnProperty.call(c,m)&&((_=y?Object.getOwnPropertyDescriptor(c,m):null)&&(_.get||_.set)?Object.defineProperty(g,m,_):g[m]=c[m])}return g.default=c,h&&h.set(c,g),g}(e("../core/constants"));function f(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,f=function(){return c},c)}function p(c){return function(h){if(Array.isArray(h)){for(var m=0,g=new Array(h.length);m<h.length;m++)g[m]=h[m];return g}}(c)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),n.default.RendererGL.prototype.beginShape=function(c){return this.immediateMode.shapeMode=c!==void 0?c:a.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this};var s={vertices:1,vertexNormals:1,vertexColors:4,uvs:2},l=(n.default.RendererGL.prototype.vertex=function(c,h){if(this.immediateMode.shapeMode===a.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var m in s){var g=s[m],m=this.immediateMode.geometry[m];m.push.apply(m,p(m.slice(m.length-3*g,m.length-2*g)).concat(p(m.slice(m.length-g,m.length))))}var y,_,x=y=_=0,w=(arguments.length===3?x=arguments[2]:arguments.length===4?(y=arguments[2],_=arguments[3]):arguments.length===5&&(x=arguments[2],y=arguments[3],_=arguments[4]),new n.default.Vector(c,h,x)),w=(this.immediateMode.geometry.vertices.push(w),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexColors.push(w[0],w[1],w[2],w[3]),this.textureMode===a.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(y/=this._tex.width,_/=this._tex.height):this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(y,_),this.immediateMode._bezierVertex[0]=c,this.immediateMode._bezierVertex[1]=h,this.immediateMode._bezierVertex[2]=x,this.immediateMode._quadraticVertex[0]=c,this.immediateMode._quadraticVertex[1]=h,this.immediateMode._quadraticVertex[2]=x,this},n.default.RendererGL.prototype.normal=function(c,h,m){return c instanceof n.default.Vector?this._currentNormal=c:this._currentNormal=new n.default.Vector(c,h,m),this},n.default.RendererGL.prototype.endShape=function(c,h,m,g,y,_){return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},n.default.RendererGL.prototype._processVertices=function(c){var h;this.immediateMode.geometry.vertices.length!==0&&(h=this._doStroke&&this.drawMode!==a.TEXTURE,c=c===a.CLOSE,h&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,c),this.immediateMode.geometry._edgesToVertices()),h=this.immediateMode.shapeMode===a.TESS,(this.isBezier||this.isQuadratic||this.isCurve||h)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape())},n.default.RendererGL.prototype._calculateEdges=function(c,h,m){var g=[],y=0;switch(c){case a.TRIANGLE_STRIP:for(y=0;y<h.length-2;y++)g.push([y,y+1]),g.push([y,y+2]);g.push([y,y+1]);break;case a.TRIANGLES:for(y=0;y<h.length-2;y+=3)g.push([y,y+1]),g.push([y+1,y+2]),g.push([y+2,y]);break;case a.LINES:for(y=0;y<h.length-1;y+=2)g.push([y,y+1]);break;case a.QUADS:for(y=0;y<h.length-5;y+=6)g.push([y,y+1]),g.push([y+1,y+2]),g.push([y+3,y+5]),g.push([y+4,y+5]);break;case a.QUAD_STRIP:for(y=0;y<h.length-2;y+=2)g.push([y,y+1]),g.push([y,y+2]),g.push([y+1,y+3]);g.push([y,y+1]);break;default:for(y=0;y<h.length-1;y++)g.push([y,y+1])}return m&&g.push([h.length-1,0]),g},n.default.RendererGL.prototype._tesselateShape=function(){for(var c=this,h=(this.immediateMode.shapeMode=a.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(x,w){return[x.x,x.y,x.z,c.immediateMode.geometry.uvs[2*w],c.immediateMode.geometry.uvs[2*w+1],c.immediateMode.geometry.vertexColors[4*w],c.immediateMode.geometry.vertexColors[4*w+1],c.immediateMode.geometry.vertexColors[4*w+2],c.immediateMode.geometry.vertexColors[4*w+3],c.immediateMode.geometry.vertexNormals[w].x,c.immediateMode.geometry.vertexNormals[w].y,c.immediateMode.geometry.vertexNormals[w].z]}))]),m=this._triangulate(h),g=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),y=0,_=m.length;y<_;y+=12)g.push.apply(g,p(m.slice(y+5,y+9))),this.normal.apply(this,p(m.slice(y+9,y+12))),this.vertex.apply(this,p(m.slice(y,y+5)));this.immediateMode.geometry.vertexColors=g},n.default.RendererGL.prototype._drawImmediateFill=function(){var c=this.GL,h=this._getImmediateFillShader(),m=(this._setFillUniforms(h),!0),g=!1,y=void 0;try{for(var _,x=this.immediateMode.buffers.fill[Symbol.iterator]();!(m=(_=x.next()).done);m=!0)_.value._prepareBuffer(this.immediateMode.geometry,h)}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this.immediateMode.shapeMode===a.QUADS?this.immediateMode.shapeMode=a.TRIANGLES:this.immediateMode.shapeMode===a.QUAD_STRIP&&(this.immediateMode.shapeMode=a.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),c.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),h.unbindShader()},n.default.RendererGL.prototype._drawImmediateStroke=function(){var c=this.GL,h=this._getImmediateStrokeShader(),m=(this._setStrokeUniforms(h),!0),g=!1,y=void 0;try{for(var _,x=this.immediateMode.buffers.stroke[Symbol.iterator]();!(m=(_=x.next()).done);m=!0)_.value._prepareBuffer(this.immediateMode.geometry,h)}catch(w){g=!0,y=w}finally{try{m||x.return==null||x.return()}finally{if(g)throw y}}this._applyColorBlend(this.curStrokeColor),c.drawArrays(c.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),h.unbindShader()},n.default.RendererGL);d.default=l},{"../core/constants":256,"../core/main":267,"./p5.RenderBuffer":318,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],320:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(n=e("../core/main"))&&n.__esModule?n:{default:n};e("./p5.RendererGL"),e("./p5.RenderBuffer");var i=0,n=(o.default.RendererGL.prototype._initBufferDefaults=function(a){var f;return this._freeBuffers(a),1e3<++i&&(f=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[f],i--),this.retainedMode.geometry[a]={}},o.default.RendererGL.prototype._freeBuffers=function(a){var f,p=this.retainedMode.geometry[a];function s(l){var c=!0,h=!1,m=void 0;try{for(var g,y=l[Symbol.iterator]();!(c=(g=y.next()).done);c=!0){var _=g.value;p[_.dst]&&(f.deleteBuffer(p[_.dst]),p[_.dst]=null)}}catch(x){h=!0,m=x}finally{try{c||y.return==null||y.return()}finally{if(h)throw m}}}p&&(delete this.retainedMode.geometry[a],i--,f=this.GL,p.indexBuffer&&f.deleteBuffer(p.indexBuffer),s(this.retainedMode.buffers.stroke),s(this.retainedMode.buffers.fill))},o.default.RendererGL.prototype.createBuffers=function(h,f){var p,s,l,c=this.GL,h=this._initBufferDefaults(h),m=(h.model=f,h.indexBuffer);return f.faces.length?(m=m||(h.indexBuffer=c.createBuffer()),l=(s=(p=o.default.RendererGL.prototype._flatten(f.faces)).some(function(g){return 65535<g}))?Uint32Array:Uint16Array,this._bindBuffer(m,c.ELEMENT_ARRAY_BUFFER,p,l),h.indexBufferType=s?c.UNSIGNED_INT:c.UNSIGNED_SHORT,h.vertexCount=3*f.faces.length):(m&&(c.deleteBuffer(m),h.indexBuffer=null),h.vertexCount=f.vertices?f.vertices.length:0),h.lineVertexCount=f.lineVertices?f.lineVertices.length:0,h},o.default.RendererGL.prototype.drawBuffers=function(a){var f=this.GL,p=this.retainedMode.geometry[a];if(this._doStroke&&0<p.lineVertexCount){var s=this._getRetainedStrokeShader(),l=(this._setStrokeUniforms(s),!0),c=!1,h=void 0;try{for(var m,g=this.retainedMode.buffers.stroke[Symbol.iterator]();!(l=(m=g.next()).done);l=!0)m.value._prepareBuffer(p,s)}catch(j){c=!0,h=j}finally{try{l||g.return==null||g.return()}finally{if(c)throw h}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(f.TRIANGLES,a),s.unbindShader()}if(this._doFill){var y=this._getRetainedFillShader(),_=(this._setFillUniforms(y),!0),c=!1,h=void 0;try{for(var x,w=this.retainedMode.buffers.fill[Symbol.iterator]();!(_=(x=w.next()).done);_=!0)x.value._prepareBuffer(p,y)}catch(T){c=!0,h=T}finally{try{_||w.return==null||w.return()}finally{if(c)throw h}}p.indexBuffer&&this._bindBuffer(p.indexBuffer,f.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(f.TRIANGLES,a),y.unbindShader()}return this},o.default.RendererGL.prototype.drawBuffersScaled=function(a,f,p,s){var l=this.uMVMatrix.copy();try{this.uMVMatrix.scale(f,p,s),this.drawBuffers(a)}finally{this.uMVMatrix=l}},o.default.RendererGL.prototype._drawArrays=function(a,f){return this.GL.drawArrays(a,0,this.retainedMode.geometry[f].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(a,p){var p=this.retainedMode.geometry[p],s=this.GL;if(p.indexBuffer){if(p.indexBufferType===s.UNSIGNED_INT&&!s.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");s.drawElements(s.TRIANGLES,p.vertexCount,p.indexBufferType,0)}else s.drawArrays(a||s.TRIANGLES,0,p.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(a,f){var p=this.GL,s=this._getImmediatePointShader();this._setPointUniforms(s),this._bindBuffer(f,p.ARRAY_BUFFER,this._vToNArray(a),Float32Array,p.STATIC_DRAW),s.enableAttrib(s.attributes.aPosition,3),p.drawArrays(p.Points,0,a.length),s.unbindShader()},o.default.RendererGL);d.default=n},{"../core/main":267,"./p5.RenderBuffer":318,"./p5.RendererGL":321,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":230}],321:[function(h,u,d){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function i(m){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(m)}h("core-js/modules/es.symbol"),h("core-js/modules/es.symbol.description"),h("core-js/modules/es.symbol.iterator"),h("core-js/modules/es.array.concat"),h("core-js/modules/es.array.fill"),h("core-js/modules/es.array.filter"),h("core-js/modules/es.array.from"),h("core-js/modules/es.array.includes"),h("core-js/modules/es.array.iterator"),h("core-js/modules/es.array.slice"),h("core-js/modules/es.object.assign"),h("core-js/modules/es.object.get-own-property-descriptor"),h("core-js/modules/es.object.to-string"),h("core-js/modules/es.regexp.to-string"),h("core-js/modules/es.string.includes"),h("core-js/modules/es.string.iterator"),h("core-js/modules/es.typed-array.float32-array"),h("core-js/modules/es.typed-array.float64-array"),h("core-js/modules/es.typed-array.int16-array"),h("core-js/modules/es.typed-array.uint8-array"),h("core-js/modules/es.typed-array.uint16-array"),h("core-js/modules/es.typed-array.uint32-array"),h("core-js/modules/es.typed-array.copy-within"),h("core-js/modules/es.typed-array.every"),h("core-js/modules/es.typed-array.fill"),h("core-js/modules/es.typed-array.filter"),h("core-js/modules/es.typed-array.find"),h("core-js/modules/es.typed-array.find-index"),h("core-js/modules/es.typed-array.for-each"),h("core-js/modules/es.typed-array.includes"),h("core-js/modules/es.typed-array.index-of"),h("core-js/modules/es.typed-array.iterator"),h("core-js/modules/es.typed-array.join"),h("core-js/modules/es.typed-array.last-index-of"),h("core-js/modules/es.typed-array.map"),h("core-js/modules/es.typed-array.reduce"),h("core-js/modules/es.typed-array.reduce-right"),h("core-js/modules/es.typed-array.reverse"),h("core-js/modules/es.typed-array.set"),h("core-js/modules/es.typed-array.slice"),h("core-js/modules/es.typed-array.some"),h("core-js/modules/es.typed-array.sort"),h("core-js/modules/es.typed-array.subarray"),h("core-js/modules/es.typed-array.to-locale-string"),h("core-js/modules/es.typed-array.to-string"),h("core-js/modules/es.weak-map"),h("core-js/modules/web.dom-collections.iterator"),h("core-js/modules/es.symbol"),h("core-js/modules/es.symbol.description"),h("core-js/modules/es.symbol.iterator"),h("core-js/modules/es.array.concat"),h("core-js/modules/es.array.fill"),h("core-js/modules/es.array.filter"),h("core-js/modules/es.array.from"),h("core-js/modules/es.array.includes"),h("core-js/modules/es.array.iterator"),h("core-js/modules/es.array.slice"),h("core-js/modules/es.object.assign"),h("core-js/modules/es.object.to-string"),h("core-js/modules/es.regexp.to-string"),h("core-js/modules/es.string.includes"),h("core-js/modules/es.string.iterator"),h("core-js/modules/es.typed-array.float32-array"),h("core-js/modules/es.typed-array.float64-array"),h("core-js/modules/es.typed-array.int16-array"),h("core-js/modules/es.typed-array.uint8-array"),h("core-js/modules/es.typed-array.uint16-array"),h("core-js/modules/es.typed-array.uint32-array"),h("core-js/modules/es.typed-array.copy-within"),h("core-js/modules/es.typed-array.every"),h("core-js/modules/es.typed-array.fill"),h("core-js/modules/es.typed-array.filter"),h("core-js/modules/es.typed-array.find"),h("core-js/modules/es.typed-array.find-index"),h("core-js/modules/es.typed-array.for-each"),h("core-js/modules/es.typed-array.includes"),h("core-js/modules/es.typed-array.index-of"),h("core-js/modules/es.typed-array.iterator"),h("core-js/modules/es.typed-array.join"),h("core-js/modules/es.typed-array.last-index-of"),h("core-js/modules/es.typed-array.map"),h("core-js/modules/es.typed-array.reduce"),h("core-js/modules/es.typed-array.reduce-right"),h("core-js/modules/es.typed-array.reverse"),h("core-js/modules/es.typed-array.set"),h("core-js/modules/es.typed-array.slice"),h("core-js/modules/es.typed-array.some"),h("core-js/modules/es.typed-array.sort"),h("core-js/modules/es.typed-array.subarray"),h("core-js/modules/es.typed-array.to-locale-string"),h("core-js/modules/es.typed-array.to-string"),h("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=s(h("../core/main")),a=function(m){if(m&&m.__esModule)return m;if(m===null||i(m)!=="object"&&typeof m!="function")return{default:m};var g=p();if(g&&g.has(m))return g.get(m);var y,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var w;Object.prototype.hasOwnProperty.call(m,y)&&((w=x?Object.getOwnPropertyDescriptor(m,y):null)&&(w.get||w.set)?Object.defineProperty(_,y,w):_[y]=m[y])}return _.default=m,g&&g.set(m,_),_}(h("../core/constants")),f=s(h("libtess"));h("./p5.Shader"),h("./p5.Camera"),h("../core/p5.Renderer"),h("./p5.Matrix"),h("path");function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}function s(m){return m&&m.__esModule?m:{default:m}}function l(m){return function(g){if(Array.isArray(g)){for(var y=0,_=new Array(g.length);y<g.length;y++)_[y]=g[y];return _}}(m)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h=`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`,c={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vColor;
}`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
uniform vec4 uMaterialColor;
void main(void) {
  gl_FragColor = uMaterialColor;
}`,lightVert:h+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = uMaterialColor;
  }
  else {
    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;
  }
}`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
}
`,phongFrag:h+`// include lighting.glsl
precision highp float;
precision highp int;

uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uMaterialColor;
uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;
  gl_FragColor.rgb = diffuse * gl_FragColor.rgb + 
                    vAmbientColor * uAmbientMatColor.rgb + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb;
}`,fontVert:`precision mediump float;

attribute vec3 aPosition;
attribute vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

varying vec2 vTexCoord;
varying float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord;
  w = gl_Position.w;
}
`,fontFrag:`#extension GL_OES_standard_derivatives : enable
precision mediump float;

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

varying vec2 vTexCoord;

// some helper functions
int round(float v) { return ifloor(v + 0.5); }
ivec2 round(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = round(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  gl_FragColor = uMaterialColor;
  gl_FragColor.a *= saturate(max(antialias, cover));
}`,lineVert:`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform vec4 uViewport;
uniform int uPerspective;

attribute vec4 aPosition;
attribute vec4 aDirection;
  
void main() {
  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  vec3 scale = vec3(0.9995);

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posq.xyz = posq.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 q = uProjectionMatrix * posq;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);

  // flip tangent to normal (it's already normalized)
  vec2 normal = vec2(-tangent.y, tangent.x);

  float thickness = aDirection.w * uStrokeWeight;
  vec2 offset = normal * thickness / 2.0;

  vec2 curPerspScale;

  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
}
`,lineFrag:`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;

void main() {
  gl_FragColor = uMaterialColor;
}`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
	float mask = 0.0;

	// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

	mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

	// if strokeWeight is 1 or less lets just draw a square
	// this prevents weird artifacting from carving circles when our points are really small
	// if strokeWeight is larger than 1, we just use it as is

	mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

	// throw away the borders of the mask
    // otherwise we get weird alpha blending issues

	if(mask > 0.98){
      discard;
  	}

  	gl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;
}`},h=(n.default.RendererGL=function(m,g,y,_){return n.default.Renderer.call(this,m,g,y),this._setAttributeDefaults(g),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=a.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curAmbientColor=this._cachedFillStyle=[0,0,0,0],this.curSpecularColor=this._cachedFillStyle=[0,0,0,0],this.curEmissiveColor=this._cachedFillStyle=[0,0,0,0],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=a.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new n.default.Matrix,this.uPMatrix=new n.default.Matrix,this.uNMatrix=new n.default.Matrix("mat3"),this._currentNormal=new n.default.Vector(0,0,1),this._curCamera=new n.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new n.default.Geometry,shapeMode:a.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new n.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new n.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new n.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new n.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new n.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new n.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new n.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=a.IMAGE,this.textureWrapX=a.CLAMP,this.textureWrapY=a.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},n.default.RendererGL.prototype=Object.create(n.default.Renderer.prototype),n.default.RendererGL.prototype._setAttributeDefaults=function(m){var g={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};m._glAttributes===null?m._glAttributes=g:m._glAttributes=Object.assign(g,m._glAttributes)},n.default.RendererGL.prototype._initContext=function(){if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),this.drawingContext===null)throw new Error("Error creating webgl context");var m=this.drawingContext;m.enable(m.DEPTH_TEST),m.depthFunc(m.LEQUAL),m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)},n.default.RendererGL.prototype._resetContext=function(m,g){var y,_=this.width,x=this.height,j=this.canvas.id,w=this._pInst instanceof n.default.Graphics,j=(w?((y=this._pInst).canvas.parentNode.removeChild(y.canvas),y.canvas=document.createElement("canvas"),(y._pInst._userNode||document.body).appendChild(y.canvas),n.default.Element.call(y,y.canvas,y._pInst),y.width=_,y.height=x):((y=this.canvas)&&y.parentNode.removeChild(y),(y=document.createElement("canvas")).id=j,(this._pInst._userNode||document.body).appendChild(y),this._pInst.canvas=y,this.canvas=y),new n.default.RendererGL(this._pInst.canvas,this._pInst,!w));this._pInst._setProperty("_renderer",j),j.resize(_,x),j._applyDefaults(),w||this._pInst._elements.push(j),typeof g=="function"&&setTimeout(function(){g.apply(window._renderer,m)},0)},n.default.prototype.setAttributes=function(m,g){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var y=!0;if(g!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[m]!==g&&(this._glAttributes[m]=g,y=!1)):m instanceof Object&&this._glAttributes!==m&&(this._glAttributes=m,y=!1),this._renderer.isP3D&&!y){if(!this._setupDone){for(var _ in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(_))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},n.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.background=function(){var _=(_=this._pInst).color.apply(_,arguments),m=_.levels[0]/255,g=_.levels[1]/255,y=_.levels[2]/255,_=_.levels[3]/255;this.GL.clearColor(m,g,y,_),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},n.default.RendererGL.prototype.fill=function(m,g,y,_){var x=n.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=x._array,this.drawMode=a.FILL,this._useNormalMaterial=!1,this._tex=null},n.default.RendererGL.prototype.stroke=function(m,g,y,_){arguments[3]=255;var x=n.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=x._array},n.default.RendererGL.prototype.strokeCap=function(m){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.strokeJoin=function(m){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},n.default.RendererGL.prototype.filter=function(m){console.error("filter() does not work in WEBGL mode")},n.default.RendererGL.prototype.blendMode=function(m){m===a.DARKEST||m===a.LIGHTEST||m===a.ADD||m===a.BLEND||m===a.SUBTRACT||m===a.SCREEN||m===a.EXCLUSION||m===a.REPLACE||m===a.MULTIPLY||m===a.REMOVE?this.curBlendMode=m:m!==a.BURN&&m!==a.OVERLAY&&m!==a.HARD_LIGHT&&m!==a.SOFT_LIGHT&&m!==a.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},n.default.RendererGL.prototype.erase=function(m,g){this._isErasing||(this._applyBlendMode(a.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,m/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,g/255])},n.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},n.default.RendererGL.prototype.strokeWeight=function(m){this.curStrokeWeight!==m&&(this.pointSize=m,this.curStrokeWeight=m)},n.default.RendererGL.prototype._getPixel=function(m,g){var y=new Uint8Array(4);return this.drawingContext.readPixels(m,g,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,y),[y[0],y[1],y[2],y[3]]},n.default.RendererGL.prototype.loadPixels=function(){var m,g=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(g=g.pixels,m=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4,g instanceof Uint8Array&&g.length===m||(g=new Uint8Array(m),this._pixelsState._setProperty("pixels",g)),m=this._pInst._pixelDensity,this.GL.readPixels(0,0,this.width*m,this.height*m,this.GL.RGBA,this.GL.UNSIGNED_BYTE,g))},n.default.RendererGL.prototype.geometryInHash=function(m){return this.retainedMode.geometry[m]!==void 0},n.default.RendererGL.prototype.resize=function(m,g){n.default.Renderer.prototype.resize.call(this,m,g),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),m=this._pixelsState,m.pixels!==void 0&&m._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},n.default.RendererGL.prototype.clear=function(){this.GL.clearColor((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},n.default.RendererGL.prototype.applyMatrix=function(m,g,y,_,x,w){arguments.length===16?n.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([m,g,0,0,y,_,0,0,0,0,1,0,x,w,0,1])},n.default.RendererGL.prototype.translate=function(m,g,y){return m instanceof n.default.Vector&&(y=m.z,g=m.y,m=m.x),this.uMVMatrix.translate([m,g,y]),this},n.default.RendererGL.prototype.scale=function(m,g,y){return this.uMVMatrix.scale(m,g,y),this},n.default.RendererGL.prototype.rotate=function(m,g){return g===void 0?this.rotateZ(m):(n.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},n.default.RendererGL.prototype.rotateX=function(m){return this.rotate(m,1,0,0),this},n.default.RendererGL.prototype.rotateY=function(m){return this.rotate(m,0,1,0),this},n.default.RendererGL.prototype.rotateZ=function(m){return this.rotate(m,0,0,1),this},n.default.RendererGL.prototype.push=function(){var m=n.default.Renderer.prototype.push.apply(this),g=m.properties;return g.uMVMatrix=this.uMVMatrix.copy(),g.uPMatrix=this.uPMatrix.copy(),g._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),g.ambientLightColors=this.ambientLightColors.slice(),g.specularColors=this.specularColors.slice(),g.directionalLightDirections=this.directionalLightDirections.slice(),g.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),g.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),g.pointLightPositions=this.pointLightPositions.slice(),g.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),g.pointLightSpecularColors=this.pointLightSpecularColors.slice(),g.spotLightPositions=this.spotLightPositions.slice(),g.spotLightDirections=this.spotLightDirections.slice(),g.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),g.spotLightSpecularColors=this.spotLightSpecularColors.slice(),g.spotLightAngle=this.spotLightAngle.slice(),g.spotLightConc=this.spotLightConc.slice(),g.userFillShader=this.userFillShader,g.userStrokeShader=this.userStrokeShader,g.userPointShader=this.userPointShader,g.pointSize=this.pointSize,g.curStrokeWeight=this.curStrokeWeight,g.curStrokeColor=this.curStrokeColor,g.curFillColor=this.curFillColor,g.curAmbientColor=this.curAmbientColor,g.curSpecularColor=this.curSpecularColor,g.curEmissiveColor=this.curEmissiveColor,g._useSpecularMaterial=this._useSpecularMaterial,g._useEmissiveMaterial=this._useEmissiveMaterial,g._useShininess=this._useShininess,g.constantAttenuation=this.constantAttenuation,g.linearAttenuation=this.linearAttenuation,g.quadraticAttenuation=this.quadraticAttenuation,g._enableLighting=this._enableLighting,g._useNormalMaterial=this._useNormalMaterial,g._tex=this._tex,g.drawMode=this.drawMode,g._currentNormal=this._currentNormal,g.curBlendMode=this.curBlendMode,m},n.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=n.default.Matrix.identity(this._pInst),this},n.default.RendererGL.prototype._getImmediateStrokeShader=function(){var m=this.userStrokeShader;return m&&m.isStrokeShader()?m:this._getLineShader()},n.default.RendererGL.prototype._getRetainedStrokeShader=n.default.RendererGL.prototype._getImmediateStrokeShader,n.default.RendererGL.prototype._getImmediateFillShader=function(){var m=this.userFillShader;if(this._useNormalMaterial&&(!m||!m.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!m||!m.isLightShader())return this._getLightShader()}else if(this._tex){if(!m||!m.isTextureShader())return this._getLightShader()}else if(!m)return this._getImmediateModeShader();return m},n.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var m=this.userFillShader;if(this._enableLighting){if(!m||!m.isLightShader())return this._getLightShader()}else if(this._tex){if(!m||!m.isTextureShader())return this._getLightShader()}else if(!m)return this._getColorShader();return m},n.default.RendererGL.prototype._getImmediatePointShader=function(){var m=this.userPointShader;return m&&m.isPointShader()?m:this._getPointShader()},n.default.RendererGL.prototype._getRetainedLineShader=n.default.RendererGL.prototype._getImmediateLineShader,n.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new n.default.Shader(this,c.phongVert,c.phongFrag):this._defaultLightShader=new n.default.Shader(this,c.lightVert,c.lightTextureFrag)),this._defaultLightShader},n.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new n.default.Shader(this,c.immediateVert,c.vertexColorFrag)),this._defaultImmediateModeShader},n.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new n.default.Shader(this,c.normalVert,c.normalFrag)),this._defaultNormalShader},n.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new n.default.Shader(this,c.normalVert,c.basicFrag)),this._defaultColorShader},n.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new n.default.Shader(this,c.pointVert,c.pointFrag)),this._defaultPointShader},n.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new n.default.Shader(this,c.lineVert,c.lineFrag)),this._defaultLineShader},n.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new n.default.Shader(this,c.fontVert,c.fontFrag)),this._defaultFontShader},n.default.RendererGL.prototype._getEmptyTexture=function(){var m;return this._emptyTexture||((m=new n.default.Image(1,1)).set(0,0,255),this._emptyTexture=new n.default.Texture(this,m)),this._emptyTexture},n.default.RendererGL.prototype.getTexture=function(m){var g=this.textures,y=!0,_=!1,x=void 0;try{for(var w,j=g[Symbol.iterator]();!(y=(w=j.next()).done);y=!0){var E=w.value;if(E.src===m)return E}}catch(T){_=!0,x=T}finally{try{y||j.return==null||j.return()}finally{if(_)throw x}}return _=new n.default.Texture(this,m),g.push(_),_},n.default.RendererGL.prototype._setStrokeUniforms=function(m){m.bindShader(),m.setUniform("uMaterialColor",this.curStrokeColor),m.setUniform("uStrokeWeight",this.curStrokeWeight)},n.default.RendererGL.prototype._setFillUniforms=function(m){m.bindShader(),m.setUniform("uMaterialColor",this.curFillColor),m.setUniform("isTexture",!!this._tex),this._tex&&m.setUniform("uSampler",this._tex),m.setUniform("uTint",this._tint),m.setUniform("uAmbientMatColor",this.curAmbientColor),m.setUniform("uSpecularMatColor",this.curSpecularColor),m.setUniform("uEmissiveMatColor",this.curEmissiveColor),m.setUniform("uSpecular",this._useSpecularMaterial),m.setUniform("uEmissive",this._useEmissiveMaterial),m.setUniform("uShininess",this._useShininess),m.setUniform("uUseLighting",this._enableLighting);var g=this.pointLightDiffuseColors.length/3,g=(m.setUniform("uPointLightCount",g),m.setUniform("uPointLightLocation",this.pointLightPositions),m.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),m.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),g=(m.setUniform("uDirectionalLightCount",g),m.setUniform("uLightingDirection",this.directionalLightDirections),m.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),m.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),g=(m.setUniform("uAmbientLightCount",g),m.setUniform("uAmbientColor",this.ambientLightColors),this.spotLightDiffuseColors.length/3);m.setUniform("uSpotLightCount",g),m.setUniform("uSpotLightAngle",this.spotLightAngle),m.setUniform("uSpotLightConc",this.spotLightConc),m.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),m.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),m.setUniform("uSpotLightLocation",this.spotLightPositions),m.setUniform("uSpotLightDirection",this.spotLightDirections),m.setUniform("uConstantAttenuation",this.constantAttenuation),m.setUniform("uLinearAttenuation",this.linearAttenuation),m.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),m.bindTextures()},n.default.RendererGL.prototype._setPointUniforms=function(m){m.bindShader(),m.setUniform("uMaterialColor",this.curStrokeColor),m.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},n.default.RendererGL.prototype._bindBuffer=function(m,g,y,_,x){g=g||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(g,m),y!==void 0&&(m=new(_||Float32Array)(y),this.GL.bufferData(g,m,x||this.GL.STATIC_DRAW))},n.default.RendererGL.prototype._arraysEqual=function(m,g){var y=m.length;if(y!==g.length)return!1;for(var _=0;_<y;_++)if(m[_]!==g[_])return!1;return!0},n.default.RendererGL.prototype._isTypedArray=function(m){return m instanceof Uint32Array},n.default.RendererGL.prototype._flatten=function(m){if(m.length===0)return[];var g;if(2e4<m.length){for(var y=Object.prototype.toString,_=[],x=m.slice(),w=x.pop();y.call(w)==="[object Array]"?x.push.apply(x,l(w)):_.push(w),x.length&&(w=x.pop())!==void 0;);return _.reverse(),_}return(g=[]).concat.apply(g,l(m))},n.default.RendererGL.prototype._vToNArray=function(m){var g=[],y=!0,_=!1,x=void 0;try{for(var w,j=m[Symbol.iterator]();!(y=(w=j.next()).done);y=!0){var E=w.value;g.push(E.x,E.y,E.z)}}catch(T){_=!0,x=T}finally{try{y||j.return==null||j.return()}finally{if(_)throw x}}return g},n.default.prototype._assert3d=function(m){if(!this._renderer.isP3D)throw new Error("".concat(m,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},n.default.RendererGL.prototype._initTessy=function(){var m=new f.default.GluTesselator;return m.gluTessCallback(f.default.gluEnum.GLU_TESS_VERTEX_DATA,function(g,y){for(var _=0;_<g.length;_++)y[y.length]=g[_]}),m.gluTessCallback(f.default.gluEnum.GLU_TESS_BEGIN,function(g){g!==f.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(g))}),m.gluTessCallback(f.default.gluEnum.GLU_TESS_ERROR,function(g){console.log("error callback"),console.log("error number: ".concat(g))}),m.gluTessCallback(f.default.gluEnum.GLU_TESS_COMBINE,function(g,y,_){for(var x=[0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<_.length;w++)for(var j=0;j<x.length;j++)_[w]!==0&&y[w]&&(x[j]+=y[w][j]*_[w]);return x}),m.gluTessCallback(f.default.gluEnum.GLU_TESS_EDGE_FLAG,function(g){}),m},n.default.RendererGL.prototype._triangulate=function(m){this._tessy.gluTessNormal(0,0,1);var g=[];this._tessy.gluTessBeginPolygon(g);for(var y=0;y<m.length;y++){this._tessy.gluTessBeginContour();for(var _=m[y],x=0;x<_.length;x+=12){var w=_.slice(x,x+12);this._tessy.gluTessVertex(w,w)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),g},n.default.RendererGL.prototype._bezierCoefficients=function(m){var g=m*m,y=1-m,_=y*y;return[_*y,3*_*m,3*y*g,g*m]},n.default.RendererGL.prototype._quadraticCoefficients=function(m){var g=1-m;return[g*g,2*g*m,m*m]},n.default.RendererGL.prototype._bezierToCatmull=function(m){return[m[1],m[1]+(m[2]-m[0])/this._curveTightness,m[2]-(m[3]-m[1])/this._curveTightness,m[2]]},n.default.RendererGL);d.default=h},{"../core/constants":256,"../core/main":267,"../core/p5.Renderer":270,"./p5.Camera":315,"./p5.Matrix":317,"./p5.Shader":322,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":152,"core-js/modules/es.array.filter":153,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":172,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230,libtess:239,path:242}],322:[function(e,u,d){e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};o.default.Shader=function(i,n,a){this._renderer=i,this._vertSrc=n,this._fragSrc=a,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},o.default.Shader.prototype.init=function(){if(this._glProgram===0){var i=this._renderer.GL;if(this._vertShader=i.createShader(i.VERTEX_SHADER),i.shaderSource(this._vertShader,this._vertSrc),i.compileShader(this._vertShader),!i.getShaderParameter(this._vertShader,i.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(i.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(this._fragShader,this._fragSrc),i.compileShader(this._fragShader),!i.getShaderParameter(this._fragShader,i.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(i.getShaderInfoLog(this._fragShader))),null;this._glProgram=i.createProgram(),i.attachShader(this._glProgram,this._vertShader),i.attachShader(this._glProgram,this._fragShader),i.linkProgram(this._glProgram),i.getProgramParameter(this._glProgram,i.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(i.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},o.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var i=this._renderer.GL,n=i.getProgramParameter(this._glProgram,i.ACTIVE_ATTRIBUTES),a=0;a<n;++a){var f=i.getActiveAttrib(this._glProgram,a),p=f.name,s=i.getAttribLocation(this._glProgram,p),l={};l.name=p,l.location=s,l.index=a,l.type=f.type,l.size=f.size,this.attributes[p]=l}this._loadedAttributes=!0}},o.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var i=this._renderer.GL,n=i.getProgramParameter(this._glProgram,i.ACTIVE_UNIFORMS),a=0,f=0;f<n;++f){var p=i.getActiveUniform(this._glProgram,f),s={},l=(s.location=i.getUniformLocation(this._glProgram,p.name),s.size=p.size,p.name);1<p.size&&(l=l.substring(0,l.indexOf("[0]"))),s.name=l,s.type=p.type,s._cachedData=void 0,s.type===i.SAMPLER_2D&&(s.samplerIndex=a,a++,this.samplers.push(s)),s.isArray=1<p.size||s.type===i.FLOAT_MAT3||s.type===i.FLOAT_MAT4||s.type===i.FLOAT_VEC2||s.type===i.FLOAT_VEC3||s.type===i.FLOAT_VEC4||s.type===i.INT_VEC2||s.type===i.INT_VEC4||s.type===i.INT_VEC3,this.uniforms[l]=s}this._loadedUniforms=!0}},o.default.Shader.prototype.compile=function(){},o.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},o.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},o.default.Shader.prototype.bindTextures=function(){var i=this._renderer.GL,n=!0,a=!1,f=void 0;try{for(var p,s=this.samplers[Symbol.iterator]();!(n=(p=s.next()).done);n=!0){var l=p.value,c=l.texture;c===void 0&&(c=this._renderer._getEmptyTexture()),i.activeTexture(i.TEXTURE0+l.samplerIndex),c.bindTexture(),c.update(),i.uniform1i(l.location,l.samplerIndex)}}catch(h){a=!0,f=h}finally{try{n||s.return==null||s.return()}finally{if(a)throw f}}},o.default.Shader.prototype.updateTextures=function(){var i=!0,n=!1,a=void 0;try{for(var f,p=this.samplers[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){var s=f.value.texture;s&&s.update()}}catch(l){n=!0,a=l}finally{try{i||p.return==null||p.return()}finally{if(n)throw a}}},o.default.Shader.prototype.unbindTextures=function(){},o.default.Shader.prototype._setMatrixUniforms=function(){var i=this._renderer._curCamera.cameraMatrix,n=this._renderer.uPMatrix,a=this._renderer.uMVMatrix,f=a.copy();f.mult(n),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",i.mat4),this.setUniform("uProjectionMatrix",n.mat4),this.setUniform("uModelViewMatrix",a.mat4),this.setUniform("uModelViewProjectionMatrix",f.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},o.default.Shader.prototype.useProgram=function(){var i=this._renderer.GL;return this._renderer._curShader!==this&&(i.useProgram(this._glProgram),this._renderer._curShader=this),this},o.default.Shader.prototype.setUniform=function(i,n){var a=this.uniforms[i];if(a){var f=this._renderer.GL;if(a.isArray){if(a._cachedData&&this._renderer._arraysEqual(a._cachedData,n))return;a._cachedData=n.slice(0)}else{if(a._cachedData&&a._cachedData===n)return;Array.isArray(n)?a._cachedData=n.slice(0):a._cachedData=n}var p=a.location;switch(this.useProgram(),a.type){case f.BOOL:n===!0?f.uniform1i(p,1):f.uniform1i(p,0);break;case f.INT:1<a.size?n.length&&f.uniform1iv(p,n):f.uniform1i(p,n);break;case f.FLOAT:1<a.size?n.length&&f.uniform1fv(p,n):f.uniform1f(p,n);break;case f.FLOAT_MAT3:f.uniformMatrix3fv(p,!1,n);break;case f.FLOAT_MAT4:f.uniformMatrix4fv(p,!1,n);break;case f.FLOAT_VEC2:1<a.size?n.length&&f.uniform2fv(p,n):f.uniform2f(p,n[0],n[1]);break;case f.FLOAT_VEC3:1<a.size?n.length&&f.uniform3fv(p,n):f.uniform3f(p,n[0],n[1],n[2]);break;case f.FLOAT_VEC4:1<a.size?n.length&&f.uniform4fv(p,n):f.uniform4f(p,n[0],n[1],n[2],n[3]);break;case f.INT_VEC2:1<a.size?n.length&&f.uniform2iv(p,n):f.uniform2i(p,n[0],n[1]);break;case f.INT_VEC3:1<a.size?n.length&&f.uniform3iv(p,n):f.uniform3i(p,n[0],n[1],n[2]);break;case f.INT_VEC4:1<a.size?n.length&&f.uniform4iv(p,n):f.uniform4i(p,n[0],n[1],n[2],n[3]);break;case f.SAMPLER_2D:f.activeTexture(f.TEXTURE0+a.samplerIndex),a.texture=n instanceof o.default.Texture?n:this._renderer.getTexture(n),f.uniform1i(p,a.samplerIndex)}return this}},o.default.Shader.prototype.isLightShader=function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0},o.default.Shader.prototype.isNormalShader=function(){return this.attributes.aNormal!==void 0},o.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},o.default.Shader.prototype.isColorShader=function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0},o.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},o.default.Shader.prototype.isStrokeShader=function(){return this.uniforms.uStrokeWeight!==void 0},o.default.Shader.prototype.enableAttrib=function(i,n,a,f,p,s){var l,c;return i&&(l=i.location)!==-1&&(c=this._renderer.GL,i.enabled||(c.enableVertexAttribArray(l),i.enabled=!0),this._renderer.GL.vertexAttribPointer(l,n,a||c.FLOAT,f||!1,p||0,s||0)),this},e=o.default.Shader,d.default=e},{"../core/main":267,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":165,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":230}],323:[function(e,u,d){function o(s){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(s)}function i(s){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(l){return o(l)}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":o(l)})(s)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var n=(p=e("../core/main"))&&p.__esModule?p:{default:p},a=function(s){if(s&&s.__esModule)return s;if(s===null||i(s)!=="object"&&typeof s!="function")return{default:s};var l=f();if(l&&l.has(s))return l.get(s);var c,h={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in s){var g;Object.prototype.hasOwnProperty.call(s,c)&&((g=m?Object.getOwnPropertyDescriptor(s,c):null)&&(g.get||g.set)?Object.defineProperty(h,c,g):h[c]=s[c])}return h.default=s,l&&l.set(s,h),h}(e("../core/constants"));function f(){var s;return typeof WeakMap!="function"?null:(s=new WeakMap,f=function(){return s},s)}n.default.Texture=function(s,l,c){return this._renderer=s,s=this._renderer.GL,(c=c||{}).dataType===s.FLOAT&&(s.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),s.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=l,this.glTex=void 0,this.glTarget=s.TEXTURE_2D,this.glFormat=c.format||s.RGBA,this.mipmaps=!1,this.glMinFilter=c.minFilter||s.LINEAR,this.glMagFilter=c.magFilter||s.LINEAR,this.glWrapS=c.wrapS||s.CLAMP_TO_EDGE,this.glWrapT=c.wrapT||s.CLAMP_TO_EDGE,this.glDataType=c.dataType||s.UNSIGNED_BYTE,this.isSrcMediaElement=n.default.MediaElement!==void 0&&l instanceof n.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=n.default.Element!==void 0&&l instanceof n.default.Element&&!(l instanceof n.default.Graphics)&&!(l instanceof n.default.Renderer),this.isSrcP5Image=l instanceof n.default.Image,this.isSrcP5Graphics=l instanceof n.default.Graphics,this.isSrcP5Renderer=l instanceof n.default.Renderer,this.isImageData=typeof ImageData<"u"&&l instanceof ImageData,c=this._getTextureDataFromSource(),this.width=c.width,this.height=c.height,this.init(c),this},n.default.Texture.prototype._getTextureDataFromSource=function(){var s;return this.isSrcP5Image?s=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?s=this.src.elt:this.isImageData&&(s=this.src),s},n.default.Texture.prototype.init=function(s){var l,c=this._renderer.GL;this.glTex=c.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.glMagFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.glMinFilter),this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(l=new Uint8Array([1,1,1,1]),c.texImage2D(this.glTarget,0,c.RGBA,1,1,0,this.glFormat,this.glDataType,l)):c.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,s)},n.default.Texture.prototype.update=function(){var s,l,c,h=this.src;return h.width!==0&&h.height!==0&&(s=this._getTextureDataFromSource(),l=!1,c=this._renderer.GL,s.width!==this.width||s.height!==this.height?(l=!0,this.width=s.width,this.height=s.height,this.isSrcP5Image?h.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&h.setModified(!0)):this.isSrcP5Image?h.isModified()&&h.setModified(!(l=!0)):this.isSrcMediaElement?h.isModified()?h.setModified(!(l=!0)):h.loadedmetadata&&this._videoPrevUpdateTime!==h.time()&&(this._videoPrevUpdateTime=h.time(),l=!0):this.isImageData?h._dirty&&(l=!(h._dirty=!1)):l=!0,l&&(this.bindTexture(),c.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,s)),l)},n.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},n.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},n.default.Texture.prototype.setInterpolation=function(s,l){var c=this._renderer.GL;s===a.NEAREST?this.glMinFilter=c.NEAREST:this.glMinFilter=c.LINEAR,l===a.NEAREST?this.glMagFilter=c.NEAREST:this.glMagFilter=c.LINEAR,this.bindTexture(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.glMinFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},n.default.Texture.prototype.setWrapMode=function(s,l){function c(y){return(y&y-1)==0}var h=this._renderer.GL,m=c(this.width),g=c(this.height);s===a.REPEAT?m&&g?this.glWrapS=h.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=h.CLAMP_TO_EDGE):s===a.MIRROR?m&&g?this.glWrapS=h.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=h.CLAMP_TO_EDGE):this.glWrapS=h.CLAMP_TO_EDGE,l===a.REPEAT?m&&g?this.glWrapT=h.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=h.CLAMP_TO_EDGE):l===a.MIRROR?m&&g?this.glWrapT=h.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=h.CLAMP_TO_EDGE):this.glWrapT=h.CLAMP_TO_EDGE,this.bindTexture(),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,this.glWrapS),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var p=n.default.Texture;d.default=p},{"../core/constants":256,"../core/main":267,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}],324:[function(e,u,d){function o(m){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function i(m){return(i=typeof Symbol=="function"&&o(Symbol.iterator)==="symbol"?function(g){return o(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":o(g)})(m)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var n,a=(n=e("../core/main"))&&n.__esModule?n:{default:n},f=function(m){if(m&&m.__esModule)return m;if(m===null||i(m)!=="object"&&typeof m!="function")return{default:m};var g=p();if(g&&g.has(m))return g.get(m);var y,_={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in m){var w;Object.prototype.hasOwnProperty.call(m,y)&&((w=x?Object.getOwnPropertyDescriptor(m,y):null)&&(w.get||w.set)?Object.defineProperty(_,y,w):_[y]=m[y])}return _.default=m,g&&g.set(m,_),_}(e("../core/constants"));function p(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,p=function(){return m},m)}e("./p5.Shader"),e("./p5.RendererGL.Retained"),a.default.RendererGL.prototype._applyTextProperties=function(){},a.default.RendererGL.prototype.textWidth=function(m){return this._isOpenType()?this._textFont._textWidth(m,this._textSize):0};function s(m,g){this.width=m,this.height=g,this.infos=[],this.findImage=function(y){var _,x,w=this.width*this.height;if(w<y)throw new Error("font is too complex to render in 3D");for(var j=this.infos.length-1;0<=j;--j){var E=this.infos[j];if(E.index+y<w){x=(_=E).imageData;break}}if(!_){try{x=new ImageData(this.width,this.height)}catch{var T=document.getElementsByTagName("canvas")[0],A=!T,R=(T||((T=document.createElement("canvas")).style.display="none",document.body.appendChild(T)),T.getContext("2d"));R&&(x=R.createImageData(this.width,this.height)),A&&document.body.removeChild(T)}this.infos.push(_={index:0,imageData:x})}return R=_.index,_.index+=y,x._dirty=!0,{imageData:x,index:R}}}function l(j,g,y,_,x){var w=j.imageData.data,j=4*j.index++;w[j++]=g,w[j++]=y,w[j++]=_,w[+j]=x}function c(m){this.font=m,this.strokeImageInfos=new s(64,64),this.colDimImageInfos=new s(64,64),this.rowDimImageInfos=new s(64,64),this.colCellImageInfos=new s(64,64),this.rowCellImageInfos=new s(64,64),this.glyphInfos={},this.getGlyphInfo=function(g){var y=this.glyphInfos[g.index];if(!y){var _=g.getBoundingBox(),x=_.x1,w=_.y1,j=_.x2-x,E=_.y2-w,T=g.path.commands;if(j==0||E==0||!T.length)return this.glyphInfos[g.index]={};for(var A,R,P,N,O=[],D=[],U=[],Y=8;0<=Y;--Y)U.push([]);for(Y=8;0<=Y;--Y)D.push([]);var H=!0,W=!1,X=void 0;try{for(var Z,q=T[Symbol.iterator]();!(H=(Z=q.next()).done);H=!0){var ee=Z.value,L=(ee.x-x)/j,I=(ee.y-w)/E;if(!Ie(A,R,L,I)){switch(ee.type){case"M":P=L,N=I;break;case"L":Se(A,R,L,I);break;case"Q":var F=(ee.x1-x)/j,V=(ee.y1-w)/E;xe([A,L,F],[R,I,V],{x:A,y:R,cx:F,cy:V});break;case"Z":Ie(A,R,P,N)?O.push({x:A,y:R}):(Se(A,R,P,N),O.push({x:P,y:N}));break;case"C":for(var J=function(oe,z,te,Le,Fe,He,We,we){var oe=new Ee(new a.default.Vector(oe,z),new a.default.Vector(te,Le),new a.default.Vector(Fe,He),new a.default.Vector(We,we)).splitInflections(),ae=[],K=30/h,Q=!0,z=!1,te=void 0;try{for(var ye,je=oe[Symbol.iterator]();!(Q=(ye=je.next()).done);Q=!0){for(var Pe=ye.value,Ke=[],ve=void 0;!(.125<=(ve=K/Pe.quadError()));){var Ce=Math.pow(ve,.3333333333333333),Be=Pe.split(Ce),rt=Pe.split(1-Ce/(1-Ce));ae.push(Be),Ke.push(Pe),Pe=rt}ve<1&&ae.push(Pe.split(.5)),ae.push(Pe),Array.prototype.push.apply(ae,Ke.reverse())}}catch(st){z=!0,te=st}finally{try{Q||je.return==null||je.return()}finally{if(z)throw te}}return ae}(A,R,(ee.x1-x)/j,(ee.y1-w)/E,(ee.x2-x)/j,(ee.y2-w)/E,L,I),le=0;le<J.length;le++){var ce=J[le].toQuadratic();xe([ce.x,ce.x1,ce.cx],[ce.y,ce.y1,ce.cy],ce)}break;default:throw new Error("unknown command type: ".concat(ee.type))}A=L,R=I}}}catch(Xe){W=!0,X=Xe}finally{try{H||q.return==null||q.return()}finally{if(W)throw X}}for(var ue=O.length,re=this.strokeImageInfos.findImage(ue),de=re.index,be=0;be<ue;++be){var ie=O[be];l(re,Me(ie.x),Me(ie.y),Me(ie.cx),Me(ie.cy))}(y=this.glyphInfos[g.index]={glyph:g,uGlyphRect:[_.x1,-_.y1,_.x2,-_.y2],strokeImageInfo:re,strokes:O,colInfo:Oe(U,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Oe(D,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[y.colInfo.dimOffset,y.rowInfo.dimOffset]}return y;function xe(Xe,$,se){var Le=O.length;function Fe(ae,K,Q){for(var z=ae.length;0<z--;){var te=ae[z];te<K&&(K=te),Q<te&&(Q=te)}return{min:K,max:Q}}O.push(se);for(var se=Fe(Xe,1,0),Xe=Math.max(Math.floor(9*se.min),0),He=Math.min(Math.ceil(9*se.max),9),We=Xe;We<He;++We)U[We].push(Le);for(var se=Fe($,1,0),Xe=Math.max(Math.floor(9*se.min),0),we=Math.min(Math.ceil(9*se.max),9),oe=Xe;oe<we;++oe)D[oe].push(Le)}function Me(Xe){return(Xe=(se=255)*Xe)<($=0)?$:se<Xe?se:Xe;var $,se}function Ee(Xe,$,se,Le){this.p0=Xe,this.c0=$,this.c1=se,this.p1=Le,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return a.default.Vector.sub(a.default.Vector.sub(this.p1,this.p0),a.default.Vector.mult(a.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(oe){var He=a.default.Vector.lerp(this.p0,this.c0,oe),we=a.default.Vector.lerp(this.c0,this.c1,oe),We=a.default.Vector.lerp(He,we,oe),we=(this.c1=a.default.Vector.lerp(this.c1,this.p1,oe),this.c0=a.default.Vector.lerp(we,this.c1,oe),a.default.Vector.lerp(We,this.c0,oe)),oe=new Ee(this.p0,He,We,we);return this.p0=we,oe},this.splitInflections=function(){var Fe=a.default.Vector.sub(this.c0,this.p0),He=a.default.Vector.sub(a.default.Vector.sub(this.c1,this.c0),Fe),We=a.default.Vector.sub(a.default.Vector.sub(a.default.Vector.sub(this.p1,this.c1),Fe),a.default.Vector.mult(He,2)),we=[],oe=He.x*We.y-He.y*We.x;return oe!==0&&0<=(Fe=(We=Fe.x*We.y-Fe.y*We.x)*We-4*oe*(Fe.x*He.y-Fe.y*He.x))&&(oe<0&&(oe=-oe,We=-We),Fe=(-We+(He=Math.sqrt(Fe)))/(2*oe),0<(We=(-We-He)/(2*oe))&&We<1&&(we.push(this.split(We)),Fe=1-(1-Fe)/(1-We)),0<Fe&&Fe<1&&we.push(this.split(Fe))),we.push(this),we}}function Se(Xe,$,se,Le){xe([Xe,se],[$,Le],{x:Xe,y:$,cx:(Xe+se)/2,cy:($+Le)/2})}function Ie(Xe,$,se,Le){return Math.abs(se-Xe)<1e-5&&Math.abs(Le-$)<1e-5}function Oe(Xe,$,se){for(var Le=Xe.length,Fe=$.findImage(Le),$=Fe.index,He=0,We=0;We<Le;++We)He+=Xe[We].length;for(var we=se.findImage(He),oe=0;oe<Le;++oe){var ae=Xe[oe],K=ae.length,Q=we.index;l(Fe,Q>>7,127&Q,K>>7,127&K);for(var z=0;z<K;++z){var te=ae[z]+de;l(we,te>>7,127&te,0,0)}}return{cellImageInfo:we,dimOffset:$,dimImageInfo:Fe}}}}var h=Math.sqrt(3);a.default.RendererGL.prototype._renderText=function(m,g,y,_,x){if(this._textFont&&typeof this._textFont!="string"){if(!(x<=_)&&this._doFill){if(this._isOpenType()){m.push();var x=this._doStroke,w=this.drawMode,j=(this._doStroke=!1,this.drawMode=f.TEXTURE,this._textFont.font),E=(E=this._textFont._fontInfo)||(this._textFont._fontInfo=new c(j)),y=this._textFont._handleAlignment(this,g,y,_),_=this._textSize/j.unitsPerEm,T=(this.translate(y.x,y.y,0),this.scale(_,_,1),this.GL),y=!this._defaultFontShader,A=this._getFontShader(),R=(A.init(),A.bindShader(),y&&(A.setUniform("uGridImageSize",[64,64]),A.setUniform("uCellsImageSize",[64,64]),A.setUniform("uStrokeImageSize",[64,64]),A.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),P=(R||((_=this._textGeom=new a.default.Geometry(1,1,function(){for(var ce=0;ce<=1;ce++)for(var ue=0;ue<=1;ue++)this.vertices.push(new a.default.Vector(ue,ce,0)),this.uvs.push(ue,ce)})).computeFaces().computeNormals(),R=this.createBuffers("glyph",_)),!0),y=!1,_=void 0;try{for(var N,O=this.retainedMode.buffers.text[Symbol.iterator]();!(P=(N=O.next()).done);P=!0)N.value._prepareBuffer(R,A)}catch(ce){y=!0,_=ce}finally{try{P||O.return==null||O.return()}finally{if(y)throw _}}this._bindBuffer(R.indexBuffer,T.ELEMENT_ARRAY_BUFFER),A.setUniform("uMaterialColor",this.curFillColor);try{var D=0,U=null,Y=j.stringToGlyphs(g),H=!0,W=!1,X=void 0;try{for(var Z,q=Y[Symbol.iterator]();!(H=(Z=q.next()).done);H=!0){var ee,L,I=Z.value,F=(U&&(D+=j.getKerningValue(U,I)),E.getGlyphInfo(I));F.uGlyphRect&&(ee=F.rowInfo,L=F.colInfo,A.setUniform("uSamplerStrokes",F.strokeImageInfo.imageData),A.setUniform("uSamplerRowStrokes",ee.cellImageInfo.imageData),A.setUniform("uSamplerRows",ee.dimImageInfo.imageData),A.setUniform("uSamplerColStrokes",L.cellImageInfo.imageData),A.setUniform("uSamplerCols",L.dimImageInfo.imageData),A.setUniform("uGridOffset",F.uGridOffset),A.setUniform("uGlyphRect",F.uGlyphRect),A.setUniform("uGlyphOffset",D),A.bindTextures(),T.drawElements(T.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),D+=I.advanceWidth,U=I}}catch(ce){W=!0,X=ce}finally{try{H||q.return==null||q.return()}finally{if(W)throw X}}}finally{A.unbindShader(),this._doStroke=x,this.drawMode=w,m.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return m}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":256,"../core/main":267,"./p5.RendererGL.Retained":320,"./p5.Shader":322,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-own-property-descriptor":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.weak-map":228,"core-js/modules/web.dom-collections.iterator":230}]},{},[251])(251)})})(Mp);const fl=Sp(Ha);function Tp(b){let t,r,e=u=>{let d=0;r=u,u.windowResized=()=>{u.resizeCanvas(u.windowWidth,u.windowHeight)},u.setup=()=>{t=u.createCanvas(u.windowWidth,u.windowHeight),t.position(0,0),t.style("z-index","-1")},u.draw=()=>{u.background(229.5,127.5);for(let o=0;o<=u.width;o=o+30)for(let i=0;i<=u.height;i=i+30){const n=u.map(200,0,u.width,-4*u.PI,4*u.PI,!0),a=u.map(200,0,u.height,-4*u.PI,4*u.PI,!0),f=n*(o/u.width)+a*(i/u.height),p=o+40*u.cos(2*u.PI*d+f),s=i+20*u.sin(2*u.PI*d+f);u.stroke(140.25),u.ellipse(p,s,5)}d=d+.001}};return si(()=>{new fl(e)}),cl(()=>{r&&r.remove()}),[]}class Ep extends Rr{constructor(t){super(),Ut(this,t,Tp,null,Ot,{})}}function jp(b){let t,r,e,u,d,o,i,n,a,f,p,s,l,c,h,m,g,y,_,x,w,j,E;return t=new Ep({}),i=new Hd({}),c=new dl({}),x=new hl({}),{c(){Kt(t.$$.fragment),r=_t(),e=tt("div"),u=_t(),d=tt("div"),o=tt("div"),Kt(i.$$.fragment),n=_t(),a=tt("div"),a.innerHTML=`<p class="text-body excerpt"><span>Компания «Техника и оснащение» поставляет трубопроводное оборудование, а
				также</span> 
			<span>проектирует современные, рациональные и экономически обоснованные</span> 
			<span>инженерные системы.</span></p>`,f=_t(),p=tt("div"),s=tt("a"),l=tt("div"),Kt(c.$$.fragment),h=_t(),m=tt("span"),m.textContent="Каталог техники",g=_t(),y=tt("a"),_=tt("div"),Kt(x.$$.fragment),w=_t(),j=tt("span"),j.textContent="Об оснащении",this.c=ut,me(e,"class","background"),me(o,"class","logo-box"),me(a,"class","excerpt-box"),me(l,"class","button-svg-box"),me(m,"class","text-button-caption"),me(s,"href","/gear/"),me(_,"class","button-svg-box"),me(j,"class","text-button-caption"),me(y,"href","/rigging/"),me(p,"class","buttons-box"),me(d,"class","content-frame")},m(T,A){Xt(t,T,A),lt(T,r,A),lt(T,e,A),lt(T,u,A),lt(T,d,A),Ae(d,o),Xt(i,o,null),Ae(d,n),Ae(d,a),Ae(d,f),Ae(d,p),Ae(p,s),Ae(s,l),Xt(c,l,null),Ae(s,h),Ae(s,m),Ae(p,g),Ae(p,y),Ae(y,_),Xt(x,_,null),Ae(y,w),Ae(y,j),E=!0},p:ut,i(T){E||(xt(t.$$.fragment,T),xt(i.$$.fragment,T),xt(c.$$.fragment,T),xt(x.$$.fragment,T),E=!0)},o(T){Mt(t.$$.fragment,T),Mt(i.$$.fragment,T),Mt(c.$$.fragment,T),Mt(x.$$.fragment,T),E=!1},d(T){Ht(t,T),T&&dt(r),T&&dt(e),T&&dt(u),T&&dt(d),Ht(i),Ht(c),Ht(x)}}}class Cp extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";.background{background-color:#e5e5e5;position:fixed;top:0;bottom:0;left:0;right:0;z-index:-1}.content-frame{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%)}.logo-box{width:300px;height:auto}.excerpt-box{width:90vw;display:flex;justify-content:flex-start;padding:calc(16px * 1);border-radius:3px;margin-bottom:16px}span{display:inline}.buttons-box{display:flex;padding-inline:16px}.buttons-box>a{background-color:hsla(0 0% 90% / 0.2);backdrop-filter:blur(4px);background-color:var(--color-light-primary);padding:4px 12px;border-radius:3px;display:flex;align-items:center;margin-right:16px;transition-duration:300ms;box-shadow:rgba(0, 0, 0, 0.1) 0px 1px 3px 0px,
			rgba(0, 0, 0, 0.06) 0px 1px 2px 0px}.buttons-box>a:hover{filter:brightness(1.1)}.buttons-box span{color:var(--color-light-on-primary)}.button-svg-box{aspect-ratio:1/1;width:36px;height:auto;display:flex;justify-content:center;align-items:center;margin-right:4px}@media(min-width: 650px){.logo-box{width:400px}.excerpt-box{width:70vw}}@media(min-width: 1250px){span{display:block}.excerpt-box{width:100%}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},null,jp,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("index-screen",Cp);const Ap={title:"Техника",excerpt:"Быстро и ответственно поставляем широкий спектр оборудования во все уголки России. Напрямую работаем с производителями, поэтому клиенты получают качественное оборудование точно в срок."},Lp="gear",Rp=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/noPiggy.png",text:"Без посредников"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/quality.png",text:"Высокое качество"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/deadline.png",text:"Сжатые сроки"}],Pp={content:Ap,variant:Lp,summary:Rp};function Dp(b){let t,r;return _r(b[2]),{c:ut,m(e,u){t||(r=Nn(window,"resize",b[2]),t=!0)},p:ut,i:ut,o:ut,d(e){t=!1,r()}}}function kp(b,t,r){let{container:e}=t;const u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;let d,o=600,i;function n(p){if(p<601){o=400;return}o=600}let a=p=>{let s=0,l,c;const h=2;let m=o/(3.333*h);p.preload=()=>{d=p.loadImage("https://v0ffk4.github.io/tios-static/webgl/texCrateVariant.jpg")},p.windowResized=()=>{if(i<601){p.resizeCanvas(400,400);return}p.resizeCanvas(600,600)},p.setup=()=>{p.describe("анимация контейнеров с оборудованием");let g=p.createCanvas(o,o,p.WEBGL);g.parent(e),g.style("visibility","visible"),l=p.atan(.5/p.sqrt(1)),c=p.dist(0,0,200,200),u||p.smooth()},p.draw=()=>{let g=p.mouseX-p.width/2,y=p.mouseY-p.height/2;p.background(255,0),p.stroke(255),p.strokeWeight(1),p.ortho(-o*.9,o*.9,-o*.9,o*.9,0,2e3),p.translate(50,50,-50),p.rotateX(-p.QUARTER_PI*.5),p.rotateY(l);let _=p.map(g,0,p.width,-50,50),x=p.map(y,0,p.height,-200,-200);p.directionalLight(255,255,255,-_,-x,-500),p.ambientLight(120,120,120),p.pointLight(100,100,100,g,y,100),p.ambientMaterial(100),p.normalMaterial();for(let j=0;j<p.height;j+=m*h)w(j);function w(j){for(let E=0;E<p.width;E+=m){p.push();let T=p.dist(E,j,p.width/2,p.height/2),A=p.map(T,0,c,-p.PI,p.PI),R=s+A,P=p.floor(p.map(p.sin(R),-1,1,100,200));p.translate(E-p.width/2,0,j-p.height/2),p.texture(d),p.box(m,P,m*h),p.pop()}}s-=.05}};function f(){r(0,i=window.innerWidth)}return b.$$set=p=>{"container"in p&&r(1,e=p.container)},b.$$.update=()=>{b.$$.dirty&1&&n(i),b.$$.dirty&2&&e&&new fl(a)},[i,e,f]}class Ip extends Rr{constructor(t){super(),Ut(this,t,kp,Dp,Ot,{container:1})}}function Op(b){let t,r,e,u,d,o,i,n,a,f,p,s,l,c,h;return p=new Ip({props:{container:b[0]}}),{c(){t=tt("div"),r=tt("div"),e=tt("div"),u=tt("h1"),u.textContent=`${b[2].content.title}`,d=_t(),o=tt("p"),o.textContent=`${b[2].content.excerpt}`,i=_t(),n=tt("div"),n.innerHTML='<basic-button label="Наш магазин"></basic-button>',a=_t(),f=tt("div"),Kt(p.$$.fragment),s=_t(),l=tt("div"),c=tt("page-summary"),this.c=ut,me(u,"class","text-screen-title text-with-gradient"),me(o,"class","text-body excerpt"),me(n,"class","button-box"),me(e,"class","message-box"),me(f,"class","p5-box"),zt(f,"is-hidden",b[1]),fn(c,"data",b[2].summary),me(l,"class","summary-box"),me(r,"class","content-box"),me(t,"class","page")},m(m,g){lt(m,t,g),Ae(t,r),Ae(r,e),Ae(e,u),Ae(e,d),Ae(e,o),Ae(e,i),Ae(e,n),Ae(r,a),Ae(r,f),Xt(p,f,null),b[4](f),Ae(r,s),Ae(r,l),Ae(l,c),h=!0},p(m,[g]){const y={};g&1&&(y.container=m[0]),p.$set(y),(!h||g&2)&&zt(f,"is-hidden",m[1])},i(m){h||(xt(p.$$.fragment,m),h=!0)},o(m){Mt(p.$$.fragment,m),h=!1},d(m){m&&dt(t),Ht(p),b[4](null)}}}function Np(b,t,r){let{variant:e}=t,u;const d=Pp;let o=!0;si(()=>{setTimeout(()=>{r(1,o=!1)},250)});function i(n){$i[n?"unshift":"push"](()=>{u=n,r(0,u)})}return b.$$set=n=>{"variant"in n&&r(3,e=n.variant)},[u,o,d,e,i]}class Up extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";:root{--margin-bottom:calc(24px * 1);--offset-margin:58px}.is-hidden{opacity:0;visibility:hidden}.page{min-height:100vh;background-color:var(--color-light-surface);padding-inline:calc(8px * 1);padding-top:calc(40px * 1);padding-bottom:calc(80px * 1)}.content-box{display:grid;gap:calc(16px * 1);grid-template-areas:"🚀"
			"📚"
			"✨"}.p5-box{position:relative;grid-area:🚀;pointer-events:none;display:flex;justify-content:center;align-items:center;height:400px;overflow:hidden;mix-blend-mode:multiply;margin-left:calc(0px * 1)}.message-box{grid-area:📚}.excerpt{color:var(--color-light-on-surface);text-align:justify;hyphens:auto}.button-box{margin-top:calc(32px * 1);margin-bottom:calc(40px * 1 * 1)}.summary-box{grid-area:✨}@media(min-width: 901px){.page{display:flex;justify-content:center;align-items:center}.content-box{grid-template-areas:"🚀 🚀"
				"📚 ✨";grid-template-columns:60% 1fr}.summary-box{display:flex;justify-content:center;align-items:center}}@media(min-width: 1201px){.page{padding-top:0;padding-bottom:0}.content-box{grid-template-areas:"📚 🚀"
				"✨ ✨";grid-template-columns:500px auto}.p5-box{height:600px}.message-box{display:flex;flex-direction:column;justify-content:flex-end}.excerpt{text-align:left}.summary-box{display:block}}@media(min-width: 1401px){.content-box{grid-template-columns:calc(500px - 100px * 1) auto}.message-box{margin-right:calc(-100px * 1)}.p5-box{margin-left:32px}h1{margin-left:calc(-58px * 1)}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},Np,Op,Ot,{variant:3},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["variant"]}get variant(){return this.$$.ctx[3]}set variant(t){this.$$set({variant:t}),fr()}}customElements.define("p5-screen",Up);function Fp(b,t,r){let{container:e}=t,u=0,d=0,o=0,i=300,n=a=>{a.setup=()=>{a.describe("ошибка 404");let p=a.createCanvas(a.windowWidth,a.windowHeight);p.parent(e),p.style("visibility","visible"),p.position(0,0)},a.draw=()=>{a.translate(a.width/2,a.height/2),f(a.cos(o/8),a.sin(o/8)),o=o+.004};function f(p,s){if(a.push(),a.translate(p,s),a.noFill(),i>150){let l=2;a.beginShape();for(let c=0;c<a.TWO_PI;c+=a.radians(5)){let h=a.map(a.cos(c+u),-1,1,0,l),m=a.map(a.sin(c+u),-1,1,0,l),g=a.map(a.noise(h,m,d),0,1,i/1.6,i),y=a.map(g,0,200,200,0);a.stroke(200,y),a.curveVertex(2*g*a.cos(c),2*g*a.sin(c))}a.endShape(a.CLOSE),u=u+.1,d=d+.2,i=i-1.5}a.pop()}};return b.$$set=a=>{"container"in a&&r(0,e=a.container)},b.$$.update=()=>{b.$$.dirty&1&&e&&new fl(n)},[e]}class Bp extends Rr{constructor(t){super(),Ut(this,t,Fp,null,Ot,{container:0})}}function Dc(b){let t,r,e,u,d,o,i;return r=new Bp({props:{container:b[1]}}),{c(){t=tt("div"),Kt(r.$$.fragment),u=_t(),d=tt("div"),d.innerHTML=`<h1>404</h1> 
		<p class="text-body">К сожалению, такой страницы нет. Пожалуйста, посмотрите товары в нашем
			магазине, или вернитесь на главную.</p>`,me(t,"class","p5-container"),me(d,"class","message-container")},m(n,a){lt(n,t,a),Xt(r,t,null),b[2](t),lt(n,u,a),lt(n,d,a),i=!0},p(n,a){const f={};a&2&&(f.container=n[1]),r.$set(f)},i(n){i||(xt(r.$$.fragment,n),e||_r(()=>{e=gc(t,Gr,{delay:0,duration:500}),e.start()}),o||_r(()=>{o=gc(d,Gr,{delay:500,duration:500}),o.start()}),i=!0)},o(n){Mt(r.$$.fragment,n),i=!1},d(n){n&&dt(t),Ht(r),b[2](null),n&&dt(u),n&&dt(d)}}}function zp(b){let t,r,e=b[0]&&Dc(b);return{c(){e&&e.c(),t=zn(),this.c=ut},m(u,d){e&&e.m(u,d),lt(u,t,d),r=!0},p(u,[d]){u[0]?e?(e.p(u,d),d&1&&xt(e,1)):(e=Dc(u),e.c(),xt(e,1),e.m(t.parentNode,t)):e&&(Fn(),Mt(e,1,1,()=>{e=null}),Bn())},i(u){r||(xt(e),r=!0)},o(u){Mt(e),r=!1},d(u){e&&e.d(u),u&&dt(t)}}}function Gp(b,t,r){let e=!1,u;si(()=>{r(0,e=!0)});function d(o){$i[o?"unshift":"push"](()=>{u=o,r(1,u)})}return[e,u,d]}class Vp extends xr{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import "https://v0ffk4.github.io/tios-static/global.css";.p5-container{width:100%;height:100%;position:fixed;top:0;left:0;background-color:hsla(0 0% 15% / 1);display:flex;justify-content:center;align-items:center;overflow:hidden}.message-container{position:fixed;width:450px;top:60%;left:50%;transform:translate(-50%, -50%)}h1{font-family:primaryText;font-weight:bold;font-style:normal;display:inline-block;font-size:80px;line-height:70px;margin-bottom:calc(24px * 1);color:var(--color-light-on-primary)}p{color:var(--color-light-on-primary)}@media(min-width: 901px){.message-container{top:calc(50% + 40px);left:50%;transform:translate(0, 0)}}</style>',Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},Gp,zp,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("error404-screen",Vp);function kc(b,{delay:t=0,duration:r=200,easing:e=d=>d,baseScale:u=0}){const d=+getComputedStyle(b).opacity,o=getComputedStyle(b).transform.match(/scale\(([0-9.]+)\)/),i=o?o[1]:1,n=1-u;return{delay:t,duration:r,css:a=>{const f=e(a);return`opacity: ${f*d}; transform: scale(${f*+i*n+u})`}}}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pl="148",Rn={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Jn={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Hp=0,Ic=1,Wp=2,ml=1,qp=2,Ps=3,ei=0,nn=1,Vo=2,oo=3,$n=0,Zi=1,Oc=2,Nc=3,Uc=4,Xp=5,qi=100,Yp=101,Zp=102,Fc=103,Bc=104,Kp=200,Jp=201,Qp=202,$p=203,Zd=204,Kd=205,em=206,tm=207,rm=208,nm=209,im=210,sm=0,om=1,am=2,Wa=3,lm=4,cm=5,um=6,dm=7,Jd=0,hm=1,fm=2,_n=0,Qd=1,pm=2,mm=3,gm=4,ym=5,$d=300,ts=301,rs=302,Bo=303,qa=304,Ho=306,ns=1e3,Yr=1001,zo=1002,Lr=1003,Xa=1004,ko=1005,Mr=1006,eh=1007,ti=1008,vi=1009,vm=1010,bm=1011,th=1012,_m=1013,hi=1014,un=1015,In=1016,xm=1017,wm=1018,Ki=1020,Sm=1021,Mm=1022,tn=1023,Tm=1024,Em=1025,mi=1026,is=1027,jm=1028,Cm=1029,Am=1030,Lm=1031,Rm=1033,ta=33776,ra=33777,na=33778,ia=33779,zc=35840,Gc=35841,Vc=35842,Hc=35843,Pm=36196,Wc=37492,qc=37496,Xc=37808,Yc=37809,Zc=37810,Kc=37811,Jc=37812,Qc=37813,$c=37814,eu=37815,tu=37816,ru=37817,nu=37818,iu=37819,su=37820,ou=37821,au=36492,Fs=2300,ss=2301,sa=2302,lu=2400,cu=2401,uu=2402,Dm=2500,km=1,rh=2,ri=3e3,Vt=3001,Im=3200,Om=3201,gl=0,Nm=1,vn="srgb",Bs="srgb-linear",oa=7680,Um=519,Ya=35044,du="300 es",Za=1035;class wi{addEventListener(t,r){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[t]===void 0&&(e[t]=[]),e[t].indexOf(r)===-1&&e[t].push(r)}hasEventListener(t,r){if(this._listeners===void 0)return!1;const e=this._listeners;return e[t]!==void 0&&e[t].indexOf(r)!==-1}removeEventListener(t,r){if(this._listeners===void 0)return;const u=this._listeners[t];if(u!==void 0){const d=u.indexOf(r);d!==-1&&u.splice(d,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const e=this._listeners[t.type];if(e!==void 0){t.target=this;const u=e.slice(0);for(let d=0,o=u.length;d<o;d++)u[d].call(this,t);t.target=null}}}const Br=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hu=1234567;const Os=Math.PI/180,zs=180/Math.PI;function dn(){const b=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,e=Math.random()*4294967295|0;return(Br[b&255]+Br[b>>8&255]+Br[b>>16&255]+Br[b>>24&255]+"-"+Br[t&255]+Br[t>>8&255]+"-"+Br[t>>16&15|64]+Br[t>>24&255]+"-"+Br[r&63|128]+Br[r>>8&255]+"-"+Br[r>>16&255]+Br[r>>24&255]+Br[e&255]+Br[e>>8&255]+Br[e>>16&255]+Br[e>>24&255]).toLowerCase()}function kr(b,t,r){return Math.max(t,Math.min(r,b))}function yl(b,t){return(b%t+t)%t}function Fm(b,t,r,e,u){return e+(b-t)*(u-e)/(r-t)}function Bm(b,t,r){return b!==t?(r-b)/(t-b):0}function Ns(b,t,r){return(1-r)*b+r*t}function zm(b,t,r,e){return Ns(b,t,1-Math.exp(-r*e))}function Gm(b,t=1){return t-Math.abs(yl(b,t*2)-t)}function Vm(b,t,r){return b<=t?0:b>=r?1:(b=(b-t)/(r-t),b*b*(3-2*b))}function Hm(b,t,r){return b<=t?0:b>=r?1:(b=(b-t)/(r-t),b*b*b*(b*(b*6-15)+10))}function Wm(b,t){return b+Math.floor(Math.random()*(t-b+1))}function qm(b,t){return b+Math.random()*(t-b)}function Xm(b){return b*(.5-Math.random())}function Ym(b){b!==void 0&&(hu=b);let t=hu+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Zm(b){return b*Os}function Km(b){return b*zs}function Ka(b){return(b&b-1)===0&&b!==0}function nh(b){return Math.pow(2,Math.ceil(Math.log(b)/Math.LN2))}function Go(b){return Math.pow(2,Math.floor(Math.log(b)/Math.LN2))}function Jm(b,t,r,e,u){const d=Math.cos,o=Math.sin,i=d(r/2),n=o(r/2),a=d((t+e)/2),f=o((t+e)/2),p=d((t-e)/2),s=o((t-e)/2),l=d((e-t)/2),c=o((e-t)/2);switch(u){case"XYX":b.set(i*f,n*p,n*s,i*a);break;case"YZY":b.set(n*s,i*f,n*p,i*a);break;case"ZXZ":b.set(n*p,n*s,i*f,i*a);break;case"XZX":b.set(i*f,n*c,n*l,i*a);break;case"YXY":b.set(n*l,i*f,n*c,i*a);break;case"ZYZ":b.set(n*c,n*l,i*f,i*a);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+u)}}function On(b,t){switch(t.constructor){case Float32Array:return b;case Uint16Array:return b/65535;case Uint8Array:return b/255;case Int16Array:return Math.max(b/32767,-1);case Int8Array:return Math.max(b/127,-1);default:throw new Error("Invalid component type.")}}function er(b,t){switch(t.constructor){case Float32Array:return b;case Uint16Array:return Math.round(b*65535);case Uint8Array:return Math.round(b*255);case Int16Array:return Math.round(b*32767);case Int8Array:return Math.round(b*127);default:throw new Error("Invalid component type.")}}var Qm=Object.freeze({__proto__:null,DEG2RAD:Os,RAD2DEG:zs,generateUUID:dn,clamp:kr,euclideanModulo:yl,mapLinear:Fm,inverseLerp:Bm,lerp:Ns,damp:zm,pingpong:Gm,smoothstep:Vm,smootherstep:Hm,randInt:Wm,randFloat:qm,randFloatSpread:Xm,seededRandom:Ym,degToRad:Zm,radToDeg:Km,isPowerOfTwo:Ka,ceilPowerOfTwo:nh,floorPowerOfTwo:Go,setQuaternionFromProperEuler:Jm,normalize:er,denormalize:On});class Ct{constructor(t=0,r=0){Ct.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,e=this.y,u=t.elements;return this.x=u[0]*r+u[3]*e+u[6],this.y=u[1]*r+u[4]*e+u[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,e=this.y-t.y;return r*r+e*e}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const e=Math.cos(r),u=Math.sin(r),d=this.x-t.x,o=this.y-t.y;return this.x=d*e-o*u+t.x,this.y=d*u+o*e+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jr{constructor(){Jr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,r,e,u,d,o,i,n,a){const f=this.elements;return f[0]=t,f[1]=u,f[2]=i,f[3]=r,f[4]=d,f[5]=n,f[6]=e,f[7]=o,f[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,e=t.elements;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],this}extractBasis(t,r,e){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),e.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const e=t.elements,u=r.elements,d=this.elements,o=e[0],i=e[3],n=e[6],a=e[1],f=e[4],p=e[7],s=e[2],l=e[5],c=e[8],h=u[0],m=u[3],g=u[6],y=u[1],_=u[4],x=u[7],w=u[2],j=u[5],E=u[8];return d[0]=o*h+i*y+n*w,d[3]=o*m+i*_+n*j,d[6]=o*g+i*x+n*E,d[1]=a*h+f*y+p*w,d[4]=a*m+f*_+p*j,d[7]=a*g+f*x+p*E,d[2]=s*h+l*y+c*w,d[5]=s*m+l*_+c*j,d[8]=s*g+l*x+c*E,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],e=t[1],u=t[2],d=t[3],o=t[4],i=t[5],n=t[6],a=t[7],f=t[8];return r*o*f-r*i*a-e*d*f+e*i*n+u*d*a-u*o*n}invert(){const t=this.elements,r=t[0],e=t[1],u=t[2],d=t[3],o=t[4],i=t[5],n=t[6],a=t[7],f=t[8],p=f*o-i*a,s=i*n-f*d,l=a*d-o*n,c=r*p+e*s+u*l;if(c===0)return this.set(0,0,0,0,0,0,0,0,0);const h=1/c;return t[0]=p*h,t[1]=(u*a-f*e)*h,t[2]=(i*e-u*o)*h,t[3]=s*h,t[4]=(f*r-u*n)*h,t[5]=(u*d-i*r)*h,t[6]=l*h,t[7]=(e*n-a*r)*h,t[8]=(o*r-e*d)*h,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,e,u,d,o,i){const n=Math.cos(d),a=Math.sin(d);return this.set(e*n,e*a,-e*(n*o+a*i)+o+t,-u*a,u*n,-u*(-a*o+n*i)+i+r,0,0,1),this}scale(t,r){return this.premultiply(aa.makeScale(t,r)),this}rotate(t){return this.premultiply(aa.makeRotation(-t)),this}translate(t,r){return this.premultiply(aa.makeTranslation(t,r)),this}makeTranslation(t,r){return this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){const r=Math.cos(t),e=Math.sin(t);return this.set(r,-e,0,e,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){const r=this.elements,e=t.elements;for(let u=0;u<9;u++)if(r[u]!==e[u])return!1;return!0}fromArray(t,r=0){for(let e=0;e<9;e++)this.elements[e]=t[e+r];return this}toArray(t=[],r=0){const e=this.elements;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const aa=new Jr;function ih(b){for(let t=b.length-1;t>=0;--t)if(b[t]>=65535)return!0;return!1}function Gs(b){return document.createElementNS("http://www.w3.org/1999/xhtml",b)}function gi(b){return b<.04045?b*.0773993808:Math.pow(b*.9478672986+.0521327014,2.4)}function Io(b){return b<.0031308?b*12.92:1.055*Math.pow(b,.41666)-.055}const la={[vn]:{[Bs]:gi},[Bs]:{[vn]:Io}},Vr={legacyMode:!0,get workingColorSpace(){return Bs},set workingColorSpace(b){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(b,t,r){if(this.legacyMode||t===r||!t||!r)return b;if(la[t]&&la[t][r]!==void 0){const e=la[t][r];return b.r=e(b.r),b.g=e(b.g),b.b=e(b.b),b}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(b,t){return this.convert(b,this.workingColorSpace,t)},toWorkingColorSpace:function(b,t){return this.convert(b,t,this.workingColorSpace)}},sh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sr={r:0,g:0,b:0},an={h:0,s:0,l:0},ao={h:0,s:0,l:0};function ca(b,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?b+(t-b)*6*r:r<1/2?t:r<2/3?b+(t-b)*6*(2/3-r):b}function lo(b,t){return t.r=b.r,t.g=b.g,t.b=b.b,t}class It{constructor(t,r,e){return this.isColor=!0,this.r=1,this.g=1,this.b=1,r===void 0&&e===void 0?this.set(t):this.setRGB(t,r,e)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=vn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Vr.toWorkingColorSpace(this,r),this}setRGB(t,r,e,u=Vr.workingColorSpace){return this.r=t,this.g=r,this.b=e,Vr.toWorkingColorSpace(this,u),this}setHSL(t,r,e,u=Vr.workingColorSpace){if(t=yl(t,1),r=kr(r,0,1),e=kr(e,0,1),r===0)this.r=this.g=this.b=e;else{const d=e<=.5?e*(1+r):e+r-e*r,o=2*e-d;this.r=ca(o,d,t+1/3),this.g=ca(o,d,t),this.b=ca(o,d,t-1/3)}return Vr.toWorkingColorSpace(this,u),this}setStyle(t,r=vn){function e(d){d!==void 0&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let u;if(u=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let d;const o=u[1],i=u[2];switch(o){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,Vr.toWorkingColorSpace(this,r),e(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,Vr.toWorkingColorSpace(this,r),e(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(d[1])/360,a=parseFloat(d[2])/100,f=parseFloat(d[3])/100;return e(d[4]),this.setHSL(n,a,f,r)}break}}else if(u=/^\#([A-Fa-f\d]+)$/.exec(t)){const d=u[1],o=d.length;if(o===3)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,Vr.toWorkingColorSpace(this,r),this;if(o===6)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,Vr.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=vn){const e=sh[t.toLowerCase()];return e!==void 0?this.setHex(e,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=gi(t.r),this.g=gi(t.g),this.b=gi(t.b),this}copyLinearToSRGB(t){return this.r=Io(t.r),this.g=Io(t.g),this.b=Io(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=vn){return Vr.fromWorkingColorSpace(lo(this,Sr),t),kr(Sr.r*255,0,255)<<16^kr(Sr.g*255,0,255)<<8^kr(Sr.b*255,0,255)<<0}getHexString(t=vn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Vr.workingColorSpace){Vr.fromWorkingColorSpace(lo(this,Sr),r);const e=Sr.r,u=Sr.g,d=Sr.b,o=Math.max(e,u,d),i=Math.min(e,u,d);let n,a;const f=(i+o)/2;if(i===o)n=0,a=0;else{const p=o-i;switch(a=f<=.5?p/(o+i):p/(2-o-i),o){case e:n=(u-d)/p+(u<d?6:0);break;case u:n=(d-e)/p+2;break;case d:n=(e-u)/p+4;break}n/=6}return t.h=n,t.s=a,t.l=f,t}getRGB(t,r=Vr.workingColorSpace){return Vr.fromWorkingColorSpace(lo(this,Sr),r),t.r=Sr.r,t.g=Sr.g,t.b=Sr.b,t}getStyle(t=vn){return Vr.fromWorkingColorSpace(lo(this,Sr),t),t!==vn?`color(${t} ${Sr.r} ${Sr.g} ${Sr.b})`:`rgb(${Sr.r*255|0},${Sr.g*255|0},${Sr.b*255|0})`}offsetHSL(t,r,e){return this.getHSL(an),an.h+=t,an.s+=r,an.l+=e,this.setHSL(an.h,an.s,an.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,e){return this.r=t.r+(r.r-t.r)*e,this.g=t.g+(r.g-t.g)*e,this.b=t.b+(r.b-t.b)*e,this}lerpHSL(t,r){this.getHSL(an),t.getHSL(ao);const e=Ns(an.h,ao.h,r),u=Ns(an.s,ao.s,r),d=Ns(an.l,ao.l,r);return this.setHSL(e,u,d),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}It.NAMES=sh;let Ri;class oh{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{Ri===void 0&&(Ri=Gs("canvas")),Ri.width=t.width,Ri.height=t.height;const e=Ri.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),r=Ri}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const r=Gs("canvas");r.width=t.width,r.height=t.height;const e=r.getContext("2d");e.drawImage(t,0,0,t.width,t.height);const u=e.getImageData(0,0,t.width,t.height),d=u.data;for(let o=0;o<d.length;o++)d[o]=gi(d[o]/255)*255;return e.putImageData(u,0,0),r}else if(t.data){const r=t.data.slice(0);for(let e=0;e<r.length;e++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[e]=Math.floor(gi(r[e]/255)*255):r[e]=gi(r[e]);return{data:r,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class ah{constructor(t=null){this.isSource=!0,this.uuid=dn(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const e={uuid:this.uuid,url:""},u=this.data;if(u!==null){let d;if(Array.isArray(u)){d=[];for(let o=0,i=u.length;o<i;o++)u[o].isDataTexture?d.push(ua(u[o].image)):d.push(ua(u[o]))}else d=ua(u);e.url=d}return r||(t.images[this.uuid]=e),e}}function ua(b){return typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&b instanceof ImageBitmap?oh.getDataURL(b):b.data?{data:Array.from(b.data),width:b.width,height:b.height,type:b.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $m=0;class Ir extends wi{constructor(t=Ir.DEFAULT_IMAGE,r=Ir.DEFAULT_MAPPING,e=Yr,u=Yr,d=Mr,o=ti,i=tn,n=vi,a=Ir.DEFAULT_ANISOTROPY,f=ri){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$m++}),this.uuid=dn(),this.name="",this.source=new ah(t),this.mipmaps=[],this.mapping=r,this.wrapS=e,this.wrapT=u,this.magFilter=d,this.minFilter=o,this.anisotropy=a,this.format=i,this.internalFormat=null,this.type=n,this.offset=new Ct(0,0),this.repeat=new Ct(1,1),this.center=new Ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(e.userData=this.userData),r||(t.textures[this.uuid]=e),e}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==$d)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ns:t.x=t.x-Math.floor(t.x);break;case Yr:t.x=t.x<0?0:1;break;case zo:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ns:t.y=t.y-Math.floor(t.y);break;case Yr:t.y=t.y<0?0:1;break;case zo:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}Ir.DEFAULT_IMAGE=null;Ir.DEFAULT_MAPPING=$d;Ir.DEFAULT_ANISOTROPY=1;class tr{constructor(t=0,r=0,e=0,u=1){tr.prototype.isVector4=!0,this.x=t,this.y=r,this.z=e,this.w=u}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,e,u){return this.x=t,this.y=r,this.z=e,this.w=u,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,e=this.y,u=this.z,d=this.w,o=t.elements;return this.x=o[0]*r+o[4]*e+o[8]*u+o[12]*d,this.y=o[1]*r+o[5]*e+o[9]*u+o[13]*d,this.z=o[2]*r+o[6]*e+o[10]*u+o[14]*d,this.w=o[3]*r+o[7]*e+o[11]*u+o[15]*d,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,e,u,d;const n=t.elements,a=n[0],f=n[4],p=n[8],s=n[1],l=n[5],c=n[9],h=n[2],m=n[6],g=n[10];if(Math.abs(f-s)<.01&&Math.abs(p-h)<.01&&Math.abs(c-m)<.01){if(Math.abs(f+s)<.1&&Math.abs(p+h)<.1&&Math.abs(c+m)<.1&&Math.abs(a+l+g-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const _=(a+1)/2,x=(l+1)/2,w=(g+1)/2,j=(f+s)/4,E=(p+h)/4,T=(c+m)/4;return _>x&&_>w?_<.01?(e=0,u=.707106781,d=.707106781):(e=Math.sqrt(_),u=j/e,d=E/e):x>w?x<.01?(e=.707106781,u=0,d=.707106781):(u=Math.sqrt(x),e=j/u,d=T/u):w<.01?(e=.707106781,u=.707106781,d=0):(d=Math.sqrt(w),e=E/d,u=T/d),this.set(e,u,d,r),this}let y=Math.sqrt((m-c)*(m-c)+(p-h)*(p-h)+(s-f)*(s-f));return Math.abs(y)<.001&&(y=1),this.x=(m-c)/y,this.y=(p-h)/y,this.z=(s-f)/y,this.w=Math.acos((a+l+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this}clampLength(t,r){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this.z=t.z+(r.z-t.z)*e,this.w=t.w+(r.w-t.w)*e,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bi extends wi{constructor(t=1,r=1,e={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=r,this.depth=1,this.scissor=new tr(0,0,t,r),this.scissorTest=!1,this.viewport=new tr(0,0,t,r);const u={width:t,height:r,depth:1};this.texture=new Ir(u,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.internalFormat=e.internalFormat!==void 0?e.internalFormat:null,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Mr,this.depthBuffer=e.depthBuffer!==void 0?e.depthBuffer:!0,this.stencilBuffer=e.stencilBuffer!==void 0?e.stencilBuffer:!1,this.depthTexture=e.depthTexture!==void 0?e.depthTexture:null,this.samples=e.samples!==void 0?e.samples:0}setSize(t,r,e=1){(this.width!==t||this.height!==r||this.depth!==e)&&(this.width=t,this.height=r,this.depth=e,this.texture.image.width=t,this.texture.image.height=r,this.texture.image.depth=e,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const r=Object.assign({},t.texture.image);return this.texture.source=new ah(r),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lh extends Ir{constructor(t=null,r=1,e=1,u=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:r,height:e,depth:u},this.magFilter=Lr,this.minFilter=Lr,this.wrapR=Yr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eg extends Ir{constructor(t=null,r=1,e=1,u=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:e,depth:u},this.magFilter=Lr,this.minFilter=Lr,this.wrapR=Yr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xn{constructor(t=0,r=0,e=0,u=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=e,this._w=u}static slerpFlat(t,r,e,u,d,o,i){let n=e[u+0],a=e[u+1],f=e[u+2],p=e[u+3];const s=d[o+0],l=d[o+1],c=d[o+2],h=d[o+3];if(i===0){t[r+0]=n,t[r+1]=a,t[r+2]=f,t[r+3]=p;return}if(i===1){t[r+0]=s,t[r+1]=l,t[r+2]=c,t[r+3]=h;return}if(p!==h||n!==s||a!==l||f!==c){let m=1-i;const g=n*s+a*l+f*c+p*h,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const w=Math.sqrt(_),j=Math.atan2(w,g*y);m=Math.sin(m*j)/w,i=Math.sin(i*j)/w}const x=i*y;if(n=n*m+s*x,a=a*m+l*x,f=f*m+c*x,p=p*m+h*x,m===1-i){const w=1/Math.sqrt(n*n+a*a+f*f+p*p);n*=w,a*=w,f*=w,p*=w}}t[r]=n,t[r+1]=a,t[r+2]=f,t[r+3]=p}static multiplyQuaternionsFlat(t,r,e,u,d,o){const i=e[u],n=e[u+1],a=e[u+2],f=e[u+3],p=d[o],s=d[o+1],l=d[o+2],c=d[o+3];return t[r]=i*c+f*p+n*l-a*s,t[r+1]=n*c+f*s+a*p-i*l,t[r+2]=a*c+f*l+i*s-n*p,t[r+3]=f*c-i*p-n*s-a*l,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,e,u){return this._x=t,this._y=r,this._z=e,this._w=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r){const e=t._x,u=t._y,d=t._z,o=t._order,i=Math.cos,n=Math.sin,a=i(e/2),f=i(u/2),p=i(d/2),s=n(e/2),l=n(u/2),c=n(d/2);switch(o){case"XYZ":this._x=s*f*p+a*l*c,this._y=a*l*p-s*f*c,this._z=a*f*c+s*l*p,this._w=a*f*p-s*l*c;break;case"YXZ":this._x=s*f*p+a*l*c,this._y=a*l*p-s*f*c,this._z=a*f*c-s*l*p,this._w=a*f*p+s*l*c;break;case"ZXY":this._x=s*f*p-a*l*c,this._y=a*l*p+s*f*c,this._z=a*f*c+s*l*p,this._w=a*f*p-s*l*c;break;case"ZYX":this._x=s*f*p-a*l*c,this._y=a*l*p+s*f*c,this._z=a*f*c-s*l*p,this._w=a*f*p+s*l*c;break;case"YZX":this._x=s*f*p+a*l*c,this._y=a*l*p+s*f*c,this._z=a*f*c-s*l*p,this._w=a*f*p-s*l*c;break;case"XZY":this._x=s*f*p-a*l*c,this._y=a*l*p-s*f*c,this._z=a*f*c+s*l*p,this._w=a*f*p+s*l*c;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return r!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const e=r/2,u=Math.sin(e);return this._x=t.x*u,this._y=t.y*u,this._z=t.z*u,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,e=r[0],u=r[4],d=r[8],o=r[1],i=r[5],n=r[9],a=r[2],f=r[6],p=r[10],s=e+i+p;if(s>0){const l=.5/Math.sqrt(s+1);this._w=.25/l,this._x=(f-n)*l,this._y=(d-a)*l,this._z=(o-u)*l}else if(e>i&&e>p){const l=2*Math.sqrt(1+e-i-p);this._w=(f-n)/l,this._x=.25*l,this._y=(u+o)/l,this._z=(d+a)/l}else if(i>p){const l=2*Math.sqrt(1+i-e-p);this._w=(d-a)/l,this._x=(u+o)/l,this._y=.25*l,this._z=(n+f)/l}else{const l=2*Math.sqrt(1+p-e-i);this._w=(o-u)/l,this._x=(d+a)/l,this._y=(n+f)/l,this._z=.25*l}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let e=t.dot(r)+1;return e<Number.EPSILON?(e=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=e):(this._x=0,this._y=-t.z,this._z=t.y,this._w=e)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=e),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(kr(this.dot(t),-1,1)))}rotateTowards(t,r){const e=this.angleTo(t);if(e===0)return this;const u=Math.min(1,r/e);return this.slerp(t,u),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const e=t._x,u=t._y,d=t._z,o=t._w,i=r._x,n=r._y,a=r._z,f=r._w;return this._x=e*f+o*i+u*a-d*n,this._y=u*f+o*n+d*i-e*a,this._z=d*f+o*a+e*n-u*i,this._w=o*f-e*i-u*n-d*a,this._onChangeCallback(),this}slerp(t,r){if(r===0)return this;if(r===1)return this.copy(t);const e=this._x,u=this._y,d=this._z,o=this._w;let i=o*t._w+e*t._x+u*t._y+d*t._z;if(i<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,i=-i):this.copy(t),i>=1)return this._w=o,this._x=e,this._y=u,this._z=d,this;const n=1-i*i;if(n<=Number.EPSILON){const l=1-r;return this._w=l*o+r*this._w,this._x=l*e+r*this._x,this._y=l*u+r*this._y,this._z=l*d+r*this._z,this.normalize(),this._onChangeCallback(),this}const a=Math.sqrt(n),f=Math.atan2(a,i),p=Math.sin((1-r)*f)/a,s=Math.sin(r*f)/a;return this._w=o*p+this._w*s,this._x=e*p+this._x*s,this._y=u*p+this._y*s,this._z=d*p+this._z*s,this._onChangeCallback(),this}slerpQuaternions(t,r,e){return this.copy(t).slerp(r,e)}random(){const t=Math.random(),r=Math.sqrt(1-t),e=Math.sqrt(t),u=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(r*Math.cos(u),e*Math.sin(d),e*Math.cos(d),r*Math.sin(u))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class De{constructor(t=0,r=0,e=0){De.prototype.isVector3=!0,this.x=t,this.y=r,this.z=e}set(t,r,e){return e===void 0&&(e=this.z),this.x=t,this.y=r,this.z=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(fu.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(fu.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,e=this.y,u=this.z,d=t.elements;return this.x=d[0]*r+d[3]*e+d[6]*u,this.y=d[1]*r+d[4]*e+d[7]*u,this.z=d[2]*r+d[5]*e+d[8]*u,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,e=this.y,u=this.z,d=t.elements,o=1/(d[3]*r+d[7]*e+d[11]*u+d[15]);return this.x=(d[0]*r+d[4]*e+d[8]*u+d[12])*o,this.y=(d[1]*r+d[5]*e+d[9]*u+d[13])*o,this.z=(d[2]*r+d[6]*e+d[10]*u+d[14])*o,this}applyQuaternion(t){const r=this.x,e=this.y,u=this.z,d=t.x,o=t.y,i=t.z,n=t.w,a=n*r+o*u-i*e,f=n*e+i*r-d*u,p=n*u+d*e-o*r,s=-d*r-o*e-i*u;return this.x=a*n+s*-d+f*-i-p*-o,this.y=f*n+s*-o+p*-d-a*-i,this.z=p*n+s*-i+a*-o-f*-d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,e=this.y,u=this.z,d=t.elements;return this.x=d[0]*r+d[4]*e+d[8]*u,this.y=d[1]*r+d[5]*e+d[9]*u,this.z=d[2]*r+d[6]*e+d[10]*u,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){const e=this.length();return this.divideScalar(e||1).multiplyScalar(Math.max(t,Math.min(r,e)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,e){return this.x=t.x+(r.x-t.x)*e,this.y=t.y+(r.y-t.y)*e,this.z=t.z+(r.z-t.z)*e,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){const e=t.x,u=t.y,d=t.z,o=r.x,i=r.y,n=r.z;return this.x=u*n-d*i,this.y=d*o-e*n,this.z=e*i-u*o,this}projectOnVector(t){const r=t.lengthSq();if(r===0)return this.set(0,0,0);const e=t.dot(this)/r;return this.copy(t).multiplyScalar(e)}projectOnPlane(t){return da.copy(this).projectOnVector(t),this.sub(da)}reflect(t){return this.sub(da.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;const e=this.dot(t)/r;return Math.acos(kr(e,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,e=this.y-t.y,u=this.z-t.z;return r*r+e*e+u*u}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,e){const u=Math.sin(r)*t;return this.x=u*Math.sin(e),this.y=Math.cos(r)*t,this.z=u*Math.cos(e),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,e){return this.x=t*Math.sin(r),this.y=e,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),e=this.setFromMatrixColumn(t,1).length(),u=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=e,this.z=u,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,r=Math.random()*Math.PI*2,e=Math.sqrt(1-t**2);return this.x=e*Math.cos(r),this.y=e*Math.sin(r),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const da=new De,fu=new xn;class ls{constructor(t=new De(1/0,1/0,1/0),r=new De(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){let r=1/0,e=1/0,u=1/0,d=-1/0,o=-1/0,i=-1/0;for(let n=0,a=t.length;n<a;n+=3){const f=t[n],p=t[n+1],s=t[n+2];f<r&&(r=f),p<e&&(e=p),s<u&&(u=s),f>d&&(d=f),p>o&&(o=p),s>i&&(i=s)}return this.min.set(r,e,u),this.max.set(d,o,i),this}setFromBufferAttribute(t){let r=1/0,e=1/0,u=1/0,d=-1/0,o=-1/0,i=-1/0;for(let n=0,a=t.count;n<a;n++){const f=t.getX(n),p=t.getY(n),s=t.getZ(n);f<r&&(r=f),p<e&&(e=p),s<u&&(u=s),f>d&&(d=f),p>o&&(o=p),s>i&&(i=s)}return this.min.set(r,e,u),this.max.set(d,o,i),this}setFromPoints(t){this.makeEmpty();for(let r=0,e=t.length;r<e;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const e=oi.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);const e=t.geometry;if(e!==void 0)if(r&&e.attributes!=null&&e.attributes.position!==void 0){const d=e.attributes.position;for(let o=0,i=d.count;o<i;o++)oi.fromBufferAttribute(d,o).applyMatrix4(t.matrixWorld),this.expandByPoint(oi)}else e.boundingBox===null&&e.computeBoundingBox(),ha.copy(e.boundingBox),ha.applyMatrix4(t.matrixWorld),this.union(ha);const u=t.children;for(let d=0,o=u.length;d<o;d++)this.expandByObject(u[d],r);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,oi),oi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,e;return t.normal.x>0?(r=t.normal.x*this.min.x,e=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,e=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,e+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,e+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,e+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,e+=t.normal.z*this.min.z),r<=-t.constant&&e>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(_s),co.subVectors(this.max,_s),Pi.subVectors(t.a,_s),Di.subVectors(t.b,_s),ki.subVectors(t.c,_s),Wn.subVectors(Di,Pi),qn.subVectors(ki,Di),ai.subVectors(Pi,ki);let r=[0,-Wn.z,Wn.y,0,-qn.z,qn.y,0,-ai.z,ai.y,Wn.z,0,-Wn.x,qn.z,0,-qn.x,ai.z,0,-ai.x,-Wn.y,Wn.x,0,-qn.y,qn.x,0,-ai.y,ai.x,0];return!fa(r,Pi,Di,ki,co)||(r=[1,0,0,0,1,0,0,0,1],!fa(r,Pi,Di,ki,co))?!1:(uo.crossVectors(Wn,qn),r=[uo.x,uo.y,uo.z],fa(r,Pi,Di,ki,co))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return oi.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(oi).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Tn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Tn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Tn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Tn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Tn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Tn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Tn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Tn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Tn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Tn=[new De,new De,new De,new De,new De,new De,new De,new De],oi=new De,ha=new ls,Pi=new De,Di=new De,ki=new De,Wn=new De,qn=new De,ai=new De,_s=new De,co=new De,uo=new De,li=new De;function fa(b,t,r,e,u){for(let d=0,o=b.length-3;d<=o;d+=3){li.fromArray(b,d);const i=u.x*Math.abs(li.x)+u.y*Math.abs(li.y)+u.z*Math.abs(li.z),n=t.dot(li),a=r.dot(li),f=e.dot(li);if(Math.max(-Math.max(n,a,f),Math.min(n,a,f))>i)return!1}return!0}const tg=new ls,xs=new De,pa=new De;class cs{constructor(t=new De,r=-1){this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const e=this.center;r!==void 0?e.copy(r):tg.setFromPoints(t).getCenter(e);let u=0;for(let d=0,o=t.length;d<o;d++)u=Math.max(u,e.distanceToSquared(t[d]));return this.radius=Math.sqrt(u),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const e=this.center.distanceToSquared(t);return r.copy(t),e>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;xs.subVectors(t,this.center);const r=xs.lengthSq();if(r>this.radius*this.radius){const e=Math.sqrt(r),u=(e-this.radius)*.5;this.center.addScaledVector(xs,u/e),this.radius+=u}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(pa.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(xs.copy(t.center).add(pa)),this.expandByPoint(xs.copy(t.center).sub(pa))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const En=new De,ma=new De,ho=new De,Xn=new De,ga=new De,fo=new De,ya=new De;class vl{constructor(t=new De,r=new De(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,En)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const e=r.dot(this.direction);return e<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(e).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=En.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(En.copy(this.direction).multiplyScalar(r).add(this.origin),En.distanceToSquared(t))}distanceSqToSegment(t,r,e,u){ma.copy(t).add(r).multiplyScalar(.5),ho.copy(r).sub(t).normalize(),Xn.copy(this.origin).sub(ma);const d=t.distanceTo(r)*.5,o=-this.direction.dot(ho),i=Xn.dot(this.direction),n=-Xn.dot(ho),a=Xn.lengthSq(),f=Math.abs(1-o*o);let p,s,l,c;if(f>0)if(p=o*n-i,s=o*i-n,c=d*f,p>=0)if(s>=-c)if(s<=c){const h=1/f;p*=h,s*=h,l=p*(p+o*s+2*i)+s*(o*p+s+2*n)+a}else s=d,p=Math.max(0,-(o*s+i)),l=-p*p+s*(s+2*n)+a;else s=-d,p=Math.max(0,-(o*s+i)),l=-p*p+s*(s+2*n)+a;else s<=-c?(p=Math.max(0,-(-o*d+i)),s=p>0?-d:Math.min(Math.max(-d,-n),d),l=-p*p+s*(s+2*n)+a):s<=c?(p=0,s=Math.min(Math.max(-d,-n),d),l=s*(s+2*n)+a):(p=Math.max(0,-(o*d+i)),s=p>0?d:Math.min(Math.max(-d,-n),d),l=-p*p+s*(s+2*n)+a);else s=o>0?-d:d,p=Math.max(0,-(o*s+i)),l=-p*p+s*(s+2*n)+a;return e&&e.copy(this.direction).multiplyScalar(p).add(this.origin),u&&u.copy(ho).multiplyScalar(s).add(ma),l}intersectSphere(t,r){En.subVectors(t.center,this.origin);const e=En.dot(this.direction),u=En.dot(En)-e*e,d=t.radius*t.radius;if(u>d)return null;const o=Math.sqrt(d-u),i=e-o,n=e+o;return i<0&&n<0?null:i<0?this.at(n,r):this.at(i,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(r===0)return t.distanceToPoint(this.origin)===0?0:null;const e=-(this.origin.dot(t.normal)+t.constant)/r;return e>=0?e:null}intersectPlane(t,r){const e=this.distanceToPlane(t);return e===null?null:this.at(e,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);return r===0||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let e,u,d,o,i,n;const a=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,s=this.origin;return a>=0?(e=(t.min.x-s.x)*a,u=(t.max.x-s.x)*a):(e=(t.max.x-s.x)*a,u=(t.min.x-s.x)*a),f>=0?(d=(t.min.y-s.y)*f,o=(t.max.y-s.y)*f):(d=(t.max.y-s.y)*f,o=(t.min.y-s.y)*f),e>o||d>u||((d>e||isNaN(e))&&(e=d),(o<u||isNaN(u))&&(u=o),p>=0?(i=(t.min.z-s.z)*p,n=(t.max.z-s.z)*p):(i=(t.max.z-s.z)*p,n=(t.min.z-s.z)*p),e>n||i>u)||((i>e||e!==e)&&(e=i),(n<u||u!==u)&&(u=n),u<0)?null:this.at(e>=0?e:u,r)}intersectsBox(t){return this.intersectBox(t,En)!==null}intersectTriangle(t,r,e,u,d){ga.subVectors(r,t),fo.subVectors(e,t),ya.crossVectors(ga,fo);let o=this.direction.dot(ya),i;if(o>0){if(u)return null;i=1}else if(o<0)i=-1,o=-o;else return null;Xn.subVectors(this.origin,t);const n=i*this.direction.dot(fo.crossVectors(Xn,fo));if(n<0)return null;const a=i*this.direction.dot(ga.cross(Xn));if(a<0||n+a>o)return null;const f=-i*Xn.dot(ya);return f<0?null:this.at(f/o,d)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Nt{constructor(){Nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,r,e,u,d,o,i,n,a,f,p,s,l,c,h,m){const g=this.elements;return g[0]=t,g[4]=r,g[8]=e,g[12]=u,g[1]=d,g[5]=o,g[9]=i,g[13]=n,g[2]=a,g[6]=f,g[10]=p,g[14]=s,g[3]=l,g[7]=c,g[11]=h,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Nt().fromArray(this.elements)}copy(t){const r=this.elements,e=t.elements;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],this}copyPosition(t){const r=this.elements,e=t.elements;return r[12]=e[12],r[13]=e[13],r[14]=e[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,e){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),e.setFromMatrixColumn(this,2),this}makeBasis(t,r,e){return this.set(t.x,r.x,e.x,0,t.y,r.y,e.y,0,t.z,r.z,e.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,e=t.elements,u=1/Ii.setFromMatrixColumn(t,0).length(),d=1/Ii.setFromMatrixColumn(t,1).length(),o=1/Ii.setFromMatrixColumn(t,2).length();return r[0]=e[0]*u,r[1]=e[1]*u,r[2]=e[2]*u,r[3]=0,r[4]=e[4]*d,r[5]=e[5]*d,r[6]=e[6]*d,r[7]=0,r[8]=e[8]*o,r[9]=e[9]*o,r[10]=e[10]*o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){const r=this.elements,e=t.x,u=t.y,d=t.z,o=Math.cos(e),i=Math.sin(e),n=Math.cos(u),a=Math.sin(u),f=Math.cos(d),p=Math.sin(d);if(t.order==="XYZ"){const s=o*f,l=o*p,c=i*f,h=i*p;r[0]=n*f,r[4]=-n*p,r[8]=a,r[1]=l+c*a,r[5]=s-h*a,r[9]=-i*n,r[2]=h-s*a,r[6]=c+l*a,r[10]=o*n}else if(t.order==="YXZ"){const s=n*f,l=n*p,c=a*f,h=a*p;r[0]=s+h*i,r[4]=c*i-l,r[8]=o*a,r[1]=o*p,r[5]=o*f,r[9]=-i,r[2]=l*i-c,r[6]=h+s*i,r[10]=o*n}else if(t.order==="ZXY"){const s=n*f,l=n*p,c=a*f,h=a*p;r[0]=s-h*i,r[4]=-o*p,r[8]=c+l*i,r[1]=l+c*i,r[5]=o*f,r[9]=h-s*i,r[2]=-o*a,r[6]=i,r[10]=o*n}else if(t.order==="ZYX"){const s=o*f,l=o*p,c=i*f,h=i*p;r[0]=n*f,r[4]=c*a-l,r[8]=s*a+h,r[1]=n*p,r[5]=h*a+s,r[9]=l*a-c,r[2]=-a,r[6]=i*n,r[10]=o*n}else if(t.order==="YZX"){const s=o*n,l=o*a,c=i*n,h=i*a;r[0]=n*f,r[4]=h-s*p,r[8]=c*p+l,r[1]=p,r[5]=o*f,r[9]=-i*f,r[2]=-a*f,r[6]=l*p+c,r[10]=s-h*p}else if(t.order==="XZY"){const s=o*n,l=o*a,c=i*n,h=i*a;r[0]=n*f,r[4]=-p,r[8]=a*f,r[1]=s*p+h,r[5]=o*f,r[9]=l*p-c,r[2]=c*p-l,r[6]=i*f,r[10]=h*p+s}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(rg,t,ng)}lookAt(t,r,e){const u=this.elements;return Zr.subVectors(t,r),Zr.lengthSq()===0&&(Zr.z=1),Zr.normalize(),Yn.crossVectors(e,Zr),Yn.lengthSq()===0&&(Math.abs(e.z)===1?Zr.x+=1e-4:Zr.z+=1e-4,Zr.normalize(),Yn.crossVectors(e,Zr)),Yn.normalize(),po.crossVectors(Zr,Yn),u[0]=Yn.x,u[4]=po.x,u[8]=Zr.x,u[1]=Yn.y,u[5]=po.y,u[9]=Zr.y,u[2]=Yn.z,u[6]=po.z,u[10]=Zr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const e=t.elements,u=r.elements,d=this.elements,o=e[0],i=e[4],n=e[8],a=e[12],f=e[1],p=e[5],s=e[9],l=e[13],c=e[2],h=e[6],m=e[10],g=e[14],y=e[3],_=e[7],x=e[11],w=e[15],j=u[0],E=u[4],T=u[8],A=u[12],R=u[1],P=u[5],N=u[9],O=u[13],D=u[2],U=u[6],Y=u[10],H=u[14],W=u[3],X=u[7],Z=u[11],q=u[15];return d[0]=o*j+i*R+n*D+a*W,d[4]=o*E+i*P+n*U+a*X,d[8]=o*T+i*N+n*Y+a*Z,d[12]=o*A+i*O+n*H+a*q,d[1]=f*j+p*R+s*D+l*W,d[5]=f*E+p*P+s*U+l*X,d[9]=f*T+p*N+s*Y+l*Z,d[13]=f*A+p*O+s*H+l*q,d[2]=c*j+h*R+m*D+g*W,d[6]=c*E+h*P+m*U+g*X,d[10]=c*T+h*N+m*Y+g*Z,d[14]=c*A+h*O+m*H+g*q,d[3]=y*j+_*R+x*D+w*W,d[7]=y*E+_*P+x*U+w*X,d[11]=y*T+_*N+x*Y+w*Z,d[15]=y*A+_*O+x*H+w*q,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],e=t[4],u=t[8],d=t[12],o=t[1],i=t[5],n=t[9],a=t[13],f=t[2],p=t[6],s=t[10],l=t[14],c=t[3],h=t[7],m=t[11],g=t[15];return c*(+d*n*p-u*a*p-d*i*s+e*a*s+u*i*l-e*n*l)+h*(+r*n*l-r*a*s+d*o*s-u*o*l+u*a*f-d*n*f)+m*(+r*a*p-r*i*l-d*o*p+e*o*l+d*i*f-e*a*f)+g*(-u*i*f-r*n*p+r*i*s+u*o*p-e*o*s+e*n*f)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,e){const u=this.elements;return t.isVector3?(u[12]=t.x,u[13]=t.y,u[14]=t.z):(u[12]=t,u[13]=r,u[14]=e),this}invert(){const t=this.elements,r=t[0],e=t[1],u=t[2],d=t[3],o=t[4],i=t[5],n=t[6],a=t[7],f=t[8],p=t[9],s=t[10],l=t[11],c=t[12],h=t[13],m=t[14],g=t[15],y=p*m*a-h*s*a+h*n*l-i*m*l-p*n*g+i*s*g,_=c*s*a-f*m*a-c*n*l+o*m*l+f*n*g-o*s*g,x=f*h*a-c*p*a+c*i*l-o*h*l-f*i*g+o*p*g,w=c*p*n-f*h*n-c*i*s+o*h*s+f*i*m-o*p*m,j=r*y+e*_+u*x+d*w;if(j===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/j;return t[0]=y*E,t[1]=(h*s*d-p*m*d-h*u*l+e*m*l+p*u*g-e*s*g)*E,t[2]=(i*m*d-h*n*d+h*u*a-e*m*a-i*u*g+e*n*g)*E,t[3]=(p*n*d-i*s*d-p*u*a+e*s*a+i*u*l-e*n*l)*E,t[4]=_*E,t[5]=(f*m*d-c*s*d+c*u*l-r*m*l-f*u*g+r*s*g)*E,t[6]=(c*n*d-o*m*d-c*u*a+r*m*a+o*u*g-r*n*g)*E,t[7]=(o*s*d-f*n*d+f*u*a-r*s*a-o*u*l+r*n*l)*E,t[8]=x*E,t[9]=(c*p*d-f*h*d-c*e*l+r*h*l+f*e*g-r*p*g)*E,t[10]=(o*h*d-c*i*d+c*e*a-r*h*a-o*e*g+r*i*g)*E,t[11]=(f*i*d-o*p*d-f*e*a+r*p*a+o*e*l-r*i*l)*E,t[12]=w*E,t[13]=(f*h*u-c*p*u+c*e*s-r*h*s-f*e*m+r*p*m)*E,t[14]=(c*i*u-o*h*u-c*e*n+r*h*n+o*e*m-r*i*m)*E,t[15]=(o*p*u-f*i*u+f*e*n-r*p*n-o*e*s+r*i*s)*E,this}scale(t){const r=this.elements,e=t.x,u=t.y,d=t.z;return r[0]*=e,r[4]*=u,r[8]*=d,r[1]*=e,r[5]*=u,r[9]*=d,r[2]*=e,r[6]*=u,r[10]*=d,r[3]*=e,r[7]*=u,r[11]*=d,this}getMaxScaleOnAxis(){const t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],u=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,e,u))}makeTranslation(t,r,e){return this.set(1,0,0,t,0,1,0,r,0,0,1,e,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),e=Math.sin(t);return this.set(1,0,0,0,0,r,-e,0,0,e,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),e=Math.sin(t);return this.set(r,0,e,0,0,1,0,0,-e,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),e=Math.sin(t);return this.set(r,-e,0,0,e,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const e=Math.cos(r),u=Math.sin(r),d=1-e,o=t.x,i=t.y,n=t.z,a=d*o,f=d*i;return this.set(a*o+e,a*i-u*n,a*n+u*i,0,a*i+u*n,f*i+e,f*n-u*o,0,a*n-u*i,f*n+u*o,d*n*n+e,0,0,0,0,1),this}makeScale(t,r,e){return this.set(t,0,0,0,0,r,0,0,0,0,e,0,0,0,0,1),this}makeShear(t,r,e,u,d,o){return this.set(1,e,d,0,t,1,o,0,r,u,1,0,0,0,0,1),this}compose(t,r,e){const u=this.elements,d=r._x,o=r._y,i=r._z,n=r._w,a=d+d,f=o+o,p=i+i,s=d*a,l=d*f,c=d*p,h=o*f,m=o*p,g=i*p,y=n*a,_=n*f,x=n*p,w=e.x,j=e.y,E=e.z;return u[0]=(1-(h+g))*w,u[1]=(l+x)*w,u[2]=(c-_)*w,u[3]=0,u[4]=(l-x)*j,u[5]=(1-(s+g))*j,u[6]=(m+y)*j,u[7]=0,u[8]=(c+_)*E,u[9]=(m-y)*E,u[10]=(1-(s+h))*E,u[11]=0,u[12]=t.x,u[13]=t.y,u[14]=t.z,u[15]=1,this}decompose(t,r,e){const u=this.elements;let d=Ii.set(u[0],u[1],u[2]).length();const o=Ii.set(u[4],u[5],u[6]).length(),i=Ii.set(u[8],u[9],u[10]).length();this.determinant()<0&&(d=-d),t.x=u[12],t.y=u[13],t.z=u[14],ln.copy(this);const a=1/d,f=1/o,p=1/i;return ln.elements[0]*=a,ln.elements[1]*=a,ln.elements[2]*=a,ln.elements[4]*=f,ln.elements[5]*=f,ln.elements[6]*=f,ln.elements[8]*=p,ln.elements[9]*=p,ln.elements[10]*=p,r.setFromRotationMatrix(ln),e.x=d,e.y=o,e.z=i,this}makePerspective(t,r,e,u,d,o){const i=this.elements,n=2*d/(r-t),a=2*d/(e-u),f=(r+t)/(r-t),p=(e+u)/(e-u),s=-(o+d)/(o-d),l=-2*o*d/(o-d);return i[0]=n,i[4]=0,i[8]=f,i[12]=0,i[1]=0,i[5]=a,i[9]=p,i[13]=0,i[2]=0,i[6]=0,i[10]=s,i[14]=l,i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}makeOrthographic(t,r,e,u,d,o){const i=this.elements,n=1/(r-t),a=1/(e-u),f=1/(o-d),p=(r+t)*n,s=(e+u)*a,l=(o+d)*f;return i[0]=2*n,i[4]=0,i[8]=0,i[12]=-p,i[1]=0,i[5]=2*a,i[9]=0,i[13]=-s,i[2]=0,i[6]=0,i[10]=-2*f,i[14]=-l,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}equals(t){const r=this.elements,e=t.elements;for(let u=0;u<16;u++)if(r[u]!==e[u])return!1;return!0}fromArray(t,r=0){for(let e=0;e<16;e++)this.elements[e]=t[e+r];return this}toArray(t=[],r=0){const e=this.elements;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],t[r+9]=e[9],t[r+10]=e[10],t[r+11]=e[11],t[r+12]=e[12],t[r+13]=e[13],t[r+14]=e[14],t[r+15]=e[15],t}}const Ii=new De,ln=new Nt,rg=new De(0,0,0),ng=new De(1,1,1),Yn=new De,po=new De,Zr=new De,pu=new Nt,mu=new xn;class Xs{constructor(t=0,r=0,e=0,u=Xs.DefaultOrder){this.isEuler=!0,this._x=t,this._y=r,this._z=e,this._order=u}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,e,u=this._order){return this._x=t,this._y=r,this._z=e,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,e=!0){const u=t.elements,d=u[0],o=u[4],i=u[8],n=u[1],a=u[5],f=u[9],p=u[2],s=u[6],l=u[10];switch(r){case"XYZ":this._y=Math.asin(kr(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(-f,l),this._z=Math.atan2(-o,d)):(this._x=Math.atan2(s,a),this._z=0);break;case"YXZ":this._x=Math.asin(-kr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(i,l),this._z=Math.atan2(n,a)):(this._y=Math.atan2(-p,d),this._z=0);break;case"ZXY":this._x=Math.asin(kr(s,-1,1)),Math.abs(s)<.9999999?(this._y=Math.atan2(-p,l),this._z=Math.atan2(-o,a)):(this._y=0,this._z=Math.atan2(n,d));break;case"ZYX":this._y=Math.asin(-kr(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(s,l),this._z=Math.atan2(n,d)):(this._x=0,this._z=Math.atan2(-o,a));break;case"YZX":this._z=Math.asin(kr(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-f,a),this._y=Math.atan2(-p,d)):(this._x=0,this._y=Math.atan2(i,l));break;case"XZY":this._z=Math.asin(-kr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(s,a),this._y=Math.atan2(i,d)):(this._x=Math.atan2(-f,l),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,e===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,e){return pu.makeRotationFromQuaternion(t),this.setFromRotationMatrix(pu,r,e)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return mu.setFromEuler(this),this.setFromQuaternion(mu,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Xs.DefaultOrder="XYZ";Xs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ch{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let ig=0;const gu=new De,Oi=new xn,jn=new Nt,mo=new De,ws=new De,sg=new De,og=new xn,yu=new De(1,0,0),vu=new De(0,1,0),bu=new De(0,0,1),ag={type:"added"},_u={type:"removed"};class cr extends wi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ig++}),this.uuid=dn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DefaultUp.clone();const t=new De,r=new Xs,e=new xn,u=new De(1,1,1);function d(){e.setFromEuler(r,!1)}function o(){r.setFromQuaternion(e,void 0,!1)}r._onChange(d),e._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:e},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new Nt},normalMatrix:{value:new Jr}}),this.matrix=new Nt,this.matrixWorld=new Nt,this.matrixAutoUpdate=cr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=cr.DefaultMatrixWorldAutoUpdate,this.layers=new ch,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return Oi.setFromAxisAngle(t,r),this.quaternion.multiply(Oi),this}rotateOnWorldAxis(t,r){return Oi.setFromAxisAngle(t,r),this.quaternion.premultiply(Oi),this}rotateX(t){return this.rotateOnAxis(yu,t)}rotateY(t){return this.rotateOnAxis(vu,t)}rotateZ(t){return this.rotateOnAxis(bu,t)}translateOnAxis(t,r){return gu.copy(t).applyQuaternion(this.quaternion),this.position.add(gu.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(yu,t)}translateY(t){return this.translateOnAxis(vu,t)}translateZ(t){return this.translateOnAxis(bu,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(jn.copy(this.matrixWorld).invert())}lookAt(t,r,e){t.isVector3?mo.copy(t):mo.set(t,r,e);const u=this.parent;this.updateWorldMatrix(!0,!1),ws.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?jn.lookAt(ws,mo,this.up):jn.lookAt(mo,ws,this.up),this.quaternion.setFromRotationMatrix(jn),u&&(jn.extractRotation(u.matrixWorld),Oi.setFromRotationMatrix(jn),this.quaternion.premultiply(Oi.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ag)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(_u)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(_u)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),jn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),jn.multiply(t.parent.matrixWorld)),t.applyMatrix4(jn),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let e=0,u=this.children.length;e<u;e++){const o=this.children[e].getObjectByProperty(t,r);if(o!==void 0)return o}}getObjectsByProperty(t,r){let e=[];this[t]===r&&e.push(this);for(let u=0,d=this.children.length;u<d;u++){const o=this.children[u].getObjectsByProperty(t,r);o.length>0&&(e=e.concat(o))}return e}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ws,t,sg),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ws,og,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let e=0,u=r.length;e<u;e++)r[e].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const r=this.children;for(let e=0,u=r.length;e<u;e++)r[e].traverseVisible(t)}traverseAncestors(t){const r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let e=0,u=r.length;e<u;e++){const d=r[e];(d.matrixWorldAutoUpdate===!0||t===!0)&&d.updateMatrixWorld(t)}}updateWorldMatrix(t,r){const e=this.parent;if(t===!0&&e!==null&&e.matrixWorldAutoUpdate===!0&&e.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),r===!0){const u=this.children;for(let d=0,o=u.length;d<o;d++){const i=u[d];i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){const r=t===void 0||typeof t=="string",e={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const u={};u.uuid=this.uuid,u.type=this.type,this.name!==""&&(u.name=this.name),this.castShadow===!0&&(u.castShadow=!0),this.receiveShadow===!0&&(u.receiveShadow=!0),this.visible===!1&&(u.visible=!1),this.frustumCulled===!1&&(u.frustumCulled=!1),this.renderOrder!==0&&(u.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(u.instanceColor=this.instanceColor.toJSON()));function d(i,n){return i[n.uuid]===void 0&&(i[n.uuid]=n.toJSON(t)),n.uuid}if(this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(u.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=d(t.geometries,this.geometry);const i=this.geometry.parameters;if(i!==void 0&&i.shapes!==void 0){const n=i.shapes;if(Array.isArray(n))for(let a=0,f=n.length;a<f;a++){const p=n[a];d(t.shapes,p)}else d(t.shapes,n)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(d(t.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const i=[];for(let n=0,a=this.material.length;n<a;n++)i.push(d(t.materials,this.material[n]));u.material=i}else u.material=d(t.materials,this.material);if(this.children.length>0){u.children=[];for(let i=0;i<this.children.length;i++)u.children.push(this.children[i].toJSON(t).object)}if(this.animations.length>0){u.animations=[];for(let i=0;i<this.animations.length;i++){const n=this.animations[i];u.animations.push(d(t.animations,n))}}if(r){const i=o(t.geometries),n=o(t.materials),a=o(t.textures),f=o(t.images),p=o(t.shapes),s=o(t.skeletons),l=o(t.animations),c=o(t.nodes);i.length>0&&(e.geometries=i),n.length>0&&(e.materials=n),a.length>0&&(e.textures=a),f.length>0&&(e.images=f),p.length>0&&(e.shapes=p),s.length>0&&(e.skeletons=s),l.length>0&&(e.animations=l),c.length>0&&(e.nodes=c)}return e.object=u,e;function o(i){const n=[];for(const a in i){const f=i[a];delete f.metadata,n.push(f)}return n}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let e=0;e<t.children.length;e++){const u=t.children[e];this.add(u.clone())}return this}}cr.DefaultUp=new De(0,1,0);cr.DefaultMatrixAutoUpdate=!0;cr.DefaultMatrixWorldAutoUpdate=!0;const cn=new De,Cn=new De,va=new De,An=new De,Ni=new De,Ui=new De,xu=new De,ba=new De,_a=new De,xa=new De;class Pn{constructor(t=new De,r=new De,e=new De){this.a=t,this.b=r,this.c=e}static getNormal(t,r,e,u){u.subVectors(e,r),cn.subVectors(t,r),u.cross(cn);const d=u.lengthSq();return d>0?u.multiplyScalar(1/Math.sqrt(d)):u.set(0,0,0)}static getBarycoord(t,r,e,u,d){cn.subVectors(u,r),Cn.subVectors(e,r),va.subVectors(t,r);const o=cn.dot(cn),i=cn.dot(Cn),n=cn.dot(va),a=Cn.dot(Cn),f=Cn.dot(va),p=o*a-i*i;if(p===0)return d.set(-2,-1,-1);const s=1/p,l=(a*n-i*f)*s,c=(o*f-i*n)*s;return d.set(1-l-c,c,l)}static containsPoint(t,r,e,u){return this.getBarycoord(t,r,e,u,An),An.x>=0&&An.y>=0&&An.x+An.y<=1}static getUV(t,r,e,u,d,o,i,n){return this.getBarycoord(t,r,e,u,An),n.set(0,0),n.addScaledVector(d,An.x),n.addScaledVector(o,An.y),n.addScaledVector(i,An.z),n}static isFrontFacing(t,r,e,u){return cn.subVectors(e,r),Cn.subVectors(t,r),cn.cross(Cn).dot(u)<0}set(t,r,e){return this.a.copy(t),this.b.copy(r),this.c.copy(e),this}setFromPointsAndIndices(t,r,e,u){return this.a.copy(t[r]),this.b.copy(t[e]),this.c.copy(t[u]),this}setFromAttributeAndIndices(t,r,e,u){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,e),this.c.fromBufferAttribute(t,u),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return cn.subVectors(this.c,this.b),Cn.subVectors(this.a,this.b),cn.cross(Cn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Pn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return Pn.getBarycoord(t,this.a,this.b,this.c,r)}getUV(t,r,e,u,d){return Pn.getUV(t,this.a,this.b,this.c,r,e,u,d)}containsPoint(t){return Pn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Pn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const e=this.a,u=this.b,d=this.c;let o,i;Ni.subVectors(u,e),Ui.subVectors(d,e),ba.subVectors(t,e);const n=Ni.dot(ba),a=Ui.dot(ba);if(n<=0&&a<=0)return r.copy(e);_a.subVectors(t,u);const f=Ni.dot(_a),p=Ui.dot(_a);if(f>=0&&p<=f)return r.copy(u);const s=n*p-f*a;if(s<=0&&n>=0&&f<=0)return o=n/(n-f),r.copy(e).addScaledVector(Ni,o);xa.subVectors(t,d);const l=Ni.dot(xa),c=Ui.dot(xa);if(c>=0&&l<=c)return r.copy(d);const h=l*a-n*c;if(h<=0&&a>=0&&c<=0)return i=a/(a-c),r.copy(e).addScaledVector(Ui,i);const m=f*c-l*p;if(m<=0&&p-f>=0&&l-c>=0)return xu.subVectors(d,u),i=(p-f)/(p-f+(l-c)),r.copy(u).addScaledVector(xu,i);const g=1/(m+h+s);return o=h*g,i=s*g,r.copy(e).addScaledVector(Ni,o).addScaledVector(Ui,i)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let lg=0;class hn extends wi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lg++}),this.uuid=dn(),this.name="",this.type="Material",this.blending=Zi,this.side=ei,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Zd,this.blendDst=Kd,this.blendEquation=qi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Wa,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Um,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=oa,this.stencilZFail=oa,this.stencilZPass=oa,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const r in t){const e=t[r];if(e===void 0){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}const u=this[r];if(u===void 0){console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.");continue}u&&u.isColor?u.set(e):u&&u.isVector3&&e&&e.isVector3?u.copy(e):this[r]=e}}toJSON(t){const r=t===void 0||typeof t=="string";r&&(t={textures:{},images:{}});const e={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.color&&this.color.isColor&&(e.color=this.color.getHex()),this.roughness!==void 0&&(e.roughness=this.roughness),this.metalness!==void 0&&(e.metalness=this.metalness),this.sheen!==void 0&&(e.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(e.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(e.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(e.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(e.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(e.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(e.shininess=this.shininess),this.clearcoat!==void 0&&(e.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(e.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(e.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(e.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(e.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(e.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(e.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(e.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(e.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(t).uuid,e.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(t).uuid,e.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(t).uuid,e.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(t).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(t).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(e.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(e.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(e.combine=this.combine)),this.envMapIntensity!==void 0&&(e.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(e.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(e.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(e.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(e.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(e.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(e.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(e.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(e.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(e.size=this.size),this.shadowSide!==null&&(e.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(e.sizeAttenuation=this.sizeAttenuation),this.blending!==Zi&&(e.blending=this.blending),this.side!==ei&&(e.side=this.side),this.vertexColors&&(e.vertexColors=!0),this.opacity<1&&(e.opacity=this.opacity),this.transparent===!0&&(e.transparent=this.transparent),e.depthFunc=this.depthFunc,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.colorWrite=this.colorWrite,e.stencilWrite=this.stencilWrite,e.stencilWriteMask=this.stencilWriteMask,e.stencilFunc=this.stencilFunc,e.stencilRef=this.stencilRef,e.stencilFuncMask=this.stencilFuncMask,e.stencilFail=this.stencilFail,e.stencilZFail=this.stencilZFail,e.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(e.rotation=this.rotation),this.polygonOffset===!0&&(e.polygonOffset=!0),this.polygonOffsetFactor!==0&&(e.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(e.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(e.linewidth=this.linewidth),this.dashSize!==void 0&&(e.dashSize=this.dashSize),this.gapSize!==void 0&&(e.gapSize=this.gapSize),this.scale!==void 0&&(e.scale=this.scale),this.dithering===!0&&(e.dithering=!0),this.alphaTest>0&&(e.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(e.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(e.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(e.wireframe=this.wireframe),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(e.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(e.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(e.flatShading=this.flatShading),this.visible===!1&&(e.visible=!1),this.toneMapped===!1&&(e.toneMapped=!1),this.fog===!1&&(e.fog=!1),Object.keys(this.userData).length>0&&(e.userData=this.userData);function u(d){const o=[];for(const i in d){const n=d[i];delete n.metadata,o.push(n)}return o}if(r){const d=u(t.textures),o=u(t.images);d.length>0&&(e.textures=d),o.length>0&&(e.images=o)}return e}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let e=null;if(r!==null){const u=r.length;e=new Array(u);for(let d=0;d!==u;++d)e[d]=r[d].clone()}return this.clippingPlanes=e,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class fi extends hn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new It(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Jd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const vr=new De,go=new Ct;class Xr{constructor(t,r,e=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=r,this.count=t!==void 0?t.length/r:0,this.normalized=e,this.usage=Ya,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,r,e){t*=this.itemSize,e*=r.itemSize;for(let u=0,d=this.itemSize;u<d;u++)this.array[t+u]=r.array[e+u];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let r=0,e=this.count;r<e;r++)go.fromBufferAttribute(this,r),go.applyMatrix3(t),this.setXY(r,go.x,go.y);else if(this.itemSize===3)for(let r=0,e=this.count;r<e;r++)vr.fromBufferAttribute(this,r),vr.applyMatrix3(t),this.setXYZ(r,vr.x,vr.y,vr.z);return this}applyMatrix4(t){for(let r=0,e=this.count;r<e;r++)vr.fromBufferAttribute(this,r),vr.applyMatrix4(t),this.setXYZ(r,vr.x,vr.y,vr.z);return this}applyNormalMatrix(t){for(let r=0,e=this.count;r<e;r++)vr.fromBufferAttribute(this,r),vr.applyNormalMatrix(t),this.setXYZ(r,vr.x,vr.y,vr.z);return this}transformDirection(t){for(let r=0,e=this.count;r<e;r++)vr.fromBufferAttribute(this,r),vr.transformDirection(t),this.setXYZ(r,vr.x,vr.y,vr.z);return this}set(t,r=0){return this.array.set(t,r),this}getX(t){let r=this.array[t*this.itemSize];return this.normalized&&(r=On(r,this.array)),r}setX(t,r){return this.normalized&&(r=er(r,this.array)),this.array[t*this.itemSize]=r,this}getY(t){let r=this.array[t*this.itemSize+1];return this.normalized&&(r=On(r,this.array)),r}setY(t,r){return this.normalized&&(r=er(r,this.array)),this.array[t*this.itemSize+1]=r,this}getZ(t){let r=this.array[t*this.itemSize+2];return this.normalized&&(r=On(r,this.array)),r}setZ(t,r){return this.normalized&&(r=er(r,this.array)),this.array[t*this.itemSize+2]=r,this}getW(t){let r=this.array[t*this.itemSize+3];return this.normalized&&(r=On(r,this.array)),r}setW(t,r){return this.normalized&&(r=er(r,this.array)),this.array[t*this.itemSize+3]=r,this}setXY(t,r,e){return t*=this.itemSize,this.normalized&&(r=er(r,this.array),e=er(e,this.array)),this.array[t+0]=r,this.array[t+1]=e,this}setXYZ(t,r,e,u){return t*=this.itemSize,this.normalized&&(r=er(r,this.array),e=er(e,this.array),u=er(u,this.array)),this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=u,this}setXYZW(t,r,e,u,d){return t*=this.itemSize,this.normalized&&(r=er(r,this.array),e=er(e,this.array),u=er(u,this.array),d=er(d,this.array)),this.array[t+0]=r,this.array[t+1]=e,this.array[t+2]=u,this.array[t+3]=d,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Ya&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class uh extends Xr{constructor(t,r,e){super(new Uint16Array(t),r,e)}}class dh extends Xr{constructor(t,r,e){super(new Uint32Array(t),r,e)}}class Un extends Xr{constructor(t,r,e){super(new Float32Array(t),r,e)}}let cg=0;const Qr=new Nt,wa=new cr,Fi=new De,Kr=new ls,Ss=new ls,Ar=new De;class pn extends wi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cg++}),this.uuid=dn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ih(t)?dh:uh)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,r,e=0){this.groups.push({start:t,count:r,materialIndex:e})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(t),r.needsUpdate=!0);const e=this.attributes.normal;if(e!==void 0){const d=new Jr().getNormalMatrix(t);e.applyNormalMatrix(d),e.needsUpdate=!0}const u=this.attributes.tangent;return u!==void 0&&(u.transformDirection(t),u.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qr.makeRotationFromQuaternion(t),this.applyMatrix4(Qr),this}rotateX(t){return Qr.makeRotationX(t),this.applyMatrix4(Qr),this}rotateY(t){return Qr.makeRotationY(t),this.applyMatrix4(Qr),this}rotateZ(t){return Qr.makeRotationZ(t),this.applyMatrix4(Qr),this}translate(t,r,e){return Qr.makeTranslation(t,r,e),this.applyMatrix4(Qr),this}scale(t,r,e){return Qr.makeScale(t,r,e),this.applyMatrix4(Qr),this}lookAt(t){return wa.lookAt(t),wa.updateMatrix(),this.applyMatrix4(wa.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fi).negate(),this.translate(Fi.x,Fi.y,Fi.z),this}setFromPoints(t){const r=[];for(let e=0,u=t.length;e<u;e++){const d=t[e];r.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Un(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ls);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new De(-1/0,-1/0,-1/0),new De(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),r)for(let e=0,u=r.length;e<u;e++){const d=r[e];Kr.setFromBufferAttribute(d),this.morphTargetsRelative?(Ar.addVectors(this.boundingBox.min,Kr.min),this.boundingBox.expandByPoint(Ar),Ar.addVectors(this.boundingBox.max,Kr.max),this.boundingBox.expandByPoint(Ar)):(this.boundingBox.expandByPoint(Kr.min),this.boundingBox.expandByPoint(Kr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new cs);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new De,1/0);return}if(t){const e=this.boundingSphere.center;if(Kr.setFromBufferAttribute(t),r)for(let d=0,o=r.length;d<o;d++){const i=r[d];Ss.setFromBufferAttribute(i),this.morphTargetsRelative?(Ar.addVectors(Kr.min,Ss.min),Kr.expandByPoint(Ar),Ar.addVectors(Kr.max,Ss.max),Kr.expandByPoint(Ar)):(Kr.expandByPoint(Ss.min),Kr.expandByPoint(Ss.max))}Kr.getCenter(e);let u=0;for(let d=0,o=t.count;d<o;d++)Ar.fromBufferAttribute(t,d),u=Math.max(u,e.distanceToSquared(Ar));if(r)for(let d=0,o=r.length;d<o;d++){const i=r[d],n=this.morphTargetsRelative;for(let a=0,f=i.count;a<f;a++)Ar.fromBufferAttribute(i,a),n&&(Fi.fromBufferAttribute(t,a),Ar.add(Fi)),u=Math.max(u,e.distanceToSquared(Ar))}this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,r=this.attributes;if(t===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const e=t.array,u=r.position.array,d=r.normal.array,o=r.uv.array,i=u.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xr(new Float32Array(4*i),4));const n=this.getAttribute("tangent").array,a=[],f=[];for(let R=0;R<i;R++)a[R]=new De,f[R]=new De;const p=new De,s=new De,l=new De,c=new Ct,h=new Ct,m=new Ct,g=new De,y=new De;function _(R,P,N){p.fromArray(u,R*3),s.fromArray(u,P*3),l.fromArray(u,N*3),c.fromArray(o,R*2),h.fromArray(o,P*2),m.fromArray(o,N*2),s.sub(p),l.sub(p),h.sub(c),m.sub(c);const O=1/(h.x*m.y-m.x*h.y);isFinite(O)&&(g.copy(s).multiplyScalar(m.y).addScaledVector(l,-h.y).multiplyScalar(O),y.copy(l).multiplyScalar(h.x).addScaledVector(s,-m.x).multiplyScalar(O),a[R].add(g),a[P].add(g),a[N].add(g),f[R].add(y),f[P].add(y),f[N].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.length}]);for(let R=0,P=x.length;R<P;++R){const N=x[R],O=N.start,D=N.count;for(let U=O,Y=O+D;U<Y;U+=3)_(e[U+0],e[U+1],e[U+2])}const w=new De,j=new De,E=new De,T=new De;function A(R){E.fromArray(d,R*3),T.copy(E);const P=a[R];w.copy(P),w.sub(E.multiplyScalar(E.dot(P))).normalize(),j.crossVectors(T,P);const O=j.dot(f[R])<0?-1:1;n[R*4]=w.x,n[R*4+1]=w.y,n[R*4+2]=w.z,n[R*4+3]=O}for(let R=0,P=x.length;R<P;++R){const N=x[R],O=N.start,D=N.count;for(let U=O,Y=O+D;U<Y;U+=3)A(e[U+0]),A(e[U+1]),A(e[U+2])}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(r!==void 0){let e=this.getAttribute("normal");if(e===void 0)e=new Xr(new Float32Array(r.count*3),3),this.setAttribute("normal",e);else for(let s=0,l=e.count;s<l;s++)e.setXYZ(s,0,0,0);const u=new De,d=new De,o=new De,i=new De,n=new De,a=new De,f=new De,p=new De;if(t)for(let s=0,l=t.count;s<l;s+=3){const c=t.getX(s+0),h=t.getX(s+1),m=t.getX(s+2);u.fromBufferAttribute(r,c),d.fromBufferAttribute(r,h),o.fromBufferAttribute(r,m),f.subVectors(o,d),p.subVectors(u,d),f.cross(p),i.fromBufferAttribute(e,c),n.fromBufferAttribute(e,h),a.fromBufferAttribute(e,m),i.add(f),n.add(f),a.add(f),e.setXYZ(c,i.x,i.y,i.z),e.setXYZ(h,n.x,n.y,n.z),e.setXYZ(m,a.x,a.y,a.z)}else for(let s=0,l=r.count;s<l;s+=3)u.fromBufferAttribute(r,s+0),d.fromBufferAttribute(r,s+1),o.fromBufferAttribute(r,s+2),f.subVectors(o,d),p.subVectors(u,d),f.cross(p),e.setXYZ(s+0,f.x,f.y,f.z),e.setXYZ(s+1,f.x,f.y,f.z),e.setXYZ(s+2,f.x,f.y,f.z);this.normalizeNormals(),e.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let r=0,e=t.count;r<e;r++)Ar.fromBufferAttribute(t,r),Ar.normalize(),t.setXYZ(r,Ar.x,Ar.y,Ar.z)}toNonIndexed(){function t(i,n){const a=i.array,f=i.itemSize,p=i.normalized,s=new a.constructor(n.length*f);let l=0,c=0;for(let h=0,m=n.length;h<m;h++){i.isInterleavedBufferAttribute?l=n[h]*i.data.stride+i.offset:l=n[h]*f;for(let g=0;g<f;g++)s[c++]=a[l++]}return new Xr(s,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new pn,e=this.index.array,u=this.attributes;for(const i in u){const n=u[i],a=t(n,e);r.setAttribute(i,a)}const d=this.morphAttributes;for(const i in d){const n=[],a=d[i];for(let f=0,p=a.length;f<p;f++){const s=a[f],l=t(s,e);n.push(l)}r.morphAttributes[i]=n}r.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let i=0,n=o.length;i<n;i++){const a=o[i];r.addGroup(a.start,a.count,a.materialIndex)}return r}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const n=this.parameters;for(const a in n)n[a]!==void 0&&(t[a]=n[a]);return t}t.data={attributes:{}};const r=this.index;r!==null&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const e=this.attributes;for(const n in e){const a=e[n];t.data.attributes[n]=a.toJSON(t.data)}const u={};let d=!1;for(const n in this.morphAttributes){const a=this.morphAttributes[n],f=[];for(let p=0,s=a.length;p<s;p++){const l=a[p];f.push(l.toJSON(t.data))}f.length>0&&(u[n]=f,d=!0)}d&&(t.data.morphAttributes=u,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const i=this.boundingSphere;return i!==null&&(t.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const e=t.index;e!==null&&this.setIndex(e.clone(r));const u=t.attributes;for(const a in u){const f=u[a];this.setAttribute(a,f.clone(r))}const d=t.morphAttributes;for(const a in d){const f=[],p=d[a];for(let s=0,l=p.length;s<l;s++)f.push(p[s].clone(r));this.morphAttributes[a]=f}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let a=0,f=o.length;a<f;a++){const p=o[a];this.addGroup(p.start,p.count,p.materialIndex)}const i=t.boundingBox;i!==null&&(this.boundingBox=i.clone());const n=t.boundingSphere;return n!==null&&(this.boundingSphere=n.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const wu=new Nt,Bi=new vl,Sa=new cs,Ms=new De,Ts=new De,Es=new De,Ma=new De,yo=new De,vo=new Ct,bo=new Ct,_o=new Ct,Ta=new De,xo=new De;class rn extends cr{constructor(t=new pn,r=new fi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const u=r[e[0]];if(u!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,o=u.length;d<o;d++){const i=u[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=d}}}}getVertexPosition(t,r){const e=this.geometry,u=e.attributes.position,d=e.morphAttributes.position,o=e.morphTargetsRelative;r.fromBufferAttribute(u,t);const i=this.morphTargetInfluences;if(d&&i){yo.set(0,0,0);for(let n=0,a=d.length;n<a;n++){const f=i[n],p=d[n];f!==0&&(Ma.fromBufferAttribute(p,t),o?yo.addScaledVector(Ma,f):yo.addScaledVector(Ma.sub(r),f))}r.add(yo)}return this.isSkinnedMesh&&this.boneTransform(t,r),r}raycast(t,r){const e=this.geometry,u=this.material,d=this.matrixWorld;if(u===void 0||(e.boundingSphere===null&&e.computeBoundingSphere(),Sa.copy(e.boundingSphere),Sa.applyMatrix4(d),t.ray.intersectsSphere(Sa)===!1)||(wu.copy(d).invert(),Bi.copy(t.ray).applyMatrix4(wu),e.boundingBox!==null&&Bi.intersectsBox(e.boundingBox)===!1))return;let o;const i=e.index,n=e.attributes.position,a=e.attributes.uv,f=e.attributes.uv2,p=e.groups,s=e.drawRange;if(i!==null)if(Array.isArray(u))for(let l=0,c=p.length;l<c;l++){const h=p[l],m=u[h.materialIndex],g=Math.max(h.start,s.start),y=Math.min(i.count,Math.min(h.start+h.count,s.start+s.count));for(let _=g,x=y;_<x;_+=3){const w=i.getX(_),j=i.getX(_+1),E=i.getX(_+2);o=wo(this,m,t,Bi,a,f,w,j,E),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=h.materialIndex,r.push(o))}}else{const l=Math.max(0,s.start),c=Math.min(i.count,s.start+s.count);for(let h=l,m=c;h<m;h+=3){const g=i.getX(h),y=i.getX(h+1),_=i.getX(h+2);o=wo(this,u,t,Bi,a,f,g,y,_),o&&(o.faceIndex=Math.floor(h/3),r.push(o))}}else if(n!==void 0)if(Array.isArray(u))for(let l=0,c=p.length;l<c;l++){const h=p[l],m=u[h.materialIndex],g=Math.max(h.start,s.start),y=Math.min(n.count,Math.min(h.start+h.count,s.start+s.count));for(let _=g,x=y;_<x;_+=3){const w=_,j=_+1,E=_+2;o=wo(this,m,t,Bi,a,f,w,j,E),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=h.materialIndex,r.push(o))}}else{const l=Math.max(0,s.start),c=Math.min(n.count,s.start+s.count);for(let h=l,m=c;h<m;h+=3){const g=h,y=h+1,_=h+2;o=wo(this,u,t,Bi,a,f,g,y,_),o&&(o.faceIndex=Math.floor(h/3),r.push(o))}}}}function ug(b,t,r,e,u,d,o,i){let n;if(t.side===nn?n=e.intersectTriangle(o,d,u,!0,i):n=e.intersectTriangle(u,d,o,t.side===ei,i),n===null)return null;xo.copy(i),xo.applyMatrix4(b.matrixWorld);const a=r.ray.origin.distanceTo(xo);return a<r.near||a>r.far?null:{distance:a,point:xo.clone(),object:b}}function wo(b,t,r,e,u,d,o,i,n){b.getVertexPosition(o,Ms),b.getVertexPosition(i,Ts),b.getVertexPosition(n,Es);const a=ug(b,t,r,e,Ms,Ts,Es,Ta);if(a){u&&(vo.fromBufferAttribute(u,o),bo.fromBufferAttribute(u,i),_o.fromBufferAttribute(u,n),a.uv=Pn.getUV(Ta,Ms,Ts,Es,vo,bo,_o,new Ct)),d&&(vo.fromBufferAttribute(d,o),bo.fromBufferAttribute(d,i),_o.fromBufferAttribute(d,n),a.uv2=Pn.getUV(Ta,Ms,Ts,Es,vo,bo,_o,new Ct));const f={a:o,b:i,c:n,normal:new De,materialIndex:0};Pn.getNormal(Ms,Ts,Es,f.normal),a.face=f}return a}class Ys extends pn{constructor(t=1,r=1,e=1,u=1,d=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:e,widthSegments:u,heightSegments:d,depthSegments:o};const i=this;u=Math.floor(u),d=Math.floor(d),o=Math.floor(o);const n=[],a=[],f=[],p=[];let s=0,l=0;c("z","y","x",-1,-1,e,r,t,o,d,0),c("z","y","x",1,-1,e,r,-t,o,d,1),c("x","z","y",1,1,t,e,r,u,o,2),c("x","z","y",1,-1,t,e,-r,u,o,3),c("x","y","z",1,-1,t,r,e,u,d,4),c("x","y","z",-1,-1,t,r,-e,u,d,5),this.setIndex(n),this.setAttribute("position",new Un(a,3)),this.setAttribute("normal",new Un(f,3)),this.setAttribute("uv",new Un(p,2));function c(h,m,g,y,_,x,w,j,E,T,A){const R=x/E,P=w/T,N=x/2,O=w/2,D=j/2,U=E+1,Y=T+1;let H=0,W=0;const X=new De;for(let Z=0;Z<Y;Z++){const q=Z*P-O;for(let ee=0;ee<U;ee++){const L=ee*R-N;X[h]=L*y,X[m]=q*_,X[g]=D,a.push(X.x,X.y,X.z),X[h]=0,X[m]=0,X[g]=j>0?1:-1,f.push(X.x,X.y,X.z),p.push(ee/E),p.push(1-Z/T),H+=1}}for(let Z=0;Z<T;Z++)for(let q=0;q<E;q++){const ee=s+q+U*Z,L=s+q+U*(Z+1),I=s+(q+1)+U*(Z+1),F=s+(q+1)+U*Z;n.push(ee,L,F),n.push(L,I,F),W+=6}i.addGroup(l,W,A),l+=W,s+=H}}static fromJSON(t){return new Ys(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function os(b){const t={};for(const r in b){t[r]={};for(const e in b[r]){const u=b[r][e];u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture||u.isQuaternion)?t[r][e]=u.clone():Array.isArray(u)?t[r][e]=u.slice():t[r][e]=u}}return t}function Wr(b){const t={};for(let r=0;r<b.length;r++){const e=os(b[r]);for(const u in e)t[u]=e[u]}return t}function dg(b){const t=[];for(let r=0;r<b.length;r++)t.push(b[r].clone());return t}function hh(b){return b.getRenderTarget()===null&&b.outputEncoding===Vt?vn:Bs}const hg={clone:os,merge:Wr};var fg=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pg=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _i extends hn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=fg,this.fragmentShader=pg,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=os(t.uniforms),this.uniformsGroups=dg(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const u in this.uniforms){const o=this.uniforms[u].value;o&&o.isTexture?r.uniforms[u]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?r.uniforms[u]={type:"c",value:o.getHex()}:o&&o.isVector2?r.uniforms[u]={type:"v2",value:o.toArray()}:o&&o.isVector3?r.uniforms[u]={type:"v3",value:o.toArray()}:o&&o.isVector4?r.uniforms[u]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?r.uniforms[u]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?r.uniforms[u]={type:"m4",value:o.toArray()}:r.uniforms[u]={value:o}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;const e={};for(const u in this.extensions)this.extensions[u]===!0&&(e[u]=!0);return Object.keys(e).length>0&&(r.extensions=e),r}}class fh extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nt,this.projectionMatrix=new Nt,this.projectionMatrixInverse=new Nt}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class qr extends fh{constructor(t=50,r=1,e=.1,u=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=e,this.far=u,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=zs*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Os*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return zs*2*Math.atan(Math.tan(Os*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,r,e,u,d,o){this.aspect=t/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=e,this.view.offsetY=u,this.view.width=d,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(Os*.5*this.fov)/this.zoom,e=2*r,u=this.aspect*e,d=-.5*u;const o=this.view;if(this.view!==null&&this.view.enabled){const n=o.fullWidth,a=o.fullHeight;d+=o.offsetX*u/n,r-=o.offsetY*e/a,u*=o.width/n,e*=o.height/a}const i=this.filmOffset;i!==0&&(d+=t*i/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+u,r,r-e,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const zi=-90,Gi=1;class mg extends cr{constructor(t,r,e){super(),this.type="CubeCamera",this.renderTarget=e;const u=new qr(zi,Gi,t,r);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(1,0,0),this.add(u);const d=new qr(zi,Gi,t,r);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(-1,0,0),this.add(d);const o=new qr(zi,Gi,t,r);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const i=new qr(zi,Gi,t,r);i.layers=this.layers,i.up.set(0,0,1),i.lookAt(0,-1,0),this.add(i);const n=new qr(zi,Gi,t,r);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(0,0,1),this.add(n);const a=new qr(zi,Gi,t,r);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,-1),this.add(a)}update(t,r){this.parent===null&&this.updateMatrixWorld();const e=this.renderTarget,[u,d,o,i,n,a]=this.children,f=t.getRenderTarget(),p=t.toneMapping,s=t.xr.enabled;t.toneMapping=_n,t.xr.enabled=!1;const l=e.texture.generateMipmaps;e.texture.generateMipmaps=!1,t.setRenderTarget(e,0),t.render(r,u),t.setRenderTarget(e,1),t.render(r,d),t.setRenderTarget(e,2),t.render(r,o),t.setRenderTarget(e,3),t.render(r,i),t.setRenderTarget(e,4),t.render(r,n),e.texture.generateMipmaps=l,t.setRenderTarget(e,5),t.render(r,a),t.setRenderTarget(f),t.toneMapping=p,t.xr.enabled=s,e.texture.needsPMREMUpdate=!0}}class ph extends Ir{constructor(t,r,e,u,d,o,i,n,a,f){t=t!==void 0?t:[],r=r!==void 0?r:ts,super(t,r,e,u,d,o,i,n,a,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class gg extends bi{constructor(t=1,r={}){super(t,t,r),this.isWebGLCubeRenderTarget=!0;const e={width:t,height:t,depth:1},u=[e,e,e,e,e,e];this.texture=new ph(u,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Mr}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const e={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},u=new Ys(5,5,5),d=new _i({name:"CubemapFromEquirect",uniforms:os(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:nn,blending:$n});d.uniforms.tEquirect.value=r;const o=new rn(u,d),i=r.minFilter;return r.minFilter===ti&&(r.minFilter=Mr),new mg(1,10,this).update(t,o),r.minFilter=i,o.geometry.dispose(),o.material.dispose(),this}clear(t,r,e,u){const d=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(r,e,u);t.setRenderTarget(d)}}const Ea=new De,yg=new De,vg=new Jr;class ci{constructor(t=new De(1,0,0),r=0){this.isPlane=!0,this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,e,u){return this.normal.set(t,r,e),this.constant=u,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,e){const u=Ea.subVectors(e,r).cross(yg.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(u,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,r){const e=t.delta(Ea),u=this.normal.dot(e);if(u===0)return this.distanceToPoint(t.start)===0?r.copy(t.start):null;const d=-(t.start.dot(this.normal)+this.constant)/u;return d<0||d>1?null:r.copy(e).multiplyScalar(d).add(t.start)}intersectsLine(t){const r=this.distanceToPoint(t.start),e=this.distanceToPoint(t.end);return r<0&&e>0||e<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const e=r||vg.getNormalMatrix(t),u=this.coplanarPoint(Ea).applyMatrix4(t),d=this.normal.applyMatrix3(e).normalize();return this.constant=-u.dot(d),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Vi=new cs,So=new De;class bl{constructor(t=new ci,r=new ci,e=new ci,u=new ci,d=new ci,o=new ci){this.planes=[t,r,e,u,d,o]}set(t,r,e,u,d,o){const i=this.planes;return i[0].copy(t),i[1].copy(r),i[2].copy(e),i[3].copy(u),i[4].copy(d),i[5].copy(o),this}copy(t){const r=this.planes;for(let e=0;e<6;e++)r[e].copy(t.planes[e]);return this}setFromProjectionMatrix(t){const r=this.planes,e=t.elements,u=e[0],d=e[1],o=e[2],i=e[3],n=e[4],a=e[5],f=e[6],p=e[7],s=e[8],l=e[9],c=e[10],h=e[11],m=e[12],g=e[13],y=e[14],_=e[15];return r[0].setComponents(i-u,p-n,h-s,_-m).normalize(),r[1].setComponents(i+u,p+n,h+s,_+m).normalize(),r[2].setComponents(i+d,p+a,h+l,_+g).normalize(),r[3].setComponents(i-d,p-a,h-l,_-g).normalize(),r[4].setComponents(i-o,p-f,h-c,_-y).normalize(),r[5].setComponents(i+o,p+f,h+c,_+y).normalize(),this}intersectsObject(t){const r=t.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),Vi.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Vi)}intersectsSprite(t){return Vi.center.set(0,0,0),Vi.radius=.7071067811865476,Vi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Vi)}intersectsSphere(t){const r=this.planes,e=t.center,u=-t.radius;for(let d=0;d<6;d++)if(r[d].distanceToPoint(e)<u)return!1;return!0}intersectsBox(t){const r=this.planes;for(let e=0;e<6;e++){const u=r[e];if(So.x=u.normal.x>0?t.max.x:t.min.x,So.y=u.normal.y>0?t.max.y:t.min.y,So.z=u.normal.z>0?t.max.z:t.min.z,u.distanceToPoint(So)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let e=0;e<6;e++)if(r[e].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function mh(){let b=null,t=!1,r=null,e=null;function u(d,o){r(d,o),e=b.requestAnimationFrame(u)}return{start:function(){t!==!0&&r!==null&&(e=b.requestAnimationFrame(u),t=!0)},stop:function(){b.cancelAnimationFrame(e),t=!1},setAnimationLoop:function(d){r=d},setContext:function(d){b=d}}}function bg(b,t){const r=t.isWebGL2,e=new WeakMap;function u(a,f){const p=a.array,s=a.usage,l=b.createBuffer();b.bindBuffer(f,l),b.bufferData(f,p,s),a.onUploadCallback();let c;if(p instanceof Float32Array)c=5126;else if(p instanceof Uint16Array)if(a.isFloat16BufferAttribute)if(r)c=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else c=5123;else if(p instanceof Int16Array)c=5122;else if(p instanceof Uint32Array)c=5125;else if(p instanceof Int32Array)c=5124;else if(p instanceof Int8Array)c=5120;else if(p instanceof Uint8Array)c=5121;else if(p instanceof Uint8ClampedArray)c=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:l,type:c,bytesPerElement:p.BYTES_PER_ELEMENT,version:a.version}}function d(a,f,p){const s=f.array,l=f.updateRange;b.bindBuffer(p,a),l.count===-1?b.bufferSubData(p,0,s):(r?b.bufferSubData(p,l.offset*s.BYTES_PER_ELEMENT,s,l.offset,l.count):b.bufferSubData(p,l.offset*s.BYTES_PER_ELEMENT,s.subarray(l.offset,l.offset+l.count)),l.count=-1),f.onUploadCallback()}function o(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function i(a){a.isInterleavedBufferAttribute&&(a=a.data);const f=e.get(a);f&&(b.deleteBuffer(f.buffer),e.delete(a))}function n(a,f){if(a.isGLBufferAttribute){const s=e.get(a);(!s||s.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const p=e.get(a);p===void 0?e.set(a,u(a,f)):p.version<a.version&&(d(p.buffer,a,f),p.version=a.version)}return{get:o,remove:i,update:n}}class _l extends pn{constructor(t=1,r=1,e=1,u=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:e,heightSegments:u};const d=t/2,o=r/2,i=Math.floor(e),n=Math.floor(u),a=i+1,f=n+1,p=t/i,s=r/n,l=[],c=[],h=[],m=[];for(let g=0;g<f;g++){const y=g*s-o;for(let _=0;_<a;_++){const x=_*p-d;c.push(x,-y,0),h.push(0,0,1),m.push(_/i),m.push(1-g/n)}}for(let g=0;g<n;g++)for(let y=0;y<i;y++){const _=y+a*g,x=y+a*(g+1),w=y+1+a*(g+1),j=y+1+a*g;l.push(_,x,j),l.push(x,w,j)}this.setIndex(l),this.setAttribute("position",new Un(c,3)),this.setAttribute("normal",new Un(h,3)),this.setAttribute("uv",new Un(m,2))}static fromJSON(t){return new _l(t.width,t.height,t.widthSegments,t.heightSegments)}}var _g=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,xg=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wg=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Sg=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Mg=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Tg=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Eg="vec3 transformed = vec3( position );",jg=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Cg=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Ag=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Lg=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Rg=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Pg=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Dg=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,kg=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ig=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Og=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Ng=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Ug=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Fg=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Bg=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,zg=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gg=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Vg=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Hg=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Wg=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qg="gl_FragColor = linearToOutputTexel( gl_FragColor );",Xg=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Yg=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Zg=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Kg=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Jg=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Qg=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$g=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,e1=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,t1=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,r1=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,n1=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,i1=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,s1=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,o1=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,a1=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,l1=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,c1=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,u1=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,d1=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,h1=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,f1=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,p1=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,m1=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,g1=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,y1=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,v1=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,b1=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_1=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,x1=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,w1=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,S1=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,M1=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,T1=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,E1=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j1=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,C1=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,A1=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,L1=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,R1=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,P1=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,D1=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,k1=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,I1=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,O1=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,N1=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,U1=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,F1=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,B1=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,z1=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,G1=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,V1=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,H1=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,W1=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,q1=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,X1=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Y1=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Z1=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,K1=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,J1=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Q1=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,$1=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,ey=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ty=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ry=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,ny=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,iy=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sy=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oy=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ay=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ly=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cy=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,uy=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,dy=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,hy=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,fy=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,py=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,my=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,gy=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,yy=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vy=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,by=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_y=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xy=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,wy=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sy=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,My=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ty=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Ey=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,jy=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Cy=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ay=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ly=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ry=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Py=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Dy=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ky=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Iy=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Oy=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ny=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uy=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Fy=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,By=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zy=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gy=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Vy=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hy=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wy=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qy=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Xy=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yy=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zy=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ky=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jy=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Dt={alphamap_fragment:_g,alphamap_pars_fragment:xg,alphatest_fragment:wg,alphatest_pars_fragment:Sg,aomap_fragment:Mg,aomap_pars_fragment:Tg,begin_vertex:Eg,beginnormal_vertex:jg,bsdfs:Cg,iridescence_fragment:Ag,bumpmap_pars_fragment:Lg,clipping_planes_fragment:Rg,clipping_planes_pars_fragment:Pg,clipping_planes_pars_vertex:Dg,clipping_planes_vertex:kg,color_fragment:Ig,color_pars_fragment:Og,color_pars_vertex:Ng,color_vertex:Ug,common:Fg,cube_uv_reflection_fragment:Bg,defaultnormal_vertex:zg,displacementmap_pars_vertex:Gg,displacementmap_vertex:Vg,emissivemap_fragment:Hg,emissivemap_pars_fragment:Wg,encodings_fragment:qg,encodings_pars_fragment:Xg,envmap_fragment:Yg,envmap_common_pars_fragment:Zg,envmap_pars_fragment:Kg,envmap_pars_vertex:Jg,envmap_physical_pars_fragment:c1,envmap_vertex:Qg,fog_vertex:$g,fog_pars_vertex:e1,fog_fragment:t1,fog_pars_fragment:r1,gradientmap_pars_fragment:n1,lightmap_fragment:i1,lightmap_pars_fragment:s1,lights_lambert_fragment:o1,lights_lambert_pars_fragment:a1,lights_pars_begin:l1,lights_toon_fragment:u1,lights_toon_pars_fragment:d1,lights_phong_fragment:h1,lights_phong_pars_fragment:f1,lights_physical_fragment:p1,lights_physical_pars_fragment:m1,lights_fragment_begin:g1,lights_fragment_maps:y1,lights_fragment_end:v1,logdepthbuf_fragment:b1,logdepthbuf_pars_fragment:_1,logdepthbuf_pars_vertex:x1,logdepthbuf_vertex:w1,map_fragment:S1,map_pars_fragment:M1,map_particle_fragment:T1,map_particle_pars_fragment:E1,metalnessmap_fragment:j1,metalnessmap_pars_fragment:C1,morphcolor_vertex:A1,morphnormal_vertex:L1,morphtarget_pars_vertex:R1,morphtarget_vertex:P1,normal_fragment_begin:D1,normal_fragment_maps:k1,normal_pars_fragment:I1,normal_pars_vertex:O1,normal_vertex:N1,normalmap_pars_fragment:U1,clearcoat_normal_fragment_begin:F1,clearcoat_normal_fragment_maps:B1,clearcoat_pars_fragment:z1,iridescence_pars_fragment:G1,output_fragment:V1,packing:H1,premultiplied_alpha_fragment:W1,project_vertex:q1,dithering_fragment:X1,dithering_pars_fragment:Y1,roughnessmap_fragment:Z1,roughnessmap_pars_fragment:K1,shadowmap_pars_fragment:J1,shadowmap_pars_vertex:Q1,shadowmap_vertex:$1,shadowmask_pars_fragment:ey,skinbase_vertex:ty,skinning_pars_vertex:ry,skinning_vertex:ny,skinnormal_vertex:iy,specularmap_fragment:sy,specularmap_pars_fragment:oy,tonemapping_fragment:ay,tonemapping_pars_fragment:ly,transmission_fragment:cy,transmission_pars_fragment:uy,uv_pars_fragment:dy,uv_pars_vertex:hy,uv_vertex:fy,uv2_pars_fragment:py,uv2_pars_vertex:my,uv2_vertex:gy,worldpos_vertex:yy,background_vert:vy,background_frag:by,backgroundCube_vert:_y,backgroundCube_frag:xy,cube_vert:wy,cube_frag:Sy,depth_vert:My,depth_frag:Ty,distanceRGBA_vert:Ey,distanceRGBA_frag:jy,equirect_vert:Cy,equirect_frag:Ay,linedashed_vert:Ly,linedashed_frag:Ry,meshbasic_vert:Py,meshbasic_frag:Dy,meshlambert_vert:ky,meshlambert_frag:Iy,meshmatcap_vert:Oy,meshmatcap_frag:Ny,meshnormal_vert:Uy,meshnormal_frag:Fy,meshphong_vert:By,meshphong_frag:zy,meshphysical_vert:Gy,meshphysical_frag:Vy,meshtoon_vert:Hy,meshtoon_frag:Wy,points_vert:qy,points_frag:Xy,shadow_vert:Yy,shadow_frag:Zy,sprite_vert:Ky,sprite_frag:Jy},ct={common:{diffuse:{value:new It(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Jr},uv2Transform:{value:new Jr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new It(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new It(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Jr}},sprite:{diffuse:{value:new It(16777215)},opacity:{value:1},center:{value:new Ct(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Jr}}},bn={basic:{uniforms:Wr([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:Dt.meshbasic_vert,fragmentShader:Dt.meshbasic_frag},lambert:{uniforms:Wr([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new It(0)}}]),vertexShader:Dt.meshlambert_vert,fragmentShader:Dt.meshlambert_frag},phong:{uniforms:Wr([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new It(0)},specular:{value:new It(1118481)},shininess:{value:30}}]),vertexShader:Dt.meshphong_vert,fragmentShader:Dt.meshphong_frag},standard:{uniforms:Wr([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new It(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dt.meshphysical_vert,fragmentShader:Dt.meshphysical_frag},toon:{uniforms:Wr([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new It(0)}}]),vertexShader:Dt.meshtoon_vert,fragmentShader:Dt.meshtoon_frag},matcap:{uniforms:Wr([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:Dt.meshmatcap_vert,fragmentShader:Dt.meshmatcap_frag},points:{uniforms:Wr([ct.points,ct.fog]),vertexShader:Dt.points_vert,fragmentShader:Dt.points_frag},dashed:{uniforms:Wr([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dt.linedashed_vert,fragmentShader:Dt.linedashed_frag},depth:{uniforms:Wr([ct.common,ct.displacementmap]),vertexShader:Dt.depth_vert,fragmentShader:Dt.depth_frag},normal:{uniforms:Wr([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:Dt.meshnormal_vert,fragmentShader:Dt.meshnormal_frag},sprite:{uniforms:Wr([ct.sprite,ct.fog]),vertexShader:Dt.sprite_vert,fragmentShader:Dt.sprite_frag},background:{uniforms:{uvTransform:{value:new Jr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dt.background_vert,fragmentShader:Dt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Dt.backgroundCube_vert,fragmentShader:Dt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dt.cube_vert,fragmentShader:Dt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dt.equirect_vert,fragmentShader:Dt.equirect_frag},distanceRGBA:{uniforms:Wr([ct.common,ct.displacementmap,{referencePosition:{value:new De},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dt.distanceRGBA_vert,fragmentShader:Dt.distanceRGBA_frag},shadow:{uniforms:Wr([ct.lights,ct.fog,{color:{value:new It(0)},opacity:{value:1}}]),vertexShader:Dt.shadow_vert,fragmentShader:Dt.shadow_frag}};bn.physical={uniforms:Wr([bn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ct(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new It(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ct},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new It(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new It(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Dt.meshphysical_vert,fragmentShader:Dt.meshphysical_frag};const Mo={r:0,b:0,g:0};function Qy(b,t,r,e,u,d,o){const i=new It(0);let n=d===!0?0:1,a,f,p=null,s=0,l=null;function c(m,g){let y=!1,_=g.isScene===!0?g.background:null;_&&_.isTexture&&(_=(g.backgroundBlurriness>0?r:t).get(_));const x=b.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(_=null),_===null?h(i,n):_&&_.isColor&&(h(_,1),y=!0),(b.autoClear||y)&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Ho)?(f===void 0&&(f=new rn(new Ys(1,1,1),new _i({name:"BackgroundCubeMaterial",uniforms:os(bn.backgroundCube.uniforms),vertexShader:bn.backgroundCube.vertexShader,fragmentShader:bn.backgroundCube.fragmentShader,side:nn,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(j,E,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),u.update(f)),f.material.uniforms.envMap.value=_,f.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,f.material.toneMapped=_.encoding!==Vt,(p!==_||s!==_.version||l!==b.toneMapping)&&(f.material.needsUpdate=!0,p=_,s=_.version,l=b.toneMapping),f.layers.enableAll(),m.unshift(f,f.geometry,f.material,0,0,null)):_&&_.isTexture&&(a===void 0&&(a=new rn(new _l(2,2),new _i({name:"BackgroundMaterial",uniforms:os(bn.background.uniforms),vertexShader:bn.background.vertexShader,fragmentShader:bn.background.fragmentShader,side:ei,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),u.update(a)),a.material.uniforms.t2D.value=_,a.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,a.material.toneMapped=_.encoding!==Vt,_.matrixAutoUpdate===!0&&_.updateMatrix(),a.material.uniforms.uvTransform.value.copy(_.matrix),(p!==_||s!==_.version||l!==b.toneMapping)&&(a.material.needsUpdate=!0,p=_,s=_.version,l=b.toneMapping),a.layers.enableAll(),m.unshift(a,a.geometry,a.material,0,0,null))}function h(m,g){m.getRGB(Mo,hh(b)),e.buffers.color.setClear(Mo.r,Mo.g,Mo.b,g,o)}return{getClearColor:function(){return i},setClearColor:function(m,g=1){i.set(m),n=g,h(i,n)},getClearAlpha:function(){return n},setClearAlpha:function(m){n=m,h(i,n)},render:c}}function $y(b,t,r,e){const u=b.getParameter(34921),d=e.isWebGL2?null:t.get("OES_vertex_array_object"),o=e.isWebGL2||d!==null,i={},n=m(null);let a=n,f=!1;function p(D,U,Y,H,W){let X=!1;if(o){const Z=h(H,Y,U);a!==Z&&(a=Z,l(a.object)),X=g(D,H,Y,W),X&&y(D,H,Y,W)}else{const Z=U.wireframe===!0;(a.geometry!==H.id||a.program!==Y.id||a.wireframe!==Z)&&(a.geometry=H.id,a.program=Y.id,a.wireframe=Z,X=!0)}W!==null&&r.update(W,34963),(X||f)&&(f=!1,T(D,U,Y,H),W!==null&&b.bindBuffer(34963,r.get(W).buffer))}function s(){return e.isWebGL2?b.createVertexArray():d.createVertexArrayOES()}function l(D){return e.isWebGL2?b.bindVertexArray(D):d.bindVertexArrayOES(D)}function c(D){return e.isWebGL2?b.deleteVertexArray(D):d.deleteVertexArrayOES(D)}function h(D,U,Y){const H=Y.wireframe===!0;let W=i[D.id];W===void 0&&(W={},i[D.id]=W);let X=W[U.id];X===void 0&&(X={},W[U.id]=X);let Z=X[H];return Z===void 0&&(Z=m(s()),X[H]=Z),Z}function m(D){const U=[],Y=[],H=[];for(let W=0;W<u;W++)U[W]=0,Y[W]=0,H[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:Y,attributeDivisors:H,object:D,attributes:{},index:null}}function g(D,U,Y,H){const W=a.attributes,X=U.attributes;let Z=0;const q=Y.getAttributes();for(const ee in q)if(q[ee].location>=0){const I=W[ee];let F=X[ee];if(F===void 0&&(ee==="instanceMatrix"&&D.instanceMatrix&&(F=D.instanceMatrix),ee==="instanceColor"&&D.instanceColor&&(F=D.instanceColor)),I===void 0||I.attribute!==F||F&&I.data!==F.data)return!0;Z++}return a.attributesNum!==Z||a.index!==H}function y(D,U,Y,H){const W={},X=U.attributes;let Z=0;const q=Y.getAttributes();for(const ee in q)if(q[ee].location>=0){let I=X[ee];I===void 0&&(ee==="instanceMatrix"&&D.instanceMatrix&&(I=D.instanceMatrix),ee==="instanceColor"&&D.instanceColor&&(I=D.instanceColor));const F={};F.attribute=I,I&&I.data&&(F.data=I.data),W[ee]=F,Z++}a.attributes=W,a.attributesNum=Z,a.index=H}function _(){const D=a.newAttributes;for(let U=0,Y=D.length;U<Y;U++)D[U]=0}function x(D){w(D,0)}function w(D,U){const Y=a.newAttributes,H=a.enabledAttributes,W=a.attributeDivisors;Y[D]=1,H[D]===0&&(b.enableVertexAttribArray(D),H[D]=1),W[D]!==U&&((e.isWebGL2?b:t.get("ANGLE_instanced_arrays"))[e.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,U),W[D]=U)}function j(){const D=a.newAttributes,U=a.enabledAttributes;for(let Y=0,H=U.length;Y<H;Y++)U[Y]!==D[Y]&&(b.disableVertexAttribArray(Y),U[Y]=0)}function E(D,U,Y,H,W,X){e.isWebGL2===!0&&(Y===5124||Y===5125)?b.vertexAttribIPointer(D,U,Y,W,X):b.vertexAttribPointer(D,U,Y,H,W,X)}function T(D,U,Y,H){if(e.isWebGL2===!1&&(D.isInstancedMesh||H.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;_();const W=H.attributes,X=Y.getAttributes(),Z=U.defaultAttributeValues;for(const q in X){const ee=X[q];if(ee.location>=0){let L=W[q];if(L===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(L=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(L=D.instanceColor)),L!==void 0){const I=L.normalized,F=L.itemSize,V=r.get(L);if(V===void 0)continue;const J=V.buffer,le=V.type,ce=V.bytesPerElement;if(L.isInterleavedBufferAttribute){const ue=L.data,re=ue.stride,de=L.offset;if(ue.isInstancedInterleavedBuffer){for(let be=0;be<ee.locationSize;be++)w(ee.location+be,ue.meshPerAttribute);D.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let be=0;be<ee.locationSize;be++)x(ee.location+be);b.bindBuffer(34962,J);for(let be=0;be<ee.locationSize;be++)E(ee.location+be,F/ee.locationSize,le,I,re*ce,(de+F/ee.locationSize*be)*ce)}else{if(L.isInstancedBufferAttribute){for(let ue=0;ue<ee.locationSize;ue++)w(ee.location+ue,L.meshPerAttribute);D.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=L.meshPerAttribute*L.count)}else for(let ue=0;ue<ee.locationSize;ue++)x(ee.location+ue);b.bindBuffer(34962,J);for(let ue=0;ue<ee.locationSize;ue++)E(ee.location+ue,F/ee.locationSize,le,I,F*ce,F/ee.locationSize*ue*ce)}}else if(Z!==void 0){const I=Z[q];if(I!==void 0)switch(I.length){case 2:b.vertexAttrib2fv(ee.location,I);break;case 3:b.vertexAttrib3fv(ee.location,I);break;case 4:b.vertexAttrib4fv(ee.location,I);break;default:b.vertexAttrib1fv(ee.location,I)}}}}j()}function A(){N();for(const D in i){const U=i[D];for(const Y in U){const H=U[Y];for(const W in H)c(H[W].object),delete H[W];delete U[Y]}delete i[D]}}function R(D){if(i[D.id]===void 0)return;const U=i[D.id];for(const Y in U){const H=U[Y];for(const W in H)c(H[W].object),delete H[W];delete U[Y]}delete i[D.id]}function P(D){for(const U in i){const Y=i[U];if(Y[D.id]===void 0)continue;const H=Y[D.id];for(const W in H)c(H[W].object),delete H[W];delete Y[D.id]}}function N(){O(),f=!0,a!==n&&(a=n,l(a.object))}function O(){n.geometry=null,n.program=null,n.wireframe=!1}return{setup:p,reset:N,resetDefaultState:O,dispose:A,releaseStatesOfGeometry:R,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:x,disableUnusedAttributes:j}}function e0(b,t,r,e){const u=e.isWebGL2;let d;function o(a){d=a}function i(a,f){b.drawArrays(d,a,f),r.update(f,d,1)}function n(a,f,p){if(p===0)return;let s,l;if(u)s=b,l="drawArraysInstanced";else if(s=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",s===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}s[l](d,a,f,p),r.update(f,d,p)}this.setMode=o,this.render=i,this.renderInstances=n}function t0(b,t,r){let e;function u(){if(e!==void 0)return e;if(t.has("EXT_texture_filter_anisotropic")===!0){const E=t.get("EXT_texture_filter_anisotropic");e=b.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else e=0;return e}function d(E){if(E==="highp"){if(b.getShaderPrecisionFormat(35633,36338).precision>0&&b.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&b.getShaderPrecisionFormat(35633,36337).precision>0&&b.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&b instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&b instanceof WebGL2ComputeRenderingContext;let i=r.precision!==void 0?r.precision:"highp";const n=d(i);n!==i&&(console.warn("THREE.WebGLRenderer:",i,"not supported, using",n,"instead."),i=n);const a=o||t.has("WEBGL_draw_buffers"),f=r.logarithmicDepthBuffer===!0,p=b.getParameter(34930),s=b.getParameter(35660),l=b.getParameter(3379),c=b.getParameter(34076),h=b.getParameter(34921),m=b.getParameter(36347),g=b.getParameter(36348),y=b.getParameter(36349),_=s>0,x=o||t.has("OES_texture_float"),w=_&&x,j=o?b.getParameter(36183):0;return{isWebGL2:o,drawBuffers:a,getMaxAnisotropy:u,getMaxPrecision:d,precision:i,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:s,maxTextureSize:l,maxCubemapSize:c,maxAttributes:h,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:j}}function r0(b){const t=this;let r=null,e=0,u=!1,d=!1;const o=new ci,i=new Jr,n={value:null,needsUpdate:!1};this.uniform=n,this.numPlanes=0,this.numIntersection=0,this.init=function(p,s,l){const c=p.length!==0||s||e!==0||u;return u=s,r=f(p,l,0),e=p.length,c},this.beginShadows=function(){d=!0,f(null)},this.endShadows=function(){d=!1,a()},this.setState=function(p,s,l){const c=p.clippingPlanes,h=p.clipIntersection,m=p.clipShadows,g=b.get(p);if(!u||c===null||c.length===0||d&&!m)d?f(null):a();else{const y=d?0:e,_=y*4;let x=g.clippingState||null;n.value=x,x=f(c,s,_,l);for(let w=0;w!==_;++w)x[w]=r[w];g.clippingState=x,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=y}};function a(){n.value!==r&&(n.value=r,n.needsUpdate=e>0),t.numPlanes=e,t.numIntersection=0}function f(p,s,l,c){const h=p!==null?p.length:0;let m=null;if(h!==0){if(m=n.value,c!==!0||m===null){const g=l+h*4,y=s.matrixWorldInverse;i.getNormalMatrix(y),(m===null||m.length<g)&&(m=new Float32Array(g));for(let _=0,x=l;_!==h;++_,x+=4)o.copy(p[_]).applyMatrix4(y,i),o.normal.toArray(m,x),m[x+3]=o.constant}n.value=m,n.needsUpdate=!0}return t.numPlanes=h,t.numIntersection=0,m}}function n0(b){let t=new WeakMap;function r(o,i){return i===Bo?o.mapping=ts:i===qa&&(o.mapping=rs),o}function e(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const i=o.mapping;if(i===Bo||i===qa)if(t.has(o)){const n=t.get(o).texture;return r(n,o.mapping)}else{const n=o.image;if(n&&n.height>0){const a=new gg(n.height/2);return a.fromEquirectangularTexture(b,o),t.set(o,a),o.addEventListener("dispose",u),r(a.texture,o.mapping)}else return null}}return o}function u(o){const i=o.target;i.removeEventListener("dispose",u);const n=t.get(i);n!==void 0&&(t.delete(i),n.dispose())}function d(){t=new WeakMap}return{get:e,dispose:d}}class xl extends fh{constructor(t=-1,r=1,e=1,u=-1,d=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=r,this.top=e,this.bottom=u,this.near=d,this.far=o,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,r,e,u,d,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=e,this.view.offsetY=u,this.view.width=d,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),e=(this.right+this.left)/2,u=(this.top+this.bottom)/2;let d=e-t,o=e+t,i=u+r,n=u-r;if(this.view!==null&&this.view.enabled){const a=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=a*this.view.offsetX,o=d+a*this.view.width,i-=f*this.view.offsetY,n=i-f*this.view.height}this.projectionMatrix.makeOrthographic(d,o,i,n,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}const Xi=4,Su=[.125,.215,.35,.446,.526,.582],di=20,ja=new xl,Mu=new It;let Ca=null;const ui=(1+Math.sqrt(5))/2,Hi=1/ui,Tu=[new De(1,1,1),new De(-1,1,1),new De(1,1,-1),new De(-1,1,-1),new De(0,ui,Hi),new De(0,ui,-Hi),new De(Hi,0,ui),new De(-Hi,0,ui),new De(ui,Hi,0),new De(-ui,Hi,0)];class Eu{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,e=.1,u=100){Ca=this._renderer.getRenderTarget(),this._setSize(256);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,e,u,d),r>0&&this._blur(d,0,0,r),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,r=null){return this._fromTexture(t,r)}fromCubemap(t,r=null){return this._fromTexture(t,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Au(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Cu(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Ca),t.scissorTest=!1,To(t,0,0,t.width,t.height)}_fromTexture(t,r){t.mapping===ts||t.mapping===rs?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Ca=this._renderer.getRenderTarget();const e=r||this._allocateTargets();return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,e={magFilter:Mr,minFilter:Mr,generateMipmaps:!1,type:In,format:tn,encoding:ri,depthBuffer:!1},u=ju(t,r,e);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ju(t,r,e);const{_lodMax:d}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=i0(d)),this._blurMaterial=s0(d,t,r)}return u}_compileMaterial(t){const r=new rn(this._lodPlanes[0],t);this._renderer.compile(r,ja)}_sceneToCubeUV(t,r,e,u){const i=new qr(90,1,r,e),n=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,s=f.toneMapping;f.getClearColor(Mu),f.toneMapping=_n,f.autoClear=!1;const l=new fi({name:"PMREM.Background",side:nn,depthWrite:!1,depthTest:!1}),c=new rn(new Ys,l);let h=!1;const m=t.background;m?m.isColor&&(l.color.copy(m),t.background=null,h=!0):(l.color.copy(Mu),h=!0);for(let g=0;g<6;g++){const y=g%3;y===0?(i.up.set(0,n[g],0),i.lookAt(a[g],0,0)):y===1?(i.up.set(0,0,n[g]),i.lookAt(0,a[g],0)):(i.up.set(0,n[g],0),i.lookAt(0,0,a[g]));const _=this._cubeSize;To(u,y*_,g>2?_:0,_,_),f.setRenderTarget(u),h&&f.render(c,i),f.render(t,i)}c.geometry.dispose(),c.material.dispose(),f.toneMapping=s,f.autoClear=p,t.background=m}_textureToCubeUV(t,r){const e=this._renderer,u=t.mapping===ts||t.mapping===rs;u?(this._cubemapMaterial===null&&(this._cubemapMaterial=Au()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Cu());const d=u?this._cubemapMaterial:this._equirectMaterial,o=new rn(this._lodPlanes[0],d),i=d.uniforms;i.envMap.value=t;const n=this._cubeSize;To(r,0,0,3*n,2*n),e.setRenderTarget(r),e.render(o,ja)}_applyPMREM(t){const r=this._renderer,e=r.autoClear;r.autoClear=!1;for(let u=1;u<this._lodPlanes.length;u++){const d=Math.sqrt(this._sigmas[u]*this._sigmas[u]-this._sigmas[u-1]*this._sigmas[u-1]),o=Tu[(u-1)%Tu.length];this._blur(t,u-1,u,d,o)}r.autoClear=e}_blur(t,r,e,u,d){const o=this._pingPongRenderTarget;this._halfBlur(t,o,r,e,u,"latitudinal",d),this._halfBlur(o,t,e,e,u,"longitudinal",d)}_halfBlur(t,r,e,u,d,o,i){const n=this._renderer,a=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new rn(this._lodPlanes[u],a),s=a.uniforms,l=this._sizeLods[e]-1,c=isFinite(d)?Math.PI/(2*l):2*Math.PI/(2*di-1),h=d/c,m=isFinite(d)?1+Math.floor(f*h):di;m>di&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${di}`);const g=[];let y=0;for(let E=0;E<di;++E){const T=E/h,A=Math.exp(-T*T/2);g.push(A),E===0?y+=A:E<m&&(y+=2*A)}for(let E=0;E<g.length;E++)g[E]=g[E]/y;s.envMap.value=t.texture,s.samples.value=m,s.weights.value=g,s.latitudinal.value=o==="latitudinal",i&&(s.poleAxis.value=i);const{_lodMax:_}=this;s.dTheta.value=c,s.mipInt.value=_-e;const x=this._sizeLods[u],w=3*x*(u>_-Xi?u-_+Xi:0),j=4*(this._cubeSize-x);To(r,w,j,3*x,2*x),n.setRenderTarget(r),n.render(p,ja)}}function i0(b){const t=[],r=[],e=[];let u=b;const d=b-Xi+1+Su.length;for(let o=0;o<d;o++){const i=Math.pow(2,u);r.push(i);let n=1/i;o>b-Xi?n=Su[o-b+Xi-1]:o===0&&(n=0),e.push(n);const a=1/(i-2),f=-a,p=1+a,s=[f,f,p,f,p,p,f,f,p,p,f,p],l=6,c=6,h=3,m=2,g=1,y=new Float32Array(h*c*l),_=new Float32Array(m*c*l),x=new Float32Array(g*c*l);for(let j=0;j<l;j++){const E=j%3*2/3-1,T=j>2?0:-1,A=[E,T,0,E+2/3,T,0,E+2/3,T+1,0,E,T,0,E+2/3,T+1,0,E,T+1,0];y.set(A,h*c*j),_.set(s,m*c*j);const R=[j,j,j,j,j,j];x.set(R,g*c*j)}const w=new pn;w.setAttribute("position",new Xr(y,h)),w.setAttribute("uv",new Xr(_,m)),w.setAttribute("faceIndex",new Xr(x,g)),t.push(w),u>Xi&&u--}return{lodPlanes:t,sizeLods:r,sigmas:e}}function ju(b,t,r){const e=new bi(b,t,r);return e.texture.mapping=Ho,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function To(b,t,r,e,u){b.viewport.set(t,r,e,u),b.scissor.set(t,r,e,u)}function s0(b,t,r){const e=new Float32Array(di),u=new De(0,1,0);return new _i({name:"SphericalGaussianBlur",defines:{n:di,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${b}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:u}},vertexShader:wl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$n,depthTest:!1,depthWrite:!1})}function Cu(){return new _i({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$n,depthTest:!1,depthWrite:!1})}function Au(){return new _i({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$n,depthTest:!1,depthWrite:!1})}function wl(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function o0(b){let t=new WeakMap,r=null;function e(i){if(i&&i.isTexture){const n=i.mapping,a=n===Bo||n===qa,f=n===ts||n===rs;if(a||f)if(i.isRenderTargetTexture&&i.needsPMREMUpdate===!0){i.needsPMREMUpdate=!1;let p=t.get(i);return r===null&&(r=new Eu(b)),p=a?r.fromEquirectangular(i,p):r.fromCubemap(i,p),t.set(i,p),p.texture}else{if(t.has(i))return t.get(i).texture;{const p=i.image;if(a&&p&&p.height>0||f&&p&&u(p)){r===null&&(r=new Eu(b));const s=a?r.fromEquirectangular(i):r.fromCubemap(i);return t.set(i,s),i.addEventListener("dispose",d),s.texture}else return null}}}return i}function u(i){let n=0;const a=6;for(let f=0;f<a;f++)i[f]!==void 0&&n++;return n===a}function d(i){const n=i.target;n.removeEventListener("dispose",d);const a=t.get(n);a!==void 0&&(t.delete(n),a.dispose())}function o(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:e,dispose:o}}function a0(b){const t={};function r(e){if(t[e]!==void 0)return t[e];let u;switch(e){case"WEBGL_depth_texture":u=b.getExtension("WEBGL_depth_texture")||b.getExtension("MOZ_WEBGL_depth_texture")||b.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":u=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":u=b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":u=b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:u=b.getExtension(e)}return t[e]=u,u}return{has:function(e){return r(e)!==null},init:function(e){e.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(e){const u=r(e);return u===null&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),u}}}function l0(b,t,r,e){const u={},d=new WeakMap;function o(p){const s=p.target;s.index!==null&&t.remove(s.index);for(const c in s.attributes)t.remove(s.attributes[c]);s.removeEventListener("dispose",o),delete u[s.id];const l=d.get(s);l&&(t.remove(l),d.delete(s)),e.releaseStatesOfGeometry(s),s.isInstancedBufferGeometry===!0&&delete s._maxInstanceCount,r.memory.geometries--}function i(p,s){return u[s.id]===!0||(s.addEventListener("dispose",o),u[s.id]=!0,r.memory.geometries++),s}function n(p){const s=p.attributes;for(const c in s)t.update(s[c],34962);const l=p.morphAttributes;for(const c in l){const h=l[c];for(let m=0,g=h.length;m<g;m++)t.update(h[m],34962)}}function a(p){const s=[],l=p.index,c=p.attributes.position;let h=0;if(l!==null){const y=l.array;h=l.version;for(let _=0,x=y.length;_<x;_+=3){const w=y[_+0],j=y[_+1],E=y[_+2];s.push(w,j,j,E,E,w)}}else{const y=c.array;h=c.version;for(let _=0,x=y.length/3-1;_<x;_+=3){const w=_+0,j=_+1,E=_+2;s.push(w,j,j,E,E,w)}}const m=new(ih(s)?dh:uh)(s,1);m.version=h;const g=d.get(p);g&&t.remove(g),d.set(p,m)}function f(p){const s=d.get(p);if(s){const l=p.index;l!==null&&s.version<l.version&&a(p)}else a(p);return d.get(p)}return{get:i,update:n,getWireframeAttribute:f}}function c0(b,t,r,e){const u=e.isWebGL2;let d;function o(s){d=s}let i,n;function a(s){i=s.type,n=s.bytesPerElement}function f(s,l){b.drawElements(d,l,i,s*n),r.update(l,d,1)}function p(s,l,c){if(c===0)return;let h,m;if(u)h=b,m="drawElementsInstanced";else if(h=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",h===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](d,l,i,s*n,c),r.update(l,d,c)}this.setMode=o,this.setIndex=a,this.render=f,this.renderInstances=p}function u0(b){const t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function e(d,o,i){switch(r.calls++,o){case 4:r.triangles+=i*(d/3);break;case 1:r.lines+=i*(d/2);break;case 3:r.lines+=i*(d-1);break;case 2:r.lines+=i*d;break;case 0:r.points+=i*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function u(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:u,update:e}}function d0(b,t){return b[0]-t[0]}function h0(b,t){return Math.abs(t[1])-Math.abs(b[1])}function f0(b,t,r){const e={},u=new Float32Array(8),d=new WeakMap,o=new tr,i=[];for(let a=0;a<8;a++)i[a]=[a,0];function n(a,f,p,s){const l=a.morphTargetInfluences;if(t.isWebGL2===!0){const h=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,m=h!==void 0?h.length:0;let g=d.get(f);if(g===void 0||g.count!==m){let Y=function(){D.dispose(),d.delete(f),f.removeEventListener("dispose",Y)};var c=Y;g!==void 0&&g.texture.dispose();const x=f.morphAttributes.position!==void 0,w=f.morphAttributes.normal!==void 0,j=f.morphAttributes.color!==void 0,E=f.morphAttributes.position||[],T=f.morphAttributes.normal||[],A=f.morphAttributes.color||[];let R=0;x===!0&&(R=1),w===!0&&(R=2),j===!0&&(R=3);let P=f.attributes.position.count*R,N=1;P>t.maxTextureSize&&(N=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const O=new Float32Array(P*N*4*m),D=new lh(O,P,N,m);D.type=un,D.needsUpdate=!0;const U=R*4;for(let H=0;H<m;H++){const W=E[H],X=T[H],Z=A[H],q=P*N*4*H;for(let ee=0;ee<W.count;ee++){const L=ee*U;x===!0&&(o.fromBufferAttribute(W,ee),O[q+L+0]=o.x,O[q+L+1]=o.y,O[q+L+2]=o.z,O[q+L+3]=0),w===!0&&(o.fromBufferAttribute(X,ee),O[q+L+4]=o.x,O[q+L+5]=o.y,O[q+L+6]=o.z,O[q+L+7]=0),j===!0&&(o.fromBufferAttribute(Z,ee),O[q+L+8]=o.x,O[q+L+9]=o.y,O[q+L+10]=o.z,O[q+L+11]=Z.itemSize===4?o.w:1)}}g={count:m,texture:D,size:new Ct(P,N)},d.set(f,g),f.addEventListener("dispose",Y)}let y=0;for(let x=0;x<l.length;x++)y+=l[x];const _=f.morphTargetsRelative?1:1-y;s.getUniforms().setValue(b,"morphTargetBaseInfluence",_),s.getUniforms().setValue(b,"morphTargetInfluences",l),s.getUniforms().setValue(b,"morphTargetsTexture",g.texture,r),s.getUniforms().setValue(b,"morphTargetsTextureSize",g.size)}else{const h=l===void 0?0:l.length;let m=e[f.id];if(m===void 0||m.length!==h){m=[];for(let w=0;w<h;w++)m[w]=[w,0];e[f.id]=m}for(let w=0;w<h;w++){const j=m[w];j[0]=w,j[1]=l[w]}m.sort(h0);for(let w=0;w<8;w++)w<h&&m[w][1]?(i[w][0]=m[w][0],i[w][1]=m[w][1]):(i[w][0]=Number.MAX_SAFE_INTEGER,i[w][1]=0);i.sort(d0);const g=f.morphAttributes.position,y=f.morphAttributes.normal;let _=0;for(let w=0;w<8;w++){const j=i[w],E=j[0],T=j[1];E!==Number.MAX_SAFE_INTEGER&&T?(g&&f.getAttribute("morphTarget"+w)!==g[E]&&f.setAttribute("morphTarget"+w,g[E]),y&&f.getAttribute("morphNormal"+w)!==y[E]&&f.setAttribute("morphNormal"+w,y[E]),u[w]=T,_+=T):(g&&f.hasAttribute("morphTarget"+w)===!0&&f.deleteAttribute("morphTarget"+w),y&&f.hasAttribute("morphNormal"+w)===!0&&f.deleteAttribute("morphNormal"+w),u[w]=0)}const x=f.morphTargetsRelative?1:1-_;s.getUniforms().setValue(b,"morphTargetBaseInfluence",x),s.getUniforms().setValue(b,"morphTargetInfluences",u)}}return{update:n}}function p0(b,t,r,e){let u=new WeakMap;function d(n){const a=e.render.frame,f=n.geometry,p=t.get(n,f);return u.get(p)!==a&&(t.update(p),u.set(p,a)),n.isInstancedMesh&&(n.hasEventListener("dispose",i)===!1&&n.addEventListener("dispose",i),r.update(n.instanceMatrix,34962),n.instanceColor!==null&&r.update(n.instanceColor,34962)),p}function o(){u=new WeakMap}function i(n){const a=n.target;a.removeEventListener("dispose",i),r.remove(a.instanceMatrix),a.instanceColor!==null&&r.remove(a.instanceColor)}return{update:d,dispose:o}}const gh=new Ir,yh=new lh,vh=new eg,bh=new ph,Lu=[],Ru=[],Pu=new Float32Array(16),Du=new Float32Array(9),ku=new Float32Array(4);function us(b,t,r){const e=b[0];if(e<=0||e>0)return b;const u=t*r;let d=Lu[u];if(d===void 0&&(d=new Float32Array(u),Lu[u]=d),t!==0){e.toArray(d,0);for(let o=1,i=0;o!==t;++o)i+=r,b[o].toArray(d,i)}return d}function Tr(b,t){if(b.length!==t.length)return!1;for(let r=0,e=b.length;r<e;r++)if(b[r]!==t[r])return!1;return!0}function Er(b,t){for(let r=0,e=t.length;r<e;r++)b[r]=t[r]}function Wo(b,t){let r=Ru[t];r===void 0&&(r=new Int32Array(t),Ru[t]=r);for(let e=0;e!==t;++e)r[e]=b.allocateTextureUnit();return r}function m0(b,t){const r=this.cache;r[0]!==t&&(b.uniform1f(this.addr,t),r[0]=t)}function g0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(b.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Tr(r,t))return;b.uniform2fv(this.addr,t),Er(r,t)}}function y0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(b.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(b.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Tr(r,t))return;b.uniform3fv(this.addr,t),Er(r,t)}}function v0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(b.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Tr(r,t))return;b.uniform4fv(this.addr,t),Er(r,t)}}function b0(b,t){const r=this.cache,e=t.elements;if(e===void 0){if(Tr(r,t))return;b.uniformMatrix2fv(this.addr,!1,t),Er(r,t)}else{if(Tr(r,e))return;ku.set(e),b.uniformMatrix2fv(this.addr,!1,ku),Er(r,e)}}function _0(b,t){const r=this.cache,e=t.elements;if(e===void 0){if(Tr(r,t))return;b.uniformMatrix3fv(this.addr,!1,t),Er(r,t)}else{if(Tr(r,e))return;Du.set(e),b.uniformMatrix3fv(this.addr,!1,Du),Er(r,e)}}function x0(b,t){const r=this.cache,e=t.elements;if(e===void 0){if(Tr(r,t))return;b.uniformMatrix4fv(this.addr,!1,t),Er(r,t)}else{if(Tr(r,e))return;Pu.set(e),b.uniformMatrix4fv(this.addr,!1,Pu),Er(r,e)}}function w0(b,t){const r=this.cache;r[0]!==t&&(b.uniform1i(this.addr,t),r[0]=t)}function S0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(b.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Tr(r,t))return;b.uniform2iv(this.addr,t),Er(r,t)}}function M0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(b.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Tr(r,t))return;b.uniform3iv(this.addr,t),Er(r,t)}}function T0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(b.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Tr(r,t))return;b.uniform4iv(this.addr,t),Er(r,t)}}function E0(b,t){const r=this.cache;r[0]!==t&&(b.uniform1ui(this.addr,t),r[0]=t)}function j0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(b.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Tr(r,t))return;b.uniform2uiv(this.addr,t),Er(r,t)}}function C0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(b.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Tr(r,t))return;b.uniform3uiv(this.addr,t),Er(r,t)}}function A0(b,t){const r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(b.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Tr(r,t))return;b.uniform4uiv(this.addr,t),Er(r,t)}}function L0(b,t,r){const e=this.cache,u=r.allocateTextureUnit();e[0]!==u&&(b.uniform1i(this.addr,u),e[0]=u),r.setTexture2D(t||gh,u)}function R0(b,t,r){const e=this.cache,u=r.allocateTextureUnit();e[0]!==u&&(b.uniform1i(this.addr,u),e[0]=u),r.setTexture3D(t||vh,u)}function P0(b,t,r){const e=this.cache,u=r.allocateTextureUnit();e[0]!==u&&(b.uniform1i(this.addr,u),e[0]=u),r.setTextureCube(t||bh,u)}function D0(b,t,r){const e=this.cache,u=r.allocateTextureUnit();e[0]!==u&&(b.uniform1i(this.addr,u),e[0]=u),r.setTexture2DArray(t||yh,u)}function k0(b){switch(b){case 5126:return m0;case 35664:return g0;case 35665:return y0;case 35666:return v0;case 35674:return b0;case 35675:return _0;case 35676:return x0;case 5124:case 35670:return w0;case 35667:case 35671:return S0;case 35668:case 35672:return M0;case 35669:case 35673:return T0;case 5125:return E0;case 36294:return j0;case 36295:return C0;case 36296:return A0;case 35678:case 36198:case 36298:case 36306:case 35682:return L0;case 35679:case 36299:case 36307:return R0;case 35680:case 36300:case 36308:case 36293:return P0;case 36289:case 36303:case 36311:case 36292:return D0}}function I0(b,t){b.uniform1fv(this.addr,t)}function O0(b,t){const r=us(t,this.size,2);b.uniform2fv(this.addr,r)}function N0(b,t){const r=us(t,this.size,3);b.uniform3fv(this.addr,r)}function U0(b,t){const r=us(t,this.size,4);b.uniform4fv(this.addr,r)}function F0(b,t){const r=us(t,this.size,4);b.uniformMatrix2fv(this.addr,!1,r)}function B0(b,t){const r=us(t,this.size,9);b.uniformMatrix3fv(this.addr,!1,r)}function z0(b,t){const r=us(t,this.size,16);b.uniformMatrix4fv(this.addr,!1,r)}function G0(b,t){b.uniform1iv(this.addr,t)}function V0(b,t){b.uniform2iv(this.addr,t)}function H0(b,t){b.uniform3iv(this.addr,t)}function W0(b,t){b.uniform4iv(this.addr,t)}function q0(b,t){b.uniform1uiv(this.addr,t)}function X0(b,t){b.uniform2uiv(this.addr,t)}function Y0(b,t){b.uniform3uiv(this.addr,t)}function Z0(b,t){b.uniform4uiv(this.addr,t)}function K0(b,t,r){const e=this.cache,u=t.length,d=Wo(r,u);Tr(e,d)||(b.uniform1iv(this.addr,d),Er(e,d));for(let o=0;o!==u;++o)r.setTexture2D(t[o]||gh,d[o])}function J0(b,t,r){const e=this.cache,u=t.length,d=Wo(r,u);Tr(e,d)||(b.uniform1iv(this.addr,d),Er(e,d));for(let o=0;o!==u;++o)r.setTexture3D(t[o]||vh,d[o])}function Q0(b,t,r){const e=this.cache,u=t.length,d=Wo(r,u);Tr(e,d)||(b.uniform1iv(this.addr,d),Er(e,d));for(let o=0;o!==u;++o)r.setTextureCube(t[o]||bh,d[o])}function $0(b,t,r){const e=this.cache,u=t.length,d=Wo(r,u);Tr(e,d)||(b.uniform1iv(this.addr,d),Er(e,d));for(let o=0;o!==u;++o)r.setTexture2DArray(t[o]||yh,d[o])}function ev(b){switch(b){case 5126:return I0;case 35664:return O0;case 35665:return N0;case 35666:return U0;case 35674:return F0;case 35675:return B0;case 35676:return z0;case 5124:case 35670:return G0;case 35667:case 35671:return V0;case 35668:case 35672:return H0;case 35669:case 35673:return W0;case 5125:return q0;case 36294:return X0;case 36295:return Y0;case 36296:return Z0;case 35678:case 36198:case 36298:case 36306:case 35682:return K0;case 35679:case 36299:case 36307:return J0;case 35680:case 36300:case 36308:case 36293:return Q0;case 36289:case 36303:case 36311:case 36292:return $0}}class tv{constructor(t,r,e){this.id=t,this.addr=e,this.cache=[],this.setValue=k0(r.type)}}class rv{constructor(t,r,e){this.id=t,this.addr=e,this.cache=[],this.size=r.size,this.setValue=ev(r.type)}}class nv{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,r,e){const u=this.seq;for(let d=0,o=u.length;d!==o;++d){const i=u[d];i.setValue(t,r[i.id],e)}}}const Aa=/(\w+)(\])?(\[|\.)?/g;function Iu(b,t){b.seq.push(t),b.map[t.id]=t}function iv(b,t,r){const e=b.name,u=e.length;for(Aa.lastIndex=0;;){const d=Aa.exec(e),o=Aa.lastIndex;let i=d[1];const n=d[2]==="]",a=d[3];if(n&&(i=i|0),a===void 0||a==="["&&o+2===u){Iu(r,a===void 0?new tv(i,b,t):new rv(i,b,t));break}else{let p=r.map[i];p===void 0&&(p=new nv(i),Iu(r,p)),r=p}}}class Oo{constructor(t,r){this.seq=[],this.map={};const e=t.getProgramParameter(r,35718);for(let u=0;u<e;++u){const d=t.getActiveUniform(r,u),o=t.getUniformLocation(r,d.name);iv(d,o,this)}}setValue(t,r,e,u){const d=this.map[r];d!==void 0&&d.setValue(t,e,u)}setOptional(t,r,e){const u=r[e];u!==void 0&&this.setValue(t,e,u)}static upload(t,r,e,u){for(let d=0,o=r.length;d!==o;++d){const i=r[d],n=e[i.id];n.needsUpdate!==!1&&i.setValue(t,n.value,u)}}static seqWithValue(t,r){const e=[];for(let u=0,d=t.length;u!==d;++u){const o=t[u];o.id in r&&e.push(o)}return e}}function Ou(b,t,r){const e=b.createShader(t);return b.shaderSource(e,r),b.compileShader(e),e}let sv=0;function ov(b,t){const r=b.split(`
`),e=[],u=Math.max(t-6,0),d=Math.min(t+6,r.length);for(let o=u;o<d;o++){const i=o+1;e.push(`${i===t?">":" "} ${i}: ${r[o]}`)}return e.join(`
`)}function av(b){switch(b){case ri:return["Linear","( value )"];case Vt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",b),["Linear","( value )"]}}function Nu(b,t,r){const e=b.getShaderParameter(t,35713),u=b.getShaderInfoLog(t).trim();if(e&&u==="")return"";const d=/ERROR: 0:(\d+)/.exec(u);if(d){const o=parseInt(d[1]);return r.toUpperCase()+`

`+u+`

`+ov(b.getShaderSource(t),o)}else return u}function lv(b,t){const r=av(t);return"vec4 "+b+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function cv(b,t){let r;switch(t){case Qd:r="Linear";break;case pm:r="Reinhard";break;case mm:r="OptimizedCineon";break;case gm:r="ACESFilmic";break;case ym:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+b+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function uv(b){return[b.extensionDerivatives||b.envMapCubeUVHeight||b.bumpMap||b.tangentSpaceNormalMap||b.clearcoatNormalMap||b.flatShading||b.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(b.extensionFragDepth||b.logarithmicDepthBuffer)&&b.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",b.extensionDrawBuffers&&b.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(b.extensionShaderTextureLOD||b.envMap||b.transmission)&&b.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ds).join(`
`)}function dv(b){const t=[];for(const r in b){const e=b[r];e!==!1&&t.push("#define "+r+" "+e)}return t.join(`
`)}function hv(b,t){const r={},e=b.getProgramParameter(t,35721);for(let u=0;u<e;u++){const d=b.getActiveAttrib(t,u),o=d.name;let i=1;d.type===35674&&(i=2),d.type===35675&&(i=3),d.type===35676&&(i=4),r[o]={type:d.type,location:b.getAttribLocation(t,o),locationSize:i}}return r}function Ds(b){return b!==""}function Uu(b,t){const r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return b.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Fu(b,t){return b.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const fv=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ja(b){return b.replace(fv,pv)}function pv(b,t){const r=Dt[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return Ja(r)}const mv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Bu(b){return b.replace(mv,gv)}function gv(b,t,r,e){let u="";for(let d=parseInt(t);d<parseInt(r);d++)u+=e.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return u}function zu(b){let t="precision "+b.precision+` float;
precision `+b.precision+" int;";return b.precision==="highp"?t+=`
#define HIGH_PRECISION`:b.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:b.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function yv(b){let t="SHADOWMAP_TYPE_BASIC";return b.shadowMapType===ml?t="SHADOWMAP_TYPE_PCF":b.shadowMapType===qp?t="SHADOWMAP_TYPE_PCF_SOFT":b.shadowMapType===Ps&&(t="SHADOWMAP_TYPE_VSM"),t}function vv(b){let t="ENVMAP_TYPE_CUBE";if(b.envMap)switch(b.envMapMode){case ts:case rs:t="ENVMAP_TYPE_CUBE";break;case Ho:t="ENVMAP_TYPE_CUBE_UV";break}return t}function bv(b){let t="ENVMAP_MODE_REFLECTION";if(b.envMap)switch(b.envMapMode){case rs:t="ENVMAP_MODE_REFRACTION";break}return t}function _v(b){let t="ENVMAP_BLENDING_NONE";if(b.envMap)switch(b.combine){case Jd:t="ENVMAP_BLENDING_MULTIPLY";break;case hm:t="ENVMAP_BLENDING_MIX";break;case fm:t="ENVMAP_BLENDING_ADD";break}return t}function xv(b){const t=b.envMapCubeUVHeight;if(t===null)return null;const r=Math.log2(t)-2,e=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:e,maxMip:r}}function wv(b,t,r,e){const u=b.getContext(),d=r.defines;let o=r.vertexShader,i=r.fragmentShader;const n=yv(r),a=vv(r),f=bv(r),p=_v(r),s=xv(r),l=r.isWebGL2?"":uv(r),c=dv(d),h=u.createProgram();let m,g,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=[c].filter(Ds).join(`
`),m.length>0&&(m+=`
`),g=[l,c].filter(Ds).join(`
`),g.length>0&&(g+=`
`)):(m=[zu(r),"#define SHADER_NAME "+r.shaderName,c,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+n:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ds).join(`
`),g=[l,zu(r),"#define SHADER_NAME "+r.shaderName,c,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+a:"",r.envMap?"#define "+f:"",r.envMap?"#define "+p:"",s?"#define CUBEUV_TEXEL_WIDTH "+s.texelWidth:"",s?"#define CUBEUV_TEXEL_HEIGHT "+s.texelHeight:"",s?"#define CUBEUV_MAX_MIP "+s.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+n:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==_n?"#define TONE_MAPPING":"",r.toneMapping!==_n?Dt.tonemapping_pars_fragment:"",r.toneMapping!==_n?cv("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Dt.encodings_pars_fragment,lv("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Ds).join(`
`)),o=Ja(o),o=Uu(o,r),o=Fu(o,r),i=Ja(i),i=Uu(i,r),i=Fu(i,r),o=Bu(o),i=Bu(i),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",r.glslVersion===du?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===du?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=y+m+o,x=y+g+i,w=Ou(u,35633,_),j=Ou(u,35632,x);if(u.attachShader(h,w),u.attachShader(h,j),r.index0AttributeName!==void 0?u.bindAttribLocation(h,0,r.index0AttributeName):r.morphTargets===!0&&u.bindAttribLocation(h,0,"position"),u.linkProgram(h),b.debug.checkShaderErrors){const A=u.getProgramInfoLog(h).trim(),R=u.getShaderInfoLog(w).trim(),P=u.getShaderInfoLog(j).trim();let N=!0,O=!0;if(u.getProgramParameter(h,35714)===!1){N=!1;const D=Nu(u,w,"vertex"),U=Nu(u,j,"fragment");console.error("THREE.WebGLProgram: Shader Error "+u.getError()+" - VALIDATE_STATUS "+u.getProgramParameter(h,35715)+`

Program Info Log: `+A+`
`+D+`
`+U)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(R===""||P==="")&&(O=!1);O&&(this.diagnostics={runnable:N,programLog:A,vertexShader:{log:R,prefix:m},fragmentShader:{log:P,prefix:g}})}u.deleteShader(w),u.deleteShader(j);let E;this.getUniforms=function(){return E===void 0&&(E=new Oo(u,h)),E};let T;return this.getAttributes=function(){return T===void 0&&(T=hv(u,h)),T},this.destroy=function(){e.releaseStatesOfProgram(this),u.deleteProgram(h),this.program=void 0},this.name=r.shaderName,this.id=sv++,this.cacheKey=t,this.usedTimes=1,this.program=h,this.vertexShader=w,this.fragmentShader=j,this}let Sv=0;class Mv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const r=t.vertexShader,e=t.fragmentShader,u=this._getShaderStage(r),d=this._getShaderStage(e),o=this._getShaderCacheForMaterial(t);return o.has(u)===!1&&(o.add(u),u.usedTimes++),o.has(d)===!1&&(o.add(d),d.usedTimes++),this}remove(t){const r=this.materialCache.get(t);for(const e of r)e.usedTimes--,e.usedTimes===0&&this.shaderCache.delete(e.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const r=this.materialCache;let e=r.get(t);return e===void 0&&(e=new Set,r.set(t,e)),e}_getShaderStage(t){const r=this.shaderCache;let e=r.get(t);return e===void 0&&(e=new Tv(t),r.set(t,e)),e}}class Tv{constructor(t){this.id=Sv++,this.code=t,this.usedTimes=0}}function Ev(b,t,r,e,u,d,o){const i=new ch,n=new Mv,a=[],f=u.isWebGL2,p=u.logarithmicDepthBuffer,s=u.vertexTextures;let l=u.precision;const c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function h(T,A,R,P,N){const O=P.fog,D=N.geometry,U=T.isMeshStandardMaterial?P.environment:null,Y=(T.isMeshStandardMaterial?r:t).get(T.envMap||U),H=Y&&Y.mapping===Ho?Y.image.height:null,W=c[T.type];T.precision!==null&&(l=u.getMaxPrecision(T.precision),l!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",l,"instead."));const X=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,Z=X!==void 0?X.length:0;let q=0;D.morphAttributes.position!==void 0&&(q=1),D.morphAttributes.normal!==void 0&&(q=2),D.morphAttributes.color!==void 0&&(q=3);let ee,L,I,F;if(W){const re=bn[W];ee=re.vertexShader,L=re.fragmentShader}else ee=T.vertexShader,L=T.fragmentShader,n.update(T),I=n.getVertexShaderID(T),F=n.getFragmentShaderID(T);const V=b.getRenderTarget(),J=T.alphaTest>0,le=T.clearcoat>0,ce=T.iridescence>0;return{isWebGL2:f,shaderID:W,shaderName:T.type,vertexShader:ee,fragmentShader:L,defines:T.defines,customVertexShaderID:I,customFragmentShaderID:F,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:l,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:s,outputEncoding:V===null?b.outputEncoding:V.isXRRenderTarget===!0?V.texture.encoding:ri,map:!!T.map,matcap:!!T.matcap,envMap:!!Y,envMapMode:Y&&Y.mapping,envMapCubeUVHeight:H,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===Nm,tangentSpaceNormalMap:T.normalMapType===gl,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===Vt,clearcoat:le,clearcoatMap:le&&!!T.clearcoatMap,clearcoatRoughnessMap:le&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:le&&!!T.clearcoatNormalMap,iridescence:ce,iridescenceMap:ce&&!!T.iridescenceMap,iridescenceThicknessMap:ce&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===Zi,alphaMap:!!T.alphaMap,alphaTest:J,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!D.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!O,useFog:T.fog===!0,fogExp2:O&&O.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:p,skinning:N.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:q,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:b.shadowMap.enabled&&R.length>0,shadowMapType:b.shadowMap.type,toneMapping:T.toneMapped?b.toneMapping:_n,physicallyCorrectLights:b.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Vo,flipSided:T.side===nn,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||e.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||e.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||e.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function m(T){const A=[];if(T.shaderID?A.push(T.shaderID):(A.push(T.customVertexShaderID),A.push(T.customFragmentShaderID)),T.defines!==void 0)for(const R in T.defines)A.push(R),A.push(T.defines[R]);return T.isRawShaderMaterial===!1&&(g(A,T),y(A,T),A.push(b.outputEncoding)),A.push(T.customProgramCacheKey),A.join()}function g(T,A){T.push(A.precision),T.push(A.outputEncoding),T.push(A.envMapMode),T.push(A.envMapCubeUVHeight),T.push(A.combine),T.push(A.vertexUvs),T.push(A.fogExp2),T.push(A.sizeAttenuation),T.push(A.morphTargetsCount),T.push(A.morphAttributeCount),T.push(A.numDirLights),T.push(A.numPointLights),T.push(A.numSpotLights),T.push(A.numSpotLightMaps),T.push(A.numHemiLights),T.push(A.numRectAreaLights),T.push(A.numDirLightShadows),T.push(A.numPointLightShadows),T.push(A.numSpotLightShadows),T.push(A.numSpotLightShadowsWithMaps),T.push(A.shadowMapType),T.push(A.toneMapping),T.push(A.numClippingPlanes),T.push(A.numClipIntersection),T.push(A.depthPacking)}function y(T,A){i.disableAll(),A.isWebGL2&&i.enable(0),A.supportsVertexTextures&&i.enable(1),A.instancing&&i.enable(2),A.instancingColor&&i.enable(3),A.map&&i.enable(4),A.matcap&&i.enable(5),A.envMap&&i.enable(6),A.lightMap&&i.enable(7),A.aoMap&&i.enable(8),A.emissiveMap&&i.enable(9),A.bumpMap&&i.enable(10),A.normalMap&&i.enable(11),A.objectSpaceNormalMap&&i.enable(12),A.tangentSpaceNormalMap&&i.enable(13),A.clearcoat&&i.enable(14),A.clearcoatMap&&i.enable(15),A.clearcoatRoughnessMap&&i.enable(16),A.clearcoatNormalMap&&i.enable(17),A.iridescence&&i.enable(18),A.iridescenceMap&&i.enable(19),A.iridescenceThicknessMap&&i.enable(20),A.displacementMap&&i.enable(21),A.specularMap&&i.enable(22),A.roughnessMap&&i.enable(23),A.metalnessMap&&i.enable(24),A.gradientMap&&i.enable(25),A.alphaMap&&i.enable(26),A.alphaTest&&i.enable(27),A.vertexColors&&i.enable(28),A.vertexAlphas&&i.enable(29),A.vertexUvs&&i.enable(30),A.vertexTangents&&i.enable(31),A.uvsVertexOnly&&i.enable(32),T.push(i.mask),i.disableAll(),A.fog&&i.enable(0),A.useFog&&i.enable(1),A.flatShading&&i.enable(2),A.logarithmicDepthBuffer&&i.enable(3),A.skinning&&i.enable(4),A.morphTargets&&i.enable(5),A.morphNormals&&i.enable(6),A.morphColors&&i.enable(7),A.premultipliedAlpha&&i.enable(8),A.shadowMapEnabled&&i.enable(9),A.physicallyCorrectLights&&i.enable(10),A.doubleSided&&i.enable(11),A.flipSided&&i.enable(12),A.useDepthPacking&&i.enable(13),A.dithering&&i.enable(14),A.specularIntensityMap&&i.enable(15),A.specularColorMap&&i.enable(16),A.transmission&&i.enable(17),A.transmissionMap&&i.enable(18),A.thicknessMap&&i.enable(19),A.sheen&&i.enable(20),A.sheenColorMap&&i.enable(21),A.sheenRoughnessMap&&i.enable(22),A.decodeVideoTexture&&i.enable(23),A.opaque&&i.enable(24),T.push(i.mask)}function _(T){const A=c[T.type];let R;if(A){const P=bn[A];R=hg.clone(P.uniforms)}else R=T.uniforms;return R}function x(T,A){let R;for(let P=0,N=a.length;P<N;P++){const O=a[P];if(O.cacheKey===A){R=O,++R.usedTimes;break}}return R===void 0&&(R=new wv(b,A,T,d),a.push(R)),R}function w(T){if(--T.usedTimes===0){const A=a.indexOf(T);a[A]=a[a.length-1],a.pop(),T.destroy()}}function j(T){n.remove(T)}function E(){n.dispose()}return{getParameters:h,getProgramCacheKey:m,getUniforms:_,acquireProgram:x,releaseProgram:w,releaseShaderCache:j,programs:a,dispose:E}}function jv(){let b=new WeakMap;function t(d){let o=b.get(d);return o===void 0&&(o={},b.set(d,o)),o}function r(d){b.delete(d)}function e(d,o,i){b.get(d)[o]=i}function u(){b=new WeakMap}return{get:t,remove:r,update:e,dispose:u}}function Cv(b,t){return b.groupOrder!==t.groupOrder?b.groupOrder-t.groupOrder:b.renderOrder!==t.renderOrder?b.renderOrder-t.renderOrder:b.material.id!==t.material.id?b.material.id-t.material.id:b.z!==t.z?b.z-t.z:b.id-t.id}function Gu(b,t){return b.groupOrder!==t.groupOrder?b.groupOrder-t.groupOrder:b.renderOrder!==t.renderOrder?b.renderOrder-t.renderOrder:b.z!==t.z?t.z-b.z:b.id-t.id}function Vu(){const b=[];let t=0;const r=[],e=[],u=[];function d(){t=0,r.length=0,e.length=0,u.length=0}function o(p,s,l,c,h,m){let g=b[t];return g===void 0?(g={id:p.id,object:p,geometry:s,material:l,groupOrder:c,renderOrder:p.renderOrder,z:h,group:m},b[t]=g):(g.id=p.id,g.object=p,g.geometry=s,g.material=l,g.groupOrder=c,g.renderOrder=p.renderOrder,g.z=h,g.group=m),t++,g}function i(p,s,l,c,h,m){const g=o(p,s,l,c,h,m);l.transmission>0?e.push(g):l.transparent===!0?u.push(g):r.push(g)}function n(p,s,l,c,h,m){const g=o(p,s,l,c,h,m);l.transmission>0?e.unshift(g):l.transparent===!0?u.unshift(g):r.unshift(g)}function a(p,s){r.length>1&&r.sort(p||Cv),e.length>1&&e.sort(s||Gu),u.length>1&&u.sort(s||Gu)}function f(){for(let p=t,s=b.length;p<s;p++){const l=b[p];if(l.id===null)break;l.id=null,l.object=null,l.geometry=null,l.material=null,l.group=null}}return{opaque:r,transmissive:e,transparent:u,init:d,push:i,unshift:n,finish:f,sort:a}}function Av(){let b=new WeakMap;function t(e,u){const d=b.get(e);let o;return d===void 0?(o=new Vu,b.set(e,[o])):u>=d.length?(o=new Vu,d.push(o)):o=d[u],o}function r(){b=new WeakMap}return{get:t,dispose:r}}function Lv(){const b={};return{get:function(t){if(b[t.id]!==void 0)return b[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new De,color:new It};break;case"SpotLight":r={position:new De,direction:new De,color:new It,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new De,color:new It,distance:0,decay:0};break;case"HemisphereLight":r={direction:new De,skyColor:new It,groundColor:new It};break;case"RectAreaLight":r={color:new It,position:new De,halfWidth:new De,halfHeight:new De};break}return b[t.id]=r,r}}}function Rv(){const b={};return{get:function(t){if(b[t.id]!==void 0)return b[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ct,shadowCameraNear:1,shadowCameraFar:1e3};break}return b[t.id]=r,r}}}let Pv=0;function Dv(b,t){return(t.castShadow?2:0)-(b.castShadow?2:0)+(t.map?1:0)-(b.map?1:0)}function kv(b,t){const r=new Lv,e=Rv(),u={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let f=0;f<9;f++)u.probe.push(new De);const d=new De,o=new Nt,i=new Nt;function n(f,p){let s=0,l=0,c=0;for(let P=0;P<9;P++)u.probe[P].set(0,0,0);let h=0,m=0,g=0,y=0,_=0,x=0,w=0,j=0,E=0,T=0;f.sort(Dv);const A=p!==!0?Math.PI:1;for(let P=0,N=f.length;P<N;P++){const O=f[P],D=O.color,U=O.intensity,Y=O.distance,H=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)s+=D.r*U*A,l+=D.g*U*A,c+=D.b*U*A;else if(O.isLightProbe)for(let W=0;W<9;W++)u.probe[W].addScaledVector(O.sh.coefficients[W],U);else if(O.isDirectionalLight){const W=r.get(O);if(W.color.copy(O.color).multiplyScalar(O.intensity*A),O.castShadow){const X=O.shadow,Z=e.get(O);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,u.directionalShadow[h]=Z,u.directionalShadowMap[h]=H,u.directionalShadowMatrix[h]=O.shadow.matrix,x++}u.directional[h]=W,h++}else if(O.isSpotLight){const W=r.get(O);W.position.setFromMatrixPosition(O.matrixWorld),W.color.copy(D).multiplyScalar(U*A),W.distance=Y,W.coneCos=Math.cos(O.angle),W.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),W.decay=O.decay,u.spot[g]=W;const X=O.shadow;if(O.map&&(u.spotLightMap[E]=O.map,E++,X.updateMatrices(O),O.castShadow&&T++),u.spotLightMatrix[g]=X.matrix,O.castShadow){const Z=e.get(O);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,u.spotShadow[g]=Z,u.spotShadowMap[g]=H,j++}g++}else if(O.isRectAreaLight){const W=r.get(O);W.color.copy(D).multiplyScalar(U),W.halfWidth.set(O.width*.5,0,0),W.halfHeight.set(0,O.height*.5,0),u.rectArea[y]=W,y++}else if(O.isPointLight){const W=r.get(O);if(W.color.copy(O.color).multiplyScalar(O.intensity*A),W.distance=O.distance,W.decay=O.decay,O.castShadow){const X=O.shadow,Z=e.get(O);Z.shadowBias=X.bias,Z.shadowNormalBias=X.normalBias,Z.shadowRadius=X.radius,Z.shadowMapSize=X.mapSize,Z.shadowCameraNear=X.camera.near,Z.shadowCameraFar=X.camera.far,u.pointShadow[m]=Z,u.pointShadowMap[m]=H,u.pointShadowMatrix[m]=O.shadow.matrix,w++}u.point[m]=W,m++}else if(O.isHemisphereLight){const W=r.get(O);W.skyColor.copy(O.color).multiplyScalar(U*A),W.groundColor.copy(O.groundColor).multiplyScalar(U*A),u.hemi[_]=W,_++}}y>0&&(t.isWebGL2||b.has("OES_texture_float_linear")===!0?(u.rectAreaLTC1=ct.LTC_FLOAT_1,u.rectAreaLTC2=ct.LTC_FLOAT_2):b.has("OES_texture_half_float_linear")===!0?(u.rectAreaLTC1=ct.LTC_HALF_1,u.rectAreaLTC2=ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),u.ambient[0]=s,u.ambient[1]=l,u.ambient[2]=c;const R=u.hash;(R.directionalLength!==h||R.pointLength!==m||R.spotLength!==g||R.rectAreaLength!==y||R.hemiLength!==_||R.numDirectionalShadows!==x||R.numPointShadows!==w||R.numSpotShadows!==j||R.numSpotMaps!==E)&&(u.directional.length=h,u.spot.length=g,u.rectArea.length=y,u.point.length=m,u.hemi.length=_,u.directionalShadow.length=x,u.directionalShadowMap.length=x,u.pointShadow.length=w,u.pointShadowMap.length=w,u.spotShadow.length=j,u.spotShadowMap.length=j,u.directionalShadowMatrix.length=x,u.pointShadowMatrix.length=w,u.spotLightMatrix.length=j+E-T,u.spotLightMap.length=E,u.numSpotLightShadowsWithMaps=T,R.directionalLength=h,R.pointLength=m,R.spotLength=g,R.rectAreaLength=y,R.hemiLength=_,R.numDirectionalShadows=x,R.numPointShadows=w,R.numSpotShadows=j,R.numSpotMaps=E,u.version=Pv++)}function a(f,p){let s=0,l=0,c=0,h=0,m=0;const g=p.matrixWorldInverse;for(let y=0,_=f.length;y<_;y++){const x=f[y];if(x.isDirectionalLight){const w=u.directional[s];w.direction.setFromMatrixPosition(x.matrixWorld),d.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(d),w.direction.transformDirection(g),s++}else if(x.isSpotLight){const w=u.spot[c];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(g),w.direction.setFromMatrixPosition(x.matrixWorld),d.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(d),w.direction.transformDirection(g),c++}else if(x.isRectAreaLight){const w=u.rectArea[h];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(g),i.identity(),o.copy(x.matrixWorld),o.premultiply(g),i.extractRotation(o),w.halfWidth.set(x.width*.5,0,0),w.halfHeight.set(0,x.height*.5,0),w.halfWidth.applyMatrix4(i),w.halfHeight.applyMatrix4(i),h++}else if(x.isPointLight){const w=u.point[l];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(g),l++}else if(x.isHemisphereLight){const w=u.hemi[m];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(g),m++}}}return{setup:n,setupView:a,state:u}}function Hu(b,t){const r=new kv(b,t),e=[],u=[];function d(){e.length=0,u.length=0}function o(p){e.push(p)}function i(p){u.push(p)}function n(p){r.setup(e,p)}function a(p){r.setupView(e,p)}return{init:d,state:{lightsArray:e,shadowsArray:u,lights:r},setupLights:n,setupLightsView:a,pushLight:o,pushShadow:i}}function Iv(b,t){let r=new WeakMap;function e(d,o=0){const i=r.get(d);let n;return i===void 0?(n=new Hu(b,t),r.set(d,[n])):o>=i.length?(n=new Hu(b,t),i.push(n)):n=i[o],n}function u(){r=new WeakMap}return{get:e,dispose:u}}class Ov extends hn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Im,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Nv extends hn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new De,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Uv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Fv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Bv(b,t,r){let e=new bl;const u=new Ct,d=new Ct,o=new tr,i=new Ov({depthPacking:Om}),n=new Nv,a={},f=r.maxTextureSize,p={0:nn,1:ei,2:Vo},s=new _i({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ct},radius:{value:4}},vertexShader:Uv,fragmentShader:Fv}),l=s.clone();l.defines.HORIZONTAL_PASS=1;const c=new pn;c.setAttribute("position",new Xr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const h=new rn(c,s),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ml,this.render=function(x,w,j){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;const E=b.getRenderTarget(),T=b.getActiveCubeFace(),A=b.getActiveMipmapLevel(),R=b.state;R.setBlending($n),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let P=0,N=x.length;P<N;P++){const O=x[P],D=O.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;u.copy(D.mapSize);const U=D.getFrameExtents();if(u.multiply(U),d.copy(D.mapSize),(u.x>f||u.y>f)&&(u.x>f&&(d.x=Math.floor(f/U.x),u.x=d.x*U.x,D.mapSize.x=d.x),u.y>f&&(d.y=Math.floor(f/U.y),u.y=d.y*U.y,D.mapSize.y=d.y)),D.map===null){const H=this.type!==Ps?{minFilter:Lr,magFilter:Lr}:{};D.map=new bi(u.x,u.y,H),D.map.texture.name=O.name+".shadowMap",D.camera.updateProjectionMatrix()}b.setRenderTarget(D.map),b.clear();const Y=D.getViewportCount();for(let H=0;H<Y;H++){const W=D.getViewport(H);o.set(d.x*W.x,d.y*W.y,d.x*W.z,d.y*W.w),R.viewport(o),D.updateMatrices(O,H),e=D.getFrustum(),_(w,j,D.camera,O,this.type)}D.isPointLightShadow!==!0&&this.type===Ps&&g(D,j),D.needsUpdate=!1}m.needsUpdate=!1,b.setRenderTarget(E,T,A)};function g(x,w){const j=t.update(h);s.defines.VSM_SAMPLES!==x.blurSamples&&(s.defines.VSM_SAMPLES=x.blurSamples,l.defines.VSM_SAMPLES=x.blurSamples,s.needsUpdate=!0,l.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new bi(u.x,u.y)),s.uniforms.shadow_pass.value=x.map.texture,s.uniforms.resolution.value=x.mapSize,s.uniforms.radius.value=x.radius,b.setRenderTarget(x.mapPass),b.clear(),b.renderBufferDirect(w,null,j,s,h,null),l.uniforms.shadow_pass.value=x.mapPass.texture,l.uniforms.resolution.value=x.mapSize,l.uniforms.radius.value=x.radius,b.setRenderTarget(x.map),b.clear(),b.renderBufferDirect(w,null,j,l,h,null)}function y(x,w,j,E,T,A){let R=null;const P=j.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(P!==void 0)R=P;else if(R=j.isPointLight===!0?n:i,b.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const N=R.uuid,O=w.uuid;let D=a[N];D===void 0&&(D={},a[N]=D);let U=D[O];U===void 0&&(U=R.clone(),D[O]=U),R=U}return R.visible=w.visible,R.wireframe=w.wireframe,A===Ps?R.side=w.shadowSide!==null?w.shadowSide:w.side:R.side=w.shadowSide!==null?w.shadowSide:p[w.side],R.alphaMap=w.alphaMap,R.alphaTest=w.alphaTest,R.map=w.map,R.clipShadows=w.clipShadows,R.clippingPlanes=w.clippingPlanes,R.clipIntersection=w.clipIntersection,R.displacementMap=w.displacementMap,R.displacementScale=w.displacementScale,R.displacementBias=w.displacementBias,R.wireframeLinewidth=w.wireframeLinewidth,R.linewidth=w.linewidth,j.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(j.matrixWorld),R.nearDistance=E,R.farDistance=T),R}function _(x,w,j,E,T){if(x.visible===!1)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&T===Ps)&&(!x.frustumCulled||e.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,x.matrixWorld);const P=t.update(x),N=x.material;if(Array.isArray(N)){const O=P.groups;for(let D=0,U=O.length;D<U;D++){const Y=O[D],H=N[Y.materialIndex];if(H&&H.visible){const W=y(x,H,E,j.near,j.far,T);b.renderBufferDirect(j,null,P,W,x,Y)}}}else if(N.visible){const O=y(x,N,E,j.near,j.far,T);b.renderBufferDirect(j,null,P,O,x,null)}}const R=x.children;for(let P=0,N=R.length;P<N;P++)_(R[P],w,j,E,T)}}function zv(b,t,r){const e=r.isWebGL2;function u(){let ve=!1;const Ce=new tr;let Be=null;const rt=new tr(0,0,0,0);return{setMask:function(st){Be!==st&&!ve&&(b.colorMask(st,st,st,st),Be=st)},setLocked:function(st){ve=st},setClear:function(st,ot,ft,ht,Bt){Bt===!0&&(st*=ht,ot*=ht,ft*=ht),Ce.set(st,ot,ft,ht),rt.equals(Ce)===!1&&(b.clearColor(st,ot,ft,ht),rt.copy(Ce))},reset:function(){ve=!1,Be=null,rt.set(-1,0,0,0)}}}function d(){let ve=!1,Ce=null,Be=null,rt=null;return{setTest:function(st){st?J(2929):le(2929)},setMask:function(st){Ce!==st&&!ve&&(b.depthMask(st),Ce=st)},setFunc:function(st){if(Be!==st){switch(st){case sm:b.depthFunc(512);break;case om:b.depthFunc(519);break;case am:b.depthFunc(513);break;case Wa:b.depthFunc(515);break;case lm:b.depthFunc(514);break;case cm:b.depthFunc(518);break;case um:b.depthFunc(516);break;case dm:b.depthFunc(517);break;default:b.depthFunc(515)}Be=st}},setLocked:function(st){ve=st},setClear:function(st){rt!==st&&(b.clearDepth(st),rt=st)},reset:function(){ve=!1,Ce=null,Be=null,rt=null}}}function o(){let ve=!1,Ce=null,Be=null,rt=null,st=null,ot=null,ft=null,ht=null,Bt=null;return{setTest:function(Rt){ve||(Rt?J(2960):le(2960))},setMask:function(Rt){Ce!==Rt&&!ve&&(b.stencilMask(Rt),Ce=Rt)},setFunc:function(Rt,Wt,At){(Be!==Rt||rt!==Wt||st!==At)&&(b.stencilFunc(Rt,Wt,At),Be=Rt,rt=Wt,st=At)},setOp:function(Rt,Wt,At){(ot!==Rt||ft!==Wt||ht!==At)&&(b.stencilOp(Rt,Wt,At),ot=Rt,ft=Wt,ht=At)},setLocked:function(Rt){ve=Rt},setClear:function(Rt){Bt!==Rt&&(b.clearStencil(Rt),Bt=Rt)},reset:function(){ve=!1,Ce=null,Be=null,rt=null,st=null,ot=null,ft=null,ht=null,Bt=null}}}const i=new u,n=new d,a=new o,f=new WeakMap,p=new WeakMap;let s={},l={},c=new WeakMap,h=[],m=null,g=!1,y=null,_=null,x=null,w=null,j=null,E=null,T=null,A=!1,R=null,P=null,N=null,O=null,D=null;const U=b.getParameter(35661);let Y=!1,H=0;const W=b.getParameter(7938);W.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(W)[1]),Y=H>=1):W.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),Y=H>=2);let X=null,Z={};const q=b.getParameter(3088),ee=b.getParameter(2978),L=new tr().fromArray(q),I=new tr().fromArray(ee);function F(ve,Ce,Be){const rt=new Uint8Array(4),st=b.createTexture();b.bindTexture(ve,st),b.texParameteri(ve,10241,9728),b.texParameteri(ve,10240,9728);for(let ot=0;ot<Be;ot++)b.texImage2D(Ce+ot,0,6408,1,1,0,6408,5121,rt);return st}const V={};V[3553]=F(3553,3553,1),V[34067]=F(34067,34069,6),i.setClear(0,0,0,1),n.setClear(1),a.setClear(0),J(2929),n.setFunc(Wa),Me(!1),Ee(Ic),J(2884),ie($n);function J(ve){s[ve]!==!0&&(b.enable(ve),s[ve]=!0)}function le(ve){s[ve]!==!1&&(b.disable(ve),s[ve]=!1)}function ce(ve,Ce){return l[ve]!==Ce?(b.bindFramebuffer(ve,Ce),l[ve]=Ce,e&&(ve===36009&&(l[36160]=Ce),ve===36160&&(l[36009]=Ce)),!0):!1}function ue(ve,Ce){let Be=h,rt=!1;if(ve)if(Be=c.get(Ce),Be===void 0&&(Be=[],c.set(Ce,Be)),ve.isWebGLMultipleRenderTargets){const st=ve.texture;if(Be.length!==st.length||Be[0]!==36064){for(let ot=0,ft=st.length;ot<ft;ot++)Be[ot]=36064+ot;Be.length=st.length,rt=!0}}else Be[0]!==36064&&(Be[0]=36064,rt=!0);else Be[0]!==1029&&(Be[0]=1029,rt=!0);rt&&(r.isWebGL2?b.drawBuffers(Be):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Be))}function re(ve){return m!==ve?(b.useProgram(ve),m=ve,!0):!1}const de={[qi]:32774,[Yp]:32778,[Zp]:32779};if(e)de[Fc]=32775,de[Bc]=32776;else{const ve=t.get("EXT_blend_minmax");ve!==null&&(de[Fc]=ve.MIN_EXT,de[Bc]=ve.MAX_EXT)}const be={[Kp]:0,[Jp]:1,[Qp]:768,[Zd]:770,[im]:776,[rm]:774,[em]:772,[$p]:769,[Kd]:771,[nm]:775,[tm]:773};function ie(ve,Ce,Be,rt,st,ot,ft,ht){if(ve===$n){g===!0&&(le(3042),g=!1);return}if(g===!1&&(J(3042),g=!0),ve!==Xp){if(ve!==y||ht!==A){if((_!==qi||j!==qi)&&(b.blendEquation(32774),_=qi,j=qi),ht)switch(ve){case Zi:b.blendFuncSeparate(1,771,1,771);break;case Oc:b.blendFunc(1,1);break;case Nc:b.blendFuncSeparate(0,769,0,1);break;case Uc:b.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}else switch(ve){case Zi:b.blendFuncSeparate(770,771,1,771);break;case Oc:b.blendFunc(770,1);break;case Nc:b.blendFuncSeparate(0,769,0,1);break;case Uc:b.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}x=null,w=null,E=null,T=null,y=ve,A=ht}return}st=st||Ce,ot=ot||Be,ft=ft||rt,(Ce!==_||st!==j)&&(b.blendEquationSeparate(de[Ce],de[st]),_=Ce,j=st),(Be!==x||rt!==w||ot!==E||ft!==T)&&(b.blendFuncSeparate(be[Be],be[rt],be[ot],be[ft]),x=Be,w=rt,E=ot,T=ft),y=ve,A=!1}function xe(ve,Ce){ve.side===Vo?le(2884):J(2884);let Be=ve.side===nn;Ce&&(Be=!Be),Me(Be),ve.blending===Zi&&ve.transparent===!1?ie($n):ie(ve.blending,ve.blendEquation,ve.blendSrc,ve.blendDst,ve.blendEquationAlpha,ve.blendSrcAlpha,ve.blendDstAlpha,ve.premultipliedAlpha),n.setFunc(ve.depthFunc),n.setTest(ve.depthTest),n.setMask(ve.depthWrite),i.setMask(ve.colorWrite);const rt=ve.stencilWrite;a.setTest(rt),rt&&(a.setMask(ve.stencilWriteMask),a.setFunc(ve.stencilFunc,ve.stencilRef,ve.stencilFuncMask),a.setOp(ve.stencilFail,ve.stencilZFail,ve.stencilZPass)),Ie(ve.polygonOffset,ve.polygonOffsetFactor,ve.polygonOffsetUnits),ve.alphaToCoverage===!0?J(32926):le(32926)}function Me(ve){R!==ve&&(ve?b.frontFace(2304):b.frontFace(2305),R=ve)}function Ee(ve){ve!==Hp?(J(2884),ve!==P&&(ve===Ic?b.cullFace(1029):ve===Wp?b.cullFace(1028):b.cullFace(1032))):le(2884),P=ve}function Se(ve){ve!==N&&(Y&&b.lineWidth(ve),N=ve)}function Ie(ve,Ce,Be){ve?(J(32823),(O!==Ce||D!==Be)&&(b.polygonOffset(Ce,Be),O=Ce,D=Be)):le(32823)}function Oe(ve){ve?J(3089):le(3089)}function Xe(ve){ve===void 0&&(ve=33984+U-1),X!==ve&&(b.activeTexture(ve),X=ve)}function $(ve,Ce,Be){Be===void 0&&(X===null?Be=33984+U-1:Be=X);let rt=Z[Be];rt===void 0&&(rt={type:void 0,texture:void 0},Z[Be]=rt),(rt.type!==ve||rt.texture!==Ce)&&(X!==Be&&(b.activeTexture(Be),X=Be),b.bindTexture(ve,Ce||V[ve]),rt.type=ve,rt.texture=Ce)}function se(){const ve=Z[X];ve!==void 0&&ve.type!==void 0&&(b.bindTexture(ve.type,null),ve.type=void 0,ve.texture=void 0)}function Le(){try{b.compressedTexImage2D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Fe(){try{b.compressedTexImage3D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function He(){try{b.texSubImage2D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function We(){try{b.texSubImage3D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function we(){try{b.compressedTexSubImage2D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function oe(){try{b.compressedTexSubImage3D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function ae(){try{b.texStorage2D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function K(){try{b.texStorage3D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Q(){try{b.texImage2D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function z(){try{b.texImage3D.apply(b,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function te(ve){L.equals(ve)===!1&&(b.scissor(ve.x,ve.y,ve.z,ve.w),L.copy(ve))}function ye(ve){I.equals(ve)===!1&&(b.viewport(ve.x,ve.y,ve.z,ve.w),I.copy(ve))}function je(ve,Ce){let Be=p.get(Ce);Be===void 0&&(Be=new WeakMap,p.set(Ce,Be));let rt=Be.get(ve);rt===void 0&&(rt=b.getUniformBlockIndex(Ce,ve.name),Be.set(ve,rt))}function Pe(ve,Ce){const rt=p.get(Ce).get(ve);f.get(Ce)!==rt&&(b.uniformBlockBinding(Ce,rt,ve.__bindingPointIndex),f.set(Ce,rt))}function Ke(){b.disable(3042),b.disable(2884),b.disable(2929),b.disable(32823),b.disable(3089),b.disable(2960),b.disable(32926),b.blendEquation(32774),b.blendFunc(1,0),b.blendFuncSeparate(1,0,1,0),b.colorMask(!0,!0,!0,!0),b.clearColor(0,0,0,0),b.depthMask(!0),b.depthFunc(513),b.clearDepth(1),b.stencilMask(4294967295),b.stencilFunc(519,0,4294967295),b.stencilOp(7680,7680,7680),b.clearStencil(0),b.cullFace(1029),b.frontFace(2305),b.polygonOffset(0,0),b.activeTexture(33984),b.bindFramebuffer(36160,null),e===!0&&(b.bindFramebuffer(36009,null),b.bindFramebuffer(36008,null)),b.useProgram(null),b.lineWidth(1),b.scissor(0,0,b.canvas.width,b.canvas.height),b.viewport(0,0,b.canvas.width,b.canvas.height),s={},X=null,Z={},l={},c=new WeakMap,h=[],m=null,g=!1,y=null,_=null,x=null,w=null,j=null,E=null,T=null,A=!1,R=null,P=null,N=null,O=null,D=null,L.set(0,0,b.canvas.width,b.canvas.height),I.set(0,0,b.canvas.width,b.canvas.height),i.reset(),n.reset(),a.reset()}return{buffers:{color:i,depth:n,stencil:a},enable:J,disable:le,bindFramebuffer:ce,drawBuffers:ue,useProgram:re,setBlending:ie,setMaterial:xe,setFlipSided:Me,setCullFace:Ee,setLineWidth:Se,setPolygonOffset:Ie,setScissorTest:Oe,activeTexture:Xe,bindTexture:$,unbindTexture:se,compressedTexImage2D:Le,compressedTexImage3D:Fe,texImage2D:Q,texImage3D:z,updateUBOMapping:je,uniformBlockBinding:Pe,texStorage2D:ae,texStorage3D:K,texSubImage2D:He,texSubImage3D:We,compressedTexSubImage2D:we,compressedTexSubImage3D:oe,scissor:te,viewport:ye,reset:Ke}}function Gv(b,t,r,e,u,d,o){const i=u.isWebGL2,n=u.maxTextures,a=u.maxCubemapSize,f=u.maxTextureSize,p=u.maxSamples,s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let h;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y($,se){return g?new OffscreenCanvas($,se):Gs("canvas")}function _($,se,Le,Fe){let He=1;if(($.width>Fe||$.height>Fe)&&(He=Fe/Math.max($.width,$.height)),He<1||se===!0)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap){const We=se?Go:Math.floor,we=We(He*$.width),oe=We(He*$.height);h===void 0&&(h=y(we,oe));const ae=Le?y(we,oe):h;return ae.width=we,ae.height=oe,ae.getContext("2d").drawImage($,0,0,we,oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+$.width+"x"+$.height+") to ("+we+"x"+oe+")."),ae}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+$.width+"x"+$.height+")."),$;return $}function x($){return Ka($.width)&&Ka($.height)}function w($){return i?!1:$.wrapS!==Yr||$.wrapT!==Yr||$.minFilter!==Lr&&$.minFilter!==Mr}function j($,se){return $.generateMipmaps&&se&&$.minFilter!==Lr&&$.minFilter!==Mr}function E($){b.generateMipmap($)}function T($,se,Le,Fe,He=!1){if(i===!1)return se;if($!==null){if(b[$]!==void 0)return b[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let We=se;return se===6403&&(Le===5126&&(We=33326),Le===5131&&(We=33325),Le===5121&&(We=33321)),se===33319&&(Le===5126&&(We=33328),Le===5131&&(We=33327),Le===5121&&(We=33323)),se===6408&&(Le===5126&&(We=34836),Le===5131&&(We=34842),Le===5121&&(We=Fe===Vt&&He===!1?35907:32856),Le===32819&&(We=32854),Le===32820&&(We=32855)),(We===33325||We===33326||We===33327||We===33328||We===34842||We===34836)&&t.get("EXT_color_buffer_float"),We}function A($,se,Le){return j($,Le)===!0||$.isFramebufferTexture&&$.minFilter!==Lr&&$.minFilter!==Mr?Math.log2(Math.max(se.width,se.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?se.mipmaps.length:1}function R($){return $===Lr||$===Xa||$===ko?9728:9729}function P($){const se=$.target;se.removeEventListener("dispose",P),O(se),se.isVideoTexture&&c.delete(se)}function N($){const se=$.target;se.removeEventListener("dispose",N),U(se)}function O($){const se=e.get($);if(se.__webglInit===void 0)return;const Le=$.source,Fe=m.get(Le);if(Fe){const He=Fe[se.__cacheKey];He.usedTimes--,He.usedTimes===0&&D($),Object.keys(Fe).length===0&&m.delete(Le)}e.remove($)}function D($){const se=e.get($);b.deleteTexture(se.__webglTexture);const Le=$.source,Fe=m.get(Le);delete Fe[se.__cacheKey],o.memory.textures--}function U($){const se=$.texture,Le=e.get($),Fe=e.get(se);if(Fe.__webglTexture!==void 0&&(b.deleteTexture(Fe.__webglTexture),o.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let He=0;He<6;He++)b.deleteFramebuffer(Le.__webglFramebuffer[He]),Le.__webglDepthbuffer&&b.deleteRenderbuffer(Le.__webglDepthbuffer[He]);else{if(b.deleteFramebuffer(Le.__webglFramebuffer),Le.__webglDepthbuffer&&b.deleteRenderbuffer(Le.__webglDepthbuffer),Le.__webglMultisampledFramebuffer&&b.deleteFramebuffer(Le.__webglMultisampledFramebuffer),Le.__webglColorRenderbuffer)for(let He=0;He<Le.__webglColorRenderbuffer.length;He++)Le.__webglColorRenderbuffer[He]&&b.deleteRenderbuffer(Le.__webglColorRenderbuffer[He]);Le.__webglDepthRenderbuffer&&b.deleteRenderbuffer(Le.__webglDepthRenderbuffer)}if($.isWebGLMultipleRenderTargets)for(let He=0,We=se.length;He<We;He++){const we=e.get(se[He]);we.__webglTexture&&(b.deleteTexture(we.__webglTexture),o.memory.textures--),e.remove(se[He])}e.remove(se),e.remove($)}let Y=0;function H(){Y=0}function W(){const $=Y;return $>=n&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+n),Y+=1,$}function X($){const se=[];return se.push($.wrapS),se.push($.wrapT),se.push($.wrapR||0),se.push($.magFilter),se.push($.minFilter),se.push($.anisotropy),se.push($.internalFormat),se.push($.format),se.push($.type),se.push($.generateMipmaps),se.push($.premultiplyAlpha),se.push($.flipY),se.push($.unpackAlignment),se.push($.encoding),se.join()}function Z($,se){const Le=e.get($);if($.isVideoTexture&&Oe($),$.isRenderTargetTexture===!1&&$.version>0&&Le.__version!==$.version){const Fe=$.image;if(Fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(Le,$,se);return}}r.bindTexture(3553,Le.__webglTexture,33984+se)}function q($,se){const Le=e.get($);if($.version>0&&Le.__version!==$.version){le(Le,$,se);return}r.bindTexture(35866,Le.__webglTexture,33984+se)}function ee($,se){const Le=e.get($);if($.version>0&&Le.__version!==$.version){le(Le,$,se);return}r.bindTexture(32879,Le.__webglTexture,33984+se)}function L($,se){const Le=e.get($);if($.version>0&&Le.__version!==$.version){ce(Le,$,se);return}r.bindTexture(34067,Le.__webglTexture,33984+se)}const I={[ns]:10497,[Yr]:33071,[zo]:33648},F={[Lr]:9728,[Xa]:9984,[ko]:9986,[Mr]:9729,[eh]:9985,[ti]:9987};function V($,se,Le){if(Le?(b.texParameteri($,10242,I[se.wrapS]),b.texParameteri($,10243,I[se.wrapT]),($===32879||$===35866)&&b.texParameteri($,32882,I[se.wrapR]),b.texParameteri($,10240,F[se.magFilter]),b.texParameteri($,10241,F[se.minFilter])):(b.texParameteri($,10242,33071),b.texParameteri($,10243,33071),($===32879||$===35866)&&b.texParameteri($,32882,33071),(se.wrapS!==Yr||se.wrapT!==Yr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),b.texParameteri($,10240,R(se.magFilter)),b.texParameteri($,10241,R(se.minFilter)),se.minFilter!==Lr&&se.minFilter!==Mr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Fe=t.get("EXT_texture_filter_anisotropic");if(se.magFilter===Lr||se.minFilter!==ko&&se.minFilter!==ti||se.type===un&&t.has("OES_texture_float_linear")===!1||i===!1&&se.type===In&&t.has("OES_texture_half_float_linear")===!1)return;(se.anisotropy>1||e.get(se).__currentAnisotropy)&&(b.texParameterf($,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,u.getMaxAnisotropy())),e.get(se).__currentAnisotropy=se.anisotropy)}}function J($,se){let Le=!1;$.__webglInit===void 0&&($.__webglInit=!0,se.addEventListener("dispose",P));const Fe=se.source;let He=m.get(Fe);He===void 0&&(He={},m.set(Fe,He));const We=X(se);if(We!==$.__cacheKey){He[We]===void 0&&(He[We]={texture:b.createTexture(),usedTimes:0},o.memory.textures++,Le=!0),He[We].usedTimes++;const we=He[$.__cacheKey];we!==void 0&&(He[$.__cacheKey].usedTimes--,we.usedTimes===0&&D(se)),$.__cacheKey=We,$.__webglTexture=He[We].texture}return Le}function le($,se,Le){let Fe=3553;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(Fe=35866),se.isData3DTexture&&(Fe=32879);const He=J($,se),We=se.source;r.bindTexture(Fe,$.__webglTexture,33984+Le);const we=e.get(We);if(We.version!==we.__version||He===!0){r.activeTexture(33984+Le),b.pixelStorei(37440,se.flipY),b.pixelStorei(37441,se.premultiplyAlpha),b.pixelStorei(3317,se.unpackAlignment),b.pixelStorei(37443,0);const oe=w(se)&&x(se.image)===!1;let ae=_(se.image,oe,!1,f);ae=Xe(se,ae);const K=x(ae)||i,Q=d.convert(se.format,se.encoding);let z=d.convert(se.type),te=T(se.internalFormat,Q,z,se.encoding,se.isVideoTexture);V(Fe,se,K);let ye;const je=se.mipmaps,Pe=i&&se.isVideoTexture!==!0,Ke=we.__version===void 0||He===!0,ve=A(se,ae,K);if(se.isDepthTexture)te=6402,i?se.type===un?te=36012:se.type===hi?te=33190:se.type===Ki?te=35056:te=33189:se.type===un&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===mi&&te===6402&&se.type!==th&&se.type!==hi&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=hi,z=d.convert(se.type)),se.format===is&&te===6402&&(te=34041,se.type!==Ki&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=Ki,z=d.convert(se.type))),Ke&&(Pe?r.texStorage2D(3553,1,te,ae.width,ae.height):r.texImage2D(3553,0,te,ae.width,ae.height,0,Q,z,null));else if(se.isDataTexture)if(je.length>0&&K){Pe&&Ke&&r.texStorage2D(3553,ve,te,je[0].width,je[0].height);for(let Ce=0,Be=je.length;Ce<Be;Ce++)ye=je[Ce],Pe?r.texSubImage2D(3553,Ce,0,0,ye.width,ye.height,Q,z,ye.data):r.texImage2D(3553,Ce,te,ye.width,ye.height,0,Q,z,ye.data);se.generateMipmaps=!1}else Pe?(Ke&&r.texStorage2D(3553,ve,te,ae.width,ae.height),r.texSubImage2D(3553,0,0,0,ae.width,ae.height,Q,z,ae.data)):r.texImage2D(3553,0,te,ae.width,ae.height,0,Q,z,ae.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){Pe&&Ke&&r.texStorage3D(35866,ve,te,je[0].width,je[0].height,ae.depth);for(let Ce=0,Be=je.length;Ce<Be;Ce++)ye=je[Ce],se.format!==tn?Q!==null?Pe?r.compressedTexSubImage3D(35866,Ce,0,0,0,ye.width,ye.height,ae.depth,Q,ye.data,0,0):r.compressedTexImage3D(35866,Ce,te,ye.width,ye.height,ae.depth,0,ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pe?r.texSubImage3D(35866,Ce,0,0,0,ye.width,ye.height,ae.depth,Q,z,ye.data):r.texImage3D(35866,Ce,te,ye.width,ye.height,ae.depth,0,Q,z,ye.data)}else{Pe&&Ke&&r.texStorage2D(3553,ve,te,je[0].width,je[0].height);for(let Ce=0,Be=je.length;Ce<Be;Ce++)ye=je[Ce],se.format!==tn?Q!==null?Pe?r.compressedTexSubImage2D(3553,Ce,0,0,ye.width,ye.height,Q,ye.data):r.compressedTexImage2D(3553,Ce,te,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pe?r.texSubImage2D(3553,Ce,0,0,ye.width,ye.height,Q,z,ye.data):r.texImage2D(3553,Ce,te,ye.width,ye.height,0,Q,z,ye.data)}else if(se.isDataArrayTexture)Pe?(Ke&&r.texStorage3D(35866,ve,te,ae.width,ae.height,ae.depth),r.texSubImage3D(35866,0,0,0,0,ae.width,ae.height,ae.depth,Q,z,ae.data)):r.texImage3D(35866,0,te,ae.width,ae.height,ae.depth,0,Q,z,ae.data);else if(se.isData3DTexture)Pe?(Ke&&r.texStorage3D(32879,ve,te,ae.width,ae.height,ae.depth),r.texSubImage3D(32879,0,0,0,0,ae.width,ae.height,ae.depth,Q,z,ae.data)):r.texImage3D(32879,0,te,ae.width,ae.height,ae.depth,0,Q,z,ae.data);else if(se.isFramebufferTexture){if(Ke)if(Pe)r.texStorage2D(3553,ve,te,ae.width,ae.height);else{let Ce=ae.width,Be=ae.height;for(let rt=0;rt<ve;rt++)r.texImage2D(3553,rt,te,Ce,Be,0,Q,z,null),Ce>>=1,Be>>=1}}else if(je.length>0&&K){Pe&&Ke&&r.texStorage2D(3553,ve,te,je[0].width,je[0].height);for(let Ce=0,Be=je.length;Ce<Be;Ce++)ye=je[Ce],Pe?r.texSubImage2D(3553,Ce,0,0,Q,z,ye):r.texImage2D(3553,Ce,te,Q,z,ye);se.generateMipmaps=!1}else Pe?(Ke&&r.texStorage2D(3553,ve,te,ae.width,ae.height),r.texSubImage2D(3553,0,0,0,Q,z,ae)):r.texImage2D(3553,0,te,Q,z,ae);j(se,K)&&E(Fe),we.__version=We.version,se.onUpdate&&se.onUpdate(se)}$.__version=se.version}function ce($,se,Le){if(se.image.length!==6)return;const Fe=J($,se),He=se.source;r.bindTexture(34067,$.__webglTexture,33984+Le);const We=e.get(He);if(He.version!==We.__version||Fe===!0){r.activeTexture(33984+Le),b.pixelStorei(37440,se.flipY),b.pixelStorei(37441,se.premultiplyAlpha),b.pixelStorei(3317,se.unpackAlignment),b.pixelStorei(37443,0);const we=se.isCompressedTexture||se.image[0].isCompressedTexture,oe=se.image[0]&&se.image[0].isDataTexture,ae=[];for(let Ce=0;Ce<6;Ce++)!we&&!oe?ae[Ce]=_(se.image[Ce],!1,!0,a):ae[Ce]=oe?se.image[Ce].image:se.image[Ce],ae[Ce]=Xe(se,ae[Ce]);const K=ae[0],Q=x(K)||i,z=d.convert(se.format,se.encoding),te=d.convert(se.type),ye=T(se.internalFormat,z,te,se.encoding),je=i&&se.isVideoTexture!==!0,Pe=We.__version===void 0||Fe===!0;let Ke=A(se,K,Q);V(34067,se,Q);let ve;if(we){je&&Pe&&r.texStorage2D(34067,Ke,ye,K.width,K.height);for(let Ce=0;Ce<6;Ce++){ve=ae[Ce].mipmaps;for(let Be=0;Be<ve.length;Be++){const rt=ve[Be];se.format!==tn?z!==null?je?r.compressedTexSubImage2D(34069+Ce,Be,0,0,rt.width,rt.height,z,rt.data):r.compressedTexImage2D(34069+Ce,Be,ye,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):je?r.texSubImage2D(34069+Ce,Be,0,0,rt.width,rt.height,z,te,rt.data):r.texImage2D(34069+Ce,Be,ye,rt.width,rt.height,0,z,te,rt.data)}}}else{ve=se.mipmaps,je&&Pe&&(ve.length>0&&Ke++,r.texStorage2D(34067,Ke,ye,ae[0].width,ae[0].height));for(let Ce=0;Ce<6;Ce++)if(oe){je?r.texSubImage2D(34069+Ce,0,0,0,ae[Ce].width,ae[Ce].height,z,te,ae[Ce].data):r.texImage2D(34069+Ce,0,ye,ae[Ce].width,ae[Ce].height,0,z,te,ae[Ce].data);for(let Be=0;Be<ve.length;Be++){const st=ve[Be].image[Ce].image;je?r.texSubImage2D(34069+Ce,Be+1,0,0,st.width,st.height,z,te,st.data):r.texImage2D(34069+Ce,Be+1,ye,st.width,st.height,0,z,te,st.data)}}else{je?r.texSubImage2D(34069+Ce,0,0,0,z,te,ae[Ce]):r.texImage2D(34069+Ce,0,ye,z,te,ae[Ce]);for(let Be=0;Be<ve.length;Be++){const rt=ve[Be];je?r.texSubImage2D(34069+Ce,Be+1,0,0,z,te,rt.image[Ce]):r.texImage2D(34069+Ce,Be+1,ye,z,te,rt.image[Ce])}}}j(se,Q)&&E(34067),We.__version=He.version,se.onUpdate&&se.onUpdate(se)}$.__version=se.version}function ue($,se,Le,Fe,He){const We=d.convert(Le.format,Le.encoding),we=d.convert(Le.type),oe=T(Le.internalFormat,We,we,Le.encoding);e.get(se).__hasExternalTextures||(He===32879||He===35866?r.texImage3D(He,0,oe,se.width,se.height,se.depth,0,We,we,null):r.texImage2D(He,0,oe,se.width,se.height,0,We,we,null)),r.bindFramebuffer(36160,$),Ie(se)?s.framebufferTexture2DMultisampleEXT(36160,Fe,He,e.get(Le).__webglTexture,0,Se(se)):(He===3553||He>=34069&&He<=34074)&&b.framebufferTexture2D(36160,Fe,He,e.get(Le).__webglTexture,0),r.bindFramebuffer(36160,null)}function re($,se,Le){if(b.bindRenderbuffer(36161,$),se.depthBuffer&&!se.stencilBuffer){let Fe=33189;if(Le||Ie(se)){const He=se.depthTexture;He&&He.isDepthTexture&&(He.type===un?Fe=36012:He.type===hi&&(Fe=33190));const We=Se(se);Ie(se)?s.renderbufferStorageMultisampleEXT(36161,We,Fe,se.width,se.height):b.renderbufferStorageMultisample(36161,We,Fe,se.width,se.height)}else b.renderbufferStorage(36161,Fe,se.width,se.height);b.framebufferRenderbuffer(36160,36096,36161,$)}else if(se.depthBuffer&&se.stencilBuffer){const Fe=Se(se);Le&&Ie(se)===!1?b.renderbufferStorageMultisample(36161,Fe,35056,se.width,se.height):Ie(se)?s.renderbufferStorageMultisampleEXT(36161,Fe,35056,se.width,se.height):b.renderbufferStorage(36161,34041,se.width,se.height),b.framebufferRenderbuffer(36160,33306,36161,$)}else{const Fe=se.isWebGLMultipleRenderTargets===!0?se.texture:[se.texture];for(let He=0;He<Fe.length;He++){const We=Fe[He],we=d.convert(We.format,We.encoding),oe=d.convert(We.type),ae=T(We.internalFormat,we,oe,We.encoding),K=Se(se);Le&&Ie(se)===!1?b.renderbufferStorageMultisample(36161,K,ae,se.width,se.height):Ie(se)?s.renderbufferStorageMultisampleEXT(36161,K,ae,se.width,se.height):b.renderbufferStorage(36161,ae,se.width,se.height)}}b.bindRenderbuffer(36161,null)}function de($,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,$),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!e.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),Z(se.depthTexture,0);const Fe=e.get(se.depthTexture).__webglTexture,He=Se(se);if(se.depthTexture.format===mi)Ie(se)?s.framebufferTexture2DMultisampleEXT(36160,36096,3553,Fe,0,He):b.framebufferTexture2D(36160,36096,3553,Fe,0);else if(se.depthTexture.format===is)Ie(se)?s.framebufferTexture2DMultisampleEXT(36160,33306,3553,Fe,0,He):b.framebufferTexture2D(36160,33306,3553,Fe,0);else throw new Error("Unknown depthTexture format")}function be($){const se=e.get($),Le=$.isWebGLCubeRenderTarget===!0;if($.depthTexture&&!se.__autoAllocateDepthBuffer){if(Le)throw new Error("target.depthTexture not supported in Cube render targets");de(se.__webglFramebuffer,$)}else if(Le){se.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)r.bindFramebuffer(36160,se.__webglFramebuffer[Fe]),se.__webglDepthbuffer[Fe]=b.createRenderbuffer(),re(se.__webglDepthbuffer[Fe],$,!1)}else r.bindFramebuffer(36160,se.__webglFramebuffer),se.__webglDepthbuffer=b.createRenderbuffer(),re(se.__webglDepthbuffer,$,!1);r.bindFramebuffer(36160,null)}function ie($,se,Le){const Fe=e.get($);se!==void 0&&ue(Fe.__webglFramebuffer,$,$.texture,36064,3553),Le!==void 0&&be($)}function xe($){const se=$.texture,Le=e.get($),Fe=e.get(se);$.addEventListener("dispose",N),$.isWebGLMultipleRenderTargets!==!0&&(Fe.__webglTexture===void 0&&(Fe.__webglTexture=b.createTexture()),Fe.__version=se.version,o.memory.textures++);const He=$.isWebGLCubeRenderTarget===!0,We=$.isWebGLMultipleRenderTargets===!0,we=x($)||i;if(He){Le.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)Le.__webglFramebuffer[oe]=b.createFramebuffer()}else{if(Le.__webglFramebuffer=b.createFramebuffer(),We)if(u.drawBuffers){const oe=$.texture;for(let ae=0,K=oe.length;ae<K;ae++){const Q=e.get(oe[ae]);Q.__webglTexture===void 0&&(Q.__webglTexture=b.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(i&&$.samples>0&&Ie($)===!1){const oe=We?se:[se];Le.__webglMultisampledFramebuffer=b.createFramebuffer(),Le.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,Le.__webglMultisampledFramebuffer);for(let ae=0;ae<oe.length;ae++){const K=oe[ae];Le.__webglColorRenderbuffer[ae]=b.createRenderbuffer(),b.bindRenderbuffer(36161,Le.__webglColorRenderbuffer[ae]);const Q=d.convert(K.format,K.encoding),z=d.convert(K.type),te=T(K.internalFormat,Q,z,K.encoding,$.isXRRenderTarget===!0),ye=Se($);b.renderbufferStorageMultisample(36161,ye,te,$.width,$.height),b.framebufferRenderbuffer(36160,36064+ae,36161,Le.__webglColorRenderbuffer[ae])}b.bindRenderbuffer(36161,null),$.depthBuffer&&(Le.__webglDepthRenderbuffer=b.createRenderbuffer(),re(Le.__webglDepthRenderbuffer,$,!0)),r.bindFramebuffer(36160,null)}}if(He){r.bindTexture(34067,Fe.__webglTexture),V(34067,se,we);for(let oe=0;oe<6;oe++)ue(Le.__webglFramebuffer[oe],$,se,36064,34069+oe);j(se,we)&&E(34067),r.unbindTexture()}else if(We){const oe=$.texture;for(let ae=0,K=oe.length;ae<K;ae++){const Q=oe[ae],z=e.get(Q);r.bindTexture(3553,z.__webglTexture),V(3553,Q,we),ue(Le.__webglFramebuffer,$,Q,36064+ae,3553),j(Q,we)&&E(3553)}r.unbindTexture()}else{let oe=3553;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(i?oe=$.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(oe,Fe.__webglTexture),V(oe,se,we),ue(Le.__webglFramebuffer,$,se,36064,oe),j(se,we)&&E(oe),r.unbindTexture()}$.depthBuffer&&be($)}function Me($){const se=x($)||i,Le=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let Fe=0,He=Le.length;Fe<He;Fe++){const We=Le[Fe];if(j(We,se)){const we=$.isWebGLCubeRenderTarget?34067:3553,oe=e.get(We).__webglTexture;r.bindTexture(we,oe),E(we),r.unbindTexture()}}}function Ee($){if(i&&$.samples>0&&Ie($)===!1){const se=$.isWebGLMultipleRenderTargets?$.texture:[$.texture],Le=$.width,Fe=$.height;let He=16384;const We=[],we=$.stencilBuffer?33306:36096,oe=e.get($),ae=$.isWebGLMultipleRenderTargets===!0;if(ae)for(let K=0;K<se.length;K++)r.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(36160,36064+K,36161,null),r.bindFramebuffer(36160,oe.__webglFramebuffer),b.framebufferTexture2D(36009,36064+K,3553,null,0);r.bindFramebuffer(36008,oe.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,oe.__webglFramebuffer);for(let K=0;K<se.length;K++){We.push(36064+K),$.depthBuffer&&We.push(we);const Q=oe.__ignoreDepthValues!==void 0?oe.__ignoreDepthValues:!1;if(Q===!1&&($.depthBuffer&&(He|=256),$.stencilBuffer&&(He|=1024)),ae&&b.framebufferRenderbuffer(36008,36064,36161,oe.__webglColorRenderbuffer[K]),Q===!0&&(b.invalidateFramebuffer(36008,[we]),b.invalidateFramebuffer(36009,[we])),ae){const z=e.get(se[K]).__webglTexture;b.framebufferTexture2D(36009,36064,3553,z,0)}b.blitFramebuffer(0,0,Le,Fe,0,0,Le,Fe,He,9728),l&&b.invalidateFramebuffer(36008,We)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),ae)for(let K=0;K<se.length;K++){r.bindFramebuffer(36160,oe.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(36160,36064+K,36161,oe.__webglColorRenderbuffer[K]);const Q=e.get(se[K]).__webglTexture;r.bindFramebuffer(36160,oe.__webglFramebuffer),b.framebufferTexture2D(36009,36064+K,3553,Q,0)}r.bindFramebuffer(36009,oe.__webglMultisampledFramebuffer)}}function Se($){return Math.min(p,$.samples)}function Ie($){const se=e.get($);return i&&$.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function Oe($){const se=o.render.frame;c.get($)!==se&&(c.set($,se),$.update())}function Xe($,se){const Le=$.encoding,Fe=$.format,He=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||$.format===Za||Le!==ri&&(Le===Vt?i===!1?t.has("EXT_sRGB")===!0&&Fe===tn?($.format=Za,$.minFilter=Mr,$.generateMipmaps=!1):se=oh.sRGBToLinear(se):(Fe!==tn||He!==vi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Le)),se}this.allocateTextureUnit=W,this.resetTextureUnits=H,this.setTexture2D=Z,this.setTexture2DArray=q,this.setTexture3D=ee,this.setTextureCube=L,this.rebindTextures=ie,this.setupRenderTarget=xe,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=Ee,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=Ie}function Vv(b,t,r){const e=r.isWebGL2;function u(d,o=null){let i;if(d===vi)return 5121;if(d===xm)return 32819;if(d===wm)return 32820;if(d===vm)return 5120;if(d===bm)return 5122;if(d===th)return 5123;if(d===_m)return 5124;if(d===hi)return 5125;if(d===un)return 5126;if(d===In)return e?5131:(i=t.get("OES_texture_half_float"),i!==null?i.HALF_FLOAT_OES:null);if(d===Sm)return 6406;if(d===tn)return 6408;if(d===Tm)return 6409;if(d===Em)return 6410;if(d===mi)return 6402;if(d===is)return 34041;if(d===Mm)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(d===Za)return i=t.get("EXT_sRGB"),i!==null?i.SRGB_ALPHA_EXT:null;if(d===jm)return 6403;if(d===Cm)return 36244;if(d===Am)return 33319;if(d===Lm)return 33320;if(d===Rm)return 36249;if(d===ta||d===ra||d===na||d===ia)if(o===Vt)if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),i!==null){if(d===ta)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===ra)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===na)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===ia)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(i=t.get("WEBGL_compressed_texture_s3tc"),i!==null){if(d===ta)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===ra)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===na)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===ia)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(d===zc||d===Gc||d===Vc||d===Hc)if(i=t.get("WEBGL_compressed_texture_pvrtc"),i!==null){if(d===zc)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===Gc)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===Vc)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===Hc)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(d===Pm)return i=t.get("WEBGL_compressed_texture_etc1"),i!==null?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===Wc||d===qc)if(i=t.get("WEBGL_compressed_texture_etc"),i!==null){if(d===Wc)return o===Vt?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(d===qc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(d===Xc||d===Yc||d===Zc||d===Kc||d===Jc||d===Qc||d===$c||d===eu||d===tu||d===ru||d===nu||d===iu||d===su||d===ou)if(i=t.get("WEBGL_compressed_texture_astc"),i!==null){if(d===Xc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===Yc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===Zc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===Kc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===Jc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===Qc)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===$c)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===eu)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===tu)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===ru)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===nu)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===iu)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===su)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===ou)return o===Vt?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(d===au)if(i=t.get("EXT_texture_compression_bptc"),i!==null){if(d===au)return o===Vt?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return d===Ki?e?34042:(i=t.get("WEBGL_depth_texture"),i!==null?i.UNSIGNED_INT_24_8_WEBGL:null):b[d]!==void 0?b[d]:null}return{convert:u}}class Hv extends qr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class pi extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Wv={type:"move"};class La{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new pi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new pi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new De,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new De),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new pi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new De,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new De),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const r=this._hand;if(r)for(const e of t.hand.values())this._getHandJoint(r,e)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,r,e){let u=null,d=null,o=null;const i=this._targetRay,n=this._grip,a=this._hand;if(t&&r.session.visibilityState!=="visible-blurred"){if(a&&t.hand){o=!0;for(const h of t.hand.values()){const m=r.getJointPose(h,e),g=this._getHandJoint(a,h);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const f=a.joints["index-finger-tip"],p=a.joints["thumb-tip"],s=f.position.distanceTo(p.position),l=.02,c=.005;a.inputState.pinching&&s>l+c?(a.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!a.inputState.pinching&&s<=l-c&&(a.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else n!==null&&t.gripSpace&&(d=r.getPose(t.gripSpace,e),d!==null&&(n.matrix.fromArray(d.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),d.linearVelocity?(n.hasLinearVelocity=!0,n.linearVelocity.copy(d.linearVelocity)):n.hasLinearVelocity=!1,d.angularVelocity?(n.hasAngularVelocity=!0,n.angularVelocity.copy(d.angularVelocity)):n.hasAngularVelocity=!1));i!==null&&(u=r.getPose(t.targetRaySpace,e),u===null&&d!==null&&(u=d),u!==null&&(i.matrix.fromArray(u.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),u.linearVelocity?(i.hasLinearVelocity=!0,i.linearVelocity.copy(u.linearVelocity)):i.hasLinearVelocity=!1,u.angularVelocity?(i.hasAngularVelocity=!0,i.angularVelocity.copy(u.angularVelocity)):i.hasAngularVelocity=!1,this.dispatchEvent(Wv)))}return i!==null&&(i.visible=u!==null),n!==null&&(n.visible=d!==null),a!==null&&(a.visible=o!==null),this}_getHandJoint(t,r){if(t.joints[r.jointName]===void 0){const e=new pi;e.matrixAutoUpdate=!1,e.visible=!1,t.joints[r.jointName]=e,t.add(e)}return t.joints[r.jointName]}}class qv extends Ir{constructor(t,r,e,u,d,o,i,n,a,f){if(f=f!==void 0?f:mi,f!==mi&&f!==is)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");e===void 0&&f===mi&&(e=hi),e===void 0&&f===is&&(e=Ki),super(null,u,d,o,i,n,f,e,a),this.isDepthTexture=!0,this.image={width:t,height:r},this.magFilter=i!==void 0?i:Lr,this.minFilter=n!==void 0?n:Lr,this.flipY=!1,this.generateMipmaps=!1}}class Xv extends wi{constructor(t,r){super();const e=this;let u=null,d=1,o=null,i="local-floor",n=null,a=null,f=null,p=null,s=null,l=null;const c=r.getContextAttributes();let h=null,m=null;const g=[],y=[],_=new Set,x=new Map,w=new qr;w.layers.enable(1),w.viewport=new tr;const j=new qr;j.layers.enable(2),j.viewport=new tr;const E=[w,j],T=new Hv;T.layers.enable(1),T.layers.enable(2);let A=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ee=g[q];return ee===void 0&&(ee=new La,g[q]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(q){let ee=g[q];return ee===void 0&&(ee=new La,g[q]=ee),ee.getGripSpace()},this.getHand=function(q){let ee=g[q];return ee===void 0&&(ee=new La,g[q]=ee),ee.getHandSpace()};function P(q){const ee=y.indexOf(q.inputSource);if(ee===-1)return;const L=g[ee];L!==void 0&&L.dispatchEvent({type:q.type,data:q.inputSource})}function N(){u.removeEventListener("select",P),u.removeEventListener("selectstart",P),u.removeEventListener("selectend",P),u.removeEventListener("squeeze",P),u.removeEventListener("squeezestart",P),u.removeEventListener("squeezeend",P),u.removeEventListener("end",N),u.removeEventListener("inputsourceschange",O);for(let q=0;q<g.length;q++){const ee=y[q];ee!==null&&(y[q]=null,g[q].disconnect(ee))}A=null,R=null,t.setRenderTarget(h),s=null,p=null,f=null,u=null,m=null,Z.stop(),e.isPresenting=!1,e.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){d=q,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){i=q,e.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return n||o},this.setReferenceSpace=function(q){n=q},this.getBaseLayer=function(){return p!==null?p:s},this.getBinding=function(){return f},this.getFrame=function(){return l},this.getSession=function(){return u},this.setSession=async function(q){if(u=q,u!==null){if(h=t.getRenderTarget(),u.addEventListener("select",P),u.addEventListener("selectstart",P),u.addEventListener("selectend",P),u.addEventListener("squeeze",P),u.addEventListener("squeezestart",P),u.addEventListener("squeezeend",P),u.addEventListener("end",N),u.addEventListener("inputsourceschange",O),c.xrCompatible!==!0&&await r.makeXRCompatible(),u.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const ee={antialias:u.renderState.layers===void 0?c.antialias:!0,alpha:c.alpha,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:d};s=new XRWebGLLayer(u,r,ee),u.updateRenderState({baseLayer:s}),m=new bi(s.framebufferWidth,s.framebufferHeight,{format:tn,type:vi,encoding:t.outputEncoding,stencilBuffer:c.stencil})}else{let ee=null,L=null,I=null;c.depth&&(I=c.stencil?35056:33190,ee=c.stencil?is:mi,L=c.stencil?Ki:hi);const F={colorFormat:32856,depthFormat:I,scaleFactor:d};f=new XRWebGLBinding(u,r),p=f.createProjectionLayer(F),u.updateRenderState({layers:[p]}),m=new bi(p.textureWidth,p.textureHeight,{format:tn,type:vi,depthTexture:new qv(p.textureWidth,p.textureHeight,L,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:c.stencil,encoding:t.outputEncoding,samples:c.antialias?4:0});const V=t.properties.get(m);V.__ignoreDepthValues=p.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),n=null,o=await u.requestReferenceSpace(i),Z.setContext(u),Z.start(),e.isPresenting=!0,e.dispatchEvent({type:"sessionstart"})}};function O(q){for(let ee=0;ee<q.removed.length;ee++){const L=q.removed[ee],I=y.indexOf(L);I>=0&&(y[I]=null,g[I].disconnect(L))}for(let ee=0;ee<q.added.length;ee++){const L=q.added[ee];let I=y.indexOf(L);if(I===-1){for(let V=0;V<g.length;V++)if(V>=y.length){y.push(L),I=V;break}else if(y[V]===null){y[V]=L,I=V;break}if(I===-1)break}const F=g[I];F&&F.connect(L)}}const D=new De,U=new De;function Y(q,ee,L){D.setFromMatrixPosition(ee.matrixWorld),U.setFromMatrixPosition(L.matrixWorld);const I=D.distanceTo(U),F=ee.projectionMatrix.elements,V=L.projectionMatrix.elements,J=F[14]/(F[10]-1),le=F[14]/(F[10]+1),ce=(F[9]+1)/F[5],ue=(F[9]-1)/F[5],re=(F[8]-1)/F[0],de=(V[8]+1)/V[0],be=J*re,ie=J*de,xe=I/(-re+de),Me=xe*-re;ee.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Me),q.translateZ(xe),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const Ee=J+xe,Se=le+xe,Ie=be-Me,Oe=ie+(I-Me),Xe=ce*le/Se*Ee,$=ue*le/Se*Ee;q.projectionMatrix.makePerspective(Ie,Oe,Xe,$,Ee,Se)}function H(q,ee){ee===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ee.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(u===null)return;T.near=j.near=w.near=q.near,T.far=j.far=w.far=q.far,(A!==T.near||R!==T.far)&&(u.updateRenderState({depthNear:T.near,depthFar:T.far}),A=T.near,R=T.far);const ee=q.parent,L=T.cameras;H(T,ee);for(let F=0;F<L.length;F++)H(L[F],ee);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),q.matrix.copy(T.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale);const I=q.children;for(let F=0,V=I.length;F<V;F++)I[F].updateMatrixWorld(!0);L.length===2?Y(T,w,j):T.projectionMatrix.copy(w.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(p!==null)return p.fixedFoveation;if(s!==null)return s.fixedFoveation},this.setFoveation=function(q){p!==null&&(p.fixedFoveation=q),s!==null&&s.fixedFoveation!==void 0&&(s.fixedFoveation=q)},this.getPlanes=function(){return _};let W=null;function X(q,ee){if(a=ee.getViewerPose(n||o),l=ee,a!==null){const L=a.views;s!==null&&(t.setRenderTargetFramebuffer(m,s.framebuffer),t.setRenderTarget(m));let I=!1;L.length!==T.cameras.length&&(T.cameras.length=0,I=!0);for(let F=0;F<L.length;F++){const V=L[F];let J=null;if(s!==null)J=s.getViewport(V);else{const ce=f.getViewSubImage(p,V);J=ce.viewport,F===0&&(t.setRenderTargetTextures(m,ce.colorTexture,p.ignoreDepthValues?void 0:ce.depthStencilTexture),t.setRenderTarget(m))}let le=E[F];le===void 0&&(le=new qr,le.layers.enable(F),le.viewport=new tr,E[F]=le),le.matrix.fromArray(V.transform.matrix),le.projectionMatrix.fromArray(V.projectionMatrix),le.viewport.set(J.x,J.y,J.width,J.height),F===0&&T.matrix.copy(le.matrix),I===!0&&T.cameras.push(le)}}for(let L=0;L<g.length;L++){const I=y[L],F=g[L];I!==null&&F!==void 0&&F.update(I,ee,n||o)}if(W&&W(q,ee),ee.detectedPlanes){e.dispatchEvent({type:"planesdetected",data:ee.detectedPlanes});let L=null;for(const I of _)ee.detectedPlanes.has(I)||(L===null&&(L=[]),L.push(I));if(L!==null)for(const I of L)_.delete(I),x.delete(I),e.dispatchEvent({type:"planeremoved",data:I});for(const I of ee.detectedPlanes)if(!_.has(I))_.add(I),x.set(I,ee.lastChangedTime),e.dispatchEvent({type:"planeadded",data:I});else{const F=x.get(I);I.lastChangedTime>F&&(x.set(I,I.lastChangedTime),e.dispatchEvent({type:"planechanged",data:I}))}}l=null}const Z=new mh;Z.setAnimationLoop(X),this.setAnimationLoop=function(q){W=q},this.dispose=function(){}}}function Yv(b,t){function r(h,m){m.color.getRGB(h.fogColor.value,hh(b)),m.isFog?(h.fogNear.value=m.near,h.fogFar.value=m.far):m.isFogExp2&&(h.fogDensity.value=m.density)}function e(h,m,g,y,_){m.isMeshBasicMaterial||m.isMeshLambertMaterial?u(h,m):m.isMeshToonMaterial?(u(h,m),f(h,m)):m.isMeshPhongMaterial?(u(h,m),a(h,m)):m.isMeshStandardMaterial?(u(h,m),p(h,m),m.isMeshPhysicalMaterial&&s(h,m,_)):m.isMeshMatcapMaterial?(u(h,m),l(h,m)):m.isMeshDepthMaterial?u(h,m):m.isMeshDistanceMaterial?(u(h,m),c(h,m)):m.isMeshNormalMaterial?u(h,m):m.isLineBasicMaterial?(d(h,m),m.isLineDashedMaterial&&o(h,m)):m.isPointsMaterial?i(h,m,g,y):m.isSpriteMaterial?n(h,m):m.isShadowMaterial?(h.color.value.copy(m.color),h.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function u(h,m){h.opacity.value=m.opacity,m.color&&h.diffuse.value.copy(m.color),m.emissive&&h.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(h.map.value=m.map),m.alphaMap&&(h.alphaMap.value=m.alphaMap),m.bumpMap&&(h.bumpMap.value=m.bumpMap,h.bumpScale.value=m.bumpScale,m.side===nn&&(h.bumpScale.value*=-1)),m.displacementMap&&(h.displacementMap.value=m.displacementMap,h.displacementScale.value=m.displacementScale,h.displacementBias.value=m.displacementBias),m.emissiveMap&&(h.emissiveMap.value=m.emissiveMap),m.normalMap&&(h.normalMap.value=m.normalMap,h.normalScale.value.copy(m.normalScale),m.side===nn&&h.normalScale.value.negate()),m.specularMap&&(h.specularMap.value=m.specularMap),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);const g=t.get(m).envMap;if(g&&(h.envMap.value=g,h.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,h.reflectivity.value=m.reflectivity,h.ior.value=m.ior,h.refractionRatio.value=m.refractionRatio),m.lightMap){h.lightMap.value=m.lightMap;const x=b.physicallyCorrectLights!==!0?Math.PI:1;h.lightMapIntensity.value=m.lightMapIntensity*x}m.aoMap&&(h.aoMap.value=m.aoMap,h.aoMapIntensity.value=m.aoMapIntensity);let y;m.map?y=m.map:m.specularMap?y=m.specularMap:m.displacementMap?y=m.displacementMap:m.normalMap?y=m.normalMap:m.bumpMap?y=m.bumpMap:m.roughnessMap?y=m.roughnessMap:m.metalnessMap?y=m.metalnessMap:m.alphaMap?y=m.alphaMap:m.emissiveMap?y=m.emissiveMap:m.clearcoatMap?y=m.clearcoatMap:m.clearcoatNormalMap?y=m.clearcoatNormalMap:m.clearcoatRoughnessMap?y=m.clearcoatRoughnessMap:m.iridescenceMap?y=m.iridescenceMap:m.iridescenceThicknessMap?y=m.iridescenceThicknessMap:m.specularIntensityMap?y=m.specularIntensityMap:m.specularColorMap?y=m.specularColorMap:m.transmissionMap?y=m.transmissionMap:m.thicknessMap?y=m.thicknessMap:m.sheenColorMap?y=m.sheenColorMap:m.sheenRoughnessMap&&(y=m.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),h.uvTransform.value.copy(y.matrix));let _;m.aoMap?_=m.aoMap:m.lightMap&&(_=m.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),h.uv2Transform.value.copy(_.matrix))}function d(h,m){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity}function o(h,m){h.dashSize.value=m.dashSize,h.totalSize.value=m.dashSize+m.gapSize,h.scale.value=m.scale}function i(h,m,g,y){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,h.size.value=m.size*g,h.scale.value=y*.5,m.map&&(h.map.value=m.map),m.alphaMap&&(h.alphaMap.value=m.alphaMap),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);let _;m.map?_=m.map:m.alphaMap&&(_=m.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),h.uvTransform.value.copy(_.matrix))}function n(h,m){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,h.rotation.value=m.rotation,m.map&&(h.map.value=m.map),m.alphaMap&&(h.alphaMap.value=m.alphaMap),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),h.uvTransform.value.copy(g.matrix))}function a(h,m){h.specular.value.copy(m.specular),h.shininess.value=Math.max(m.shininess,1e-4)}function f(h,m){m.gradientMap&&(h.gradientMap.value=m.gradientMap)}function p(h,m){h.roughness.value=m.roughness,h.metalness.value=m.metalness,m.roughnessMap&&(h.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(h.metalnessMap.value=m.metalnessMap),t.get(m).envMap&&(h.envMapIntensity.value=m.envMapIntensity)}function s(h,m,g){h.ior.value=m.ior,m.sheen>0&&(h.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),h.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(h.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(h.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(h.clearcoat.value=m.clearcoat,h.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(h.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(h.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(h.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),h.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===nn&&h.clearcoatNormalScale.value.negate())),m.iridescence>0&&(h.iridescence.value=m.iridescence,h.iridescenceIOR.value=m.iridescenceIOR,h.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],h.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(h.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(h.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(h.transmission.value=m.transmission,h.transmissionSamplerMap.value=g.texture,h.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(h.transmissionMap.value=m.transmissionMap),h.thickness.value=m.thickness,m.thicknessMap&&(h.thicknessMap.value=m.thicknessMap),h.attenuationDistance.value=m.attenuationDistance,h.attenuationColor.value.copy(m.attenuationColor)),h.specularIntensity.value=m.specularIntensity,h.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(h.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(h.specularColorMap.value=m.specularColorMap)}function l(h,m){m.matcap&&(h.matcap.value=m.matcap)}function c(h,m){h.referencePosition.value.copy(m.referencePosition),h.nearDistance.value=m.nearDistance,h.farDistance.value=m.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:e}}function Zv(b,t,r,e){let u={},d={},o=[];const i=r.isWebGL2?b.getParameter(35375):0;function n(y,_){const x=_.program;e.uniformBlockBinding(y,x)}function a(y,_){let x=u[y.id];x===void 0&&(c(y),x=f(y),u[y.id]=x,y.addEventListener("dispose",m));const w=_.program;e.updateUBOMapping(y,w);const j=t.render.frame;d[y.id]!==j&&(s(y),d[y.id]=j)}function f(y){const _=p();y.__bindingPointIndex=_;const x=b.createBuffer(),w=y.__size,j=y.usage;return b.bindBuffer(35345,x),b.bufferData(35345,w,j),b.bindBuffer(35345,null),b.bindBufferBase(35345,_,x),x}function p(){for(let y=0;y<i;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function s(y){const _=u[y.id],x=y.uniforms,w=y.__cache;b.bindBuffer(35345,_);for(let j=0,E=x.length;j<E;j++){const T=x[j];if(l(T,j,w)===!0){const A=T.__offset,R=Array.isArray(T.value)?T.value:[T.value];let P=0;for(let N=0;N<R.length;N++){const O=R[N],D=h(O);typeof O=="number"?(T.__data[0]=O,b.bufferSubData(35345,A+P,T.__data)):O.isMatrix3?(T.__data[0]=O.elements[0],T.__data[1]=O.elements[1],T.__data[2]=O.elements[2],T.__data[3]=O.elements[0],T.__data[4]=O.elements[3],T.__data[5]=O.elements[4],T.__data[6]=O.elements[5],T.__data[7]=O.elements[0],T.__data[8]=O.elements[6],T.__data[9]=O.elements[7],T.__data[10]=O.elements[8],T.__data[11]=O.elements[0]):(O.toArray(T.__data,P),P+=D.storage/Float32Array.BYTES_PER_ELEMENT)}b.bufferSubData(35345,A,T.__data)}}b.bindBuffer(35345,null)}function l(y,_,x){const w=y.value;if(x[_]===void 0){if(typeof w=="number")x[_]=w;else{const j=Array.isArray(w)?w:[w],E=[];for(let T=0;T<j.length;T++)E.push(j[T].clone());x[_]=E}return!0}else if(typeof w=="number"){if(x[_]!==w)return x[_]=w,!0}else{const j=Array.isArray(x[_])?x[_]:[x[_]],E=Array.isArray(w)?w:[w];for(let T=0;T<j.length;T++){const A=j[T];if(A.equals(E[T])===!1)return A.copy(E[T]),!0}}return!1}function c(y){const _=y.uniforms;let x=0;const w=16;let j=0;for(let E=0,T=_.length;E<T;E++){const A=_[E],R={boundary:0,storage:0},P=Array.isArray(A.value)?A.value:[A.value];for(let N=0,O=P.length;N<O;N++){const D=P[N],U=h(D);R.boundary+=U.boundary,R.storage+=U.storage}if(A.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=x,E>0){j=x%w;const N=w-j;j!==0&&N-R.boundary<0&&(x+=w-j,A.__offset=x)}x+=R.storage}return j=x%w,j>0&&(x+=w-j),y.__size=x,y.__cache={},this}function h(y){const _={boundary:0,storage:0};return typeof y=="number"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function m(y){const _=y.target;_.removeEventListener("dispose",m);const x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),b.deleteBuffer(u[_.id]),delete u[_.id],delete d[_.id]}function g(){for(const y in u)b.deleteBuffer(u[y]);o=[],u={},d={}}return{bind:n,update:a,dispose:g}}function Kv(){const b=Gs("canvas");return b.style.display="block",b}function _h(b={}){this.isWebGLRenderer=!0;const t=b.canvas!==void 0?b.canvas:Kv(),r=b.context!==void 0?b.context:null,e=b.depth!==void 0?b.depth:!0,u=b.stencil!==void 0?b.stencil:!0,d=b.antialias!==void 0?b.antialias:!1,o=b.premultipliedAlpha!==void 0?b.premultipliedAlpha:!0,i=b.preserveDrawingBuffer!==void 0?b.preserveDrawingBuffer:!1,n=b.powerPreference!==void 0?b.powerPreference:"default",a=b.failIfMajorPerformanceCaveat!==void 0?b.failIfMajorPerformanceCaveat:!1;let f;r!==null?f=r.getContextAttributes().alpha:f=b.alpha!==void 0?b.alpha:!1;let p=null,s=null;const l=[],c=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ri,this.physicallyCorrectLights=!1,this.toneMapping=_n,this.toneMappingExposure=1;const h=this;let m=!1,g=0,y=0,_=null,x=-1,w=null;const j=new tr,E=new tr;let T=null,A=t.width,R=t.height,P=1,N=null,O=null;const D=new tr(0,0,A,R),U=new tr(0,0,A,R);let Y=!1;const H=new bl;let W=!1,X=!1,Z=null;const q=new Nt,ee=new Ct,L=new De,I={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return _===null?P:1}let V=r;function J(pe,ze){for(let Qe=0;Qe<pe.length;Qe++){const Ge=pe[Qe],$e=t.getContext(Ge,ze);if($e!==null)return $e}return null}try{const pe={alpha:!0,depth:e,stencil:u,antialias:d,premultipliedAlpha:o,preserveDrawingBuffer:i,powerPreference:n,failIfMajorPerformanceCaveat:a};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pl}`),t.addEventListener("webglcontextlost",te,!1),t.addEventListener("webglcontextrestored",ye,!1),t.addEventListener("webglcontextcreationerror",je,!1),V===null){const ze=["webgl2","webgl","experimental-webgl"];if(h.isWebGL1Renderer===!0&&ze.shift(),V=J(ze,pe),V===null)throw J(ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}V.getShaderPrecisionFormat===void 0&&(V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let le,ce,ue,re,de,be,ie,xe,Me,Ee,Se,Ie,Oe,Xe,$,se,Le,Fe,He,We,we,oe,ae,K;function Q(){le=new a0(V),ce=new t0(V,le,b),le.init(ce),oe=new Vv(V,le,ce),ue=new zv(V,le,ce),re=new u0,de=new jv,be=new Gv(V,le,ue,de,ce,oe,re),ie=new n0(h),xe=new o0(h),Me=new bg(V,ce),ae=new $y(V,le,Me,ce),Ee=new l0(V,Me,re,ae),Se=new p0(V,Ee,Me,re),He=new f0(V,ce,be),se=new r0(de),Ie=new Ev(h,ie,xe,le,ce,ae,se),Oe=new Yv(h,de),Xe=new Av,$=new Iv(le,ce),Fe=new Qy(h,ie,xe,ue,Se,f,o),Le=new Bv(h,Se,ce),K=new Zv(V,re,ce,ue),We=new e0(V,le,re,ce),we=new c0(V,le,re,ce),re.programs=Ie.programs,h.capabilities=ce,h.extensions=le,h.properties=de,h.renderLists=Xe,h.shadowMap=Le,h.state=ue,h.info=re}Q();const z=new Xv(h,V);this.xr=z,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const pe=le.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=le.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(pe){pe!==void 0&&(P=pe,this.setSize(A,R,!1))},this.getSize=function(pe){return pe.set(A,R)},this.setSize=function(pe,ze,Qe){if(z.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=pe,R=ze,t.width=Math.floor(pe*P),t.height=Math.floor(ze*P),Qe!==!1&&(t.style.width=pe+"px",t.style.height=ze+"px"),this.setViewport(0,0,pe,ze)},this.getDrawingBufferSize=function(pe){return pe.set(A*P,R*P).floor()},this.setDrawingBufferSize=function(pe,ze,Qe){A=pe,R=ze,P=Qe,t.width=Math.floor(pe*Qe),t.height=Math.floor(ze*Qe),this.setViewport(0,0,pe,ze)},this.getCurrentViewport=function(pe){return pe.copy(j)},this.getViewport=function(pe){return pe.copy(D)},this.setViewport=function(pe,ze,Qe,Ge){pe.isVector4?D.set(pe.x,pe.y,pe.z,pe.w):D.set(pe,ze,Qe,Ge),ue.viewport(j.copy(D).multiplyScalar(P).floor())},this.getScissor=function(pe){return pe.copy(U)},this.setScissor=function(pe,ze,Qe,Ge){pe.isVector4?U.set(pe.x,pe.y,pe.z,pe.w):U.set(pe,ze,Qe,Ge),ue.scissor(E.copy(U).multiplyScalar(P).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(pe){ue.setScissorTest(Y=pe)},this.setOpaqueSort=function(pe){N=pe},this.setTransparentSort=function(pe){O=pe},this.getClearColor=function(pe){return pe.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor.apply(Fe,arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha.apply(Fe,arguments)},this.clear=function(pe=!0,ze=!0,Qe=!0){let Ge=0;pe&&(Ge|=16384),ze&&(Ge|=256),Qe&&(Ge|=1024),V.clear(Ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",te,!1),t.removeEventListener("webglcontextrestored",ye,!1),t.removeEventListener("webglcontextcreationerror",je,!1),Xe.dispose(),$.dispose(),de.dispose(),ie.dispose(),xe.dispose(),Se.dispose(),ae.dispose(),K.dispose(),Ie.dispose(),z.dispose(),z.removeEventListener("sessionstart",rt),z.removeEventListener("sessionend",st),Z&&(Z.dispose(),Z=null),ot.stop()};function te(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const pe=re.autoReset,ze=Le.enabled,Qe=Le.autoUpdate,Ge=Le.needsUpdate,$e=Le.type;Q(),re.autoReset=pe,Le.enabled=ze,Le.autoUpdate=Qe,Le.needsUpdate=Ge,Le.type=$e}function je(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function Pe(pe){const ze=pe.target;ze.removeEventListener("dispose",Pe),Ke(ze)}function Ke(pe){ve(pe),de.remove(pe)}function ve(pe){const ze=de.get(pe).programs;ze!==void 0&&(ze.forEach(function(Qe){Ie.releaseProgram(Qe)}),pe.isShaderMaterial&&Ie.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,ze,Qe,Ge,$e,wt){ze===null&&(ze=I);const Tt=$e.isMesh&&$e.matrixWorld.determinant()<0,jt=Ft(pe,ze,Qe,Ge,$e);ue.setMaterial(Ge,Tt);let ge=Qe.index,Ze=1;Ge.wireframe===!0&&(ge=Ee.getWireframeAttribute(Qe),Ze=2);const it=Qe.drawRange,qe=Qe.attributes.position;let bt=it.start*Ze,Je=(it.start+it.count)*Ze;wt!==null&&(bt=Math.max(bt,wt.start*Ze),Je=Math.min(Je,(wt.start+wt.count)*Ze)),ge!==null?(bt=Math.max(bt,0),Je=Math.min(Je,ge.count)):qe!=null&&(bt=Math.max(bt,0),Je=Math.min(Je,qe.count));const Lt=Je-bt;if(Lt<0||Lt===1/0)return;ae.setup($e,Ge,jt,Qe,ge);let at,St=We;if(ge!==null&&(at=Me.get(ge),St=we,St.setIndex(at)),$e.isMesh)Ge.wireframe===!0?(ue.setLineWidth(Ge.wireframeLinewidth*F()),St.setMode(1)):St.setMode(4);else if($e.isLine){let nt=Ge.linewidth;nt===void 0&&(nt=1),ue.setLineWidth(nt*F()),$e.isLineSegments?St.setMode(1):$e.isLineLoop?St.setMode(2):St.setMode(3)}else $e.isPoints?St.setMode(0):$e.isSprite&&St.setMode(4);if($e.isInstancedMesh)St.renderInstances(bt,Lt,$e.count);else if(Qe.isInstancedBufferGeometry){const nt=Qe._maxInstanceCount!==void 0?Qe._maxInstanceCount:1/0,sr=Math.min(Qe.instanceCount,nt);St.renderInstances(bt,Lt,sr)}else St.render(bt,Lt)},this.compile=function(pe,ze){function Qe(Ge,$e,wt){Ge.transparent===!0&&Ge.side===oo?(Ge.side=nn,Ge.needsUpdate=!0,At(Ge,$e,wt),Ge.side=ei,Ge.needsUpdate=!0,At(Ge,$e,wt),Ge.side=oo):At(Ge,$e,wt)}s=$.get(pe),s.init(),c.push(s),pe.traverseVisible(function(Ge){Ge.isLight&&Ge.layers.test(ze.layers)&&(s.pushLight(Ge),Ge.castShadow&&s.pushShadow(Ge))}),s.setupLights(h.physicallyCorrectLights),pe.traverse(function(Ge){const $e=Ge.material;if($e)if(Array.isArray($e))for(let wt=0;wt<$e.length;wt++){const Tt=$e[wt];Qe(Tt,pe,Ge)}else Qe($e,pe,Ge)}),c.pop(),s=null};let Ce=null;function Be(pe){Ce&&Ce(pe)}function rt(){ot.stop()}function st(){ot.start()}const ot=new mh;ot.setAnimationLoop(Be),typeof self<"u"&&ot.setContext(self),this.setAnimationLoop=function(pe){Ce=pe,z.setAnimationLoop(pe),pe===null?ot.stop():ot.start()},z.addEventListener("sessionstart",rt),z.addEventListener("sessionend",st),this.render=function(pe,ze){if(ze!==void 0&&ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),ze.parent===null&&ze.matrixWorldAutoUpdate===!0&&ze.updateMatrixWorld(),z.enabled===!0&&z.isPresenting===!0&&(z.cameraAutoUpdate===!0&&z.updateCamera(ze),ze=z.getCamera()),pe.isScene===!0&&pe.onBeforeRender(h,pe,ze,_),s=$.get(pe,c.length),s.init(),c.push(s),q.multiplyMatrices(ze.projectionMatrix,ze.matrixWorldInverse),H.setFromProjectionMatrix(q),X=this.localClippingEnabled,W=se.init(this.clippingPlanes,X,ze),p=Xe.get(pe,l.length),p.init(),l.push(p),ft(pe,ze,0,h.sortObjects),p.finish(),h.sortObjects===!0&&p.sort(N,O),W===!0&&se.beginShadows();const Qe=s.state.shadowsArray;if(Le.render(Qe,pe,ze),W===!0&&se.endShadows(),this.info.autoReset===!0&&this.info.reset(),Fe.render(p,pe),s.setupLights(h.physicallyCorrectLights),ze.isArrayCamera){const Ge=ze.cameras;for(let $e=0,wt=Ge.length;$e<wt;$e++){const Tt=Ge[$e];ht(p,pe,Tt,Tt.viewport)}}else ht(p,pe,ze);_!==null&&(be.updateMultisampleRenderTarget(_),be.updateRenderTargetMipmap(_)),pe.isScene===!0&&pe.onAfterRender(h,pe,ze),ae.resetDefaultState(),x=-1,w=null,c.pop(),c.length>0?s=c[c.length-1]:s=null,l.pop(),l.length>0?p=l[l.length-1]:p=null};function ft(pe,ze,Qe,Ge){if(pe.visible===!1)return;if(pe.layers.test(ze.layers)){if(pe.isGroup)Qe=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(ze);else if(pe.isLight)s.pushLight(pe),pe.castShadow&&s.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||H.intersectsSprite(pe)){Ge&&L.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(q);const Tt=Se.update(pe),jt=pe.material;jt.visible&&p.push(pe,Tt,jt,Qe,L.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(pe.isSkinnedMesh&&pe.skeleton.frame!==re.render.frame&&(pe.skeleton.update(),pe.skeleton.frame=re.render.frame),!pe.frustumCulled||H.intersectsObject(pe))){Ge&&L.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(q);const Tt=Se.update(pe),jt=pe.material;if(Array.isArray(jt)){const ge=Tt.groups;for(let Ze=0,it=ge.length;Ze<it;Ze++){const qe=ge[Ze],bt=jt[qe.materialIndex];bt&&bt.visible&&p.push(pe,Tt,bt,Qe,L.z,qe)}}else jt.visible&&p.push(pe,Tt,jt,Qe,L.z,null)}}const wt=pe.children;for(let Tt=0,jt=wt.length;Tt<jt;Tt++)ft(wt[Tt],ze,Qe,Ge)}function ht(pe,ze,Qe,Ge){const $e=pe.opaque,wt=pe.transmissive,Tt=pe.transparent;s.setupLightsView(Qe),wt.length>0&&Bt($e,ze,Qe),Ge&&ue.viewport(j.copy(Ge)),$e.length>0&&Rt($e,ze,Qe),wt.length>0&&Rt(wt,ze,Qe),Tt.length>0&&Rt(Tt,ze,Qe),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function Bt(pe,ze,Qe){const Ge=ce.isWebGL2;Z===null&&(Z=new bi(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")?In:vi,minFilter:ti,samples:Ge&&d===!0?4:0})),h.getDrawingBufferSize(ee),Ge?Z.setSize(ee.x,ee.y):Z.setSize(Go(ee.x),Go(ee.y));const $e=h.getRenderTarget();h.setRenderTarget(Z),h.clear();const wt=h.toneMapping;h.toneMapping=_n,Rt(pe,ze,Qe),h.toneMapping=wt,be.updateMultisampleRenderTarget(Z),be.updateRenderTargetMipmap(Z),h.setRenderTarget($e)}function Rt(pe,ze,Qe){const Ge=ze.isScene===!0?ze.overrideMaterial:null;for(let $e=0,wt=pe.length;$e<wt;$e++){const Tt=pe[$e],jt=Tt.object,ge=Tt.geometry,Ze=Ge===null?Tt.material:Ge,it=Tt.group;jt.layers.test(Qe.layers)&&Wt(jt,ze,Qe,ge,Ze,it)}}function Wt(pe,ze,Qe,Ge,$e,wt){pe.onBeforeRender(h,ze,Qe,Ge,$e,wt),pe.modelViewMatrix.multiplyMatrices(Qe.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),$e.onBeforeRender(h,ze,Qe,Ge,pe,wt),$e.transparent===!0&&$e.side===oo?($e.side=nn,$e.needsUpdate=!0,h.renderBufferDirect(Qe,ze,Ge,$e,pe,wt),$e.side=ei,$e.needsUpdate=!0,h.renderBufferDirect(Qe,ze,Ge,$e,pe,wt),$e.side=oo):h.renderBufferDirect(Qe,ze,Ge,$e,pe,wt),pe.onAfterRender(h,ze,Qe,Ge,$e,wt)}function At(pe,ze,Qe){ze.isScene!==!0&&(ze=I);const Ge=de.get(pe),$e=s.state.lights,wt=s.state.shadowsArray,Tt=$e.state.version,jt=Ie.getParameters(pe,$e.state,wt,ze,Qe),ge=Ie.getProgramCacheKey(jt);let Ze=Ge.programs;Ge.environment=pe.isMeshStandardMaterial?ze.environment:null,Ge.fog=ze.fog,Ge.envMap=(pe.isMeshStandardMaterial?xe:ie).get(pe.envMap||Ge.environment),Ze===void 0&&(pe.addEventListener("dispose",Pe),Ze=new Map,Ge.programs=Ze);let it=Ze.get(ge);if(it!==void 0){if(Ge.currentProgram===it&&Ge.lightsStateVersion===Tt)return Jt(pe,jt),it}else jt.uniforms=Ie.getUniforms(pe),pe.onBuild(Qe,jt,h),pe.onBeforeCompile(jt,h),it=Ie.acquireProgram(jt,ge),Ze.set(ge,it),Ge.uniforms=jt.uniforms;const qe=Ge.uniforms;(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(qe.clippingPlanes=se.uniform),Jt(pe,jt),Ge.needsLights=mr(pe),Ge.lightsStateVersion=Tt,Ge.needsLights&&(qe.ambientLightColor.value=$e.state.ambient,qe.lightProbe.value=$e.state.probe,qe.directionalLights.value=$e.state.directional,qe.directionalLightShadows.value=$e.state.directionalShadow,qe.spotLights.value=$e.state.spot,qe.spotLightShadows.value=$e.state.spotShadow,qe.rectAreaLights.value=$e.state.rectArea,qe.ltc_1.value=$e.state.rectAreaLTC1,qe.ltc_2.value=$e.state.rectAreaLTC2,qe.pointLights.value=$e.state.point,qe.pointLightShadows.value=$e.state.pointShadow,qe.hemisphereLights.value=$e.state.hemi,qe.directionalShadowMap.value=$e.state.directionalShadowMap,qe.directionalShadowMatrix.value=$e.state.directionalShadowMatrix,qe.spotShadowMap.value=$e.state.spotShadowMap,qe.spotLightMatrix.value=$e.state.spotLightMatrix,qe.spotLightMap.value=$e.state.spotLightMap,qe.pointShadowMap.value=$e.state.pointShadowMap,qe.pointShadowMatrix.value=$e.state.pointShadowMatrix);const bt=it.getUniforms(),Je=Oo.seqWithValue(bt.seq,qe);return Ge.currentProgram=it,Ge.uniformsList=Je,it}function Jt(pe,ze){const Qe=de.get(pe);Qe.outputEncoding=ze.outputEncoding,Qe.instancing=ze.instancing,Qe.skinning=ze.skinning,Qe.morphTargets=ze.morphTargets,Qe.morphNormals=ze.morphNormals,Qe.morphColors=ze.morphColors,Qe.morphTargetsCount=ze.morphTargetsCount,Qe.numClippingPlanes=ze.numClippingPlanes,Qe.numIntersection=ze.numClipIntersection,Qe.vertexAlphas=ze.vertexAlphas,Qe.vertexTangents=ze.vertexTangents,Qe.toneMapping=ze.toneMapping}function Ft(pe,ze,Qe,Ge,$e){ze.isScene!==!0&&(ze=I),be.resetTextureUnits();const wt=ze.fog,Tt=Ge.isMeshStandardMaterial?ze.environment:null,jt=_===null?h.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:ri,ge=(Ge.isMeshStandardMaterial?xe:ie).get(Ge.envMap||Tt),Ze=Ge.vertexColors===!0&&!!Qe.attributes.color&&Qe.attributes.color.itemSize===4,it=!!Ge.normalMap&&!!Qe.attributes.tangent,qe=!!Qe.morphAttributes.position,bt=!!Qe.morphAttributes.normal,Je=!!Qe.morphAttributes.color,Lt=Ge.toneMapped?h.toneMapping:_n,at=Qe.morphAttributes.position||Qe.morphAttributes.normal||Qe.morphAttributes.color,St=at!==void 0?at.length:0,nt=de.get(Ge),sr=s.state.lights;if(W===!0&&(X===!0||pe!==w)){const or=pe===w&&Ge.id===x;se.setState(Ge,pe,or)}let kt=!1;Ge.version===nt.__version?(nt.needsLights&&nt.lightsStateVersion!==sr.state.version||nt.outputEncoding!==jt||$e.isInstancedMesh&&nt.instancing===!1||!$e.isInstancedMesh&&nt.instancing===!0||$e.isSkinnedMesh&&nt.skinning===!1||!$e.isSkinnedMesh&&nt.skinning===!0||nt.envMap!==ge||Ge.fog===!0&&nt.fog!==wt||nt.numClippingPlanes!==void 0&&(nt.numClippingPlanes!==se.numPlanes||nt.numIntersection!==se.numIntersection)||nt.vertexAlphas!==Ze||nt.vertexTangents!==it||nt.morphTargets!==qe||nt.morphNormals!==bt||nt.morphColors!==Je||nt.toneMapping!==Lt||ce.isWebGL2===!0&&nt.morphTargetsCount!==St)&&(kt=!0):(kt=!0,nt.__version=Ge.version);let qt=nt.currentProgram;kt===!0&&(qt=At(Ge,ze,$e));let pr=!1,Or=!1,Pr=!1;const rr=qt.getUniforms(),nr=nt.uniforms;if(ue.useProgram(qt.program)&&(pr=!0,Or=!0,Pr=!0),Ge.id!==x&&(x=Ge.id,Or=!0),pr||w!==pe){if(rr.setValue(V,"projectionMatrix",pe.projectionMatrix),ce.logarithmicDepthBuffer&&rr.setValue(V,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),w!==pe&&(w=pe,Or=!0,Pr=!0),Ge.isShaderMaterial||Ge.isMeshPhongMaterial||Ge.isMeshToonMaterial||Ge.isMeshStandardMaterial||Ge.envMap){const or=rr.map.cameraPosition;or!==void 0&&or.setValue(V,L.setFromMatrixPosition(pe.matrixWorld))}(Ge.isMeshPhongMaterial||Ge.isMeshToonMaterial||Ge.isMeshLambertMaterial||Ge.isMeshBasicMaterial||Ge.isMeshStandardMaterial||Ge.isShaderMaterial)&&rr.setValue(V,"isOrthographic",pe.isOrthographicCamera===!0),(Ge.isMeshPhongMaterial||Ge.isMeshToonMaterial||Ge.isMeshLambertMaterial||Ge.isMeshBasicMaterial||Ge.isMeshStandardMaterial||Ge.isShaderMaterial||Ge.isShadowMaterial||$e.isSkinnedMesh)&&rr.setValue(V,"viewMatrix",pe.matrixWorldInverse)}if($e.isSkinnedMesh){rr.setOptional(V,$e,"bindMatrix"),rr.setOptional(V,$e,"bindMatrixInverse");const or=$e.skeleton;or&&(ce.floatVertexTextures?(or.boneTexture===null&&or.computeBoneTexture(),rr.setValue(V,"boneTexture",or.boneTexture,be),rr.setValue(V,"boneTextureSize",or.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Mi=Qe.morphAttributes;if((Mi.position!==void 0||Mi.normal!==void 0||Mi.color!==void 0&&ce.isWebGL2===!0)&&He.update($e,Qe,Ge,qt),(Or||nt.receiveShadow!==$e.receiveShadow)&&(nt.receiveShadow=$e.receiveShadow,rr.setValue(V,"receiveShadow",$e.receiveShadow)),Ge.isMeshGouraudMaterial&&Ge.envMap!==null&&(nr.envMap.value=ge,nr.flipEnvMap.value=ge.isCubeTexture&&ge.isRenderTargetTexture===!1?-1:1),Or&&(rr.setValue(V,"toneMappingExposure",h.toneMappingExposure),nt.needsLights&&wr(nr,Pr),wt&&Ge.fog===!0&&Oe.refreshFogUniforms(nr,wt),Oe.refreshMaterialUniforms(nr,Ge,P,R,Z),Oo.upload(V,nt.uniformsList,nr,be)),Ge.isShaderMaterial&&Ge.uniformsNeedUpdate===!0&&(Oo.upload(V,nt.uniformsList,nr,be),Ge.uniformsNeedUpdate=!1),Ge.isSpriteMaterial&&rr.setValue(V,"center",$e.center),rr.setValue(V,"modelViewMatrix",$e.modelViewMatrix),rr.setValue(V,"normalMatrix",$e.normalMatrix),rr.setValue(V,"modelMatrix",$e.matrixWorld),Ge.isShaderMaterial||Ge.isRawShaderMaterial){const or=Ge.uniformsGroups;for(let mn=0,Ti=or.length;mn<Ti;mn++)if(ce.isWebGL2){const ps=or[mn];K.update(ps,qt),K.bind(ps,qt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qt}function wr(pe,ze){pe.ambientLightColor.needsUpdate=ze,pe.lightProbe.needsUpdate=ze,pe.directionalLights.needsUpdate=ze,pe.directionalLightShadows.needsUpdate=ze,pe.pointLights.needsUpdate=ze,pe.pointLightShadows.needsUpdate=ze,pe.spotLights.needsUpdate=ze,pe.spotLightShadows.needsUpdate=ze,pe.rectAreaLights.needsUpdate=ze,pe.hemisphereLights.needsUpdate=ze}function mr(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(pe,ze,Qe){de.get(pe.texture).__webglTexture=ze,de.get(pe.depthTexture).__webglTexture=Qe;const Ge=de.get(pe);Ge.__hasExternalTextures=!0,Ge.__hasExternalTextures&&(Ge.__autoAllocateDepthBuffer=Qe===void 0,Ge.__autoAllocateDepthBuffer||le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(pe,ze){const Qe=de.get(pe);Qe.__webglFramebuffer=ze,Qe.__useDefaultFramebuffer=ze===void 0},this.setRenderTarget=function(pe,ze=0,Qe=0){_=pe,g=ze,y=Qe;let Ge=!0,$e=null,wt=!1,Tt=!1;if(pe){const ge=de.get(pe);ge.__useDefaultFramebuffer!==void 0?(ue.bindFramebuffer(36160,null),Ge=!1):ge.__webglFramebuffer===void 0?be.setupRenderTarget(pe):ge.__hasExternalTextures&&be.rebindTextures(pe,de.get(pe.texture).__webglTexture,de.get(pe.depthTexture).__webglTexture);const Ze=pe.texture;(Ze.isData3DTexture||Ze.isDataArrayTexture||Ze.isCompressedArrayTexture)&&(Tt=!0);const it=de.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?($e=it[ze],wt=!0):ce.isWebGL2&&pe.samples>0&&be.useMultisampledRTT(pe)===!1?$e=de.get(pe).__webglMultisampledFramebuffer:$e=it,j.copy(pe.viewport),E.copy(pe.scissor),T=pe.scissorTest}else j.copy(D).multiplyScalar(P).floor(),E.copy(U).multiplyScalar(P).floor(),T=Y;if(ue.bindFramebuffer(36160,$e)&&ce.drawBuffers&&Ge&&ue.drawBuffers(pe,$e),ue.viewport(j),ue.scissor(E),ue.setScissorTest(T),wt){const ge=de.get(pe.texture);V.framebufferTexture2D(36160,36064,34069+ze,ge.__webglTexture,Qe)}else if(Tt){const ge=de.get(pe.texture),Ze=ze||0;V.framebufferTextureLayer(36160,36064,ge.__webglTexture,Qe||0,Ze)}x=-1},this.readRenderTargetPixels=function(pe,ze,Qe,Ge,$e,wt,Tt){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jt=de.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&Tt!==void 0&&(jt=jt[Tt]),jt){ue.bindFramebuffer(36160,jt);try{const ge=pe.texture,Ze=ge.format,it=ge.type;if(Ze!==tn&&oe.convert(Ze)!==V.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const qe=it===In&&(le.has("EXT_color_buffer_half_float")||ce.isWebGL2&&le.has("EXT_color_buffer_float"));if(it!==vi&&oe.convert(it)!==V.getParameter(35738)&&!(it===un&&(ce.isWebGL2||le.has("OES_texture_float")||le.has("WEBGL_color_buffer_float")))&&!qe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ze>=0&&ze<=pe.width-Ge&&Qe>=0&&Qe<=pe.height-$e&&V.readPixels(ze,Qe,Ge,$e,oe.convert(Ze),oe.convert(it),wt)}finally{const ge=_!==null?de.get(_).__webglFramebuffer:null;ue.bindFramebuffer(36160,ge)}}},this.copyFramebufferToTexture=function(pe,ze,Qe=0){const Ge=Math.pow(2,-Qe),$e=Math.floor(ze.image.width*Ge),wt=Math.floor(ze.image.height*Ge);be.setTexture2D(ze,0),V.copyTexSubImage2D(3553,Qe,0,0,pe.x,pe.y,$e,wt),ue.unbindTexture()},this.copyTextureToTexture=function(pe,ze,Qe,Ge=0){const $e=ze.image.width,wt=ze.image.height,Tt=oe.convert(Qe.format),jt=oe.convert(Qe.type);be.setTexture2D(Qe,0),V.pixelStorei(37440,Qe.flipY),V.pixelStorei(37441,Qe.premultiplyAlpha),V.pixelStorei(3317,Qe.unpackAlignment),ze.isDataTexture?V.texSubImage2D(3553,Ge,pe.x,pe.y,$e,wt,Tt,jt,ze.image.data):ze.isCompressedTexture?V.compressedTexSubImage2D(3553,Ge,pe.x,pe.y,ze.mipmaps[0].width,ze.mipmaps[0].height,Tt,ze.mipmaps[0].data):V.texSubImage2D(3553,Ge,pe.x,pe.y,Tt,jt,ze.image),Ge===0&&Qe.generateMipmaps&&V.generateMipmap(3553),ue.unbindTexture()},this.copyTextureToTexture3D=function(pe,ze,Qe,Ge,$e=0){if(h.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const wt=pe.max.x-pe.min.x+1,Tt=pe.max.y-pe.min.y+1,jt=pe.max.z-pe.min.z+1,ge=oe.convert(Ge.format),Ze=oe.convert(Ge.type);let it;if(Ge.isData3DTexture)be.setTexture3D(Ge,0),it=32879;else if(Ge.isDataArrayTexture)be.setTexture2DArray(Ge,0),it=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(37440,Ge.flipY),V.pixelStorei(37441,Ge.premultiplyAlpha),V.pixelStorei(3317,Ge.unpackAlignment);const qe=V.getParameter(3314),bt=V.getParameter(32878),Je=V.getParameter(3316),Lt=V.getParameter(3315),at=V.getParameter(32877),St=Qe.isCompressedTexture?Qe.mipmaps[0]:Qe.image;V.pixelStorei(3314,St.width),V.pixelStorei(32878,St.height),V.pixelStorei(3316,pe.min.x),V.pixelStorei(3315,pe.min.y),V.pixelStorei(32877,pe.min.z),Qe.isDataTexture||Qe.isData3DTexture?V.texSubImage3D(it,$e,ze.x,ze.y,ze.z,wt,Tt,jt,ge,Ze,St.data):Qe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),V.compressedTexSubImage3D(it,$e,ze.x,ze.y,ze.z,wt,Tt,jt,ge,St.data)):V.texSubImage3D(it,$e,ze.x,ze.y,ze.z,wt,Tt,jt,ge,Ze,St),V.pixelStorei(3314,qe),V.pixelStorei(32878,bt),V.pixelStorei(3316,Je),V.pixelStorei(3315,Lt),V.pixelStorei(32877,at),$e===0&&Ge.generateMipmaps&&V.generateMipmap(it),ue.unbindTexture()},this.initTexture=function(pe){pe.isCubeTexture?be.setTextureCube(pe,0):pe.isData3DTexture?be.setTexture3D(pe,0):pe.isDataArrayTexture||pe.isCompressedArrayTexture?be.setTexture2DArray(pe,0):be.setTexture2D(pe,0),ue.unbindTexture()},this.resetState=function(){g=0,y=0,_=null,ue.reset(),ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Jv extends _h{}Jv.prototype.isWebGL1Renderer=!0;class Qv extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.backgroundIntensity=this.backgroundIntensity),r}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class $v{constructor(t,r){this.isInterleavedBuffer=!0,this.array=t,this.stride=r,this.count=t!==void 0?t.length/r:0,this.usage=Ya,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=dn()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,e){t*=this.stride,e*=r.stride;for(let u=0,d=this.stride;u<d;u++)this.array[t+u]=r.array[e+u];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=dn()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(r,this.stride);return e.setUsage(this.usage),e}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=dn()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Hr=new De;class Sl{constructor(t,r,e,u=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=r,this.offset=e,this.normalized=u}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,e=this.data.count;r<e;r++)Hr.fromBufferAttribute(this,r),Hr.applyMatrix4(t),this.setXYZ(r,Hr.x,Hr.y,Hr.z);return this}applyNormalMatrix(t){for(let r=0,e=this.count;r<e;r++)Hr.fromBufferAttribute(this,r),Hr.applyNormalMatrix(t),this.setXYZ(r,Hr.x,Hr.y,Hr.z);return this}transformDirection(t){for(let r=0,e=this.count;r<e;r++)Hr.fromBufferAttribute(this,r),Hr.transformDirection(t),this.setXYZ(r,Hr.x,Hr.y,Hr.z);return this}setX(t,r){return this.normalized&&(r=er(r,this.array)),this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.normalized&&(r=er(r,this.array)),this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.normalized&&(r=er(r,this.array)),this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.normalized&&(r=er(r,this.array)),this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){let r=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(r=On(r,this.array)),r}getY(t){let r=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(r=On(r,this.array)),r}getZ(t){let r=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(r=On(r,this.array)),r}getW(t){let r=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(r=On(r,this.array)),r}setXY(t,r,e){return t=t*this.data.stride+this.offset,this.normalized&&(r=er(r,this.array),e=er(e,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=e,this}setXYZ(t,r,e,u){return t=t*this.data.stride+this.offset,this.normalized&&(r=er(r,this.array),e=er(e,this.array),u=er(u,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=e,this.data.array[t+2]=u,this}setXYZW(t,r,e,u,d){return t=t*this.data.stride+this.offset,this.normalized&&(r=er(r,this.array),e=er(e,this.array),u=er(u,this.array),d=er(d,this.array)),this.data.array[t+0]=r,this.data.array[t+1]=e,this.data.array[t+2]=u,this.data.array[t+3]=d,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let e=0;e<this.count;e++){const u=e*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)r.push(this.data.array[u+d])}return new Xr(new this.array.constructor(r),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Sl(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let e=0;e<this.count;e++){const u=e*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)r.push(this.data.array[u+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Wu=new De,qu=new tr,Xu=new tr,eb=new De,Yu=new Nt;class tb extends rn{constructor(t,r){super(t,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Nt,this.bindMatrixInverse=new Nt}copy(t,r){return super.copy(t,r),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,r){this.skeleton=t,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new tr,r=this.geometry.attributes.skinWeight;for(let e=0,u=r.count;e<u;e++){t.fromBufferAttribute(r,e);const d=1/t.manhattanLength();d!==1/0?t.multiplyScalar(d):t.set(1,0,0,0),r.setXYZW(e,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,r){const e=this.skeleton,u=this.geometry;qu.fromBufferAttribute(u.attributes.skinIndex,t),Xu.fromBufferAttribute(u.attributes.skinWeight,t),Wu.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let d=0;d<4;d++){const o=Xu.getComponent(d);if(o!==0){const i=qu.getComponent(d);Yu.multiplyMatrices(e.bones[i].matrixWorld,e.boneInverses[i]),r.addScaledVector(eb.copy(Wu).applyMatrix4(Yu),o)}}return r.applyMatrix4(this.bindMatrixInverse)}}class xh extends cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wh extends Ir{constructor(t=null,r=1,e=1,u,d,o,i,n,a=Lr,f=Lr,p,s){super(null,o,i,n,a,f,u,d,p,s),this.isDataTexture=!0,this.image={data:t,width:r,height:e},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Zu=new Nt,rb=new Nt;class Ml{constructor(t=[],r=[]){this.uuid=dn(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),r.length===0)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,u=this.bones.length;e<u;e++)this.boneInverses.push(new Nt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const e=new Nt;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,r=this.boneInverses,e=this.boneMatrices,u=this.boneTexture;for(let d=0,o=t.length;d<o;d++){const i=t[d]?t[d].matrixWorld:rb;Zu.multiplyMatrices(i,r[d]),Zu.toArray(e,d*16)}u!==null&&(u.needsUpdate=!0)}clone(){return new Ml(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=nh(t),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const e=new wh(r,t,t,tn,un);return e.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=e,this.boneTextureSize=t,this}getBoneByName(t){for(let r=0,e=this.bones.length;r<e;r++){const u=this.bones[r];if(u.name===t)return u}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let e=0,u=t.bones.length;e<u;e++){const d=t.bones[e];let o=r[d];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",d),o=new xh),this.bones.push(o),this.boneInverses.push(new Nt().fromArray(t.boneInverses[e]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,e=this.boneInverses;for(let u=0,d=r.length;u<d;u++){const o=r[u];t.bones.push(o.uuid);const i=e[u];t.boneInverses.push(i.toArray())}return t}}class Ku extends Xr{constructor(t,r,e,u=1){super(t,r,e),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=u}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Ju=new Nt,Qu=new Nt,Eo=[],nb=new Nt,js=new rn;class ib extends rn{constructor(t,r,e){super(t,r),this.isInstancedMesh=!0,this.instanceMatrix=new Ku(new Float32Array(e*16),16),this.instanceColor=null,this.count=e,this.frustumCulled=!1;for(let u=0;u<e;u++)this.setMatrixAt(u,nb)}copy(t,r){return super.copy(t,r),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,r){r.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,t*16)}raycast(t,r){const e=this.matrixWorld,u=this.count;if(js.geometry=this.geometry,js.material=this.material,js.material!==void 0)for(let d=0;d<u;d++){this.getMatrixAt(d,Ju),Qu.multiplyMatrices(e,Ju),js.matrixWorld=Qu,js.raycast(t,Eo);for(let o=0,i=Eo.length;o<i;o++){const n=Eo[o];n.instanceId=d,n.object=this,r.push(n)}Eo.length=0}}setColorAt(t,r){this.instanceColor===null&&(this.instanceColor=new Ku(new Float32Array(this.instanceMatrix.count*3),3)),r.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Sh extends hn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new It(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const $u=new De,ed=new De,td=new Nt,Ra=new vl,jo=new cs;class Tl extends cr{constructor(t=new pn,r=new Sh){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,e=[0];for(let u=1,d=r.count;u<d;u++)$u.fromBufferAttribute(r,u-1),ed.fromBufferAttribute(r,u),e[u]=e[u-1],e[u]+=$u.distanceTo(ed);t.setAttribute("lineDistance",new Un(e,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,r){const e=this.geometry,u=this.matrixWorld,d=t.params.Line.threshold,o=e.drawRange;if(e.boundingSphere===null&&e.computeBoundingSphere(),jo.copy(e.boundingSphere),jo.applyMatrix4(u),jo.radius+=d,t.ray.intersectsSphere(jo)===!1)return;td.copy(u).invert(),Ra.copy(t.ray).applyMatrix4(td);const i=d/((this.scale.x+this.scale.y+this.scale.z)/3),n=i*i,a=new De,f=new De,p=new De,s=new De,l=this.isLineSegments?2:1,c=e.index,m=e.attributes.position;if(c!==null){const g=Math.max(0,o.start),y=Math.min(c.count,o.start+o.count);for(let _=g,x=y-1;_<x;_+=l){const w=c.getX(_),j=c.getX(_+1);if(a.fromBufferAttribute(m,w),f.fromBufferAttribute(m,j),Ra.distanceSqToSegment(a,f,s,p)>n)continue;s.applyMatrix4(this.matrixWorld);const T=t.ray.origin.distanceTo(s);T<t.near||T>t.far||r.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let _=g,x=y-1;_<x;_+=l){if(a.fromBufferAttribute(m,_),f.fromBufferAttribute(m,_+1),Ra.distanceSqToSegment(a,f,s,p)>n)continue;s.applyMatrix4(this.matrixWorld);const j=t.ray.origin.distanceTo(s);j<t.near||j>t.far||r.push({distance:j,point:p.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const u=r[e[0]];if(u!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,o=u.length;d<o;d++){const i=u[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=d}}}}}const rd=new De,nd=new De;class sb extends Tl{constructor(t,r){super(t,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const r=t.attributes.position,e=[];for(let u=0,d=r.count;u<d;u+=2)rd.fromBufferAttribute(r,u),nd.fromBufferAttribute(r,u+1),e[u]=u===0?0:e[u-1],e[u+1]=e[u]+rd.distanceTo(nd);t.setAttribute("lineDistance",new Un(e,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ob extends Tl{constructor(t,r){super(t,r),this.isLineLoop=!0,this.type="LineLoop"}}class Mh extends hn{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new It(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const id=new Nt,Qa=new vl,Co=new cs,Ao=new De;class ab extends cr{constructor(t=new pn,r=new Mh){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t,r){return super.copy(t,r),this.material=t.material,this.geometry=t.geometry,this}raycast(t,r){const e=this.geometry,u=this.matrixWorld,d=t.params.Points.threshold,o=e.drawRange;if(e.boundingSphere===null&&e.computeBoundingSphere(),Co.copy(e.boundingSphere),Co.applyMatrix4(u),Co.radius+=d,t.ray.intersectsSphere(Co)===!1)return;id.copy(u).invert(),Qa.copy(t.ray).applyMatrix4(id);const i=d/((this.scale.x+this.scale.y+this.scale.z)/3),n=i*i,a=e.index,p=e.attributes.position;if(a!==null){const s=Math.max(0,o.start),l=Math.min(a.count,o.start+o.count);for(let c=s,h=l;c<h;c++){const m=a.getX(c);Ao.fromBufferAttribute(p,m),sd(Ao,m,n,u,t,r,this)}}else{const s=Math.max(0,o.start),l=Math.min(p.count,o.start+o.count);for(let c=s,h=l;c<h;c++)Ao.fromBufferAttribute(p,c),sd(Ao,c,n,u,t,r,this)}}updateMorphTargets(){const r=this.geometry.morphAttributes,e=Object.keys(r);if(e.length>0){const u=r[e[0]];if(u!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,o=u.length;d<o;d++){const i=u[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=d}}}}}function sd(b,t,r,e,u,d,o){const i=Qa.distanceSqToPoint(b);if(i<r){const n=new De;Qa.closestPointToPoint(b,n),n.applyMatrix4(e);const a=u.ray.origin.distanceTo(n);if(a<u.near||a>u.far)return;d.push({distance:a,distanceToRay:Math.sqrt(i),point:n,index:t,face:null,object:o})}}class El extends hn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new It(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new It(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gl,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Si extends El{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ct(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new It(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new It(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new It(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class lb extends hn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gl,this.normalScale=new Ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}function Zn(b,t,r){return Th(b)?new b.constructor(b.subarray(t,r!==void 0?r:b.length)):b.slice(t,r)}function Lo(b,t,r){return!b||!r&&b.constructor===t?b:typeof t.BYTES_PER_ELEMENT=="number"?new t(b):Array.prototype.slice.call(b)}function Th(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)}function cb(b){function t(u,d){return b[u]-b[d]}const r=b.length,e=new Array(r);for(let u=0;u!==r;++u)e[u]=u;return e.sort(t),e}function od(b,t,r){const e=b.length,u=new b.constructor(e);for(let d=0,o=0;o!==e;++d){const i=r[d]*t;for(let n=0;n!==t;++n)u[o++]=b[i+n]}return u}function Eh(b,t,r,e){let u=1,d=b[0];for(;d!==void 0&&d[e]===void 0;)d=b[u++];if(d===void 0)return;let o=d[e];if(o!==void 0)if(Array.isArray(o))do o=d[e],o!==void 0&&(t.push(d.time),r.push.apply(r,o)),d=b[u++];while(d!==void 0);else if(o.toArray!==void 0)do o=d[e],o!==void 0&&(t.push(d.time),o.toArray(r,r.length)),d=b[u++];while(d!==void 0);else do o=d[e],o!==void 0&&(t.push(d.time),r.push(o)),d=b[u++];while(d!==void 0)}class Zs{constructor(t,r,e,u){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=u!==void 0?u:new r.constructor(e),this.sampleValues=r,this.valueSize=e,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let e=this._cachedIndex,u=r[e],d=r[e-1];e:{t:{let o;r:{n:if(!(t<u)){for(let i=e+2;;){if(u===void 0){if(t<d)break n;return e=r.length,this._cachedIndex=e,this.copySampleValue_(e-1)}if(e===i)break;if(d=u,u=r[++e],t<u)break t}o=r.length;break r}if(!(t>=d)){const i=r[1];t<i&&(e=2,d=i);for(let n=e-2;;){if(d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(e===n)break;if(u=d,d=r[--e-1],t>=d)break t}o=e,e=0;break r}break e}for(;e<o;){const i=e+o>>>1;t<r[i]?o=i:e=i+1}if(u=r[e],d=r[e-1],d===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(u===void 0)return e=r.length,this._cachedIndex=e,this.copySampleValue_(e-1)}this._cachedIndex=e,this.intervalChanged_(e,d,u)}return this.interpolate_(e,d,t,u)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,e=this.sampleValues,u=this.valueSize,d=t*u;for(let o=0;o!==u;++o)r[o]=e[d+o];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ub extends Zs{constructor(t,r,e,u){super(t,r,e,u),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lu,endingEnd:lu}}intervalChanged_(t,r,e){const u=this.parameterPositions;let d=t-2,o=t+1,i=u[d],n=u[o];if(i===void 0)switch(this.getSettings_().endingStart){case cu:d=t,i=2*r-e;break;case uu:d=u.length-2,i=r+u[d]-u[d+1];break;default:d=t,i=e}if(n===void 0)switch(this.getSettings_().endingEnd){case cu:o=t,n=2*e-r;break;case uu:o=1,n=e+u[1]-u[0];break;default:o=t-1,n=r}const a=(e-r)*.5,f=this.valueSize;this._weightPrev=a/(r-i),this._weightNext=a/(n-e),this._offsetPrev=d*f,this._offsetNext=o*f}interpolate_(t,r,e,u){const d=this.resultBuffer,o=this.sampleValues,i=this.valueSize,n=t*i,a=n-i,f=this._offsetPrev,p=this._offsetNext,s=this._weightPrev,l=this._weightNext,c=(e-r)/(u-r),h=c*c,m=h*c,g=-s*m+2*s*h-s*c,y=(1+s)*m+(-1.5-2*s)*h+(-.5+s)*c+1,_=(-1-l)*m+(1.5+l)*h+.5*c,x=l*m-l*h;for(let w=0;w!==i;++w)d[w]=g*o[f+w]+y*o[a+w]+_*o[n+w]+x*o[p+w];return d}}class db extends Zs{constructor(t,r,e,u){super(t,r,e,u)}interpolate_(t,r,e,u){const d=this.resultBuffer,o=this.sampleValues,i=this.valueSize,n=t*i,a=n-i,f=(e-r)/(u-r),p=1-f;for(let s=0;s!==i;++s)d[s]=o[a+s]*p+o[n+s]*f;return d}}class hb extends Zs{constructor(t,r,e,u){super(t,r,e,u)}interpolate_(t){return this.copySampleValue_(t-1)}}class wn{constructor(t,r,e,u){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Lo(r,this.TimeBufferType),this.values=Lo(e,this.ValueBufferType),this.setInterpolation(u||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let e;if(r.toJSON!==this.toJSON)e=r.toJSON(t);else{e={name:t.name,times:Lo(t.times,Array),values:Lo(t.values,Array)};const u=t.getInterpolation();u!==t.DefaultInterpolation&&(e.interpolation=u)}return e.type=t.ValueTypeName,e}InterpolantFactoryMethodDiscrete(t){return new hb(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new db(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new ub(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Fs:r=this.InterpolantFactoryMethodDiscrete;break;case ss:r=this.InterpolantFactoryMethodLinear;break;case sa:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(e);return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fs;case this.InterpolantFactoryMethodLinear:return ss;case this.InterpolantFactoryMethodSmooth:return sa}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const r=this.times;for(let e=0,u=r.length;e!==u;++e)r[e]+=t}return this}scale(t){if(t!==1){const r=this.times;for(let e=0,u=r.length;e!==u;++e)r[e]*=t}return this}trim(t,r){const e=this.times,u=e.length;let d=0,o=u-1;for(;d!==u&&e[d]<t;)++d;for(;o!==-1&&e[o]>r;)--o;if(++o,d!==0||o!==u){d>=o&&(o=Math.max(o,1),d=o-1);const i=this.getValueSize();this.times=Zn(e,d,o),this.values=Zn(this.values,d*i,o*i)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const e=this.times,u=this.values,d=e.length;d===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let i=0;i!==d;i++){const n=e[i];if(typeof n=="number"&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,n),t=!1;break}if(o!==null&&o>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,n,o),t=!1;break}o=n}if(u!==void 0&&Th(u))for(let i=0,n=u.length;i!==n;++i){const a=u[i];if(isNaN(a)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,i,a),t=!1;break}}return t}optimize(){const t=Zn(this.times),r=Zn(this.values),e=this.getValueSize(),u=this.getInterpolation()===sa,d=t.length-1;let o=1;for(let i=1;i<d;++i){let n=!1;const a=t[i],f=t[i+1];if(a!==f&&(i!==1||a!==t[0]))if(u)n=!0;else{const p=i*e,s=p-e,l=p+e;for(let c=0;c!==e;++c){const h=r[p+c];if(h!==r[s+c]||h!==r[l+c]){n=!0;break}}}if(n){if(i!==o){t[o]=t[i];const p=i*e,s=o*e;for(let l=0;l!==e;++l)r[s+l]=r[p+l]}++o}}if(d>0){t[o]=t[d];for(let i=d*e,n=o*e,a=0;a!==e;++a)r[n+a]=r[i+a];++o}return o!==t.length?(this.times=Zn(t,0,o),this.values=Zn(r,0,o*e)):(this.times=t,this.values=r),this}clone(){const t=Zn(this.times,0),r=Zn(this.values,0),e=this.constructor,u=new e(this.name,t,r);return u.createInterpolant=this.createInterpolant,u}}wn.prototype.TimeBufferType=Float32Array;wn.prototype.ValueBufferType=Float32Array;wn.prototype.DefaultInterpolation=ss;class ds extends wn{}ds.prototype.ValueTypeName="bool";ds.prototype.ValueBufferType=Array;ds.prototype.DefaultInterpolation=Fs;ds.prototype.InterpolantFactoryMethodLinear=void 0;ds.prototype.InterpolantFactoryMethodSmooth=void 0;class jh extends wn{}jh.prototype.ValueTypeName="color";class Vs extends wn{}Vs.prototype.ValueTypeName="number";class fb extends Zs{constructor(t,r,e,u){super(t,r,e,u)}interpolate_(t,r,e,u){const d=this.resultBuffer,o=this.sampleValues,i=this.valueSize,n=(e-r)/(u-r);let a=t*i;for(let f=a+i;a!==f;a+=4)xn.slerpFlat(d,0,o,a-i,o,a,n);return d}}class xi extends wn{InterpolantFactoryMethodLinear(t){return new fb(this.times,this.values,this.getValueSize(),t)}}xi.prototype.ValueTypeName="quaternion";xi.prototype.DefaultInterpolation=ss;xi.prototype.InterpolantFactoryMethodSmooth=void 0;class hs extends wn{}hs.prototype.ValueTypeName="string";hs.prototype.ValueBufferType=Array;hs.prototype.DefaultInterpolation=Fs;hs.prototype.InterpolantFactoryMethodLinear=void 0;hs.prototype.InterpolantFactoryMethodSmooth=void 0;class Hs extends wn{}Hs.prototype.ValueTypeName="vector";class pb{constructor(t,r=-1,e,u=Dm){this.name=t,this.tracks=e,this.duration=r,this.blendMode=u,this.uuid=dn(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],e=t.tracks,u=1/(t.fps||1);for(let o=0,i=e.length;o!==i;++o)r.push(gb(e[o]).scale(u));const d=new this(t.name,t.duration,r,t.blendMode);return d.uuid=t.uuid,d}static toJSON(t){const r=[],e=t.tracks,u={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let d=0,o=e.length;d!==o;++d)r.push(wn.toJSON(e[d]));return u}static CreateFromMorphTargetSequence(t,r,e,u){const d=r.length,o=[];for(let i=0;i<d;i++){let n=[],a=[];n.push((i+d-1)%d,i,(i+1)%d),a.push(0,1,0);const f=cb(n);n=od(n,1,f),a=od(a,1,f),!u&&n[0]===0&&(n.push(d),a.push(a[0])),o.push(new Vs(".morphTargetInfluences["+r[i].name+"]",n,a).scale(1/e))}return new this(t,-1,o)}static findByName(t,r){let e=t;if(!Array.isArray(t)){const u=t;e=u.geometry&&u.geometry.animations||u.animations}for(let u=0;u<e.length;u++)if(e[u].name===r)return e[u];return null}static CreateClipsFromMorphTargetSequences(t,r,e){const u={},d=/^([\w-]*?)([\d]+)$/;for(let i=0,n=t.length;i<n;i++){const a=t[i],f=a.name.match(d);if(f&&f.length>1){const p=f[1];let s=u[p];s||(u[p]=s=[]),s.push(a)}}const o=[];for(const i in u)o.push(this.CreateFromMorphTargetSequence(i,u[i],r,e));return o}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const e=function(p,s,l,c,h){if(l.length!==0){const m=[],g=[];Eh(l,m,g,c),m.length!==0&&h.push(new p(s,m,g))}},u=[],d=t.name||"default",o=t.fps||30,i=t.blendMode;let n=t.length||-1;const a=t.hierarchy||[];for(let p=0;p<a.length;p++){const s=a[p].keys;if(!(!s||s.length===0))if(s[0].morphTargets){const l={};let c;for(c=0;c<s.length;c++)if(s[c].morphTargets)for(let h=0;h<s[c].morphTargets.length;h++)l[s[c].morphTargets[h]]=-1;for(const h in l){const m=[],g=[];for(let y=0;y!==s[c].morphTargets.length;++y){const _=s[c];m.push(_.time),g.push(_.morphTarget===h?1:0)}u.push(new Vs(".morphTargetInfluence["+h+"]",m,g))}n=l.length*o}else{const l=".bones["+r[p].name+"]";e(Hs,l+".position",s,"pos",u),e(xi,l+".quaternion",s,"rot",u),e(Hs,l+".scale",s,"scl",u)}}return u.length===0?null:new this(d,n,u,i)}resetDuration(){const t=this.tracks;let r=0;for(let e=0,u=t.length;e!==u;++e){const d=this.tracks[e];r=Math.max(r,d.times[d.times.length-1])}return this.duration=r,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function mb(b){switch(b.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vs;case"vector":case"vector2":case"vector3":case"vector4":return Hs;case"color":return jh;case"quaternion":return xi;case"bool":case"boolean":return ds;case"string":return hs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+b)}function gb(b){if(b.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=mb(b.type);if(b.times===void 0){const r=[],e=[];Eh(b.keys,r,e,"value"),b.times=r,b.values=e}return t.parse!==void 0?t.parse(b):new t(b.name,b.times,b.values,b.interpolation)}const as={enabled:!1,files:{},add:function(b,t){this.enabled!==!1&&(this.files[b]=t)},get:function(b){if(this.enabled!==!1)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}};class yb{constructor(t,r,e){const u=this;let d=!1,o=0,i=0,n;const a=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=e,this.itemStart=function(f){i++,d===!1&&u.onStart!==void 0&&u.onStart(f,o,i),d=!0},this.itemEnd=function(f){o++,u.onProgress!==void 0&&u.onProgress(f,o,i),o===i&&(d=!1,u.onLoad!==void 0&&u.onLoad())},this.itemError=function(f){u.onError!==void 0&&u.onError(f)},this.resolveURL=function(f){return n?n(f):f},this.setURLModifier=function(f){return n=f,this},this.addHandler=function(f,p){return a.push(f,p),this},this.removeHandler=function(f){const p=a.indexOf(f);return p!==-1&&a.splice(p,2),this},this.getHandler=function(f){for(let p=0,s=a.length;p<s;p+=2){const l=a[p],c=a[p+1];if(l.global&&(l.lastIndex=0),l.test(f))return c}return null}}}const vb=new yb;class fs{constructor(t){this.manager=t!==void 0?t:vb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){const e=this;return new Promise(function(u,d){e.load(t,u,r,d)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Ln={};class bb extends Error{constructor(t,r){super(t),this.response=r}}class jl extends fs{constructor(t){super(t)}load(t,r,e,u){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const d=as.get(t);if(d!==void 0)return this.manager.itemStart(t),setTimeout(()=>{r&&r(d),this.manager.itemEnd(t)},0),d;if(Ln[t]!==void 0){Ln[t].push({onLoad:r,onProgress:e,onError:u});return}Ln[t]=[],Ln[t].push({onLoad:r,onProgress:e,onError:u});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),i=this.mimeType,n=this.responseType;fetch(o).then(a=>{if(a.status===200||a.status===0){if(a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||a.body===void 0||a.body.getReader===void 0)return a;const f=Ln[t],p=a.body.getReader(),s=a.headers.get("Content-Length")||a.headers.get("X-File-Size"),l=s?parseInt(s):0,c=l!==0;let h=0;const m=new ReadableStream({start(g){y();function y(){p.read().then(({done:_,value:x})=>{if(_)g.close();else{h+=x.byteLength;const w=new ProgressEvent("progress",{lengthComputable:c,loaded:h,total:l});for(let j=0,E=f.length;j<E;j++){const T=f[j];T.onProgress&&T.onProgress(w)}g.enqueue(x),y()}})}}});return new Response(m)}else throw new bb(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`,a)}).then(a=>{switch(n){case"arraybuffer":return a.arrayBuffer();case"blob":return a.blob();case"document":return a.text().then(f=>new DOMParser().parseFromString(f,i));case"json":return a.json();default:if(i===void 0)return a.text();{const p=/charset="?([^;"\s]*)"?/i.exec(i),s=p&&p[1]?p[1].toLowerCase():void 0,l=new TextDecoder(s);return a.arrayBuffer().then(c=>l.decode(c))}}}).then(a=>{as.add(t,a);const f=Ln[t];delete Ln[t];for(let p=0,s=f.length;p<s;p++){const l=f[p];l.onLoad&&l.onLoad(a)}}).catch(a=>{const f=Ln[t];if(f===void 0)throw this.manager.itemError(t),a;delete Ln[t];for(let p=0,s=f.length;p<s;p++){const l=f[p];l.onError&&l.onError(a)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class _b extends fs{constructor(t){super(t)}load(t,r,e,u){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const d=this,o=as.get(t);if(o!==void 0)return d.manager.itemStart(t),setTimeout(function(){r&&r(o),d.manager.itemEnd(t)},0),o;const i=Gs("img");function n(){f(),as.add(t,this),r&&r(this),d.manager.itemEnd(t)}function a(p){f(),u&&u(p),d.manager.itemError(t),d.manager.itemEnd(t)}function f(){i.removeEventListener("load",n,!1),i.removeEventListener("error",a,!1)}return i.addEventListener("load",n,!1),i.addEventListener("error",a,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(i.crossOrigin=this.crossOrigin),d.manager.itemStart(t),i.src=t,i}}class xb extends fs{constructor(t){super(t)}load(t,r,e,u){const d=this,o=new wh,i=new jl(this.manager);return i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setPath(this.path),i.setWithCredentials(d.withCredentials),i.load(t,function(n){const a=d.parse(n);a&&(a.image!==void 0?o.image=a.image:a.data!==void 0&&(o.image.width=a.width,o.image.height=a.height,o.image.data=a.data),o.wrapS=a.wrapS!==void 0?a.wrapS:Yr,o.wrapT=a.wrapT!==void 0?a.wrapT:Yr,o.magFilter=a.magFilter!==void 0?a.magFilter:Mr,o.minFilter=a.minFilter!==void 0?a.minFilter:Mr,o.anisotropy=a.anisotropy!==void 0?a.anisotropy:1,a.encoding!==void 0&&(o.encoding=a.encoding),a.flipY!==void 0&&(o.flipY=a.flipY),a.format!==void 0&&(o.format=a.format),a.type!==void 0&&(o.type=a.type),a.mipmaps!==void 0&&(o.mipmaps=a.mipmaps,o.minFilter=ti),a.mipmapCount===1&&(o.minFilter=Mr),a.generateMipmaps!==void 0&&(o.generateMipmaps=a.generateMipmaps),o.needsUpdate=!0,r&&r(o,a))},e,u),o}}class wb extends fs{constructor(t){super(t)}load(t,r,e,u){const d=new Ir,o=new _b(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){d.image=i,d.needsUpdate=!0,r!==void 0&&r(d)},e,u),d}}class qo extends cr{constructor(t,r=1){super(),this.isLight=!0,this.type="Light",this.color=new It(t),this.intensity=r}dispose(){}copy(t,r){return super.copy(t,r),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),r}}const Pa=new Nt,ad=new De,ld=new De;class Cl{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ct(512,512),this.map=null,this.mapPass=null,this.matrix=new Nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bl,this._frameExtents=new Ct(1,1),this._viewportCount=1,this._viewports=[new tr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,e=this.matrix;ad.setFromMatrixPosition(t.matrixWorld),r.position.copy(ad),ld.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(ld),r.updateMatrixWorld(),Pa.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pa),e.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),e.multiply(Pa)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Sb extends Cl{constructor(){super(new qr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const r=this.camera,e=zs*2*t.angle*this.focus,u=this.mapSize.width/this.mapSize.height,d=t.distance||r.far;(e!==r.fov||u!==r.aspect||d!==r.far)&&(r.fov=e,r.aspect=u,r.far=d,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Mb extends qo{constructor(t,r,e=0,u=Math.PI/3,d=0,o=2){super(t,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(cr.DefaultUp),this.updateMatrix(),this.target=new cr,this.distance=e,this.angle=u,this.penumbra=d,this.decay=o,this.map=null,this.shadow=new Sb}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const cd=new Nt,Cs=new De,Da=new De;class Tb extends Cl{constructor(){super(new qr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ct(4,2),this._viewportCount=6,this._viewports=[new tr(2,1,1,1),new tr(0,1,1,1),new tr(3,1,1,1),new tr(1,1,1,1),new tr(3,0,1,1),new tr(1,0,1,1)],this._cubeDirections=[new De(1,0,0),new De(-1,0,0),new De(0,0,1),new De(0,0,-1),new De(0,1,0),new De(0,-1,0)],this._cubeUps=[new De(0,1,0),new De(0,1,0),new De(0,1,0),new De(0,1,0),new De(0,0,1),new De(0,0,-1)]}updateMatrices(t,r=0){const e=this.camera,u=this.matrix,d=t.distance||e.far;d!==e.far&&(e.far=d,e.updateProjectionMatrix()),Cs.setFromMatrixPosition(t.matrixWorld),e.position.copy(Cs),Da.copy(e.position),Da.add(this._cubeDirections[r]),e.up.copy(this._cubeUps[r]),e.lookAt(Da),e.updateMatrixWorld(),u.makeTranslation(-Cs.x,-Cs.y,-Cs.z),cd.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cd)}}class Eb extends qo{constructor(t,r,e=0,u=2){super(t,r),this.isPointLight=!0,this.type="PointLight",this.distance=e,this.decay=u,this.shadow=new Tb}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,r){return super.copy(t,r),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class jb extends Cl{constructor(){super(new xl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}let Ch=class extends qo{constructor(t,r){super(t,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DefaultUp),this.updateMatrix(),this.target=new cr,this.shadow=new jb}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},Cb=class extends qo{constructor(t,r){super(t,r),this.isAmbientLight=!0,this.type="AmbientLight"}};class yi{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let r="";for(let e=0,u=t.length;e<u;e++)r+=String.fromCharCode(t[e]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return r===-1?"./":t.slice(0,r+1)}static resolveURL(t,r){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(t)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:r+t)}}class Ab extends fs{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,e,u){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const d=this,o=as.get(t);if(o!==void 0)return d.manager.itemStart(t),setTimeout(function(){r&&r(o),d.manager.itemEnd(t)},0),o;const i={};i.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",i.headers=this.requestHeader,fetch(t,i).then(function(n){return n.blob()}).then(function(n){return createImageBitmap(n,Object.assign(d.options,{colorSpaceConversion:"none"}))}).then(function(n){as.add(t,n),r&&r(n),d.manager.itemEnd(t)}).catch(function(n){u&&u(n),d.manager.itemError(t),d.manager.itemEnd(t)}),d.manager.itemStart(t)}}const Al="\\[\\]\\.:\\/",Lb=new RegExp("["+Al+"]","g"),Ll="[^"+Al+"]",Rb="[^"+Al.replace("\\.","")+"]",Pb=/((?:WC+[\/:])*)/.source.replace("WC",Ll),Db=/(WCOD+)?/.source.replace("WCOD",Rb),kb=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ll),Ib=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ll),Ob=new RegExp("^"+Pb+Db+kb+Ib+"$"),Nb=["material","materials","bones","map"];class Ub{constructor(t,r,e){const u=e||Zt.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,u)}getValue(t,r){this.bind();const e=this._targetGroup.nCachedObjects_,u=this._bindings[e];u!==void 0&&u.getValue(t,r)}setValue(t,r){const e=this._bindings;for(let u=this._targetGroup.nCachedObjects_,d=e.length;u!==d;++u)e[u].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,e=t.length;r!==e;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,e=t.length;r!==e;++r)t[r].unbind()}}class Zt{constructor(t,r,e){this.path=r,this.parsedPath=e||Zt.parseTrackName(r),this.node=Zt.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,e){return t&&t.isAnimationObjectGroup?new Zt.Composite(t,r,e):new Zt(t,r,e)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Lb,"")}static parseTrackName(t){const r=Ob.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const e={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},u=e.nodeName&&e.nodeName.lastIndexOf(".");if(u!==void 0&&u!==-1){const d=e.nodeName.substring(u+1);Nb.indexOf(d)!==-1&&(e.nodeName=e.nodeName.substring(0,u),e.objectName=d)}if(e.propertyName===null||e.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){const e=t.skeleton.getBoneByName(r);if(e!==void 0)return e}if(t.children){const e=function(d){for(let o=0;o<d.length;o++){const i=d[o];if(i.name===r||i.uuid===r)return i;const n=e(i.children);if(n)return n}return null},u=e(t.children);if(u)return u}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const e=this.resolvedProperty;for(let u=0,d=e.length;u!==d;++u)t[r++]=e[u]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const e=this.resolvedProperty;for(let u=0,d=e.length;u!==d;++u)e[u]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const e=this.resolvedProperty;for(let u=0,d=e.length;u!==d;++u)e[u]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const e=this.resolvedProperty;for(let u=0,d=e.length;u!==d;++u)e[u]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,e=r.objectName,u=r.propertyName;let d=r.propertyIndex;if(t||(t=Zt.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(e){let a=r.objectIndex;switch(e){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===a){a=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[e]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[e]}if(a!==void 0){if(t[a]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[a]}}const o=t[u];if(o===void 0){const a=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+a+"."+u+" but it wasn't found.",t);return}let i=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?i=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(i=this.Versioning.MatrixWorldNeedsUpdate);let n=this.BindingType.Direct;if(d!==void 0){if(u==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[d]!==void 0&&(d=t.morphTargetDictionary[d])}n=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=d}else o.fromArray!==void 0&&o.toArray!==void 0?(n=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(n=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=u;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][i]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zt.Composite=Ub;Zt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Zt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Zt.prototype.GetterByBindingType=[Zt.prototype._getValue_direct,Zt.prototype._getValue_array,Zt.prototype._getValue_arrayElement,Zt.prototype._getValue_toArray];Zt.prototype.SetterByBindingTypeAndVersioning=[[Zt.prototype._setValue_direct,Zt.prototype._setValue_direct_setNeedsUpdate,Zt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_array,Zt.prototype._setValue_array_setNeedsUpdate,Zt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_arrayElement,Zt.prototype._setValue_arrayElement_setNeedsUpdate,Zt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_fromArray,Zt.prototype._setValue_fromArray_setNeedsUpdate,Zt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ud{constructor(t=1,r=0,e=0){return this.radius=t,this.phi=r,this.theta=e,this}set(t,r,e){return this.radius=t,this.phi=r,this.theta=e,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,e){return this.radius=Math.sqrt(t*t+r*r+e*e),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,e),this.phi=Math.acos(kr(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Dn=Fb();function Fb(){const b=new ArrayBuffer(4),t=new Float32Array(b),r=new Uint32Array(b),e=new Uint32Array(512),u=new Uint32Array(512);for(let n=0;n<256;++n){const a=n-127;a<-27?(e[n]=0,e[n|256]=32768,u[n]=24,u[n|256]=24):a<-14?(e[n]=1024>>-a-14,e[n|256]=1024>>-a-14|32768,u[n]=-a-1,u[n|256]=-a-1):a<=15?(e[n]=a+15<<10,e[n|256]=a+15<<10|32768,u[n]=13,u[n|256]=13):a<128?(e[n]=31744,e[n|256]=64512,u[n]=24,u[n|256]=24):(e[n]=31744,e[n|256]=64512,u[n]=13,u[n|256]=13)}const d=new Uint32Array(2048),o=new Uint32Array(64),i=new Uint32Array(64);for(let n=1;n<1024;++n){let a=n<<13,f=0;for(;!(a&8388608);)a<<=1,f-=8388608;a&=-8388609,f+=947912704,d[n]=a|f}for(let n=1024;n<2048;++n)d[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)o[n]=n<<23;o[31]=1199570944,o[32]=2147483648;for(let n=33;n<63;++n)o[n]=2147483648+(n-32<<23);o[63]=3347054592;for(let n=1;n<64;++n)n!==32&&(i[n]=1024);return{floatView:t,uint32View:r,baseTable:e,shiftTable:u,mantissaTable:d,exponentTable:o,offsetTable:i}}function Bb(b){Math.abs(b)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),b=kr(b,-65504,65504),Dn.floatView[0]=b;const t=Dn.uint32View[0],r=t>>23&511;return Dn.baseTable[r]+((t&8388607)>>Dn.shiftTable[r])}function zb(b){const t=b>>10;return Dn.uint32View[0]=Dn.mantissaTable[Dn.offsetTable[t]+(b&1023)]+Dn.exponentTable[t],Dn.floatView[0]}var Ro=Object.freeze({__proto__:null,toHalfFloat:Bb,fromHalfFloat:zb});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pl);const Ah={},dd={};function Ks(b){const t=pc(Ah),r=pc(dd)||t.scene;return b&&(Bd(dd,b),r.add(b),cl(()=>{r.remove(b),t.invalidate()})),{root:t,parent:r,self:b}}function Gb(b){return Bd(Ah,b),b}function Vb(b){Od(b,"svelte-1uqz219",".container.svelte-1uqz219,canvas.svelte-1uqz219{position:absolute;width:100%;height:100%;left:0;top:0}")}function hd(b){let t;const r=b[37].default,e=nl(r,b,b[36],null);return{c(){e&&e.c()},m(u,d){e&&e.m(u,d),t=!0},p(u,d){e&&e.p&&(!t||d[1]&32)&&sl(e,r,u,u[36],t?il(r,u[36],d,null):ol(u[36]),null)},i(u){t||(xt(e,u),t=!0)},o(u){Mt(e,u),t=!1},d(u){e&&e.d(u)}}}function Hb(b){let t,r,e,u,d,o,i=b[0].scene&&hd(b);return{c(){t=tt("div"),r=tt("canvas"),e=_t(),i&&i.c(),me(r,"class","svelte-1uqz219"),me(t,"class","container svelte-1uqz219")},m(n,a){lt(n,t,a),Ae(t,r),b[38](r),Ae(t,e),i&&i.m(t,null),b[39](t),u=!0,d||(o=Nn(window,"resize",b[2]),d=!0)},p(n,a){n[0].scene?i?(i.p(n,a),a[0]&1&&xt(i,1)):(i=hd(n),i.c(),xt(i,1),i.m(t,null)):i&&(Fn(),Mt(i,1,1,()=>{i=null}),Bn())},i(n){u||(xt(i),u=!0)},o(n){Mt(i),u=!1},d(n){n&&dt(t),b[38](null),i&&i.d(),b[39](null),d=!1,o()}}}function Wb(b,t,r){let{$$slots:e={},$$scope:u}=t,{background:d=null}=t,{environment:o=null}=t,{fog:i=null}=t,{overrideMaterial:n=null}=t,{precision:a="highp"}=t,{powerPreference:f="default"}=t,{alpha:p=!1}=t,{premultipliedAlpha:s=!0}=t,{antialias:l=!1}=t,{stencil:c=!0}=t,{preserveDrawingBuffer:h=!1}=t,{failIfMajorPerformanceCaveat:m=!1}=t,{depth:g=!0}=t,{logarithmicDepthBuffer:y=!1}=t,{autoClear:_=!0}=t,{autoClearColor:x=!0}=t,{autoClearDepth:w=!0}=t,{autoClearStencil:j=!0}=t,{checkShaderErrors:E=!0}=t,{gammaFactor:T=2}=t,{localClippingEnabled:A=!1}=t,{physicallyCorrectLights:R=!1}=t,{outputEncoding:P=void 0}=t,{clippingPlanes:N=[]}=t,{shadows:O=void 0}=t,{toneMapping:D=_n}=t,{toneMappingExposure:U=1}=t,{width:Y=void 0}=t,{height:H=void 0}=t,{pixelRatio:W=typeof devicePixelRatio<"u"?devicePixelRatio:1}=t;function X(){return J.renderer.info}let Z,q,ee,L=null;const I=re=>re(),F=()=>{L||(L=requestAnimationFrame(()=>{L=null,V.forEach(I),J.renderer.render(J.scene,J.camera.object)}))},V=[],J=Gb({canvas:null,scene:null,renderer:null,camera:{object:null,callback:()=>{console.warn("no camera is set")},set:(re,de)=>{r(0,J.camera.object=re,J),r(0,J.camera.callback=de,J),J.controls.callback&&J.controls.callback(J.camera.object,J.canvas),F()}},controls:{object:null,callback:null,set:re=>{r(0,J.controls.callback=re,J),J.camera.object&&r(0,J.controls.object=re(J.camera.object,J.canvas),J)}},before_render(re){V.push(re),cl(()=>{const de=V.indexOf(re);V.splice(de,1)})},invalidate:F});si(()=>(r(0,J.renderer=new _h({canvas:J.canvas,precision:a,powerPreference:f,alpha:p,premultipliedAlpha:s,antialias:l,stencil:c,preserveDrawingBuffer:h,failIfMajorPerformanceCaveat:m,depth:g,logarithmicDepthBuffer:y}),J),r(0,J.scene=new Qv,J),le(),()=>{console.log("disposing of renderer"),J.renderer.forceContextLoss(),J.renderer.dispose()}));const le=()=>{Y===void 0&&r(34,Z=ee.clientWidth/W),H===void 0&&r(35,q=ee.clientHeight/W)};function ce(re){$i[re?"unshift":"push"](()=>{J.canvas=re,r(0,J),r(3,d),r(4,o),r(5,i),r(6,n),r(17,_),r(18,x),r(19,w),r(20,j),r(21,E),r(22,T),r(23,A),r(24,R),r(25,P),r(26,N),r(28,D),r(29,U),r(27,O)})}function ue(re){$i[re?"unshift":"push"](()=>{ee=re,r(1,ee)})}return b.$$set=re=>{"background"in re&&r(3,d=re.background),"environment"in re&&r(4,o=re.environment),"fog"in re&&r(5,i=re.fog),"overrideMaterial"in re&&r(6,n=re.overrideMaterial),"precision"in re&&r(7,a=re.precision),"powerPreference"in re&&r(8,f=re.powerPreference),"alpha"in re&&r(9,p=re.alpha),"premultipliedAlpha"in re&&r(10,s=re.premultipliedAlpha),"antialias"in re&&r(11,l=re.antialias),"stencil"in re&&r(12,c=re.stencil),"preserveDrawingBuffer"in re&&r(13,h=re.preserveDrawingBuffer),"failIfMajorPerformanceCaveat"in re&&r(14,m=re.failIfMajorPerformanceCaveat),"depth"in re&&r(15,g=re.depth),"logarithmicDepthBuffer"in re&&r(16,y=re.logarithmicDepthBuffer),"autoClear"in re&&r(17,_=re.autoClear),"autoClearColor"in re&&r(18,x=re.autoClearColor),"autoClearDepth"in re&&r(19,w=re.autoClearDepth),"autoClearStencil"in re&&r(20,j=re.autoClearStencil),"checkShaderErrors"in re&&r(21,E=re.checkShaderErrors),"gammaFactor"in re&&r(22,T=re.gammaFactor),"localClippingEnabled"in re&&r(23,A=re.localClippingEnabled),"physicallyCorrectLights"in re&&r(24,R=re.physicallyCorrectLights),"outputEncoding"in re&&r(25,P=re.outputEncoding),"clippingPlanes"in re&&r(26,N=re.clippingPlanes),"shadows"in re&&r(27,O=re.shadows),"toneMapping"in re&&r(28,D=re.toneMapping),"toneMappingExposure"in re&&r(29,U=re.toneMappingExposure),"width"in re&&r(30,Y=re.width),"height"in re&&r(31,H=re.height),"pixelRatio"in re&&r(32,W=re.pixelRatio),"$$scope"in re&&r(36,u=re.$$scope)},b.$$.update=()=>{if(b.$$.dirty[0]&121&&J.scene&&(r(0,J.scene.background=d,J),r(0,J.scene.environment=o,J),r(0,J.scene.fog=i,J),r(0,J.scene.overrideMaterial=n,J)),b.$$.dirty[0]&1073610753&&J.renderer&&(r(0,J.renderer.autoClear=_,J),r(0,J.renderer.autoClearColor=x,J),r(0,J.renderer.autoClearDepth=w,J),r(0,J.renderer.autoClearStencil=j,J),r(0,J.renderer.debug.checkShaderErrors=E,J),r(0,J.renderer.gammaFactor=T,J),r(0,J.renderer.localClippingEnabled=A,J),r(0,J.renderer.physicallyCorrectLights=R,J),P!=null&&r(0,J.renderer.outputEncoding=P,J),r(0,J.renderer.clippingPlanes=N,J),r(0,J.renderer.toneMapping=D,J),r(0,J.renderer.toneMappingExposure=U,J),O?(r(0,J.renderer.shadowMap.enabled=!0,J),r(0,J.renderer.shadowMap.autoUpdate=!0,J),r(0,J.renderer.shadowMap.type=O===!0?ml:O,J)):r(0,J.renderer.shadowMap.enabled=!1,J),F()),b.$$.dirty[0]&1073741825|b.$$.dirty[1]&27&&J.renderer){const re=Y!==void 0?Y:Z,de=H!==void 0?H:q;J.renderer.setSize(re,de,!1),J.camera.callback(re,de),J.renderer.setPixelRatio(W),F()}},[J,ee,le,d,o,i,n,a,f,p,s,l,c,h,m,g,y,_,x,w,j,E,T,A,R,P,N,O,D,U,Y,H,W,X,Z,q,u,e,ce,ue]}class qb extends Rr{constructor(t){super(),Ut(this,t,Wb,Hb,Ot,{background:3,environment:4,fog:5,overrideMaterial:6,precision:7,powerPreference:8,alpha:9,premultipliedAlpha:10,antialias:11,stencil:12,preserveDrawingBuffer:13,failIfMajorPerformanceCaveat:14,depth:15,logarithmicDepthBuffer:16,autoClear:17,autoClearColor:18,autoClearDepth:19,autoClearStencil:20,checkShaderErrors:21,gammaFactor:22,localClippingEnabled:23,physicallyCorrectLights:24,outputEncoding:25,clippingPlanes:26,shadows:27,toneMapping:28,toneMappingExposure:29,width:30,height:31,pixelRatio:32,info:33},Vb,[-1,-1])}get info(){return this.$$.ctx[33]}}function Xb(b,t,r,e){b.position.set(t[0],t[1],t[2]),b.rotation.set(r[0],r[1],r[2],r[3]),typeof e=="number"?b.scale.set(e,e,e):b.scale.set(e[0],e[1],e[2])}let Yb=[0,0,0],Zb=[0,0,0],Kb=[1,1,1];new pn;new lb;function fd(b){let t;const r=b[6].default,e=nl(r,b,b[5],null);return{c(){e&&e.c()},m(u,d){e&&e.m(u,d),t=!0},p(u,d){e&&e.p&&(!t||d&32)&&sl(e,r,u,u[5],t?il(r,u[5],d,null):ol(u[5]),null)},i(u){t||(xt(e,u),t=!0)},o(u){Mt(e,u),t=!1},d(u){e&&e.d(u)}}}function Jb(b){let t,r,e=b[0]&&fd(b);return{c(){e&&e.c(),t=zn()},m(u,d){e&&e.m(u,d),lt(u,t,d),r=!0},p(u,[d]){u[0]?e?(e.p(u,d),d&1&&xt(e,1)):(e=fd(u),e.c(),xt(e,1),e.m(t.parentNode,t)):e&&(Fn(),Mt(e,1,1,()=>{e=null}),Bn())},i(u){r||(xt(e),r=!0)},o(u){Mt(e),r=!1},d(u){e&&e.d(u),u&&dt(t)}}}function Qb(b,t,r){let{$$slots:e={},$$scope:u}=t,{object:d}=t,{position:o=Yb}=t,{rotation:i=Zb}=t,{scale:n=Kb}=t;const{root:a,self:f}=Ks(new cr);let p;return b.$$set=s=>{"object"in s&&r(0,d=s.object),"position"in s&&r(1,o=s.position),"rotation"in s&&r(2,i=s.rotation),"scale"in s&&r(3,n=s.scale),"$$scope"in s&&r(5,u=s.$$scope)},b.$$.update=()=>{b.$$.dirty&17&&(p&&f.remove(p),d&&f.add(d),r(4,p=d),a.invalidate()),b.$$.dirty&14&&(Xb(f,o,i,n),a.invalidate())},[d,o,i,n,p,u,e]}class $b extends Rr{constructor(t){super(),Ut(this,t,Qb,Jb,Ot,{object:0,position:1,rotation:2,scale:3})}}function e_(b,t,r){let{fov:e=45}=t,{near:u=.1}=t,{far:d=2e3}=t,{zoom:o=1}=t,{viewOffset:i=void 0}=t,{position:n=[0,0,5]}=t,{target:a=[0,0,0]}=t;const{root:f,self:p}=Ks(new qr),s=new De;return f.camera.set(p,(l,c)=>{r(7,p.aspect=l/c,p),p.updateProjectionMatrix()}),b.$$set=l=>{"fov"in l&&r(0,e=l.fov),"near"in l&&r(1,u=l.near),"far"in l&&r(2,d=l.far),"zoom"in l&&r(3,o=l.zoom),"viewOffset"in l&&r(4,i=l.viewOffset),"position"in l&&r(5,n=l.position),"target"in l&&r(6,a=l.target)},b.$$.update=()=>{b.$$.dirty&255&&(r(7,p.fov=e,p),r(7,p.near=u,p),r(7,p.far=d,p),r(7,p.zoom=o,p),i&&p.setViewOffset(i.fullWidth,i.fullHeight,i.x,i.y,i.width,i.height),p.position.set(n[0],n[1],n[2]),s.set(a[0],a[1],a[2]),p.lookAt(s),p.updateProjectionMatrix(),f.invalidate())},[e,u,d,o,i,n,a,p]}class t_ extends Rr{constructor(t){super(),Ut(this,t,e_,null,Ot,{fov:0,near:1,far:2,zoom:3,viewOffset:4,position:5,target:6})}}const pd={type:"change"},ka={type:"start"},md={type:"end"};class r_ extends wi{constructor(t,r){super(),this.object=t,this.domElement=r,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new De,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Rn.ROTATE,MIDDLE:Rn.DOLLY,RIGHT:Rn.PAN},this.touches={ONE:Jn.ROTATE,TWO:Jn.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return i.phi},this.getAzimuthalAngle=function(){return i.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(oe){oe.addEventListener("keydown",Xe),this._domElementKeyEvents=oe},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(pd),e.update(),d=u.NONE},this.update=function(){const oe=new De,ae=new xn().setFromUnitVectors(t.up,new De(0,1,0)),K=ae.clone().invert(),Q=new De,z=new xn,te=2*Math.PI;return function(){const je=e.object.position;oe.copy(je).sub(e.target),oe.applyQuaternion(ae),i.setFromVector3(oe),e.autoRotate&&d===u.NONE&&A(E()),e.enableDamping?(i.theta+=n.theta*e.dampingFactor,i.phi+=n.phi*e.dampingFactor):(i.theta+=n.theta,i.phi+=n.phi);let Pe=e.minAzimuthAngle,Ke=e.maxAzimuthAngle;return isFinite(Pe)&&isFinite(Ke)&&(Pe<-Math.PI?Pe+=te:Pe>Math.PI&&(Pe-=te),Ke<-Math.PI?Ke+=te:Ke>Math.PI&&(Ke-=te),Pe<=Ke?i.theta=Math.max(Pe,Math.min(Ke,i.theta)):i.theta=i.theta>(Pe+Ke)/2?Math.max(Pe,i.theta):Math.min(Ke,i.theta)),i.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,i.phi)),i.makeSafe(),i.radius*=a,i.radius=Math.max(e.minDistance,Math.min(e.maxDistance,i.radius)),e.enableDamping===!0?e.target.addScaledVector(f,e.dampingFactor):e.target.add(f),oe.setFromSpherical(i),oe.applyQuaternion(K),je.copy(e.target).add(oe),e.object.lookAt(e.target),e.enableDamping===!0?(n.theta*=1-e.dampingFactor,n.phi*=1-e.dampingFactor,f.multiplyScalar(1-e.dampingFactor)):(n.set(0,0,0),f.set(0,0,0)),a=1,p||Q.distanceToSquared(e.object.position)>o||8*(1-z.dot(e.object.quaternion))>o?(e.dispatchEvent(pd),Q.copy(e.object.position),z.copy(e.object.quaternion),p=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Le),e.domElement.removeEventListener("pointerdown",ie),e.domElement.removeEventListener("pointercancel",Ee),e.domElement.removeEventListener("wheel",Oe),e.domElement.removeEventListener("pointermove",xe),e.domElement.removeEventListener("pointerup",Me),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Xe)};const e=this,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const o=1e-6,i=new ud,n=new ud;let a=1;const f=new De;let p=!1;const s=new Ct,l=new Ct,c=new Ct,h=new Ct,m=new Ct,g=new Ct,y=new Ct,_=new Ct,x=new Ct,w=[],j={};function E(){return 2*Math.PI/60/60*e.autoRotateSpeed}function T(){return Math.pow(.95,e.zoomSpeed)}function A(oe){n.theta-=oe}function R(oe){n.phi-=oe}const P=function(){const oe=new De;return function(K,Q){oe.setFromMatrixColumn(Q,0),oe.multiplyScalar(-K),f.add(oe)}}(),N=function(){const oe=new De;return function(K,Q){e.screenSpacePanning===!0?oe.setFromMatrixColumn(Q,1):(oe.setFromMatrixColumn(Q,0),oe.crossVectors(e.object.up,oe)),oe.multiplyScalar(K),f.add(oe)}}(),O=function(){const oe=new De;return function(K,Q){const z=e.domElement;if(e.object.isPerspectiveCamera){const te=e.object.position;oe.copy(te).sub(e.target);let ye=oe.length();ye*=Math.tan(e.object.fov/2*Math.PI/180),P(2*K*ye/z.clientHeight,e.object.matrix),N(2*Q*ye/z.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(P(K*(e.object.right-e.object.left)/e.object.zoom/z.clientWidth,e.object.matrix),N(Q*(e.object.top-e.object.bottom)/e.object.zoom/z.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function D(oe){e.object.isPerspectiveCamera?a/=oe:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*oe)),e.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function U(oe){e.object.isPerspectiveCamera?a*=oe:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/oe)),e.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Y(oe){s.set(oe.clientX,oe.clientY)}function H(oe){y.set(oe.clientX,oe.clientY)}function W(oe){h.set(oe.clientX,oe.clientY)}function X(oe){l.set(oe.clientX,oe.clientY),c.subVectors(l,s).multiplyScalar(e.rotateSpeed);const ae=e.domElement;A(2*Math.PI*c.x/ae.clientHeight),R(2*Math.PI*c.y/ae.clientHeight),s.copy(l),e.update()}function Z(oe){_.set(oe.clientX,oe.clientY),x.subVectors(_,y),x.y>0?D(T()):x.y<0&&U(T()),y.copy(_),e.update()}function q(oe){m.set(oe.clientX,oe.clientY),g.subVectors(m,h).multiplyScalar(e.panSpeed),O(g.x,g.y),h.copy(m),e.update()}function ee(oe){oe.deltaY<0?U(T()):oe.deltaY>0&&D(T()),e.update()}function L(oe){let ae=!1;switch(oe.code){case e.keys.UP:oe.ctrlKey||oe.metaKey||oe.shiftKey?R(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):O(0,e.keyPanSpeed),ae=!0;break;case e.keys.BOTTOM:oe.ctrlKey||oe.metaKey||oe.shiftKey?R(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):O(0,-e.keyPanSpeed),ae=!0;break;case e.keys.LEFT:oe.ctrlKey||oe.metaKey||oe.shiftKey?A(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):O(e.keyPanSpeed,0),ae=!0;break;case e.keys.RIGHT:oe.ctrlKey||oe.metaKey||oe.shiftKey?A(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):O(-e.keyPanSpeed,0),ae=!0;break}ae&&(oe.preventDefault(),e.update())}function I(){if(w.length===1)s.set(w[0].pageX,w[0].pageY);else{const oe=.5*(w[0].pageX+w[1].pageX),ae=.5*(w[0].pageY+w[1].pageY);s.set(oe,ae)}}function F(){if(w.length===1)h.set(w[0].pageX,w[0].pageY);else{const oe=.5*(w[0].pageX+w[1].pageX),ae=.5*(w[0].pageY+w[1].pageY);h.set(oe,ae)}}function V(){const oe=w[0].pageX-w[1].pageX,ae=w[0].pageY-w[1].pageY,K=Math.sqrt(oe*oe+ae*ae);y.set(0,K)}function J(){e.enableZoom&&V(),e.enablePan&&F()}function le(){e.enableZoom&&V(),e.enableRotate&&I()}function ce(oe){if(w.length==1)l.set(oe.pageX,oe.pageY);else{const K=we(oe),Q=.5*(oe.pageX+K.x),z=.5*(oe.pageY+K.y);l.set(Q,z)}c.subVectors(l,s).multiplyScalar(e.rotateSpeed);const ae=e.domElement;A(2*Math.PI*c.x/ae.clientHeight),R(2*Math.PI*c.y/ae.clientHeight),s.copy(l)}function ue(oe){if(w.length===1)m.set(oe.pageX,oe.pageY);else{const ae=we(oe),K=.5*(oe.pageX+ae.x),Q=.5*(oe.pageY+ae.y);m.set(K,Q)}g.subVectors(m,h).multiplyScalar(e.panSpeed),O(g.x,g.y),h.copy(m)}function re(oe){const ae=we(oe),K=oe.pageX-ae.x,Q=oe.pageY-ae.y,z=Math.sqrt(K*K+Q*Q);_.set(0,z),x.set(0,Math.pow(_.y/y.y,e.zoomSpeed)),D(x.y),y.copy(_)}function de(oe){e.enableZoom&&re(oe),e.enablePan&&ue(oe)}function be(oe){e.enableZoom&&re(oe),e.enableRotate&&ce(oe)}function ie(oe){e.enabled!==!1&&(w.length===0&&(e.domElement.setPointerCapture(oe.pointerId),e.domElement.addEventListener("pointermove",xe),e.domElement.addEventListener("pointerup",Me)),Fe(oe),oe.pointerType==="touch"?$(oe):Se(oe))}function xe(oe){e.enabled!==!1&&(oe.pointerType==="touch"?se(oe):Ie(oe))}function Me(oe){He(oe),w.length===0&&(e.domElement.releasePointerCapture(oe.pointerId),e.domElement.removeEventListener("pointermove",xe),e.domElement.removeEventListener("pointerup",Me)),e.dispatchEvent(md),d=u.NONE}function Ee(oe){He(oe)}function Se(oe){let ae;switch(oe.button){case 0:ae=e.mouseButtons.LEFT;break;case 1:ae=e.mouseButtons.MIDDLE;break;case 2:ae=e.mouseButtons.RIGHT;break;default:ae=-1}switch(ae){case Rn.DOLLY:if(e.enableZoom===!1)return;H(oe),d=u.DOLLY;break;case Rn.ROTATE:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(e.enablePan===!1)return;W(oe),d=u.PAN}else{if(e.enableRotate===!1)return;Y(oe),d=u.ROTATE}break;case Rn.PAN:if(oe.ctrlKey||oe.metaKey||oe.shiftKey){if(e.enableRotate===!1)return;Y(oe),d=u.ROTATE}else{if(e.enablePan===!1)return;W(oe),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&e.dispatchEvent(ka)}function Ie(oe){switch(d){case u.ROTATE:if(e.enableRotate===!1)return;X(oe);break;case u.DOLLY:if(e.enableZoom===!1)return;Z(oe);break;case u.PAN:if(e.enablePan===!1)return;q(oe);break}}function Oe(oe){e.enabled===!1||e.enableZoom===!1||d!==u.NONE||(oe.preventDefault(),e.dispatchEvent(ka),ee(oe),e.dispatchEvent(md))}function Xe(oe){e.enabled===!1||e.enablePan===!1||L(oe)}function $(oe){switch(We(oe),w.length){case 1:switch(e.touches.ONE){case Jn.ROTATE:if(e.enableRotate===!1)return;I(),d=u.TOUCH_ROTATE;break;case Jn.PAN:if(e.enablePan===!1)return;F(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(e.touches.TWO){case Jn.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;J(),d=u.TOUCH_DOLLY_PAN;break;case Jn.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;le(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&e.dispatchEvent(ka)}function se(oe){switch(We(oe),d){case u.TOUCH_ROTATE:if(e.enableRotate===!1)return;ce(oe),e.update();break;case u.TOUCH_PAN:if(e.enablePan===!1)return;ue(oe),e.update();break;case u.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;de(oe),e.update();break;case u.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;be(oe),e.update();break;default:d=u.NONE}}function Le(oe){e.enabled!==!1&&oe.preventDefault()}function Fe(oe){w.push(oe)}function He(oe){delete j[oe.pointerId];for(let ae=0;ae<w.length;ae++)if(w[ae].pointerId==oe.pointerId){w.splice(ae,1);return}}function We(oe){let ae=j[oe.pointerId];ae===void 0&&(ae=new Ct,j[oe.pointerId]=ae),ae.set(oe.pageX,oe.pageY)}function we(oe){const ae=oe.pointerId===w[0].pointerId?w[1]:w[0];return j[ae.pointerId]}e.domElement.addEventListener("contextmenu",Le),e.domElement.addEventListener("pointerdown",ie),e.domElement.addEventListener("pointercancel",Ee),e.domElement.addEventListener("wheel",Oe,{passive:!1}),this.update()}}function Lh(b){si(()=>{let t;return requestAnimationFrame(function r(){t=requestAnimationFrame(r),b()}),()=>{cancelAnimationFrame(t)}})}function n_(b,t,r){let{autoRotate:e=!1}=t,{autoRotateSpeed:u=2}=t,{dampingFactor:d=.05}=t,{enableDamping:o=!1}=t,{enabled:i=!0}=t,{enablePan:n=!0}=t,{enableRotate:a=!0}=t,{enableZoom:f=!0}=t,{keyPanSpeed:p=7}=t,{keys:s={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}}=t,{maxAzimuthAngle:l=1/0}=t,{maxDistance:c=1/0}=t,{maxPolarAngle:h=Math.PI}=t,{maxZoom:m=1/0}=t,{minAzimuthAngle:g=1/0}=t,{minDistance:y=0}=t,{minPolarAngle:_=0}=t,{minZoom:x=0}=t,{mouseButtons:w={LEFT:Rn.ROTATE,MIDDLE:Rn.DOLLY,RIGHT:Rn.PAN}}=t,{panSpeed:j=1}=t,{rotateSpeed:E=1}=t,{screenSpacePanning:T=!0}=t,{touches:A={ONE:Jn.ROTATE,TWO:Jn.DOLLY_PAN}}=t,{zoomSpeed:R=1}=t,{target:P=[0,0,0]}=t;const{root:N}=Ks(),O=of();let D;return N.controls.set((U,Y)=>(r(25,D=new r_(U,Y)),D.addEventListener("start",H=>{O("start",H)}),D.addEventListener("end",H=>{O("end",H)}),D.addEventListener("change",H=>{O("change",H),(!P||D.target.x!==P[0]||D.target.y!==P[1]||D.target.z!==P[2])&&r(0,P=[D.target.x,D.target.y,D.target.z]),N.invalidate()}),D)),Lh(()=>{D&&(e||o)&&D.update()}),b.$$set=U=>{"autoRotate"in U&&r(1,e=U.autoRotate),"autoRotateSpeed"in U&&r(2,u=U.autoRotateSpeed),"dampingFactor"in U&&r(3,d=U.dampingFactor),"enableDamping"in U&&r(4,o=U.enableDamping),"enabled"in U&&r(5,i=U.enabled),"enablePan"in U&&r(6,n=U.enablePan),"enableRotate"in U&&r(7,a=U.enableRotate),"enableZoom"in U&&r(8,f=U.enableZoom),"keyPanSpeed"in U&&r(9,p=U.keyPanSpeed),"keys"in U&&r(10,s=U.keys),"maxAzimuthAngle"in U&&r(11,l=U.maxAzimuthAngle),"maxDistance"in U&&r(12,c=U.maxDistance),"maxPolarAngle"in U&&r(13,h=U.maxPolarAngle),"maxZoom"in U&&r(14,m=U.maxZoom),"minAzimuthAngle"in U&&r(15,g=U.minAzimuthAngle),"minDistance"in U&&r(16,y=U.minDistance),"minPolarAngle"in U&&r(17,_=U.minPolarAngle),"minZoom"in U&&r(18,x=U.minZoom),"mouseButtons"in U&&r(19,w=U.mouseButtons),"panSpeed"in U&&r(20,j=U.panSpeed),"rotateSpeed"in U&&r(21,E=U.rotateSpeed),"screenSpacePanning"in U&&r(22,T=U.screenSpacePanning),"touches"in U&&r(23,A=U.touches),"zoomSpeed"in U&&r(24,R=U.zoomSpeed),"target"in U&&r(0,P=U.target)},b.$$.update=()=>{b.$$.dirty&67108862&&D&&(r(25,D.autoRotate=e,D),r(25,D.autoRotateSpeed=u,D),r(25,D.dampingFactor=d,D),r(25,D.enableDamping=o,D),r(25,D.enabled=i,D),r(25,D.enablePan=n,D),r(25,D.enableRotate=a,D),r(25,D.enableZoom=f,D),r(25,D.keyPanSpeed=p,D),r(25,D.keys=s,D),r(25,D.maxAzimuthAngle=l,D),r(25,D.maxDistance=c,D),r(25,D.maxPolarAngle=h,D),r(25,D.maxZoom=m,D),r(25,D.minAzimuthAngle=g,D),r(25,D.minDistance=y,D),r(25,D.minPolarAngle=_,D),r(25,D.minZoom=x,D),r(25,D.mouseButtons=w,D),r(25,D.panSpeed=j,D),r(25,D.rotateSpeed=E,D),r(25,D.screenSpacePanning=T,D),r(25,D.touches=A,D),r(25,D.zoomSpeed=R,D),D.update()),b.$$.dirty&33554433&&P&&(D.target.x!==P[0]||D.target.y!==P[1]||D.target.z!==P[2])&&(D.target.set(P[0],P[1],P[2]),D.update())},[P,e,u,d,o,i,n,a,f,p,s,l,c,h,m,g,y,_,x,w,j,E,T,A,R,D]}class i_ extends Rr{constructor(t){super(),Ut(this,t,n_,null,Ot,{autoRotate:1,autoRotateSpeed:2,dampingFactor:3,enableDamping:4,enabled:5,enablePan:6,enableRotate:7,enableZoom:8,keyPanSpeed:9,keys:10,maxAzimuthAngle:11,maxDistance:12,maxPolarAngle:13,maxZoom:14,minAzimuthAngle:15,minDistance:16,minPolarAngle:17,minZoom:18,mouseButtons:19,panSpeed:20,rotateSpeed:21,screenSpacePanning:22,touches:23,zoomSpeed:24,target:0})}}function s_(b,t,r){let{color:e=16777215}=t,{intensity:u=1}=t;const{root:d,self:o}=Ks(new Cb(e,u));return b.$$set=i=>{"color"in i&&r(0,e=i.color),"intensity"in i&&r(1,u=i.intensity)},b.$$.update=()=>{b.$$.dirty&7&&(o.color.set(e),r(2,o.intensity=u,o),d.invalidate())},[e,u,o]}class o_ extends Rr{constructor(t){super(),Ut(this,t,s_,null,Ot,{color:0,intensity:1})}}function a_(b,t,r){let{color:e=16777215}=t,{intensity:u=1}=t,{position:d=[0,1,0]}=t,{target:o=[0,0,0]}=t,{shadow:i=null}=t;const{root:n,self:a}=Ks(new Ch);return b.$$set=f=>{"color"in f&&r(0,e=f.color),"intensity"in f&&r(1,u=f.intensity),"position"in f&&r(2,d=f.position),"target"in f&&r(3,o=f.target),"shadow"in f&&r(4,i=f.shadow)},b.$$.update=()=>{if(b.$$.dirty&47&&(a.color.set(e),r(5,a.intensity=u,a),a.position.set(d[0],d[1],d[2]),a.target.position.set(o[0],o[1],o[2]),n.invalidate()),b.$$.dirty&48){if(i){const{mapSize:f=[512,512],camera:{left:p=-5,bottom:s=-5,right:l=5,top:c=5,near:h=.5,far:m=500}={},bias:g=0,radius:y=1}=i===!0?{}:i;a.shadow.mapSize.set(f[0],f[1]),r(5,a.shadow.camera.left=p,a),r(5,a.shadow.camera.top=c,a),r(5,a.shadow.camera.right=l,a),r(5,a.shadow.camera.bottom=s,a),r(5,a.shadow.camera.near=h,a),r(5,a.shadow.camera.far=m,a),r(5,a.shadow.bias=g,a),r(5,a.shadow.radius=y,a),r(5,a.castShadow=!0,a)}else r(5,a.castShadow=!1,a);n.invalidate()}},[e,u,d,o,i,a]}class l_ extends Rr{constructor(t){super(),Ut(this,t,a_,null,Ot,{color:0,intensity:1,position:2,target:3,shadow:4})}}class c_ extends fs{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new p_(r)}),this.register(function(r){return new x_(r)}),this.register(function(r){return new w_(r)}),this.register(function(r){return new g_(r)}),this.register(function(r){return new y_(r)}),this.register(function(r){return new v_(r)}),this.register(function(r){return new b_(r)}),this.register(function(r){return new f_(r)}),this.register(function(r){return new __(r)}),this.register(function(r){return new m_(r)}),this.register(function(r){return new d_(r)}),this.register(function(r){return new S_(r)}),this.register(function(r){return new M_(r)})}load(t,r,e,u){const d=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=yi.extractUrlBase(t),this.manager.itemStart(t);const i=function(a){u?u(a):console.error(a),d.manager.itemError(t),d.manager.itemEnd(t)},n=new jl(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(t,function(a){try{d.parse(a,o,function(f){r(f),d.manager.itemEnd(t)},i)}catch(f){i(f)}},e,i)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,e,u){let d;const o={},i={};if(typeof t=="string")d=JSON.parse(t);else if(t instanceof ArrayBuffer)if(yi.decodeText(new Uint8Array(t,0,4))===Rh){try{o[Gt.KHR_BINARY_GLTF]=new T_(t)}catch(f){u&&u(f);return}d=JSON.parse(o[Gt.KHR_BINARY_GLTF].content)}else d=JSON.parse(yi.decodeText(new Uint8Array(t)));else d=t;if(d.asset===void 0||d.asset.version[0]<2){u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const n=new U_(d,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});n.fileLoader.setRequestHeader(this.requestHeader);for(let a=0;a<this.pluginCallbacks.length;a++){const f=this.pluginCallbacks[a](n);i[f.name]=f,o[f.name]=!0}if(d.extensionsUsed)for(let a=0;a<d.extensionsUsed.length;++a){const f=d.extensionsUsed[a],p=d.extensionsRequired||[];switch(f){case Gt.KHR_MATERIALS_UNLIT:o[f]=new h_;break;case Gt.KHR_DRACO_MESH_COMPRESSION:o[f]=new E_(d,this.dracoLoader);break;case Gt.KHR_TEXTURE_TRANSFORM:o[f]=new j_;break;case Gt.KHR_MESH_QUANTIZATION:o[f]=new C_;break;default:p.indexOf(f)>=0&&i[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}n.setExtensions(o),n.setPlugins(i),n.parse(e,u)}parseAsync(t,r){const e=this;return new Promise(function(u,d){e.parse(t,r,u,d)})}}function u_(){let b={};return{get:function(t){return b[t]},add:function(t,r){b[t]=r},remove:function(t){delete b[t]},removeAll:function(){b={}}}}const Gt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class d_{constructor(t){this.parser=t,this.name=Gt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let e=0,u=r.length;e<u;e++){const d=r[e];d.extensions&&d.extensions[this.name]&&d.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,d.extensions[this.name].light)}}_loadLight(t){const r=this.parser,e="light:"+t;let u=r.cache.get(e);if(u)return u;const d=r.json,n=((d.extensions&&d.extensions[this.name]||{}).lights||[])[t];let a;const f=new It(16777215);n.color!==void 0&&f.fromArray(n.color);const p=n.range!==void 0?n.range:0;switch(n.type){case"directional":a=new Ch(f),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Eb(f),a.distance=p;break;case"spot":a=new Mb(f),a.distance=p,n.spot=n.spot||{},n.spot.innerConeAngle=n.spot.innerConeAngle!==void 0?n.spot.innerConeAngle:0,n.spot.outerConeAngle=n.spot.outerConeAngle!==void 0?n.spot.outerConeAngle:Math.PI/4,a.angle=n.spot.outerConeAngle,a.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+n.type)}return a.position.set(0,0,0),a.decay=2,Qn(a,n),n.intensity!==void 0&&(a.intensity=n.intensity),a.name=r.createUniqueName(n.name||"light_"+t),u=Promise.resolve(a),r.cache.add(e,u),u}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,e=this.parser,d=e.json.nodes[t],i=(d.extensions&&d.extensions[this.name]||{}).light;return i===void 0?null:this._loadLight(i).then(function(n){return e._getNodeRef(r.cache,i,n)})}}class h_{constructor(){this.name=Gt.KHR_MATERIALS_UNLIT}getMaterialType(){return fi}extendParams(t,r,e){const u=[];t.color=new It(1,1,1),t.opacity=1;const d=r.pbrMetallicRoughness;if(d){if(Array.isArray(d.baseColorFactor)){const o=d.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}d.baseColorTexture!==void 0&&u.push(e.assignTexture(t,"map",d.baseColorTexture,Vt))}return Promise.all(u)}}class f_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const u=this.parser.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=u.extensions[this.name].emissiveStrength;return d!==void 0&&(r.emissiveIntensity=d),Promise.resolve()}}class p_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const e=this.parser,u=e.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=[],o=u.extensions[this.name];if(o.clearcoatFactor!==void 0&&(r.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&d.push(e.assignTexture(r,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&d.push(e.assignTexture(r,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(d.push(e.assignTexture(r,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const i=o.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new Ct(i,i)}return Promise.all(d)}}class m_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const e=this.parser,u=e.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=[],o=u.extensions[this.name];return o.iridescenceFactor!==void 0&&(r.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&d.push(e.assignTexture(r,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(r.iridescenceIOR=o.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&d.push(e.assignTexture(r,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(d)}}class g_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const e=this.parser,u=e.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=[];r.sheenColor=new It(0,0,0),r.sheenRoughness=0,r.sheen=1;const o=u.extensions[this.name];return o.sheenColorFactor!==void 0&&r.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&d.push(e.assignTexture(r,"sheenColorMap",o.sheenColorTexture,Vt)),o.sheenRoughnessTexture!==void 0&&d.push(e.assignTexture(r,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(d)}}class y_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const e=this.parser,u=e.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=[],o=u.extensions[this.name];return o.transmissionFactor!==void 0&&(r.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&d.push(e.assignTexture(r,"transmissionMap",o.transmissionTexture)),Promise.all(d)}}class v_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const e=this.parser,u=e.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=[],o=u.extensions[this.name];r.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&d.push(e.assignTexture(r,"thicknessMap",o.thicknessTexture)),r.attenuationDistance=o.attenuationDistance||1/0;const i=o.attenuationColor||[1,1,1];return r.attenuationColor=new It(i[0],i[1],i[2]),Promise.all(d)}}class b_{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const u=this.parser.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=u.extensions[this.name];return r.ior=d.ior!==void 0?d.ior:1.5,Promise.resolve()}}class __{constructor(t){this.parser=t,this.name=Gt.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:Si}extendMaterialParams(t,r){const e=this.parser,u=e.json.materials[t];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const d=[],o=u.extensions[this.name];r.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&d.push(e.assignTexture(r,"specularIntensityMap",o.specularTexture));const i=o.specularColorFactor||[1,1,1];return r.specularColor=new It(i[0],i[1],i[2]),o.specularColorTexture!==void 0&&d.push(e.assignTexture(r,"specularColorMap",o.specularColorTexture,Vt)),Promise.all(d)}}class x_{constructor(t){this.parser=t,this.name=Gt.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,e=r.json,u=e.textures[t];if(!u.extensions||!u.extensions[this.name])return null;const d=u.extensions[this.name],o=r.options.ktx2Loader;if(!o){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,d.source,o)}}class w_{constructor(t){this.parser=t,this.name=Gt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,e=this.parser,u=e.json,d=u.textures[t];if(!d.extensions||!d.extensions[r])return null;const o=d.extensions[r],i=u.images[o.source];let n=e.textureLoader;if(i.uri){const a=e.options.manager.getHandler(i.uri);a!==null&&(n=a)}return this.detectSupport().then(function(a){if(a)return e.loadTextureImage(t,o.source,n);if(u.extensionsRequired&&u.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class S_{constructor(t){this.name=Gt.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,e=r.bufferViews[t];if(e.extensions&&e.extensions[this.name]){const u=e.extensions[this.name],d=this.parser.getDependency("buffer",u.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return d.then(function(i){const n=u.byteOffset||0,a=u.byteLength||0,f=u.count,p=u.byteStride,s=new Uint8Array(i,n,a);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,p,s,u.mode,u.filter).then(function(l){return l.buffer}):o.ready.then(function(){const l=new ArrayBuffer(f*p);return o.decodeGltfBuffer(new Uint8Array(l),f,p,s,u.mode,u.filter),l})})}else return null}}class M_{constructor(t){this.name=Gt.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,e=r.nodes[t];if(!e.extensions||!e.extensions[this.name]||e.mesh===void 0)return null;const u=r.meshes[e.mesh];for(const a of u.primitives)if(a.mode!==$r.TRIANGLES&&a.mode!==$r.TRIANGLE_STRIP&&a.mode!==$r.TRIANGLE_FAN&&a.mode!==void 0)return null;const o=e.extensions[this.name].attributes,i=[],n={};for(const a in o)i.push(this.parser.getDependency("accessor",o[a]).then(f=>(n[a]=f,n[a])));return i.length<1?null:(i.push(this.parser.createNodeMesh(t)),Promise.all(i).then(a=>{const f=a.pop(),p=f.isGroup?f.children:[f],s=a[0].count,l=[];for(const c of p){const h=new Nt,m=new De,g=new xn,y=new De(1,1,1),_=new ib(c.geometry,c.material,s);for(let x=0;x<s;x++)n.TRANSLATION&&m.fromBufferAttribute(n.TRANSLATION,x),n.ROTATION&&g.fromBufferAttribute(n.ROTATION,x),n.SCALE&&y.fromBufferAttribute(n.SCALE,x),_.setMatrixAt(x,h.compose(m,g,y));for(const x in n)x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&c.geometry.setAttribute(x,n[x]);cr.prototype.copy.call(_,c),_.frustumCulled=!1,this.parser.assignFinalMaterial(_),l.push(_)}return f.isGroup?(f.clear(),f.add(...l),f):l[0]}))}}const Rh="glTF",As=12,gd={JSON:1313821514,BIN:5130562};class T_{constructor(t){this.name=Gt.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,As);if(this.header={magic:yi.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==Rh)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const e=this.header.length-As,u=new DataView(t,As);let d=0;for(;d<e;){const o=u.getUint32(d,!0);d+=4;const i=u.getUint32(d,!0);if(d+=4,i===gd.JSON){const n=new Uint8Array(t,As+d,o);this.content=yi.decodeText(n)}else if(i===gd.BIN){const n=As+d;this.body=t.slice(n,n+o)}d+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class E_{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const e=this.json,u=this.dracoLoader,d=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,i={},n={},a={};for(const f in o){const p=$a[f]||f.toLowerCase();i[p]=o[f]}for(const f in t.attributes){const p=$a[f]||f.toLowerCase();if(o[f]!==void 0){const s=e.accessors[t.attributes[f]],l=Ji[s.componentType];a[p]=l.name,n[p]=s.normalized===!0}}return r.getDependency("bufferView",d).then(function(f){return new Promise(function(p){u.decodeDracoFile(f,function(s){for(const l in s.attributes){const c=s.attributes[l],h=n[l];h!==void 0&&(c.normalized=h)}p(s)},i,a)})})}}class j_{constructor(){this.name=Gt.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return r.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class C_{constructor(){this.name=Gt.KHR_MESH_QUANTIZATION}}class Ph extends Zs{constructor(t,r,e,u){super(t,r,e,u)}copySampleValue_(t){const r=this.resultBuffer,e=this.sampleValues,u=this.valueSize,d=t*u*3+u;for(let o=0;o!==u;o++)r[o]=e[d+o];return r}interpolate_(t,r,e,u){const d=this.resultBuffer,o=this.sampleValues,i=this.valueSize,n=i*2,a=i*3,f=u-r,p=(e-r)/f,s=p*p,l=s*p,c=t*a,h=c-a,m=-2*l+3*s,g=l-s,y=1-m,_=g-s+p;for(let x=0;x!==i;x++){const w=o[h+x+i],j=o[h+x+n]*f,E=o[c+x+i],T=o[c+x]*f;d[x]=y*w+_*j+m*E+g*T}return d}}const A_=new xn;class L_ extends Ph{interpolate_(t,r,e,u){const d=super.interpolate_(t,r,e,u);return A_.fromArray(d).normalize().toArray(d),d}}const $r={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ji={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},yd={9728:Lr,9729:Mr,9984:Xa,9985:eh,9986:ko,9987:ti},vd={33071:Yr,33648:zo,10497:ns},Ia={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$a={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Kn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},R_={CUBICSPLINE:void 0,LINEAR:ss,STEP:Fs},Oa={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function P_(b){return b.DefaultMaterial===void 0&&(b.DefaultMaterial=new El({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ei})),b.DefaultMaterial}function Ls(b,t,r){for(const e in r.extensions)b[e]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[e]=r.extensions[e])}function Qn(b,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(b.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function D_(b,t,r){let e=!1,u=!1,d=!1;for(let a=0,f=t.length;a<f;a++){const p=t[a];if(p.POSITION!==void 0&&(e=!0),p.NORMAL!==void 0&&(u=!0),p.COLOR_0!==void 0&&(d=!0),e&&u&&d)break}if(!e&&!u&&!d)return Promise.resolve(b);const o=[],i=[],n=[];for(let a=0,f=t.length;a<f;a++){const p=t[a];if(e){const s=p.POSITION!==void 0?r.getDependency("accessor",p.POSITION):b.attributes.position;o.push(s)}if(u){const s=p.NORMAL!==void 0?r.getDependency("accessor",p.NORMAL):b.attributes.normal;i.push(s)}if(d){const s=p.COLOR_0!==void 0?r.getDependency("accessor",p.COLOR_0):b.attributes.color;n.push(s)}}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(n)]).then(function(a){const f=a[0],p=a[1],s=a[2];return e&&(b.morphAttributes.position=f),u&&(b.morphAttributes.normal=p),d&&(b.morphAttributes.color=s),b.morphTargetsRelative=!0,b})}function k_(b,t){if(b.updateMorphTargets(),t.weights!==void 0)for(let r=0,e=t.weights.length;r<e;r++)b.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(b.morphTargetInfluences.length===r.length){b.morphTargetDictionary={};for(let e=0,u=r.length;e<u;e++)b.morphTargetDictionary[r[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function I_(b){const t=b.extensions&&b.extensions[Gt.KHR_DRACO_MESH_COMPRESSION];let r;return t?r="draco:"+t.bufferView+":"+t.indices+":"+bd(t.attributes):r=b.indices+":"+bd(b.attributes)+":"+b.mode,r}function bd(b){let t="";const r=Object.keys(b).sort();for(let e=0,u=r.length;e<u;e++)t+=r[e]+":"+b[r[e]]+";";return t}function el(b){switch(b){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function O_(b){return b.search(/\.jpe?g($|\?)/i)>0||b.search(/^data\:image\/jpeg/)===0?"image/jpeg":b.search(/\.webp($|\?)/i)>0||b.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const N_=new Nt;class U_{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new u_,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let e=!1,u=!1,d=-1;typeof navigator<"u"&&(e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,u=navigator.userAgent.indexOf("Firefox")>-1,d=u?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||e||u&&d<98?this.textureLoader=new wb(this.options.manager):this.textureLoader=new Ab(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new jl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const e=this,u=this.json,d=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(o){const i={scene:o[0][u.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:u.asset,parser:e,userData:{}};Ls(d,i,u),Qn(i,u),Promise.all(e._invokeAll(function(n){return n.afterRoot&&n.afterRoot(i)})).then(function(){t(i)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],e=this.json.meshes||[];for(let u=0,d=r.length;u<d;u++){const o=r[u].joints;for(let i=0,n=o.length;i<n;i++)t[o[i]].isBone=!0}for(let u=0,d=t.length;u<d;u++){const o=t[u];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(e[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,e){if(t.refs[r]<=1)return e;const u=e.clone(),d=(o,i)=>{const n=this.associations.get(o);n!=null&&this.associations.set(i,n);for(const[a,f]of o.children.entries())d(f,i.children[a])};return d(e,u),u.name+="_instance_"+t.uses[r]++,u}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let e=0;e<r.length;e++){const u=t(r[e]);if(u)return u}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const e=[];for(let u=0;u<r.length;u++){const d=t(r[u]);d&&e.push(d)}return e}getDependency(t,r){const e=t+":"+r;let u=this.cache.get(e);if(!u){switch(t){case"scene":u=this.loadScene(r);break;case"node":u=this._invokeOne(function(d){return d.loadNode&&d.loadNode(r)});break;case"mesh":u=this._invokeOne(function(d){return d.loadMesh&&d.loadMesh(r)});break;case"accessor":u=this.loadAccessor(r);break;case"bufferView":u=this._invokeOne(function(d){return d.loadBufferView&&d.loadBufferView(r)});break;case"buffer":u=this.loadBuffer(r);break;case"material":u=this._invokeOne(function(d){return d.loadMaterial&&d.loadMaterial(r)});break;case"texture":u=this._invokeOne(function(d){return d.loadTexture&&d.loadTexture(r)});break;case"skin":u=this.loadSkin(r);break;case"animation":u=this._invokeOne(function(d){return d.loadAnimation&&d.loadAnimation(r)});break;case"camera":u=this.loadCamera(r);break;default:if(u=this._invokeOne(function(d){return d!=this&&d.getDependency&&d.getDependency(t,r)}),!u)throw new Error("Unknown type: "+t);break}this.cache.add(e,u)}return u}getDependencies(t){let r=this.cache.get(t);if(!r){const e=this,u=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(u.map(function(d,o){return e.getDependency(t,o)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],e=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[Gt.KHR_BINARY_GLTF].body);const u=this.options;return new Promise(function(d,o){e.load(yi.resolveURL(r.uri,u.path),d,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(e){const u=r.byteLength||0,d=r.byteOffset||0;return e.slice(d,d+u)})}loadAccessor(t){const r=this,e=this.json,u=this.json.accessors[t];if(u.bufferView===void 0&&u.sparse===void 0){const o=Ia[u.type],i=Ji[u.componentType],n=u.normalized===!0,a=new i(u.count*o);return Promise.resolve(new Xr(a,o,n))}const d=[];return u.bufferView!==void 0?d.push(this.getDependency("bufferView",u.bufferView)):d.push(null),u.sparse!==void 0&&(d.push(this.getDependency("bufferView",u.sparse.indices.bufferView)),d.push(this.getDependency("bufferView",u.sparse.values.bufferView))),Promise.all(d).then(function(o){const i=o[0],n=Ia[u.type],a=Ji[u.componentType],f=a.BYTES_PER_ELEMENT,p=f*n,s=u.byteOffset||0,l=u.bufferView!==void 0?e.bufferViews[u.bufferView].byteStride:void 0,c=u.normalized===!0;let h,m;if(l&&l!==p){const g=Math.floor(s/l),y="InterleavedBuffer:"+u.bufferView+":"+u.componentType+":"+g+":"+u.count;let _=r.cache.get(y);_||(h=new a(i,g*l,u.count*l/f),_=new $v(h,l/f),r.cache.add(y,_)),m=new Sl(_,n,s%l/f,c)}else i===null?h=new a(u.count*n):h=new a(i,s,u.count*n),m=new Xr(h,n,c);if(u.sparse!==void 0){const g=Ia.SCALAR,y=Ji[u.sparse.indices.componentType],_=u.sparse.indices.byteOffset||0,x=u.sparse.values.byteOffset||0,w=new y(o[1],_,u.sparse.count*g),j=new a(o[2],x,u.sparse.count*n);i!==null&&(m=new Xr(m.array.slice(),m.itemSize,m.normalized));for(let E=0,T=w.length;E<T;E++){const A=w[E];if(m.setX(A,j[E*n]),n>=2&&m.setY(A,j[E*n+1]),n>=3&&m.setZ(A,j[E*n+2]),n>=4&&m.setW(A,j[E*n+3]),n>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(t){const r=this.json,e=this.options,d=r.textures[t].source,o=r.images[d];let i=this.textureLoader;if(o.uri){const n=e.manager.getHandler(o.uri);n!==null&&(i=n)}return this.loadTextureImage(t,d,i)}loadTextureImage(t,r,e){const u=this,d=this.json,o=d.textures[t],i=d.images[r],n=(i.uri||i.bufferView)+":"+o.sampler;if(this.textureCache[n])return this.textureCache[n];const a=this.loadImageSource(r,e).then(function(f){f.flipY=!1,f.name=o.name||i.name||"";const s=(d.samplers||{})[o.sampler]||{};return f.magFilter=yd[s.magFilter]||Mr,f.minFilter=yd[s.minFilter]||ti,f.wrapS=vd[s.wrapS]||ns,f.wrapT=vd[s.wrapT]||ns,u.associations.set(f,{textures:t}),f}).catch(function(){return null});return this.textureCache[n]=a,a}loadImageSource(t,r){const e=this,u=this.json,d=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(p=>p.clone());const o=u.images[t],i=self.URL||self.webkitURL;let n=o.uri||"",a=!1;if(o.bufferView!==void 0)n=e.getDependency("bufferView",o.bufferView).then(function(p){a=!0;const s=new Blob([p],{type:o.mimeType});return n=i.createObjectURL(s),n});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const f=Promise.resolve(n).then(function(p){return new Promise(function(s,l){let c=s;r.isImageBitmapLoader===!0&&(c=function(h){const m=new Ir(h);m.needsUpdate=!0,s(m)}),r.load(yi.resolveURL(p,d.path),c,void 0,l)})}).then(function(p){return a===!0&&i.revokeObjectURL(n),p.userData.mimeType=o.mimeType||O_(o.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",n),p});return this.sourceCache[t]=f,f}assignTexture(t,r,e,u){const d=this;return this.getDependency("texture",e.index).then(function(o){if(!o)return null;if(e.texCoord!==void 0&&e.texCoord!=0&&!(r==="aoMap"&&e.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+e.texCoord+" for texture "+r+" not yet supported."),d.extensions[Gt.KHR_TEXTURE_TRANSFORM]){const i=e.extensions!==void 0?e.extensions[Gt.KHR_TEXTURE_TRANSFORM]:void 0;if(i){const n=d.associations.get(o);o=d.extensions[Gt.KHR_TEXTURE_TRANSFORM].extendTexture(o,i),d.associations.set(o,n)}}return u!==void 0&&(o.encoding=u),t[r]=o,o})}assignFinalMaterial(t){const r=t.geometry;let e=t.material;const u=r.attributes.tangent===void 0,d=r.attributes.color!==void 0,o=r.attributes.normal===void 0;if(t.isPoints){const i="PointsMaterial:"+e.uuid;let n=this.cache.get(i);n||(n=new Mh,hn.prototype.copy.call(n,e),n.color.copy(e.color),n.map=e.map,n.sizeAttenuation=!1,this.cache.add(i,n)),e=n}else if(t.isLine){const i="LineBasicMaterial:"+e.uuid;let n=this.cache.get(i);n||(n=new Sh,hn.prototype.copy.call(n,e),n.color.copy(e.color),this.cache.add(i,n)),e=n}if(u||d||o){let i="ClonedMaterial:"+e.uuid+":";u&&(i+="derivative-tangents:"),d&&(i+="vertex-colors:"),o&&(i+="flat-shading:");let n=this.cache.get(i);n||(n=e.clone(),d&&(n.vertexColors=!0),o&&(n.flatShading=!0),u&&(n.normalScale&&(n.normalScale.y*=-1),n.clearcoatNormalScale&&(n.clearcoatNormalScale.y*=-1)),this.cache.add(i,n),this.associations.set(n,this.associations.get(e))),e=n}e.aoMap&&r.attributes.uv2===void 0&&r.attributes.uv!==void 0&&r.setAttribute("uv2",r.attributes.uv),t.material=e}getMaterialType(){return El}loadMaterial(t){const r=this,e=this.json,u=this.extensions,d=e.materials[t];let o;const i={},n=d.extensions||{},a=[];if(n[Gt.KHR_MATERIALS_UNLIT]){const p=u[Gt.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),a.push(p.extendParams(i,d,r))}else{const p=d.pbrMetallicRoughness||{};if(i.color=new It(1,1,1),i.opacity=1,Array.isArray(p.baseColorFactor)){const s=p.baseColorFactor;i.color.fromArray(s),i.opacity=s[3]}p.baseColorTexture!==void 0&&a.push(r.assignTexture(i,"map",p.baseColorTexture,Vt)),i.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,i.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(a.push(r.assignTexture(i,"metalnessMap",p.metallicRoughnessTexture)),a.push(r.assignTexture(i,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(s){return s.getMaterialType&&s.getMaterialType(t)}),a.push(Promise.all(this._invokeAll(function(s){return s.extendMaterialParams&&s.extendMaterialParams(t,i)})))}d.doubleSided===!0&&(i.side=Vo);const f=d.alphaMode||Oa.OPAQUE;if(f===Oa.BLEND?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,f===Oa.MASK&&(i.alphaTest=d.alphaCutoff!==void 0?d.alphaCutoff:.5)),d.normalTexture!==void 0&&o!==fi&&(a.push(r.assignTexture(i,"normalMap",d.normalTexture)),i.normalScale=new Ct(1,1),d.normalTexture.scale!==void 0)){const p=d.normalTexture.scale;i.normalScale.set(p,p)}return d.occlusionTexture!==void 0&&o!==fi&&(a.push(r.assignTexture(i,"aoMap",d.occlusionTexture)),d.occlusionTexture.strength!==void 0&&(i.aoMapIntensity=d.occlusionTexture.strength)),d.emissiveFactor!==void 0&&o!==fi&&(i.emissive=new It().fromArray(d.emissiveFactor)),d.emissiveTexture!==void 0&&o!==fi&&a.push(r.assignTexture(i,"emissiveMap",d.emissiveTexture,Vt)),Promise.all(a).then(function(){const p=new o(i);return d.name&&(p.name=d.name),Qn(p,d),r.associations.set(p,{materials:t}),d.extensions&&Ls(u,p,d),p})}createUniqueName(t){const r=Zt.sanitizeNodeName(t||"");let e=r;for(let u=1;this.nodeNamesUsed[e];++u)e=r+"_"+u;return this.nodeNamesUsed[e]=!0,e}loadGeometries(t){const r=this,e=this.extensions,u=this.primitiveCache;function d(i){return e[Gt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(i,r).then(function(n){return _d(n,i,r)})}const o=[];for(let i=0,n=t.length;i<n;i++){const a=t[i],f=I_(a),p=u[f];if(p)o.push(p.promise);else{let s;a.extensions&&a.extensions[Gt.KHR_DRACO_MESH_COMPRESSION]?s=d(a):s=_d(new pn,a,r),u[f]={primitive:a,promise:s},o.push(s)}}return Promise.all(o)}loadMesh(t){const r=this,e=this.json,u=this.extensions,d=e.meshes[t],o=d.primitives,i=[];for(let n=0,a=o.length;n<a;n++){const f=o[n].material===void 0?P_(this.cache):this.getDependency("material",o[n].material);i.push(f)}return i.push(r.loadGeometries(o)),Promise.all(i).then(function(n){const a=n.slice(0,n.length-1),f=n[n.length-1],p=[];for(let l=0,c=f.length;l<c;l++){const h=f[l],m=o[l];let g;const y=a[l];if(m.mode===$r.TRIANGLES||m.mode===$r.TRIANGLE_STRIP||m.mode===$r.TRIANGLE_FAN||m.mode===void 0)g=d.isSkinnedMesh===!0?new tb(h,y):new rn(h,y),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===$r.TRIANGLE_STRIP?g.geometry=xd(g.geometry,km):m.mode===$r.TRIANGLE_FAN&&(g.geometry=xd(g.geometry,rh));else if(m.mode===$r.LINES)g=new sb(h,y);else if(m.mode===$r.LINE_STRIP)g=new Tl(h,y);else if(m.mode===$r.LINE_LOOP)g=new ob(h,y);else if(m.mode===$r.POINTS)g=new ab(h,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&k_(g,d),g.name=r.createUniqueName(d.name||"mesh_"+t),Qn(g,d),m.extensions&&Ls(u,g,m),r.assignFinalMaterial(g),p.push(g)}for(let l=0,c=p.length;l<c;l++)r.associations.set(p[l],{meshes:t,primitives:l});if(p.length===1)return p[0];const s=new pi;r.associations.set(s,{meshes:t});for(let l=0,c=p.length;l<c;l++)s.add(p[l]);return s})}loadCamera(t){let r;const e=this.json.cameras[t],u=e[e.type];if(!u){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?r=new qr(Qm.radToDeg(u.yfov),u.aspectRatio||1,u.znear||1,u.zfar||2e6):e.type==="orthographic"&&(r=new xl(-u.xmag,u.xmag,u.ymag,-u.ymag,u.znear,u.zfar)),e.name&&(r.name=this.createUniqueName(e.name)),Qn(r,e),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],e=[];for(let u=0,d=r.joints.length;u<d;u++)e.push(this.getDependency("node",r.joints[u]));return r.inverseBindMatrices!==void 0?e.push(this.getDependency("accessor",r.inverseBindMatrices)):e.push(null),Promise.all(e).then(function(u){const d=u.pop(),o=u,i=[],n=[];for(let a=0,f=o.length;a<f;a++){const p=o[a];if(p){i.push(p);const s=new Nt;d!==null&&s.fromArray(d.array,a*16),n.push(s)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[a])}return new Ml(i,n)})}loadAnimation(t){const e=this.json.animations[t],u=[],d=[],o=[],i=[],n=[];for(let a=0,f=e.channels.length;a<f;a++){const p=e.channels[a],s=e.samplers[p.sampler],l=p.target,c=l.node,h=e.parameters!==void 0?e.parameters[s.input]:s.input,m=e.parameters!==void 0?e.parameters[s.output]:s.output;u.push(this.getDependency("node",c)),d.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",m)),i.push(s),n.push(l)}return Promise.all([Promise.all(u),Promise.all(d),Promise.all(o),Promise.all(i),Promise.all(n)]).then(function(a){const f=a[0],p=a[1],s=a[2],l=a[3],c=a[4],h=[];for(let g=0,y=f.length;g<y;g++){const _=f[g],x=p[g],w=s[g],j=l[g],E=c[g];if(_===void 0)continue;_.updateMatrix();let T;switch(Kn[E.path]){case Kn.weights:T=Vs;break;case Kn.rotation:T=xi;break;case Kn.position:case Kn.scale:default:T=Hs;break}const A=_.name?_.name:_.uuid,R=j.interpolation!==void 0?R_[j.interpolation]:ss,P=[];Kn[E.path]===Kn.weights?_.traverse(function(O){O.morphTargetInfluences&&P.push(O.name?O.name:O.uuid)}):P.push(A);let N=w.array;if(w.normalized){const O=el(N.constructor),D=new Float32Array(N.length);for(let U=0,Y=N.length;U<Y;U++)D[U]=N[U]*O;N=D}for(let O=0,D=P.length;O<D;O++){const U=new T(P[O]+"."+Kn[E.path],x.array,N,R);j.interpolation==="CUBICSPLINE"&&(U.createInterpolant=function(H){const W=this instanceof xi?L_:Ph;return new W(this.times,this.values,this.getValueSize()/3,H)},U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(U)}}const m=e.name?e.name:"animation_"+t;return new pb(m,void 0,h)})}createNodeMesh(t){const r=this.json,e=this,u=r.nodes[t];return u.mesh===void 0?null:e.getDependency("mesh",u.mesh).then(function(d){const o=e._getNodeRef(e.meshCache,u.mesh,d);return u.weights!==void 0&&o.traverse(function(i){if(i.isMesh)for(let n=0,a=u.weights.length;n<a;n++)i.morphTargetInfluences[n]=u.weights[n]}),o})}loadNode(t){const r=this.json,e=this.extensions,u=this,d=r.nodes[t],o=d.name?u.createUniqueName(d.name):"";return function(){const i=[],n=u._invokeOne(function(s){return s.createNodeMesh&&s.createNodeMesh(t)});n&&i.push(n),d.camera!==void 0&&i.push(u.getDependency("camera",d.camera).then(function(s){return u._getNodeRef(u.cameraCache,d.camera,s)})),u._invokeAll(function(s){return s.createNodeAttachment&&s.createNodeAttachment(t)}).forEach(function(s){i.push(s)});const a=[],f=d.children||[];for(let s=0,l=f.length;s<l;s++)a.push(u.getDependency("node",f[s]));const p=d.skin===void 0?Promise.resolve(null):u.getDependency("skin",d.skin);return Promise.all([Promise.all(i),Promise.all(a),p])}().then(function(i){const n=i[0],a=i[1],f=i[2];let p;if(d.isBone===!0?p=new xh:n.length>1?p=new pi:n.length===1?p=n[0]:p=new cr,p!==n[0])for(let s=0,l=n.length;s<l;s++)p.add(n[s]);if(d.name&&(p.userData.name=d.name,p.name=o),Qn(p,d),d.extensions&&Ls(e,p,d),d.matrix!==void 0){const s=new Nt;s.fromArray(d.matrix),p.applyMatrix4(s)}else d.translation!==void 0&&p.position.fromArray(d.translation),d.rotation!==void 0&&p.quaternion.fromArray(d.rotation),d.scale!==void 0&&p.scale.fromArray(d.scale);u.associations.has(p)||u.associations.set(p,{}),u.associations.get(p).nodes=t,f!==null&&p.traverse(function(s){s.isSkinnedMesh&&s.bind(f,N_)});for(let s=0,l=a.length;s<l;s++)p.add(a[s]);return p})}loadScene(t){const r=this.extensions,e=this.json.scenes[t],u=this,d=new pi;e.name&&(d.name=u.createUniqueName(e.name)),Qn(d,e),e.extensions&&Ls(r,d,e);const o=e.nodes||[],i=[];for(let n=0,a=o.length;n<a;n++)i.push(u.getDependency("node",o[n]));return Promise.all(i).then(function(n){for(let f=0,p=n.length;f<p;f++)d.add(n[f]);const a=f=>{const p=new Map;for(const[s,l]of u.associations)(s instanceof hn||s instanceof Ir)&&p.set(s,l);return f.traverse(s=>{const l=u.associations.get(s);l!=null&&p.set(s,l)}),p};return u.associations=a(d),d})}}function F_(b,t,r){const e=t.attributes,u=new ls;if(e.POSITION!==void 0){const i=r.json.accessors[e.POSITION],n=i.min,a=i.max;if(n!==void 0&&a!==void 0){if(u.set(new De(n[0],n[1],n[2]),new De(a[0],a[1],a[2])),i.normalized){const f=el(Ji[i.componentType]);u.min.multiplyScalar(f),u.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const d=t.targets;if(d!==void 0){const i=new De,n=new De;for(let a=0,f=d.length;a<f;a++){const p=d[a];if(p.POSITION!==void 0){const s=r.json.accessors[p.POSITION],l=s.min,c=s.max;if(l!==void 0&&c!==void 0){if(n.setX(Math.max(Math.abs(l[0]),Math.abs(c[0]))),n.setY(Math.max(Math.abs(l[1]),Math.abs(c[1]))),n.setZ(Math.max(Math.abs(l[2]),Math.abs(c[2]))),s.normalized){const h=el(Ji[s.componentType]);n.multiplyScalar(h)}i.max(n)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}u.expandByVector(i)}b.boundingBox=u;const o=new cs;u.getCenter(o.center),o.radius=u.min.distanceTo(u.max)/2,b.boundingSphere=o}function _d(b,t,r){const e=t.attributes,u=[];function d(o,i){return r.getDependency("accessor",o).then(function(n){b.setAttribute(i,n)})}for(const o in e){const i=$a[o]||o.toLowerCase();i in b.attributes||u.push(d(e[o],i))}if(t.indices!==void 0&&!b.index){const o=r.getDependency("accessor",t.indices).then(function(i){b.setIndex(i)});u.push(o)}return Qn(b,t),F_(b,t,r),Promise.all(u).then(function(){return t.targets!==void 0?D_(b,t.targets,r):b})}function xd(b,t){let r=b.getIndex();if(r===null){const o=[],i=b.getAttribute("position");if(i!==void 0){for(let n=0;n<i.count;n++)o.push(n);b.setIndex(o),r=b.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),b}const e=r.count-2,u=[];if(t===rh)for(let o=1;o<=e;o++)u.push(r.getX(0)),u.push(r.getX(o)),u.push(r.getX(o+1));else for(let o=0;o<e;o++)o%2===0?(u.push(r.getX(o)),u.push(r.getX(o+1)),u.push(r.getX(o+2))):(u.push(r.getX(o+2)),u.push(r.getX(o+1)),u.push(r.getX(o)));u.length/3!==e&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const d=b.clone();return d.setIndex(u),d}class B_ extends xb{constructor(t){super(t),this.type=In}parse(t){const i=function(_,x){switch(_){case 1:console.error("THREE.RGBELoader Read Error: "+(x||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(x||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(x||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(x||""))}return-1},p=`
`,s=function(_,x,w){x=x||1024;let E=_.pos,T=-1,A=0,R="",P=String.fromCharCode.apply(null,new Uint16Array(_.subarray(E,E+128)));for(;0>(T=P.indexOf(p))&&A<x&&E<_.byteLength;)R+=P,A+=P.length,E+=128,P+=String.fromCharCode.apply(null,new Uint16Array(_.subarray(E,E+128)));return-1<T?(w!==!1&&(_.pos+=A+T+1),R+P.slice(0,T)):!1},l=function(_){const x=/^#\?(\S+)/,w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,j=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,T=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,A={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let R,P;if(_.pos>=_.byteLength||!(R=s(_)))return i(1,"no header found");if(!(P=R.match(x)))return i(3,"bad initial token");for(A.valid|=1,A.programtype=P[1],A.string+=R+`
`;R=s(_),R!==!1;){if(A.string+=R+`
`,R.charAt(0)==="#"){A.comments+=R+`
`;continue}if((P=R.match(w))&&(A.gamma=parseFloat(P[1])),(P=R.match(j))&&(A.exposure=parseFloat(P[1])),(P=R.match(E))&&(A.valid|=2,A.format=P[1]),(P=R.match(T))&&(A.valid|=4,A.height=parseInt(P[1],10),A.width=parseInt(P[2],10)),A.valid&2&&A.valid&4)break}return A.valid&2?A.valid&4?A:i(3,"missing image size specifier"):i(3,"missing format specifier")},c=function(_,x,w){const j=x;if(j<8||j>32767||_[0]!==2||_[1]!==2||_[2]&128)return new Uint8Array(_);if(j!==(_[2]<<8|_[3]))return i(3,"wrong scanline width");const E=new Uint8Array(4*x*w);if(!E.length)return i(4,"unable to allocate buffer space");let T=0,A=0;const R=4*j,P=new Uint8Array(4),N=new Uint8Array(R);let O=w;for(;O>0&&A<_.byteLength;){if(A+4>_.byteLength)return i(1);if(P[0]=_[A++],P[1]=_[A++],P[2]=_[A++],P[3]=_[A++],P[0]!=2||P[1]!=2||(P[2]<<8|P[3])!=j)return i(3,"bad rgbe scanline format");let D=0,U;for(;D<R&&A<_.byteLength;){U=_[A++];const H=U>128;if(H&&(U-=128),U===0||D+U>R)return i(3,"bad scanline data");if(H){const W=_[A++];for(let X=0;X<U;X++)N[D++]=W}else N.set(_.subarray(A,A+U),D),D+=U,A+=U}const Y=j;for(let H=0;H<Y;H++){let W=0;E[T]=N[H+W],W+=j,E[T+1]=N[H+W],W+=j,E[T+2]=N[H+W],W+=j,E[T+3]=N[H+W],T+=4}O--}return E},h=function(_,x,w,j){const E=_[x+3],T=Math.pow(2,E-128)/255;w[j+0]=_[x+0]*T,w[j+1]=_[x+1]*T,w[j+2]=_[x+2]*T,w[j+3]=1},m=function(_,x,w,j){const E=_[x+3],T=Math.pow(2,E-128)/255;w[j+0]=Ro.toHalfFloat(Math.min(_[x+0]*T,65504)),w[j+1]=Ro.toHalfFloat(Math.min(_[x+1]*T,65504)),w[j+2]=Ro.toHalfFloat(Math.min(_[x+2]*T,65504)),w[j+3]=Ro.toHalfFloat(1)},g=new Uint8Array(t);g.pos=0;const y=l(g);if(y!==-1){const _=y.width,x=y.height,w=c(g.subarray(g.pos),_,x);if(w!==-1){let j,E,T;switch(this.type){case un:T=w.length/4;const A=new Float32Array(T*4);for(let P=0;P<T;P++)h(w,P*4,A,P*4);j=A,E=un;break;case In:T=w.length/4;const R=new Uint16Array(T*4);for(let P=0;P<T;P++)m(w,P*4,R,P*4);j=R,E=In;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:_,height:x,data:j,header:y.string,gamma:y.gamma,exposure:y.exposure,type:E}}}return null}setDataType(t){return this.type=t,this}load(t,r,e,u){function d(o,i){switch(o.type){case un:case In:o.encoding=ri,o.minFilter=Mr,o.magFilter=Mr,o.generateMipmaps=!1,o.flipY=!0;break}r&&r(o,i)}return super.load(t,d,e,u)}}function wd(b){let t,r,e;return{c(){t=tt("div"),t.innerHTML="<gltf-preloader></gltf-preloader>"},m(u,d){lt(u,t,d),e=!0},p(u,d){},i(u){e||(_r(()=>{r||(r=zr(t,kc,{duration:1e3,easing:xc,baseScale:.5},!0)),r.run(1)}),e=!0)},o(u){r||(r=zr(t,kc,{duration:1e3,easing:xc,baseScale:.5},!1)),r.run(0),e=!1},d(u){u&&dt(t),u&&r&&r.end()}}}function Sd(b){let t,r,e,u,d;return e=new qb({props:{environment:b[2],width:window.innerWidth>620?600:window.innerWidth,height:window.innerWidth>620?600:window.innerWidth,alpha:!0,pixelRatio:2,antialias:!0,powerPreference:"high-performance",shadows:!0,toneMapping:Qd,$$slots:{default:[z_]},$$scope:{ctx:b}}}),{c(){t=tt("div"),r=dr("​"),Kt(e.$$.fragment)},m(o,i){lt(o,t,i),Ae(t,r),Xt(e,t,null),d=!0},p(o,i){const n={};i&4&&(n.environment=o[2]),i&75&&(n.$$scope={dirty:i,ctx:o}),e.$set(n)},i(o){d||(xt(e.$$.fragment,o),_r(()=>{u||(u=zr(t,Gr,{duration:1e3},!0)),u.run(1)}),d=!0)},o(o){Mt(e.$$.fragment,o),u||(u=zr(t,Gr,{duration:1e3},!1)),u.run(0),d=!1},d(o){o&&dt(t),Ht(e),o&&u&&u.end()}}}function Md(b){let t,r;return t=new $b({props:{rotation:[0,b[3],0],object:b[1].scene,scale:[Na,Na,Na]}}),{c(){Kt(t.$$.fragment)},m(e,u){Xt(t,e,u),r=!0},p(e,u){const d={};u&8&&(d.rotation=[0,e[3],0]),u&2&&(d.object=e[1].scene),t.$set(d)},i(e){r||(xt(t.$$.fragment,e),r=!0)},o(e){Mt(t.$$.fragment,e),r=!1},d(e){Ht(t,e)}}}function z_(b){let t,r,e,u,d,o,i,n,a,f=b[1]&&Md(b);return r=new t_({props:{position:b[0].cameraPosition,zoom:b[0].cameraZoom}}),u=new i_({props:{target:[0,0,0],enableZoom:!1,enablePan:!1,enableDamping:!0,maxPolarAngle:Math.PI*.5}}),o=new o_({props:{intensity:.15}}),n=new l_({props:{intensity:.4,position:[5,6,5],shadow:{mapSize:[2048,2048]}}}),{c(){f&&f.c(),t=_t(),Kt(r.$$.fragment),e=_t(),Kt(u.$$.fragment),d=_t(),Kt(o.$$.fragment),i=_t(),Kt(n.$$.fragment)},m(p,s){f&&f.m(p,s),lt(p,t,s),Xt(r,p,s),lt(p,e,s),Xt(u,p,s),lt(p,d,s),Xt(o,p,s),lt(p,i,s),Xt(n,p,s),a=!0},p(p,s){p[1]?f?(f.p(p,s),s&2&&xt(f,1)):(f=Md(p),f.c(),xt(f,1),f.m(t.parentNode,t)):f&&(Fn(),Mt(f,1,1,()=>{f=null}),Bn());const l={};s&1&&(l.position=p[0].cameraPosition),s&1&&(l.zoom=p[0].cameraZoom),r.$set(l)},i(p){a||(xt(f),xt(r.$$.fragment,p),xt(u.$$.fragment,p),xt(o.$$.fragment,p),xt(n.$$.fragment,p),a=!0)},o(p){Mt(f),Mt(r.$$.fragment,p),Mt(u.$$.fragment,p),Mt(o.$$.fragment,p),Mt(n.$$.fragment,p),a=!1},d(p){f&&f.d(p),p&&dt(t),Ht(r,p),p&&dt(e),Ht(u,p),p&&dt(d),Ht(o,p),p&&dt(i),Ht(n,p)}}}function G_(b){let t,r,e,u=(!b[1]||!b[2])&&wd(),d=(b[1]||b[2])&&Sd(b);return{c(){u&&u.c(),t=_t(),d&&d.c(),r=zn()},m(o,i){u&&u.m(o,i),lt(o,t,i),d&&d.m(o,i),lt(o,r,i),e=!0},p(o,[i]){!o[1]||!o[2]?u?(u.p(o,i),i&6&&xt(u,1)):(u=wd(),u.c(),xt(u,1),u.m(t.parentNode,t)):u&&(Fn(),Mt(u,1,1,()=>{u=null}),Bn()),o[1]||o[2]?d?(d.p(o,i),i&6&&xt(d,1)):(d=Sd(o),d.c(),xt(d,1),d.m(r.parentNode,r)):d&&(Fn(),Mt(d,1,1,()=>{d=null}),Bn())},i(o){e||(xt(u),xt(d),e=!0)},o(o){Mt(u),Mt(d),e=!1},d(o){u&&u.d(o),o&&dt(t),d&&d.d(o),o&&dt(r)}}}const Na=1;function V_(b,t,r){let{data:e}=t;const u=e.modelSrc;let d=null,o,i=0;Lh(()=>{r(3,i+=.001)});function n(){return new c_().loadAsync(u)}return si(()=>{n().then(a=>{e.shadowsEnabled&&a.scene.traverse(f=>{f.castShadow=!0,f.receiveShadow=!0}),r(1,d=a)}),new B_().load(e.environmentMapSrc,a=>{r(2,o=a),r(2,o.mapping=Bo,o),r(2,o.encoding=Vt,o)})}),b.$$set=a=>{"data"in a&&r(0,e=a.data)},[e,d,o,i]}class Rl extends Rr{constructor(t){super(),Ut(this,t,V_,G_,Ot,{data:0})}}const H_={title:"Задвижки",excerpt:"Распространенный и надежный тип запорной арматуры. Особенно актуален для магистральных систем, где требуется получить минимальное гидравлическое сопротивление."},W_={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/gateValve/gateValve.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.4,shadowsEnabled:!0},q_=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"50 ... 1200 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"до 40 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–50 ... +500 °C"}],Td={content:H_,gltf:W_,summary:q_},X_={title:"Затворы",excerpt:"Затворы обычно легче, чем краны, дешевле, чем задвижки, надежны и удобны в монтаже. Работают в самых суровых условиях и могут применятся в качестве запорно-регулирующего элемента."},Y_={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/butterflyValve/butterflyValve.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.5,shadowsEnabled:!0},Z_=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"40 ... 2500 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"до 25 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–50 ... +180 °C"}],K_={content:X_,gltf:Y_,summary:Z_},J_={title:"Фильтры",excerpt:"Фильтры необходимы для обеспечения соответствия рабочей среды предъявляемым требованиям. Их наличие и своевременное обслуживание поможет избежать множества проблем."},Q_={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/filter/filter.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.4,shadowsEnabled:!0},$_=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"15 ... 500 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"до 16 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–30 ... +150 °C"}],e2={content:J_,gltf:Q_,summary:$_},t2={title:"Клапаны",excerpt:"Необходимое оборудование для обеспечения безопасности и предотвращения нештатных ситуаций. Позволяет значительно увеличить надежность и отказоустойчивость инженерных систем."},r2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/pressureValve/pressureValve.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.2,shadowsEnabled:!0},n2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"40 ... 600 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"до 25 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–20 ... +300 °C"}],i2={content:t2,gltf:r2,summary:n2},s2={title:"Краны",excerpt:"Надежный, удобный в монтаже и сравнительно недорогой вид запорной арматуры. Используется в самых разных проектах: от квартирных развязок до корабельных систем подачи топлива."},o2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/ballValve/ballValve.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.5,shadowsEnabled:!0},a2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"10 ... 700 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"до 100 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–40 ... +250 °C"}],l2={content:s2,gltf:o2,summary:a2},c2={title:"Вентили",excerpt:"Отличаются от кранов тем, что поток рабочей среды может быть перекрыт частично. Популярный и надежный вид запорно-регулирующей арматуры."},u2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/stopValve/stopValve.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.5,shadowsEnabled:!0},d2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"[o o] ... [o o] мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"[- x] -- [+ +]"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–[x x] ... +[x x] °C"}],h2={content:c2,gltf:u2,summary:d2},f2={title:"Аксессуары",excerpt:"Те самые незначительные мелочи, из-за которых затягиваются крупные и важные проекты стратегической важности."},p2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/accessories/accessories.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.5,shadowsEnabled:!0},m2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"15 ... 1200 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"6 ... 160 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–40 ... +250 °C"}],g2={content:f2,gltf:p2,summary:m2};function y2(b){let t,r,e,u,d=b[0].content.title+"",o,i,n=b[0].content.excerpt+"",a,f,p,s,l;return s=new Rl({props:{data:b[0].gltf}}),{c(){t=tt("div"),r=tt("div"),e=tt("div"),u=tt("h1"),o=_t(),i=tt("p"),a=dr(n),f=_t(),p=tt("div"),Kt(s.$$.fragment),this.c=ut,me(u,"class","text-screen-title text-with-gradient"),me(i,"class","text-body excerpt"),me(e,"class","message-box"),me(p,"class","gltf-box"),me(r,"class","content-box"),me(t,"class","page")},m(c,h){lt(c,t,h),Ae(t,r),Ae(r,e),Ae(e,u),u.innerHTML=d,Ae(e,o),Ae(e,i),Ae(i,a),Ae(r,f),Ae(r,p),Xt(s,p,null),l=!0},p(c,[h]){(!l||h&1)&&d!==(d=c[0].content.title+"")&&(u.innerHTML=d),(!l||h&1)&&n!==(n=c[0].content.excerpt+"")&&ii(a,n);const m={};h&1&&(m.data=c[0].gltf),s.$set(m)},i(c){l||(xt(s.$$.fragment,c),l=!0)},o(c){Mt(s.$$.fragment,c),l=!1},d(c){c&&dt(t),Ht(s)}}}function v2(b,t,r){let{variant:e}=t,u;switch(e){case"gate-valves":u=Td;break;case"butterfly-valves":u=K_;break;case"filters":u=e2;break;case"pressure-valves":u=i2;break;case"ball-valves":u=l2;break;case"stop-valves":u=h2;break;case"accessories":u=g2;break;default:u=Td;break}return b.$$set=d=>{"variant"in d&&r(1,e=d.variant)},[u,e]}class b2 extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";.page{background-color:var(--color-light-surface);padding-inline:calc(8px * 1);padding-top:calc(40px * 1);padding-bottom:calc(80px * 1)}.content-box{display:grid;gap:calc(16px * 1);grid-template-areas:"🚀"
			"📚"
			"✨"}.gltf-box{position:relative;grid-area:🚀;display:flex;justify-content:center;align-items:center;aspect-ratio:1 / 1;width:100%;height:auto;overflow:hidden}.message-box{grid-area:📚;margin-bottom:40px}.excerpt{color:var(--color-light-on-surface);text-align:justify;hyphens:auto}@media(min-width: 601px){.gltf-box{position:relative;grid-area:🚀;aspect-ratio:1 / 1;width:600px;height:auto;overflow:hidden;mix-blend-mode:multiply;margin:0 auto}}@media(min-width: 901px){.page{display:flex;justify-content:center;align-items:center}.content-box{grid-template-areas:"🚀 🚀"
				"📚 ✨";grid-template-columns:60% 1fr}}@media(min-width: 1201px){.page{padding-top:0;padding-bottom:0}.content-box{grid-template-areas:"📚 🚀"
				"✨ ✨";grid-template-columns:600px auto}.message-box{display:flex;flex-direction:column;justify-content:flex-end}.excerpt{text-align:left}}@media(min-width: 1401px){.content-box{grid-template-columns:calc(500px) auto}.message-box{margin-right:calc(-40px * 1)}h1{margin-left:calc(-100px * 1)}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},v2,y2,Ot,{variant:1},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["variant"]}get variant(){return this.$$.ctx[1]}set variant(t){this.$$set({variant:t}),fr()}}customElements.define("gltf-category-screen",b2);const _2={title:"Оснащение",excerpt:"Выполняем комплексное оснащение промышленных объектов сложным инженерным оборудованием. Также, мы произведем необходимое импортозамещение, если того вдруг потребуют неотвратимые обстоятельства."},x2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/factory/factory.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:1.2,shadowsEnabled:!0},w2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/okHand.png",text:"Полный цикл"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/modern.png",text:"Современное оборудование"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/creativity.png",text:"Топовые специалисты"}],Ed={content:_2,gltf:x2,summary:w2},S2={title:"Обширная<br>география",excerpt:"Работаем во всех четырех климатических зонах и одиннадцати часовых поясах нашей необъятной Родины. Обеспечиваем сложную логистику негабаритного оборудования и реализацию нетривиальных проектов в суровых условиях."},M2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/motherRussia/motherRussia.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[10,8,20],cameraZoom:1.5,shadowsEnabled:!0},T2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/border.png",text:"Налаженная логистика"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/ballerina.png",text:"Бережная доставка"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/ushanka.png",text:"Понимание специфики"}],E2={content:S2,gltf:M2,summary:T2},j2={title:"Редкое<br>оборудование",excerpt:"Оснащаем объекты теми устройствами, которые сложно найти (легко потерять и невозможно забыть). Находим реализуемое решение в практически любой непонятной ситуации."},C2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/unobtanium/unobtanium.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[20,10,20],cameraZoom:2,shadowsEnabled:!1},A2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/hangar.png",text:"Обширная номенклатура"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/vinyl.png",text:"Подбор аналогов"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/moneyBox.png",text:"Оптимизация расходов"}],L2={content:j2,gltf:C2,summary:A2},R2={title:"Замещение<br>импорта",excerpt:"Поможем подобрать отечественные аналоги требуемого оборудования с минимальными потерями эксплуатационных свойств и вменяемыми сроками поставки."},P2={modelSrc:"https://v0ffk4.github.io/tios-static/webgl/importSubstitution/importSubstitution.gltf",environmentMapSrc:"https://v0ffk4.github.io/tios-static/webgl/Studio_Pack_00030.hdr",cameraPosition:[10,8,20],cameraZoom:1.2,shadowsEnabled:!0},D2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/qualityVariant.png",text:"Высокое качество"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/star.png",text:"Соответствие требованиям"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/equality.png",text:"Разумные компромиссы"}],k2={content:R2,gltf:P2,summary:D2};function I2(b){let t,r,e,u,d=b[0].content.title+"",o,i,n=b[0].content.excerpt+"",a,f,p,s,l,c,h,m,g,y,_;return c=new Rl({props:{data:b[0].gltf}}),{c(){t=tt("div"),r=tt("div"),e=tt("div"),u=tt("h1"),o=_t(),i=tt("p"),a=dr(n),f=_t(),p=tt("div"),p.innerHTML='<basic-button label="Наш каталог"></basic-button>',s=_t(),l=tt("div"),Kt(c.$$.fragment),h=_t(),m=tt("div"),g=tt("page-summary"),this.c=ut,me(u,"class","text-screen-title text-with-gradient"),me(i,"class","text-body excerpt"),me(p,"class","button-box"),me(e,"class","message-box"),me(l,"class","gltf-box"),fn(g,"data",y=b[0].summary),me(m,"class","summary-box"),me(r,"class","content-box"),me(t,"class","page")},m(x,w){lt(x,t,w),Ae(t,r),Ae(r,e),Ae(e,u),u.innerHTML=d,Ae(e,o),Ae(e,i),Ae(i,a),Ae(e,f),Ae(e,p),Ae(r,s),Ae(r,l),Xt(c,l,null),Ae(r,h),Ae(r,m),Ae(m,g),_=!0},p(x,[w]){(!_||w&1)&&d!==(d=x[0].content.title+"")&&(u.innerHTML=d),(!_||w&1)&&n!==(n=x[0].content.excerpt+"")&&ii(a,n);const j={};w&1&&(j.data=x[0].gltf),c.$set(j),(!_||w&1&&y!==(y=x[0].summary))&&fn(g,"data",y)},i(x){_||(xt(c.$$.fragment,x),_=!0)},o(x){Mt(c.$$.fragment,x),_=!1},d(x){x&&dt(t),Ht(c)}}}function O2(b,t,r){let{variant:e}=t,u;switch(e){case"rigging":u=Ed;break;case"geography":u=E2;break;case"unobtanium":u=L2;break;case"import-substitution":u=k2;break;default:u=Ed;break}return b.$$set=d=>{"variant"in d&&r(1,e=d.variant)},[u,e]}class N2 extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";.page{min-height:100vh;background-color:var(--color-light-surface);padding-inline:calc(8px * 1);padding-top:calc(40px * 1);padding-bottom:calc(80px * 1)}.content-box{display:grid;gap:calc(16px * 1);grid-template-areas:"🚀"
			"📚"
			"✨"}.gltf-box{position:relative;grid-area:🚀;display:flex;justify-content:center;align-items:center;aspect-ratio:1 / 1;width:100%;height:auto;overflow:hidden}.message-box{grid-area:📚}.excerpt{color:var(--color-light-on-surface);text-align:justify;hyphens:auto}.button-box{margin-top:calc(32px * 1);margin-bottom:40px}.summary-box{grid-area:✨}@media(min-width: 601px){.gltf-box{position:relative;grid-area:🚀;aspect-ratio:1 / 1;width:600px;height:auto;overflow:hidden;mix-blend-mode:multiply;margin:0 auto}}@media(min-width: 901px){.page{display:flex;justify-content:center;align-items:center}.content-box{grid-template-areas:"🚀 🚀"
				"📚 ✨";grid-template-columns:60% 1fr}.summary-box{display:flex;justify-content:center;align-items:center}}@media(min-width: 1201px){.page{padding-top:0;padding-bottom:0}.content-box{grid-template-areas:"📚 🚀"
				"✨ ✨";grid-template-columns:600px auto}.message-box{display:flex;flex-direction:column;justify-content:flex-end}.excerpt{text-align:left}.summary-box{display:block}}@media(min-width: 1401px){.content-box{grid-template-columns:calc(500px) auto}.message-box{margin-right:calc(-40px * 1)}h1{margin-left:calc(-100px * 1)}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},O2,I2,Ot,{variant:1},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["variant"]}get variant(){return this.$$.ctx[1]}set variant(t){this.$$set({variant:t}),fr()}}customElements.define("gltf-presentation-screen",N2);const U2={title:"Задвижки",excerpt:"Распространенный и надежный тип запорной арматуры. Особенно актуален для магистральных систем, где требуется получить минимальное гидравлическое сопротивление."},F2={webmPath:"https://v0ffk4.github.io/tios-static/video/gateValves.webm",mp4Path:"https://v0ffk4.github.io/tios-static/video/gateValves.mp4"},B2=[{iconPath:"https://v0ffk4.github.io/tios-static/icons/diameter.png",text:"50 ... 1200 мм"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/pressure.png",text:"до 40 бар"},{iconPath:"https://v0ffk4.github.io/tios-static/icons/temperature.png",text:"–50 ... +500 °C"}],jd={content:U2,video:F2,techSummary:B2};function z2(b){let t,r,e,u,d=b[0].content.title+"",o,i,n=b[0].content.excerpt+"",a,f,p,s,l,c,h,m,g,y,_,x,w,j,E,T,A;return{c(){t=tt("div"),r=tt("div"),e=tt("div"),u=tt("h1"),o=_t(),i=tt("p"),a=dr(n),f=_t(),p=tt("div"),p.innerHTML='<basic-button label="Каталог"></basic-button>',s=_t(),l=tt("div"),c=tt("video"),h=tt("source"),g=tt("source"),_=tt("track"),w=dr(`
				Этот браузер не поддерживает видео`),j=_t(),E=tt("div"),T=tt("page-summary"),this.c=ut,me(u,"class","text-screen-title text-with-gradient"),me(i,"class","text-body excerpt"),me(p,"class","button-box"),me(e,"class","message-box"),en(h.src,m=b[0].video.webmPath)||me(h,"src",m),me(h,"type","video/webm"),en(g.src,y=b[0].video.mp4Path)||me(g,"src",y),me(g,"type","video/mp4"),en(_.src,x="/captions/videoBackground.vtt")||me(_,"src",x),me(_,"kind","captions"),me(_,"srclang","en"),me(_,"label","english_captions"),me(c,"class","main-video"),c.autoplay=!0,c.muted=!0,me(l,"class","video-box"),fn(T,"data",A=b[0].techSummary),me(E,"class","tech-summary-box"),me(r,"class","content-box"),me(t,"class","page"),zt(t,"is-safari",b[1]())},m(R,P){lt(R,t,P),Ae(t,r),Ae(r,e),Ae(e,u),u.innerHTML=d,Ae(e,o),Ae(e,i),Ae(i,a),Ae(e,f),Ae(e,p),Ae(r,s),Ae(r,l),Ae(l,c),Ae(c,h),Ae(c,g),Ae(c,_),Ae(c,w),Ae(r,j),Ae(r,E),Ae(E,T)},p(R,[P]){P&1&&d!==(d=R[0].content.title+"")&&(u.innerHTML=d),P&1&&n!==(n=R[0].content.excerpt+"")&&ii(a,n),P&1&&!en(h.src,m=R[0].video.webmPath)&&me(h,"src",m),P&1&&!en(g.src,y=R[0].video.mp4Path)&&me(g,"src",y),P&1&&A!==(A=R[0].techSummary)&&fn(T,"data",A)},i:ut,o:ut,d(R){R&&dt(t)}}}function G2(b,t,r){let{variant:e}=t,u;switch(e){case"gate-valves":u=jd;break;default:u=jd;break}let d=()=>navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1;return b.$$set=o=>{"variant"in o&&r(2,e=o.variant)},[u,d,e]}class V2 extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";.page{min-height:100vh;background-color:var(--color-light-surface);padding-inline:calc(8px * 1);padding-top:40px;padding-bottom:80px;background-color:#fff}.is-safari{background-color:#fff}.content-box{display:grid;gap:calc(16px * 1);grid-template-areas:"🚀"
			"📚"
			"✨"}.video-box{position:relative;grid-area:🚀;display:flex;justify-content:center;align-items:center;aspect-ratio:1 / 1;width:100%;height:auto;overflow:visible}.main-video{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:100%;height:100%}.message-box{grid-area:📚;z-index:1}.excerpt{color:var(--color-light-on-surface);text-align:justify;hyphens:auto}.button-box{margin-top:calc(32px * 1);margin-bottom:40px}.tech-summary-box{grid-area:✨}@media(min-width: 601px){.video-box{width:600px;margin:0 auto}}@media(min-width: 901px){.page{display:flex;justify-content:center;align-items:center}.content-box{grid-template-areas:"🚀 🚀"
				"📚 ✨";grid-template-columns:60% 1fr}.main-video{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:600px;height:600px}.tech-summary-box{display:flex;justify-content:center;align-items:center}}@media(min-width: 1201px){.page{padding-top:0;padding-bottom:0}.content-box{grid-template-areas:"📚 🚀"
				"✨ ✨";grid-template-columns:600px auto}.message-box{display:flex;flex-direction:column;justify-content:flex-end}.excerpt{text-align:left}.tech-summary-box{display:block}}@media(min-width: 1401px){.content-box{grid-template-columns:calc(500px) auto}.main-video{width:800px;height:800px;margin-bottom:calc(-6.4px * 1)}.message-box{margin-right:calc(-40px * 1)}h1{margin-left:calc(-100px * 1)}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},G2,z2,Ot,{variant:2},null),t&&(t.target&&lt(t.target,this,t.anchor),t.props&&(this.$set(t.props),fr()))}static get observedAttributes(){return["variant"]}get variant(){return this.$$.ctx[2]}set variant(t){this.$$set({variant:t}),fr()}}customElements.define("video-screen",V2);function Cd(b,t,r){const e=b.slice();return e[1]=t[r],e}function Ad(b){let t,r,e,u;return{c(){t=tt("li"),r=tt("img"),u=_t(),me(r,"alt",`иконка ${b[1].label}`),en(r.src,e=b[1].iconPath)||me(r,"src",e)},m(d,o){lt(d,t,o),Ae(t,r),Ae(t,u)},p:ut,d(d){d&&dt(t)}}}function H2(b){let t,r,e,u,d=b[0].content.title+"",o,i,n,a,f,p,s,l,c,h,m,g,y=b[0].email.label+"",_,x,w,j,E,T,A,R,P,N;f=new Rl({props:{data:b[0].gltf}});let O=b[0].messengers,D=[];for(let U=0;U<O.length;U+=1)D[U]=Ad(Cd(b,O,U));return{c(){t=tt("div"),r=tt("div"),e=tt("div"),u=tt("h1"),o=_t(),i=tt("p"),i.textContent=`${b[0].content.excerpt}`,n=_t(),a=tt("div"),Kt(f.$$.fragment),p=_t(),s=tt("div"),l=tt("ul"),c=tt("li"),h=tt("img"),g=_t(),_=dr(y),x=_t(),w=tt("img"),E=_t(),T=tt("li"),T.textContent=`${b[0].phone.label}`,A=_t(),R=tt("div"),P=tt("ul");for(let U=0;U<D.length;U+=1)D[U].c();this.c=ut,me(u,"class","text-screen-title text-with-gradient"),me(i,"class","text-body excerpt"),me(e,"class","message-box"),me(a,"class","gltf-box"),me(h,"alt","иконка электронной почты"),en(h.src,m=b[0].email.iconPath)||me(h,"src",m),me(c,"class","text-body"),me(w,"alt","иконка телефона"),en(w.src,j=b[0].phone.iconPath)||me(w,"src",j),me(T,"class","text-body"),me(s,"class","contact-box"),me(R,"class","messengers-box"),me(r,"class","content-box"),me(t,"class","page")},m(U,Y){lt(U,t,Y),Ae(t,r),Ae(r,e),Ae(e,u),u.innerHTML=d,Ae(e,o),Ae(e,i),Ae(r,n),Ae(r,a),Xt(f,a,null),Ae(r,p),Ae(r,s),Ae(s,l),Ae(l,c),Ae(c,h),Ae(c,g),Ae(c,_),Ae(l,x),Ae(l,w),Ae(l,E),Ae(l,T),Ae(r,A),Ae(r,R),Ae(R,P);for(let H=0;H<D.length;H+=1)D[H].m(P,null);N=!0},p(U,[Y]){if(Y&1){O=U[0].messengers;let H;for(H=0;H<O.length;H+=1){const W=Cd(U,O,H);D[H]?D[H].p(W,Y):(D[H]=Ad(W),D[H].c(),D[H].m(P,null))}for(;H<D.length;H+=1)D[H].d(1);D.length=O.length}},i(U){N||(xt(f.$$.fragment,U),N=!0)},o(U){Mt(f.$$.fragment,U),N=!1},d(U){U&&dt(t),Ht(f),Ws(D,U)}}}function W2(b){return[Rs]}class q2 extends xr{constructor(t){super(),this.shadowRoot.innerHTML=`<style>@import "https://v0ffk4.github.io/tios-static/global.css";:root{--margin-bottom:calc(24px * 1);--offset-margin:calc(58px * 1)}.page{min-height:100vh;background-color:var(--color-light-surface);padding-inline:calc(8px * 1);padding-top:calc(40px * 1);padding-bottom:calc(80px * 1)}.content-box{width:100%;display:grid;gap:calc(16px * 1);grid-template-areas:"🚀"
			"📚"
			"💾"
			"💬"}.message-box{grid-area:📚}.excerpt{color:var(--color-light-on-surface);text-align:justify;hyphens:auto}.gltf-box{position:relative;grid-area:🚀;display:flex;justify-content:center;align-items:center;aspect-ratio:1 / 1;width:100%;height:auto;overflow:hidden}.contact-box{grid-area:💾}.messengers-box{grid-area:💬}.contact-box>ul,.messengers-box>ul{display:flex;align-items:center}.contact-box li{display:flex;align-items:center;margin-right:calc(16px * 1)}.contact-box img{margin-right:calc(4px * 1);width:calc(32px * 1);height:calc(32px * 1)}.messengers-box li{margin-right:calc(24px * 1);width:calc(4.8px * 1);height:calc(4.8px * 1)}.messengers-box img{width:calc(4.8px * 1);height:calc(4.8px * 1)}@media(min-width: 620px){.gltf-box{width:600px;margin:0 auto}}@media(min-width: 901px){.content-box{grid-template-areas:"🚀 🚀"
				"📚 📚"
				"💾 💬";grid-template-columns:1fr 1fr}}@media(min-width: 1201px){.page{display:flex;justify-content:center;align-items:center}.content-box{width:auto;grid-template-areas:"📚 🚀"
				"💾 🚀"
				"💬 🚀";grid-template-rows:1fr auto auto}.message-box{display:flex;flex-direction:column;justify-content:flex-end}}@media(min-width: 1401px){h1{margin-left:-60px}.content-box{grid-template-columns:500px 600px}.contact-box,.message-box{padding-block:calc(16px * 1)}}</style>`,Ut(this,{target:this.shadowRoot,props:jr(this.attributes),customElement:!0},W2,H2,Ot,{},null),t&&t.target&&lt(t.target,this,t.anchor)}}customElements.define("contact-screen",q2);console.log("App is loaded");
